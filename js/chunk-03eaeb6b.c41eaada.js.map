{"version":3,"sources":["webpack:///./src/views/OpenChannel.vue?b82c","webpack:///./src/views/OpenChannel.vue?eb3f","webpack:///./src/views/OpenChannel.vue","webpack:///./src/views/OpenChannel.vue?ca51","webpack:///./src/views/OpenChannel.vue?1438"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_a935ad7e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_a935ad7e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","autocomplete","model","value","callback","$$v","valid","expression","column","justify-space-between","fill-height","align-center","justify-center","row","xs10","token","limit","deposit","xs2","_v","_s","$t","xs8","partner","enabled","text","on","click","$event","openChannel","display","loading","steps","done-step","doneStep","current","done","description","error","title","button-label","dismiss","staticRenderFns","OpenChannelvue_type_script_lang_ts_OpenChannel","_Mixins","OpenChannel","_this","Object","classCallCheck","types","inherits","createClass","key","to","from","next","window","confirm","_openChannel","asyncToGenerator","regeneratorRuntime","mark","_callee","depositAmount","_this2","wrap","_context","prev","balance_utils","parse","decimals","eq","constants","$raiden","address","progress","setTimeout","navigateToSelectPaymentTarget","t0","raiden_service","message","stop","apply","arguments","_created","_callee2","_this$$route$params","tokenInfo","_context2","$route","params","address_utils","checkAddressChecksum","navigateToHome","abrupt","navigateToTokenSelect","$store","getters","getToken","sent","created","vue_property_decorator","navigation_mixin","tslib_es6","components","TokenInformation","Divider","ErrorScreen","Stepper","ActionButton","AmountInput","OpenChannelvue_type_script_lang_ts_","views_OpenChannelvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","installComponents_default","VFlex","VForm","VLayout"],"mappings":"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","file":"js/chunk-03eaeb6b.c41eaada.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=a935ad7e&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=a935ad7e&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{staticClass:\"open-channel\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"justify-space-between\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\",\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\"}},[_c('amount-input',{attrs:{\"token\":_vm.token,\"limit\":\"\"},model:{value:(_vm.deposit),callback:function ($$v) {_vm.deposit=$$v},expression:\"deposit\"}})],1)],1),_c('divider'),_c('token-information',{attrs:{\"token\":_vm.token}}),_c('divider'),_c('v-layout',{staticClass:\"open-channel__hub\",attrs:{\"align-center\":\"\",\"justify-center\":\"\",\"row\":\"\"}},[_c('v-flex',{staticClass:\"open-channel__hub__label text-xs-left\",attrs:{\"xs2\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('open-channel.hub'))+\"\\n      \")]),_c('v-flex',{staticClass:\"open-channel__hub__address text-xs-left\",attrs:{\"xs8\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.partner)+\"\\n      \")])],1),_c('action-button',{attrs:{\"enabled\":_vm.valid,\"text\":_vm.$t('open-channel.open-button')},on:{\"click\":function($event){return _vm.openChannel()}}}),_c('stepper',{attrs:{\"display\":_vm.loading,\"steps\":_vm.steps,\"done-step\":_vm.doneStep,\"current\":_vm.current,\"done\":_vm.done}}),_c('error-screen',{attrs:{\"description\":_vm.error,\"title\":_vm.$t('open-channel.error.title'),\"button-label\":_vm.$t('open-channel.error.button')},on:{\"dismiss\":function($event){_vm.error = ''}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport AmountInput from '../components/AmountInput.vue';\nimport {\n  ChannelDepositFailed,\n  ChannelOpenFailed\n} from '@/services/raiden-service';\nimport {\n  emptyDescription,\n  StepDescription,\n  Token,\n  TokenPlaceholder\n} from '@/model/types';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport Stepper from '@/components/Stepper.vue';\nimport { Zero } from 'ethers/constants';\nimport AddressUtils from '@/utils/address-utils';\nimport NavigationMixin from '@/mixins/navigation-mixin';\nimport { Route } from 'vue-router';\nimport ErrorScreen from '@/components/ErrorScreen.vue';\nimport Divider from '@/components/Divider.vue';\nimport TokenInformation from '@/components/TokenInformation.vue';\nimport ActionButton from '@/components/ActionButton.vue';\n\n@Component({\n  components: {\n    TokenInformation,\n    Divider,\n    ErrorScreen,\n    Stepper,\n    ActionButton,\n    AmountInput\n  }\n})\nexport default class OpenChannel extends Mixins(NavigationMixin) {\n  partner: string = '';\n  token: Token = TokenPlaceholder;\n\n  deposit: string = '0.00';\n\n  valid: boolean = false;\n  loading: boolean = false;\n  error: string = '';\n\n  steps: StepDescription[] = [];\n\n  doneStep: StepDescription = emptyDescription();\n  current = 0;\n  done = false;\n\n  beforeRouteLeave(to: Route, from: Route, next: any) {\n    if (!this.loading) {\n      next();\n    } else {\n      if (window.confirm(this.$t('open-channel.confirmation') as string)) {\n        next();\n      } else {\n        next(false);\n      }\n    }\n  }\n\n  async openChannel() {\n    const token = this.token;\n    const depositAmount = BalanceUtils.parse(this.deposit, token.decimals);\n\n    if (depositAmount.eq(Zero)) {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription\n      ];\n    } else {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription,\n        (this.$t('open-channel.steps.transfer') as any) as StepDescription,\n        (this.$t('open-channel.steps.deposit') as any) as StepDescription\n      ];\n    }\n\n    this.loading = true;\n\n    try {\n      await this.$raiden.openChannel(\n        token.address,\n        this.partner,\n        depositAmount,\n        progress => (this.current = progress.current - 1)\n      );\n\n      this.done = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.navigateToSelectPaymentTarget(this.token.address);\n      }, 2000);\n    } catch (e) {\n      this.error = '';\n      if (e instanceof ChannelOpenFailed) {\n        this.error = this.$t('open-channel.error.open-failed') as string;\n      } else if (e instanceof ChannelDepositFailed) {\n        this.error = this.$t('open-channel.error.deposit-failed') as string;\n      } else {\n        this.error = e.message;\n      }\n\n      this.done = false;\n      this.loading = false;\n    }\n  }\n\n  async created() {\n    this.doneStep = (this.$t(\n      'open-channel.steps.done'\n    ) as any) as StepDescription;\n    const { token, partner } = this.$route.params;\n\n    if (!AddressUtils.checkAddressChecksum(token)) {\n      this.navigateToHome();\n      return;\n    }\n\n    if (!AddressUtils.checkAddressChecksum(partner)) {\n      this.navigateToTokenSelect();\n      return;\n    } else {\n      this.partner = partner;\n    }\n\n    let tokenInfo = this.$store.getters.token(token);\n    if (!tokenInfo) {\n      tokenInfo = await this.$raiden.getToken(token);\n    }\n\n    if (!tokenInfo) {\n      this.navigateToHome();\n    } else {\n      this.token = tokenInfo;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OpenChannel.vue?vue&type=template&id=a935ad7e&scoped=true&\"\nimport script from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nexport * from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OpenChannel.vue?vue&type=style&index=0&id=a935ad7e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a935ad7e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/home/circleci/src/raiden-dapp/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib'\nimport { VForm } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {VFlex,VForm,VLayout})\n"],"sourceRoot":""}
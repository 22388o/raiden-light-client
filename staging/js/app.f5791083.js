(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0f59c9c8":"a368ca14","chunk-05979995":"e0acc9c8","chunk-1e91e4dc":"f91c5b18","chunk-08ebae94":"6a2edfbb","chunk-273240ab":"b9a2d248","chunk-63df1926":"ec8a0849","chunk-68a689d2":"bfbfa7a9","chunk-6f5c32d1":"e71b0f07","chunk-b70bf26c":"ebcaf9f6","chunk-bb2e3f3e":"4f60daec","chunk-1670e690":"04a62f9c","chunk-b48b5210":"a71eb7f6","chunk-55829827":"10a99dce","chunk-5e8ae369":"0f040b08","chunk-433d08ba":"07b32f2c","chunk-068cc0d3":"3f4b0677","chunk-56783d08":"aec89900","chunk-adddc802":"81be698c","chunk-c5fd2634":"60cc5e2b","chunk-9714f45e":"114c22b2","chunk-3d571b96":"94ecc62c","chunk-7ee7822e":"5a29fa50","chunk-d86182e6":"e36106cf"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0f59c9c8":1,"chunk-05979995":1,"chunk-1e91e4dc":1,"chunk-08ebae94":1,"chunk-273240ab":1,"chunk-63df1926":1,"chunk-68a689d2":1,"chunk-6f5c32d1":1,"chunk-b70bf26c":1,"chunk-bb2e3f3e":1,"chunk-1670e690":1,"chunk-b48b5210":1,"chunk-55829827":1,"chunk-5e8ae369":1,"chunk-433d08ba":1,"chunk-068cc0d3":1,"chunk-56783d08":1,"chunk-adddc802":1,"chunk-c5fd2634":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0f59c9c8":"0be479e4","chunk-05979995":"1747eb60","chunk-1e91e4dc":"e7cb60cc","chunk-08ebae94":"b60c66cc","chunk-273240ab":"a9f4933e","chunk-63df1926":"e6751f10","chunk-68a689d2":"36b3d7bb","chunk-6f5c32d1":"a9a5adf0","chunk-b70bf26c":"d32073bd","chunk-bb2e3f3e":"7bcf6af2","chunk-1670e690":"ea3e8542","chunk-b48b5210":"ca535ea5","chunk-55829827":"d57f34d1","chunk-5e8ae369":"284343a3","chunk-433d08ba":"2f2d8b85","chunk-068cc0d3":"96bf5c72","chunk-56783d08":"4c0bc679","chunk-adddc802":"76d4519e","chunk-c5fd2634":"8b191d91","chunk-9714f45e":"31d6cfe0","chunk-3d571b96":"31d6cfe0","chunk-7ee7822e":"31d6cfe0","chunk-d86182e6":"31d6cfe0"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("f6c2"),i=n("ad5b");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],h.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],h.prototype,"fullscreen",void 0),h=Object(o["a"])([Object(i["a"])({})],h);var m=h,v=m,g=(n("71a0"),n("22b8")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("4f30"),a=n("a3d5"),o=n("230b"),i=n.n(o),c=n("5287"),s=n.n(c);function u(e,t){return b(e)||d(e,t)||p(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=function(){function e(){y(this,e)}return m(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("f6c2"),a=n("ad5b"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=y();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t,n){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{token:e,target:t},query:{amount:n}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"165c":function(e,t,n){"use strict";var r=n("a60c"),a=n.n(r);a.a},"1a83":function(e,t,n){"use strict";var r=n("b2fd"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("c2d2"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1f7b":function(e,t,n){"use strict";var r=n("cb6d"),a=n.n(r);a.a},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("f6c2"),i=n("ad5b"),c=n("2b7f"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=h(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:p({},Object(c["e"])(["defaultAccount"]))})],w);var k=w,_=k,j=(n("1a83"),n("22b8")),E=n("a5de"),T=n.n(E),x=n("5827"),S=Object(j["a"])(_,r,a,!1,null,"18cb3a6d",null);t["a"]=S.exports;T()(S,{VImg:x["a"]})},"2f48":function(e,t,n){},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},3576:function(e,t,n){},"35e7":function(e,t,n){},"36d2":function(e,t,n){},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},"530c":function(e,t,n){},6:function(e,t){},"61a6":function(e,t,n){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("f6c2"),i=n("0a08"),c=n("ad5b");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return p(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,k=(n("1c30"),n("22b8")),_=n("a5de"),j=n.n(_),E=n("e2bc"),T=n("6a6a"),x=n("5033"),S=n("21e4"),A=Object(k["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=A.exports;j()(A,{VBtn:E["a"],VCard:T["a"],VDialog:x["a"],VIcon:S["a"]})},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("36d2"),a=n.n(r);a.a},"72ec":function(e,t,n){"use strict";var r=n("2f48"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("f6c2"),i=n("ad5b");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=h();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){p(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("8652"),n("22b8")),k=n("a5de"),_=n.n(k),j=n("e2bc"),E=n("fce6"),T=n("21e4"),x=n("e66f"),S=Object(w["a"])(O,r,a,!1,null,"bff458d8",null);t["a"]=S.exports;_()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:x["a"]})},"753f":function(e,t,n){"use strict";var r=n("61a6"),a=n.n(r);a.a},"756c":function(e,t,n){e.exports=n.p+"img/notification_block.ad9b07ff.svg"},"77fd":function(e,t,n){"use strict";var r=n("f6c2"),a=n("ad5b");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8652:function(e,t,n){"use strict";var r=n("a03d"),a=n.n(r);a.a},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8a87":function(e,t,n){"use strict";var r=n("35e7"),a=n.n(r);a.a},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return B}));var r=n("4bf2"),a=n.n(r),o=n("6f91"),i=n.n(o),c=n("e55b");function s(e){return p(e)||l(e)||m(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return v(e)}function f(e,t){return y(e)||b(e,t)||m(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function h(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function m(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function x(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function S(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?x(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?k(k({},e),{},{payload:x(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function A(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return D.apply(this,arguments)}function D(){return D=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var R=/^raiden:(0x[0-9a-f]{40})$/i;function C(e){return P.apply(this,arguments)}function P(){return P=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function I(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return C(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=S(n);i&&j.put(E,k({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,k({logger:r,level:e,message:n.map(A)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var U=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function M(e){var t,n=h(U);try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,p,f,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,p=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,f=new Date(n.key).toISOString(),d=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(f).concat(d).concat(b," [").concat(s,"] \t=> ").concat(p,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=M(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("f6c2"),i=n("ad5b"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return p(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,k=(n("72ec"),n("22b8")),_=n("a5de"),j=n.n(_),E=n("2d9f"),T=Object(k["a"])(w,r,a,!1,null,"4eb33862",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a03d:function(e,t,n){},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_TOO_EXPENSIVE":"Pathfinding Service price higher than pfsMaxFee.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_DEPOSIT_OUTDATED":"The UDC contains a target balance different than requested deposit","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("49c0");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},a60c:function(e,t,n){},b2fd:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.11.1","contracts":"0.37.1"}')},c2d2:function(e,t,n){},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cb6d:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("4f30"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("transition",{attrs:{name:"slide"}},[n("router-view",{attrs:{name:"notifications"}})],1),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-snackbar")],1)},o=[],i=n("f6c2"),c=n("ad5b"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("div",{staticClass:"app-header__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da")}})],1):e._e()],1),r("div",{staticClass:"app-header__title"},[r("span",{staticClass:"app-header__title__route"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__title__network"},[e._v(" "+e._s(e.network)+" ")])]),r("div",{staticClass:"app-header__icons"},[e.showTitleOnly?e._e():r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1),e.isDisclaimerRoute?e._e():r("header-identicon",{staticClass:"app-header__icons__identicon",nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)])},l=[],p=n("2b7f"),f=n("80bf"),d=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function j(e){var t=x();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=Object(p["a"])("notifications"),N=A.mapState,D=A.mapMutations,R=function(e){k(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===f["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:d["a"],AddressDisplay:b["a"]},computed:m(m(m({},Object(p["e"])(["defaultAccount"])),N(["newNotifications"])),Object(p["c"])(["network","isConnected"])),methods:m({},D(["notificationsViewed"]))})],R);var C=R,P=C,I=(n("8a87"),n("22b8")),L=n("a5de"),U=n.n(L),M=n("fdb5"),B=n("e2bc"),F=n("5827"),W=Object(I["a"])(P,u,l,!1,null,"a4037e3a",null),$=W.exports;U()(W,{VBadge:M["a"],VBtn:B["a"],VImg:F["a"]});var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},V=[],q=n("0a08");function K(e){return K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function X(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Q(e,t)}function z(e){var t=te();return function(){var n,r=ne(e);if(t){var a=ne(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}var re=function(e){X(n,e);var t=z(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Y(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);re=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],re);var ae=re,oe=ae,ie=n("21e4"),ce=n("fd39"),se=Object(I["a"])(oe,H,V,!1,null,null,null),ue=se.exports;U()(se,{VIcon:ie["a"],VSnackbar:ce["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function fe(e){return fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function he(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e){var t=we();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var _e=function(e){he(n,e);var t=ve(n);function n(){var e;return de(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return ye(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);_e=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],_e);var je=_e,Ee=je,Te=Object(I["a"])(Ee,le,pe,!1,null,null,null),xe=Te.exports;U()(Te,{VBtn:B["a"],VSnackbar:ce["a"]});var Se,Ae,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,app:"",rounded:"","max-width":"550px",color:"primary"},on:{input:function(t){return e.setNotificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{icon:"",left:""},on:{click:function(t){return e.dismiss()}}},"v-btn",n,!1),[r("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"2"}},[r("img",{attrs:{src:n("756c")}})]),r("v-col",{staticClass:"notification-area__title"},[r("span",[e._v(" "+e._s(e.notification.title)+" ")])])],1)],1)},De=[];function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fe(e,t)}function We(e){var t=Ve();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Se||(Se={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(Ae||(Ae={}));var Ke={id:-1,title:"",description:"",icon:"",display:!1,duration:5e3,importance:Se.LOW,context:Ae.NONE,received:new Date},Ge=function(e){Be(n,e);var t=We(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.notification=Ke,e}return Me(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ke}},{key:"dismiss",value:function(){this.setNotificationShown(this.notification.id),this.notification=Pe(Pe({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Ge.prototype,"onQueueChange",null),Ge=Object(i["a"])([Object(c["a"])({computed:Pe({},Object(p["c"])("notifications",["notificationQueue"])),methods:Pe({},Object(p["d"])("notifications",["setNotificationShown"]))})],Ge);var Ze=Ge,Ye=Ze,Xe=(n("165c"),n("fce6")),Qe=n("e66f"),ze=Object(I["a"])(Ye,Ne,De,!1,null,"1d4a3af2",null),Je=ze.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(ze,{VBtn:B["a"],VCol:Xe["a"],VIcon:ie["a"],VRow:Qe["a"],VSnackbar:ce["a"]});var pt=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));pt=Object(i["a"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:ue,UpdateSnackbar:xe,NotificationSnackbar:Je}})],pt);var ft=pt,dt=ft,bt=(n("1f7b"),n("b70e")),yt=n("2607"),ht=n("9d44"),mt=Object(I["a"])(dt,a,o,!1,null,"670b9005",null),vt=mt.exports;U()(mt,{VApp:bt["a"],VContainer:yt["a"],VMain:ht["a"]});var gt=n("0684");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("efba");function wt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=kt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function kt(e,t){if(e){if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n){var r,a=wt(this.children);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o(e);if(null===i)return void n();if(void 0!==i)return void n(i)}}catch(c){a.e(c)}finally{a.f()}n({})}var Et=n("66f9"),Tt=n("f455"),xt=n("87a2"),St=n("a308"),At=n.n(St),Nt=n("473d"),Dt=n.n(Nt),Rt=n("035e"),Ct=n.n(Rt),Pt=n("95e4"),It=n.n(Pt),Lt=n("d328"),Ut=n.n(Lt),Mt=n("31ec"),Bt=n.n(Mt),Ft=n("e590"),Wt=n.n(Ft),$t=n("12aa"),Ht=n.n($t);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){return Qt(e)||Xt(e)||Yt(e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qt(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e){var t=Object.values(e).map((function(e){return e.id}));return Math.max.apply(Math,Gt(t).concat([0]))+1}var en={notificationDelete:function(e,t){var n=qt({},e.notifications);delete n[t],e.notifications=n},notificationsViewed:function(e){e.newNotifications=!1},notificationAddOrReplace:function(e,t){var n,r,a,o,i,c=e.notifications,s=Object.values(c).filter((function(e){var n=e.txHash;return n&&n===t.txHash})),u=null!==(n=null===(r=s[0])||void 0===r?void 0:r.id)&&void 0!==n?n:Jt(c),l=!(null===(a=s[0])||void 0===a?void 0:a.id),p=qt(qt({},t),{},{id:u,received:new Date,display:l,context:null!==(o=t.context)&&void 0!==o?o:Ae.NONE,duration:null!==(i=t.duration)&&void 0!==i?i:5e3});e.notifications=qt(qt({},c),{},Kt({},p.id,p)),e.newNotifications=!0},setNotificationShown:function(e,t){e.notifications[t].display=!1},clear:function(e){e.notifications=[]}};function tn(e){return on(e)||an(e)||rn(e)||nn()}function nn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rn(e,t){if(e){if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function an(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function on(e){if(Array.isArray(e))return cn(e)}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sn={notifications:function(e){return Object.values(e.notifications).sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications,n=Object.values(t).map((function(e){return e.id}));return Math.max.apply(Math,tn(n).concat([0]))+1},notificationQueue:function(e){return Object.values(e.notifications).filter((function(e){return e.importance===Se.HIGH&&!0===e.display}))}},un=function(){return{notifications:{},newNotifications:!1}},ln=un(),pn=ln,fn={namespaced:!0,mutations:en,state:pn,getters:sn};function dn(e){return hn(e)||yn(e)||kn(e)||bn()}function bn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function hn(e){if(Array.isArray(e))return _n(e)}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){return En(e)||jn(e,t)||kn(e,t)||wn()}function wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kn(e,t){if(e){if("string"===typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function En(e){if(Array.isArray(e))return e}r["a"].use(p["b"]);var Tn={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:xt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:xt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function xn(){return It()(Tn)}var Sn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},An=new Et["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Nn=new Et["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),Dn={state:xn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=On(r[n],2),o=a[0],i=a[1];o in e.tokens&&Wt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=vn(vn({},e.tokens[o]),i):e.tokens=vn(vn({},e.tokens),{},gn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=dn(t)},updatePresence:function(e,t){e.presences=vn(vn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted,r=e.stateBackup;Object.assign(e,vn(vn({},xn()),{},{settings:t,disclaimerAccepted:n,stateBackup:r}))},updateTransfers:function(e,t){e.transfers=vn(vn({},e.transfers),{},gn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return At()(Ct()(Dt()(e.channels),(function(e){return!Ht()(e)})),(function(n){var r=Ut()(n,t,Object(xt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Sn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Ht()(r)&&(n=Dt()(r)),n}},openChannels:function(e){return Object.keys(e.channels).length>0},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Tt["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Tt["b"].open}));return Bt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){return Object.values(e.transfers).find((function(e){return e.paymentId.eq(t)}))}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[An.plugin,Nn.plugin],modules:{notifications:fn}},Rn=new p["b"].Store(Dn);function Cn(e){var t=Rn.state.disclaimerAccepted,n=e.name===f["a"].DISCLAIMER;return t||n?!t&&n?null:t&&n?{name:f["a"].HOME}:void 0:{name:f["a"].DISCLAIMER,query:{redirectTo:e.fullPath}}}var Pn=[f["a"].ACCOUNT_ROOT,f["a"].ACCOUNT_BACKUP,f["a"].ACCOUNT_RAIDEN,f["a"].ACCOUNT_SETTINGS,f["a"].ACCOUNT_WITHDRAWAL,f["a"].ACCOUNT_UDC];function In(e){var t,n=Rn.getters.isConnected,r=Pn.includes(null!==(t=e.name)&&void 0!==t?t:""),a=e.name===f["a"].HOME;if(!r)return n||a?!n&&a?null:n&&a?{name:f["a"].TRANSFER}:void 0:{name:f["a"].HOME,query:{redirectTo:e.fullPath}}}function Ln(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-55829827").then(n.bind(null,"c284"))}),r()}function Un(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-5e8ae369").then(n.bind(null,"47f5"))}),r()}var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("div",{staticClass:"disclaimer"},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1),n("action-button",{staticClass:"disclaimer__accept-button",attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},Bn=[],Fn=n("750b");function Wn(e){return Wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}function qn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kn(e,t)}function Gn(e){var t=Xn();return function(){var n,r=Qn(e);if(t){var a=Qn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){return!t||"object"!==Wn(t)&&"function"!==typeof t?Yn(e):t}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}var zn=function(e){qn(n,e);var t=Gn(n);function n(){var e;return $n(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return Vn(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].HOME}}}]),n}(c["e"]);zn=Object(i["a"])([Object(c["a"])({components:{ActionButton:Fn["a"]}})],zn);var Jn=zn,er=Jn,tr=(n("f673"),n("6a90")),nr=Object(I["a"])(er,Mn,Bn,!1,null,"59dd71ba",null),rr=nr.exports;U()(nr,{VCheckbox:tr["a"],VContainer:yt["a"]});var ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)},or=[],ir=n("4bf2"),cr=n.n(ir),sr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},ur=[],lr=n("66bc"),pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},fr=[];function dr(e){return dr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),e}function mr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function gr(e){var t=kr();return function(){var n,r=_r(e);if(t){var a=_r(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(e,t){return!t||"object"!==dr(t)&&"function"!==typeof t?wr(e):t}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _r(e){return _r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_r(e)}var jr=function(e){mr(n,e);var t=gr(n);function n(){return br(this,n),t.apply(this,arguments)}return hr(n,[{key:"networkUnsupported",get:function(){return this.reason===xt["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===xt["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===xt["a"].RDN_STATE_MIGRATION}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0})],jr.prototype,"reason",void 0),jr=Object(i["a"])([Object(c["a"])({})],jr);var Er=jr,Tr=Er,xr=(n("753f"),n("a349")),Sr=Object(I["a"])(Tr,pr,fr,!1,null,"7b92b083",null),Ar=Sr.exports;function Nr(e){return Nr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){Cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Ir(e.prototype,t),n&&Ir(e,n),e}function Ur(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}function Mr(e,t){return Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mr(e,t)}function Br(e){var t=$r();return function(){var n,r=Hr(e);if(t){var a=Hr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(e,t){return!t||"object"!==Nr(t)&&"function"!==typeof t?Wr(e):t}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Hr(e){return Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hr(e)}U()(Sr,{VAlert:xr["a"]});var Vr=function(e){Ur(n,e);var t=Br(n);function n(){var e;return Pr(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return Lr(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",Rr(Rr({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0,type:Boolean,default:!1})],Vr.prototype,"visible",void 0),Object(i["a"])([Object(c["d"])({default:!1,required:!0,type:Boolean})],Vr.prototype,"connecting",void 0),Object(i["a"])([Object(c["d"])({required:!0})],Vr.prototype,"hasProvider",void 0),Object(i["a"])([Object(c["b"])()],Vr.prototype,"close",null),Object(i["a"])([Object(c["b"])()],Vr.prototype,"connect",null),Vr=Object(i["a"])([Object(c["a"])({components:{RaidenDialog:lr["a"],ActionButton:Fn["a"],NoAccessMessage:Ar},computed:Object(p["e"])(["accessDenied"])})],Vr);var qr=Vr,Kr=qr,Gr=(n("e4b6"),n("2caa")),Zr=Object(I["a"])(Kr,sr,ur,!1,null,"469a86df",null),Yr=Zr.exports;function Xr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Xr(o,r,a,i,c,"next",e)}function c(e){Xr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),e}U()(Zr,{VCardText:Gr["b"],VCardTitle:Gr["c"]});var ta=function(){function e(){zr(this,e)}return ea(e,null,[{key:"provider",value:function(){var e=Qr(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,!t){e.next=5;break}n=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 5:if("undefined"===typeof window.ethereum){e.next=12;break}return window.ethereum.autoRefreshOnNetworkChange=!1,e.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:n=window.ethereum,e.next=13;break;case 12:window.web3&&(n=window.web3.currentProvider);case 13:return n&&n.isMetaMask&&n.on("chainChanged",(function(){return window.location.replace(window.location.origin)})),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return la(e)||ua(e,t)||ca(e,t)||ia()}function ia(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ca(e,t){if(e){if("string"===typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sa(e,t):void 0}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ua(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function la(e){if(Array.isArray(e))return e}function pa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function fa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){pa(o,r,a,i,c,"next",e)}function c(e){pa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return t&&ba(e.prototype,t),n&&ba(e,n),e}ta.injectedWeb3Available=function(){return window.ethereum||window.web3};var ha=function(){function e(){da(this,e)}return ya(e,null,[{key:"contracts",value:function(){var e=fa(cr.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,p;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=oa(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=oa(s,2),l=u[0],p=u[1],e.abrupt("return",ra(ra({},l.contracts),p.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=fa(cr.a.mark((function e(){var t,n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function ma(e){return ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ka(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wa(o,r,a,i,c,"next",e)}function c(e){wa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t&&ja(e.prototype,t),n&&ja(e,n),e}function Ta(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function xa(e,t){return xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xa(e,t)}function Sa(e){var t=Da();return function(){var n,r=Ra(e);if(t){var a=Ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Aa(this,n)}}function Aa(e,t){return!t||"object"!==ma(t)&&"function"!==typeof t?Na(e):t}function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ra(e)}var Ca=function(e){Ta(n,e);var t=Sa(n);function n(){var e;return _a(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Ea(n,[{key:"created",value:function(){var e=ka(cr.a.mark((function e(){var t;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ta.injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,ha.configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=ka(cr.a.mark((function e(){var t,n,r,a;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,a=this.stateBackup,this.$store.commit("reset"),this.$store.commit("accessDenied",xt["a"].UNDEFINED),e.next=11,this.$raiden.connect(a,!!n||void 0);case 11:this.connecting=!1,this.accessDenied||(this.connectDialog=!1,this.$router.push(this.navigationTarget));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].TRANSFER}}}]),n}(c["e"]);Ca=Object(i["a"])([Object(c["a"])({computed:ga(ga({},Object(p["e"])(["loading","accessDenied","stateBackup","settings"])),Object(p["c"])(["isConnected","tokens"])),components:{ActionButton:Fn["a"],ConnectDialog:Yr,NoAccessMessage:Ar}})],Ca);var Pa=Ca,Ia=Pa,La=(n("fe3a"),Object(I["a"])(Ia,ar,or,!1,null,"54406a52",null)),Ua=La.exports;U()(La,{VCol:Xe["a"],VContainer:yt["a"],VImg:F["a"],VRow:Qe["a"]});var Ma=[{path:"/",name:f["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:rr},{path:"*",redirect:"/"},{path:"/home",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Ua},{path:"/transfer/:token?",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-68a689d2"),n.e("chunk-bb2e3f3e"),n.e("chunk-1e91e4dc"),n.e("chunk-1670e690")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-68a689d2"),n.e("chunk-b70bf26c")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-1e91e4dc"),n.e("chunk-08ebae94")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-68a689d2"),n.e("chunk-bb2e3f3e"),n.e("chunk-433d08ba"),n.e("chunk-c5fd2634")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-68a689d2"),n.e("chunk-433d08ba"),n.e("chunk-068cc0d3")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-68a689d2"),n.e("chunk-6f5c32d1")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:Ln},{path:"/account",beforeEnter:Un,children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-b48b5210")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-63df1926")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-68a689d2"),n.e("chunk-adddc802")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-05979995")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-0f59c9c8"),n.e("chunk-273240ab")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-68a689d2"),n.e("chunk-56783d08")]).then(n.bind(null,"4c07"))}}]}];r["a"].use(Ot["a"]);var Ba=new Ot["a"]({base:"/staging/",mode:"hash",routes:Ma});Ba.beforeEach(jt.bind({children:[Cn,In]}));var Fa=Ba,Wa=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var $a=n("a3d5"),Ha=n("49c0"),Va=n("22ee"),qa=n("70de"),Ka=n("a8c1"),Ga=n.n(Ka),Za=n("89d8"),Ya=n("5b8f");function Xa(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Ya["a"]);var Qa=new Ya["a"]({locale:"en",fallbackLocale:"en",messages:Xa()}),za=n("2dfa"),Ja=n.n(za);function eo(e){return eo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}function no(e){var t=co();return function(){var n,r=lo(e);if(t){var a=lo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(e,t){return!t||"object"!==eo(t)&&"function"!==typeof t?ao(e):t}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e){var t="function"===typeof Map?new Map:void 0;return oo=function(e){if(null===e||!so(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return io(e,arguments,lo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),uo(n,e)},oo(e)}function io(e,t,n){return io=co()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&uo(o,n.prototype),o},io.apply(null,arguments)}function co(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function so(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function uo(e,t){return uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uo(e,t)}function lo(e){return lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lo(e)}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t){return mo(e)||ho(e,t)||Oo(e,t)||yo()}function yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ho(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mo(e){if(Array.isArray(e))return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function go(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Oo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Oo(e,t){if(e){if("string"===typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ko(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ko(o,r,a,i,c,"next",e)}function c(e){ko(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t,n){return t&&Eo(e.prototype,t),n&&Eo(e,n),e}var xo=function(){function e(t){jo(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return To(e,[{key:"updateBalances",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=_o(cr.a.mark((function e(){var t,n,r,a,o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=go(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new So(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=_o(cr.a.mark((function t(n,r){var a,o,i,c,s,u=this;return cr.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.configuration();case 3:return o=t.sent,t.next=6,ta.provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=50;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Tt["f"](Tt["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=29,this.monitorPreSetTokens();case 29:return a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type})),Object(qa["a"])((function(){return u.fetchTokenData(Ja()(u.store.getters.tokens.map((function(e){return e.address})).concat(u._userDepositTokenAddress)))}))).subscribe(),a.events$.pipe(Object(Va["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),null===(n=t.caps)||void 0===n?void 0:n[Tt["a"].RECEIVE]){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",vo({},t.payload.token,{address:t.payload.token})),e.next=46;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",vo({},t.meta.address,t.payload.available)),e.next=46;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=46;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=46;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=46;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner);case 31:e.next=46;break;case 33:if("channel/settle/failure"!==t.type){e.next=38;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner);case 36:e.next=46;break;case 38:if("channel/open/success"!==t.type){e.next=43;break}return e.next=41,u.notifyChannelOpenSuccess(t.payload.txBlock,t.payload.txHash,t.payload.confirmed,t.meta.partner);case 41:e.next=46;break;case 43:if("channel/open/failed"!==t.type){e.next=46;break}return e.next=46,u.notifyChannelOpenFailed(t.payload.message);case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=42,this.getBalance();case 42:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=50;break}return t.t2=this.store,t.next=48,this.getBalance(a.address);case 48:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 50:t.next=56;break;case 52:t.prev=52,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?xt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?xt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Ao?xt["a"].INITIALIZATION_FAILED:xt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 56:this.store.commit("loadComplete");case 57:case"end":return t.stop()}}),t,this,[[0,52]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:Qa.t("receiving-disabled-dialog.title"),description:Qa.t("receiving-disabled-dialog.body"),importance:Se.HIGH,context:Ae.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=_o(cr.a.mark((function e(){var t,n,r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=go(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=_o(cr.a.mark((function e(t,n,r){var a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=$a["a"].toUnits(n,i),s="string"===typeof t?Qa.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Qa.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.failure.title"),description:u,context:Ae.ERROR,importance:Se.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=_o(cr.a.mark((function e(t,n){var r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=$a["a"].toUnits(t,o),c=$a["a"].toUnits(n,o),e.next=6,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.success.title"),description:Qa.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:Ae.INFO,importance:Se.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=_o(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=$a["a"].toUnits(r,c),e.next=5,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.ms-balance-proof.title"),description:Qa.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:Ae.INFO,importance:Se.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Qa.t("notifications.settlement.success.description",{partner:t}),e.next=3,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.success.title"),description:n,icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.failure.title"),description:Qa.t("notifications.settlement.failure.description",{partner:t}),icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenSuccess",value:function(){var e=_o(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=void 0!==(null===(o=this.store.state)||void 0===o||null===(i=o.config)||void 0===i?void 0:i.confirmationBlocks)?t+this.store.state.config.confirmationBlocks:0,s=Qa.t("notifications.channel-open.success.description",{partner:a}),e.next=4,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.success.title"),description:s,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH,txConfirmationBlock:c,txHash:n,txConfirmed:r});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenFailed",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.failure.title"),description:t,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",$a["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=_o(cr.a.mark((function e(t){var n,r,a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=bo(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=_o(cr.a.mark((function e(t,n,r,a){var o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Tt["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=_o(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=_o(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=_o(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=_o(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=_o(cr.a.mark((function e(t){var n,r=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",vo({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Ga()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=_o(cr.a.mark((function e(t,n,r,a,o){var i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=_o(cr.a.mark((function e(t,n,r,a){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=_o(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=_o(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=_o(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Tt["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=_o(cr.a.mark((function e(t){var n,r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",vo({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=_o(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._raiden.stop(),e.abrupt("return",this._raiden.dumpDatabase());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Ha["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Ha["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=_o(cr.a.mark((function e(t,n){var r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=_o(cr.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=_o(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Za["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,Ga()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=fo(fo({},t),r[e]),delete r[e])})),i=function(){var e=_o(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=fo(fo({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,Ga()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=_o(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=_o(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=_o(cr.a.mark((function e(t){var n,r,a,o,i=arguments;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ha.contracts();case 6:return o=e.sent,e.next=9,Tt["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Ao(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),So=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error)),Ao=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error));function No(e,t){e.prototype.$raiden=new xo(Rn)}var Do=n("5ffb"),Ro=n.n(Do);function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t,n){return t&&Po(e.prototype,t),n&&Po(e,n),e}var Lo=function(){function e(){Co(this,e),this.cache={}}return Io(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Ro()(e);return this.cache[e]=n,n}}]),e}();function Uo(e,t){e.prototype.$identicon=new Lo}n("643f"),n("b4fc"),n("bd89");var Mo=n("bc0e");r["a"].use(Mo["a"]);var Bo=new Mo["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Fo=n("a24d"),Wo=(n("6a4f"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Wo["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Wa["b"])(),r["a"].use(No),r["a"].use(Uo),r["a"].use(Fo["a"]),new r["a"]({vuetify:Bo,router:Fa,store:Rn,i18n:Qa,render:function(e){return e(vt)}}).$mount("#app")},e4b6:function(e,t,n){"use strict";var r=n("e752"),a=n.n(r);a.a},e752:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I have read, understood and hereby accept the above disclaimer and privacy warning","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","block-count-progress":"Blocks remaining: ","settlement":{"icon":"notification_settle","success":{"title":"Channel Settlement","description":"Channel with {partner} was settled."},"failure":{"title":"Channel Settlement","description":"Channel settlement with {partner} failed."}},"channel-open":{"icon":"notification_channels","success":{"title":"Channel Open","description":"Open channel with {partner}.","block-count-success":"Channel successfully opened"},"failure":{"title":"Channel Open Failure"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State and Connect","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens"},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"transfer-menus":{"change-token-title":"Change Token","deposit-button":"Deposit","channel-button":"Channels","no-channels":"No open channels"},"transfer-inputs":{"title":"Transfer"},"no-channels-dialog":{"title":"No connected tokens and open channels","button":"Connect new token"},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available Tokens"},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"token-list":{"item":{"blockie-alt":"Token address blockie","information-template":"{symbol} | {name}"}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return Ng})),n.d(t,"b",(function(){return aa})),n.d(t,"a",(function(){return Le})),n.d(t,"d",(function(){return Ae})),n.d(t,"c",(function(){return ht})),n.d(t,"f",(function(){return vt})),n.d(t,"g",(function(){return hn}));var r={};n.r(r),n.d(r,"messageSend",(function(){return Zr})),n.d(r,"messageGlobalSend",(function(){return Yr})),n.d(r,"messageReceived",(function(){return Xr}));var a={};n.r(a),n.d(a,"newBlock",(function(){return Wa})),n.d(a,"tokenMonitored",(function(){return $a})),n.d(a,"channelOpen",(function(){return Ha})),n.d(a,"channelMonitored",(function(){return Va})),n.d(a,"channelDeposit",(function(){return qa})),n.d(a,"channelWithdrawn",(function(){return Ka})),n.d(a,"channelClose",(function(){return Ga})),n.d(a,"channelSettleable",(function(){return Za})),n.d(a,"channelSettle",(function(){return Ya}));var o={};n.r(o),n.d(o,"matrixSetup",(function(){return za})),n.d(o,"matrixPresence",(function(){return Ja})),n.d(o,"matrixRoom",(function(){return eo})),n.d(o,"matrixRoomLeave",(function(){return to})),n.d(o,"rtcChannel",(function(){return no}));var i={};n.r(i),n.d(i,"transfer",(function(){return uo})),n.d(i,"transferSigned",(function(){return lo})),n.d(i,"transferProcessed",(function(){return po})),n.d(i,"transferSecret",(function(){return fo})),n.d(i,"transferSecretRegister",(function(){return bo})),n.d(i,"transferSecretRequest",(function(){return yo})),n.d(i,"transferSecretReveal",(function(){return ho})),n.d(i,"transferUnlock",(function(){return mo})),n.d(i,"transferUnlockProcessed",(function(){return vo})),n.d(i,"transferExpire",(function(){return go})),n.d(i,"transferExpireProcessed",(function(){return Oo})),n.d(i,"transferClear",(function(){return wo})),n.d(i,"transferLoad",(function(){return ko})),n.d(i,"withdraw",(function(){return jo})),n.d(i,"withdrawMessage",(function(){return Eo})),n.d(i,"withdrawExpire",(function(){return To})),n.d(i,"withdrawCompleted",(function(){return xo}));var c={};n.r(c),n.d(c,"pathFind",(function(){return No})),n.d(c,"pfsListUpdated",(function(){return Do})),n.d(c,"iouPersist",(function(){return Ro})),n.d(c,"iouClear",(function(){return Co})),n.d(c,"udcDeposit",(function(){return Po})),n.d(c,"udcWithdraw",(function(){return Lo})),n.d(c,"udcWithdrawn",(function(){return Uo})),n.d(c,"msBalanceProofSent",(function(){return Mo}));var s={};n.r(s),n.d(s,"dbShutdownEpic",(function(){return Vu}));var u={};n.r(u),n.d(u,"initNewBlockEpic",(function(){return wf})),n.d(u,"initTokensRegistryEpic",(function(){return kf})),n.d(u,"initMonitorProviderEpic",(function(){return _f})),n.d(u,"channelEventsEpic",(function(){return Sf})),n.d(u,"channelMonitoredEpic",(function(){return Af})),n.d(u,"channelOpenEpic",(function(){return Nf})),n.d(u,"channelDepositEpic",(function(){return Rf})),n.d(u,"channelCloseEpic",(function(){return Cf})),n.d(u,"channelUpdateEpic",(function(){return Pf})),n.d(u,"channelAutoSettleEpic",(function(){return If})),n.d(u,"channelSettleEpic",(function(){return Lf})),n.d(u,"channelSettleableEpic",(function(){return Uf})),n.d(u,"channelUnlockEpic",(function(){return Mf})),n.d(u,"confirmationEpic",(function(){return Ff}));var l={};n.r(l),n.d(l,"initMatrixEpic",(function(){return Pd})),n.d(l,"matrixShutdownEpic",(function(){return Id})),n.d(l,"matrixMonitorPresenceEpic",(function(){return nb})),n.d(l,"matrixPresenceUpdateEpic",(function(){return ab})),n.d(l,"matrixMonitorChannelPresenceEpic",(function(){return ob})),n.d(l,"matrixUpdateCapsEpic",(function(){return ib})),n.d(l,"matrixCreateRoomEpic",(function(){return Ob})),n.d(l,"matrixInviteEpic",(function(){return wb})),n.d(l,"matrixHandleInvitesEpic",(function(){return kb})),n.d(l,"matrixLeaveExcessRoomsEpic",(function(){return _b})),n.d(l,"matrixLeaveUnknownRoomsEpic",(function(){return jb})),n.d(l,"matrixCleanLeftRoomsEpic",(function(){return Eb})),n.d(l,"matrixCleanMissingRoomsEpic",(function(){return Tb})),n.d(l,"matrixMessageReceivedUpdateRoomEpic",(function(){return xb})),n.d(l,"matrixMessageSendEpic",(function(){return Hb})),n.d(l,"matrixMessageGlobalSendEpic",(function(){return Vb})),n.d(l,"matrixMessageReceivedEpic",(function(){return Zb})),n.d(l,"deliveredEpic",(function(){return Yb})),n.d(l,"rtcConnectEpic",(function(){return Ny}));var p={};n.r(p),n.d(p,"transferAutoExpireEpic",(function(){return Uy})),n.d(p,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return fh})),n.d(p,"initQueuePendingEnvelopeMessagesEpic",(function(){return wh})),n.d(p,"initQueuePendingReceivedEpic",(function(){return kh})),n.d(p,"transferClearCompletedEpic",(function(){return jh})),n.d(p,"transferMediateEpic",(function(){return Ch})),n.d(p,"transferProcessedReceivedEpic",(function(){return Fh})),n.d(p,"transferProcessedSendEpic",(function(){return Wh})),n.d(p,"transferRetryMessageEpic",(function(){return Zh})),n.d(p,"transferSecretRequestedEpic",(function(){return rm})),n.d(p,"transferSecretRevealEpic",(function(){return om})),n.d(p,"transferSecretRevealedEpic",(function(){return im})),n.d(p,"transferRequestUnlockEpic",(function(){return cm})),n.d(p,"monitorSecretRegistryEpic",(function(){return sm})),n.d(p,"transferSuccessOnSecretRegisteredEpic",(function(){return um})),n.d(p,"transferAutoRegisterEpic",(function(){return lm})),n.d(p,"transferSecretRegisterEpic",(function(){return pm})),n.d(p,"initWithdrawMessagesEpic",(function(){return Om})),n.d(p,"withdrawSendRequestMessageEpic",(function(){return wm})),n.d(p,"withdrawSendTxEpic",(function(){return km})),n.d(p,"withdrawMessageProcessedEpic",(function(){return _m})),n.d(p,"autoWithdrawExpireEpic",(function(){return jm})),n.d(p,"withdrawSendExpireMessageEpic",(function(){return Em}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return dv})),n.d(f,"pfsCapacityUpdateEpic",(function(){return bv})),n.d(f,"pfsFeeUpdateEpic",(function(){return yv})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return hv})),n.d(f,"monitorUdcBalanceEpic",(function(){return mv})),n.d(f,"udcDepositEpic",(function(){return gv})),n.d(f,"monitorRequestEpic",(function(){return wv})),n.d(f,"udcWithdrawRequestEpic",(function(){return kv})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return _v})),n.d(f,"udcWithdrawPlannedEpic",(function(){return jv})),n.d(f,"msMonitorNewBPEpic",(function(){return Ev}));var d=n("4bf2"),b=n.n(d),y=(n("01e5"),n("856a"),n("8e94"),n("6f91")),h=n.n(y),m=n("1cfe"),v=n("72f6"),g=n("dbf3"),O=h.a.methodFactory;Object.assign(h.a,{methodFactory:O}),m["logger"].setLevel(h.a.levels.DEBUG);var w=Object(v["getRequest"])();Object(v["request"])((function(e,t){var n=w(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7")),Object.assign(g,{createNewMatrixCall:function(){return null}});var k=n("6fd9"),_=n("49c0"),j=n("89d8"),E=n("45c3"),T=n("2b19"),x=n("ae32"),S=n("ee80"),A=n.n(S),N=n("e68d"),D=n.n(N),R=n("9c86"),C=n("d0e7"),P=n("6c90"),I=n("76fd"),L=n("2430"),U=n("4f19"),M=n("c49b"),B=n("b2be"),F=n("22ee"),W=n("6d46"),$=n("391b"),H=n("55da"),V=n("751e");function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}var Z=function(){function e(){q(this,e)}return G(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Y,t)}}]),e}(),Y=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}var J=function(){function e(){X(this,e)}return z(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,ee,t)}}]),e}(),ee=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant1_settlement",type:"tuple"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant2_settlement",type:"tuple"}],name:"settleChannel2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}var ae=function(){function e(){te(this,e)}return re(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,oe,t)}}]),e}(),oe=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}var ue=function(){function e(){ie(this,e)}return se(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,le,t)}}]),e}(),le=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}var be=function(){function e(){pe(this,e)}return de(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,ye,t)}}]),e}(),ye=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ge=function(){function e(){he(this,e)}return ve(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Oe,t)}}]),e}(),Oe=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),e}var je=function(){function e(){we(this,e)}return _e(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}var Ae,Ne,De=function(){function e(){Te(this,e)}return Se(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Re,t)}}]),e}(),Re=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ce=n("bf6c");function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Ae||(Ae={}));var Ie,Le,Ue=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Me=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ie||(Ie={})),function(e){e["DELIVERY"]="Delivery",e["RECEIVE"]="Receive",e["MEDIATE"]="Mediate",e["WEBRTC"]="webRTC",e["TO_DEVICE"]="toDevice"}(Le||(Le={}));var Be=(Ne={},Pe(Ne,Le.DELIVERY,1),Pe(Ne,Le.RECEIVE,1),Pe(Ne,Le.MEDIATE,1),Pe(Ne,Le.WEBRTC,0),Pe(Ne,Le.TO_DEVICE,0),Ne),Fe=n("2ee9"),We=n("3b38"),$e=n("3314"),He=n("efef"),Ve=n("5b3b"),qe=n.n(Ve),Ke=n("a32b");function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e){return Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e){return tt(e)||et(e)||Je(e)||ze()}function ze(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Je(e,t){if(e){if("string"===typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function et(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function tt(e){if(Array.isArray(e))return nt(e)}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){return t&&at(e.prototype,t),n&&at(e,n),e}function it(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}function ct(e){var t=ft();return function(){var n,r=yt(e);if(t){var a=yt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return st(this,n)}}function st(e,t){return!t||"object"!==Xe(t)&&"function"!==typeof t?ut(e):t}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){var t="function"===typeof Map?new Map:void 0;return lt=function(e){if(null===e||!dt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pt(e,arguments,yt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),bt(n,e)},lt(e)}function pt(e,t,n){return pt=ft()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&bt(o,n.prototype),o},pt.apply(null,arguments)}function ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function dt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function bt(e,t){return bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bt(e,t)}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}var ht=Ke,mt=Fe["r"](Fe["s"],Fe["x"]([Fe["s"],Fe["n"],Fe["e"],Fe["m"]])),vt=function(e){it(n,e);var t=ct(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rt(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(ut(r),n.prototype),r}return ot(n,[{key:"code",get:function(){var e,t=this;return null!==(e=qe()(ht,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(lt(Error));function gt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?pt(vt,Qe(t)):new vt(null!==t&&void 0!==t?t:ht.RDN_ASSERT_ERROR,{condition:e})}var Ot=Fe["j"]([Fe["v"]({name:Fe["s"]}),Fe["o"]({message:Fe["s"],stack:Fe["s"],details:mt})]),wt=new Fe["b"]("Error",(function(e){return"object"===Xe(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(He["pipe"])(Ot.decode(e),Object(We["map"])((function(e){return"details"in e?Object.assign(new vt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Ze({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function kt(e,t){if(null==e)return{};var n,r,a=_t(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _t(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){if(Object(We["isLeft"])(e))throw new Error($e["PathReporter"].report(e).join("\n"))}function St(e,t,n,r){try{var a=e.decode(t);return xt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new vt(n):o}}function At(e){return null!=e}var Nt=new Fe["b"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){try{return Fe["t"](Object(_["bigNumberify"])(e))}catch(n){return Fe["h"](e,t)}}),(function(e){return e.toString()})),Dt=D()((function(e){return Fe["f"](Fe["s"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),Rt=D()((function(e){var t=e?j["Zero"].sub(j["Two"].pow(8*e-1)):void 0,n=e?j["Two"].pow(8*e-1):void 0;return Fe["f"](Nt,(function(e){return Nt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Ct=D()((function(e){var t=e?j["Zero"]:void 0,n=e?j["Two"].pow(8*e):void 0;return Fe["f"](Nt,(function(e){return Nt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),Pt=Dt(65),It=Dt(32),Lt=Dt(32),Ut=Dt(32);function Mt(e){try{return Object(_["getAddress"])(e)===e}catch(t){return!1}}var Bt=new Fe["a"]("Address",Mt,(function(e,t){try{return Fe["t"](Object(_["getAddress"])(e))}catch(n){return Fe["h"](e,t)}}),Fe["i"],Dt(20),Mt),Ft=D()((function(e){return Fe["j"]([e,Fe["p"](Fe["v"]({ts:Fe["n"]}))])}));function Wt(e){return Et(Et({},e),{},{ts:Date.now()})}function $t(e){e.ts;var t=kt(e,["ts"]);return t}var Ht=D()((function(e){return Fe["j"]([e,Fe["p"](Fe["v"]({signature:Pt}))])})),Vt=D()((function(e){return new Fe["b"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Fe["t"](t):Fe["h"](t,n)}),Fe["i"])}));function qt(e){return e[e.length-1]}function Kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.lt(t)?t:e}))}var Gt=n("55af"),Zt=n("f04c"),Yt=n("aee4"),Xt=n("141b"),Qt=n("70de"),zt=n("bce1");function Jt(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function en(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Jt(o,r,a,i,c,"next",e)}function c(e){Jt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function tn(e){return on(e)||an(e)||rn(e)||nn()}function nn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rn(e,t){if(e){if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function an(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function on(e){if(Array.isArray(e))return cn(e)}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(Zt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(L["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),pn(e,"block")})).pipe(Object(Xt["a"])(Math.ceil(e.pollingInterval/10)),Object(Qt["a"])((function(n){return Object(L["a"])((function(){return e.getLogs(un(un({},t),{},{fromBlock:i[0],toBlock:n}))})).pipe(Object($["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(tn(e.map((function(e){return e.blockNumber})).filter(At).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Yt["a"])(e)})),Object(zt["a"])((function(){return U["a"]})))})))}function fn(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=un(un(un({},t),n),{},{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(tn(r),[a])}};return void 0!==t?n(t):n}function dn(e){return bn.apply(this,arguments)}function bn(){return bn=en(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Gt["getNetwork"],e.t1=parseInt,e.next=4,t.send("net_version",[]);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function yn(e){var t=e.send;e.send=function(){var n=en(b.a.mark((function n(r,a){return b.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("eth_sign"!==r){n.next=2;break}return n.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch((function(n){if(n instanceof Error&&(n.message.includes("The method personal_sign does not exist")||n.message.includes("Method personal_sign not supported")))return e.send=t,e.send(r,a);throw n})));case 2:return n.abrupt("return",t.apply(this,[r,a]));case 3:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()}function hn(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var mn,vn=Fe["x"]([Fe["s"],Fe["n"],Fe["e"],Fe["m"]],"CapsPrimitive"),gn=Fe["x"]([vn,Fe["d"](vn)],"CapsValue"),On=Fe["p"](Fe["r"](Fe["s"],gn),"Caps");function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=Fe["v"]({urls:Fe["x"]([Fe["s"],Fe["d"](Fe["s"])])}),En=Fe["p"](Fe["j"]([Fe["v"]({matrixServerLookup:Fe["s"],revealTimeout:Fe["n"],settleTimeout:Fe["n"],httpTimeout:Fe["n"],discoveryRoom:Fe["x"]([Fe["s"],Fe["m"]]),pfsRoom:Fe["x"]([Fe["s"],Fe["m"]]),monitoringRoom:Fe["x"]([Fe["s"],Fe["m"]]),pfs:Fe["x"]([Bt,Fe["s"],Fe["m"]]),pfsSafetyMargin:Fe["n"],pfsMaxPaths:Fe["n"],pfsMaxFee:Ct(32),pfsIouTimeout:Fe["n"],matrixExcessRooms:Fe["n"],confirmationBlocks:Fe["n"],monitoringReward:Fe["x"]([Fe["m"],Ct(32)]),logger:Fe["k"]((mn={},_n(mn,"",null),_n(mn,"trace",null),_n(mn,"debug",null),_n(mn,"info",null),_n(mn,"warn",null),_n(mn,"error",null),mn)),caps:Fe["x"]([Fe["m"],On]),fallbackIceServers:Fe["d"](jn),rateToSvt:Fe["r"](Fe["s"],Ct(32)),pollingInterval:Fe["n"],minimumAllowance:Ct(32),autoSettle:Fe["e"]}),Fe["o"]({matrixServer:Fe["s"],subkey:Fe["e"]})])),Tn=Fe["p"](Fe["g"](Fe["o"](kn(kn({},En.type.types["0"].props),En.type.types["1"].props))));function xn(e,t){var n,r=e.network;return kn({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(hn(r),"_discovery"),pfsRoom:"raiden_".concat(hn(r),"_path_finding"),monitoringRoom:"raiden_".concat(hn(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,pfsMaxPaths:3,pfsMaxFee:Object(_["parseEther"])("0.05"),pfsIouTimeout:2e5,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},_n(n,Le.DELIVERY,0),_n(n,Le.MEDIATE,0),_n(n,Le.WEBRTC,1),_n(n,Le.TO_DEVICE,1),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3,minimumAllowance:j["MaxUint256"],autoSettle:!1},t)}var Sn,An=Fe["s"],Nn=(Fe["s"],Fe["j"]([Fe["v"]({amount:Ct(32),expiration:Ct(32),secrethash:It}),Fe["o"]({registered:Fe["l"](!0)})],"Lock")),Dn=Fe["p"](Fe["v"]({chainId:Ct(32),tokenNetworkAddress:Bt,channelId:Ct(32),nonce:Ct(8),transferredAmount:Ct(32),lockedAmount:Ct(32),locksroot:It,additionalHash:It})),Rn=Dn,Cn={chainId:j["Zero"],tokenNetworkAddress:j["AddressZero"],channelId:j["Zero"],nonce:j["Zero"],transferredAmount:j["Zero"],lockedAmount:j["Zero"],locksroot:Me,additionalHash:j["HashZero"],signature:Ue};(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Sn||(Sn={}));var Pn=Fe["p"](Fe["v"]({message_identifier:Ct(8)})),In=Fe["p"](Fe["v"]({type:Fe["l"](Sn.DELIVERED),delivered_message_identifier:Ct(8)})),Ln=In,Un=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.PROCESSED)}),Pn])),Mn=Un,Bn=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.SECRET_REQUEST),payment_identifier:Ct(8),secrethash:It,amount:Ct(32),expiration:Ct(32)}),Pn])),Fn=Bn,Wn=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.SECRET_REVEAL),secret:Lt}),Pn])),$n=Wn,Hn=Fe["p"](Fe["j"]([Fe["v"]({chain_id:Ct(32),token_network_address:Bt,channel_identifier:Ct(32),nonce:Ct(8),transferred_amount:Ct(32),locked_amount:Ct(32),locksroot:It}),Pn])),Vn=Fe["p"](Fe["v"]({route:Fe["q"](Bt)})),qn=Vn,Kn=Fe["p"](Fe["v"]({routes:Fe["q"](qn)})),Gn=Kn,Zn=Fe["p"](Fe["j"]([Fe["v"]({payment_identifier:Ct(8),token:Bt,recipient:Bt,lock:Nn,target:Bt,initiator:Bt,metadata:Gn}),Hn])),Yn=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.LOCKED_TRANSFER)}),Zn])),Xn=Yn,Qn=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.UNLOCK),payment_identifier:Ct(8),secret:Lt}),Hn])),zn=Qn,Jn=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.LOCK_EXPIRED),recipient:Bt,secrethash:It}),Hn])),er=Jn,tr=Fe["p"](Fe["v"]({chain_id:Ct(32),token_network_address:Bt,channel_identifier:Ct(32),participant:Bt,total_withdraw:Ct(32),nonce:Ct(8),expiration:Ct(32)})),nr=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.WITHDRAW_REQUEST)}),tr,Pn])),rr=nr,ar=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.WITHDRAW_CONFIRMATION)}),tr,Pn])),or=ar,ir=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Sn.WITHDRAW_EXPIRED)}),tr,Pn])),cr=ir,sr=Fe["p"](Fe["v"]({type:Fe["l"](Sn.PFS_CAPACITY_UPDATE),canonical_identifier:Fe["p"](Fe["v"]({chain_identifier:Ct(32),token_network_address:Bt,channel_identifier:Ct(32)})),updating_participant:Bt,other_participant:Bt,updating_nonce:Ct(8),other_nonce:Ct(8),updating_capacity:Ct(32),other_capacity:Ct(32),reveal_timeout:Ct(32)})),ur=sr,lr=Fe["p"](Fe["v"]({type:Fe["l"](Sn.PFS_FEE_UPDATE),canonical_identifier:Fe["p"](Fe["v"]({chain_identifier:Ct(32),token_network_address:Bt,channel_identifier:Ct(32)})),updating_participant:Bt,timestamp:Fe["s"],fee_schedule:Fe["v"]({cap_fees:Fe["e"],imbalance_penalty:Fe["x"]([Fe["m"],Fe["d"](Fe["u"]([Ct(32),Rt(32)]))]),proportional:Rt(32),flat:Rt(32)})})),pr=lr,fr=Fe["p"](Fe["v"]({type:Fe["l"](Sn.MONITOR_REQUEST),balance_proof:Fe["v"]({chain_id:Ct(32),token_network_address:Bt,channel_identifier:Ct(32),nonce:Ct(8),balance_hash:It,additional_hash:It,signature:Pt}),monitoring_service_contract_address:Bt,non_closing_participant:Bt,non_closing_signature:Pt,reward_amount:Ct(32)})),dr=fr,br=[Ln,Mn,Fn,$n,Xn,zn,er,rr,or,cr,ur,pr,dr],yr=br,hr=Fe["x"](yr),mr=n("bb5f"),vr=n("deeb"),gr=n("6e0b"),Or=n.n(gr);function wr(e,t){var n;if("boolean"===typeof e?e=e?j["One"]:j["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(mr["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(mr["isArrayish"])(e)&&(e=Object(mr["hexlify"])(e)),Nt.is(e)){if(e.lt(0))throw new vt(ht.DTA_NEGATIVE_NUMBER);if(e.gte(j["Two"].pow(8*t)))throw new vt(ht.DTA_NUMBER_TOO_LARGE);n=Object(mr["hexZeroPad"])(Object(mr["hexlify"])(e),t)}else{if("string"!==typeof e)throw new vt(ht.DTA_UNENCODABLE_DATA);if(Object(mr["hexDataLength"])(e)!==t)throw new vt(ht.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var kr=Or()({storeAsString:!0}),_r=kr.parse,jr=kr.stringify,Er=n("731d"),Tr=n.n(Er);function xr(e){return Dr(e)||Nr(e)||Ar(e)||Sr()}function Sr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ar(e,t){if(e){if("string"===typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(e,t):void 0}}function Nr(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Dr(e){if(Array.isArray(e))return Rr(e)}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Pr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Cr(o,r,a,i,c,"next",e)}function c(e){Cr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Br(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Fe["v"](Lr(Lr(Lr({type:Fe["l"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Fe["l"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Lr({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Lr(Lr(Lr({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Fr(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Fe["c"],c=Br(t,a,e),s=Br(n,o,e),u=Br(r,i,e,!0);return{request:c,success:s,failure:u}}function Wr(e){var t=function(t){return Tr()(t.meta,e,(function(e,t){return Nt.is(e)&&Nt.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function $r(e,t){var n=function(n){return Mr([e.success,e.failure],n)&&Wr(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Hr(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return $r(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Vr(e,t,n){return qr.apply(this,arguments)}function qr(){return qr=Pr(b.a.mark((function e(t,n,r){var a,o=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",r.pipe(Object(W["a"])(a?Hr(t,n):$r(t,n)),Object(B["a"])((function(e){var n;if(t.failure.is(e))throw e.payload;if(!1===(null===(n=e.payload)||void 0===n?void 0:n.confirmed))throw new vt(ht.RDN_TRANSACTION_REORG,{transactionHash:e.payload.txHash});return e.payload}))).toPromise());case 2:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Kr(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return gt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(xr(a.map((function(e){return Ur({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Gr,Zr=Fr(Fe["v"]({address:Bt,msgId:Fe["s"]}),"message/send/request","message/send/success","message/send/failure",Fe["v"]({message:Fe["x"]([Fe["s"],Ht(hr)])}),Fe["x"]([Fe["w"],Fe["o"]({via:Fe["s"]})])),Yr=Br("message/global/send",Fe["v"]({message:Fe["x"]([Fe["s"],Ht(hr)])}),Fe["v"]({roomName:Fe["s"]})),Xr=Br("message/received",Fe["j"]([Fe["v"]({text:Fe["s"],ts:Fe["n"]}),Fe["o"]({message:Fe["x"]([hr,Ht(hr)]),userId:Fe["s"],roomId:Fe["s"]})]),Fe["v"]({address:Bt}));function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ea(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Jr(o,r,a,i,c,"next",e)}function c(e){Jr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ta(e){return ta="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(e)}function na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ra,aa,oa=(Gr={},na(Gr,Sn.DELIVERED,12),na(Gr,Sn.PROCESSED,0),na(Gr,Sn.SECRET_REQUEST,3),na(Gr,Sn.SECRET_REVEAL,11),na(Gr,Sn.LOCKED_TRANSFER,7),na(Gr,Sn.UNLOCK,4),na(Gr,Sn.LOCK_EXPIRED,13),na(Gr,Sn.WITHDRAW_REQUEST,15),na(Gr,Sn.WITHDRAW_CONFIRMATION,16),na(Gr,Sn.WITHDRAW_EXPIRED,17),na(Gr,Sn.PFS_CAPACITY_UPDATE,-1),na(Gr,Sn.PFS_FEE_UPDATE,-1),na(Gr,Sn.MONITOR_REQUEST,-1),Gr);function ia(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function ca(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===j["HashZero"]||r===Me)?j["HashZero"]:Object(_["keccak256"])(Object(mr["concat"])([wr(t,32),wr(n,32),wr(r,32)]))}function sa(e){switch(e.type){case Sn.LOCKED_TRANSFER:var t=Object(mr["concat"])([wr(oa[e.type],1),wr(e.message_identifier,8),wr(e.payment_identifier,8),wr(e.lock.expiration,32),wr(e.token,20),wr(e.recipient,20),wr(e.target,20),wr(e.initiator,20),wr(e.lock.secrethash,32),wr(e.lock.amount,32)]);return e.type===Sn.LOCKED_TRANSFER&&(t=Object(mr["concat"])([t,ia(e.metadata)])),Object(_["keccak256"])(t);case Sn.UNLOCK:return Object(_["keccak256"])(Object(mr["concat"])([wr(oa[e.type],1),wr(e.message_identifier,8),wr(e.payment_identifier,8),wr(e.secret,32)]));case Sn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(mr["concat"])([wr(oa[e.type],1),wr(e.message_identifier,8),wr(e.recipient,20),wr(e.secrethash,32)]))}}function ua(e){var t;switch(e.type){case Sn.DELIVERED:return Object(mr["hexlify"])(Object(mr["concat"])([wr(oa[e.type],1),wr(0,3),wr(e.delivered_message_identifier,8)]));case Sn.PROCESSED:return Object(mr["hexlify"])(Object(mr["concat"])([wr(oa[e.type],1),wr(0,3),wr(e.message_identifier,8)]));case Sn.LOCKED_TRANSFER:case Sn.UNLOCK:case Sn.LOCK_EXPIRED:var n=sa(e),r=ca({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(mr["hexlify"])(Object(mr["concat"])([wr(e.token_network_address,20),wr(e.chain_id,32),wr(ra.BALANCE_PROOF,32),wr(e.channel_identifier,32),wr(r,32),wr(e.nonce,32),wr(n,32)]));case Sn.SECRET_REQUEST:return Object(mr["hexlify"])(Object(mr["concat"])([wr(oa[e.type],1),wr(0,3),wr(e.message_identifier,8),wr(e.payment_identifier,8),wr(e.secrethash,32),wr(e.amount,32),wr(e.expiration,32)]));case Sn.SECRET_REVEAL:return Object(mr["hexlify"])(Object(mr["concat"])([wr(oa[e.type],1),wr(0,3),wr(e.message_identifier,8),wr(e.secret,32)]));case Sn.WITHDRAW_REQUEST:case Sn.WITHDRAW_CONFIRMATION:return Object(mr["hexlify"])(Object(mr["concat"])([wr(e.token_network_address,20),wr(e.chain_id,32),wr(ra.WITHDRAW,32),wr(e.channel_identifier,32),wr(e.participant,20),wr(e.total_withdraw,32),wr(e.expiration,32)]));case Sn.WITHDRAW_EXPIRED:return Object(mr["hexlify"])(Object(mr["concat"])([wr(oa[e.type],1),wr(0,3),wr(e.nonce,32),wr(e.message_identifier,8),wr(e.token_network_address,20),wr(e.chain_id,32),wr(ra.WITHDRAW,32),wr(e.channel_identifier,32),wr(e.participant,20),wr(e.total_withdraw,32),wr(e.expiration,32)]));case Sn.PFS_CAPACITY_UPDATE:return Object(mr["hexlify"])(Object(mr["concat"])([wr(e.canonical_identifier.chain_identifier,32),wr(e.canonical_identifier.token_network_address,20),wr(e.canonical_identifier.channel_identifier,32),wr(e.updating_participant,20),wr(e.other_participant,20),wr(e.updating_nonce,8),wr(e.other_nonce,8),wr(e.updating_capacity,32),wr(e.other_capacity,32),wr(e.reveal_timeout,32)]));case Sn.PFS_FEE_UPDATE:return Object(mr["hexlify"])(Object(mr["concat"])([wr(e.canonical_identifier.chain_identifier,32),wr(e.canonical_identifier.token_network_address,20),wr(e.canonical_identifier.channel_identifier,32),wr(e.updating_participant,20),wr(e.fee_schedule.cap_fees,1),wr(e.fee_schedule.flat,32),wr(e.fee_schedule.proportional,32),Object(vr["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),wr(e.timestamp,19)]));case Sn.MONITOR_REQUEST:return Object(mr["hexlify"])(Object(mr["concat"])([wr(e.monitoring_service_contract_address,20),wr(e.balance_proof.chain_id,32),wr(ra.MS_REWARD,32),wr(e.balance_proof.token_network_address,20),wr(e.non_closing_participant,20),wr(e.non_closing_signature,65),wr(e.reward_amount,32)]))}}function la(e){return Pt.is(e.signature)}function pa(e){return Object(_["verifyMessage"])(Object(mr["arrayify"])(ua(e)),e.signature)}function fa(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:sa(e),signature:e.signature}}function da(e){return jr("signature"in e?Ht(hr).encode(e):hr.encode(e))}function ba(e){var t=_r(e);return gt(t&&"object"===ta(t)&&"type"in t&&Object.values(Sn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),St("signature"in t?Ht(hr):hr,t)}function ya(e,t){return ha.apply(this,arguments)}function ha(){return ha=ea(b.a.mark((function e(t,n){var r,a,o,i=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{log:h.a},a=r.log,!la(n)){e.next=3;break}return e.abrupt("return",n);case 3:return a.debug('Signing message "'.concat(n.type,'"'),n),e.next=6,t.signMessage(Object(mr["arrayify"])(ua(n)));case 6:return o=e.sent,e.abrupt("return",zr(zr({},n),{},{signature:o}));case 8:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function ma(e){return function(t){return Xr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(ra||(ra={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(aa||(aa={}));var va,ga=Fe["p"](Fe["v"]({address:Bt,deposit:Ct(32),withdraw:Ct(32),locks:Fe["q"](Nn),balanceProof:Ht(Rn),pendingWithdraws:Fe["q"](Fe["x"]([Ht(rr),Ht(or),Ht(cr)])),nextNonce:Ct(8)}),"ChannelEnd"),Oa=ga,wa=Fe["j"]([Fe["p"](Fe["v"]({_id:Fe["s"],id:Fe["n"],token:Bt,tokenNetwork:Bt,settleTimeout:Fe["n"],isFirstParticipant:Fe["e"],openBlock:Fe["n"],own:Oa,partner:Oa}),"Channel"),Fe["x"]([Fe["p"](Fe["v"]({state:Fe["x"]([Fe["l"](aa.open),Fe["l"](aa.closing)])}),"state[open|closing]"),Fe["j"]([Fe["p"](Fe["v"]({closeBlock:Fe["n"],closeParticipant:Bt}),"ChannelClosed"),Fe["x"]([Fe["p"](Fe["v"]({state:Fe["x"]([Fe["l"](aa.closed),Fe["l"](aa.settleable),Fe["l"](aa.settling)])}),"state[closed|settleable|settling]"),Fe["p"](Fe["v"]({state:Fe["l"](aa.settled),settleBlock:Fe["n"]}),"state[settled]")])])])]),ka=n("4d63"),_a=n.n(ka),ja={SENT:"sent",RECEIVED:"received"},Ea=Fe["k"](_a()(ja)),Ta=Fe["p"](Fe["j"]([Fe["v"]({_id:Fe["s"],channel:Fe["s"],direction:Ea,secrethash:It,expiration:Fe["n"],transfer:Ft(Ht(Xn)),fee:Rt(32),partner:Bt,cleared:Fe["n"]},"TransferStateBase"),Fe["o"]({secret:Lt,secretRegistered:Ft(Fe["v"]({txHash:It,txBlock:Fe["n"]})),transferProcessed:Ft(Ht(Mn)),channelClosed:Ft(Fe["v"]({txHash:It,txBlock:Fe["n"]})),channelSettled:Ft(Fe["v"]({txHash:It,txBlock:Fe["n"]})),secretRequest:Ft(Ht(Fn)),secretReveal:Ft(Ht($n)),unlock:Ft(Ht(zn)),expired:Ft(Ht(er)),unlockProcessed:Ft(Ht(Mn)),expiredProcessed:Ft(Ht(Mn))},"TransferStateOpts")])),xa=Ta;(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(va||(va={}));var Sa=n("bf69"),Aa=n.n(Sa);function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){Ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Da(Da({},r),{},Ra({},o,s)))}}return r}}var Pa=n("bc8e"),Ia=n.n(Pa),La=n("50fc"),Ua=n.n(La),Ma=n("d328"),Ba=n.n(Ma),Fa=Fe["v"]({tokenNetwork:Bt,partner:Bt}),Wa=Br("block/new",Fe["v"]({blockNumber:Fe["n"]})),$a=Br("token/monitored",Fe["j"]([Fe["v"]({token:Bt,tokenNetwork:Bt}),Fe["o"]({fromBlock:Fe["n"],toBlock:Fe["n"]})])),Ha=Fr(Fa,"channel/open/request","channel/open/success","channel/open/failed",Fe["o"]({settleTimeout:Fe["n"],subkey:Fe["e"],deposit:Ct(32)}),Fe["v"]({id:Fe["n"],token:Bt,settleTimeout:Fe["n"],isFirstParticipant:Fe["e"],txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})),Va=Br("channel/monitored",Fe["v"]({id:Fe["n"]}),Fa),qa=Fr(Fa,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Fe["j"]([Fe["v"]({deposit:Ct(32)}),Fe["o"]({subkey:Fe["e"],waitOpen:Fe["l"](!0)})]),Fe["v"]({id:Fe["n"],participant:Bt,totalDeposit:Ct(32),txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})),Ka=Br("channel/withdraw/success",Fe["v"]({id:Fe["n"],participant:Bt,totalWithdraw:Ct(32),txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])}),Fa),Ga=Fr(Fa,"channel/close/request","channel/close/success","channel/close/failure",Fe["x"]([Fe["o"]({subkey:Fe["e"]}),Fe["w"]]),Fe["v"]({id:Fe["n"],participant:Bt,txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})),Za=Br("channel/settleable",Fe["v"]({settleableBlock:Fe["n"]}),Fa),Ya=Fr(Fa,"channel/settle/request","channel/settle/success","channel/settle/failure",Fe["x"]([Fe["o"]({subkey:Fe["e"]}),Fe["w"]]),Fe["j"]([Fe["v"]({id:Fe["n"],txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])}),Fe["o"]({locks:Fe["q"](Nn)})])),Xa=Fe["p"](Fe["v"]({userId:Fe["s"],accessToken:Fe["s"],deviceId:Fe["s"],displayName:Fe["s"]})),Qa=Fe["v"]({address:Bt}),za=Br("matrix/setup",Fe["v"]({server:Fe["s"],setup:Xa})),Ja=Fr(Qa,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Fe["j"]([Fe["v"]({userId:Fe["s"],available:Fe["e"],ts:Fe["n"]}),Fe["o"]({caps:Fe["r"](Fe["s"],Fe["c"])})])),eo=Br("matrix/room",Fe["v"]({roomId:Fe["s"]}),Qa),to=Br("matrix/room/leave",Fe["v"]({roomId:Fe["s"]}),Qa),no=Br("rtc/channel",Fe["x"]([Fe["w"],Vt(RTCDataChannel)]),Qa),ro=Fe["p"](Fe["j"]([Fe["v"]({result:Fe["d"](Fe["p"](Fe["v"]({path:Fe["q"](Bt),estimated_fee:Rt(32)})))}),Fe["o"]({feedback_token:Fe["s"]})])),ao=Fe["d"](Fe["p"](Fe["v"]({path:Fe["q"](Bt),fee:Rt(32)}))),oo=Fe["p"](Fe["v"]({address:Bt,url:Fe["s"],rtt:Fe["n"],price:Ct(32),token:Bt})),io=Fe["p"](Fe["v"]({sender:Bt,receiver:Bt,amount:Ct(32),expiration_block:Ct(32),one_to_n_address:Bt,chain_id:Ct(32)})),co=Fe["p"](Fe["v"]({last_iou:Ht(io)})),so=Fe["v"]({secrethash:It,direction:Ea}),uo=Fr(so,"transfer/request","transfer/success","transfer/failure",Fe["j"]([Fe["v"]({tokenNetwork:Bt,target:Bt,value:Ct(32),paths:ao,paymentId:Ct(8)}),Fe["o"]({secret:Lt,expiration:Fe["n"],initiator:Bt})]),Fe["o"]({balanceProof:Ht(Rn)})),lo=Br("transfer/signed",Fe["v"]({message:Ht(Xn),fee:Rt(32),partner:Bt}),so),po=Br("transfer/processed",Fe["v"]({message:Ht(Mn)}),so),fo=Br("transfer/secret",Fe["v"]({secret:Lt}),so),bo=Fr(so,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Fe["j"]([Fe["v"]({secret:Lt}),Fe["o"]({subkey:Fe["e"]})]),Fe["v"]({secret:Lt,txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})),yo=Br("transfer/secret/request",Fe["v"]({message:Ht(Fn)}),so),ho=Br("transfer/secret/reveal",Fe["v"]({message:Ht($n)}),so),mo=Fr(so,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Fe["v"]({message:Ht(zn),partner:Bt})),vo=Br("transfer/unlock/processed",Fe["v"]({message:Ht(Mn)}),so),go=Fr(so,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Fe["v"]({message:Ht(er),partner:Bt})),Oo=Br("transfer/expire/processed",Fe["v"]({message:Ht(Mn)}),so),wo=Br("transfer/clear",Fe["w"],so),ko=Br("transfer/load",xa,so),_o=Fe["v"]({direction:Ea,tokenNetwork:Bt,partner:Bt,totalWithdraw:Ct(32),expiration:Fe["n"]}),jo=Fr(_o,"withdraw/request","withdraw/success","withdraw/failure",Fe["w"],Fe["v"]({txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})),Eo=Fr(_o,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Fe["v"]({message:Ht(rr)}),Fe["v"]({message:Ht(or)})),To=Fr(_o,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Fe["w"],Fe["v"]({message:Ht(cr)})),xo=Br("withdraw/completed",Fe["w"],_o),So=Fe["v"]({tokenNetwork:Bt,target:Bt,value:Ct(32)}),Ao=Fe["v"]({tokenNetwork:Bt,serviceAddress:Bt}),No=Fr(So,"path/find/request","path/find/success","path/find/failure",Fe["o"]({paths:ao,pfs:Fe["x"]([oo,Fe["m"]])}),Fe["v"]({paths:ao})),Do=Br("pfs/list/updated",Fe["v"]({pfsList:Fe["q"](Bt)})),Ro=Br("iou/persist",Fe["v"]({iou:Ht(io)}),Ao),Co=Br("iou/clear",void 0,Ao),Po=Fr(Fe["v"]({totalDeposit:Ct(32)}),"udc/deposit/request","udc/deposit/success","udc/deposit/failure",Fe["j"]([Fe["v"]({deposit:Ct(32)}),Fe["o"]({subkey:Fe["e"]})]),Fe["x"]([Fe["w"],Fe["v"]({txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})])),Io=Fe["v"]({amount:Ct(32)}),Lo=Fr(Io,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Fe["w"],Fe["j"]([Fe["v"]({block:Fe["n"]}),Fe["o"]({txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])})])),Uo=Br("udc/withdrawn",Fe["v"]({withdrawal:Ct(32),txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])}),Io),Mo=Br("ms/balanceProof/sent",Fe["v"]({tokenNetwork:Bt,partner:Bt,id:Fe["n"],reward:Ct(32),nonce:Ct(8),monitoringService:Bt,txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])}));function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){Wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $o=Br("raiden/shutdown",Fe["v"]({reason:Fe["x"]([Fe["l"](Ie.STOP),Fe["l"](Ie.ACCOUNT_CHANGED),Fe["l"](Ie.NETWORK_CHANGED),wt])})),Ho=Br("raiden/config/update",Tn),Vo=Fo(Fo(Fo(Fo(Fo({raidenShutdown:$o,raidenConfigUpdate:Ho},a),o),r),i),c),qo=[Vo.raidenShutdown,Vo.newBlock,Vo.matrixPresence.success,Vo.tokenMonitored,Vo.udcWithdrawn,Vo.udcWithdraw.failure,Vo.msBalanceProofSent,Vo.channelSettle.success,Vo.channelSettle.failure,Vo.channelOpen.success,Vo.channelOpen.failure],Ko=Ba()(Vo,(function(e,t){return Fo(Fo({},e),"type"in t?Wo({},t.type,t):Ia()(t,Ua()("type")))}),{}),Go=Fe["p"](Fe["v"]({type:Fe["s"],payload:Fe["p"](Fe["v"]({txHash:It,txBlock:Fe["n"],confirmed:Fe["x"]([Fe["w"],Fe["e"]])}))})),Zo=new Fe["b"]("ConfirmableAction",Go.is,(function(e,t){return We["either"].chain(Go.validate(e,t),(function(e){var n=e.type;return n in Ko?Ko[n].codec.validate(e,t):Fe["h"](e,t)}))}),(function(e){return Ko[e.type].codec.encode(e)}));function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){Qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zo=Fe["p"](Fe["v"]({address:Bt,chainId:Fe["n"],registry:Bt,blockNumber:Fe["n"],config:Tn,channels:Fe["p"](Fe["r"](An,wa)),oldChannels:Fe["p"](Fe["r"](Fe["s"],wa)),tokens:Fe["p"](Fe["r"](Fe["s"],Bt)),transport:Fe["p"](Fe["o"]({server:Fe["s"],setup:Xa,rooms:Fe["p"](Fe["r"](Fe["s"],Fe["d"](Fe["s"])))})),transfers:Fe["p"](Fe["r"](Fe["s"],xa)),iou:Fe["p"](Fe["r"](Fe["s"],Fe["r"](Fe["s"],Ht(io)))),pendingTxs:Fe["q"](Zo)}),"RaidenState"),Jo=zo;function ei(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xo({address:n,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},transfers:{},iou:{},pendingTxs:[],config:{}},a)}var ti=ei({network:Object(_["getNetwork"])("unspecified"),address:j["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:j["AddressZero"],block_number:0},ServiceRegistry:{address:j["AddressZero"],block_number:0},UserDeposit:{address:j["AddressZero"],block_number:0},SecretRegistry:{address:j["AddressZero"],block_number:0},MonitoringService:{address:j["AddressZero"],block_number:0},OneToN:{address:j["AddressZero"],block_number:0}}}),ni=n("ef71"),ri=n("6663"),ai=n("0b05"),oi=n("6e76"),ii=n("f644"),ci=n("0c45"),si=n("0b5d"),ui=n("6b75"),li=n("63cc"),pi=n("bbd6"),fi=n("97f3"),di=n("8c2f"),bi=n("56a1"),yi=n("6825"),hi=n("5974");function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){gi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(e,t){return Ei(e)||ji(e,t)||ki(e,t)||wi()}function wi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ki(e,t){if(e){if("string"===typeof e)return _i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_i(e,t):void 0}}function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ji(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ei(e){if(Array.isArray(e))return e}var Ti=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(H["a"].apply(void 0,t),Object(pi["a"])())}};function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(pi["a"])(),Object($["a"])((function(e){return Object(ui["a"])(e)})),Object(fi["a"])((function(t,n){var r=t.acc,a=Oi(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:vi(vi({},r),{},gi({},o,i)),changed:[o,i]}}),{acc:{}}),Object(H["a"])("changed"),Object(F["a"])(At))}}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(di["a"])((function(e){return e.pipe(Object(B["a"])((function(){if("number"===typeof t)return t;var e=t.next();return e.done?-1:e.value})),Object(bi["a"])((function(e){return e>=0})),Object(yi["a"])((function(e){return Object(ni["a"])(e)})))})),Object(ci["a"])(e))}}function Ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return t>=10};return function(n){return n.pipe(Object(oi["a"])((function(n){return n.pipe(Object($["a"])((function(n,r){var a;if("number"===typeof e)a=e;else{var o=e.next();a=o.done?-1:o.value}return t(n,r)||a<0?Object(ri["a"])(n):Object(ni["a"])(a)})))})))}}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(L["a"])(e).pipe(Ai(t,n))}function Di(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.pipe(Object(B["a"])((function(e){return t?!e:!!e})),Object(pi["a"])());return function(e){return e.pipe(Object(ci["a"])(n.pipe(Object(F["a"])((function(e){return!e})))),Object(di["a"])((function(){return n.pipe(Object(F["a"])((function(e){return e})))})))}}function Ri(e){return function(t){return Object(li["a"])(Object(ni["a"])(e).pipe(Object(hi["a"])(Object(ri["a"])(new Error("timeout waiting first")))),t)}}function Ci(e,t){return Li(e)||Ii(e,t)||Wi(e,t)||Pi()}function Pi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Li(e){if(Array.isArray(e))return e}function Ui(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Mi(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ui(o,r,a,i,c,"next",e)}function c(e){Ui(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Bi(e){return Hi(e)||$i(e)||Wi(e)||Fi()}function Fi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wi(e,t){if(e){if("string"===typeof e)return Vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vi(e,t):void 0}}function $i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Hi(e){if(Array.isArray(e))return Vi(e)}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qi(e){var t=e.tokenNetwork,n=e.partner,r="string"===typeof n?n:n.address;return"".concat(t,"@").concat(r)}function Ki(e){return"_id"in e&&e._id?e._id:"".concat(qi(e),"#").concat(e.id.toString().padStart(9,"0"))}function Gi(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),p=s.sub(c),f=c.sub(s),d=Kt.apply(void 0,[t].concat(Bi(e.own.pendingWithdraws.filter((function(e){return e.type===Sn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Kt.apply(void 0,[n].concat(Bi(e.partner.pendingWithdraws.filter((function(e){return e.type===Sn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(d).sub(u).add(p),h=e.partner.deposit.sub(b).sub(l).add(f),m=e.own.deposit.add(p).sub(u),v=m.sub(t),g=e.partner.deposit.add(f).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:p,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:f,partnerCapacity:h,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:m,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Zi(e,t,n){var r=n.log;return function(n){return n.pipe(Object(ai["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])(function(){var e=Mi(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.wait();case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(B["a"])((function(n){var a,o,i,c=Ci(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new vt(t,{status:null!==(a=u.status)&&void 0!==a?a:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var Yi=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],Xi=["always failing transaction","execution failed due to an exception","transaction failed"];function Qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:h.a},a=r.log;return function(r){return r.pipe(Object(oi["a"])((function(r){return r.pipe(Object($["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t,n;return null===(n=null===(t=r.message)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,e)}))?Object(ni["a"])(e):Object(ri["a"])(r)})))})))}}function zi(e){return e.pipe(Object(H["a"])("channels"),xi(),Object(H["a"])(1),Object(ii["a"])(Ki,void 0,void 0,(function(){return new R["a"](1)})),Object(B["a"])((function(t){var n=t.key.split("#"),r=Ci(n,2),a=r[0],o=r[1],i=+o;return t.pipe(Object(ci["a"])(e.pipe(Object(F["a"])((function(e){var t,n=e.channels;return(null===(t=n[a])||void 0===t?void 0:t.id)!==i})))))})))}function Ji(e,t,n){var r=Ci(e,3),a=r[0],o=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ht.RDN_APPROVE_TRANSACTION_FAILED,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:h.a,minimumAllowance:j["Zero"]},u=s.log,l=s.minimumAllowance;if(gt(a.gte(i),[ht.RDN_INSUFFICIENT_BALANCE,{current:a.toString(),required:i.toString()}]),o.gte(i))return Object(P["a"])(!0);var p=Object(P["a"])(!0);return o.isZero()||(p=Object(L["a"])((function(){return t.functions.approve(n,0)})).pipe(Zi("approve",c,{log:u}),Object(si["a"])(!0))),p.pipe(Object($["a"])((function(){return t.functions.approve(n,Kt(l,i))})),Zi("approve",c,{log:u}),Object(H["a"])(1))}function ec(e){return ec="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(e)}function tc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=fc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function nc(e,t){if(null==e)return{};var n,r,a=rc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function rc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function ac(e){var t=oc(e,"string");return"symbol"===ec(t)?t:String(t)}function oc(e,t){if("object"!==ec(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ic(e,t){return uc(e)||sc(e,t)||fc(e,t)||cc()}function cc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function uc(e){if(Array.isArray(e))return e}function lc(e){return bc(e)||dc(e)||fc(e)||pc()}function pc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fc(e,t){if(e){if("string"===typeof e)return yc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yc(e,t):void 0}}function dc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function bc(e){if(Array.isArray(e))return yc(e)}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gc(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Oc=Kr(ti.blockNumber).handle(Wa,(function(e,t){gc(e);var n=t.payload;return n.blockNumber})),wc=Kr(ti.tokens).handle($a,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:mc(mc({},e),{},vc({},r,a))}));function kc(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var _c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Zo.is(t)){if(void 0===t.payload.confirmed)return[].concat(lc(kc(e,t)),[t]);var n=kc(e,t);return n.length!==e.length?n:e}return e},jc={address:j["AddressZero"],deposit:j["Zero"],withdraw:j["Zero"],locks:[],balanceProof:Cn,pendingWithdraws:[],nextNonce:j["One"]};function Ec(e,t){var n,r,a=qi(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={_id:Ki(mc(mc({},t.meta),{},{id:t.payload.id})),id:t.payload.id,state:aa.open,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:mc(mc({},jc),{},{address:e.address}),partner:mc(mc({},jc),{},{address:t.meta.partner})};return mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},a,i))})}function Tc(e,t){var n;if(!t.payload.confirmed)return e;var r=qi(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==aa.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Ka.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=ic(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=mc(mc({},a),{},vc({},o,mc(mc({},a[o]),{},(n={},vc(n,s,u),vc(n,"pendingWithdraws",l),n)))),mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},r,a))}))}function xc(e,t){var n=qi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===aa.open)r=mc(mc({},r),{},{state:aa.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=mc(mc({},r),{},{state:aa.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},n,r))})}function Sc(e,t){var n=qi(t.meta),r=e.channels[n];if(!r)return e;if(Ga.request.is(t)&&r.state===aa.open)r=mc(mc({},r),{},{state:aa.closing});else if(Ya.request.is(t)&&r.state===aa.settleable)r=mc(mc({},r),{},{state:aa.settling});else{if(!Za.is(t)||r.state!==aa.closed)return e;r=mc(mc({},r),{},{state:aa.settleable})}return mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},n,r))})}function Ac(e,t){var n=qi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==aa.settling)return mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},n,mc(mc({},r),{},{state:aa.settling})))});if(t.payload.confirmed){var a=e.channels,o=(a[n],nc(a,[n].map(ac)));return mc(mc({},e),{},{channels:o,oldChannels:mc(mc({},e.oldChannels),{},vc({},Ki(r),mc(mc({},r),{},{state:aa.settled,settleBlock:t.payload.txBlock})))})}return e}function Nc(e,t,n){var r=!1,a=e.map((function(e){return e.secrethash!==t||e.registered||e.expiration.lte(n)?e:(r=!0,mc(mc({},e),{},{registered:!0}))}));return r?a:e}function Dc(e,t){if(!t.payload.confirmed)return e;var n,r=t.meta.direction===ja.SENT?"own":"partner",a=lc(Object.keys(e.channels)),o=tc(a);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=e.channels[i],s=Nc(c[r].locks,t.meta.secrethash,t.payload.txBlock);s!==c[r].locks&&(e=mc(mc({},e),{},{channels:mc(mc({},e.channels),{},vc({},i,mc(mc({},c),{},vc({},r,mc(mc({},c[r]),{},{locks:s})))))}))}}catch(u){o.e(u)}finally{o.f()}return e}var Rc=Kr(ti).handle(Ha.success,Ec).handle([qa.success,Ka],Tc).handle([Ga.request,Za,Ya.request],Sc).handle(Ga.success,xc).handle(Ya.success,Ac).handle(bo.success,Dc),Cc=Ca({blockNumber:Oc,tokens:wc,pendingTxs:_c},ti),Pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti,t=arguments.length>1?arguments[1]:void 0;return[Cc,Rc].reduce((function(e,n){return n(e,t)}),e)},Ic=Pc;function Lc(e){return Fc(e)||Bc(e)||Mc(e)||Uc()}function Uc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mc(e,t){if(e){if("string"===typeof e)return Wc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wc(e,t):void 0}}function Bc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Fc(e){if(Array.isArray(e))return Wc(e)}function Wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(n),!0).forEach((function(t){Vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qc(e,t){if(null==e)return{};var n,r,a=Kc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Kc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Gc,Zc=Kr(ti.transport).handle(za,(function(e,t){e.rooms;var n=qc(e,["rooms"]);return Hc(Hc({},e.server!==t.payload.server?n:e),t.payload)})).handle(eo,(function(e,t){var n,r;return Hc(Hc({},e),{},{rooms:Hc(Hc({},e.rooms),{},Vc({},t.meta.address,[t.payload.roomId].concat(Lc((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(to,(function(e,t){var n,r;return Hc(Hc({},e),{},{rooms:Hc(Hc({},e.rooms),{},Vc({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Yc=Ca({transport:Zc},ti),Xc=Yc,Qc=n("cfd5"),zc=n.n(Qc);function Jc(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function es(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Jc(o,r,a,i,c,"next",e)}function c(e){Jc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e,t){return os(e)||as(e,t)||cs(e,t)||rs()}function rs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function as(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function os(e){if(Array.isArray(e))return e}function is(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=cs(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function cs(e,t){if(e){if("string"===typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ss(e,t):void 0}}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function us(e){var t,n=[],r=is(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(wr(a.expiration,32),wr(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(mr["concat"])(n))}function ls(e){return Object(_["sha256"])(e)}function ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(mr["hexlify"])(Object(_["randomBytes"])(e))}function fs(){return Object(_["bigNumberify"])(Date.now())}function ds(){return Object(_["bigNumberify"])(Date.now())}function bs(e){return"_id"in e?e._id:"".concat(e.direction,":").concat(e.secrethash)}var ys=new RegExp("^(".concat(Object.values(ja).join("|"),"):(0x[a-f0-9]{64})$"),"i");function hs(e){var t=e.match(ys);gt(t,"Invalid transferKey format");var n=ns(t,3),r=n[1],a=n[2];return{direction:r,secrethash:a}}var ms,vs,gs=(Gc={},ts(Gc,va.expired,(function(e){var t;return null===(t=e.expiredProcessed)||void 0===t?void 0:t.ts})),ts(Gc,va.unlocked,(function(e){var t;return null===(t=e.unlockProcessed)||void 0===t?void 0:t.ts})),ts(Gc,va.expiring,(function(e){var t;return null===(t=e.expired)||void 0===t?void 0:t.ts})),ts(Gc,va.unlocking,(function(e){var t;return null===(t=e.unlock)||void 0===t?void 0:t.ts})),ts(Gc,va.registered,(function(e){var t;return null===(t=e.secretRegistered)||void 0===t?void 0:t.ts})),ts(Gc,va.revealed,(function(e){var t;return null===(t=e.secretReveal)||void 0===t?void 0:t.ts})),ts(Gc,va.requested,(function(e){var t;return null===(t=e.secretRequest)||void 0===t?void 0:t.ts})),ts(Gc,va.closed,(function(e){var t;return null===(t=e.channelClosed)||void 0===t?void 0:t.ts})),ts(Gc,va.received,(function(e){var t;return null===(t=e.transferProcessed)||void 0===t?void 0:t.ts})),ts(Gc,va.pending,(function(e){return e.transfer.ts})),Gc);function Os(e){for(var t=0,n=Object.entries(gs);t<n.length;t++){var r=ns(n[t],2),a=r[0],o=r[1],i=o(e);if(void 0!==i)return a}return va.pending}function ws(e){return!!(e.unlockProcessed||e.expiredProcessed||e.secretRegistered||e.channelSettled)}function ks(e){var t=Os(e),n=new Date(e.transfer.ts),r=new Date(gs[t](e)),a=e.transfer,o=e.direction,i=a.lock.amount.sub(e.fee),c=e.secretRequest&&e.secretRequest.amount.lt(i),s=!!(e.secretReveal||e.unlock||e.secretRegistered)||!(c||e.expired||e.channelClosed)&&void 0,u=ws(e);return{key:bs(e),secrethash:a.lock.secrethash,direction:o,status:t,initiator:a.initiator,partner:e.partner,target:a.target,metadata:a.metadata,paymentId:a.payment_identifier,chainId:a.chain_id.toNumber(),token:a.token,tokenNetwork:a.token_network_address,channelId:a.channel_identifier,value:i,fee:e.fee,amount:a.lock.amount,expirationBlock:a.lock.expiration.toNumber(),startedAt:n,changedAt:r,success:s,completed:u,secret:e.secret}}function _s(e,t,n,r){return r===j["HashZero"]?Object(P["a"])(Cn):Object(L["a"])((function(){return e.find({selector:{channel:Ki(t),direction:n}})})).pipe(Object($["a"])((function(e){var t=e.docs;return Object(Yt["a"])(t)})),Object($["a"])((function(e){var t=St(xa,e);return Object(Yt["a"])([t.transfer,t.unlock,t.expired])})),Object(F["a"])(At),Object(B["a"])(fa),Object(W["a"])((function(e){return ca(e)===r})))}function js(e,t,n){return Es.apply(this,arguments)}function Es(){return Es=es(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof r&&(r=bs(r)),"address"in t){e.next=5;break}return e.next=4,t.pipe(Object(W["a"])()).toPromise();case 4:t=e.sent;case 5:if(!(r in t.transfers)){e.next=7;break}return e.abrupt("return",t.transfers[r]);case 7:return e.t0=St,e.t1=xa,e.next=11,n.get(r);case 11:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 13:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}function Ts(e){return Ts="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ts(e)}function xs(e,t){if(null==e)return{};var n,r,a=Ss(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ss(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function As(e){var t=Ns(e,"string");return"symbol"===Ts(t)?t:String(t)}function Ns(e,t){if("object"!==Ts(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ds(e){return Is(e)||Ps(e)||Cs(e)||Rs()}function Rs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cs(e,t){if(e){if("string"===typeof e)return Ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ls(e,t):void 0}}function Ps(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Is(e){if(Array.isArray(e))return Ls(e)}function Ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){Bs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fs=(ms={},Bs(ms,ja.SENT,"own"),Bs(ms,ja.RECEIVED,"partner"),ms);function Ws(e,t){var n,r=bs(t.meta);if(!(r in e.transfers))return e;var a=e.transfers[r];return a.secret||(e=Ms(Ms({},e),{},{transfers:Ms(Ms({},e.transfers),{},Bs({},r,Ms(Ms({},a),{},{secret:t.payload.secret})))})),bo.success.is(t)&&t.payload.confirmed&&t.payload.txBlock!==(null===(n=a.secretRegistered)||void 0===n?void 0:n.txBlock)&&t.payload.txBlock<a.expiration&&(e=Ms(Ms({},e),{},{transfers:Ms(Ms({},e.transfers),{},Bs({},r,Ms(Ms({},a),{},{secretRegistered:Wt(zc()(["txHash","txBlock"],t.payload))})))})),e}function $s(e,t){var n,r,a=t.payload.message,o=t.meta.secrethash,i=bs(t.meta),c=a.token_network_address,s=t.payload.partner,u=qi({tokenNetwork:c,partner:s}),l=Fs[t.meta.direction],p=e.channels[u],f=i in e.transfers,d=mo.success.is(t)?"unlock":"expired";if(lo.is(t)&&f||!lo.is(t)&&(!f||d in e.transfers[i])||(null===p||void 0===p?void 0:p.state)!==aa.open||!a.nonce.eq(p[l].nextNonce))return e;switch(t.type){case lo.type:n=[].concat(Ds(p[l].locks),[t.payload.message.lock]),r=Ms(Ms({_id:i,channel:Ki(p)},t.meta),{},{transfer:Wt(t.payload.message),fee:t.payload.fee,expiration:t.payload.message.lock.expiration.toNumber(),partner:s,cleared:0});break;case mo.success.type:case go.success.type:n=p[l].locks.filter((function(e){return e.secrethash!==o})),r=Ms(Bs({},d,Wt(t.payload.message)),e.transfers[i]);break}return p=Ms(Ms({},p),{},Bs({},l,Ms(Ms({},p[l]),{},{locks:n,balanceProof:fa(a),nextNonce:p[l].nextNonce.add(1)}))),Ms(Ms({},e),{},{channels:Ms(Ms({},e.channels),{},Bs({},u,p)),transfers:Ms(Ms({},e.transfers),{},Bs({},i,r))})}var Hs=(vs={},Bs(vs,yo.type,"secretRequest"),Bs(vs,ho.type,"secretReveal"),Bs(vs,po.type,"transferProcessed"),Bs(vs,vo.type,"unlockProcessed"),Bs(vs,Oo.type,"expiredProcessed"),vs);function Vs(e,t){var n=bs(t.meta),r=Hs[t.type];return!(n in e.transfers)||!yo.is(t)&&r in e.transfers[n]||(e=Ms(Ms({},e),{},{transfers:Ms(Ms({},e.transfers),{},Bs({},n,Ms(Ms({},e.transfers[n]),{},Bs({},r,Wt(t.payload.message)))))})),e}function qs(e,t){var n=bs(t.meta);if(n in e.transfers){var r=e.transfers,a=(r[n],xs(r,[n].map(As)));e=Ms(Ms({},e),{},{transfers:a})}return e}function Ks(e,t){var n=bs(t.meta);return n in e.transfers||(e=Ms(Ms({},e),{},{transfers:Ms(Ms({},e.transfers),{},Bs({},n,Ms(Ms({},t.payload),{},{cleared:0})))})),e}function Gs(e,t){if(!t.payload.confirmed)return e;for(var n=Ga.success.is(t)?"channelClosed":"channelSettled",r=Ki(Ms({id:t.payload.id},t.meta)),a=0,o=Object.values(e.transfers);a<o.length;a++){var i=o[a];i.channel===r&&(e=Ms(Ms({},e),{},{transfers:Ms(Ms({},e.transfers),{},Bs({},bs(i),Ms(Ms({},i),{},Bs({},n,Wt(zc()(["txHash","txBlock"],t.payload))))))}))}return e}function Zs(e,t){var n=t.payload.message,r=qi(t.meta),a=e.channels[r],o=t.meta.direction===ja.RECEIVED!==Eo.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==aa.open||!n.nonce.eq(a[o].nextNonce))return e;a=Ms(Ms({},a),{},Bs({},o,Ms(Ms({},a[o]),{},{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===ja.RECEIVED?"partner":"own",c=[].concat(Ds(a[i].pendingWithdraws),[t.payload.message]);return a=Ms(Ms({},a),{},Bs({},i,Ms(Ms({},a[i]),{},{pendingWithdraws:c}))),Ms(Ms({},e),{},{channels:Ms(Ms({},e.channels),{},Bs({},r,a))})}function Ys(e,t){var n=qi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==aa.open)return e;var a=t.meta.direction===ja.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Ms(Ms({},r),{},Bs({},a,Ms(Ms({},r[a]),{},{pendingWithdraws:o}))),Ms(Ms({},e),{},{channels:Ms(Ms({},e.channels),{},Bs({},n,r))})}var Xs=Kr(ti).handle([fo,bo.success],Ws).handle([lo,mo.success,go.success],$s).handle([po,vo,Oo,yo,ho],Vs).handle(wo,qs).handle(ko,Ks).handle([Ga.success,Ya.success],Gs).handle([Eo.request,Eo.success,To.success],Zs).handle(xo,Ys),Qs=Xs;function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){eu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tu=Kr(ti.iou).handle(Ro,(function(e,t){return Js(Js({},e),{},eu({},t.meta.tokenNetwork,Js(Js({},e[t.meta.tokenNetwork]),{},eu({},t.meta.serviceAddress,t.payload.iou))))})).handle(Co,(function(e,t){return Aa()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),nu=Ca({iou:tu},ti),ru=nu;function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cu(e,t){return fu(e)||pu(e,t)||uu(e,t)||su()}function su(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uu(e,t){if(e){if("string"===typeof e)return lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lu(e,t):void 0}}function lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fu(e){if(Array.isArray(e))return e}var du=Kr(ti).handle(Ho,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=cu(o[a],2),c=i[0],s=i[1];void 0!==s?r=ou(ou({},r),{},iu({},c,s)):c in r&&(r=Aa()(c,r))}return r===e.config?e:ou(ou({},e),{},{config:r})})),bu={configReducer:du,channelsReducer:Ic,transportReducer:Xc,transfersReducer:Qs,servicesReducer:ru},yu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti,t=arguments.length>1?arguments[1]:void 0;return Object.values(bu).reduce((function(e,n){return n(e,t)}),e)},hu=n("3121"),mu=n("3d27"),vu=n("c578"),gu=n("0a13"),Ou=n.n(gu),wu=n("e590"),ku=n.n(wu),_u=n("7924");function ju(e,t){return Au(e)||Su(e,t)||Tu(e,t)||Eu()}function Eu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tu(e,t){if(e){if("string"===typeof e)return xu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xu(e,t):void 0}}function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Su(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Au(e){if(Array.isArray(e))return e}function Nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nu(Object(n),!0).forEach((function(t){Ru(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ru(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cu=D()((function(e){return e.pipe(Object(F["a"])(Ja.success.is),Object(fi["a"])((function(e,t){return Du(Du({},e),{},Ru({},t.meta.address,t))}),{}),Object(_u["a"])(),Object(vu["a"])({}))}));function Pu(e,t){return Object.values(e).find((function(e){return e.payload.userId===t}))}function Iu(e){for(var t=new URL("mxc://raiden.network/cap"),n=function(e,n){return t.searchParams.append(e,n)},r=0,a=Object.entries(e);r<a.length;r++){var o=ju(a[r],2),i=o[0],c=o[1];Array.isArray(c)?c.forEach(n.bind(null,i)):n(i,c)}return t.href}function Lu(e){if(e){var t={};try{var n=new URL(e);return n.searchParams.forEach((function(e,n){var r=e;if(/^\d+$/.test(e))r=_r(e);else{var a=e.toLowerCase();"none"===a||"null"===a?r=null:"false"===a?r=!1:"true"===a&&(r=!0)}if(n in t){var o=t[n];Array.isArray(o)||(t[n]=o=[o]),o.push(r)}else t[n]=r})),t}catch(r){}}}function Uu(e,t){var n;return null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:Be[t]}var Mu=n("ad3b"),Bu=n("3e9b");function Fu(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Wu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Fu(o,r,a,i,c,"next",e)}function c(e){Fu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $u(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Hu,Vu=function(e,t,n){$u(t);var r=n.db;return e.pipe(Object(Mu["a"])(),Object(Bu["a"])(Wu(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.busy$.pipe(Object(W["a"])((function(e){return!e}))).toPromise();case 2:return r.busy$.next(!0),e.prev=3,e.next=6,r.close();case 6:return e.prev=6,r.busy$.next(!1),r.busy$.complete(),e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[3,,6,10]])})))))},qu=n("79ce"),Ku=n("17b7"),Gu=n("961b"),Zu=n("97cb"),Yu=n("9f7c"),Xu=n("739b"),Qu=n("793a"),zu=n("5278"),Ju=n.n(zu),el=n("12aa"),tl=n.n(el),nl=n("7954"),rl=n("5c41"),al=n("a0df"),ol=n("31a7"),il=n("c998"),cl=n("ee79"),sl=n("b4cc"),ul=n("0ff6"),ll=n("4e0b"),pl=n("1f0b"),fl=n("4e67"),dl=n("3c27"),bl=n("7bdd"),yl=n.n(bl),hl=n("6738"),ml=n("7bcb");function vl(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function gl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){vl(o,r,a,i,c,"next",e)}function c(e){vl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ol(){return wl.apply(this,arguments)}function wl(){return wl=gl(b.a.mark((function e(){var t,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Hu){e.next=2;break}return e.abrupt("return",Hu);case 2:if(!("JEST_WORKER_ID"in Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}))){e.next=11;break}return e.next=5,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-7ee7822e")]).then(n.bind(null,"0267"));case 5:r=e.sent,a=r.default,hl["a"].plugin(a),Hu="memory",e.next=26;break;case 11:if(!(null===(t=globalThis.location)||void 0===t?void 0:t.href)){e.next=20;break}return e.next=14,n.e("chunk-d86182e6").then(n.bind(null,"1f4b"));case 14:o=e.sent,i=o.default,hl["a"].plugin(i),Hu="indexeddb",e.next=26;break;case 20:return e.next=22,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-3d571b96")]).then(n.bind(null,"55ec"));case 22:c=e.sent,s=c.default,hl["a"].plugin(s),Hu="leveldb";case 26:return e.abrupt("return",Hu);case 27:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}var kl={},_l=kl;function jl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Dl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}var El=b.a.mark(kp);function Tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(n),!0).forEach((function(t){Sl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Al(e,t){return Pl(e)||Cl(e,t)||Dl(e,t)||Nl()}function Nl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dl(e,t){if(e){if("string"===typeof e)return Rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rl(e,t):void 0}}function Rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pl(e){if(Array.isArray(e))return e}function Il(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ll(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Il(o,r,a,i,c,"next",e)}function c(e){Il(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ul(e){return function(){return new Ml(e.apply(this,arguments))}}function Ml(e){var t,n;function r(e,r){return new Promise((function(o,i){var c={key:e,arg:r,resolve:o,reject:i,next:null};n?n=n.next=c:(t=n=c,a(e,r))}))}function a(t,n){try{var r=e[t](n),i=r.value,c=i instanceof Fl;Promise.resolve(c?i.wrapped:i).then((function(e){c?a("return"===t?"return":"next",e):o(r.done?"return":"normal",e)}),(function(e){a("throw",e)}))}catch(s){o("throw",s)}}function o(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1});break}t=t.next,t?a(t.key,t.arg):n=null}this._invoke=r,"function"!==typeof e.return&&(this.return=void 0)}function Bl(e){return new Fl(e)}function Fl(e){this.wrapped=e}function Wl(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator],null!=t))return t.call(e);if(Symbol.iterator&&(t=e[Symbol.iterator],null!=t))return t.call(e)}throw new TypeError("Object is not async iterable")}function $l(e,t){var n={},r=!1;function a(n,a){return r=!0,a=new Promise((function(t){t(e[n](a))})),{done:!1,value:t(a)}}return"function"===typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return r?(r=!1,e):a("next",e)},"function"===typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"===typeof e.return&&(n.return=function(e){return r?(r=!1,e):a("return",e)}),n}"function"===typeof Symbol&&Symbol.asyncIterator&&(Ml.prototype[Symbol.asyncIterator]=function(){return this}),Ml.prototype.next=function(e){return this._invoke("next",e)},Ml.prototype.throw=function(e){return this._invoke("throw",e)},Ml.prototype.return=function(e){return this._invoke("return",e)},hl["a"].plugin(ml["a"]);var Hl="state.",Vl="channels.";function ql(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r=e+"￰";return t?{startkey:r,endkey:n,descending:t}:{startkey:n,endkey:r}}function Kl(e){return Gl.apply(this,arguments)}function Gl(){return Gl=Ll(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Set,e.next=3,t.allDocs({startkey:"a",endkey:"z￰"});case 3:return r=e.sent,r.rows.forEach((function(e){var t=e.id;return n.add(t)})),a=new fl["a"](!1),e.abrupt("return",Object.assign(t,{storageKeys:n,busy$:a}));case 7:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}function Zl(e){return Yl.apply(this,arguments)}function Yl(){return Yl=Ll(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),e.next=3,n.info();case 3:if(r=e.sent,0!==r.doc_count||0!=r.update_seq){e.next=8;break}return e.next=7,n.destroy();case 7:return e.abrupt("return");case 8:return e.abrupt("return",Kl(n));case 9:case"end":return e.stop()}}),e,this)}))),Yl.apply(this,arguments)}function Xl(e){return Ql.apply(this,arguments)}function Ql(){return Ql=Ll(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),n.setMaxListeners(30),e.next=4,Promise.all([n.createIndex({index:{name:"byCleared",fields:["cleared","direction"]}}),n.createIndex({index:{name:"byPartner",fields:["direction","partner"]}}),n.createIndex({index:{name:"bySecrethash",fields:["secrethash"]}}),n.createIndex({index:{name:"byChannel",fields:["channel"]}})]);case 4:return e.abrupt("return",Kl(n));case 5:case"end":return e.stop()}}),e,this)}))),Ql.apply(this,arguments)}function zl(e,t){return Object(L["a"])((function(){var n=e.changes(t);return Object(I["a"])(Object(dl["a"])(n,"change"),Object(dl["a"])(n,"error").pipe(Object($["a"])((function(e){return Object(ri["a"])(e)})))).pipe(Object(H["a"])(0),Object(ci["a"])(Object(dl["a"])(n,"complete")),Object(Bu["a"])((function(){return n.cancel()})))}))}function Jl(e){return ep.apply(this,arguments)}function ep(){return ep=Ll(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O,w;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.constructor.__defaults.log,a={channels:{},oldChannels:{},transfers:{}},e.next=4,t.allDocs(xl(xl({},ql(Hl)),{},{include_docs:!0}));case 4:o=e.sent,i=jl(o.rows);try{for(i.s();!(c=i.n()).done;)s=c.value,u=s.id,l=s.doc,a[u.substr(Hl.length)]=l.value}catch(b){i.e(b)}finally{i.f()}return e.next=9,t.allDocs(xl(xl({},ql(Vl)),{},{include_docs:!0}));case 9:p=e.sent,f=jl(p.rows);try{for(f.s();!(d=f.n()).done;)y=d.value,h=y.id,m=y.doc,"settleBlock"in m?a.oldChannels[h]=xl(xl({},m),{},{_id:h.substr(Vl.length)}):a.channels[qi(m)]=xl(xl({},m),{},{_id:h.substr(Vl.length)})}catch(b){f.e(b)}finally{f.f()}return e.next=14,t.find({selector:{cleared:0,direction:{$exists:!0}}});case 14:v=e.sent,v.warning&&(null===(n=null===r||void 0===r?void 0:r.warn)||void 0===n||n.call(r,v.warning,"getRaidenState")),g=jl(v.docs);try{for(g.s();!(O=g.n()).done;)w=O.value,a.transfers[w._id]=w}catch(b){g.e(b)}finally{g.f()}if(!("address"in a)){e.next=20;break}return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e,t){return np.apply(this,arguments)}function np(){return np=Ll(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],a=0,o=Object.entries(n);a<o.length;a++)if(i=Al(o[a],2),c=i[0],s=i[1],"channels"===c||"oldChannels"===c)for(u=0,l=Object.values(s);u<l.length;u++)p=l[u],r.push(xl(xl({},p),{},{_id:Vl+p._id}));else if("transfers"===c)for(f=0,d=Object.values(s);f<d.length;f++)y=d[f],r.push(y);else r.push({_id:Hl+c,value:s});return e.next=4,t.bulkDocs(r);case 4:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e){return Object.keys(e).map((function(e){return+e})).sort()}function ap(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_l;return null!==(e=qt(rp(t)))&&void 0!==e?e:0}function op(e){return+e.name.match(/_(\d+)$/)[1]}function ip(){return cp.apply(this,arguments)}function cp(){return cp=Ll(b.a.mark((function e(){var t,n=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{log:h.a},t.log||(t.log=h.a),t.adapter){e.next=6;break}return e.next=5,Ol();case 5:t.adapter=e.sent;case 6:return e.abrupt("return",hl["a"].defaults(t));case 7:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function sp(e){return up.apply(this,arguments)}function up(){return up=Ll(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m,v=this,g=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:_l,r=g.length>2&&void 0!==g[2]&&g[2],i=this.__defaults.log,c=rp(n),s=0,l=c.length-1;case 6:if(!(l>=0)){e.next=18;break}return p=c[l],e.next=10,Zl.call(this,"".concat(t,"_").concat(p));case 10:if(f=e.sent,!f){e.next=15;break}return s=p,u=f,e.abrupt("break",18);case 15:--l,e.next=6;break;case 18:if(u){e.next=22;break}return e.next=21,Zl.call(this,"".concat(t,"_").concat(s));case 21:u=e.sent;case 22:if(u){e.next=27;break}return s=ap(n),e.next=26,Xl.call(this,"".concat(t,"_").concat(s));case 26:u=e.sent;case 27:d=jl(c),e.prev=28,h=b.a.mark((function e(){var c,l,p;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=y.value,!(c<=s)){e.next=3;break}return e.abrupt("return","continue");case 3:return e.next=5,Xl.call(v,"".concat(t,"_").concat(c));case 5:return l=e.sent,e.prev=6,p=/^[a-z]/i,e.next=10,zl(u,{since:0,include_docs:!0,filter:function(e){var t=e._id;return p.test(t)}}).pipe(Object(Qu["a"])((function(e){return Object(L["a"])((function(){return n[c](e.doc,u)})).pipe(Object($["a"])((function(e){return Object(Yt["a"])(e)})),Object(Qu["a"])(function(){var e=Ll(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"_rev"in t&&delete t["_rev"],e.abrupt("return",l.put(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))).toPromise();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e["catch"](6),null===(a=null===i||void 0===i?void 0:i.error)||void 0===a||a.call(i,"Error migrating db",{from:s,to:c},e.t0),l.destroy(),e.t0;case 17:if(null===(o=null===i||void 0===i?void 0:i.info)||void 0===o||o.call(i,"Migrated db",{name:t,from:s,to:c}),!r){e.next=23;break}return e.next=21,u.destroy();case 21:e.next=25;break;case 23:return e.next=25,u.close();case 25:s=c,u=l;case 27:case"end":return e.stop()}}),e,null,[[6,12]])})),d.s();case 31:if((y=d.n()).done){e.next=38;break}return e.delegateYield(h(),"t0",33);case 33:if(m=e.t0,"continue"!==m){e.next=36;break}return e.abrupt("continue",36);case 36:e.next=31;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](28),d.e(e.t1);case 43:return e.prev=43,d.f(),e.finish(43);case 46:return gt(op(u)===ap(n),"Not latest version"),e.abrupt("return",u);case 48:case"end":return e.stop()}}),e,this,[[28,40,43,46]])}))),up.apply(this,arguments)}function lp(e){return pp.apply(this,arguments)}function pp(){return pp=Ll(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=op(t),e.next=3,t.get(Hl+"chainId");case 3:return e.t1=e.sent.value,e.next=6,t.get(Hl+"registry");case 6:return e.t2=e.sent.value,e.next=9,t.get(Hl+"address");case 9:return e.t3=e.sent.value,e.next=12,t.get(Hl+"blockNumber");case 12:return e.t4=e.sent.value,e.abrupt("return",{_id:"_meta",version:e.t0,network:e.t1,registry:e.t2,address:e.t3,blockNumber:e.t4});case 14:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function fp(e){return"function"===typeof e[Symbol.asyncIterator]}function dp(e,t){return bp.apply(this,arguments)}function bp(){return bp=Ll(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O,w=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:_l,a=w.length>3&&void 0!==w[3]&&w[3],i=this.__defaults.log,c=fp(t)?t[Symbol.asyncIterator]():t[Symbol.iterator](),e.next=6,c.next();case 6:s=e.sent,gt(!s.done&&"_meta"===s.value._id,'first yielded value must be "_meta"'),u=s.value,l=ap(r);case 10:if(!(l>=u.version)){e.next=28;break}return p="".concat(n,"_").concat(l),e.next=14,Zl.call(this,p);case 14:if(f=e.sent,f){e.next=17;break}return e.abrupt("continue",25);case 17:return e.next=19,lp(f);case 19:return d=e.sent,gt(u.version>=l&&u.blockNumber>=d.blockNumber,ht.RDN_STATE_MIGRATION),gt(u.address===d.address,[ht.RDN_STATE_ADDRESS_MISMATCH,{expected:d.address,received:u.address}],null===i||void 0===i?void 0:i.error),gt(u.registry===d.registry&&u.network===d.network,[ht.RDN_STATE_NETWORK_MISMATCH,{expectedRegistry:d.registry,receivedRegistry:u.registry,expectedNetwork:d.network,receivedNetwork:u.network}],null===i||void 0===i?void 0:i.error),e.next=25,f.destroy();case 25:--l,e.next=10;break;case 28:return y="".concat(n,"_").concat(u.version),e.next=31,Xl.call(this,y);case 31:return h=e.sent,e.next=34,c.next();case 34:m=e.sent;case 35:if(m.done){e.next=45;break}return v=m.value,"_rev"in v&&delete v["_rev"],e.next=40,Promise.all([c.next(),h.put(v)]);case 40:g=e.sent,O=Al(g,1),m=O[0],e.next=35;break;case 45:return null===(o=null===i||void 0===i?void 0:i.warn)||void 0===o||o.call(i,"Replaced/loaded database",{name:n,meta:u}),e.next=48,h.close();case 48:return e.next=50,sp.call(this,n,r,a);case 50:return e.abrupt("return",e.sent);case 51:case"end":return e.stop()}}),e,this)}))),bp.apply(this,arguments)}function yp(e){return e?e.slice(0,-1)+String.fromCharCode(e.slice(-1).charCodeAt(0)+1):""}function hp(e){return mp.apply(this,arguments)}function mp(){return mp=Ul(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.batch,a=void 0===r?10:r,i=t.changes({since:"now",live:!0}),i.on("change",(function(e){var t=e.id;return o=t})),e.prev=3,e.next=6,lp(t);case 6:c="a";case 7:return e.next=10,Bl(t.allDocs({startkey:c,endkey:"￰",limit:a,include_docs:!0}));case 10:return s=e.sent,e.delegateYield($l(Wl(s.rows.map((function(e){var t=e.doc;return yl()(["_rev"],t)}))),Bl),"t0",12);case 12:if(gt(!o,["Database changed while dumping",{key:o}]),u=qt(s.rows),!u){e.next=18;break}c=yp(u.id),e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=7;break;case 21:return e.prev=21,i.cancel(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,,21,24]])}))),mp.apply(this,arguments)}function vp(e){return gp.apply(this,arguments)}function gp(){return gp=Ll(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl.call(t.constructor,t.name));case 1:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function Op(e,t){return wp.apply(this,arguments)}function wp(){return wp=Ll(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y,h,m;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.constructor.__defaults.log,c=!1,s=10;case 3:if(!(s>0)){e.next=56;break}e.prev=4,u=[],l=!0,p=!1,e.prev=8,d=Wl(hp(t,n));case 10:return e.next=12,d.next();case 12:return y=e.sent,l=y.done,e.next=16,y.value;case 16:if(h=e.sent,l){e.next=23;break}m=h,u.push(m);case 20:l=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](8),p=!0,f=e.t0;case 29:if(e.prev=29,e.prev=30,l||null==d.return){e.next=34;break}return e.next=34,d.return();case 34:if(e.prev=34,!p){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(29);case 39:if(!c){e.next=42;break}return e.next=42,t.close();case 42:return e.abrupt("return",u);case 45:if(e.prev=45,e.t1=e["catch"](4),!(null===(a=null===(r=e.t1.message)||void 0===r?void 0:r.includes)||void 0===a?void 0:a.call(r,"database is closed"))){e.next=52;break}return c=!0,e.next=51,vp(t);case 51:t=e.sent;case 52:null===(o=null===i||void 0===i?void 0:i.warn)||void 0===o||o.call(i,"Restarting dump because",e.t1);case 53:--s,e.next=3;break;case 56:throw new Error("Could not dump database");case 57:case"end":return e.stop()}}),e,null,[[4,45],[8,25,29,39],[30,,34,38]])}))),wp.apply(this,arguments)}function kp(e){var t,n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(b){while(1)switch(b.prev=b.next){case 0:return n={_id:"_meta",version:0,network:e.chainId,registry:e.registry,address:e.address,blockNumber:e.blockNumber},b.next=3,n;case 3:r=0,a=Object.entries(e);case 4:if(!(r<a.length)){b.next=33;break}if(o=Al(a[r],2),i=o[0],c=o[1],"channels"!==i&&"oldChannels"!==i){b.next=17;break}s=0,u=Object.values(c);case 8:if(!(s<u.length)){b.next=15;break}return l=u[s],b.next=12,xl({_id:Vl+Ki(l)},l);case 12:s++,b.next=8;break;case 15:b.next=30;break;case 17:if("sent"!==i&&"received"!==i){b.next=28;break}p=0,f=Object.values(c);case 19:if(!(p<f.length)){b.next=26;break}return d=f[p],b.next=23,xl(xl(xl(xl(xl({_id:"".concat(i,":").concat(d.transfer.lock.secrethash),direction:i,secrethash:d.transfer.lock.secrethash,expiration:Object(_["bigNumberify"])(d.transfer.lock.expiration).toNumber(),channel:"".concat(d.transfer.token_network_address,"@").concat(d.partner,"#").concat(Object(_["bigNumberify"])(d.transfer.channel_identifier).toString().padStart(9,"0")),cleared:0},(null===(t=d.secret)||void 0===t?void 0:t.registerBlock)?{secretRegistered:{txHash:j["HashZero"],txBlock:d.secret.registerBlock,ts:1}}:{}),d),d.secret?{secret:d.secret.value}:{}),d.lockExpired?{expired:d.lockExpired}:{}),d.channelClosed?{channelSettled:d.channelClosed}:{});case 23:p++,b.next=19;break;case 26:b.next=30;break;case 28:return b.next=30,{_id:Hl+i,value:c};case 30:r++,b.next=4;break;case 33:case"end":return b.stop()}}),El)}function _p(e,t){if(null==e)return{};var n,r,a=jp(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function jp(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ep(e,t){return Sp(e)||xp(e,t)||Dp(e,t)||Tp()}function Tp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sp(e){if(Array.isArray(e))return e}function Ap(e){return Cp(e)||Rp(e)||Dp(e)||Np()}function Np(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dp(e,t){if(e){if("string"===typeof e)return Pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pp(e,t):void 0}}function Rp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Cp(e){if(Array.isArray(e))return Pp(e)}function Pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ip(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Lp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ip(o,r,a,i,c,"next",e)}function c(e){Ip(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Up(Object(n),!0).forEach((function(t){Bp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fp=function(e){switch(e.name){case"rinkeby":return Mp(Mp({},ol.contracts),ul.contracts);case"ropsten":return Mp(Mp({},al.contracts),sl.contracts);case"goerli":return Mp(Mp({},il.contracts),ll.contracts);case"homestead":return Mp(Mp({},cl.contracts),pl.contracts);default:throw new vt(ht.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Wp(e,t){return $p.apply(this,arguments)}function $p(){return $p=Lp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==(a=null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===r?void 0:r.origin)&&void 0!==a?a:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(hn(t).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),e.next=4,n.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=e.sent,s=Object(_["sha256"])(c),u=new rl["Wallet"](s,n.provider),e.abrupt("return",{signer:u,address:u.address});case 8:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}var Hp=function(){var e=Lp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!nl["Signer"].isSigner(t)){e.next=15;break}if(t.provider!==n){e.next=5;break}a=t,e.next=10;break;case 5:if(!(t instanceof rl["Wallet"])){e.next=9;break}a=t.connect(n),e.next=10;break;case 9:throw new vt(ht.RDN_SIGNER_NOT_CONNECTED,{account:t.toString(),provider:n.toString()});case 10:return e.next=12,a.getAddress();case 12:o=e.sent,e.next=38;break;case 15:if("number"!==typeof t){e.next=22;break}return a=n.getSigner(t),e.next=19,a.getAddress();case 19:o=e.sent,e.next=38;break;case 22:if(!Bt.is(t)){e.next=32;break}return e.next=25,n.listAccounts();case 25:if(c=e.sent,c.includes(t)){e.next=28;break}throw new vt(ht.RDN_ACCOUNT_NOT_FOUND,{account:t,accounts:JSON.stringify(c)});case 28:a=n.getSigner(t),o=t,e.next=38;break;case 32:if(!Ut.is(t)){e.next=37;break}a=new rl["Wallet"](t,n),o=a.address,e.next=38;break;case 37:throw new vt(ht.RDN_STRING_ACCOUNT_INVALID);case 38:if(!r){e.next=50;break}return i={signer:a,address:o},e.t0=Wp,e.next=43,n.getNetwork();case 43:return e.t1=e.sent,e.t2=i.signer,e.next=47,(0,e.t0)(e.t1,e.t2);case 47:s=e.sent,a=s.signer,o=s.address;case 50:return e.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Vp(e,t){return Object(I["a"])(zl(t,{since:0,include_docs:!0,selector:{direction:{$in:Object.values(ja)}}}).pipe(Object(H["a"])("doc"),Object(F["a"])(At),Object(B["a"])((function(e){return St(xa,e)}))),e.pipe(Ti("transfers"),xi(),Object(H["a"])(1))).pipe(Object(B["a"])(ks))}var qp=function(e){return Object.values(e).reduce((function(e,t){var n=Gi(t),r=Mp({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Mp(Mp({},e),{},Bp({},t.token,Mp(Mp({},e[t.token]),{},Bp({},t.partner.address,r))))}),{})};function Kp(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Gp(e,t){return e.signer===t?e:e.connect(t)}function Zp(e,t,n,r){return Yp.apply(this,arguments)}function Yp(){return Yp=Lp(b.a.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:{log:h.a},i=o.log,e.prev=1,e.next=4,(s=t.functions)[n].apply(s,Ap(r));case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),i.error("Error sending ".concat(n," tx"),e.t0),new vt(a,{error:e.t0.message});case 11:return i.debug("sent ".concat(n,' tx "').concat(c.hash,'" to "').concat(t.address,'"')),e.prev=12,e.next=15,c.wait();case 15:u=e.sent,gt(u.status,"tx status: ".concat(u.status)),e.next=23;break;case 19:throw e.prev=19,e.t1=e["catch"](12),i.error("Error mining ".concat(n," tx"),e.t1),new vt(a,{transactionHash:c.hash});case 23:return i.debug("".concat(n,' tx "').concat(c.hash,'" successfuly mined!')),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])}))),Yp.apply(this,arguments)}function Xp(e,t,n){return Qp.apply(this,arguments)}function Qp(){return Qp=Lp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.latest$,o=n.config$,i=n.provider,c=t.blockNumber,s=t.transactionHash,e.abrupt("return",a.pipe(Ti("state","blockNumber"),Object(Zu["a"])(o),Object(F["a"])((function(e){var t=Ep(e,2),n=t[0],a=t[1].confirmationBlocks;return c+(null!==r&&void 0!==r?r:a)<=n})),Object(Qt["a"])((function(e){var t=Ep(e,2),n=t[0],a=t[1].confirmationBlocks;return Object(L["a"])((function(){return i.getTransactionReceipt(s)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==r&&void 0!==r?r:a))return e.blockNumber;if(c+2*(null!==r&&void 0!==r?r:a)<n)throw new vt(ht.RDN_TRANSACTION_REORG,{transactionHash:s})})))})),Object(W["a"])(At)).toPromise());case 4:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}var zp=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Jp(e,t){return ef.apply(this,arguments)}function ef(){return ef=Lp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=ge.connect(n,t),e.next=3,r.msc_address();case 3:return a=e.sent,o=De.connect(a,t),e.next=7,o.token_network_registry();case 7:return i=e.sent,c=Z.connect(i,t),e.next=11,c.secret_registry_address();case 11:return s=e.sent,e.next=14,o.service_registry();case 14:return u=e.sent,e.next=17,t.getLogs(Mp(Mp({},c.filters.TokenNetworkCreated(null,null)),{},{fromBlock:1,toBlock:"latest"}));case 17:return l=e.sent,p=l.map((function(e){return e.blockNumber})).filter(At),f=p.length?Math.min.apply(Math,Ap(p)):0,e.next=22,r.one_to_n_address();case 22:return d=e.sent,e.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:f},ServiceRegistry:{address:u,block_number:f},UserDeposit:{address:n,block_number:f},SecretRegistry:{address:s,block_number:f},MonitoringService:{address:a,block_number:f},OneToN:{address:d,block_number:f}});case 24:case"end":return e.stop()}}),e)}))),ef.apply(this,arguments)}function tf(e){return nf.apply(this,arguments)}function nf(){return nf=Lp(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.pipe(Object(H["a"])("udcBalance"),Object(W["a"])((function(e){return!!e&&e.lt(j["MaxUint256"])}))).toPromise());case 1:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(e,t){var n,r,a,o=t.address,i=t.network,c=t.contractsInfo,s=e[0];gt("_meta"===(null===s||void 0===s?void 0:s._id),ht.RDN_STATE_MIGRATION),gt(s.address===o,ht.RDN_STATE_ADDRESS_MISMATCH),gt(s.registry===c.TokenNetworkRegistry.address,ht.RDN_STATE_NETWORK_MISMATCH),gt(s.network===i.chainId,ht.RDN_STATE_NETWORK_MISMATCH),gt((null===(n=e.find((function(e){return"state.address"===e._id})))||void 0===n?void 0:n.value)===o,ht.RDN_STATE_ADDRESS_MISMATCH),gt((null===(r=e.find((function(e){return"state.chainId"===e._id})))||void 0===r?void 0:r.value)===i.chainId,ht.RDN_STATE_NETWORK_MISMATCH),gt((null===(a=e.find((function(e){return"state.registry"===e._id})))||void 0===a?void 0:a.value)===c.TokenNetworkRegistry.address,ht.RDN_STATE_NETWORK_MISMATCH)}function af(e){return of.apply(this,arguments)}function of(){return of=Lp(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.address,r=t.network,a=t.contractsInfo,o=t.log,i=m.length>1&&void 0!==m[1]?m[1]:{},s=["raiden",hn(r),a.TokenNetworkRegistry.address,n].join("_"),l=!1,p=i.state,f=i.storage,i.state,d=_p(i,["storage","state"]),p){e.next=11;break}return e.next=9,null===(c=null===f||void 0===f?void 0:f.getItem)||void 0===c?void 0:c.call(f,s);case 9:p=e.sent,p&&(l=!0);case 11:return e.next=13,ip(Mp({log:o},d));case 13:if(y=e.sent,!p){e.next=24;break}return"string"===typeof p&&(p=_r(p)),Array.isArray(p)||(p=Array.from(kp(p))),rf(p,{address:n,network:r,contractsInfo:a}),e.next=20,dp.call(y,p,s);case 20:u=e.sent,l&&(null===i||void 0===i||i.storage.removeItem(s)),e.next=27;break;case 24:return e.next=26,sp.call(y,s);case 26:u=e.sent;case 27:return e.next=29,Jl(u);case 29:if(h=e.sent,h){e.next=36;break}return h=ei({network:r,address:n,contractsInfo:a}),e.next=34,tp(u,h);case 34:e.next=37;break;case 36:h=St(Jo,h);case 37:return e.abrupt("return",{db:u,state:h});case 38:case"end":return e.stop()}}),e)}))),of.apply(this,arguments)}function cf(e){return lf(e)||uf(e)||df(e)||sf()}function sf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function lf(e){if(Array.isArray(e))return bf(e)}function pf(e,t){return hf(e)||yf(e,t)||df(e,t)||ff()}function ff(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function df(e,t){if(e){if("string"===typeof e)return bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bf(e,t):void 0}}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hf(e){if(Array.isArray(e))return e}function mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mf(Object(n),!0).forEach((function(t){gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Of(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var wf=function(e,t,n){Of(e),Of(t);var r=n.provider;return Ni((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(P["a"])(e),pn(r,"block"))})),Object(B["a"])((function(e){return Wa({blockNumber:e})})))},kf=function(e,t,n){Of(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Gu["a"])(1),Object(F["a"])((function(e){return tl()(e.tokens)})),Object($["a"])((function(){return Ni((function(){return a.getLogs(vf(vf({},o.filters.TokenNetworkCreated(null,null)),{},{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object($["a"])(Yt["a"]),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(F["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(qu["a"])(Ni((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Yt["a"])),Ni((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Yt["a"]))).pipe(Object(Gu["a"])(1),Object(si["a"])($a({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},_f=function(e,t,n){Of(e),Of(t);var r=n.address,a=n.network,o=n.provider;return Ni((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(Ku["a"])(o.pollingInterval).pipe(Object(Qt["a"])((function(){return Object(I["a"])(e?Ni((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(P["a"])($o({reason:Ie.ACCOUNT_CHANGED}))}))):U["a"],Ni((function(){return dn(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(P["a"])($o({reason:Ie.NETWORK_CHANGED})):U["a"]}))))})))})))};function jf(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function Ef(e,t){var n=pf(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=jf(s),l=u.openTopic,p=u.depositTopic,f=u.withdrawTopic,d=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Zu["a"])(i),Object(B["a"])((function(e){var t,n,i=pf(e,2),c=i[0],s=i[1],u=s.state,y=s.config,h=c[0].toNumber(),m=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===h})),v=qt(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,k=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var _=pf(c,4),j=_[1],E=_[2],T=_[3];if((o===j||o===E)&&(!m||h>m.id)){var x=o==j?E:j;n=Ha.success({id:h,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:k},{tokenNetwork:a,partner:x})}break;case p:var S=pf(c,3),A=S[1],N=S[2];(null===m||void 0===m?void 0:m.id)===h&&N.gt(m[A===m.partner.address?"partner":"own"].deposit)&&(n=qa.success({id:h,participant:A,totalDeposit:N,txHash:O,txBlock:w,confirmed:k},{tokenNetwork:a,partner:m.partner.address}));break;case f:var D=pf(c,3),R=D[1],C=D[2];(null===m||void 0===m?void 0:m.id)===h&&C.gt(m[R===m.partner.address?"partner":"own"].withdraw)&&(n=Ka({id:h,participant:R,totalWithdraw:C,txHash:O,txBlock:w,confirmed:k},{tokenNetwork:a,partner:m.partner.address}));break;case d:if((null===m||void 0===m?void 0:m.id)===h&&!("closeBlock"in m)){var P=pf(c,2),I=P[1];n=Ga.success({id:h,participant:I,txHash:O,txBlock:w,confirmed:k},{tokenNetwork:a,partner:m.partner.address})}break;case b:(null===m||void 0===m?void 0:m.id)===h&&(n=Ya.success({id:h,txHash:O,txBlock:w,confirmed:k,locks:m.partner.locks},{tokenNetwork:a,partner:m.partner.address}));break}return n})),Object(F["a"])(At))}}function Tf(e,t,n){var r=pf(e,2),a=r[0],o=r[1],i=pf(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,p=n.latest$,f=n.getTokenNetworkContract,d=f(s),b=jf(d),y=b.openTopic;return Ni((function(){return Promise.all([l.getLogs(vf(vf({},d.filters.ChannelOpened(null,u,null,null)),{},{fromBlock:a,toBlock:o})),l.getLogs(vf(vf({},d.filters.ChannelOpened(null,null,u,null)),{},{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Zu["a"])(p),Object($["a"])((function(e){var t=pf(e,2),n=pf(t[0],2),r=n[0],i=n[1],c=t[1].state,p=r.concat(i).map(fn(d)).filter(At).filter((function(e){var t=pf(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=qi({tokenNetwork:s,partner:o});return!(Ki({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),f=[].concat(cf(p),cf(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=pf(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===f.length?U["a"]:Ni((function(){return l.getLogs({address:s,topics:[Object.values(jf(d)).filter((function(e){return e!==y})),f],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object($["a"])((function(e){var t=e.map(fn(d)).filter(At),n=[].concat(cf(p),cf(t));return Object(Yt["a"])(Ju()(n,[function(e){return qt(e).blockNumber},function(e){return qt(e).transactionIndex}]))})))})),Ef([c,s],n))}function xf(e,t,n){var r=pf(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(jf(u))]};return s.pipe(Object(W["a"])(),Object($["a"])((function(t){var n=t.confirmationBlocks;return pn(i,l,void 0,n,e)})),Object(B["a"])(fn(u)),Object(F["a"])(At),Ef([a,o],n))}var Sf=function(e,t,n){return e.pipe(Object(F["a"])(Wa.is),Object(H["a"])("payload","blockNumber"),Object(Yu["a"])(1,void 0,(function(e){return t.pipe(Object(H["a"])("tokens"),xi(),Object(Zu["a"])(t),Object($["a"])((function(t){var r=pf(t,2),a=pf(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new C["a"];return e.pipe(Object(W["a"])(),Object($["a"])((function(e){return Object(I["a"])(Object(P["a"])($a({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),Tf([s,e],[o,i],n).pipe(Object(Bu["a"])((function(){return u.next(!0),u.complete()}))),xf(e+1,[o,i],n).pipe(Object(Xu["a"])((function(){return u}))))})))})))})))},Af=function(e,t){return Of(e),t.pipe(zi,Object($["a"])((function(e){return e.pipe(Object(W["a"])(),Object(B["a"])((function(e){return Va({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},Nf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(F["a"])(Mr(Ha.request)),Object(Zu["a"])(t,u),Object($["a"])((function(t){var n,u,l,p,f=pf(t,3),d=f[0],b=f[1],y=f[2],h=y.settleTimeout,m=y.subkey,v=d.meta,g=v.tokenNetwork,O=v.partner,w=null===(n=b.channels[qi(d.meta)])||void 0===n?void 0:n.state;if(w)return Object(P["a"])(Ha.failure(new vt(ht.CNL_INVALID_STATE,{state:w}),d.meta));var k=Kp({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:m),_=k.signer,j=Gp(s(g),_),E=U["a"];return(null===(p=null===(l=d.payload.deposit)||void 0===l?void 0:l.gt)||void 0===p?void 0:p.call(l,0))&&(E=Object(P["a"])(qa.request({deposit:d.payload.deposit,subkey:d.payload.subkey,waitOpen:!0},d.meta))),Object(qu["a"])(E,Object(L["a"])((function(){var e;return j.functions.openChannel(o,O,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:h)})).pipe(Zi("openChannel",ht.CNL_OPENCHANNEL_FAILED,{log:r}),Qi(c.pollingInterval,void 0,Yi.concat(Xi),{log:r}),Object(ci["a"])(e.pipe(Object(F["a"])(Ha.success.is),Object(F["a"])((function(e){return e.meta.tokenNetwork===g&&e.meta.partner===O})))),Object(Mu["a"])(),Object(zt["a"])((function(e){return Object(P["a"])(Ha.failure(e,d.meta))}))))})))};function Df(e,t,n,r,a){var o=pf(e,2),i=o[0],c=o[1],s=pf(t,3),u=s[0],l=s[1],p=s[2],f=a.log,d=a.config$;return(null===n||void 0===n?void 0:n.gt(j["Zero"]))?Object(L["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(Zu["a"])(d),Object($["a"])((function(e){var t=pf(e,2),r=pf(t[0],2),a=r[0],o=r[1],s=t[1].minimumAllowance;return Ji([a,o,n],i,c.address,ht.CNL_APPROVE_TRANSACTION_FAILED,{log:f,minimumAllowance:s})})),Object(hi["a"])(r),Object(Gu["a"])(1),Object($["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,p).then((function(t){var n=t[0];return[e,n]}))})),Object($["a"])((function(e){var t=pf(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),p)})),Zi("setTotalDeposit",ht.CNL_SETTOTALDEPOSIT_FAILED,{log:f}),Qi(c.provider.pollingInterval,void 0,Yi.concat(Xi),{log:f}),Object(Mu["a"])()):U["a"]}var Rf=function(e,t,n){Of(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(F["a"])(Mr(qa.request)),Object(ii["a"])((function(e){return e.meta.tokenNetwork})),Object($["a"])((function(t){return t.pipe(Object(Qu["a"])((function(t){return Object(hu["a"])([l,u]).pipe(Object(W["a"])(),Object($["a"])((function(n){var p,f,d=pf(n,2),b=d[0].state,y=d[1].subkey,h=t.meta,m=h.tokenNetwork,v=h.partner,g=qe()(b.tokens,(function(e){return e===m})),O=b.channels[qi(t.meta)];if(g&&!O&&t.payload.waitOpen)f=Object(I["a"])(e.pipe(Object(F["a"])(Ha.failure.is),Object(F["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(hi["a"])(Object(ri["a"])(new vt(ht.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object(H["a"])("state","channels",qi(t.meta)),Object(F["a"])(At)));else{if((null===O||void 0===O?void 0:O.state)!==aa.open)throw new vt(ht.CNL_NO_OPEN_CHANNEL_FOUND);f=Object(P["a"])(O)}var w=Kp({signer:a,address:o,main:i},null!==(p=t.payload.subkey)&&void 0!==p?p:y),k=w.signer,_=w.address,j=Gp(c(g),k),E=Gp(s(m),k);return f.pipe(Object(H["a"])("id"),Object(Yu["a"])(1,void 0,(function(e){return Df([j,E],[_,o,v],t.payload.deposit,e,{log:r,config$:u})})))})),Object(zt["a"])((function(e){return Object(P["a"])(qa.failure(e,t.meta))})))})))})))},Cf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(F["a"])(Mr(Ga.request)),Object(Zu["a"])(t,l),Object($["a"])((function(e){var t,n,l=pf(e,3),p=l[0],f=l[1],d=l[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=Kp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Gp(u(y),v),O=f.channels[qi(p.meta)];if((null===O||void 0===O?void 0:O.state)!==aa.open&&(null===O||void 0===O?void 0:O.state)!==aa.closing){var w=new vt(ht.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,p.meta);return Object(P["a"])(Ga.failure(w,p.meta))}var k=O.partner.balanceProof,j=ca(k),E=k.nonce,T=k.additionalHash,x=k.signature,S=Object(_["concat"])([wr(y,20),wr(s.chainId,32),wr(ra.BALANCE_PROOF,32),wr(O.id,32),wr(j,32),wr(E,32),wr(T,32),wr(x,65)]);return Object(Yt["a"])(a.signMessage(S)).pipe(Object($["a"])((function(e){return Object(L["a"])((function(){return g.functions.closeChannel(O.id,h,o,j,E,T,x,e)})).pipe(Zi("closeChannel",ht.CNL_CLOSECHANNEL_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Mu["a"])(),Object(zt["a"])((function(e){return Object(P["a"])(Ga.failure(e,p.meta))})))})))},Pf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(F["a"])(Mr(Ga.success)),Object(F["a"])((function(e){return!!e.payload.confirmed})),Object(Xu["a"])((function(){return e.pipe(Object(F["a"])(Wa.is))})),Object(Zu["a"])(t,l),Object(F["a"])((function(e){var t=pf(e,2),n=t[0],r=t[1],a=r.channels[qi(n.meta)];return(null===a||void 0===a?void 0:a.state)===aa.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(j["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=pf(e,3),n=t[0],l=t[1],p=t[2].subkey,f=n.meta,d=f.tokenNetwork,b=f.partner,y=Kp({signer:a,address:o,main:i},p),h=y.signer,m=Gp(u(d),h),v=l.channels[qi(n.meta)],g=ca(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,k=v.partner.balanceProof.signature,j=Object(_["concat"])([wr(d,20),wr(s.chainId,32),wr(ra.BALANCE_PROOF_UPDATE,32),wr(v.id,32),wr(g,32),wr(O,32),wr(w,32),wr(k,65)]);return Object(Yt["a"])(a.signMessage(j)).pipe(Object($["a"])((function(e){return Object(L["a"])((function(){return m.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,k,e)})).pipe(Zi("updateNonClosingBalanceProof",ht.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Mu["a"])(),Object(zt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},If=function(e,t,n){Of(e);var r=n.config$;return t.pipe(zi,Object($["a"])((function(e){return e.pipe(Object(F["a"])((function(e){return e.state===aa.settleable})),Object(Gu["a"])(1),Object(Zu["a"])(r),Object(Xu["a"])((function(e){var n=pf(e,2),r=n[0],a=n[1].confirmationBlocks,o=r.closeBlock+r.settleTimeout+Math.round(a*(1+Math.random()));return t.pipe(Object(H["a"])("blockNumber"),Object(F["a"])((function(e){return o<=e})),Object(Gu["a"])(1))})),Object(Zu["a"])(t),Object(F["a"])((function(e){var t,n=pf(e,2),r=pf(n[0],1),a=r[0],o=n[1];return(null===(t=o.channels[qi(a)])||void 0===t?void 0:t.state)===aa.settleable})),Object(B["a"])((function(e){var t=pf(e,1),n=pf(t[0],1),r=n[0];return Ya.request(void 0,{tokenNetwork:r.tokenNetwork,partner:r.partner.address})})))})),Di(r.pipe(Object(H["a"])("autoSettle"))))},Lf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$,l=n.db;return e.pipe(Object(F["a"])(Mr(Ya.request)),Object(Zu["a"])(t,u),Object($["a"])((function(e){var t,n,u=pf(e,3),p=u[0],f=u[1],d=u[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=Kp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Gp(s(y),v),O=f.channels[qi(p.meta)];if((null===O||void 0===O?void 0:O.state)!==aa.settleable&&(null===O||void 0===O?void 0:O.state)!==aa.settling){var w=new vt(ht.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,p.meta);return Object(P["a"])(Ya.failure(w,p.meta))}return Object(Yt["a"])(Promise.all([g.functions.getChannelParticipantInfo(O.id,o,h),g.functions.getChannelParticipantInfo(O.id,h,o)])).pipe(Object($["a"])((function(e){var t,n,a=pf(e,2),i=a[0][3],s=a[1][3];return t=i===ca(O.own.balanceProof)?Object(P["a"])(O.own.balanceProof):_s(l,O,ja.SENT,i).pipe(Object(zt["a"])((function(){return Object(ri["a"])(new vt(ht.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:i}))}))),n=s===ca(O.partner.balanceProof)?Object(P["a"])(O.partner.balanceProof):_s(l,O,ja.RECEIVED,s).pipe(Object(zt["a"])((function(){return Object(ri["a"])(new vt(ht.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,partnerBalanceHash:s}))}))),Object(hu["a"])([t,n]).pipe(Object(B["a"])((function(e){var t=pf(e,2),n=t[0],r=t[1];return r.transferredAmount.add(r.lockedAmount).lt(n.transferredAmount.add(n.lockedAmount))?[[h,r],[o,n]]:[[o,n],[h,r]]})),Object($["a"])((function(e){var t=pf(e,2),n=t[0],a=t[1];return Object(L["a"])((function(){return g.functions.settleChannel(O.id,n[0],n[1].transferredAmount,n[1].lockedAmount,n[1].locksroot,a[0],a[1].transferredAmount,a[1].lockedAmount,a[1].locksroot)})).pipe(Zi("settleChannel",ht.CNL_SETTLECHANNEL_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}))})))})),Object(Mu["a"])(),Object(zt["a"])((function(e){return Object(P["a"])(Ya.failure(e,p.meta))})))})))},Uf=function(e,t){return e.pipe(Object(F["a"])(Mr(Wa)),Object(Zu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=pf(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===aa.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Za({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Mf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(F["a"])(Mr(Ya.success)),Object(F["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Zu["a"])(t,u),Object(F["a"])((function(e){var t,n=pf(e,2),r=n[0],a=n[1];return(null===(t=a.channels[qi(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=pf(e,3),n=t[0],u=t[2].subkey,l=n.meta,p=l.tokenNetwork,f=l.partner,d=Gp(s(p),Kp({signer:a,address:o,main:i},u).signer),b=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(cf(e),[wr(t.expiration,32),wr(t.amount,32),t.secrethash])}),[]));return Object(L["a"])((function(){return d.functions.unlock(n.payload.id,o,f,b)})).pipe(Zi("unlock",ht.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}),Object(Mu["a"])(),Object(zt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function Bf(e,t,n,r){return Ni((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?vf(vf({},e),{},{payload:vf(vf({},e.payload),{},{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?vf(vf({},e),{},{payload:vf(vf({},e.payload),{},{confirmed:!1})}):void 0})),Object(F["a"])(At))}var Ff=function(e,t,n){Of(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(hu["a"])([t.pipe(Ti("blockNumber")),t.pipe(Object(H["a"])("pendingTxs")),r.pipe(Ti("confirmationBlocks"))]).pipe(Object(F["a"])((function(e){var t=pf(e,2),n=t[1];return n.length>0})),Object(Qt["a"])((function(e){var t=pf(e,3),n=t[0],r=t[1],i=t[2];return Object(Yt["a"])(r).pipe(Object(F["a"])((function(e){return e.payload.txBlock+i<n})),Object(Qu["a"])((function(e){return Bf(e,a,n,i).pipe(Object(ci["a"])(o.pipe(Object(F["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))},Wf=n("9849"),$f=n("3bb9"),Hf=n("84d1"),Vf=n("2705"),qf=n("153e");function Kf(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Gf(e,t){var n=Object(qf["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Zf=b.a.mark(Yf);function Yf(){var e,t,n,r,a=arguments;return b.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e3,t=a.length>1&&void 0!==a[1]?a[1]:6e4,n=a.length>2&&void 0!==a[2]?a[2]:1.4,r=e;case 4:return o.next=7,r;case 7:r=Math.min(t,Math.ceil(r*n)),o.next=4;break;case 10:case"end":return o.stop()}}),Zf)}function Xf(e,t,n){return Object(I["a"])(e.pipe(Object(F["a"])(n),Object(Gu["a"])(1),Object(Mu["a"])()),Object(P["a"])(t))}function Qf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Xf(t,e,$r(Zr,e.meta)).pipe(Si(n,r))}function zf(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}var Jf=n("a51e"),ed=n.n(Jf);function td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function rd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){nd(o,r,a,i,c,"next",e)}function c(e){nd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ad(e,t){return ud(e)||sd(e,t)||id(e,t)||od()}function od(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function id(e,t){if(e){if("string"===typeof e)return cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cd(e,t):void 0}}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ud(e){if(Array.isArray(e))return e}function ld(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(At)}var pd=ed()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function fd(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(pd(t))),n?Object(P["a"])(n):Object(dl["a"])(e,"Room").pipe(Object(F["a"])(pd(t)),Object(Gu["a"])(1))}function dd(e,t,n){var r=n.latest$;return Object(hu["a"])([r.pipe(Ti("presences",t),Object(F["a"])((function(e){var t;return!!(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)}))),r.pipe(Object(B["a"])((function(e){var n,r,a=e.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0]})),Object(F["a"])(At),Object(pi["a"])()),Object(dl["a"])(e,"Room").pipe(Object(vu["a"])(null)),Object(dl["a"])(e,"RoomMember.membership").pipe(Object(vu["a"])(null))]).pipe(Object(F["a"])((function(t){var n,r,a,o=ad(t,2),i=o[0],c=o[1];return"join"===(null===(a=null===(r=null===(n=e.getRoom(c))||void 0===n?void 0:n.getMember)||void 0===r?void 0:r.call(n,i.payload.userId))||void 0===a?void 0:a.membership)})),Object(H["a"])(1),Object(Gu["a"])(1))}function bd(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(F["a"])((function(t){var n,r,a=t.presences;return!!(null===(r=null===(n=a[e])||void 0===n?void 0:n.payload)||void 0===r?void 0:r.available)})),Object(Gu["a"])(1),Object(Zu["a"])(c),Object($["a"])((function(n){var r,a=ad(n,2),o=a[0],c=o.presences,u=o.rtc,l=a[1].caps;return s&&"open"===(null===(r=u[e])||void 0===r?void 0:r.readyState)?Object(P["a"])(u[e]):Uu(l,Le.TO_DEVICE)&&Uu(c[e].payload.caps,Le.TO_DEVICE)?Object(P["a"])(c[e].payload.userId):dd(t,e,{latest$:i})})),Object($["a"])(function(){var e=rd(b.a.mark((function e(a){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"===typeof a){e.next=4;break}a.send(r.body),e.next=11;break;case 4:if(!a.startsWith("@")){e.next=9;break}return e.next=7,t.sendToDevice(n,td({},a,{"*":r}));case 7:e.next=11;break;case 9:return e.next=11,t.sendEvent(a,n,r,"");case 11:return e.abrupt("return","string"!==typeof a?a.label:a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(oi["a"])((function(e){return e.pipe(Object(Zu["a"])(c),Object($["a"])((function(e,t){var n=ad(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(ni["a"])(a)):Object(ri["a"])(r)})))})))}function yd(e,t,n){var r=n.log;if("string"===typeof e)try{var a=ba(e);if("signature"in a){var o=pa(a);if(o!==t)throw new vt(ht.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function hd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function md(e,t){return kd(e)||wd(e,t)||gd(e,t)||vd()}function vd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gd(e,t){if(e){if("string"===typeof e)return Od(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Od(e,t):void 0}}function Od(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kd(e){if(Array.isArray(e))return e}function _d(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function jd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_d(o,r,a,i,c,"next",e)}function c(e){_d(o,r,a,i,c,"throw",e)}i(void 0)}))}}var Ed="RAIDEN";function Td(e,t){var n=Kf(t.getHomeserverUrl());return Object(Yt["a"])(ld(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new v["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(H["a"])("roomId"),Object(Wf["a"])())}function xd(e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=jd(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={not_rooms:n,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[t.getUserId()]}},a={room:r},e.abrupt("return",t.createFilter(a));case 3:case"end":return e.stop()}}),e)}))),Sd.apply(this,arguments)}function Ad(e,t,n,r){return e.pipe(Object(F["a"])(za.is),Object(Gu["a"])(1),Object(ai["a"])((function(){n.next(t),n.complete()})),Object(Zu["a"])(r),Object(Xu["a"])((function(e){var t=md(e,2),n=t[1].pollingInterval;return Object(ni["a"])(Math.ceil(n/5))})),Object($["a"])((function(e){var n=md(e,2),r=n[1];return Td(r,t).pipe(Object($["a"])((function(e){return xd(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})),Ai(Yf(r.pollingInterval,r.httpTimeout),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})))})),Object(Mu["a"])())}function Nd(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Dd(e,t){return e.includes("://")||(e="https://"+e),Object(L["a"])((function(){var n=Date.now();return Object(Vf["a"])(e+"/_matrix/client/versions").pipe(Object($f["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(zt["a"])((function(){return Object(P["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Rd(e,t){return Object(Vf["a"])(e).pipe(Object($["a"])(function(){var t=jd(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return gt(n.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(n.status)),t.abrupt("return",n.text());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object($f["a"])(t),Object($["a"])((function(e){return Nd(e)})),Object($["a"])((function(e){return Dd(e,t)})),Object(Wf["a"])(),Object($["a"])((function(e){return Ju()(e,["rtt"])})),Object(F["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Hf["a"])((function(){return new vt(ht.TRNS_NO_MATRIX_SERVERS)})))}function Cd(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=Kf(e);if(!c)throw new vt(ht.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(W["a"])(),Object($["a"])((function(n){var r=n.pollingInterval;if(t){var i=Object(v["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(P["a"])({matrix:i,server:e,setup:t,pollingInterval:r})}var s=Object(v["createClient"])({baseUrl:e}),u=a.toLowerCase(),l="@".concat(u,":").concat(c);return Object(Yt["a"])(o.signMessage(c)).pipe(Object($["a"])((function(e){return Ni((function(){return s.login("m.login.password",{user:u,password:e,device_id:Ed})}),r,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object(zt["a"])((function(t){return s.register(u,e).catch((function(){throw t}))})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return s.deviceId=a,s._http.opts.accessToken=n,s.credentials={userId:l},Object(Yt["a"])(o.signMessage(l)).pipe(Object(B["a"])((function(t){return{matrix:s,server:e,setup:{userId:l,accessToken:n,deviceId:a,displayName:t},pollingInterval:r}})))})))})),Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup,o=e.pollingInterval;return Object(hu["a"])([Ni((function(){return t.setDisplayName(a.displayName)}),o,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Ni((function(){return t.setAvatarUrl(r&&!tl()(r)?Iu(r):"")}),o,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))]).pipe(Object(si["a"])({matrix:t,server:n,setup:a}))})))}var Pd=function(e,t,n){hd(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(hu["a"])([i,c]).pipe(Object(W["a"])(),Object($["a"])((function(e){var t,n=md(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,p=i.caps,f=o.transport.server,d=o.transport.setup,b=[];s?(s===f&&b.push(Object(P["a"])({server:f,setup:d})),b.push(Object(P["a"])({server:s}))):(f&&b.push(Object(P["a"])({server:f,setup:d})),b.push(Rd(u,l)));var y=function(e){return t=e,U["a"]};return Object(L["a"])((function(){return b.shift()||U["a"]})).pipe(Object(zt["a"])(y),Object(Qu["a"])((function(e){var t=e.server,n=e.setup;return Cd(t,n,{address:r,signer:a,config$:c},p).pipe(Object(zt["a"])(y))})),Object(W["a"])(),Object(ai["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(oi["a"])((function(e){return e.pipe(Object($["a"])((function(){return b.length?Object(P["a"])(null):Object(ri["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(Ad(e,n,o,c),Object(P["a"])(za({server:r,setup:a})),c.pipe(Ti("logger"),Object(ai["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Mu["a"])()))})))},Id=function(e,t,n){hd(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Bu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Mu["a"])())},Ld=n("e98d"),Ud=n.n(Ld),Md=n("a434"),Bd=n.n(Md);function Fd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Wd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Fd(o,r,a,i,c,"next",e)}function c(e){Fd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $d(e,t){return qd(e)||Vd(e,t)||Qd(e,t)||Hd()}function Hd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qd(e){if(Array.isArray(e))return e}function Kd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(n),!0).forEach((function(t){Yd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Qd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Qd(e,t){if(e){if("string"===typeof e)return zd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zd(e,t):void 0}}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jd=["online","unavailable"],eb=/^@(0x[0-9a-f]{40})[.:]/i;function tb(e,t,n){var r=n.log;return Object(L["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(b.a.mark((function e(n){var r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Xd(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=eb.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Gf(e,t.user_id).then((function(e){return Zd(Zd({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(F["a"])(At),Object(Wf["a"])(),Object(B["a"])((function(e){if(!e.length)throw new vt(ht.TRNS_NO_VALID_USER,{address:t});return Ud()(e,"last_active_ago")})))}var nb=function(e,t,n){Kd(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(F["a"])(Mr(Ja.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ii["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Zu["a"])(a.pipe(Ti("presences"))),Object(Qt["a"])((function(e){var t=$d(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(P["a"])(i[r.meta.address]):tb(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Ja.success({userId:n,available:Jd.includes(t),ts:Date.now(),caps:Lu(a)},r.meta)})),Object(zt["a"])((function(e){return Object(P["a"])(Ja.failure(e,r.meta))})))})))})))},rb=["userId","available","caps"],ab=function(e,t,n){Kd(t);var r=n.log,a=n.matrix$,o=n.latest$,i=n.config$;return a.pipe(Object(yi["a"])((function(e){return Object(dl["a"])(e,"event").pipe(Object(F["a"])((function(e){return"m.presence"===e.getType()})),Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t,n=e.event,r=e.matrix;try{var a=r.getUser(n.getSender());gt(null===a||void 0===a?void 0:a.presence);var o=null===(t=eb.exec(a.userId))||void 0===t?void 0:t[1];gt(o);var i=Object(_["getAddress"])(o);return gt(i),{matrix:r,user:a,address:i,event:n}}catch(c){}})),Object(F["a"])(At),Object(Zu["a"])(e.pipe(Object(F["a"])(Ja.request.is),Object(fi["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(vu["a"])(new Set)),i),Object(F["a"])((function(e){var t=$d(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=$d(e,3),n=t[0],a=n.matrix,o=n.user,i=n.address,c=t[2],s=c.pollingInterval,u=c.httpTimeout,l=o.userId,p=o.presence,f=Jd.includes(p);return Object(L["a"])((function(){return a.getProfileInfo(l)})).pipe(Object(B["a"])((function(e){var t;gt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(l,e.displayname);return gt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Ja.success({userId:l,available:f,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Lu(e.avatar_url)},{address:n})})),Ai(Yf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(zt["a"])((function(e){return r.warn("Error validating presence event, ignoring",l,e),U["a"]})))}))).pipe(Object(Zu["a"])(o),Object(F["a"])((function(e){var t,n=$d(e,2),r=n[0],a=n[1].presences;return(r.payload.available||!(r.meta.address in a)||!a[r.meta.address].payload.available||r.payload.userId===a[r.meta.address].payload.userId)&&!ku()(Bd()(r.payload,rb),Bd()(null===(t=a[r.meta.address])||void 0===t?void 0:t.payload,rb))})),Object(H["a"])(0))},ob=function(e){return e.pipe(Object(F["a"])(Va.is),Object(B["a"])((function(e){return Ja.request(void 0,{address:e.meta.partner})})))},ib=function(e,t,n){Kd(e),Kd(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(H["a"])("caps"),Object(pi["a"])(ku.a),Object(M["a"])(1),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return[e,t]})))})),Object($["a"])(function(){var e=Wd(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=$d(t,2),r=n[0],a=n[1],e.abrupt("return",a.setAvatarUrl(r&&!tl()(r)?Iu(r):"").catch((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Mu["a"])())},cb=n("67fa"),sb=n("4914");function ub(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function lb(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ub(o,r,a,i,c,"next",e)}function c(e){ub(o,r,a,i,c,"throw",e)}i(void 0)}))}}function pb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=bb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function fb(e,t){return mb(e)||hb(e,t)||bb(e,t)||db()}function db(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bb(e,t){if(e){if("string"===typeof e)return yb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yb(e,t):void 0}}function yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mb(e){if(Array.isArray(e))return e}function vb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function gb(e,t,n,r,a){var o,i,c=r.pollingInterval,s=r.httpTimeout,u=a.log;return Object(ni["a"])(c).pipe(Object($["a"])((function(){return Object(L["a"])((function(){return e.invite(t,n)})).pipe(Object(zt["a"])((function(e){return u.warn("Error inviting",e),U["a"]})),Object(di["a"])((function(e){return e.pipe(Object(cb["a"])(s))})))})),Di(Object(dl["a"])(e,"RoomMember.membership").pipe(Object(H["a"])(1),Object(F["a"])((function(e){return e.roomId===t&&e.userId===n})),Object(vu["a"])(null===(i=null===(o=e.getRoom(t))||void 0===o?void 0:o.getMember)||void 0===i?void 0:i.call(o,n)),Object(B["a"])((function(e){return"join"!==(null===e||void 0===e?void 0:e.membership)})),Object(pi["a"])())))}var Ob=function(e,t,n){vb(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$,c=n.config$;return e.pipe(Object(F["a"])(Mr([lo,Va,Zr.request,to])),Object(B["a"])((function(e){var t;switch(e.type){case lo.type:e.meta.direction===ja.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===ja.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Va.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(F["a"])(At),Object(ii["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(Zu["a"])(c),Object(Qt["a"])((function(e){var t=fb(e,2),n=t[0],r=n.address,o=n.matrix,c=t[1],s=c.pollingInterval,u=c.httpTimeout;return i.pipe(Object(F["a"])((function(e){var t=e.presences;return r in t})),Object(Gu["a"])(1),Object(F["a"])((function(e){var t=e.presences,n=e.config;return!Uu(n.caps,Le.TO_DEVICE)||!Uu(t[r].payload.caps,Le.TO_DEVICE)})),Object(F["a"])((function(e){var t,n,a=e.state;return!(null===(n=null===(t=a.transport.rooms)||void 0===t?void 0:t[r])||void 0===n?void 0:n[0])})),Object($["a"])((function(e){var t=e.presences;return o.createRoom({visibility:"private",invite:[t[r].payload.userId]})})),Object(B["a"])((function(e){var t=e.room_id;return eo({roomId:t},{address:r})})),Ai(Yf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(zt["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},wb=function(e,t,n){vb(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(F["a"])(Mr(Ja.success)),Object(ii["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return Object(hu["a"])([e,o.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e.key])||void 0===r?void 0:r[0]})),Object(pi["a"])())]).pipe(Object(Zu["a"])(r,a),Object(yi["a"])((function(e){var t=fb(e,3),n=fb(t[0],2),r=n[0],a=n[1],o=t[1],c=t[2];return r.payload.available&&a?gb(o,a,r.payload.userId,c,{log:i}):U["a"]})))})),Object(Mu["a"])())},kb=function(e,t,n){vb(e),vb(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yi["a"])((function(e){return Object(dl["a"])(e,"RoomMember.membership").pipe(Object(B["a"])((function(t){var n=fb(t,2),r=n[0],a=n[1];return{event:r,member:a,matrix:e}})))})),Object(F["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Zu["a"])(o),Object($["a"])((function(e){var t=fb(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Ti("presences"),Object(B["a"])((function(e){return Object.values(e).find((function(e){return e.payload.userId===s}))})),Object(F["a"])(At),Object(Gu["a"])(1),Object(ci["a"])(Object(ni["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(Zu["a"])(o),Object($["a"])((function(e){var t=fb(e,2),n=t[0],a=n.matrix,o=n.member,i=n.senderPresence,c=t[1],s=c.pollingInterval,u=c.httpTimeout;return Object(L["a"])((function(){return a.joinRoom(o.roomId,{syncRoom:!0})})).pipe(Object(si["a"])(eo({roomId:o.roomId},{address:i.meta.address})),Ai(Yf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(zt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},_b=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(F["a"])(Mr(eo)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Zu["a"])(t,o),Object($["a"])((function(e){var t,n,a=fb(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Yt["a"])(l.filter((function(e,t){return vb(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return to({roomId:e},i.meta)})))})))},jb=function(e,t,n){vb(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(yi["a"])((function(e){return Object(dl["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,room:t}})))})),Object(Xu["a"])((function(){return o.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(ni["a"])(t)})))})),Object(Zu["a"])(t,o),Object(F["a"])((function(e){var t,n=fb(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=Kf(a.getHomeserverUrl());if(ld(c).some((function(e){return pd("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var p,f=l[u],d=pb(f);try{for(d.s();!(p=d.n()).done;){var b=p.value;if(b===o.roomId)return!1}}catch(y){d.e(y)}finally{d.f()}}return!0})),Object($["a"])(function(){var e=lb(b.a.mark((function e(t){var n,a,o,i;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=fb(t,1),a=n[0],o=a.matrix,i=a.room,r.warn("Unknown room in matrix, leaving",i.roomId),e.abrupt("return",o.leave(i.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Mu["a"])())},Eb=function(e,t,n){vb(e);var r=n.log,a=n.matrix$;return a.pipe(Object(yi["a"])((function(e){return Object(dl["a"])(e,"Room.myMembership").pipe(Object(B["a"])((function(t){var n=fb(t,2),r=n[0],a=n[1];return{room:r,membership:a,matrix:e}})))})),Object(F["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Zu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=fb(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=fb(s[c],2),l=u[0],p=u[1],f=pb(p),e.prev=5,f.s();case 7:if((d=f.n()).done){e.next=15;break}if(y=d.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,to({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Tb=function(e,t,n){vb(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Ti("transport","rooms"),Object(F["a"])(At),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=fb(r[n],2),o=a[0],i=a[1],c=pb(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(sb["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Zu["a"])(o),Object($["a"])((function(e){var t=fb(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return fd(i,a).pipe(Object($f["a"])(c),Object(Mu["a"])(),Object(zt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(P["a"])(to({roomId:a},{address:o}))})))})))},xb=function(e,t){return e.pipe(Object(F["a"])(Xr.is),Object(Zu["a"])(t),Object(F["a"])((function(e){var t,n,r=fb(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=fb(e,1),n=t[0];return eo({roomId:n.payload.roomId},n.meta)})))};function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nb(e,t,n){return t&&Ab(e.prototype,t),n&&Ab(e,n),e}var Db=function(){function e(t){Sb(this,e),this.values=new Map,this.max=t}return Nb(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function Rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(n),!0).forEach((function(t){Pb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ib(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Mb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Lb(e,t){return Wb(e)||Fb(e,t)||Mb(e,t)||Ub()}function Ub(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mb(e,t){if(e){if("string"===typeof e)return Bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bb(e,t):void 0}}function Bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wb(e){if(Array.isArray(e))return e}function $b(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Hb=function(e,t,n){$b(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(F["a"])(Mr(Zr.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ii["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Qu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:da(t.payload.message),c={body:a,msgtype:"m.text"};return bd(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(B["a"])((function(e){return Zr.success({via:e},t.meta)})),Object(zt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(P["a"])(Zr.failure(e,t.meta))})))})))})))},Vb=function(e,t,n){$b(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(F["a"])(Mr(Yr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Zu["a"])(o),Object($["a"])((function(e){var t=Lb(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=ld(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=Kf(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return fd(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:da(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(zt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(Mu["a"])())};function qb(e){var t=Lb(e,2),n=t[0],r=n.matrix,a=n.event,o=n.room,i=t[1],c="m.room.message"===a.getType()&&"m.text"===a.getContent().msgtype&&a.getSender()!==r.getUserId(),s=!!o&&!ld(i).some((function(e){return pd("#".concat(e,":").concat(Kf(r.getHomeserverUrl())),o)})),u=!o&&!!Uu(i.caps,Le.TO_DEVICE);return c&&(s||u)}var Kb,Gb,Zb=function(e,t,n){$b(e),$b(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yi["a"])((function(e){return Object(I["a"])(Object(dl["a"])(e,"Room.timeline").pipe(Object(B["a"])((function(t){var n=Lb(t,2),r=n[0],a=n[1];return{matrix:e,event:r,room:a}}))),Object(dl["a"])(e,"toDeviceEvent").pipe(Object(B["a"])((function(t){return{matrix:e,event:t,room:void 0}}))))})),Object(Zu["a"])(o),Object(F["a"])(qb),Object($["a"])((function(e){var t=Lb(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(F["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Pu(r,a.getSender());if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!o||s.includes(o.roomId)})),Object(Gu["a"])(1),Object(ci["a"])(Object(ni["a"])(c)),Object($["a"])(b.a.mark((function e(t){var n,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,s=Pu(n,a.getSender()),u=Ib((null!==(i=a.getContent().body)&&void 0!==i?i:"").split("\n")),e.prev=3,u.s();case 5:if((l=u.n()).done){e.next=12;break}return p=l.value,f=yd(p,s.meta.address,{log:r}),e.next=10,Xr(Cb({text:p,message:f,ts:null!==(c=a.event.origin_server_ts)&&void 0!==c?c:Date.now(),userId:s.payload.userId},o?{roomId:o.roomId}:{}),s.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),u.e(e.t0);case 17:return e.prev=17,u.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Yb=function(e,t,n){$b(t);var r=n.log,a=n.signer,o=n.latest$,i=new Db(32);return e.pipe(Object(F["a"])(ma([Ht(Mn),Ht(Fn),Ht($n)])),Object(Zu["a"])(o),Object(F["a"])((function(e){var t=Lb(e,2),n=t[0],r=t[1].presences;return n.meta.address in r&&!!Uu(r[n.meta.address].payload.caps,Le.DELIVERY)})),Object(Qu["a"])((function(e){var t=Lb(e,1),n=t[0],o=n.payload.message;return Object(L["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(P["a"])(Zr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Sn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Yt["a"])(ya(a,s,{log:r})).pipe(Object(ai["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return Zr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Xb=n("e11c"),Qb=n("1e67");function zb(e,t){return ty(e)||ey(e,t)||oy(e,t)||Jb()}function Jb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ey(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ty(e){if(Array.isArray(e))return e}function ny(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ry(e){return cy(e)||iy(e)||oy(e)||ay()}function ay(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oy(e,t){if(e){if("string"===typeof e)return sy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sy(e,t):void 0}}function iy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function cy(e){if(Array.isArray(e))return sy(e)}function sy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uy(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ly(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){uy(o,r,a,i,c,"next",e)}function c(e){uy(o,r,a,i,c,"throw",e)}i(void 0)}))}}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e["offer"]="offer",e["answer"]="answer",e["candidates"]="candidates",e["hangup"]="hangup"})(Gb||(Gb={}));var fy=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Gb.offer),sdp:Fe["s"]}),Fe["o"]({call_id:Fe["s"]})])),dy=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Gb.answer),sdp:Fe["s"]}),Fe["o"]({call_id:Fe["s"]})])),by=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Gb.candidates),candidates:Fe["q"](Fe["y"])}),Fe["o"]({call_id:Fe["s"]})])),yy=Fe["p"](Fe["j"]([Fe["v"]({type:Fe["l"](Gb.hangup)}),Fe["o"]({call_id:Fe["s"]})])),hy=(Kb={},py(Kb,Gb.offer,fy),py(Kb,Gb.answer,dy),py(Kb,Gb.candidates,by),py(Kb,Gb.hangup,yy),Kb),my=new WeakMap;function vy(e){return gy.apply(this,arguments)}function gy(){return gy=ly(b.a.mark((function e(t){var n,r,a,o;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=my.get(t),!(n&&Date.now()<n[0])){e.next=3;break}return e.abrupt("return",n[1]);case 3:return e.next=5,t.turnServer().catch((function(){}));case 5:return r=e.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),my.set(t,[a,o]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),gy.apply(this,arguments)}function Oy(e,t,n){return Object(I["a"])(Object(dl["a"])(e,"Room.timeline").pipe(Object(H["a"])(0)),Object(dl["a"])(e,"toDeviceEvent")).pipe(Object(F["a"])((function(e){var t;return"m.room.message"===e.getType()&&e.getSender()===n&&"m.notice"===(null===(t=e.getContent())||void 0===t?void 0:t.msgtype)})),Object($["a"])((function(e){var n;try{return Object(P["a"])(St(hy[t],_r(null===(n=e.getContent())||void 0===n?void 0:n.body)))}catch(r){}return U["a"]})))}function wy(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(dl["a"])(e,"icecandidate").pipe(Object(H["a"])("candidate"),Object(Xu["a"])((function(){return n})),Object(bi["a"])(At),Object(Xb["a"])(10),Object(F["a"])((function(e){return e.length>0})),Object(ai["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){var n={type:Gb.candidates,candidates:e,call_id:o};return bd(c,t,"m.room.message",{msgtype:"m.notice",body:jr(n)},{log:s,latest$:u,config$:l})}))),Oy(t,Gb.candidates,i).pipe(Object(ai["a"])((function(e){return s.debug("RTC: received candidates",o,e.candidates)})),Object($["a"])((function(e){var t;return Object(Yt["a"])(null!==(t=e.candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(L["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(zt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(Mu["a"])())}function ky(e,t,n,r,a){var o=r.fallbackIceServers,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,p=a.config$;return Object(L["a"])((function(){return vy(e)})).pipe(Object($["a"])((function(r){var f=new RTCPeerConnection({iceServers:[].concat(ry(r),ry(o))}),d=f.createDataChannel(i,{ordered:!1});return Object.assign(d,{connection:f}),Object(I["a"])(wy(f,e,t,n,a),Object(L["a"])(ly(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.createOffer());case 1:case"end":return e.stop()}}),e)})))).pipe(Object($["a"])(function(){var e=ly(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.setLocalDescription(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object($["a"])((function(t){var n={type:t.type,sdp:t.sdp,call_id:i};return Object(I["a"])(Oy(e,Gb.answer,c),bd(s,e,"m.room.message",{msgtype:"m.notice",body:jr(n)},{log:u,latest$:l,config$:p}).pipe(Object(ai["a"])((function(e){return u.debug("RTC: sent invite",i,e)})),Object(Mu["a"])()))})),Object(Gu["a"])(1),Object(ai["a"])((function(e){u.info("RTC: got answer",i),e.call_id!==i&&u.warn('RTC: callId mismatch, continuing: we="'.concat(i,'", them="').concat(e.call_id,'"'))})),Object($["a"])(function(){var e=ly(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.setRemoteDescription(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(ai["a"])((function(){t.next(null),t.complete()})),Object(Mu["a"])()),Object(P["a"])([f,d]))})))}function _y(e,t,n,r,a){ny(r);var o=n.callId,i=n.peerId,c=n.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Oy(e,Gb.offer,i).pipe(Object(ai["a"])((function(){return s.info("RTC: got invite",o)})),Object($["a"])((function(t){return Object(Yt["a"])(vy(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(Zu["a"])(l),Object($["a"])((function(r){var i=zb(r,2),p=zb(i[0],2),f=p[0],d=p[1],y=i[1].fallbackIceServers;f.call_id!==o&&s.warn('RTC: callId mismatch, continuing: we="'.concat(o,'", them="').concat(f.call_id,'"'));var h=new RTCPeerConnection({iceServers:[].concat(ry(d),ry(y))});return Object(I["a"])(wy(h,e,t,n,a),Object(L["a"])(ly(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.setRemoteDescription(f));case 1:case"end":return e.stop()}}),e)})))).pipe(Object($["a"])(ly(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.createAnswer());case 1:case"end":return e.stop()}}),e)})))),Object($["a"])(function(){var e=ly(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.setLocalDescription(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object($["a"])((function(t){var n={type:t.type,sdp:t.sdp,call_id:o};return bd(c,e,"m.room.message",{msgtype:"m.notice",body:jr(n)},{log:s,latest$:u,config$:l})})),Object(ai["a"])((function(e){s.debug("RTC: sent answer",o,e),t.next(null),t.complete()})),Object(Mu["a"])()),Object(dl["a"])(h,"datachannel").pipe(Object(H["a"])("channel"),Object(ai["a"])((function(e){return Object.assign(e,{connection:h})})),Object(B["a"])((function(e){return[h,e]}))))})),Object(Gu["a"])(1))}var jy="RTC: peer hung up",Ey="RTC: dataChannel closed",Ty="ping",xy=["failed","closed","disconnected"];function Sy(e,t,n){var r=t.callId,a=t.peerId,o=t.peerAddress,i=n.log;return function(t){return t.pipe(Object($["a"])((function(t){var n=zb(t,2),c=n[0],s=n[1];return Object(I["a"])(Object(dl["a"])(c,"connectionstatechange").pipe(Object(vu["a"])(null),Object($["a"])((function(){return xy.includes(c.connectionState)?Object(ri["a"])(new Error("RTC: connection failed")):U["a"]}))),Object(dl["a"])(s,"close").pipe(Object(hi["a"])(Object(ri["a"])(new Error(Ey)))),Object(dl["a"])(s,"error").pipe(Object($["a"])((function(e){return Object(ri["a"])(e.error)}))),Object(dl["a"])(s,"open").pipe(Object(ai["a"])((function(){i.info("RTC: dataChannel open",r),s.send(Ty)})),Object(Mu["a"])()),Object(dl["a"])(s,"message").pipe(Ri(e),Object(ai["a"])((function(e){return i.debug("RTC: dataChannel message",r,e)})),Object(H["a"])("data"),Object(F["a"])((function(e){return"string"===typeof e})),Object($["a"])(b.a.mark((function e(t,n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==n){e.next=3;break}return e.next=3,no(s,{address:o});case 3:if(t!==Ty){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Xr({text:t,message:yd(t,o,{log:i}),ts:Date.now(),userId:a},{address:o});case 7:case"end":return e.stop()}}),e)}))))).pipe(Object(Bu["a"])((function(){s.close()})))})))}}function Ay(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(pi["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available&&Uu(e.payload.caps,Le.WEBRTC)===Uu(t.payload.caps,Le.WEBRTC)})),Object(Zu["a"])(i,c),Object(F["a"])((function(e){var t=zb(e,3),n=t[0],r=t[2].caps;return!!Uu(n.payload.caps,Le.WEBRTC)&&!!Uu(r,Le.WEBRTC)})),Object(yi["a"])((function(t){var n=zb(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(P["a"])(no(void 0,i.meta));var l={log:r,latest$:o,config$:c},p=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=p.startsWith(a.toLowerCase()),d=Yf(u.pollingInterval,2*u.httpTimeout);return Object(L["a"])((function(){var t,n={callId:p,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],b=new C["a"];t=f?ky(s,a,n,u,l):_y(s,a,n,u,l),b.pipe(Object(F["a"])((function(e){return e})),Object($["a"])((function(){var e={type:Gb.hangup,call_id:p};return bd(i.meta.address,s,"m.room.message",{msgtype:"m.notice",body:jr(e)},{log:r,latest$:o,config$:c}).pipe(Object(ci["a"])(Object(ni["a"])(u.httpTimeout/10)))})),Object(ci["a"])(e.pipe(Object(Mu["a"])(),Object(Qb["a"])(null)))).subscribe();var y=d.next(),h=y.value;return h?Object(I["a"])(t,Oy(s,Gb.hangup,n.peerId).pipe(Object(hi["a"])(Object(ri["a"])(new Error(jy))))).pipe(Sy(h,n,l),Object(ci["a"])(b),Object(zt["a"])((function(e){var t;return b.next(![jy,Ey].includes(null===e||void 0===e?void 0:e.message)),b.complete(),r.info("Couldn't set up WebRTC dataChannel, retrying",p,null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:e),U["a"]})),Object(Qb["a"])(no(void 0,{address:i.meta.address}))):U["a"]})).pipe(Object(di["a"])((function(e){return e.pipe(Object(Zu["a"])(o,c),Object($["a"])((function(e){var t,n,r=zb(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(ni["a"])(o/10):Object(P["a"])(null):U["a"]})))})))})))}var Ny=function(e,t,n){return ny(t),e.pipe(Object(F["a"])(Ja.success.is),Object(ii["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return Ay(e,t,n)})))};function Dy(e,t){return Ly(e)||Iy(e,t)||Cy(e,t)||Ry()}function Ry(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cy(e,t){if(e){if("string"===typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Py(e,t):void 0}}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ly(e){if(Array.isArray(e))return e}var Uy=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Wa.is),Object(H["a"])("payload","blockNumber"),Object(Zu["a"])(t,r),Object(Qt["a"])((function(t){var n=Dy(t,3),r=n[0],a=n[1].transfers,o=n[2].confirmationBlocks;return Object(Yt["a"])(Object.values(a).filter((function(e){return e.direction===ja.SENT&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed&&e.expiration<=r-2*o}))).pipe(Object($["a"])((function(t){var n={secrethash:t.transfer.lock.secrethash,direction:ja.SENT};return Object(I["a"])(Xf(e,go.request(void 0,n),$r(go,n)),Object(P["a"])(uo.failure(new vt(ht.XFER_EXPIRED,{block:t.transfer.lock.expiration.toString()}),n)))})))})))};function My(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function By(e,t){return $y(e)||Wy(e,t)||qy(e,t)||Fy()}function Fy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $y(e){if(Array.isArray(e))return e}function Hy(e){return Gy(e)||Ky(e)||qy(e)||Vy()}function Vy(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qy(e,t){if(e){if("string"===typeof e)return Zy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zy(e,t):void 0}}function Ky(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Gy(e){if(Array.isArray(e))return Zy(e)}function Zy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yy(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return gt(n.length===e.locks.length-1,"invalid locks size"),n}function Xy(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),j["Zero"])}function Qy(e,t,n){var r=e.channels[qi(t)];return gt((null===r||void 0===r?void 0:r.state)===aa.open,"channel not open"),n&&(gt(n.chain_id.eq(e.chainId),"chainId mismatch"),gt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function zy(e,t,n,r){var a,o=n.revealTimeout,i=n.confirmationBlocks,c=r.log,s=r.address,u=r.network,l=r.signer,p={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,d=t.payload.paths[0].path[0],y=t.payload.tokenNetwork,h=Qy(e,{tokenNetwork:y,partner:d});gt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o+i,"expiration too soon");var m=St(Ct(32),t.payload.value.add(f),"overflow of locked amount with fee"),v={amount:m,expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},g=us([].concat(Hy(h.own.locks),[v]));c.info("Signing transfer of value",t.payload.value.toString(),"of token",h.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var O={type:Sn.LOCKED_TRANSFER,message_identifier:ds(),chain_id:Object(_["bigNumberify"])(u.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(h.id),nonce:h.own.nextNonce,transferred_amount:h.own.balanceProof.transferredAmount,locked_amount:h.own.balanceProof.lockedAmount.add(v.amount),locksroot:g,payment_identifier:t.payload.paymentId,token:h.token,recipient:d,lock:v,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:s,metadata:p};return Object(Yt["a"])(ya(l,O,{log:c})).pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,lo({message:n,fee:f,partner:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,fo({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Jy(e,t,n){return Object(hu["a"])([e,n.config$]).pipe(Object(W["a"])(),Object($["a"])((function(e){var r=By(e,2),a=r[0],o=r[1];return n.db.storageKeys.has(bs(t.meta))?(n.log.warn("transfer already present",t.meta),U["a"]):zy(a,t,o,n)})),Object(zt["a"])((function(e){return Object(P["a"])(uo.failure(e,t.meta))})))}function eh(e,t,n,r,a){var o,i=a.log,c=a.signer,s=n.meta.secrethash,u=r.transfer,l=u.token_network_address,p=r.partner,f=Qy(t,{tokenNetwork:l,partner:p});if(r.unlock)o=Object(P["a"])(r.unlock);else{gt(r.secret,"unknown secret"),gt(f.own.locks.find((function(e){return e.secrethash===s})),"transfer already unlocked or expired"),gt(r.secretRegistered||r.expiration>t.blockNumber,"lock expired");var d={type:Sn.UNLOCK,message_identifier:ds(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(u.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(u.lock.amount),locksroot:us(Yy(f.own,s)),payment_identifier:u.payment_identifier,secret:r.secret};o=Object(Yt["a"])(ya(c,d,{log:i}))}return o.pipe(Object(Zu["a"])(e),Object(B["a"])((function(e){var t=By(e,2),r=t[0],a=t[1],o=a.transfers[bs(n.meta)],i=Qy(a,{tokenNetwork:l,partner:p});return gt(o.expiration>a.blockNumber||o.secretRegistered||i.own.locks.find((function(e){return e.secrethash===s&&e.registered})),"lock expired"),mo.success({message:r,partner:p},n.meta)})))}function th(e,t,n){var r=n.signer,a=n.log,o=n.db;return Object(L["a"])((function(){return js(e,o,t.meta)})).pipe(Object(Zu["a"])(e),Object($["a"])((function(n){var o=By(n,2),i=o[0],c=o[1];return eh(e,c,t,i,{log:a,signer:r})})),Object(zt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(P["a"])(mo.failure(e,t.meta))})))}function nh(e,t,n,r){var a,o=r.signer,i=r.log,c=t.meta.secrethash,s=n.transfer,u=s.token_network_address,l=n.partner,p=Qy(e,{tokenNetwork:u,partner:l});if(n.expired)a=Object(P["a"])(n.expired);else{gt(s.lock.expiration.lt(e.blockNumber),"lock not yet expired"),gt(p.own.locks.find((function(e){return e.secrethash===c}))&&!n.unlock,"transfer already unlocked or expired");var f=us(Yy(p.own,c)),d={type:Sn.LOCK_EXPIRED,message_identifier:ds(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:p.own.nextNonce,transferred_amount:p.own.balanceProof.transferredAmount,locked_amount:p.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:f,recipient:l,secrethash:c};a=Object(Yt["a"])(ya(o,d,{log:i}))}return a.pipe(Object(B["a"])((function(e){return go.success({message:e,partner:l},t.meta)})))}function rh(e,t,n){var r=n.log,a=n.signer,o=n.db;return Object(L["a"])((function(){return js(e,o,t.meta)})).pipe(Object(Zu["a"])(e),Object($["a"])((function(e){var n=By(e,2),o=n[0],i=n[1];return nh(i,t,o,{signer:a,log:r})})),Object(zt["a"])((function(e){return Object(P["a"])(go.failure(e,t.meta))})))}function ah(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=n.db,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:ja.RECEIVED};return Object(hu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=By(e,2),i=n[0],l=n[1],p=l.revealTimeout,f=l.caps,d=t.payload.message;if(c.storageKeys.has(bs(u))){a.warn("transfer already present",u);var y=d.message_identifier,h=i.transfers[bs(u)];return(null===h||void 0===h?void 0:h.transferProcessed)&&h.partner===t.meta.address&&y.eq(h.transfer.message_identifier)?Object(P["a"])(po({message:$t(h.transferProcessed)},u)):U["a"]}var m=d.token_network_address,v=t.meta.address,g=Qy(i,{tokenNetwork:m,partner:v},d);gt(d.nonce.eq(g.partner.nextNonce),["nonce mismatch",{expected:g.partner.nextNonce.toNumber(),received:d.nonce.toNumber()}]);var O=[].concat(Hy(g.partner.locks),[d.lock]),w=us(O);gt(d.locksroot===w,"locksroot mismatch"),gt(d.transferred_amount.eq(g.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),gt(d.locked_amount.eq(Xy(O)),"lockedAmount mismatch");var k=Gi(g),_=k.partnerCapacity;gt(d.lock.amount.lte(_),"balanceProof total amount bigger than capacity"),gt(d.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",d.lock.amount.toString(),"of token",g.token,", from",d.initiator,", through partner",v);var E=Object(P["a"])(void 0);Uu(f,Le.RECEIVE)&&d.target===r&&d.lock.expiration.sub(p).gt(i.blockNumber)&&(E=Object(L["a"])((function(){var e={type:Sn.SECRET_REQUEST,payment_identifier:d.payment_identifier,secrethash:s,amount:d.lock.amount,expiration:d.lock.expiration,message_identifier:ds()};return ya(o,e,{log:a})})));var T=Object(L["a"])((function(){var e={type:Sn.PROCESSED,message_identifier:d.message_identifier};return ya(o,e,{log:a})}));return Object(hu["a"])([T,E]).pipe(Object($["a"])(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=By(t,2),r=n[0],a=n[1],e.next=3,lo({message:d,fee:j["Zero"],partner:v},u);case 3:return e.next=5,po({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,Ja.request(void 0,{address:d.initiator});case 8:return e.next=10,yo({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return Object(P["a"])(uo.failure(e,u))})))}function oh(e,t,n){var r=n.log,a=n.signer,o=n.db,i=ls(t.payload.message.secret),c={secrethash:i,direction:ja.RECEIVED};return Object(L["a"])((function(){return js(e,o,c)})).pipe(Object(Zu["a"])(e),Object($["a"])((function(e){var n=By(e,2),o=n[0],s=n[1];gt(o,"unknown transfer");var u=t.payload.message,l=t.meta.address;if(gt(l===o.partner,"wrong partner"),gt(!o.expired,"already expired"),o.unlock)return r.warn("transfer already unlocked",t.meta),o.unlockProcessed&&u.message_identifier.eq(o.unlockProcessed.message_identifier)?Object(P["a"])(vo({message:$t(o.unlockProcessed)},c)):U["a"];var p=o.transfer;gt(u.token_network_address===p.token_network_address,"wrong tokenNetwork");var f=u.token_network_address,d=Qy(s,{tokenNetwork:f,partner:l},u);gt(u.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:u.nonce.toNumber()}]);var y=p.lock.amount,h=Yy(d.partner,i);gt(u.locksroot===us(h),"locksroot mismatch"),gt(u.transferred_amount.eq(d.partner.balanceProof.transferredAmount.add(y)),"transferredAmount mismatch"),gt(u.locked_amount.eq(Xy(h)),"lockedAmount mismatch");var m={type:Sn.PROCESSED,message_identifier:u.message_identifier};return Object(Yt["a"])(ya(a,m,{log:r})).pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.secret){e.next=3;break}return e.next=3,fo({secret:u.secret},c);case 3:return e.next=5,mo.success({message:u,partner:l},c);case 5:return e.next=7,vo({message:t},c);case 7:return e.next=9,uo.success({balanceProof:fa(u)},c);case 9:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(P["a"])(mo.failure(e,c))})))}function ih(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=n.db,c=t.payload.message.secrethash,s={secrethash:c,direction:ja.RECEIVED};return Object(L["a"])((function(){return js(e,i,s)})).pipe(Object(Zu["a"])(e,o),Object($["a"])((function(e){var n=By(e,3),o=n[0],i=n[1],u=n[2].confirmationBlocks,l=t.payload.message,p=t.meta.address;if(gt(p===o.partner,"wrong partner"),gt(!o.unlock,"transfer unlocked"),o.expired)return r.warn("transfer already expired",t.meta),o.expiredProcessed&&l.message_identifier.eq(o.expiredProcessed.message_identifier)?Object(P["a"])(Oo({message:$t(o.expiredProcessed)},s)):U["a"];var f=o.transfer;gt(f.lock.expiration.add(u).lte(i.blockNumber),"expiration block not confirmed yet"),gt(!o.secretRegistered,"secret registered onchain"),gt(l.token_network_address===f.token_network_address,"wrong tokenNetwork");var d=l.token_network_address,y=Qy(i,{tokenNetwork:d,partner:p},l);gt(l.nonce.eq(y.partner.nextNonce),["nonce mismatch",{expected:y.partner.nextNonce.toNumber(),received:l.nonce.toNumber()}]);var h=Yy(y.partner,c);gt(l.locksroot===us(h),"locksroot mismatch"),gt(l.locked_amount.eq(Xy(h)),"lockedAmount mismatch"),gt(l.transferred_amount.eq(y.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var m={type:Sn.PROCESSED,message_identifier:l.message_identifier};return Object(Yt["a"])(ya(a,m,{log:r})).pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,go.success({message:l,partner:p},s);case 2:return e.next=4,Oo({message:t},s);case 4:return e.next=6,uo.failure(new vt(ht.XFER_EXPIRED,{block:f.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(P["a"])(go.failure(e,s))})))}function ch(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==ja.SENT?U["a"]:Object(hu["a"])([e,c,s]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n,c,s=By(e,3),u=s[0],l=s[1].revealTimeout,p=s[2].presences,f=Qy(u,t.meta);if(f.own.pendingWithdraws.some(zf(Sn.WITHDRAW_REQUEST,t.meta)))return U["a"];gt(null===(c=null===(n=p[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,ht.CNL_WITHDRAW_PARTNER_OFFLINE),gt(t.meta.expiration>=u.blockNumber+l,ht.CNL_WITHDRAW_EXPIRES_SOON),gt(t.meta.totalWithdraw.gt(f.own.withdraw),ht.CNL_WITHDRAW_AMOUNT_TOO_LOW),gt(t.meta.totalWithdraw.lte(Gi(f).ownTotalWithdrawable),ht.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var d={type:Sn.WITHDRAW_REQUEST,message_identifier:ds(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(f.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:f.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Yt["a"])(ya(o,d,{log:r})).pipe(Object(B["a"])((function(e){return Eo.request({message:e},t.meta)})))})),Object(zt["a"])((function(e){return Object(P["a"])(jo.failure(e,t.meta))})))}function sh(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:ja.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(W["a"])(),Object(B["a"])((function(e){return Qy(e,{tokenNetwork:o,partner:i},a),gt(a.participant===r,"participant mismatch"),Eo.success({message:a},c)})),Object(zt["a"])((function(e){return Object(P["a"])(Eo.failure(e,c))})))}function uh(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==ja.SENT?U["a"]:Object(hu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=By(e,2),i=n[0],c=n[1].confirmationBlocks,s=Qy(i,t.meta);gt(!s.own.pendingWithdraws.some(zf(Sn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(zf(Sn.WITHDRAW_REQUEST,t.meta));gt(u,"no matching WithdrawRequest found, maybe already confirmed"),gt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:Sn.WITHDRAW_EXPIRED,message_identifier:ds(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Yt["a"])(ya(o,l,{log:r})).pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,To.success({message:n},t.meta);case 2:return e.next=4,jo.failure(new vt(ht.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return Object(P["a"])(To.failure(e,t.meta))})))}function lh(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:ja.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(W["a"])(),Object($["a"])((function(e){gt(o.participant===t.meta.address,"participant mismatch");var n,u=Qy(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(zf(Sn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(P["a"])(l);else{gt(o.nonce.eq(u.partner.nextNonce),["nonce mismatch",{expected:u.partner.nextNonce.toNumber(),received:o.nonce.toNumber()}]),gt(o.total_withdraw.lte(Gi(u).partnerTotalWithdrawable),"invalid total_withdraw");var p={type:Sn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Yt["a"])(ya(r,p,{log:a}))}return n.pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Eo.request({message:o},s);case 2:return e.next=4,Eo.success({message:n},s);case 4:return e.next=6,Zr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return Object(P["a"])(Eo.failure(e,s))})))}function ph(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:ja.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(hu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=By(e,2),i=n[0],p=n[1].confirmationBlocks;gt(u===t.meta.address,"participant mismatch");var f,d=Qy(i,{tokenNetwork:s,partner:u},c),y="".concat(Ki(d),"+").concat(c.message_identifier.toString()),h=r.get(y);if(h)f=Object(P["a"])(h);else{gt(c.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:c.nonce.toNumber()}]),gt(i.blockNumber>=l.expiration+p,"expire block not confirmed yet");var m={type:Sn.PROCESSED,message_identifier:c.message_identifier};f=Object(Yt["a"])(ya(a,m,{log:o})).pipe(Object(ai["a"])((function(e){return r.put(y,e)})))}return f.pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,To.success({message:c},l);case 2:return e.next=4,xo(void 0,l);case 4:return e.next=6,Zr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(zt["a"])((function(e){return Object(P["a"])(To.failure(e,l))})))}var fh=function(e,t,n){My(t);var r=new Db(32),a=n.latest$.pipe(Ti("state"));return Object(I["a"])(e.pipe(Object(F["a"])(Mr([uo.request,mo.request,go.request,jo.request,To.request]))),e.pipe(Object(F["a"])(ma([Ht(Xn),Ht(zn),Ht(er),Ht(rr),Ht(or),Ht(cr)])))).pipe(Object(Qu["a"])((function(e){var t;switch(e.type){case uo.request.type:t=Jy(a,e,n);break;case mo.request.type:t=th(a,e,n);break;case go.request.type:t=rh(a,e,n);break;case jo.request.type:t=ch(a,e,n);break;case To.request.type:t=uh(a,e,n);break;case Xr.type:switch(e.payload.message.type){case Sn.LOCKED_TRANSFER:t=ah(a,e,n);break;case Sn.UNLOCK:t=oh(a,e,n);break;case Sn.LOCK_EXPIRED:t=ih(a,e,n);break;case Sn.WITHDRAW_REQUEST:t=lh(a,e,n);break;case Sn.WITHDRAW_CONFIRMATION:t=sh(a,e,n);break;case Sn.WITHDRAW_EXPIRED:t=ph(a,e,n,r);break}break}return t})))},dh=n("c8ea");function bh(e,t){return gh(e)||vh(e,t)||hh(e,t)||yh()}function yh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hh(e,t){if(e){if("string"===typeof e)return mh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mh(e,t):void 0}}function mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gh(e){if(Array.isArray(e))return e}function Oh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var wh=function(e,t){return Oh(e),t.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.transfers;return Object(Yt["a"])(Object.values(t).filter((function(e){return e.direction===ja.SENT&&!e.unlockProcessed&&!e.expiredProcessed&&!e.secretRegistered&&!e.channelClosed})))})),Object($["a"])(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={secrethash:t.transfer.lock.secrethash,direction:ja.SENT},e.next=3,Ja.request(void 0,{address:t.transfer.target});case 3:if(t.transferProcessed){e.next=6;break}return e.next=6,lo({message:$t(t.transfer),fee:t.fee,partner:t.partner},n);case 6:if(!t.unlock){e.next=9;break}return e.next=9,mo.success({message:$t(t.unlock),partner:t.partner},n);case 9:if(!t.expired){e.next=12;break}return e.next=12,go.success({message:$t(t.expired),partner:t.partner},n);case 12:case"end":return e.stop()}}),e)}))))},kh=function(e,t,n){Oh(e);var r=n.config$;return t.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.transfers;return Object(Yt["a"])(Object.values(t).filter((function(e){return e.direction===ja.RECEIVED&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed})))})),Object($["a"])((function(e){var t=e.transfer.lock.secrethash,n={secrethash:t,direction:ja.RECEIVED};return Object(I["a"])(Object(P["a"])(lo({message:$t(e.transfer),fee:e.fee,partner:e.partner},n)),e.secret&&!e.secretReveal?Object(P["a"])(fo({secret:e.secret},n)):U["a"],e.secretReveal?Object(P["a"])(ho({message:$t(e.secretReveal)},n)):U["a"],!e.secret&&e.secretRequest?r.pipe(Object(H["a"])("caps"),Object(F["a"])((function(e){return!!Uu(e,Le.RECEIVE)})),Object(Gu["a"])(1),Object(hi["a"])(Object(P["a"])(Ja.request(void 0,{address:e.transfer.initiator}),yo({message:$t(e.secretRequest)},n)))):U["a"])})))};function _h(e){var t,n;return"meta"in e&&(null===(t=e.meta)||void 0===t?void 0:t.secrethash)&&(null===(n=e.meta)||void 0===n?void 0:n.direction)}var jh=function(e,t,n){var r=n.config$;return t.pipe(Ti("transfers"),xi(),Object(ii["a"])((function(e){var t=bh(e,1),n=t[0];return n}),dh["a"],(function(e){return t.pipe(Object(F["a"])((function(t){var n=t.transfers;return!(e.key in n)})))})),Object(Zu["a"])(r),Object($["a"])((function(n){var r=bh(n,2),a=r[0],o=r[1].httpTimeout;return a.pipe(Object(F["a"])((function(e){var t=bh(e,2),n=t[1];return!!(n.unlockProcessed||n.expiredProcessed||n.channelSettled)})),Object(Gu["a"])(1),Object($["a"])((function(t){var n=bh(t,2),r=n[1];return e.pipe(Object(F["a"])(_h),Object(F["a"])((function(e){return bs(e.meta)===a.key})),Object(vu["a"])({meta:zc()(["secrethash","direction"],r)}))})),Object(Xt["a"])(3*o),Object(B["a"])((function(e){var t=e.meta;return wo(void 0,t)})),Object(ci["a"])(t.pipe(Object(F["a"])((function(e){var t=e.transfers;return!(a.key in t)})))))})))};function Eh(e,t){return Nh(e)||Ah(e,t)||xh(e,t)||Th()}function Th(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xh(e,t){if(e){if("string"===typeof e)return Sh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sh(e,t):void 0}}function Sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ah(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Nh(e){if(Array.isArray(e))return e}function Dh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Rh(e,t,n){var r=n.caps,a=Uu(r,Le.MEDIATE),o=e.meta.direction===ja.RECEIVED&&e.payload.message.target!==t;return!!a&&o}var Ch=function(e,t,n){Dh(t);var r=n.address,a=n.config$;return e.pipe(Object(F["a"])(lo.is),Object(Zu["a"])(a),Object(F["a"])((function(e){var t=Eh(e,2),n=t[0],a=t[1];return Rh(n,r,a)})),Object(B["a"])((function(e){var t=Eh(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return uo.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:j["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:ja.SENT})})))};function Ph(e,t){return Bh(e)||Mh(e,t)||Lh(e,t)||Ih()}function Ih(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lh(e,t){if(e){if("string"===typeof e)return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uh(e,t):void 0}}function Uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Bh(e){if(Array.isArray(e))return e}var Fh=function(e,t){return e.pipe(Object(F["a"])(ma(Ht(Mn))),Object(Zu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ph(t,2),r=n[0],a=n[1].transfers,u=0,l=Object.values(a);case 2:if(!(u<l.length)){e.next=25;break}if(p=l[u],p.direction===ja.SENT&&p.partner===r.meta.address){e.next=6;break}return e.abrupt("continue",22);case 6:if(f={secrethash:p.secrethash,direction:ja.SENT},!r.payload.message.message_identifier.eq(p.transfer.message_identifier)){e.next=12;break}return e.next=10,po({message:r.payload.message},f);case 10:e.next=22;break;case 12:if(!r.payload.message.message_identifier.eq(null!==(i=null===(o=p.unlock)||void 0===o?void 0:o.message_identifier)&&void 0!==i?i:-1)){e.next=19;break}return e.next=15,uo.success({balanceProof:fa(p.unlock)},f);case 15:return e.next=17,vo({message:r.payload.message},f);case 17:e.next=22;break;case 19:if(!r.payload.message.message_identifier.eq(null!==(s=null===(c=p.expired)||void 0===c?void 0:c.message_identifier)&&void 0!==s?s:-1)){e.next=22;break}return e.next=22,Oo({message:r.payload.message},f);case 22:u++,e.next=2;break;case 25:case"end":return e.stop()}}),e)}))))},Wh=function(e,t,n){var r=n.db;return e.pipe(Object(F["a"])(Mr([po,vo,Oo])),Object(F["a"])((function(e){return e.meta.direction===ja.RECEIVED})),Object(Zu["a"])(t),Object($["a"])((function(e){var t=Ph(e,2),n=t[0],a=t[1];return js(a,r,n.meta).then((function(e){return[n,e]}))})),Object(B["a"])((function(e){var t=Ph(e,2),n=t[0],r=t[1];return Zr.request({message:n.payload.message},{address:r.partner,msgId:n.payload.message.message_identifier.toString()})})))};function $h(e,t){return Gh(e)||Kh(e,t)||Vh(e,t)||Hh()}function Hh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vh(e,t){if(e){if("string"===typeof e)return qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qh(e,t):void 0}}function qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gh(e){if(Array.isArray(e))return e}var Zh=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Mr([lo,mo.success,go.success,yo,ho])),Object(Zu["a"])(t,r),Object($["a"])((function(n){var r,a,o=$h(n,3),i=o[0],c=o[1],s=o[2],u=s.pollingInterval,l=s.httpTimeout,p=s.revealTimeout,f=c.transfers[bs(i.meta)],d=t.pipe(Ti("transfers",bs(i.meta)));switch(i.type){case lo.type:i.meta.direction===ja.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.expiredProcessed||e.channelClosed)}))));break;case mo.success.type:i.meta.direction===ja.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)}))));break;case go.success.type:i.meta.direction===ja.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.expiredProcessed&&!e.channelClosed)}))));break;case yo.type:i.meta.direction===ja.RECEIVED&&f&&(r=f.transfer.initiator,a=Object(hu["a"])([t,d]).pipe(Object(F["a"])((function(e){var t=$h(e,2),n=t[0].blockNumber,r=t[1];return!(!r.secretReveal&&!r.channelClosed)||n>r.expiration-p}))));break;case ho.type:i.meta.direction===ja.RECEIVED&&f&&(r=f.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.unlock&&!e.channelClosed)}))));break}return r&&a?Qf(Zr.request({message:i.payload.message},{address:r,msgId:i.payload.message.message_identifier.toString()}),e,a,Yf(u,2*l)):U["a"]})))};function Yh(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Jh(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Xh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Qh(e,t){return nm(e)||tm(e,t)||Jh(e,t)||zh()}function zh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jh(e,t){if(e){if("string"===typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?em(e,t):void 0}}function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nm(e){if(Array.isArray(e))return e}var rm=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(F["a"])(ma(Ht(Fn))),Object(Zu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Qh(t,2),o=n[0],i=n[1],c=o.payload.message,s=bs({secrethash:c.secrethash,direction:ja.SENT}),s in i.transfers){e.next=5;break}return e.abrupt("return");case 5:if(u=i.transfers[s].transfer,u.initiator===r&&u.target===o.meta.address&&u.payment_identifier.eq(c.payment_identifier)){e.next=9;break}return a.warn("Invalid SecretRequest for transfer",c,u),e.abrupt("return");case 9:return e.next=11,yo({message:c},{secrethash:c.secrethash,direction:ja.SENT});case 11:case"end":return e.stop()}}),e)}))))},am=function(e,t){var n=t.signer,r=t.log,a=t.latest$,o=e.payload.message;return a.pipe(Object(W["a"])(),Object($["a"])((function(t){var a=t.state,i=a.transfers[bs(e.meta)];gt(i.secret,"SecretRequest for unknown secret");var c,s=i.transfer,u=s.target,l=i.fee,p=s.lock.amount.sub(l);if(gt(o.expiration.lte(s.lock.expiration)&&o.expiration.gt(a.blockNumber),"SecretRequest for expired transfer"),gt(o.amount.gte(p),"SecretRequest for amount too small!"),o.amount.eq(p)||r.info("Accepted SecretRequest for amount different than sent",o,s),i.secretReveal)c=Object(P["a"])(i.secretReveal);else{var f={type:Sn.SECRET_REVEAL,message_identifier:ds(),secret:i.secret};c=Object(Yt["a"])(ya(n,f,{log:r}))}return c.pipe(Object($["a"])(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ho({message:n},e.meta);case 2:return t.next=4,Zr.request({message:n},{address:u,msgId:n.message_identifier.toString()});case 4:case"end":return t.stop()}}),t)}))))})),Object(zt["a"])((function(t){return r.error("Invalid SecretRequest",t),Object(P["a"])(uo.failure(new vt(ht.XFER_INVALID_SECRETREQUEST),e.meta))})))},om=function(e,t,n){return Xh(t),e.pipe(Object(F["a"])(Mr(yo)),Object(F["a"])((function(e){return e.meta.direction===ja.SENT})),Object(Qu["a"])((function(e){return am(e,n)})))},im=function(e,t){return e.pipe(Object(F["a"])(ma($n)),Object(Zu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Qh(t,2),r=n[0],a=n[1],o=ls(r.payload.message.secret),i=Object.values(ja).map((function(e){return a.transfers[bs({secrethash:o,direction:e})]})).filter(At),c=r.payload.message,s=Yh(i.filter((function(e){return e.direction===ja.SENT}))),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=17;break}return l=u.value,p={secrethash:o,direction:ja.SENT},e.next=12,fo({secret:c.secret},p);case 12:if(r.meta.address!==l.partner||l.channelClosed){e.next=15;break}return e.next=15,mo.request(void 0,p);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:f=Yh(i.filter((function(e){return e.direction===ja.RECEIVED}))),e.prev=26,f.s();case 28:if((d=f.n()).done){e.next=34;break}return d.value,e.next=32,fo({secret:c.secret},{secrethash:o,direction:ja.RECEIVED});case 32:e.next=28;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e["catch"](26),f.e(e.t1);case 39:return e.prev=39,f.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[5,19,22,25],[26,36,39,42]])}))))},cm=function(e,t,n){Xh(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(F["a"])(Mr([fo,bo.success])),Object(F["a"])((function(e){return e.meta.direction===ja.RECEIVED})),Object(F["a"])((function(e){return fo.is(e)||!!e.payload.confirmed})),Object(Qu["a"])((function(e){return o.pipe(Ti("state"),Object(W["a"])(),Object(F["a"])((function(t){var n=t.transfers;return bs(e.meta)in n})),Object($["a"])((function(t){var n,o=t.transfers,i=null===(n=o[bs(e.meta)])||void 0===n?void 0:n.secretReveal;if(i)return Object(P["a"])($t(i));var c={type:Sn.SECRET_REVEAL,message_identifier:ds(),secret:e.payload.secret};return ya(a,c,{log:r})})),Object(B["a"])((function(t){return ho({message:t},e.meta)})),Object(zt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},sm=function(e,t,n){Xh(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(Ti("confirmationBlocks"),Object(yi["a"])((function(e){return pn(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(B["a"])(fn(a)),Object(F["a"])(At),Object(Zu["a"])(t,o),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Qh(t,3),r=Qh(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.transfers,u=c.blockNumber,l=n[2].confirmationBlocks,p=0,f=Object.values(ja);case 2:if(!(p<f.length)){e.next=12;break}if(d=f[p],y=bs({secrethash:a,direction:d}),y in s){e.next=7;break}return e.abrupt("continue",9);case 7:return e.next=9,bo.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+l<=u?i.blockNumber<s[y].expiration:void 0},{secrethash:a,direction:d});case 9:p++,e.next=2;break;case 12:case"end":return e.stop()}}),e)}))))},um=function(e){return e.pipe(Object(F["a"])(bo.success.is),Object(F["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return uo.success({},e.meta)})))},lm=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Object(Zu["a"])(r),Object($["a"])((function(e){var t=Qh(e,2),n=t[0],r=n.blockNumber,a=n.transfers,o=t[1].revealTimeout;return Object(Yt["a"])(Object.values(a).filter((function(e){return e.direction===ja.RECEIVED&&!e.unlock&&!e.expired&&!!e.secret&&!e.secretRegistered&&e.expiration>r&&e.expiration<=r+o})))})),Object(ii["a"])((function(e){return e._id}),dh["a"],(function(e){return a.pipe(Object(H["a"])("state"),Object(F["a"])((function(t){var n=t.blockNumber,r=t.transfers;return!!(r[e.key].expiration<n||r[e.key].unlock||r[e.key].secretRegistered)})))})),Object($["a"])((function(t){return t.pipe(Object(Qt["a"])((function(t){var n={secrethash:t.secrethash,direction:ja.RECEIVED};return Xf(e,bo.request({secret:t.secret},n),Hr(bo,n))})),Object(ci["a"])(t.pipe(Object(Mu["a"])(),Object(Qb["a"])(1))))})),Di(r.pipe(Object(H["a"])("caps"),Object(B["a"])((function(e){return Uu(e,Le.RECEIVE)})))))},pm=function(e,t,n){Xh(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(F["a"])(bo.request.is),Object(Zu["a"])(u),Object($["a"])((function(e){var t,n=Qh(e,2),u=n[0],l=n[1].subkey,p=Kp({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),f=p.signer,d=Gp(s,f);return Object(L["a"])((function(){return d.functions.registerSecret(u.payload.secret)})).pipe(Zi("registerSecret",ht.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}),Object(Mu["a"])(),Object(zt["a"])((function(e){return Object(P["a"])(bo.failure(e,u.meta))})))})))};function fm(e,t){return ym(e)||bm(e,t)||mm(e,t)||dm()}function dm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ym(e){if(Array.isArray(e))return e}function hm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=mm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function mm(e,t){if(e){if("string"===typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vm(e,t):void 0}}function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Om=function(e,t){return gm(e),t.pipe(Object(W["a"])(),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===aa.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=hm(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==Sn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(zf(Sn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,Eo.request({message:c},{direction:ja.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==Sn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,To.success({message:c},{direction:ja.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},wm=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Eo.request.is),Object(F["a"])((function(e){return e.meta.direction===ja.SENT})),Object(Zu["a"])(r),Object($["a"])((function(n){var r=fm(n,2),a=r[0],o=r[1],i=o.pollingInterval,c=o.httpTimeout,s=a.payload.message,u=Zr.request({message:s},{address:a.meta.partner,msgId:s.message_identifier.toString()}),l=t.pipe(Object(F["a"])((function(e){var t=e.channels[qi(a.meta)];return(null===t||void 0===t?void 0:t.state)!==aa.open||t.own.pendingWithdraws.some(zf(Sn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(zf(Sn.WITHDRAW_REQUEST,a.meta))})));return Qf(u,e,l,Yf(i,2*c))})))},km=function(e,t,n){gm(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(F["a"])(Eo.success.is),Object(F["a"])((function(e){return e.meta.direction===ja.SENT})),Object(Qu["a"])((function(e){return u.pipe(Object(W["a"])(),Object($["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,p=u.revealTimeout;gt(e.meta.expiration>=n.blockNumber+p,ht.CNL_WITHDRAW_EXPIRES_SOON);var f=n.channels[qi(e.meta)];gt((null===f||void 0===f?void 0:f.state)===aa.open,"channel not open"),gt(e.meta.totalWithdraw.gt(f.own.withdraw),"withdraw already performed");var d=f.own.pendingWithdraws.find(zf(Sn.WITHDRAW_REQUEST,e.payload.message));gt(d,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=Kp({signer:a,address:r,main:o},l),h=y.signer,m=Gp(s(b),h);return Object(L["a"])((function(){return m.functions.setTotalWithdraw(f.id,r,e.meta.totalWithdraw,e.meta.expiration,d.signature,e.payload.message.signature)})).pipe(Zi("setTotalWithdraw",ht.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),Qi(i.pollingInterval,void 0,void 0,{log:c}))})),Object(B["a"])((function(t){var n=fm(t,2),r=n[1];return jo.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(zt["a"])((function(t){return Object(P["a"])(jo.failure(t,e.meta))})))})))},_m=function(e,t,n){gm(t);var r=n.signer,a=n.log,o=n.latest$,i=new Db(32);return e.pipe(Object(F["a"])(Mr([Eo.request,Eo.success])),Object(F["a"])((function(e){return e.meta.direction===ja.RECEIVED!==Eo.success.is(e)})),Object(Qu["a"])((function(e){return o.pipe(Object(W["a"])(),Object(F["a"])((function(t){var n=t.presences;return e.meta.partner in n&&!!Uu(n[e.meta.partner].payload.caps,Le.DELIVERY)})),Object($["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(P["a"])(c);else{var s={type:Sn.PROCESSED,message_identifier:n.message_identifier};t=Object(Yt["a"])(ya(r,s,{log:a})).pipe(Object(ai["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(B["a"])((function(t){return Zr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(zt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),U["a"]})))})))},jm=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Wa.is),Object(H["a"])("payload","blockNumber"),Object(Zu["a"])(t,r),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=fm(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===aa.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(zf(Sn.WITHDRAW_REQUEST)),l=hm(u),e.prev=8,l.s();case 10:if((p=l.n()).done){e.next=20;break}if(f=p.value,!f.expiration.add(2*o).gte(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(zf(Sn.WITHDRAW_EXPIRED,f))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,To.request(void 0,{direction:ja.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:f.expiration.toNumber(),totalWithdraw:f.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},Em=function(e,t,n){gm(t);var r=n.config$;return e.pipe(Object(F["a"])(To.success.is),Object(F["a"])((function(e){return e.meta.direction===ja.SENT})),Object(Zu["a"])(r),Object($["a"])((function(t){var n=fm(t,2),r=n[0],a=n[1],o=a.pollingInterval,i=a.httpTimeout,c=r.payload.message,s=Zr.request({message:c},{address:r.meta.partner,msgId:c.message_identifier.toString()}),u=e.pipe(Object(F["a"])(ma(Ht(Mn))),Object(F["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(c.message_identifier)})),Object(si["a"])(xo(void 0,r.meta)),Object(Gu["a"])(1),Object(_u["a"])());return Object(I["a"])(Qf(s,e,u,Yf(o,2*i)),u)})))},Tm=n("754b"),xm=n("e30d");function Sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sm(Object(n),!0).forEach((function(t){Nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dm(e,t){return Lm(e)||Im(e,t)||Cm(e,t)||Rm()}function Rm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cm(e,t){if(e){if("string"===typeof e)return Pm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pm(e,t):void 0}}function Pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Im(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Lm(e){if(Array.isArray(e))return e}function Um(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Mm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Um(o,r,a,i,c,"next",e)}function c(e){Um(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Bm(e,t,n,r,a,o){if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&!Uu(t[r].payload.caps,Le.MEDIATE))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var i=e.channels[qi({tokenNetwork:n,partner:r})];if(!i)return"path: there's no direct channel with partner \"".concat(r,'"');if(i.state!==aa.open)return'path: channel with "'.concat(r,'" in state "').concat(i.state,'" instead of "').concat(aa.open,'"');var c=Gi(i),s=c.ownCapacity;return!s.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(s.toString())}var Fm=D()(function(){var e=Mm(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functions.token());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Wm(e,t){var n=t.serviceRegistryContract,r=t.network,a=t.contractsInfo,o=t.config$,i=Fe["v"]({message:Fe["s"],network_info:Fe["v"]({chain_id:Fe["l"](r.chainId),token_network_registry_address:Fe["l"](a.TokenNetworkRegistry.address)}),operator:Fe["s"],payment_address:Bt,price_info:Ct(32),version:Fe["s"]}),c=Bt.is(e)?Object(Yt["a"])(n.functions.urls(e)):Object(P["a"])(e);return c.pipe(Object(Zu["a"])(o),Object($["a"])((function(e){var t=Dm(e,2),r=t[0],a=t[1],o=a.httpTimeout,c=a.pfsMaxFee;if(!r)throw new vt(ht.PFS_EMPTY_URL);if(!zp(r))throw new vt(ht.PFS_INVALID_URL,{url:r});r.startsWith("https://")||r.startsWith("http://")||(r="https://".concat(r));var s=Date.now();return Object(Vf["a"])(r+"/api/v1/info").pipe(Object($f["a"])(o),Object($["a"])(function(){var e=Mm(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=St,e.t1=i,e.t2=_r,e.next=5,t.text();case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,e.t0)(e.t1,e.t4),e.next=10,Fm(n);case 10:return e.t6=e.sent,e.abrupt("return",[e.t5,e.t6]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(B["a"])((function(e){var t=Dm(e,2),n=t[0],a=t[1];return gt(n.price_info.lte(c),[ht.PFS_TOO_EXPENSIVE,{price:n.price_info.toString()}]),{address:n.payment_address,url:r,rtt:Date.now()-s,price:n.price_info,token:a}})))})))}function $m(e,t){var n=t.log;return Object(Yt["a"])(e).pipe(Object($["a"])((function(e){return Wm(e,t).pipe(Object(zt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(Wf["a"])(),Object(B["a"])((function(e){if(!e.length)throw new vt(ht.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function Hm(e){return Object(_["concat"])([wr(e.one_to_n_address,20),wr(e.chain_id,32),wr(ra.IOU,32),wr(e.sender,20),wr(e.receiver,20),wr(e.amount,32),wr(e.expiration_block,32)])}function Vm(e,t){return qm.apply(this,arguments)}function qm(){return qm=Mm(b.a.mark((function e(t,n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.signMessage(Hm(n)).then((function(e){return Am(Am({},n),{},{signature:e})})));case 1:case"end":return e.stop()}}),e)}))),qm.apply(this,arguments)}function Km(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ov(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Gm(e){return Xm(e)||Ym(e)||ov(e)||Zm()}function Zm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ym(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xm(e){if(Array.isArray(e))return iv(e)}function Qm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zm(Object(n),!0).forEach((function(t){ev(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tv(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function nv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){tv(o,r,a,i,c,"next",e)}function c(e){tv(o,r,a,i,c,"throw",e)}i(void 0)}))}}function rv(e,t){return sv(e)||cv(e,t)||ov(e,t)||av()}function av(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ov(e,t){if(e){if("string"===typeof e)return iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iv(e,t):void 0}}function iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sv(e){if(Array.isArray(e))return e}var uv=Fe["p"](Fe["v"]({error_code:Fe["n"],errors:Fe["s"]}));function lv(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function pv(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.contractsInfo,c=n.latest$,s=n.config$;return Object(L["a"])((function(){var t=lv(),n=Object(_["concat"])([r,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Yt["a"])(a.signMessage(n)).pipe(Object(B["a"])((function(n){return{sender:r,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Zu["a"])(s),Object($["a"])((function(n){var r=rv(n,2),a=r[0],o=r[1].httpTimeout;return Object(Vf["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object($f["a"])(o))})),Object(Zu["a"])(c.pipe(Object(H["a"])("state","blockNumber")),s),Object($["a"])(function(){var t=nv(b.a.mark((function t(n){var a,c,s,u,l,p,f,d;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=rv(n,3),c=a[0],s=a[1],u=a[2].pfsIouTimeout,404!==c.status){t.next=3;break}return t.abrupt("return",{sender:r,receiver:e.address,chain_id:Object(_["bigNumberify"])(o.chainId),amount:j["Zero"],one_to_n_address:i.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(u)});case 3:return t.next=5,c.text();case 5:if(l=t.sent,c.ok){t.next=8;break}throw new vt(ht.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:c.status,responseText:l});case 8:if(p=St(co,_r(l)),f=p.last_iou,d=Object(_["verifyMessage"])(Hm(f),f.signature),d===r){t.next=12;break}throw new vt(ht.PFS_IOU_SIGNATURE_MISMATCH,{signer:d,address:r});case 12:return t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}function fv(e,t,n){return n.latest$.pipe(Object(W["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(P["a"])(i):pv(e,t,n)})),Object(B["a"])((function(t){return Jm(Jm({},t),{},{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return Vm(n.signer,e)})))}var dv=function(e,t,n){return Qm(t),e.pipe(Object(F["a"])(Mr(No.request)),Object(Qu["a"])((function(t){return n.latest$.pipe(Object(W["a"])(),Object($["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=U["a"],o=Object(P["a"])(r)):(a=Object(P["a"])(Ja.request(void 0,{address:i})),o=Tv(e,n,i)),Object(I["a"])(o.pipe(Object($["a"])((function(e){return xv(t,n,e)})),Object(Zu["a"])(n.latest$),Object($["a"])((function(e){var r=rv(e,2),a=r[0],o=r[1];return Sv(t,n,a,o)})),Object(zt["a"])((function(e){return Object(P["a"])(No.failure(e,t.meta))}))),a)})))})))},bv=function(e,t,n){Qm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(zi,Object($["a"])((function(e){return e.pipe(Object(Tm["a"])(),Object(Zu["a"])(c),Object(F["a"])((function(e){var t=rv(e,2),n=rv(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===aa.open&&!!a})),Object(xm["a"])((function(e){var t=rv(e,2),n=rv(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(ni["a"])(o):Object(P["a"])(1)})),Object(yi["a"])((function(e){var t=rv(e,2),n=rv(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,p=c.tokenNetwork,f=c.partner.address,d=Gi(c),b=d.ownCapacity,y=d.partnerCapacity,h={type:Sn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:p,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(L["a"])((function(){return ya(i,h,{log:r})})).pipe(Object(B["a"])((function(e){return Yr({message:e},{roomName:l})})),Object(zt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},yv=function(e,t,n){Qm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(zi,Object($["a"])((function(e){return e.pipe(Object(W["a"])())})),Object(Zu["a"])(c),Object(F["a"])((function(e){var t=rv(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===aa.open&&!!a&&!!Uu(o,Le.MEDIATE)})),Object($["a"])((function(e){var t=rv(e,2),n=t[0],c=t[1].pfsRoom,s={type:Sn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:lv(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:j["Zero"],flat:j["Zero"]}};return Object(Yt["a"])(ya(i,s,{log:r})).pipe(Object(B["a"])((function(e){return Yr({message:e},{roomName:c})})),Object(zt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},hv=function(e,t,n){Qm(e),Qm(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(hu["a"])([i.pipe(Ti("pfs")),i.pipe(Ti("confirmationBlocks"))]).pipe(Object(yi["a"])((function(e){var t=rv(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?U["a"]:pn(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Zu["a"])(c),Object(F["a"])((function(e){var t=rv(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object(H["a"])(0),Object(B["a"])(fn(a)),Object(F["a"])(At)).pipe(Object(ii["a"])((function(e){var t=rv(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(yi["a"])((function(e){var t=rv(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(j["Two"].pow(31))?Object(P["a"])({service:n,valid:!1}).pipe(Object(cb["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(P["a"])({service:n,valid:!0}),i)})))})),Object(fi["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(Gm(e),[n]):e}),[]),Object(pi["a"])(),Object(Xt["a"])(1e3),Object(B["a"])((function(e){return Do({pfsList:e})})))})))},mv=function(e,t,n){Qm(e),Qm(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(Ti("state","blockNumber"),Object(Qt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(Zu["a"])(a),Object(F["a"])((function(e){var t=rv(e,2),n=t[0],r=t[1].udcBalance;return!r.eq(n)})),Object(B["a"])((function(e){var t=rv(e,1),n=t[0];return Po.success(void 0,{totalDeposit:n})})))};function vv(e,t,n,r,a){var o=rv(e,2),i=o[0],c=o[1],s=rv(t,2),u=s[0],l=s[1],p=rv(n,2),f=p[0],d=p[1],b=r.pollingInterval,y=r.minimumAllowance,h=a.log;return Object(L["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address),c.functions.effectiveBalance(l)])})).pipe(Object($["a"])((function(e){var t=rv(e,3),n=t[0],r=t[1],a=t[2];return gt(a.add(f).eq(d),[ht.UDC_DEPOSIT_OUTDATED,{requested:d.toString(),current:a.toString()}]),Ji([n,r,f],i,c.address,ht.RDN_APPROVE_TRANSACTION_FAILED,{log:h,minimumAllowance:y})})),Object($["a"])((function(){return c.functions.deposit(l,d)})),Zi("deposit",ht.RDN_DEPOSIT_TRANSACTION_FAILED,{log:h}),Qi(b,void 0,void 0,{log:h}))}var gv=function(e,t,n){Qm(t);var r=n.userDepositContract,a=n.getTokenContract,o=n.address,i=n.log,c=n.signer,s=n.main,u=n.config$,l=r.functions.token();return e.pipe(Object(F["a"])(Po.request.is),Object(Qu["a"])((function(e){return Object(L["a"])((function(){return l})).pipe(Object(Zu["a"])(u),Object($["a"])((function(t){var n,u=rv(t,2),l=u[0],p=u[1],f=Kp({signer:c,address:o,main:s},null!==(n=e.payload.subkey)&&void 0!==n?n:p.subkey),d=f.signer,b=f.address,y=Gp(a(l),d),h=Gp(r,d);return vv([y,h],[b,o],[e.payload.deposit,e.meta.totalDeposit],p,{log:i})})),Object(B["a"])((function(t){var n=rv(t,2),r=n[1];return Po.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(zt["a"])((function(t){return Object(P["a"])(Po.failure(t,e.meta))})))})))};function Ov(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=rv(e,2),u=s[1],l=Gi(u),p=l.partnerUnlocked;return p.isZero()?U["a"]:Object(hu["a"])([i,c]).pipe(Object(F["a"])((function(e){var t,n,r=rv(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,j["Zero"]))&&a.gte(c)&&p.mul(null!==(n=s[u.token])&&void 0!==n?n:j["MaxUint256"]).div(j["WeiPerEther"]).gt(c)})),Object(Gu["a"])(1),Object($["a"])((function(e){var i=rv(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,p=u.partner.balanceProof,f=ca(p),d=Object(_["concat"])([wr(u.tokenNetwork,20),wr(r.chainId,32),wr(ra.BALANCE_PROOF_UPDATE,32),wr(u.id,32),wr(f,32),wr(p.nonce,32),wr(p.additionalHash,32),wr(p.signature,65)]);return Object(Yt["a"])(a.signMessage(d)).pipe(Object($["a"])((function(e){return ya(a,{type:Sn.MONITOR_REQUEST,balance_proof:{chain_id:p.chainId,token_network_address:p.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:p.nonce,balance_hash:f,additional_hash:p.additionalHash,signature:p.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(B["a"])((function(e){return Yr({message:e},{roomName:l})})))})),Object(zt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]})))}}var wv=function(e,t,n){return Qm(e),Qm(t),n.latest$.pipe(Object(H["a"])("state"),zi,Object(Zu["a"])(n.config$),Object($["a"])((function(e){var t=rv(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(pi["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(Tm["a"])(),Object(xm["a"])((function(e){var t=rv(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(ni["a"])(a):Object(P["a"])(1)})),Object(yi["a"])(Ov(n)))})))},kv=function(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(F["a"])(Lo.request.is),Object($["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(Qu["a"])((function(e){var n=rv(e,2),s=n[0],u=n[1],l=Gp(r,i),p=s.meta.amount;return Object(L["a"])((function(){return gt(p.gt(j["Zero"]),[ht.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:p.toString()}]),gt(u.sub(p).gte(j["Zero"]),[ht.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:p.toString()}]),l.functions.planWithdraw(p)})).pipe(Zi("planWithdraw",ht.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Qi(c.pollingInterval,void 0,void 0,{log:o}),Object($["a"])((function(e){var n=rv(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(Ti("blockNumber"),Object(Qt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(W["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Lo.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object(zt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(P["a"])(Lo.failure(e,s.meta))})))})))},_v=function(e,t,n){Qm(e),Qm(t);var r=n.userDepositContract,a=n.address;return Object(L["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(F["a"])((function(e){return e.withdraw_block.gt(j["Zero"])})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Lo.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},jv=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(F["a"])(Lo.success.is),Object(F["a"])((function(e){return!0===e.payload.confirmed})),Object($["a"])((function(e){return t.pipe(Object(H["a"])("blockNumber"),Object(W["a"])((function(t){return e.payload.block<t})),Object(si["a"])(e))})),Object($["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(Qu["a"])((function(e){var n=rv(e,2),s=n[0],u=n[1],l=Gp(a,i);return Object(L["a"])((function(){return gt(u.gt(j["Zero"]),[ht.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(Zi("withdraw",ht.UDC_WITHDRAW_FAILED,{log:r}),Qi(c.pollingInterval,void 0,void 0,{log:r}),Object(Qu["a"])((function(e){var n=rv(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(Ti("blockNumber"),Object(Qt["a"])((function(){return l.functions.balances(o)})),Object(W["a"])((function(e){return e.lt(u)})),Object(B["a"])((function(e){return Uo({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object(zt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(P["a"])(Lo.failure(e,s.meta))})))})))},Ev=function(e,t,n){Qm(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(Ti("confirmationBlocks"),Object(yi["a"])((function(e){return pn(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(B["a"])(fn(a)),Object(F["a"])(At),Object(F["a"])((function(e){var t=rv(e,6),n=t[5];return n===o})),Object(Zu["a"])(t,i),Object(B["a"])((function(e){var t=rv(e,3),n=rv(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,p=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),f=s.blockNumber;if(p&&f)return Mo({tokenNetwork:r,partner:p.partner.address,id:p.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:f,confirmed:f+l<=u.blockNumber||void 0})})),Object(F["a"])(At))};function Tv(e,t,n){return e.pipe(Object(F["a"])($r(Ja,{address:n})),Object(Gu["a"])(1),Object($["a"])((function(e){if(Ja.success.is(e))return t.latest$.pipe(Object(W["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function xv(e,t,n){var r=n.state,a=n.presences,o=n.config;Av(e,r,a);var i=e.meta,c=i.tokenNetwork,s=i.target,u=i.value;if(e.payload.paths)return Object(P["a"])({paths:e.payload.paths,iou:void 0});if(!0===Bm(r,a,c,s,s,u))return Object(P["a"])({paths:[{path:[t.address,e.meta.target],fee:j["Zero"]}],iou:void 0});if(Nv(e,o))throw new vt(ht.PFS_DISABLED);return Dv(e,t)}function Sv(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Yt["a"])(b.a.mark((function s(){var u;return b.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!Uv(n)){s.next=6;break}return s.next=4,Ro({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,Co(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!Bv(c)){s.next=13;break}throw new vt(ht.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new vt(ht.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=Rv(e,t,r,i),!u.length){s.next=20;break}return s.next=18,No.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new vt(ht.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function Av(e,t,n){var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value;gt(Object.values(t.tokens).includes(a),[ht.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:a}]),gt(n[o].payload.available,[ht.PFS_TARGET_OFFLINE,{target:o}]),gt(Uu(n[o].payload.caps,Le.RECEIVE),[ht.PFS_TARGET_NO_RECEIVE,{target:o}]),gt(Object.values(t.channels).some((function(e){return!0===Bm(t,n,a,e.partner.address,o,i)})),ht.PFS_NO_ROUTES_BETWEEN_NODES)}function Nv(e,t){var n=t.pfs,r=null===e.payload.pfs,a=!e.payload.pfs&&null===n;return r||a}function Dv(e,t){var n=e.meta,r=n.tokenNetwork,a=n.target,o=n.value;return t.config$.pipe(Object(W["a"])(),Object($["a"])((function(n){return Cv(e.payload.pfs,n.pfs,t).pipe(Object($["a"])((function(e){return Pv(e,r,t)})),Object($["a"])((function(e){var i=e.pfs,c=e.iou;return Iv(i,c,r,t.address,a,o,n)})),Object(B["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return Lv(t,r,a,n)})))})))}function Rv(e,t,n,r){var a=t.address,o=t.log,i=n.state,c=n.presences,s=[],u=new Set;if(r){var l,p=Km(r);try{for(p.s();!(l=p.n()).done;){var f=l.value,d=f.path,b=f.fee,y=Mv(d,a),h=y[0],m=!1,v="";if(!u.has(h)){if(0===s.length){var g=e.meta,O=g.tokenNetwork,w=g.target,k=g.value,_=Bm(i,c,O,h,w,k);m=!0===_,v="string"===typeof _?_:""}else h!==s[0].path[0]?v="path: already selected another recipient":b.gt(s[0].fee)?v="path: already selected a smaller fee":m=!0;m?s.push({path:y,fee:b}):(o.warn("Invalidated received route. Reason:",v,"Route:",y),u.add(h))}}}catch(j){p.e(j)}finally{p.f()}}return s}function Cv(e,t,n){if(e)return Object(P["a"])(e);if(t)return Wm(t,n);var r=n.log,a=n.latest$;return a.pipe(Object(H["a"])("pfsList"),Object(W["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return $m(e,n)})),Object(ai["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(H["a"])(0))}function Pv(e,t,n){return e.price.isZero()?Object(P["a"])({pfs:e,iou:void 0}):fv(e,t,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))}function Iv(e,t,n,r,a,o,i){var c=i.httpTimeout,s=i.pfsMaxPaths,u=jr({from:r,to:a,value:Ct(32).encode(o),max_paths:s,iou:t?Jm(Jm({},t),{},{amount:Ct(32).encode(t.amount),expiration_block:Ct(32).encode(t.expiration_block),chain_id:Ct(32).encode(t.chain_id)}):void 0});return Object(Vf["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:u}).pipe(Object($f["a"])(c),Object($["a"])(function(){var e=nv(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.text();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",{pfsResponse:e.t0,responseText:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function Lv(e,t,n,r){var a=r.pfsSafetyMargin,o=r.pfsMaxPaths,i=_r(t);if(e.ok){var c=St(ro,i).result.filter((function(e,t){return t<o})),s=c.map((function(e){var t=e.path,n=e.estimated_fee,r=n.mul(Math.round(1e6*a)).div(1e6);return{path:t,fee:r}}));return{paths:s,iou:n}}var u=St(uv,i);return{iou:n,error:u}}function Uv(e){var t=e.paths,n=e.error;return void 0!==t||Bv(n)}function Mv(e,t){return e[0]===t?e.slice(1):e}function Bv(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function Fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(n),!0).forEach((function(t){$v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hv(e,t){return Zv(e)||Gv(e,t)||qv(e,t)||Vv()}function Vv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qv(e,t){if(e){if("string"===typeof e)return Kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kv(e,t):void 0}}function Kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zv(e){if(Array.isArray(e))return e}function Yv(e,t,n){var r=t.pipe(Ti("config"));return Object(hu["a"])([r,n]).pipe(Object(B["a"])((function(t){var n,r=Hv(t,2),a=r[0],o=r[1],i=Wv(Wv({},e),a),c=null===a.caps?a.caps:Wv($v({},Le.RECEIVE,(null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o)?1:0),i.caps);return Wv(Wv({},i),{},{caps:c})})),Object(pi["a"])(ku.a))}function Xv(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(F["a"])(Po.success.is),Object(H["a"])("meta","totalDeposit"),Object(vu["a"])(j["MaxUint256"])),c=Yv(r,t,i),s=Cu(e),u=e.pipe(Object(F["a"])(Do.is),Object(H["a"])("payload","pfsList"),Object(vu["a"])([])),l=e.pipe(Object(F["a"])(no.is),Object(fi["a"])((function(e,t){return t.payload?Wv(Wv({},e),{},$v({},t.meta.address,t.payload)):Aa()(t.meta.address,e)}),{}),Object(vu["a"])({}));return Object(mu["a"])((function(){var e=c.pipe(Ti("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(Ti("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(hu["a"])([Object(hu["a"])([e,t,c,s,u,l]),Object(hu["a"])([i])]).pipe(Object(B["a"])((function(e){var t=Hv(e,2),n=Hv(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Hv(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var Qv=Wv(Wv(Wv(Wv(Wv({},s),u),l),p),f),zv=function(e,t,n){var r=e.pipe(Object(F["a"])(Mr($o))),a=e.pipe(Object(bi["a"])(Ou()(Mr($o)),!0)),o=t.pipe(Object(ci["a"])(r));return Object(mu["a"])((function(){return Xv(a,o,n).subscribe(n.latest$)}),(function(){return Object(Yt["a"])(Object.values(Qv)).pipe(Object($["a"])((function(e){return e(a,o,n).pipe(Object(zt["a"])((function(t){return n.log.error("Epic error",e,t),Object(ri["a"])(t)})))})),Object(zt["a"])((function(e){return Object(P["a"])($o({reason:e}))})),Object(ci["a"])(r))}))};function Jv(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=og(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach((function(t){ng(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ng(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rg(e,t){return sg(e)||cg(e,t)||og(e,t)||ag()}function ag(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function og(e,t){if(e){if("string"===typeof e)return ig(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ig(e,t):void 0}}function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cg(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sg(e){if(Array.isArray(e))return e}function ug(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function lg(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ug(o,r,a,i,c,"next",e)}function c(e){ug(o,r,a,i,c,"throw",e)}i(void 0)}))}}function pg(e){var t=e.constructor.__defaults.log,n={},r=function(){var t=lg(b.a.mark((function t(){var r;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=b.a.mark((function t(){var r,a,o,i,c,s,u,l;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,n={},a=Object.keys(r),t.next=5,e.allDocs({keys:a});case 5:return o=t.sent,i=function(e){var t,n=o.rows.find((function(t){return t.id===e}));return(null===(t=null===n||void 0===n?void 0:n.value)||void 0===t?void 0:t.deleted)?{_rev:n.value.rev,deleted:!1}:n&&!("error"in n)?{_rev:n.value.rev}:void 0},t.next=9,e.bulkDocs(Object.entries(r).map((function(e){var t=rg(e,2),n=t[0],r=t[1];return tg(tg({},r),{},{_id:n},i(n))})));case 9:c=t.sent,s=Jv(c);try{for(s.s();!(u=s.n()).done;)l=u.value,"error"in l&&l.error&&l.id&&!(l.id in n)&&(n[l.id]=r[l.id])}catch(p){s.e(p)}finally{s.f()}case 12:case"end":return t.stop()}}),t)}));case 1:if(tl()(n)){t.next=5;break}return t.delegateYield(r(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(a){return function(o){return function(i){var c=a.getState(),s=o(i),u=a.getState();if(u===c)return s;for(var l in u){var p=l;if(u[p]!==c[p])if("channels"===p||"oldChannels"===p){for(var f in u[p])if(u[p][f]!==c[p][f]){var d="channels.".concat(u[p][f]._id);e.storageKeys.add(d),n[d]=u[p][f]}}else if("transfers"===p){for(var b in u.transfers)u.transfers[b]!==c.transfers[b]&&(e.storageKeys.add(b),n[b]=u.transfers[b]);for(var y in c.transfers)y in u.transfers||(n[y]=tg(tg({},c.transfers[y]),{},{cleared:Date.now()}))}else{var h="state.".concat(p);e.storageKeys.add(h),n[h]={value:u[p]}}}return e.busy$.value||(e.busy$.next(!0),r().catch((function(e){var n;return null===(n=null===t||void 0===t?void 0:t.warn)||void 0===n?void 0:n.call(t,"Persister saveDatabase error",e)})).finally((function(){return e.busy$.next(!1)}))),s}}}}function fg(e){return yg(e)||bg(e)||wg(e)||dg()}function dg(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bg(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function yg(e){if(Array.isArray(e))return kg(e)}function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(n),!0).forEach((function(t){vg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gg(e,t){return jg(e)||_g(e,t)||wg(e,t)||Og()}function Og(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wg(e,t){if(e){if("string"===typeof e)return kg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kg(e,t):void 0}}function kg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _g(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function jg(e){if(Array.isArray(e))return e}function Eg(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Tg(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Eg(o,r,a,i,c,"next",e)}function c(e){Eg(o,r,a,i,c,"throw",e)}i(void 0)}))}}function xg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ag(e,t,n){return t&&Sg(e.prototype,t),n&&Sg(e,n),e}var Ng=function(){function e(t,n,r,a,o,i){var c,s,u,l,p,f=this,d=o.db,y=o.state,m=o.config;xg(this,e);var v=y.address;this.resolveName=t.resolveName.bind(t),this.log=h.a.getLogger("raiden:".concat(v));var g=xn({network:n},m&&St(Tn,m));t.resetEventsBlock(y.blockNumber+1);var O=new R["a"](1);this.state$=O.pipe(Ti("state")),this.action$=O.pipe(Ti("action"),Object(M["a"])(1)),this.channels$=this.state$.pipe(Ti("channels"),Object(B["a"])(qp)),this.transfers$=Vp(this.state$,d),this.events$=this.action$.pipe(Object(F["a"])(Mr(qo))),this.getTokenInfo=D()(function(){var e=Tg(b.a.mark((function e(t){var n,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.deps.getTokenContract(t),e.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(A()(void 0)),n.functions.symbol().catch(A()(void 0))]);case 4:return r=e.sent,a=gg(r,4),o=a[0],i=a[1],c=a[2],s=a[3],gt(o&&null!=i,ht.RDN_NOT_A_TOKEN,this.log.info),e.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),this.deps={latest$:O,config$:O.pipe(Ti("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:v,log:this.log,defaultConfig:g,contractsInfo:a,registryContract:Z.connect(a.TokenNetworkRegistry.address,null!==(c=null===i||void 0===i?void 0:i.signer)&&void 0!==c?c:r),getTokenNetworkContract:D()((function(e){var t;return J.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),getTokenContract:D()((function(e){var t;return ae.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),serviceRegistryContract:ue.connect(a.ServiceRegistry.address,null!==(s=null===i||void 0===i?void 0:i.signer)&&void 0!==s?s:r),userDepositContract:ge.connect(a.UserDeposit.address,null!==(u=null===i||void 0===i?void 0:i.signer)&&void 0!==u?u:r),secretRegistryContract:je.connect(a.SecretRegistry.address,null!==(l=null===i||void 0===i?void 0:i.signer)&&void 0!==l?l:r),monitoringServiceContract:De.connect(a.MonitoringService.address,null!==(p=null===i||void 0===i?void 0:i.signer)&&void 0!==p?p:r),main:i,db:d},this.userDepositTokenAddress=D()(Tg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var w=Object(x["createLogger"])({predicate:function(){return f.log.getLevel()<=h.a.levels.INFO},logger:this.log,level:{prevState:!1,action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return f.config=e})),this.epicMiddleware=Object(T["a"])({dependencies:this.deps});var k=pg(d);this.store=Object(E["b"])(yu,y,Object(E["a"])(w,k,this.epicMiddleware)),Xv(Object(P["a"])(Ho({})),Object(P["a"])(this.store.getState()),this.deps).subscribe((function(e){return f.deps.latest$.next(e)}))}return Ag(e,[{key:"start",value:function(){var t=this;gt(this.epicMiddleware,ht.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:{name:this.deps.network.name,chainId:this.deps.network.chainId},"raiden-ts":e.version,"raiden-contracts":e.contractVersion,config:this.config});var n={complete:function(){return t.epicMiddleware=null}};this.deps.latest$.subscribe(n),this.epicMiddleware.run(zv),this.epicMiddleware=void 0,this.store.dispatch(Ho({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch($o({reason:Ie.STOP}))}},{key:"getBlockNumber",value:function(){var e=Tg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfig",value:function(e){this.store.dispatch(Ho(St(Tn,e)))}},{key:"dumpDatabase",value:function(){var e=Tg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===this.started){e.next=3;break}return e.next=3,this.deps.db.busy$.toPromise();case 3:return e.abrupt("return",Op(this.deps.db));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Kp(this.deps,this.config.subkey).address,gt(Bt.is(e),[ht.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(){var e=Tg(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null!==n&&void 0!==n?n:Kp(this.deps,this.config.subkey).address,gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{address:n}],this.log.info),gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),r=this.deps.getTokenContract(t),e.abrupt("return",r.functions.balanceOf(n));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTokenList",value:function(){var e=Tg(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(mg(mg({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{},{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Tg(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.state.tokens[t],!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.deps.registryContract.token_to_token_networks(t);case 6:return n=e.sent,gt(n&&n!==j["AddressZero"],ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch($a({token:t,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=d.length>3?d[3]:void 0,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),e.next=6,this.monitorToken(t);case 6:return o=e.sent,gt(!r.subkey||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),i=r.settleTimeout?St(Ct(4),r.settleTimeout,ht.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=r.deposit?St(Ct(32),r.deposit,ht.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:n},u=Vr(Ha,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Vr(qa,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Ha.request(mg(mg({},r),{},{settleTimeout:i,deposit:c}),s)),e.next=16,u;case 16:return p=e.sent,null===a||void 0===a||a({type:Ae.OPENED,payload:{txHash:p}}),e.next=20,this.state$.pipe(Ti("channels",qi({tokenNetwork:o,partner:n}),"state"),Object(W["a"])((function(e){return e===aa.open}))).toPromise();case 20:if(null===a||void 0===a||a({type:Ae.CONFIRMED,payload:{txHash:p}}),!l){e.next=26;break}return e.next=24,l;case 24:f=e.sent,null===a||void 0===a||a({type:Ae.DEPOSITED,payload:{txHash:f}});case 26:return e.abrupt("return",p);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositChannel",value:function(){var e=Tg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:{},o=a.subkey,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),i=this.state,c=i.tokens[t],gt(c,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),gt(!o||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),s=St(Ct(32),r,ht.DTA_INVALID_DEPOSIT,this.log.info),u={tokenNetwork:c,partner:n},l=Vr(qa,u,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(qa.request({deposit:s,subkey:o},u)),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],gt(i,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),gt(!a||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Vr(Ga,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ga.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],gt(i,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),gt(!a||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Vr(Ya,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ya.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Tg(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{address:t}],this.log.info),n={address:t},r=Vr(Ja,n,this.action$),this.store.dispatch(Ja.request(void 0,n)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Tg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d,y=this,h=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],gt(o,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=St(Ct(32),r,ht.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==a.paymentId?St(Ct(8),a.paymentId,ht.DTA_INVALID_PAYMENT_ID,this.log.info):fs(),s=a.paths?St(ao,a.paths,ht.DTA_INVALID_PATH,this.log.info):void 0,u=a.pfs?St(oo,a.pfs,ht.DTA_INVALID_PFS,this.log.info):void 0,l=a.lockTimeout?this.state.blockNumber+a.lockTimeout:void 0,gt(void 0===a.secret||Lt.is(a.secret),ht.RDN_INVALID_SECRET,this.log.info),gt(void 0===a.secrethash||It.is(a.secrethash),ht.RDN_INVALID_SECRETHASH,this.log.info),p=a.secret?a.secret:a.secrethash?void 0:ps(),f=a.secrethash||ls(p),gt(!p||ls(p)===f,ht.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),d={tokenNetwork:o,target:n,value:i},e.abrupt("return",Object(I["a"])(this.action$.pipe(Object(W["a"])($r(No,d)),Object(B["a"])((function(e){if(No.failure.is(e))throw e.payload;return e.payload.paths}))),Object(L["a"])((function(){return y.store.dispatch(No.request({paths:s,pfs:u},d)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(y.action$.pipe(Object(F["a"])(Mr([lo,uo.failure])),Object(W["a"])((function(e){return e.meta.direction===ja.SENT&&e.meta.secrethash===f})),Object(B["a"])((function(e){if(uo.failure.is(e))throw e.payload;return bs(e.meta)}))),Object(L["a"])((function(){return y.store.dispatch(uo.request({tokenNetwork:o,target:n,value:i,paths:e,paymentId:c,secret:p,expiration:l},{secrethash:f,direction:ja.SENT})),U["a"]})))}))).toPromise());case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"waitTransfer",value:function(){var e=Tg(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=hs(t),i=o.direction,c=o.secrethash,s=this.state.transfers[t],s){e.next=14;break}return e.prev=3,e.t0=St,e.t1=xa,e.next=8,this.deps.db.get(t);case 8:e.t2=e.sent,s=(0,e.t0)(e.t1,e.t2),e.next=14;break;case 12:e.prev=12,e.t3=e["catch"](3);case 14:if(gt(s,ht.RDN_UNKNOWN_TRANSFER,this.log.info),u=ks(s),!u.completed){e.next=22;break}if(!u.success){e.next=21;break}return e.abrupt("return",u);case 21:throw new vt(ht.XFER_ALREADY_COMPLETED,{status:u.status});case 22:return e.next=24,Vr(uo,{secrethash:c,direction:i},this.action$);case 24:return e.next=26,this.state$.pipe(Object(H["a"])("transfers",t),Object(W["a"])((function(e){return!!e.unlockProcessed}))).toPromise();case 26:return l=e.sent,this.log.info("Transfer successful",{key:t,partner:l.partner,initiator:l.transfer.initiator,target:l.transfer.target,fee:l.fee.toString(),lockAmount:l.transfer.lock.amount.toString(),targetReceived:null===(a=null===(r=null===(n=l.secretRequest)||void 0===n?void 0:n.amount)||void 0===r?void 0:r.toString)||void 0===a?void 0:a.call(r),transferTime:l.unlockProcessed.ts-l.transfer.ts}),e.abrupt("return",ks(l));case 29:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Tg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],gt(o,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=St(Ct(32),r),c=a.pfs?St(oo,a.pfs):void 0,s={tokenNetwork:o,target:n,value:i},u=Vr(No,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(No.request({pfs:c},s)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Tg(b.a.mark((function e(t,n,r){var a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{target:n}],this.log.info),a=this.state.tokens[t],gt(a,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=St(Ct(32),r),i={tokenNetwork:a,target:n,value:o},c=Vr(No,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(No.request({pfs:null},i)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"findPFS",value:function(){var e=Tg(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt(null!==this.config.pfs,ht.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(P["a"])([this.config.pfs]):this.deps.latest$.pipe(Ti("pfsList"),Object(W["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return $m(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=r.subkey,o=r.to,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(!a||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),gt(1!==this.deps.network.chainId,ht.RDN_MINT_MAINNET,this.log.info),i=Kp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,u=be.connect(t,c),l=null!==o&&void 0!==o?o:s,gt(Bt.is(l),[ht.DTA_INVALID_ADDRESS,{beneficiary:l}],this.log.info),p=St(Ct(32),n,ht.DTA_INVALID_AMOUNT),e.next=11,Zp(u,"mintFor",[p,l],ht.RDN_MINT_FAILED,{log:this.log});case 11:return f=e.sent,e.next=14,Xp(f,this.deps,1);case 14:return e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Tg(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tf(this.deps.latest$);case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(fg(e),fg(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},a=r.subkey,gt(!a||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),o=St(Ct(32),t,ht.DTA_INVALID_DEPOSIT,this.log.info),gt(o.gt(j["Zero"]),ht.DTA_NON_POSITIVE_NUMBER,this.log.info),e.next=6,tf(this.deps.latest$);case 6:return i=e.sent,c={totalDeposit:i.add(o)},s=Vr(Po,c,this.action$).then((function(e){return null===e||void 0===e?void 0:e.txHash})),this.store.dispatch(Po.request({deposit:o,subkey:a},c)),e.next=12,s;case 12:return u=e.sent,null===n||void 0===n||n({type:Ae.DEPOSITED,payload:{txHash:u}}),l=Vr(Po,c,this.action$,!0).then((function(e){return e.txHash})),e.next=17,l;case 17:return u=e.sent,null===n||void 0===n||n({type:Ae.CONFIRMED,payload:{txHash:u}}),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transferOnchainBalance",value:function(){var e=Tg(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:j["MaxUint256"],r=m.length>2&&void 0!==m[2]?m[2]:{},a=r.subkey,o=r.gasPrice,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{to:t}],this.log.info),gt(!a||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),i=Kp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,!o){e.next=9;break}e.t0=Object(_["bigNumberify"])(o),e.next=12;break;case 9:return e.next=11,this.deps.provider.getGasPrice();case 11:e.t0=e.sent;case 12:return u=e.t0,l=Object(_["bigNumberify"])(21e3),e.next=16,this.getBalance(s);case 16:return p=e.sent,f=p.sub(u.mul(l)),gt(f.gt(j["Zero"]),[ht.RDN_INSUFFICIENT_BALANCE,{transferable:f.toString()}],this.log.info),d=f.lte(n)?f:Object(_["bigNumberify"])(n),e.next=22,c.sendTransaction({to:t,value:d,gasPrice:u,gasLimit:l});case 22:return y=e.sent,e.next=25,y.wait();case 25:return h=e.sent,gt(h.status,ht.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),e.abrupt("return",y.hash);case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnchainTokens",value:function(){var e=Tg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:j["MaxUint256"],a=d.length>3&&void 0!==d[3]?d[3]:{},o=a.subkey,gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{to:n}],this.log.info),gt(!o||this.deps.main,ht.RDN_SUBKEY_NOT_SET,this.log.info),i=Kp(this.deps,null!==o&&void 0!==o?o:this.config.subkey),c=i.signer,s=i.address,u=Gp(this.deps.getTokenContract(t),c),e.next=9,this.getTokenBalance(t,s);case 9:return l=e.sent,p=l.lte(r)?l:Object(_["bigNumberify"])(r),e.next=13,Zp(u,"transfer",[n,p],ht.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 13:return f=e.sent,e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Tg(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={amount:St(Ct(32),t,ht.DTA_INVALID_AMOUNT,this.log.error)},r=Vr(Lo,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Lo.request(void 0,n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"withdrawChannel",value:function(){var e=Tg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return gt(Bt.is(t),[ht.DTA_INVALID_ADDRESS,{token:t}],this.log.info),gt(Bt.is(n),[ht.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),a=this.state.tokens[t],gt(a,ht.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[qi({tokenNetwork:a,partner:n})],gt((null===o||void 0===o?void 0:o.state)===aa.open,ht.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Gi(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=St(Ct(32),null!==r&&void 0!==r?r:c,ht.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),p=this.state.blockNumber+2*this.config.revealTimeout,f={direction:ja.SENT,tokenNetwork:a,partner:n,totalWithdraw:l,expiration:p},d=Vr(jo,f,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(jo.request(void 0,f)),e.abrupt("return",d);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(){var e=Tg(b.a.mark((function e(t,n,r,a,o,i){var c,s,u,l,p,f,d,y,m,v;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="string"===typeof t?new k["JsonRpcProvider"](t):t instanceof k["JsonRpcProvider"]?t:new k["Web3Provider"](t),yn(c),e.next=4,c.getNetwork();case 4:if(s=e.sent,a){e.next=9;break}u=Fp(s),e.next=17;break;case 9:if("string"!==typeof a){e.next=16;break}return gt(Bt.is(a),[ht.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:a}]),e.next=13,Jp(c,a);case 13:u=e.sent,e.next=17;break;case 16:u=a;case 17:return e.next=19,Hp(n,c,i);case 19:return l=e.sent,p=l.signer,f=l.address,d=l.main,e.next=25,af({network:s,contractsInfo:u,address:f,log:h.a.getLogger("raiden:".concat(f))},r);case 25:return y=e.sent,m=y.state,v=y.db,gt(f===m.address,[ht.RDN_STATE_ADDRESS_MISMATCH,{account:f,state:m.address}]),gt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[ht.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),e.abrupt("return",new this(c,s,p,u,{db:v,state:m,config:o},d));case 31:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"version",get:function(){return Ce.sdk}},{key:"contractVersion",get:function(){return Ce.contracts}}]),e}()},f673:function(e,t,n){"use strict";var r=n("3576"),a=n.n(r);a.a},fe3a:function(e,t,n){"use strict";var r=n("530c"),a=n.n(r);a.a}});
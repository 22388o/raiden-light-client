(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-04f1a27c":"184406eb","chunk-05544c28":"bbf215b9","chunk-06f31fdd":"b064efa4","chunk-22c18be0":"ce21cf36","chunk-4b428116":"8b70d562","chunk-2c96c4a9":"8da93e02","chunk-558f19da":"b931120a","chunk-de0ded98":"1e4bb249","chunk-2cb0a65b":"81a8ef92","chunk-475430dd":"d872cd7b","chunk-552232cc":"5bfdaede","chunk-47fb259a":"debeff07","chunk-dd19613c":"a4bef550","chunk-063f594f":"107ae86c","chunk-27c62b68":"35d48993","chunk-306b3163":"39b4f3b8","chunk-54623299":"36c1a43d","chunk-58f73f57":"dbe0b3fd"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-04f1a27c":1,"chunk-05544c28":1,"chunk-06f31fdd":1,"chunk-22c18be0":1,"chunk-4b428116":1,"chunk-2c96c4a9":1,"chunk-558f19da":1,"chunk-de0ded98":1,"chunk-2cb0a65b":1,"chunk-475430dd":1,"chunk-552232cc":1,"chunk-47fb259a":1,"chunk-dd19613c":1,"chunk-063f594f":1,"chunk-27c62b68":1,"chunk-306b3163":1,"chunk-54623299":1,"chunk-58f73f57":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-04f1a27c":"c2e1e777","chunk-05544c28":"688988c3","chunk-06f31fdd":"4c2a0c88","chunk-22c18be0":"09416e52","chunk-4b428116":"afe9b41e","chunk-2c96c4a9":"9ddd6f20","chunk-558f19da":"fda03424","chunk-de0ded98":"423bfba4","chunk-2cb0a65b":"284343a3","chunk-475430dd":"f0caf6ea","chunk-552232cc":"5b2edc41","chunk-47fb259a":"4641a76f","chunk-dd19613c":"27c85d4e","chunk-063f594f":"1747eb60","chunk-27c62b68":"42e3e78c","chunk-306b3163":"3eb41cc2","chunk-54623299":"26e6eef1","chunk-58f73f57":"a9f4933e"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"00ef":function(e,t,n){},"017c":function(e,t,n){"use strict";var r=n("1f6e"),a=n.n(r);a.a},"07c1":function(e,t,n){},"07e6":function(e,t,n){e.exports=n.p+"img/info.c9b975f7.svg"},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("e921"),i=n("b99a");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["a"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("71a0"),n("8e3c")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("0e7f"),a=n("a3d5"),o=n("5bfd"),i=n.n(o),c=n("e73a"),s=n.n(c);function u(e,t){return b(e)||d(e,t)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"119c":function(e,t,n){},1502:function(e,t,n){},"152b":function(e,t,n){"use strict";var r=n("e921"),a=n("b99a"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=p(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},"1aef":function(e,t,n){"use strict";var r=n("a6a3"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("f374"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1f1a":function(e,t,n){},"1f6e":function(e,t,n){},"1ffc":function(e,t,n){e.exports=n.p+"img/state.ff4426c1.svg"},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("e921"),i=n("b99a"),c=n("7aa1"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=m(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:f({},Object(c["f"])(["defaultAccount"]))})],w);var _=w,k=_,j=(n("1aef"),n("8e3c")),E=n("834c"),T=n.n(E),A=n("1337"),S=Object(j["a"])(k,r,a,!1,null,"0e385849",null);t["a"]=S.exports;T()(S,{VImg:A["a"]})},2886:function(e,t,n){e.exports=n.p+"img/sent_transfer.087bd404.svg"},"2a59":function(e,t,n){"use strict";var r=n("acf3"),a=n.n(r);a.a},"2d14":function(e,t,n){e.exports=n.p+"img/down_arrow.d7fcc637.svg"},"2e1f":function(e,t,n){e.exports=n.p+"img/done.51f3a970.svg"},"2ee5":function(e,t,n){e.exports=n.p+"img/error.f52d5069.svg"},"2fca":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("f633"),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return d(e)||p(e,t)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function d(e){if(Array.isArray(e))return e}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){m(this,e)}return v(e,null,[{key:"contracts",value:function(){var e=y(a.a.mark((function e(){var t,n,r,o,c,u,l,f,p,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return o=e.sent,c=s(o,2),u=c[0],l=c[1],e.next=10,Promise.all([u.json(),l.json()]);case 10:return f=e.sent,p=s(f,2),d=p[0],b=p[1],e.abrupt("return",i(i({},d.contracts),b.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=y(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},"31e8":function(e,t,n){var r={"./back_arrow.svg":"73da","./bug.svg":"c0e3","./deposit.svg":"d989","./done.svg":"2e1f","./down_arrow.svg":"2d14","./error.svg":"2ee5","./eth.svg":"b872","./eth_transfer_arrow.svg":"e2f5","./gear.svg":"5cc9","./generic.svg":"ec79","./info.svg":"07e6","./input_invalid.svg":"c2ff","./input_valid.svg":"b376","./logo.svg":"9b19","./metamask.svg":"d6c5","./notifications.svg":"4170","./received_transfer.svg":"5b9b","./sent_transfer.svg":"2886","./state.svg":"1ffc","./udc.svg":"8fe8","./warning.svg":"afb7","./withdrawal.svg":"45f0"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="31e8"},3465:function(e,t,n){"use strict";var r=n("1502"),a=n.n(r);a.a},"3eea":function(e,t,n){"use strict";var r=n("f04e"),a=n.n(r);a.a},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"45f0":function(e,t,n){e.exports=n.p+"img/withdrawal.c80c3337.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},5126:function(e,t,n){},"58a8":function(e,t,n){"use strict";var r=n("5126"),a=n.n(r);a.a},"5b9b":function(e,t,n){e.exports=n.p+"img/received_transfer.ef6596cc.svg"},"5c63":function(e,t,n){},"5cc9":function(e,t,n){e.exports=n.p+"img/gear.263a7ddf.svg"},6:function(e,t){},6691:function(e,t,n){"use strict";var r=n("5c63"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("e921"),i=n("0a08"),c=n("b99a");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("8e3c")),k=n("834c"),j=n.n(k),E=n("985e"),T=n("1b9f"),A=n("0e20"),S=n("0d78"),x=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},6707:function(e,t,n){"use strict";var r=n("00ef"),a=n.n(r);a.a},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("07c1"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("e921"),i=n("b99a");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){f(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("3eea"),n("8e3c")),_=n("834c"),k=n.n(_),j=n("985e"),E=n("fec4"),T=n("0d78"),A=n("2f50"),S=Object(w["a"])(O,r,a,!1,null,"07afaaa8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("1f1a"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("e921"),a=n("b99a");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return B}));var r=n("f633"),a=n.n(r),o=n("7e01"),i=n.n(o),c=n("5da6");function s(e){return f(e)||l(e)||h(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return v(e)}function p(e,t){return y(e)||b(e,t)||h(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function m(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function A(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function S(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?A(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?_(_({},e),{},{payload:A(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function x(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return D.apply(this,arguments)}function D(){return D=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var R=/^raiden:(0x[0-9a-f]{40})$/i;function C(e){return I.apply(this,arguments)}function I(){return I=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function P(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return C(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=S(n);i&&j.put(E,_({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,_({logger:r,level:e,message:n.map(x)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var U=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function M(e){var t,n=m(U);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,f,p,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,f=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,p=new Date(n.key).toISOString(),d=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(p).concat(d).concat(b," [").concat(s,"] \t=> ").concat(f,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=M(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},"8fe8":function(e,t,n){e.exports=n.p+"img/udc.a4ddd71a.svg"},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("e921"),i=n("b99a"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return f(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("58a8"),n("8e3c")),k=n("834c"),j=n.n(k),E=n("9bce"),T=Object(_["a"])(w,r,a,!1,null,"0b75904e",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"959b":function(e,t,n){"use strict";var r=n("f1f6"),a=n.n(r);a.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_TOO_EXPENSIVE":"Pathfinding Service price higher than pfsMaxFee.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_DEPOSIT_OUTDATED":"The UDC contains a target balance different than requested deposit","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("38dd");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},a6a3:function(e,t,n){},acf3:function(e,t,n){},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b376:function(e,t,n){e.exports=n.p+"img/input_valid.762cb0ae.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},b872:function(e,t,n){e.exports=n.p+"img/eth.640d53f2.svg"},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("f633"),i=n.n(o),c=n("e921"),s=n("b99a"),u=n("7aa1"),l=n("87a2"),f=n("750b"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},d=[],b=n("66bc"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function k(e){var t=T();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var S=function(e){w(n,e);var t=k(n);function n(){return v(this,n),t.apply(this,arguments)}return O(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0})],S.prototype,"reason",void 0),S=Object(c["a"])([Object(s["a"])({})],S);var x=S,N=x,D=(n("753f"),n("8e3c")),R=n("834c"),C=n.n(R),I=n("dd1b"),P=Object(D["a"])(N,y,m,!1,null,"7b92b083",null),L=P.exports;function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function K(e){var t=X();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}C()(P,{VAlert:I["a"]});var Q=function(e){q(n,e);var t=K(n);function n(){var e;return W(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return H(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",B(B({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],Q.prototype,"visible",void 0),Object(c["a"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],Q.prototype,"connecting",void 0),Object(c["a"])([Object(s["d"])({required:!0})],Q.prototype,"hasProvider",void 0),Object(c["a"])([Object(s["b"])()],Q.prototype,"close",null),Object(c["a"])([Object(s["b"])()],Q.prototype,"connect",null),Q=Object(c["a"])([Object(s["a"])({components:{RaidenDialog:b["a"],ActionButton:f["a"],NoAccessMessage:L},computed:Object(u["f"])(["accessDenied"])})],Q);var J=Q,z=J,ee=(n("e4b6"),n("3750")),te=Object(D["a"])(z,p,d,!1,null,"469a86df",null),ne=te.exports;C()(te,{VCardText:ee["b"],VCardTitle:ee["c"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},ae=[],oe=n("152b");function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function de(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){var t=ve();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var Oe=function(e){de(n,e);var t=ye(n);function n(){return le(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(oe["a"]));Object(c["a"])([Object(s["f"])("tokens",{immediate:!0})],Oe.prototype,"onChange",null),Oe=Object(c["a"])([Object(s["a"])({computed:se({},Object(u["d"])(["tokens"]))})],Oe);var we=Oe,_e=we,ke=(n("959b"),n("985e")),je=n("fec4"),Ee=n("cf12"),Te=n("0d78"),Ae=n("2f50"),Se=Object(D["a"])(_e,re,ae,!1,null,"593703f5",null),xe=Se.exports;C()(Se,{VBtn:ke["a"],VCol:je["a"],VContainer:Ee["a"],VIcon:Te["a"],VRow:Ae["a"]});var Ne=n("f15c"),De=n("2fca");function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,c,"next",e)}function c(e){Le(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ze=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Fe(n,[{key:"created",value:function(){var e=Ue(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ne["a"].injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,De["a"].configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ze=Object(c["a"])([Object(s["a"])({computed:Ie(Ie({},Object(u["f"])(["loading","accessDenied","stateBackup","settings"])),Object(u["d"])(["isConnected"])),components:{ActionButton:f["a"],ConnectDialog:ne,NoTokens:xe,NoAccessMessage:L}})],Ze);var Xe=Ze,Ye=Xe,Qe=(n("3465"),n("1337")),Je=Object(D["a"])(Ye,r,a,!1,null,"3ad2829a",null);t["a"]=Je.exports;C()(Je,{VCol:je["a"],VContainer:Ee["a"],VImg:Qe["a"],VRow:Ae["a"]})},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.11.0","contracts":"0.37.0"}')},c0e3:function(e,t,n){e.exports=n.p+"img/bug.4e8b8f1b.svg"},c2ff:function(e,t,n){e.exports=n.p+"img/input_invalid.4e8b2468.svg"},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("0e7f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-area")],1)},o=[],i=n("e921"),c=n("b99a"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")])]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1),e.isDisclaimerRoute?e._e():r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1)],1)},l=[],f=n("7aa1"),p=n("80bf"),d=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=Object(f["a"])("notifications"),N=x.mapState,D=x.mapMutations,R=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===p["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[p["a"].HOME,p["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:d["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(f["f"])(["defaultAccount"])),N(["newNotifications"])),Object(f["d"])(["network","isConnected"])),methods:h({},D(["notificationsViewed"]))})],R);var C=R,I=C,P=(n("017c"),n("8e3c")),L=n("834c"),U=n.n(L),M=n("c728"),B=n("985e"),F=n("fec4"),W=n("1337"),$=n("2f50"),H=Object(P["a"])(I,u,l,!1,null,"71cd3860",null),q=H.exports;U()(H,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"]});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},K=[],G=n("0a08");function Z(e){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function ee(e){var t=re();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe=function(e){J(n,e);var t=ee(n);function n(){var e;return X(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Q(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);oe=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],oe);var ie=oe,ce=ie,se=n("0d78"),ue=n("82a4"),le=Object(P["a"])(ce,V,K,!1,null,null,null),fe=le.exports;U()(le,{VIcon:se["a"],VSnackbar:ue["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},de=[];function be(e){return be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Oe(e){var t=ke();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ee=function(e){ve(n,e);var t=Oe(n);function n(){var e;return ye(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return he(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Ee=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],Ee);var Te=Ee,Ae=Te,Se=Object(P["a"])(Ae,pe,de,!1,null,null,null),xe=Se.exports;U()(Se,{VBtn:B["a"],VSnackbar:ue["a"]});var Ne,De,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,top:"",centered:"",vertical:"",app:"",rounded:"","max-width":"550px"},on:{input:function(t){return e.notificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{dark:"",text:"",left:""},on:{click:function(t){return e.dismiss(e.notification.id)}}},"v-btn",n,!1),[e._v(" "+e._s(e.$t("notification-area.dismiss"))+" ")])]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area__notification__content",attrs:{"no-gutters":""}},["none"!==e.notification.context?r("v-col",{staticClass:"notification-area__notification__content__icon d-flex flex-column",attrs:{cols:"auto"}},[r("v-img",{class:"notification-area__notification__content__icon--"+e.notification.context,attrs:{"aspect-ratio":"1",contain:"",src:n("31e8")("./"+e.notification.context+".svg"),height:"48px",width:"48px"}})],1):e._e(),r("v-col",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h3",{staticClass:"text--primary title"},[e._v(e._s(e.notification.title))])]),e.notificationQueue.length>=1?r("v-col",{attrs:{cols:"auto"}},[r("v-badge",{staticClass:"notification-area__notification__content__count",attrs:{inline:"",content:e.notificationQueue.length,color:"info"}})],1):e._e()],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("p",{staticClass:"text--secondary caption notification-area__notification__content__description text-justify"},[e._v(" "+e._s(e.notification.description)+" ")])])],1)],1)],1)],1)},Ce=[];function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Ne||(Ne={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(De||(De={}));var Ze={id:-1,title:"",description:"",display:!1,duration:5e3,importance:Ne.LOW,context:De.NONE,received:new Date},Xe=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.notification=Ze,e}return Fe(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ze}},{key:"dismiss",value:function(e){this.notificationShown(e),this.notification=Le(Le({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Xe.prototype,"onQueueChange",null),Xe=Object(i["a"])([Object(c["a"])({computed:Le({},Object(f["d"])("notifications",["notificationQueue"])),methods:Le({},Object(f["c"])("notifications",["notificationShown"]))})],Xe);var Ye=Xe,Qe=Ye,Je=(n("6707"),Object(P["a"])(Qe,Re,Ce,!1,null,"f05dcae4",null)),ze=Je.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(Je,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"],VSnackbar:ue["a"]});var ft=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));ft=Object(i["a"])([Object(c["a"])({components:{AppHeader:q,OfflineSnackbar:fe,UpdateSnackbar:xe,NotificationArea:ze}})],ft);var pt=ft,dt=pt,bt=(n("2a59"),n("5d2b")),yt=n("cf12"),mt=n("0e97"),ht=Object(P["a"])(dt,a,o,!1,null,"6f430130",null),vt=ht.exports;U()(ht,{VApp:bt["a"],VContainer:yt["a"],VMain:mt["a"]});var gt=n("304c");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("6f53"),wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"disclaimer",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10",offset:"1"}},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1)],1),n("action-button",{attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},_t=[],kt=n("750b");function jt(e){return jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),e}function St(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}function xt(e,t){return xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xt(e,t)}function Nt(e){var t=Ct();return function(){var n,r=It(e);if(t){var a=It(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){return!t||"object"!==jt(t)&&"function"!==typeof t?Rt(e):t}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}var Pt=function(e){St(n,e);var t=Nt(n);function n(){var e;return Et(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return At(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:p["a"].HOME}}}]),n}(c["e"]);Pt=Object(i["a"])([Object(c["a"])({components:{ActionButton:kt["a"]}})],Pt);var Lt=Pt,Ut=Lt,Mt=(n("6691"),n("c816")),Bt=Object(P["a"])(Ut,wt,_t,!1,null,"51ed7395",null),Ft=Bt.exports;U()(Bt,{VCheckbox:Mt["a"],VCol:F["a"],VContainer:yt["a"],VRow:$["a"]});var Wt=n("bb51"),$t=n("5013"),Ht=n("f455"),qt=n("87a2"),Vt=n("002a"),Kt=n.n(Vt),Gt=n("4c4f"),Zt=n.n(Gt),Xt=n("1c4f0"),Yt=n.n(Xt),Qt=n("9038"),Jt=n.n(Qt),zt=n("c72f"),en=n.n(zt),tn=n("5091"),nn=n.n(tn),rn=n("8265"),an=n.n(rn),on=n("b104"),cn=n.n(on);function sn(e){return pn(e)||fn(e)||ln(e)||un()}function un(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ln(e,t){if(e){if("string"===typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}function fn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function pn(e){if(Array.isArray(e))return dn(e)}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn={notify:function(e,t){var n,r,a=e.commit,o=e.getters.nextNotificationId,i=yn(yn({},t),{},{id:o,received:new Date,display:!0,context:null!==(n=t.context)&&void 0!==n?n:De.NONE,duration:null!==(r=t.duration)&&void 0!==r?r:5e3});a("notificationAdd",i)},notificationShown:function(e,t){var n=e.commit,r=e.state,a=r.notifications.findIndex((function(e){return e.id===t}));if(!(a<0)){var o=sn(r.notifications);o[a]=yn(yn({},r.notifications[a]),{},{display:!1}),n("notifications",o)}}},vn={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0},notifications:function(e,t){e.notifications=t},clear:function(e){e.notifications=[]}},gn={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]+1},notificationQueue:function(e){return e.notifications.filter((function(e){return e.importance===Ne.HIGH&&!0===e.display}))}},On=function(){return{notifications:[],newNotifications:!1}},wn=On(),_n=wn,kn={namespaced:!0,mutations:vn,actions:hn,state:_n,getters:gn};function jn(e){return An(e)||Tn(e)||Cn(e)||En()}function En(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function An(e){if(Array.isArray(e))return In(e)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e,t){return Ln(e)||Pn(e,t)||Cn(e,t)||Rn()}function Rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cn(e,t){if(e){if("string"===typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ln(e){if(Array.isArray(e))return e}r["a"].use(f["b"]);var Un={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:qt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:qt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function Mn(){return Jt()(Un)}var Bn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},Fn=new $t["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Wn=new $t["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),$n={state:Mn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Dn(r[n],2),o=a[0],i=a[1];o in e.tokens&&an()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=xn(xn({},e.tokens[o]),i):e.tokens=xn(xn({},e.tokens),{},Nn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=jn(t)},updatePresence:function(e,t){e.presences=xn(xn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted;Object.assign(e,xn(xn({},Mn()),{},{settings:t,disclaimerAccepted:n}))},updateTransfers:function(e,t){e.transfers=xn(xn({},e.transfers),{},Nn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return Kt()(Yt()(Zt()(e.channels),(function(e){return!cn()(e)})),(function(n){var r=en()(n,t,Object(qt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Bn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!cn()(r)&&(n=Zt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Ht["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Ht["b"].open}));return nn()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[Fn.plugin,Wn.plugin],modules:{notifications:kn}},Hn=new f["b"].Store($n),qn=[{path:"/",name:p["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:Ft},{path:"*",redirect:"/"},{path:"/home",name:p["a"].HOME,meta:{title:"Raiden dApp"},component:Wt["a"]},{path:"/transfer/:token",name:p["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-05544c28"),n.e("chunk-06f31fdd"),n.e("chunk-22c18be0"),n.e("chunk-552232cc")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:p["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-05544c28"),n.e("chunk-dd19613c")]).then(n.bind(null,"146c"))}},{path:"/connect",name:p["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-27c62b68")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:p["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-05544c28"),n.e("chunk-06f31fdd"),n.e("chunk-22c18be0"),n.e("chunk-4b428116")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:p["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-05544c28"),n.e("chunk-06f31fdd"),n.e("chunk-2c96c4a9")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:p["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-05544c28"),n.e("chunk-47fb259a")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:p["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-04f1a27c").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:p["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-2cb0a65b").then(n.bind(null,"47f5"))}),r()},children:[{path:"/",name:p["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-306b3163")]).then(n.bind(null,"f18d"))}},{path:"backup",name:p["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-54623299")]).then(n.bind(null,"248b"))}},{path:"raiden",name:p["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-05544c28"),n.e("chunk-558f19da")]).then(n.bind(null,"9114"))}},{path:"settings",name:p["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-063f594f")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:p["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-475430dd"),n.e("chunk-58f73f57")]).then(n.bind(null,"c917"))}},{path:"udc",name:p["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-05544c28"),n.e("chunk-de0ded98")]).then(n.bind(null,"4c07"))}}]}];function Vn(e,t,n){var r=e.name===p["a"].DISCLAIMER;Hn.state.disclaimerAccepted?r?n({name:p["a"].HOME}):n():r?n():n({name:p["a"].DISCLAIMER,query:{redirectTo:e.fullPath}})}r["a"].use(Ot["a"]);var Kn=new Ot["a"]({mode:"hash",base:"/staging/",routes:qn});Kn.beforeEach(Vn);var Gn=Kn,Zn=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Xn=n("f633"),Yn=n.n(Xn),Qn=n("f15c"),Jn=n("a3d5"),zn=n("38dd"),er=n("bf60"),tr=n("c2dd"),nr=n("a8c1"),rr=n.n(nr),ar=n("2fca"),or=n("f30a"),ir=n("1f6f");function cr(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(ir["a"]);var sr=new ir["a"]({locale:"en",fallbackLocale:"en",messages:cr()});function ur(e){return ur="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function lr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function fr(e){var t=mr();return function(){var n,r=gr(e);if(t){var a=gr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pr(this,n)}}function pr(e,t){return!t||"object"!==ur(t)&&"function"!==typeof t?dr(e):t}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){var t="function"===typeof Map?new Map:void 0;return br=function(e){if(null===e||!hr(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return yr(e,arguments,gr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vr(n,e)},br(e)}function yr(e,t,n){return yr=mr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&vr(o,n.prototype),o},yr.apply(null,arguments)}function mr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function hr(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){Tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _r(e,t){return Er(e)||jr(e,t)||Sr(e,t)||kr()}function kr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jr(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Er(e){if(Array.isArray(e))return e}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Sr(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Sr(e,t){if(e){if("string"===typeof e)return xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xr(e,t):void 0}}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Dr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Nr(o,r,a,i,c,"next",e)}function c(e){Nr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t,n){return t&&Cr(e.prototype,t),n&&Cr(e,n),e}var Pr=function(){function e(t){Rr(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return Ir(e,[{key:"updateBalances",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=Dr(Yn.a.mark((function e(){var t,n,r,a,o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=Ar(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=Dr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Lr(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Dr(Yn.a.mark((function t(n,r){var a,o,i,c,s,u=this;return Yn.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ar["a"].configuration();case 3:return o=t.sent,t.next=6,Qn["a"].provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=52;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Ht["f"](Ht["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,t.next=28,this.fetchTokenData([this._userDepositTokenAddress]);case 28:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=31,this.monitorPreSetTokens();case 31:return a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type})),Object(tr["a"])((function(){return u.fetchTokenData(u.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),a.events$.pipe(Object(er["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=Dr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),!(null===(n=t.caps)||void 0===n?void 0:n[Ht["a"].NO_RECEIVE])){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=Dr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",Tr({},t.payload.token,{address:t.payload.token})),e.next=36;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",Tr({},t.meta.address,t.payload.available)),e.next=36;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=36;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=36;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=36;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner,t.meta.tokenNetwork,t.payload.txHash);case 31:e.next=36;break;case 33:if("channel/settle/failure"!==t.type){e.next=36;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner,t.meta.tokenNetwork,t.payload.message);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=44,this.getBalance();case 44:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=52;break}return t.t2=this.store,t.next=50,this.getBalance(a.address);case 50:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 52:t.next=58;break;case 54:t.prev=54,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?qt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?qt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Ur?qt["a"].INITIALIZATION_FAILED:qt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 58:this.store.commit("loadComplete");case 59:case"end":return t.stop()}}),t,this,[[0,54]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("receiving-disabled-dialog.title"),description:sr.t("receiving-disabled-dialog.body"),importance:Ne.HIGH,context:De.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=Dr(Yn.a.mark((function e(){var t,n,r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=Ar(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){var a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=Jn["a"].toUnits(n,i),s="string"===typeof t?sr.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||sr.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.failure.title"),description:u,context:De.ERROR,importance:Ne.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=Dr(Yn.a.mark((function e(t,n){var r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=Jn["a"].toUnits(t,o),c=Jn["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.success.title"),description:sr.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:De.INFO,importance:Ne.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r,a){var o,i,c,s;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=Jn["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:sr.t("notifications.ms-balance-proof.title"),description:sr.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:De.INFO,importance:Ne.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){var a;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=sr.t("notifications.settlement.success.description",{partner:t,tokenNetwork:n,txHash:r}),this._subkey&&(a+=" "+sr.t("notifications.settlement.success.withdrawal_hint")),e.next=4,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.success.title"),description:a,context:De.INFO,importance:Ne.HIGH});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.failure.title"),description:sr.t("notifications.settlement.failure.description",{partner:t,tokenNetwork:n,message:r}),context:De.ERROR,importance:Ne.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Dr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",Jn["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Dr(Yn.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=_r(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r,a){var o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Ht["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Dr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Dr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=Dr(Yn.a.mark((function e(t){var n,r=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=Dr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Tr({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,rr()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r,a,o){var i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r,a){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Dr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Dr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Dr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Ht["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Dr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Dr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Dr(Yn.a.mark((function e(t){var n,r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Tr({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=Dr(Yn.a.mark((function e(){var t,n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=Dr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(zn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=Dr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(zn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=Dr(Yn.a.mark((function e(t,n){var r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=Dr(Yn.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=Dr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(or["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,rr()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=wr(wr({},t),r[e]),delete r[e])})),i=function(){var e=Dr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=wr(wr({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,rr()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Dr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=Dr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=Dr(Yn.a.mark((function e(t){var n,r,a,o,i=arguments;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ar["a"].contracts();case 6:return o=e.sent,e.next=9,Ht["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Ur(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Lr=function(e){lr(n,e);var t=fr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return n}(br(Error)),Ur=function(e){lr(n,e);var t=fr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return n}(br(Error));function Mr(e,t){e.prototype.$raiden=new Pr(Hn)}var Br=n("5ffb"),Fr=n.n(Br);function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t,n){return t&&$r(e.prototype,t),n&&$r(e,n),e}var qr=function(){function e(){Wr(this,e),this.cache={}}return Hr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Fr()(e);return this.cache[e]=n,n}}]),e}();function Vr(e,t){e.prototype.$identicon=new qr}n("a73c"),n("8e5c"),n("bd89");var Kr=n("8138");r["a"].use(Kr["a"]);var Gr=new Kr["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Zr=n("9bec"),Xr=(n("5443"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Xr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Zn["b"])(),r["a"].use(Mr),r["a"].use(Vr),r["a"].use(Zr["a"]),new r["a"]({vuetify:Gr,router:Gn,store:Hn,i18n:sr,render:function(e){return e(vt)}}).$mount("#app")},d6c5:function(e,t,n){e.exports=n.p+"img/metamask.c879a582.svg"},d989:function(e,t,n){e.exports=n.p+"img/deposit.d1f000b7.svg"},e2f5:function(e,t,n){e.exports=n.p+"img/eth_transfer_arrow.cdc92be6.svg"},e4b6:function(e,t,n){"use strict";var r=n("119c"),a=n.n(r);a.a},ec79:function(e,t,n){e.exports=n.p+"img/generic.55c56a33.svg"},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I have read, understood and hereby accept the above disclaimer and privacy warning","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","settlement":{"success":{"title":"Channel Settlement","description":"The channel with {partner} for the token network {tokenNetwork} has become settled ({txHash}).","withdrawal_hint":"Go to the acounts Withdrawal screen to transfer the tokens to your main account."},"failure":{"title":"Channel Settlement","description":"The attempt to settle the channel with {partner} for the token network {tokenNetwork} failed: {message}"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"change-token-title":"Change Token","transfer-title":"Transfer","transfer-history-title":"History","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"notification-area":{"dismiss":"Dismiss"}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f04e:function(e,t,n){},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("f633"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f1f6:function(e,t,n){},f374:function(e,t,n){},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return uv})),n.d(t,"b",(function(){return jo})),n.d(t,"a",(function(){return Re})),n.d(t,"d",(function(){return Ae})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return yt})),n.d(t,"g",(function(){return on}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Qn})),n.d(r,"tokenMonitored",(function(){return Jn})),n.d(r,"channelOpen",(function(){return zn})),n.d(r,"channelMonitored",(function(){return er})),n.d(r,"channelDeposit",(function(){return tr})),n.d(r,"channelWithdrawn",(function(){return nr})),n.d(r,"channelClose",(function(){return rr})),n.d(r,"channelSettleable",(function(){return ar})),n.d(r,"channelSettle",(function(){return or}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return sr})),n.d(a,"matrixPresence",(function(){return ur})),n.d(a,"matrixRoom",(function(){return lr})),n.d(a,"matrixRoomLeave",(function(){return fr})),n.d(a,"rtcChannel",(function(){return pr}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Jr})),n.d(o,"messageGlobalSend",(function(){return zr})),n.d(o,"messageReceived",(function(){return ea}));var i={};n.r(i),n.d(i,"transfer",(function(){return ba})),n.d(i,"transferSigned",(function(){return ya})),n.d(i,"transferProcessed",(function(){return ma})),n.d(i,"transferSecret",(function(){return ha})),n.d(i,"transferSecretRegister",(function(){return va})),n.d(i,"transferSecretRequest",(function(){return ga})),n.d(i,"transferSecretReveal",(function(){return Oa})),n.d(i,"transferUnlock",(function(){return wa})),n.d(i,"transferUnlockProcessed",(function(){return _a})),n.d(i,"transferExpire",(function(){return ka})),n.d(i,"transferExpireProcessed",(function(){return ja})),n.d(i,"transferRefunded",(function(){return Ea})),n.d(i,"withdraw",(function(){return Aa})),n.d(i,"withdrawMessage",(function(){return Sa})),n.d(i,"withdrawExpire",(function(){return xa})),n.d(i,"withdrawCompleted",(function(){return Na}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Ca})),n.d(c,"pfsListUpdated",(function(){return Ia})),n.d(c,"iouPersist",(function(){return Pa})),n.d(c,"iouClear",(function(){return La})),n.d(c,"udcDeposit",(function(){return Ua})),n.d(c,"udcWithdraw",(function(){return Ba})),n.d(c,"udcWithdrawn",(function(){return Fa})),n.d(c,"msBalanceProofSent",(function(){return Wa}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return uf})),n.d(s,"initTokensRegistryEpic",(function(){return lf})),n.d(s,"initMonitorProviderEpic",(function(){return ff})),n.d(s,"channelEventsEpic",(function(){return mf})),n.d(s,"channelMonitoredEpic",(function(){return hf})),n.d(s,"channelOpenEpic",(function(){return vf})),n.d(s,"channelDepositEpic",(function(){return Of})),n.d(s,"channelCloseEpic",(function(){return wf})),n.d(s,"channelUpdateEpic",(function(){return _f})),n.d(s,"channelAutoSettleEpic",(function(){return kf})),n.d(s,"channelSettleEpic",(function(){return jf})),n.d(s,"channelSettleableEpic",(function(){return Ef})),n.d(s,"channelUnlockEpic",(function(){return Tf})),n.d(s,"confirmationEpic",(function(){return Sf}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return hp})),n.d(u,"matrixShutdownEpic",(function(){return vp})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Up})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Mp})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Bp})),n.d(u,"matrixUpdateCapsEpic",(function(){return Fp})),n.d(u,"matrixCreateRoomEpic",(function(){return td})),n.d(u,"matrixInviteEpic",(function(){return nd})),n.d(u,"matrixHandleInvitesEpic",(function(){return rd})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return ad})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return od})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return id})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return cd})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return sd})),n.d(u,"matrixMessageSendEpic",(function(){return wd})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return _d})),n.d(u,"matrixMessageReceivedEpic",(function(){return kd})),n.d(u,"deliveredEpic",(function(){return jd})),n.d(u,"rtcConnectEpic",(function(){return Xd}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return nb})),n.d(l,"transferAutoExpireEpic",(function(){return yb})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return qb})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Jb})),n.d(l,"initQueuePendingReceivedEpic",(function(){return zb})),n.d(l,"transferMediateEpic",(function(){return iy})),n.d(l,"transferProcessedReceivedEpic",(function(){return by})),n.d(l,"transferProcessedSendEpic",(function(){return yy})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return my})),n.d(l,"transferExpireProcessedEpic",(function(){return hy})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return vy})),n.d(l,"transferRefundedEpic",(function(){return Sy})),n.d(l,"transferRetryMessageEpic",(function(){return Wy})),n.d(l,"transferSecretRequestedEpic",(function(){return Xy})),n.d(l,"transferSecretRevealEpic",(function(){return Qy})),n.d(l,"transferSecretRevealedEpic",(function(){return Jy})),n.d(l,"transferRequestUnlockEpic",(function(){return zy})),n.d(l,"monitorSecretRegistryEpic",(function(){return em})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return tm})),n.d(l,"transferAutoRegisterEpic",(function(){return nm})),n.d(l,"transferSecretRegisterEpic",(function(){return rm})),n.d(l,"initWithdrawMessagesEpic",(function(){return pm})),n.d(l,"withdrawSendRequestMessageEpic",(function(){return dm})),n.d(l,"withdrawSendTxEpic",(function(){return bm})),n.d(l,"withdrawMessageProcessedEpic",(function(){return ym})),n.d(l,"autoWithdrawExpireEpic",(function(){return mm})),n.d(l,"withdrawSendExpireMessageEpic",(function(){return hm}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return oh})),n.d(f,"pfsCapacityUpdateEpic",(function(){return ih})),n.d(f,"pfsFeeUpdateEpic",(function(){return ch})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return sh})),n.d(f,"monitorUdcBalanceEpic",(function(){return uh})),n.d(f,"udcDepositEpic",(function(){return fh})),n.d(f,"monitorRequestEpic",(function(){return dh})),n.d(f,"udcWithdrawRequestEpic",(function(){return bh})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return yh})),n.d(f,"udcWithdrawPlannedEpic",(function(){return mh})),n.d(f,"msMonitorNewBPEpic",(function(){return hh}));var p=n("f633"),d=n.n(p),b=(n("3dfb"),n("f674"),n("8e94"),n("7e01")),y=n.n(b),m=n("89e6"),h=n("c8a0"),v=n("32f3"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("5ca1"),_=n("38dd"),k=n("f30a"),j=n("45c3"),E=n("d2b3"),T=n("ae32"),A=n("7082"),S=n.n(A),x=n("5fda"),N=n.n(x),D=n("2f73"),R=n("6649"),C=n("15f1"),I=n("1356"),P=n("fac5"),L=n("6452"),U=n("c159"),M=n("a334"),B=n("bf60"),F=n("911a"),W=n("eb0c"),$=n("fc62");function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}var K=function(){function e(){H(this,e)}return V(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,G,t)}}]),e}(),G=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var Q=function(){function e(){Z(this,e)}return Y(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}var ne=function(){function e(){z(this,e)}return te(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,re,t)}}]),e}(),re=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}var ce=function(){function e(){ae(this,e)}return ie(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,se,t)}}]),e}(),se=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}var pe=function(){function e(){ue(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,de,t)}}]),e}(),de=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}var he=function(){function e(){be(this,e)}return me(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ve,t)}}]),e}(),ve=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}var _e=function(){function e(){ge(this,e)}return we(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ke,t)}}]),e}(),ke=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t&&Ee(e.prototype,t),n&&Ee(e,n),e}var Ae,Se=function(){function e(){je(this,e)}return Te(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,xe,t)}}]),e}(),xe=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ne=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Ae||(Ae={}));var De,Re,Ce=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Ie=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(De||(De={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Re||(Re={}));var Pe=n("cc97"),Le=n("1788"),Ue=n.n(Le),Me=n("d567"),Be=n("47f9"),Fe=n("e244"),We=n("3bb1"),$e=n.n(We),He=n("a32b");function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e){return Je(e)||Qe(e)||Ye(e)||Xe()}function Xe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){if(e){if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}function Qe(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Je(e){if(Array.isArray(e))return ze(e)}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}function at(e){var t=ut();return function(){var n,r=pt(e);if(t){var a=pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?it(e):t}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){var t="function"===typeof Map?new Map:void 0;return ct=function(e){if(null===e||!lt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return st(e,arguments,pt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ft(n,e)},ct(e)}function st(e,t,n){return st=ut()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ft(o,n.prototype),o},st.apply(null,arguments)}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ft(e,t){return ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var dt=He,bt=Pe["p"](Pe["q"],Pe["v"]([Pe["q"],Pe["l"],Pe["d"],Pe["k"]])),yt=function(e){rt(n,e);var t=at(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return et(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(it(r),n.prototype),r}return nt(n,[{key:"code",get:function(){var e,t=this;return null!==(e=$e()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ct(Error));function mt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?st(yt,Ze(t)):new yt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var ht=Pe["h"]([Pe["t"]({name:Pe["q"]}),Pe["m"]({message:Pe["q"],stack:Pe["q"],details:bt})]),vt=new Pe["a"]("Error",(function(e){return"object"===Ge(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Fe["pipe"])(ht.decode(e),Object(Be["map"])((function(e){return"details"in e?Object.assign(new yt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Ve({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function gt(e){Me["ThrowReporter"].report(e)}function Ot(e,t,n,r){try{var a=e.decode(t);return gt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new yt(n):o}}function wt(e){return null!=e}var _t=new Pe["a"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){var n,r;if(_["BigNumber"].isBigNumber(e))return Pe["r"](e);try{return Pe["r"](Object(_["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Pe["f"](e,t)}}),(function(e){return e.toString()})),kt=N()((function(e){return Pe["e"](Pe["q"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),jt=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Pe["e"](_t,(function(e){return _t.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Et=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Pe["e"](_t,(function(e){return _t.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),Tt=kt(65),At=kt(32),St=kt(32),xt=kt(32),Nt=new Pe["a"]("Address",(function(e){try{return kt(20).is(e)&&Object(_["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!kt(20).is(e))return Pe["f"](e,t);var n;try{n=Object(_["getAddress"])(e)}catch(r){return Pe["f"](e,t)}return n?Pe["r"](n):Pe["f"](e,t)}),Pe["g"]),Dt=N()((function(e){return Pe["s"]([Pe["l"],e])}));function Rt(e){return[Date.now(),e]}var Ct=N()((function(e){return Pe["h"]([e,Pe["n"](Pe["t"]({signature:Tt}))])})),It=N()((function(e){return new Pe["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Pe["r"](t):Pe["f"](t,n)}),Pe["g"])}));function Pt(e){return e[e.length-1]}function Lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.lt(t)?t:e}))}var Ut=n("8590"),Mt=n("ddb3"),Bt=n("5b07"),Ft=n("3905"),Wt=n("c2dd"),$t=n("c5af");function Ht(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ht(o,r,a,i,c,"next",e)}function c(e){Ht(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Vt(e){return Xt(e)||Zt(e)||Gt(e)||Kt()}function Kt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gt(e,t){if(e){if("string"===typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(e,t):void 0}}function Zt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xt(e){if(Array.isArray(e))return Yt(e)}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(Mt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(P["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),en(e,"block")})).pipe(Object(Ft["a"])(Math.ceil(e.pollingInterval/10)),Object(Wt["a"])((function(n){return Object(P["a"])((function(){return e.getLogs(Jt(Jt({},t),{},{fromBlock:i[0],toBlock:n}))})).pipe(Object(W["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(Vt(e.map((function(e){return e.blockNumber})).filter(wt).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Bt["a"])(e)})),Object($t["a"])((function(){return L["a"]})))})))}function tn(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=Jt(Jt(Jt({},t),n),{},{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Vt(r),[a])}};return void 0!==t?n(t):n}function nn(e){return rn.apply(this,arguments)}function rn(){return rn=qt(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Ut["getNetwork"],e.t1=parseInt,e.next=4,t.send("net_version",[]);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function an(e){var t=e.send;e.send=function(){var n=qt(d.a.mark((function n(r,a){return d.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("eth_sign"!==r){n.next=2;break}return n.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch((function(n){if(n instanceof Error&&(n.message.includes("The method personal_sign does not exist")||n.message.includes("Method personal_sign not supported")))return e.send=t,e.send(r,a);throw n})));case 2:return n.abrupt("return",t.apply(this,[r,a]));case 3:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()}function on(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var cn,sn=Pe["n"](Pe["p"](Pe["q"],Pe["b"]));function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pn=Pe["t"]({urls:Pe["v"]([Pe["q"],Pe["c"](Pe["q"])])}),dn=Pe["n"](Pe["h"]([Pe["t"]({matrixServerLookup:Pe["q"],revealTimeout:Pe["l"],settleTimeout:Pe["l"],httpTimeout:Pe["l"],discoveryRoom:Pe["v"]([Pe["q"],Pe["k"]]),pfsRoom:Pe["v"]([Pe["q"],Pe["k"]]),monitoringRoom:Pe["v"]([Pe["q"],Pe["k"]]),pfs:Pe["v"]([Nt,Pe["q"],Pe["k"]]),pfsSafetyMargin:Pe["l"],pfsMaxPaths:Pe["l"],pfsMaxFee:Et(32),pfsIouTimeout:Pe["l"],matrixExcessRooms:Pe["l"],confirmationBlocks:Pe["l"],monitoringReward:Pe["v"]([Pe["k"],Et(32)]),logger:Pe["i"]((cn={},fn(cn,"",null),fn(cn,"trace",null),fn(cn,"debug",null),fn(cn,"info",null),fn(cn,"warn",null),fn(cn,"error",null),cn)),caps:Pe["v"]([Pe["k"],sn]),fallbackIceServers:Pe["c"](pn),rateToSvt:Pe["p"](Pe["q"],Et(32)),pollingInterval:Pe["l"],minimumAllowance:Et(32),autoSettle:Pe["d"]}),Pe["m"]({matrixServer:Pe["q"],subkey:Pe["d"]})])),bn=Pe["n"](Pe["m"](ln(ln({},dn.type.types["0"].props),dn.type.types["1"].props)));function yn(e,t){var n,r=e.network;return ln({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(on(r),"_discovery"),pfsRoom:"raiden_".concat(on(r),"_path_finding"),monitoringRoom:"raiden_".concat(on(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,pfsMaxPaths:3,pfsMaxFee:Object(_["parseEther"])("0.05"),pfsIouTimeout:2e5,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},fn(n,Re.NO_DELIVERY,!0),fn(n,Re.NO_MEDIATE,!0),fn(n,Re.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3,minimumAllowance:k["MaxUint256"],autoSettle:!1},t)}var mn=n("5dab"),hn=n.n(mn),vn=n("0cb5"),gn=n.n(vn),On=n("c72f"),wn=n.n(On),_n=n("5000"),kn=n.n(_n);function jn(e){return Sn(e)||An(e)||Tn(e)||En()}function En(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e,t){if(e){if("string"===typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function An(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Sn(e){if(Array.isArray(e))return xn(e)}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Dn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Nn(o,r,a,i,c,"next",e)}function c(e){Nn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){In(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Pe["t"](Cn(Cn(Cn({type:Pe["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Pe["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Cn({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Cn(Cn(Cn({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Un(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Pe["b"],c=Ln(t,a,e),s=Ln(n,o,e),u=Ln(r,i,e,!0);return{request:c,success:s,failure:u}}function Mn(e){var t=function(t){return kn()(t.meta,e,(function(e,t){return _t.is(e)&&_t.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Bn(e,t){var n=function(n){return Pn([e.success,e.failure],n)&&Mn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Fn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Bn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Wn(e,t,n){return $n.apply(this,arguments)}function $n(){return $n=Dn(d.a.mark((function e(t,n,r){var a,o=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",r.pipe(Object(F["a"])(a?Fn(t,n):Bn(t,n)),Object(M["a"])((function(e){var n;if(t.failure.is(e))throw e.payload;if(!1===(null===(n=e.payload)||void 0===n?void 0:n.confirmed))throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:e.payload.txHash});return e.payload}))).toPromise());case 2:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function Hn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return mt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(jn(a.map((function(e){return In({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var qn,Vn=Pe["q"],Kn=(Pe["q"],Pe["h"]([Pe["t"]({amount:Et(32),expiration:Et(32),secrethash:At}),Pe["m"]({registered:Pe["j"](!0)})],"Lock")),Gn=Pe["n"](Pe["t"]({chainId:Et(32),tokenNetworkAddress:Nt,channelId:Et(32),nonce:Et(8),transferredAmount:Et(32),lockedAmount:Et(32),locksroot:At,additionalHash:At})),Zn=Gn,Xn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Ie,additionalHash:k["HashZero"],signature:Ce},Yn=Pe["t"]({tokenNetwork:Nt,partner:Nt}),Qn=Ln("block/new",Pe["t"]({blockNumber:Pe["l"]})),Jn=Ln("token/monitored",Pe["h"]([Pe["t"]({token:Nt,tokenNetwork:Nt}),Pe["m"]({fromBlock:Pe["l"],toBlock:Pe["l"]})])),zn=Un(Yn,"channel/open/request","channel/open/success","channel/open/failed",Pe["m"]({settleTimeout:Pe["l"],subkey:Pe["d"],deposit:Et(32)}),Pe["t"]({id:Pe["l"],token:Nt,settleTimeout:Pe["l"],isFirstParticipant:Pe["d"],txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})),er=Ln("channel/monitored",Pe["t"]({id:Pe["l"]}),Yn),tr=Un(Yn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Pe["h"]([Pe["t"]({deposit:Et(32)}),Pe["m"]({subkey:Pe["d"],waitOpen:Pe["j"](!0)})]),Pe["t"]({id:Pe["l"],participant:Nt,totalDeposit:Et(32),txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})),nr=Ln("channel/withdraw/success",Pe["t"]({id:Pe["l"],participant:Nt,totalWithdraw:Et(32),txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])}),Yn),rr=Un(Yn,"channel/close/request","channel/close/success","channel/close/failure",Pe["v"]([Pe["m"]({subkey:Pe["d"]}),Pe["u"]]),Pe["t"]({id:Pe["l"],participant:Nt,txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})),ar=Ln("channel/settleable",Pe["t"]({settleableBlock:Pe["l"]}),Yn),or=Un(Yn,"channel/settle/request","channel/settle/success","channel/settle/failure",Pe["v"]([Pe["m"]({subkey:Pe["d"]}),Pe["u"]]),Pe["h"]([Pe["t"]({id:Pe["l"],txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])}),Pe["m"]({locks:Pe["o"](Kn)})])),ir=Pe["n"](Pe["t"]({userId:Pe["q"],accessToken:Pe["q"],deviceId:Pe["q"],displayName:Pe["q"]})),cr=Pe["t"]({address:Nt}),sr=Ln("matrix/setup",Pe["t"]({server:Pe["q"],setup:ir})),ur=Un(cr,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Pe["h"]([Pe["t"]({userId:Pe["q"],available:Pe["d"],ts:Pe["l"]}),Pe["m"]({caps:Pe["p"](Pe["q"],Pe["b"])})])),lr=Ln("matrix/room",Pe["t"]({roomId:Pe["q"]}),cr),fr=Ln("matrix/room/leave",Pe["t"]({roomId:Pe["q"]}),cr),pr=Ln("rtc/channel",Pe["v"]([Pe["u"],It(RTCDataChannel)]),cr);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(qn||(qn={}));var dr,br=Pe["n"](Pe["t"]({message_identifier:Et(8)})),yr=Pe["n"](Pe["t"]({type:Pe["j"](qn.DELIVERED),delivered_message_identifier:Et(8)})),mr=yr,hr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.PROCESSED)}),br])),vr=hr,gr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.SECRET_REQUEST),payment_identifier:Et(8),secrethash:At,amount:Et(32),expiration:Et(32)}),br])),Or=gr,wr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.SECRET_REVEAL),secret:St}),br])),_r=wr,kr=Pe["n"](Pe["h"]([Pe["t"]({chain_id:Et(32),token_network_address:Nt,channel_identifier:Et(32),nonce:Et(8),transferred_amount:Et(32),locked_amount:Et(32),locksroot:At}),br])),jr=Pe["n"](Pe["t"]({route:Pe["o"](Nt)})),Er=jr,Tr=Pe["n"](Pe["t"]({routes:Pe["o"](Er)})),Ar=Tr,Sr=Pe["n"](Pe["h"]([Pe["t"]({payment_identifier:Et(8),token:Nt,recipient:Nt,lock:Kn,target:Nt,initiator:Nt,metadata:Ar}),kr])),xr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.LOCKED_TRANSFER)}),Sr])),Nr=xr,Dr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.REFUND_TRANSFER)}),Sr])),Rr=Dr,Cr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.UNLOCK),payment_identifier:Et(8),secret:St}),kr])),Ir=Cr,Pr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.LOCK_EXPIRED),recipient:Nt,secrethash:At}),kr])),Lr=Pr,Ur=Pe["n"](Pe["t"]({chain_id:Et(32),token_network_address:Nt,channel_identifier:Et(32),participant:Nt,total_withdraw:Et(32),nonce:Et(8),expiration:Et(32)})),Mr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.WITHDRAW_REQUEST)}),Ur,br])),Br=Mr,Fr=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.WITHDRAW_CONFIRMATION)}),Ur,br])),Wr=Fr,$r=Pe["n"](Pe["h"]([Pe["t"]({type:Pe["j"](qn.WITHDRAW_EXPIRED)}),Ur,br])),Hr=$r,qr=Pe["n"](Pe["t"]({type:Pe["j"](qn.PFS_CAPACITY_UPDATE),canonical_identifier:Pe["n"](Pe["t"]({chain_identifier:Et(32),token_network_address:Nt,channel_identifier:Et(32)})),updating_participant:Nt,other_participant:Nt,updating_nonce:Et(8),other_nonce:Et(8),updating_capacity:Et(32),other_capacity:Et(32),reveal_timeout:Et(32)})),Vr=qr,Kr=Pe["n"](Pe["t"]({type:Pe["j"](qn.PFS_FEE_UPDATE),canonical_identifier:Pe["n"](Pe["t"]({chain_identifier:Et(32),token_network_address:Nt,channel_identifier:Et(32)})),updating_participant:Nt,timestamp:Pe["q"],fee_schedule:Pe["t"]({cap_fees:Pe["d"],imbalance_penalty:Pe["v"]([Pe["k"],Pe["c"](Pe["s"]([Et(32),jt(32)]))]),proportional:jt(32),flat:jt(32)})})),Gr=Kr,Zr=Pe["n"](Pe["t"]({type:Pe["j"](qn.MONITOR_REQUEST),balance_proof:Pe["t"]({chain_id:Et(32),token_network_address:Nt,channel_identifier:Et(32),nonce:Et(8),balance_hash:At,additional_hash:At,signature:Tt}),monitoring_service_contract_address:Nt,non_closing_participant:Nt,non_closing_signature:Tt,reward_amount:Et(32)})),Xr=Zr,Yr=[mr,vr,Or,_r,Nr,Rr,Ir,Lr,Br,Wr,Hr,Vr,Gr,Xr],Qr=Pe["v"]([].concat(Yr)),Jr=Un(Pe["t"]({address:Nt,msgId:Pe["q"]}),"message/send/request","message/send/success","message/send/failure",Pe["t"]({message:Pe["v"]([Pe["q"],Ct(Qr)])}),Pe["v"]([Pe["u"],Pe["t"]({via:Pe["q"]})])),zr=Ln("message/global/send",Pe["t"]({message:Pe["v"]([Pe["q"],Ct(Qr)])}),Pe["t"]({roomName:Pe["q"]})),ea=Ln("message/received",Pe["h"]([Pe["t"]({text:Pe["q"],ts:Pe["l"]}),Pe["m"]({message:Pe["v"]([Qr,Ct(Qr)]),userId:Pe["q"],roomId:Pe["q"]})]),Pe["t"]({address:Nt})),ta=n("48f2"),na=n.n(ta),ra=Pe["n"](Pe["h"]([Pe["t"]({result:Pe["c"](Pe["n"](Pe["t"]({path:Pe["o"](Nt),estimated_fee:jt(32)})))}),Pe["m"]({feedback_token:Pe["q"]})])),aa=Pe["c"](Pe["n"](Pe["t"]({path:Pe["o"](Nt),fee:jt(32)}))),oa=Pe["n"](Pe["t"]({address:Nt,url:Pe["q"],rtt:Pe["l"],price:Et(32),token:Nt})),ia=Pe["n"](Pe["t"]({sender:Nt,receiver:Nt,amount:Et(32),expiration_block:Et(32),one_to_n_address:Nt,chain_id:Et(32)})),ca=Pe["n"](Pe["t"]({last_iou:Ct(ia)})),sa={SENT:"sent",RECEIVED:"received"},ua=Pe["n"](Pe["h"]([Pe["t"]({transfer:Dt(Ct(Nr)),fee:jt(32),partner:Nt}),Pe["m"]({secret:Dt(Pe["t"]({value:St,registerBlock:Pe["l"]})),transferProcessed:Dt(Ct(vr)),refund:Dt(Ct(Rr)),channelClosed:Dt(At),secretRequest:Dt(Ct(Or)),secretReveal:Dt(Ct(_r)),unlock:Dt(Ct(Ir)),lockExpired:Dt(Ct(Lr)),unlockProcessed:Dt(Ct(vr)),lockExpiredProcessed:Dt(Ct(vr))})])),la=ua,fa=Pe["n"](Pe["p"](Pe["q"],la));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(dr||(dr={}));var pa=Pe["i"](na()(sa)),da=Pe["t"]({secrethash:At,direction:pa}),ba=Un(da,"transfer/request","transfer/success","transfer/failure",Pe["h"]([Pe["t"]({tokenNetwork:Nt,target:Nt,value:Et(32),paths:aa,paymentId:Et(8)}),Pe["m"]({secret:St,expiration:Pe["l"],initiator:Nt})]),Pe["m"]({balanceProof:Ct(Zn)})),ya=Ln("transfer/signed",Pe["t"]({message:Ct(Nr),fee:jt(32),partner:Nt}),da),ma=Ln("transfer/processed",Pe["t"]({message:Ct(vr)}),da),ha=Ln("transfer/secret",Pe["t"]({secret:St}),da),va=Un(da,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Pe["h"]([Pe["t"]({secret:St}),Pe["m"]({subkey:Pe["d"]})]),Pe["t"]({secret:St,txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})),ga=Ln("transfer/secret/request",Pe["t"]({message:Ct(Or)}),da),Oa=Ln("transfer/secret/reveal",Pe["t"]({message:Ct(_r)}),da),wa=Un(da,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Pe["t"]({message:Ct(Ir),partner:Nt})),_a=Ln("transfer/unlock/processed",Pe["t"]({message:Ct(vr)}),da),ka=Un(da,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Pe["t"]({message:Ct(Lr),partner:Nt})),ja=Ln("transfer/expire/processed",Pe["t"]({message:Ct(vr)}),da),Ea=Ln("transfer/refunded",Pe["t"]({message:Ct(Rr),partner:Nt}),da),Ta=Pe["t"]({direction:pa,tokenNetwork:Nt,partner:Nt,totalWithdraw:Et(32),expiration:Pe["l"]}),Aa=Un(Ta,"withdraw/request","withdraw/success","withdraw/failure",Pe["u"],Pe["t"]({txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})),Sa=Un(Ta,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Pe["t"]({message:Ct(Br)}),Pe["t"]({message:Ct(Wr)})),xa=Un(Ta,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Pe["u"],Pe["t"]({message:Ct(Hr)})),Na=Ln("withdraw/completed",Pe["u"],Ta),Da=Pe["t"]({tokenNetwork:Nt,target:Nt,value:Et(32)}),Ra=Pe["t"]({tokenNetwork:Nt,serviceAddress:Nt}),Ca=Un(Da,"path/find/request","path/find/success","path/find/failure",Pe["m"]({paths:aa,pfs:Pe["v"]([oa,Pe["k"]])}),Pe["t"]({paths:aa})),Ia=Ln("pfs/list/updated",Pe["t"]({pfsList:Pe["o"](Nt)})),Pa=Ln("iou/persist",Pe["t"]({iou:Ct(ia)}),Ra),La=Ln("iou/clear",void 0,Ra),Ua=Un(Pe["t"]({totalDeposit:Et(32)}),"udc/deposit/request","udc/deposit/success","udc/deposit/failure",Pe["h"]([Pe["t"]({deposit:Et(32)}),Pe["m"]({subkey:Pe["d"]})]),Pe["v"]([Pe["u"],Pe["t"]({txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})])),Ma=Pe["t"]({amount:Et(32)}),Ba=Un(Ma,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Pe["u"],Pe["h"]([Pe["t"]({block:Pe["l"]}),Pe["m"]({txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])})])),Fa=Ln("udc/withdrawn",Pe["t"]({withdrawal:Et(32),txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])}),Ma),Wa=Ln("ms/balanceProof/sent",Pe["t"]({tokenNetwork:Nt,partner:Nt,id:Pe["l"],reward:Et(32),nonce:Et(8),monitoringService:Nt,txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])}));function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){qa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Va=Ln("raiden/shutdown",Pe["t"]({reason:Pe["v"]([Pe["j"](De.STOP),Pe["j"](De.ACCOUNT_CHANGED),Pe["j"](De.NETWORK_CHANGED),vt])})),Ka=Ln("raiden/config/update",bn),Ga=Ha(Ha(Ha(Ha(Ha({raidenShutdown:Va,raidenConfigUpdate:Ka},r),a),o),i),c),Za=[Ga.raidenShutdown,Ga.newBlock,Ga.matrixPresence.success,Ga.tokenMonitored,Ga.udcWithdrawn,Ga.udcWithdraw.failure,Ga.msBalanceProofSent,Ga.channelSettle.success,Ga.channelSettle.failure],Xa=wn()(Ga,(function(e,t){return Ha(Ha({},e),"type"in t?qa({},t.type,t):hn()(t,gn()("type")))}),{}),Ya=Pe["n"](Pe["t"]({type:Pe["q"],payload:Pe["n"](Pe["t"]({txHash:At,txBlock:Pe["l"],confirmed:Pe["v"]([Pe["u"],Pe["d"]])}))})),Qa=new Pe["a"]("ConfirmableAction",Ya.is,(function(e,t){return Be["either"].chain(Ya.validate(e,t),(function(e){var n=e.type;return n in Xa?Xa[n].codec.validate(e,t):Pe["f"](e,t)}))}),(function(e){return Xa[e.type].codec.encode(e)}));function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e){return za(za({},e),{},{version:0})}function no(e,t){return co(e)||io(e,t)||ao(e,t)||ro()}function ro(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ao(e,t){if(e){if("string"===typeof e)return oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(e,t):void 0}}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function io(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function co(e){if(Array.isArray(e))return e}function so(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=no(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function uo(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var lo=n("77a9"),fo=n("2cb6");function po(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(lo["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(lo["isArrayish"])(e)&&(e=Object(lo["hexlify"])(e)),_t.is(e)){if(e.lt(0))throw new yt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new yt(dt.DTA_NUMBER_TOO_LARGE);n=Object(lo["hexZeroPad"])(Object(lo["hexlify"])(e),t)}else{if("string"!==typeof e)throw new yt(dt.DTA_UNENCODABLE_DATA);if(Object(lo["hexDataLength"])(e)!==t)throw new yt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var bo,yo=JSON.parse,mo=JSON.stringify;function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){_o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function go(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Oo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){go(o,r,a,i,c,"next",e)}function c(e){go(o,r,a,i,c,"throw",e)}i(void 0)}))}}function wo(e){return wo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ko,jo,Eo=(bo={},_o(bo,qn.DELIVERED,12),_o(bo,qn.PROCESSED,0),_o(bo,qn.SECRET_REQUEST,3),_o(bo,qn.SECRET_REVEAL,11),_o(bo,qn.LOCKED_TRANSFER,7),_o(bo,qn.REFUND_TRANSFER,8),_o(bo,qn.UNLOCK,4),_o(bo,qn.LOCK_EXPIRED,13),_o(bo,qn.WITHDRAW_REQUEST,15),_o(bo,qn.WITHDRAW_CONFIRMATION,16),_o(bo,qn.WITHDRAW_EXPIRED,17),_o(bo,qn.PFS_CAPACITY_UPDATE,-1),_o(bo,qn.PFS_FEE_UPDATE,-1),_o(bo,qn.MONITOR_REQUEST,-1),bo);function To(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function Ao(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Ie)?k["HashZero"]:Object(_["keccak256"])(Object(lo["concat"])([po(t,32),po(n,32),po(r,32)]))}function So(e){switch(e.type){case qn.LOCKED_TRANSFER:case qn.REFUND_TRANSFER:var t=Object(lo["concat"])([po(Eo[e.type],1),po(e.message_identifier,8),po(e.payment_identifier,8),po(e.lock.expiration,32),po(e.token,20),po(e.recipient,20),po(e.target,20),po(e.initiator,20),po(e.lock.secrethash,32),po(e.lock.amount,32)]);return e.type===qn.LOCKED_TRANSFER&&(t=Object(lo["concat"])([t,To(e.metadata)])),Object(_["keccak256"])(t);case qn.UNLOCK:return Object(_["keccak256"])(Object(lo["concat"])([po(Eo[e.type],1),po(e.message_identifier,8),po(e.payment_identifier,8),po(e.secret,32)]));case qn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(lo["concat"])([po(Eo[e.type],1),po(e.message_identifier,8),po(e.recipient,20),po(e.secrethash,32)]))}}function xo(e){var t;switch(e.type){case qn.DELIVERED:return Object(lo["hexlify"])(Object(lo["concat"])([po(Eo[e.type],1),po(0,3),po(e.delivered_message_identifier,8)]));case qn.PROCESSED:return Object(lo["hexlify"])(Object(lo["concat"])([po(Eo[e.type],1),po(0,3),po(e.message_identifier,8)]));case qn.LOCKED_TRANSFER:case qn.REFUND_TRANSFER:case qn.UNLOCK:case qn.LOCK_EXPIRED:var n=So(e),r=Ao({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(lo["hexlify"])(Object(lo["concat"])([po(e.token_network_address,20),po(e.chain_id,32),po(ko.BALANCE_PROOF,32),po(e.channel_identifier,32),po(r,32),po(e.nonce,32),po(n,32)]));case qn.SECRET_REQUEST:return Object(lo["hexlify"])(Object(lo["concat"])([po(Eo[e.type],1),po(0,3),po(e.message_identifier,8),po(e.payment_identifier,8),po(e.secrethash,32),po(e.amount,32),po(e.expiration,32)]));case qn.SECRET_REVEAL:return Object(lo["hexlify"])(Object(lo["concat"])([po(Eo[e.type],1),po(0,3),po(e.message_identifier,8),po(e.secret,32)]));case qn.WITHDRAW_REQUEST:case qn.WITHDRAW_CONFIRMATION:return Object(lo["hexlify"])(Object(lo["concat"])([po(e.token_network_address,20),po(e.chain_id,32),po(ko.WITHDRAW,32),po(e.channel_identifier,32),po(e.participant,20),po(e.total_withdraw,32),po(e.expiration,32)]));case qn.WITHDRAW_EXPIRED:return Object(lo["hexlify"])(Object(lo["concat"])([po(Eo[e.type],1),po(0,3),po(e.nonce,32),po(e.message_identifier,8),po(e.token_network_address,20),po(e.chain_id,32),po(ko.WITHDRAW,32),po(e.channel_identifier,32),po(e.participant,20),po(e.total_withdraw,32),po(e.expiration,32)]));case qn.PFS_CAPACITY_UPDATE:return Object(lo["hexlify"])(Object(lo["concat"])([po(e.canonical_identifier.chain_identifier,32),po(e.canonical_identifier.token_network_address,20),po(e.canonical_identifier.channel_identifier,32),po(e.updating_participant,20),po(e.other_participant,20),po(e.updating_nonce,8),po(e.other_nonce,8),po(e.updating_capacity,32),po(e.other_capacity,32),po(e.reveal_timeout,32)]));case qn.PFS_FEE_UPDATE:return Object(lo["hexlify"])(Object(lo["concat"])([po(e.canonical_identifier.chain_identifier,32),po(e.canonical_identifier.token_network_address,20),po(e.canonical_identifier.channel_identifier,32),po(e.updating_participant,20),po(e.fee_schedule.cap_fees,1),po(e.fee_schedule.flat,32),po(e.fee_schedule.proportional,32),Object(fo["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),po(e.timestamp,19)]));case qn.MONITOR_REQUEST:return Object(lo["hexlify"])(Object(lo["concat"])([po(e.monitoring_service_contract_address,20),po(e.balance_proof.chain_id,32),po(ko.MS_REWARD,32),po(e.balance_proof.token_network_address,20),po(e.non_closing_participant,20),po(e.non_closing_signature,65),po(e.reward_amount,32)]))}}function No(e){return Tt.is(e.signature)}function Do(e){return Object(_["verifyMessage"])(Object(lo["arrayify"])(xo(e)),e.signature)}function Ro(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:So(e),signature:e.signature}}function Co(e){return mo("signature"in e?Ct(Qr).encode(e):Qr.encode(e))}function Io(e){var t=yo(e);return mt(t&&"object"===wo(t)&&"type"in t&&Object.values(qn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Ot("signature"in t?Ct(Qr):Qr,t)}function Po(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=Oo(d.a.mark((function e(t,n){var r,a,o,i=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{log:y.a},a=r.log,!No(n)){e.next=3;break}return e.abrupt("return",n);case 3:return a.debug('Signing message "'.concat(n.type,'"'),n),e.next=6,t.signMessage(Object(lo["arrayify"])(xo(n)));case 6:return o=e.sent,e.abrupt("return",vo(vo({},n),{},{signature:o}));case 8:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Uo(e){return function(t){return ea.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(ko||(ko={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(jo||(jo={}));var Mo=Pe["n"](Pe["t"]({address:Nt,deposit:Et(32),withdraw:Et(32),locks:Pe["o"](Kn),balanceProof:Ct(Zn),pendingWithdraws:Pe["o"](Pe["v"]([Ct(Br),Ct(Wr),Ct(Hr)])),nextNonce:Et(8)})),Bo=Mo,Fo=Pe["h"]([Pe["n"](Pe["t"]({id:Pe["l"],token:Nt,tokenNetwork:Nt,settleTimeout:Pe["l"],isFirstParticipant:Pe["d"],openBlock:Pe["l"],own:Bo,partner:Bo})),Pe["v"]([Pe["n"](Pe["t"]({state:Pe["v"]([Pe["j"](jo.open),Pe["j"](jo.closing)])})),Pe["h"]([Pe["n"](Pe["t"]({closeBlock:Pe["l"],closeParticipant:Nt})),Pe["v"]([Pe["n"](Pe["t"]({state:Pe["v"]([Pe["j"](jo.closed),Pe["j"](jo.settleable),Pe["j"](jo.settling)])})),Pe["n"](Pe["t"]({state:Pe["j"](jo.settled),settleBlock:Pe["l"]}))])])])]);function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){return Go(e)||Ko(e,t)||qo(e,t)||Ho()}function Ho(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qo(e,t){if(e){if("string"===typeof e)return Vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vo(e,t):void 0}}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ko(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Go(e){if(Array.isArray(e))return e}function Zo(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=$o(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:Xn,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function Xo(e){for(var t,n={},r=function(){for(var t=$o(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=$o(s[c],2),l=u[0],f=u[1];Zo(f,{own:e.address,partner:l});var p=$e()(e.tokens,(function(e){return e===r}));Object.assign(f,{token:p,tokenNetwork:r}),Object.assign(n,Wo({},"".concat(l,"@").concat(r),f))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function Yo(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Qo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Qo(e,t){if(e){if("string"===typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jo(e,t):void 0}}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zo(e){var t,n=Yo(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(_["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}function ei(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ti(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ti(e,t){if(e){if("string"===typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e){var t,n=ei(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{pendingWithdraws:r[i].withdrawRequests}),delete r[i].withdrawRequests}}catch(c){n.e(c)}finally{n.f()}return e}var ai=[to,so,uo,Xo,zo,ri],oi=ai.length-1;function ii(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(ai[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}function ci(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function si(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ci(o,r,a,i,c,"next",e)}function c(e){ci(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){fi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pi=Pe["n"](Pe["t"]({address:Nt,version:Pe["j"](oi),chainId:Pe["l"],registry:Nt,blockNumber:Pe["l"],config:bn,channels:Pe["n"](Pe["p"](Vn,Fo)),oldChannels:Pe["n"](Pe["p"](Pe["q"],Fo)),tokens:Pe["n"](Pe["p"](Pe["q"],Nt)),transport:Pe["n"](Pe["m"]({server:Pe["q"],setup:ir,rooms:Pe["n"](Pe["p"](Pe["q"],Pe["c"](Pe["q"])))})),sent:fa,received:fa,iou:Pe["n"](Pe["p"](Pe["q"],Pe["p"](Pe["q"],Ct(ia)))),pendingTxs:Pe["o"](Qa)})),di=pi;function bi(e){return mo(di.encode(e),void 0,2)}function yi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=yo(e));var r=ii(e,oi,{log:n});try{return Ot(di,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function mi(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return li({address:n,version:oi,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var hi=mi({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0},OneToN:{address:k["AddressZero"],block_number:0}}}),vi=function(e){return e&&"function"===typeof e.getItem},gi=function(){var e=si(d.a.mark((function e(t,n,r,a,o){var i,c,s,u,l,f,p,b,m,h,v;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=y.a.getLogger("raiden:".concat(r)),vi(a)?(u=a,l=void 0):vi(null===a||void 0===a?void 0:a.storage)?(u=a.storage,l=a.state):(u=void 0,l=a),f=void 0,l&&(f=yi(l,{log:i})),!u){e.next=23;break}return p="raiden_".concat(on(t),"_").concat(n.TokenNetworkRegistry.address,"_").concat(r),e.next=8,u.getItem(p);case 8:if(b=e.sent,!b){e.next=20;break}if(m=yi(b,{log:i}),!f){e.next=19;break}if(!(f.blockNumber<m.blockNumber)){e.next=16;break}throw new yt(dt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:f.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(f.blockNumber));case 17:e.next=20;break;case 19:f=m;case 20:h=Ue()((function(e){u.setItem(p,bi(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return f||(f=mi({network:t,address:r,contractsInfo:n})),v=yn({network:t},o),e.abrupt("return",{state:f,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Oi=n("07ae"),wi=n.n(Oi);function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=ki(ki({},r),{},ji({},o,s)))}}return r}}var Ti=n("5a76"),Ai=n("c77a"),Si=n("4045"),xi=n("1471"),Ni=n("5a1b"),Di=n("394b"),Ri=n("cbd9"),Ci=n("6ad5"),Ii=n("4dc1"),Pi=n("677b"),Li=n("c472"),Ui=n("01d4"),Mi=n("1c3a"),Bi=n("eab5");function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){$i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hi(e,t){return Zi(e)||Gi(e,t)||Vi(e,t)||qi()}function qi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vi(e,t){if(e){if("string"===typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ki(e,t):void 0}}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zi(e){if(Array.isArray(e))return e}var Xi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(Ni["a"].apply(void 0,t),Object(Pi["a"])())}};function Yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(Pi["a"])(),Object(W["a"])((function(e){return Object(Ii["a"])(e)})),Object(Li["a"])((function(t,n){var r=t.acc,a=Hi(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Wi(Wi({},r),{},$i({},o,i)),changed:[o,i]}}),{acc:{}}),Object(Ni["a"])("changed"),Object(B["a"])(wt))}}function Qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(Ui["a"])((function(e){return e.pipe(Object(M["a"])((function(){if("number"===typeof t)return t;var e=t.next();return e.done?-1:e.value})),Object(Mi["a"])((function(e){return e>=0})),Object(Bi["a"])((function(e){return Object(Ti["a"])(e)})))})),Object(Ri["a"])(e))}}function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(P["a"])(e).pipe(Object(xi["a"])((function(e){return e.pipe(Object(W["a"])((function(e,r){return n(e,r)?Object(Ai["a"])(e):Object(Ti["a"])(t)})))})))}function zi(e,t){return nc(e)||tc(e,t)||cc(e,t)||ec()}function ec(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nc(e){if(Array.isArray(e))return e}function rc(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ac(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){rc(o,r,a,i,c,"next",e)}function c(e){rc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function oc(e){return uc(e)||sc(e)||cc(e)||ic()}function ic(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cc(e,t){if(e){if("string"===typeof e)return lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lc(e,t):void 0}}function sc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function uc(e){if(Array.isArray(e))return lc(e)}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fc(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function pc(e){return"".concat(e.id,"#").concat(fc(e))}function dc(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),f=s.sub(c),p=c.sub(s),d=Lt.apply(void 0,[t].concat(oc(e.own.pendingWithdraws.filter((function(e){return e.type===qn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Lt.apply(void 0,[n].concat(oc(e.partner.pendingWithdraws.filter((function(e){return e.type===qn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(d).sub(u).add(f),m=e.partner.deposit.sub(b).sub(l).add(p),h=e.own.deposit.add(f).sub(u),v=h.sub(t),g=e.partner.deposit.add(p).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:f,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:p,partnerCapacity:m,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:h,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function bc(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Si["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object(W["a"])(function(){var e=ac(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.wait();case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(n){var a,o,i,c=zi(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new yt(t,{status:null!==(a=u.status)&&void 0!==a?a:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var yc=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],mc=["always failing transaction","execution failed due to an exception","transaction failed"];function hc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:y.a},a=r.log;return function(r){return r.pipe(Object(xi["a"])((function(r){return r.pipe(Object(W["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t,n;return null===(n=null===(t=r.message)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,e)}))?Object(Ti["a"])(e):Object(Ai["a"])(r)})))})))}}function vc(e){return e.pipe(Object(Ni["a"])("channels"),Yi(),Object(Ni["a"])(1),Object(Di["a"])(pc,void 0,void 0,(function(){return new D["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=zi(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(Ri["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function gc(e,t,n){var r=zi(e,3),a=r[0],o=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dt.RDN_APPROVE_TRANSACTION_FAILED,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a,minimumAllowance:k["Zero"]},u=s.log,l=s.minimumAllowance;if(mt(a.gte(i),[dt.RDN_INSUFFICIENT_BALANCE,{current:a.toString(),required:i.toString()}]),o.gte(i))return Object(C["a"])(!0);var f=Object(C["a"])(!0);return o.isZero()||(f=Object(P["a"])((function(){return t.functions.approve(n,0)})).pipe(bc("approve",c,{log:u}),Object(Ci["a"])(!0))),f.pipe(Object(W["a"])((function(){return t.functions.approve(n,Lt(l,i))})),bc("approve",c,{log:u}),Object(Ni["a"])(1))}function Oc(e){return Oc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(e)}function wc(e,t){if(null==e)return{};var n,r,a=_c(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _c(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function kc(e){var t=jc(e,"string");return"symbol"===Oc(t)?t:String(t)}function jc(e,t){if("object"!==Oc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ec(e,t){return Sc(e)||Ac(e,t)||Dc(e,t)||Tc()}function Tc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ac(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sc(e){if(Array.isArray(e))return e}function xc(e){return Cc(e)||Rc(e)||Dc(e)||Nc()}function Nc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dc(e,t){if(e){if("string"===typeof e)return Ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ic(e,t):void 0}}function Rc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Cc(e){if(Array.isArray(e))return Ic(e)}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(n),!0).forEach((function(t){Uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mc(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Bc=Hn(hi.blockNumber).handle(Qn,(function(e,t){Mc(e);var n=t.payload;return n.blockNumber})),Fc=Hn(hi.tokens).handle(Jn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:Lc(Lc({},e),{},Uc({},r,a))}));function Wc(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var $c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Qa.is(t)){if(void 0===t.payload.confirmed)return[].concat(xc(Wc(e,t)),[t]);var n=Wc(e,t);return n.length!==e.length?n:e}return e},Hc={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:Xn,pendingWithdraws:[],nextNonce:k["One"]};function qc(e,t){var n,r,a=fc(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:jo.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Lc(Lc({},Hc),{},{address:e.address}),partner:Lc(Lc({},Hc),{},{address:t.meta.partner})};return Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},a,i))})}function Vc(e,t){var n;if(!t.payload.confirmed)return e;var r=fc(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==jo.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=nr.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=Ec(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Lc(Lc({},a),{},Uc({},o,Lc(Lc({},a[o]),{},(n={},Uc(n,s,u),Uc(n,"pendingWithdraws",l),n)))),Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},r,a))}))}function Kc(e,t){var n=fc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===jo.open)r=Lc(Lc({},r),{},{state:jo.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Lc(Lc({},r),{},{state:jo.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},n,r))})}function Gc(e,t){var n=fc(t.meta),r=e.channels[n];if(!r)return e;if(rr.request.is(t)&&r.state===jo.open)r=Lc(Lc({},r),{},{state:jo.closing});else if(or.request.is(t)&&r.state===jo.settleable)r=Lc(Lc({},r),{},{state:jo.settling});else{if(!ar.is(t)||r.state!==jo.closed)return e;r=Lc(Lc({},r),{},{state:jo.settleable})}return Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},n,r))})}function Zc(e,t){var n=fc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==jo.settling)return Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},n,Lc(Lc({},r),{},{state:jo.settling})))});if(t.payload.confirmed){var a=e.channels,o=(a[n],wc(a,[n].map(kc)));return Lc(Lc({},e),{},{channels:o,oldChannels:Lc(Lc({},e.oldChannels),{},Uc({},pc(r),Lc(Lc({},r),{},{state:jo.settled,settleBlock:t.payload.txBlock})))})}return e}function Xc(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=fc({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===sa.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Lc(Lc({},e),{},{channels:Lc(Lc({},e.channels),{},Uc({},a,Lc(Lc({},e.channels[a]),{},Uc({},o,Lc(Lc({},e.channels[a][o]),{},{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Lc(Lc({},e),{},{registered:!0})}))})))))}):e}var Yc=Hn(hi).handle(zn.success,qc).handle([tr.success,nr],Vc).handle([rr.request,ar,or.request],Gc).handle(rr.success,Kc).handle(or.success,Zc).handle(va.success,Xc),Qc=Ei({blockNumber:Bc,tokens:Fc,pendingTxs:$c},hi),Jc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,t=arguments.length>1?arguments[1]:void 0;return[Qc,Yc].reduce((function(e,n){return n(e,t)}),e)},zc=Jc;function es(e){return as(e)||rs(e)||ns(e)||ts()}function ts(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ns(e,t){if(e){if("string"===typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?os(e,t):void 0}}function rs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function as(e){if(Array.isArray(e))return os(e)}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function us(e,t){if(null==e)return{};var n,r,a=ls(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ls(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var fs,ps=Hn(hi.transport).handle(sr,(function(e,t){e.rooms;var n=us(e,["rooms"]);return cs(cs({},e.server!==t.payload.server?n:e),t.payload)})).handle(lr,(function(e,t){var n,r;return cs(cs({},e),{},{rooms:cs(cs({},e.rooms),{},ss({},t.meta.address,[t.payload.roomId].concat(es((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(fr,(function(e,t){var n,r;return cs(cs({},e),{},{rooms:cs(cs({},e.rooms),{},ss({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),ds=Ei({transport:ps},hi),bs=ds;function ys(e){return vs(e)||hs(e)||ws(e)||ms()}function ms(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function vs(e){if(Array.isArray(e))return _s(e)}function gs(e,t){return js(e)||ks(e,t)||ws(e,t)||Os()}function Os(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ws(e,t){if(e){if("string"===typeof e)return _s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_s(e,t):void 0}}function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ks(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function js(e){if(Array.isArray(e))return e}function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){As(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function As(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ss=(fs={},As(fs,sa.SENT,"own"),As(fs,sa.RECEIVED,"partner"),fs);function xs(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=va.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Ts(Ts({},e),{},As({},t.meta.direction,Ts(Ts({},e[t.meta.direction]),{},As({},s,Ts(Ts({},e[t.meta.direction][s]),{},{secret:Rt({value:t.payload.secret,registerBlock:u})})))))),e}function Ns(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=fc({tokenNetwork:a,partner:o}),c=Ss[t.meta.direction],s=e.channels[i];if(ya.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==jo.open||!n.nonce.eq(s[c].nextNonce))return e;var u=ya.is(t)?[[].concat(ys(s[c].locks),[t.payload.message.lock]),{transfer:Rt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Ts(Ts({},e[t.meta.direction][r]),{},As({},wa.success.is(t)?"unlock":"lockExpired",Rt(t.payload.message)))],l=gs(u,2),f=l[0],p=l[1];return s=Ts(Ts({},s),{},As({},c,Ts(Ts({},s[c]),{},{locks:f,balanceProof:Ro(n),nextNonce:s[c].nextNonce.add(1)}))),Ts(Ts({},e),{},As({channels:Ts(Ts({},e.channels),{},As({},i,s))},t.meta.direction,Ts(Ts({},e[t.meta.direction]),{},As({},r,p))))}function Ds(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Ts(Ts({},e),{},As({},t.meta.direction,Ts(Ts({},e[t.meta.direction]),{},As({},n,Ts(Ts({},e[t.meta.direction][n]),{},{secretRequest:Rt(t.payload.message)}))))):e}function Rs(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Ts(Ts({},e),{},As({},t.meta.direction,Ts(Ts({},e[t.meta.direction]),{},As({},n,Ts(Ts({},e[t.meta.direction][n]),{},{secretReveal:Rt(t.payload.message)})))))}function Cs(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(ma.is(t))n="transferProcessed";else if(_a.is(t))n="unlockProcessed";else if(ja.is(t))n="lockExpiredProcessed";else{if(!Ea.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Ts(Ts({},e),{},As({},t.meta.direction,Ts(Ts({},e[t.meta.direction]),{},As({},r,Ts(Ts({},e[t.meta.direction][r]),{},As({},n,Rt(t.payload.message)))))))}function Is(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=gs(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Ts(Ts({},n),{},As({},i,Ts(Ts({},c),{},{channelClosed:Rt(t.payload.txHash)}))))}n!==e.sent&&(e=Ts(Ts({},e),{},{sent:n}));for(var u=e.received,l=0,f=Object.entries(u);l<f.length;l++){var p=gs(f[l],2),d=p[0],b=p[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Ts(Ts({},u),{},As({},d,Ts(Ts({},b),{},{channelClosed:Rt(t.payload.txHash)}))))}return u!==e.received&&(e=Ts(Ts({},e),{},{received:u})),e}function Ps(e,t){var n=t.payload.message,r=fc(t.meta),a=e.channels[r],o=t.meta.direction===sa.RECEIVED!==Sa.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==jo.open||!n.nonce.eq(a[o].nextNonce))return e;a=Ts(Ts({},a),{},As({},o,Ts(Ts({},a[o]),{},{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===sa.RECEIVED?"partner":"own",c=[].concat(ys(a[i].pendingWithdraws),[t.payload.message]);return a=Ts(Ts({},a),{},As({},i,Ts(Ts({},a[i]),{},{pendingWithdraws:c}))),Ts(Ts({},e),{},{channels:Ts(Ts({},e.channels),{},As({},r,a))})}function Ls(e,t){var n=fc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==jo.open)return e;var a=t.meta.direction===sa.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Ts(Ts({},r),{},As({},a,Ts(Ts({},r[a]),{},{pendingWithdraws:o}))),Ts(Ts({},e),{},{channels:Ts(Ts({},e.channels),{},As({},n,r))})}var Us=Hn(hi).handle([ha,va.success],xs).handle([ya,wa.success,ka.success],Ns).handle([ma,_a,ja,Ea],Cs).handle(ga,Ds).handle(Oa,Rs).handle(rr.success,Is).handle([Sa.request,Sa.success,xa.success],Ps).handle(Na,Ls),Ms=Us;function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){Ws(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $s=Hn(hi.iou).handle(Pa,(function(e,t){return Fs(Fs({},e),{},Ws({},t.meta.tokenNetwork,Fs(Fs({},e[t.meta.tokenNetwork]),{},Ws({},t.meta.serviceAddress,t.payload.iou))))})).handle(La,(function(e,t){return wi()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),Hs=Ei({iou:$s},hi),qs=Hs;function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach((function(t){Gs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zs(e,t){return zs(e)||Js(e,t)||Ys(e,t)||Xs()}function Xs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ys(e,t){if(e){if("string"===typeof e)return Qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qs(e,t):void 0}}function Qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Js(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zs(e){if(Array.isArray(e))return e}var eu=Hn(hi).handle(Ka,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=Zs(o[a],2),c=i[0],s=i[1];void 0!==s?r=Ks(Ks({},r),{},Gs({},c,s)):c in r&&(r=wi()(c,r))}return r===e.config?e:Ks(Ks({},e),{},{config:r})})),tu={configReducer:eu,channelsReducer:zc,transportReducer:bs,transfersReducer:Ms,servicesReducer:qs},nu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,t=arguments.length>1?arguments[1]:void 0;return Object.values(tu).reduce((function(e,n){return n(e,t)}),e)},ru=n("5255"),au=n("0241"),ou=n("8b25"),iu=n("8b2d"),cu=n.n(iu),su=n("8265"),uu=n.n(su),lu=n("e3b7");function fu(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=bu(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function pu(e,t){return hu(e)||mu(e,t)||bu(e,t)||du()}function du(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bu(e,t){if(e){if("string"===typeof e)return yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yu(e,t):void 0}}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hu(e){if(Array.isArray(e))return e}function vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(n),!0).forEach((function(t){Ou(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wu=N()((function(e){return e.pipe(Object(B["a"])(ur.success.is),Object(Li["a"])((function(e,t){return gu(gu({},e),{},Ou({},t.meta.address,t))}),{}),Object(lu["a"])(),Object(ou["a"])({}))}));function _u(e){return Object.entries(e).filter((function(e){var t=pu(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=pu(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function ku(e){var t;if(e){var n={};try{var r,a=fu(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var ju,Eu=n("c3a3"),Tu=n("f4aa"),Au=n("a4c3"),Su=n("a8f8"),xu=n("ad8d"),Nu=n("9b17"),Du=n("d67f"),Ru=n("222f"),Cu=n("dcca"),Iu=n("be1d"),Pu=n("2f60"),Lu=n.n(Pu),Uu=n("b104"),Mu=n.n(Uu),Bu=n("3de0"),Fu=n("7a10");function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $u(e,t){return Vu(e)||qu(e,t)||Gu(e,t)||Hu()}function Hu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vu(e){if(Array.isArray(e))return e}function Ku(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Gu(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Gu(e,t){if(e){if("string"===typeof e)return Zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zu(e,t):void 0}}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xu(e){var t,n=[],r=Ku(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(po(a.expiration,32),po(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(lo["concat"])(n))}function Yu(e){return Object(_["sha256"])(e)}function Qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(lo["hexlify"])(Object(_["randomBytes"])(e))}function Ju(){return Object(_["bigNumberify"])(Date.now())}function zu(){return Object(_["bigNumberify"])(Date.now())}function el(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?sa.SENT:sa.RECEIVED}function tl(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(el(e),":").concat(e.transfer[1].lock.secrethash)}var nl=new RegExp("^(".concat(Object.values(sa).join("|"),"):0x[a-z0-9]{64}$"),"i");function rl(e){mt(nl.test(e),"Invalid transferKey format");var t=e.split(":"),n=$u(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function al(e){return function(t){return t[e]?t[e][0]:void 0}}var ol=(ju={},Wu(ju,dr.expired,al("lockExpiredProcessed")),Wu(ju,dr.unlocked,al("unlockProcessed")),Wu(ju,dr.expiring,al("lockExpired")),Wu(ju,dr.unlocking,al("unlock")),Wu(ju,dr.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Wu(ju,dr.revealed,al("secretReveal")),Wu(ju,dr.requested,al("secretRequest")),Wu(ju,dr.closed,al("channelClosed")),Wu(ju,dr.refunded,al("refund")),Wu(ju,dr.received,al("transferProcessed")),Wu(ju,dr.pending,al("transfer")),ju);function il(e){for(var t,n,r,a,o,i,c=new Date(e.transfer[0]),s=c,u=dr.pending,l=0,f=Object.entries(ol);l<f.length;l++){var p=$u(f[l],2),d=p[0],b=p[1],y=b(e);if(void 0!==y){u=d,s=new Date(y);break}}var m=e.transfer[1],h=el(e),v=m.lock.amount.sub(e.fee),g=e.secretRequest&&e.secretRequest[1].amount.lt(v),O=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(g||e.refund||e.lockExpired||e.channelClosed)&&void 0,w=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:tl(e),secrethash:m.lock.secrethash,direction:h,status:u,initiator:m.initiator,partner:e.partner,target:m.target,metadata:m.metadata,paymentId:m.payment_identifier,chainId:m.chain_id.toNumber(),token:m.token,tokenNetwork:m.token_network_address,channelId:m.channel_identifier,value:v,fee:e.fee,amount:m.lock.amount,expirationBlock:m.lock.expiration.toNumber(),startedAt:c,changedAt:s,success:O,completed:w,secret:null===(i=null===(o=e.secret)||void 0===o?void 0:o[1])||void 0===i?void 0:i.value}}function cl(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return Xn;var c,s=Ku(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(wt).map(Ro).find((function(e){return Ao(e)===t}));if(l)return l}}}catch(f){s.e(f)}finally{s.f()}}var sl=n("a0df"),ul=n("31a7"),ll=n("c998"),fl=n("ee79"),pl=n("b4cc"),dl=n("0ff6"),bl=n("4e0b"),yl=n("1f0b");function ml(e,t){return gl(e)||vl(e,t)||_l(e,t)||hl()}function hl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gl(e){if(Array.isArray(e))return e}function Ol(e){return jl(e)||kl(e)||_l(e)||wl()}function wl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _l(e,t){if(e){if("string"===typeof e)return El(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?El(e,t):void 0}}function kl(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function jl(e){if(Array.isArray(e))return El(e)}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tl(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Al(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tl(o,r,a,i,c,"next",e)}function c(e){Tl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){Nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dl=function(e){switch(e.name){case"rinkeby":return xl(xl({},ul.contracts),dl.contracts);case"ropsten":return xl(xl({},sl.contracts),pl.contracts);case"goerli":return xl(xl({},ll.contracts),bl.contracts);case"homestead":return xl(xl({},fl.contracts),yl.contracts);default:throw new yt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Rl(e,t){return Cl.apply(this,arguments)}function Cl(){return Cl=Al(d.a.mark((function e(t,n){var r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==(a=null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===r?void 0:r.origin)&&void 0!==a?a:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(on(t).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),e.next=4,n.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=e.sent,s=Object(_["sha256"])(c),u=new Fu["Wallet"](s,n.provider),e.abrupt("return",{signer:u,address:u.address});case 8:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}var Il=function(){var e=Al(d.a.mark((function e(t,n,r){var a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Bu["Signer"].isSigner(t)){e.next=15;break}if(t.provider!==n){e.next=5;break}a=t,e.next=10;break;case 5:if(!(t instanceof Fu["Wallet"])){e.next=9;break}a=t.connect(n),e.next=10;break;case 9:throw new yt(dt.RDN_SIGNER_NOT_CONNECTED,{account:t.toString(),provider:n.toString()});case 10:return e.next=12,a.getAddress();case 12:o=e.sent,e.next=38;break;case 15:if("number"!==typeof t){e.next=22;break}return a=n.getSigner(t),e.next=19,a.getAddress();case 19:o=e.sent,e.next=38;break;case 22:if(!Nt.is(t)){e.next=32;break}return e.next=25,n.listAccounts();case 25:if(c=e.sent,c.includes(t)){e.next=28;break}throw new yt(dt.RDN_ACCOUNT_NOT_FOUND,{account:t,accounts:JSON.stringify(c)});case 28:a=n.getSigner(t),o=t,e.next=38;break;case 32:if(!xt.is(t)){e.next=37;break}a=new Fu["Wallet"](t,n),o=a.address,e.next=38;break;case 37:throw new yt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!r){e.next=50;break}return i={signer:a,address:o},e.t0=Rl,e.next=43,n.getNetwork();case 43:return e.t1=e.sent,e.t2=i.signer,e.next=47,(0,e.t0)(e.t1,e.t2);case 47:s=e.sent,a=s.signer,o=s.address;case 50:return e.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Pl=function(e){return e.pipe(Object(W["a"])(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),Yi(),Object(Ni["a"])(1),Object(M["a"])(il))},Ll=function(e){return Object.values(e).reduce((function(e,t){var n=dc(t),r=xl({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return xl(xl({},e),{},Nl({},t.token,xl(xl({},e[t.token]),{},Nl({},t.partner.address,r))))}),{})};function Ul(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Ml(e,t){return e.signer===t?e:e.connect(t)}function Bl(e,t,n,r){return Fl.apply(this,arguments)}function Fl(){return Fl=Al(d.a.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:{log:y.a},i=o.log,e.prev=1,e.next=4,(s=t.functions)[n].apply(s,Ol(r));case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),i.error("Error sending ".concat(n," tx"),e.t0),new yt(a,{error:e.t0.message});case 11:return i.debug("sent ".concat(n,' tx "').concat(c.hash,'" to "').concat(t.address,'"')),e.prev=12,e.next=15,c.wait();case 15:u=e.sent,mt(u.status,"tx status: ".concat(u.status)),e.next=23;break;case 19:throw e.prev=19,e.t1=e["catch"](12),i.error("Error mining ".concat(n," tx"),e.t1),new yt(a,{transactionHash:c.hash});case 23:return i.debug("".concat(n,' tx "').concat(c.hash,'" successfuly mined!')),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])}))),Fl.apply(this,arguments)}function Wl(e,t,n){return $l.apply(this,arguments)}function $l(){return $l=Al(d.a.mark((function e(t,n,r){var a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.latest$,o=n.config$,i=n.provider,c=t.blockNumber,s=t.transactionHash,e.abrupt("return",a.pipe(Xi("state","blockNumber"),Object(Su["a"])(o),Object(B["a"])((function(e){var t=ml(e,2),n=t[0],a=t[1].confirmationBlocks;return c+(null!==r&&void 0!==r?r:a)<=n})),Object(Wt["a"])((function(e){var t=ml(e,2),n=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return i.getTransactionReceipt(s)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==r&&void 0!==r?r:a))return e.blockNumber;if(c+2*(null!==r&&void 0!==r?r:a)<n)throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:s})})))})),Object(F["a"])(wt)).toPromise());case 4:case"end":return e.stop()}}),e)}))),$l.apply(this,arguments)}var Hl=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function ql(e,t){return Vl.apply(this,arguments)}function Vl(){return Vl=Al(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=he.connect(n,t),e.next=3,r.msc_address();case 3:return a=e.sent,o=Se.connect(a,t),e.next=7,o.token_network_registry();case 7:return i=e.sent,c=K.connect(i,t),e.next=11,c.secret_registry_address();case 11:return s=e.sent,e.next=14,o.service_registry();case 14:return u=e.sent,e.next=17,t.getLogs(xl(xl({},c.filters.TokenNetworkCreated(null,null)),{},{fromBlock:1,toBlock:"latest"}));case 17:return l=e.sent,f=l.map((function(e){return e.blockNumber})).filter(wt),p=f.length?Math.min.apply(Math,Ol(f)):0,e.next=22,r.one_to_n_address();case 22:return b=e.sent,e.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:p},ServiceRegistry:{address:u,block_number:p},UserDeposit:{address:n,block_number:p},SecretRegistry:{address:s,block_number:p},MonitoringService:{address:a,block_number:p},OneToN:{address:b,block_number:p}});case 24:case"end":return e.stop()}}),e)}))),Vl.apply(this,arguments)}function Kl(e){return Gl.apply(this,arguments)}function Gl(){return Gl=Al(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.pipe(Object(Ni["a"])("udcBalance"),Object(F["a"])((function(e){return!!e&&e.lt(k["MaxUint256"])}))).toPromise());case 1:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}function Zl(e){return Ql(e)||Yl(e)||ef(e)||Xl()}function Xl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yl(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ql(e){if(Array.isArray(e))return tf(e)}function Jl(e,t){return rf(e)||nf(e,t)||ef(e,t)||zl()}function zl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ef(e,t){if(e){if("string"===typeof e)return tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tf(e,t):void 0}}function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rf(e){if(Array.isArray(e))return e}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){cf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var uf=function(e,t,n){sf(e),sf(t);var r=n.provider;return Ji((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object(W["a"])((function(e){return Object(I["a"])(Object(C["a"])(e),en(r,"block"))})),Object(M["a"])((function(e){return Qn({blockNumber:e})})))},lf=function(e,t,n){sf(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Au["a"])(1),Object(B["a"])((function(e){return Mu()(e.tokens)})),Object(W["a"])((function(){return Ji((function(){return a.getLogs(of(of({},o.filters.TokenNetworkCreated(null,null)),{},{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object(W["a"])(Bt["a"]),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object(W["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Eu["a"])(Ji((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Bt["a"])),Ji((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Bt["a"]))).pipe(Object(Au["a"])(1),Object(Ci["a"])(Jn({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},ff=function(e,t,n){sf(e),sf(t);var r=n.address,a=n.network,o=n.provider;return Ji((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object(W["a"])((function(e){return Object(Tu["a"])(o.pollingInterval).pipe(Object(Wt["a"])((function(){return Object(I["a"])(e?Ji((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.includes(r)?L["a"]:Object(C["a"])(Va({reason:De.ACCOUNT_CHANGED}))}))):L["a"],Ji((function(){return nn(o)}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.chainId!==a.chainId?Object(C["a"])(Va({reason:De.NETWORK_CHANGED})):L["a"]}))))})))})))};function pf(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function df(e,t){var n=Jl(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=pf(s),l=u.openTopic,f=u.depositTopic,p=u.withdrawTopic,d=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Su["a"])(i),Object(M["a"])((function(e){var t,n,i=Jl(e,2),c=i[0],s=i[1],u=s.state,y=s.config,m=c[0].toNumber(),h=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===m})),v=Pt(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,_=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var k=Jl(c,4),j=k[1],E=k[2],T=k[3];if((o===j||o===E)&&(!h||m>h.id)){var A=o==j?E:j;n=zn.success({id:m,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:A})}break;case f:var S=Jl(c,3),x=S[1],N=S[2];(null===h||void 0===h?void 0:h.id)===m&&N.gt(h[x===h.partner.address?"partner":"own"].deposit)&&(n=tr.success({id:m,participant:x,totalDeposit:N,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case p:var D=Jl(c,3),R=D[1],C=D[2];(null===h||void 0===h?void 0:h.id)===m&&C.gt(h[R===h.partner.address?"partner":"own"].withdraw)&&(n=nr({id:m,participant:R,totalWithdraw:C,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case d:if((null===h||void 0===h?void 0:h.id)===m&&!("closeBlock"in h)){var I=Jl(c,2),P=I[1];n=rr.success({id:m,participant:P,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address})}break;case b:(null===h||void 0===h?void 0:h.id)===m&&(n=or.success({id:m,txHash:O,txBlock:w,confirmed:_,locks:h.partner.locks},{tokenNetwork:a,partner:h.partner.address}));break}return n})),Object(B["a"])(wt))}}function bf(e,t,n){var r=Jl(e,2),a=r[0],o=r[1],i=Jl(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,f=n.latest$,p=n.getTokenNetworkContract,d=p(s),b=pf(d),y=b.openTopic;return Ji((function(){return Promise.all([l.getLogs(of(of({},d.filters.ChannelOpened(null,u,null,null)),{},{fromBlock:a,toBlock:o})),l.getLogs(of(of({},d.filters.ChannelOpened(null,null,u,null)),{},{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Su["a"])(f),Object(W["a"])((function(e){var t=Jl(e,2),n=Jl(t[0],2),r=n[0],i=n[1],c=t[1].state,f=r.concat(i).map(tn(d)).filter(wt).filter((function(e){var t=Jl(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=fc({tokenNetwork:s,partner:o});return!(pc({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),p=[].concat(Zl(f),Zl(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=Jl(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===p.length?L["a"]:Ji((function(){return l.getLogs({address:s,topics:[Object.values(pf(d)).filter((function(e){return e!==y})),p],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object(W["a"])((function(e){var t=e.map(tn(d)).filter(wt),n=[].concat(Zl(f),Zl(t));return Object(Bt["a"])(Lu()(n,[function(e){return Pt(e).blockNumber},function(e){return Pt(e).transactionIndex}]))})))})),df([c,s],n))}function yf(e,t,n){var r=Jl(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(pf(u))]};return s.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.confirmationBlocks;return en(i,l,void 0,n,e)})),Object(M["a"])(tn(u)),Object(B["a"])(wt),df([a,o],n))}var mf=function(e,t,n){return e.pipe(Object(B["a"])(Qn.is),Object(Ni["a"])("payload","blockNumber"),Object(xu["a"])(1,void 0,(function(e){return t.pipe(Object(Ni["a"])("tokens"),Yi(),Object(Su["a"])(t),Object(W["a"])((function(t){var r=Jl(t,2),a=Jl(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new R["a"];return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(I["a"])(Object(C["a"])(Jn({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),bf([s,e],[o,i],n).pipe(Object(Nu["a"])((function(){return u.next(!0),u.complete()}))),yf(e+1,[o,i],n).pipe(Object(Du["a"])((function(){return u}))))})))})))})))},hf=function(e,t){return sf(e),t.pipe(vc,Object(W["a"])((function(e){return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return er({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},vf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Pn(zn.request)),Object(Su["a"])(t,u),Object(W["a"])((function(t){var n,u,l,f,p=Jl(t,3),d=p[0],b=p[1],y=p[2],m=y.settleTimeout,h=y.subkey,v=d.meta,g=v.tokenNetwork,O=v.partner,w=null===(n=b.channels[fc(d.meta)])||void 0===n?void 0:n.state;if(w)return Object(C["a"])(zn.failure(new yt(dt.CNL_INVALID_STATE,{state:w}),d.meta));var _=Ul({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:h),k=_.signer,j=Ml(s(g),k),E=L["a"];return(null===(f=null===(l=d.payload.deposit)||void 0===l?void 0:l.gt)||void 0===f?void 0:f.call(l,0))&&(E=Object(C["a"])(tr.request({deposit:d.payload.deposit,subkey:d.payload.subkey,waitOpen:!0},d.meta))),Object(Eu["a"])(E,Object(P["a"])((function(){var e;return j.functions.openChannel(o,O,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:m)})).pipe(bc("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),hc(c.pollingInterval,void 0,yc.concat(mc),{log:r}),Object(Ri["a"])(e.pipe(Object(B["a"])(zn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===g&&e.meta.partner===O})))),Object(Ru["a"])(),Object($t["a"])((function(e){return Object(C["a"])(zn.failure(e,d.meta))}))))})))};function gf(e,t,n,r,a){var o=Jl(e,2),i=o[0],c=o[1],s=Jl(t,3),u=s[0],l=s[1],f=s[2],p=a.log,d=a.config$;return(null===n||void 0===n?void 0:n.gt(k["Zero"]))?Object(P["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(Su["a"])(d),Object(W["a"])((function(e){var t=Jl(e,2),r=Jl(t[0],2),a=r[0],o=r[1],s=t[1].minimumAllowance;return gc([a,o,n],i,c.address,dt.CNL_APPROVE_TRANSACTION_FAILED,{log:p,minimumAllowance:s})})),Object(Cu["a"])(r),Object(Au["a"])(1),Object(W["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,f).then((function(t){var n=t[0];return[e,n]}))})),Object(W["a"])((function(e){var t=Jl(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),f)})),bc("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:p}),hc(c.provider.pollingInterval,void 0,yc.concat(mc),{log:p}),Object(Ru["a"])()):L["a"]}var Of=function(e,t,n){sf(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(B["a"])(Pn(tr.request)),Object(Di["a"])((function(e){return e.meta.tokenNetwork})),Object(W["a"])((function(t){return t.pipe(Object(Iu["a"])((function(t){return Object(ru["a"])([l,u]).pipe(Object(F["a"])(),Object(W["a"])((function(n){var f,p,d=Jl(n,2),b=d[0].state,y=d[1].subkey,m=t.meta,h=m.tokenNetwork,v=m.partner,g=$e()(b.tokens,(function(e){return e===h})),O=b.channels[fc(t.meta)];if(g&&!O&&t.payload.waitOpen)p=Object(I["a"])(e.pipe(Object(B["a"])(zn.failure.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(Cu["a"])(Object(Ai["a"])(new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object(Ni["a"])("state","channels",fc(t.meta)),Object(B["a"])(wt)));else{if((null===O||void 0===O?void 0:O.state)!==jo.open)throw new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND);p=Object(C["a"])(O)}var w=Ul({signer:a,address:o,main:i},null!==(f=t.payload.subkey)&&void 0!==f?f:y),_=w.signer,k=w.address,j=Ml(c(g),_),E=Ml(s(h),_);return p.pipe(Object(Ni["a"])("id"),Object(xu["a"])(1,void 0,(function(e){return gf([j,E],[k,o,v],t.payload.deposit,e,{log:r,config$:u})})))})),Object($t["a"])((function(e){return Object(C["a"])(tr.failure(e,t.meta))})))})))})))},wf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(Pn(rr.request)),Object(Su["a"])(t,l),Object(W["a"])((function(e){var t,n,l=Jl(e,3),f=l[0],p=l[1],d=l[2].subkey,b=f.meta,y=b.tokenNetwork,m=b.partner,h=Ul({signer:a,address:o,main:i},null!==(n=null===(t=f.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=h.signer,g=Ml(u(y),v),O=p.channels[fc(f.meta)];if((null===O||void 0===O?void 0:O.state)!==jo.open&&(null===O||void 0===O?void 0:O.state)!==jo.closing){var w=new yt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,f.meta);return Object(C["a"])(rr.failure(w,f.meta))}var k=O.partner.balanceProof,j=Ao(k),E=k.nonce,T=k.additionalHash,A=k.signature,S=Object(_["concat"])([po(y,20),po(s.chainId,32),po(ko.BALANCE_PROOF,32),po(O.id,32),po(j,32),po(E,32),po(T,32),po(A,65)]);return Object(Bt["a"])(a.signMessage(S)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return g.functions.closeChannel(O.id,m,o,j,E,T,A,e)})).pipe(bc("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Ru["a"])(),Object($t["a"])((function(e){return Object(C["a"])(rr.failure(e,f.meta))})))})))},_f=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(Pn(rr.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(Du["a"])((function(){return e.pipe(Object(B["a"])(Qn.is))})),Object(Su["a"])(t,l),Object(B["a"])((function(e){var t=Jl(e,2),n=t[0],r=t[1],a=r.channels[fc(n.meta)];return(null===a||void 0===a?void 0:a.state)===jo.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object(W["a"])((function(e){var t=Jl(e,3),n=t[0],l=t[1],f=t[2].subkey,p=n.meta,d=p.tokenNetwork,b=p.partner,y=Ul({signer:a,address:o,main:i},f),m=y.signer,h=Ml(u(d),m),v=l.channels[fc(n.meta)],g=Ao(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,k=v.partner.balanceProof.signature,j=Object(_["concat"])([po(d,20),po(s.chainId,32),po(ko.BALANCE_PROOF_UPDATE,32),po(v.id,32),po(g,32),po(O,32),po(w,32),po(k,65)]);return Object(Bt["a"])(a.signMessage(j)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return h.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,k,e)})).pipe(bc("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Ru["a"])(),Object($t["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),L["a"]})))})))},kf=function(e,t,n){sf(e);var r=n.config$;return t.pipe(vc,Object(W["a"])((function(e){return e.pipe(Object(B["a"])((function(e){return e.state===jo.settleable})),Object(Au["a"])(1),Object(Su["a"])(r),Object(Du["a"])((function(e){var n=Jl(e,2),r=n[0],a=n[1].confirmationBlocks,o=r.closeBlock+r.settleTimeout+Math.round(a*(1+Math.random()));return t.pipe(Object(Ni["a"])("blockNumber"),Object(B["a"])((function(e){return o<=e})),Object(Au["a"])(1))})),Object(Su["a"])(t),Object(B["a"])((function(e){var t,n=Jl(e,2),r=Jl(n[0],1),a=r[0],o=n[1];return(null===(t=o.channels[fc(a)])||void 0===t?void 0:t.state)===jo.settleable})),Object(M["a"])((function(e){var t=Jl(e,1),n=Jl(t[0],1),r=n[0];return or.request(void 0,{tokenNetwork:r.tokenNetwork,partner:r.partner.address})})))})),Object(Ri["a"])(r.pipe(Object(Ni["a"])("autoSettle"),Object(B["a"])((function(e){return!e})))),Object(Ui["a"])((function(){return r.pipe(Object(Ni["a"])("autoSettle"),Object(B["a"])((function(e){return e})))})))},jf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Pn(or.request)),Object(Su["a"])(t,u),Object(W["a"])((function(e){var t,n,u=Jl(e,3),l=u[0],f=u[1],p=u[2].subkey,d=l.meta,b=d.tokenNetwork,y=d.partner,m=Ul({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:p),h=m.signer,v=Ml(s(b),h),g=f.channels[fc(l.meta)];if((null===g||void 0===g?void 0:g.state)!==jo.settleable&&(null===g||void 0===g?void 0:g.state)!==jo.settling){var O=new yt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,l.meta);return Object(C["a"])(or.failure(O,l.meta))}return Object(Bt["a"])(Promise.all([v.functions.getChannelParticipantInfo(g.id,o,y),v.functions.getChannelParticipantInfo(g.id,y,o)])).pipe(Object(W["a"])((function(e){var t=Jl(e,2),n=t[0][3],a=t[1][3],i=g.own.balanceProof;if(n!==Ao(i)){var s=cl(f.sent,n,l.meta);mt(s,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),i=s}var u=g.partner.balanceProof;if(a!==Ao(u)){var p=cl(f.received,a,l.meta);mt(p,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:y,partnerBalanceHash:a}]),u=p}var d=[o,i],b=[y,u];if(b[1].transferredAmount.add(b[1].lockedAmount).lt(d[1].transferredAmount.add(d[1].lockedAmount))){var m=[b,d];d=m[0],b=m[1]}return Object(P["a"])((function(){return v.functions.settleChannel(g.id,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot,b[0],b[1].transferredAmount,b[1].lockedAmount,b[1].locksroot)})).pipe(bc("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Ru["a"])(),Object($t["a"])((function(e){return Object(C["a"])(or.failure(e,l.meta))})))})))},Ef=function(e,t){return e.pipe(Object(B["a"])(Pn(Qn)),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Jl(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===jo.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,ar({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Tf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Pn(or.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Su["a"])(t,u),Object(B["a"])((function(e){var t,n=Jl(e,2),r=n[0],a=n[1];return(null===(t=a.channels[fc(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object(W["a"])((function(e){var t=Jl(e,3),n=t[0],u=t[2].subkey,l=n.meta,f=l.tokenNetwork,p=l.partner,d=Ml(s(f),Ul({signer:a,address:o,main:i},u).signer),b=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Zl(e),[po(t.expiration,32),po(t.amount,32),t.secrethash])}),[]));return Object(P["a"])((function(){return d.functions.unlock(n.payload.id,o,p,b)})).pipe(bc("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}),Object(Ru["a"])(),Object($t["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),L["a"]})))})))};function Af(e,t,n,r){return Ji((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?of(of({},e),{},{payload:of(of({},e.payload),{},{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?of(of({},e),{},{payload:of(of({},e.payload),{},{confirmed:!1})}):void 0})),Object(B["a"])(wt))}var Sf=function(e,t,n){sf(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(ru["a"])(t.pipe(Xi("blockNumber")),t.pipe(Object(Ni["a"])("pendingTxs")),r.pipe(Xi("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=Jl(e,2),n=t[1];return n.length>0})),Object(Wt["a"])((function(e){var t=Jl(e,3),n=t[0],r=t[1],i=t[2];return Object(Bt["a"])(r).pipe(Object(B["a"])((function(e){return e.payload.txBlock+i<n})),Object(Iu["a"])((function(e){return Af(e,a,n,i).pipe(Object(Ri["a"])(o.pipe(Object(B["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))},xf=n("d859"),Nf=n("c5ca"),Df=n("a4f9"),Rf=n("1e86"),Cf=n("efec"),If=n("305c");function Pf(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Lf(e,t){var n=Object(If["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Uf=n("e5e1"),Mf=n("38c9"),Bf=n.n(Mf);function Ff(e,t){return Vf(e)||qf(e,t)||$f(e,t)||Wf()}function Wf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $f(e,t){if(e){if("string"===typeof e)return Hf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hf(e,t):void 0}}function Hf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vf(e){if(Array.isArray(e))return e}function Kf(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Gf(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Kf(o,r,a,i,c,"next",e)}function c(e){Kf(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Zf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xf(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(wt)}var Yf=Bf()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Qf(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Yf(t))),n?Object(C["a"])(n):Object(Uf["a"])(e,"Room").pipe(Object(B["a"])(Yf(t)),Object(Au["a"])(1))}function Jf(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(Au["a"])(1),Object(W["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(C["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(wt),Object(Pi["a"])(),Object(Bi["a"])((function(n){return Qf(t,n).pipe(Object(W["a"])((function(t){return i.pipe(Object(Ni["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(Pi["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(Bi["a"])((function(e){var n=e.room,r=e.userId;if(!r)return L["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(C["a"])(a):Object(Uf["a"])(t,"RoomMember.membership",(function(e,t){return Zf(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(Ni["a"])("roomId"))})))})),Object(Au["a"])(1),Object(W["a"])((function(e){return Object(P["a"])(Gf(d.a.mark((function a(){return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return","string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body));case 1:case"end":return a.stop()}}),a)})))).pipe(Object(Ci["a"])("string"===typeof e?e:e.label),Object(xi["a"])((function(e){return e.pipe(Object(Su["a"])(c),Object(W["a"])((function(e,t){var n=Ff(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Ti["a"])(a)):Object(Ai["a"])(r)})))})))})))}function zf(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Io(e);if("signature"in a){var o=Do(a);if(o!==t)throw new yt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function ep(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function tp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function np(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){tp(o,r,a,i,c,"next",e)}function c(e){tp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function rp(e,t){return sp(e)||cp(e,t)||op(e,t)||ap()}function ap(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function op(e,t){if(e){if("string"===typeof e)return ip(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ip(e,t):void 0}}function ip(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sp(e){if(Array.isArray(e))return e}var up="RAIDEN";function lp(e,t){var n=Pf(t.getHomeserverUrl());return Object(Bt["a"])(Xf(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object(W["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(Ni["a"])("roomId"),Object(xf["a"])())}function fp(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function pp(e,t,n,r){return e.pipe(Object(B["a"])(sr.is),Object(Au["a"])(1),Object(Si["a"])((function(){n.next(t),n.complete()})),Object(Nf["a"])(1e3),Object(Su["a"])(r),Object(W["a"])((function(e){var n=rp(e,2),r=n[1];return lp(r,t).pipe(Object(W["a"])((function(e){return fp(t,e)})),Object(W["a"])((function(e){return t.startClient({filter:e})})))})),Object(Ru["a"])())}function dp(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function bp(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(Cf["a"])(e+"/_matrix/client/versions").pipe(Object(Df["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object($t["a"])((function(){return Object(C["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function yp(e,t){return Object(Cf["a"])(e).pipe(Object(W["a"])(function(){var t=np(d.a.mark((function t(n){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return mt(n.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(n.status)),t.abrupt("return",n.text());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(Df["a"])(t),Object(W["a"])((function(e){return dp(e)})),Object(W["a"])((function(e){return bp(e,t)})),Object(xf["a"])(),Object(W["a"])((function(e){return Lu()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Rf["a"])((function(){return new yt(dt.TRNS_NO_MATRIX_SERVERS)})))}function mp(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=Pf(e);if(!c)throw new yt(dt.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(F["a"])(),Object(W["a"])((function(n){var i=n.pollingInterval;if(t){var s=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(C["a"])({matrix:s,server:e,setup:t})}var u=Object(h["createClient"])({baseUrl:e}),l=a.toLowerCase(),f="@".concat(l,":").concat(c);return Object(Bt["a"])(o.signMessage(c)).pipe(Object(W["a"])((function(e){return Ji((function(){return u.login("m.login.password",{user:l,password:e,device_id:up})}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object($t["a"])((function(t){return u.register(l,e).catch((function(){throw t}))})))})),Object(W["a"])((function(t){var n=t.access_token,r=t.device_id;return u.deviceId=r,u._http.opts.accessToken=n,u.credentials={userId:f},Object(Bt["a"])(o.signMessage(f)).pipe(Object(M["a"])((function(t){return{matrix:u,server:e,setup:{userId:f,accessToken:n,deviceId:r,displayName:t}}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Ji((function(){return t.setDisplayName(a.displayName)}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Ji((function(){return t.setAvatarUrl(r&&!Mu()(r)?_u(r):"")}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))).pipe(Object(Ci["a"])({matrix:t,server:n,setup:a}))})))})))}var hp=function(e,t,n){ep(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(ru["a"])([i,c]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var t,n=rp(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,f=i.caps,p=o.transport.server,d=o.transport.setup,b=[];s?(s===p&&b.push(Object(C["a"])({server:p,setup:d})),b.push(Object(C["a"])({server:s}))):(p&&b.push(Object(C["a"])({server:p,setup:d})),b.push(yp(u,l)));var y=function(e){return t=e,L["a"]};return Object(P["a"])((function(){return b.shift()||L["a"]})).pipe(Object($t["a"])(y),Object(Iu["a"])((function(e){var t=e.server,n=e.setup;return mp(t,n,{address:r,signer:a,config$:c},f).pipe(Object($t["a"])(y))})),Object(F["a"])(),Object(Si["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(xi["a"])((function(e){return e.pipe(Object(W["a"])((function(){return b.length?Object(C["a"])(null):Object(Ai["a"])(t)})))})))})),Object(W["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(pp(e,n,o,c),Object(C["a"])(sr({server:r,setup:a})),c.pipe(Xi("logger"),Object(Si["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Ru["a"])()))})))},vp=function(e,t,n){ep(t);var r=n.matrix$;return r.pipe(Object(W["a"])((function(t){return e.pipe(Object(Nu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Ru["a"])())},gp=n("93e7"),Op=n.n(gp);function wp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wp(o,r,a,i,c,"next",e)}function c(e){wp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function kp(e,t){return Tp(e)||Ep(e,t)||Rp(e,t)||jp()}function jp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ep(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Tp(e){if(Array.isArray(e))return e}function Ap(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(n),!0).forEach((function(t){Np(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Rp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Rp(e,t){if(e){if("string"===typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ip=["online","unavailable"],Pp=/^@(0x[0-9a-f]{40})[.:]/i;function Lp(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object(W["a"])(d.a.mark((function e(n){var r,a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Dp(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Pp.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object(W["a"])((function(t){return Lf(e,t.user_id).then((function(e){return xp(xp({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(wt),Object(xf["a"])(),Object(M["a"])((function(e){if(!e.length)throw new yt(dt.TRNS_NO_VALID_USER,{address:t});return Op()(e,"last_active_ago")})))}var Up=function(e,t,n){Ap(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(Pn(ur.request)),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Di["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Su["a"])(a.pipe(Xi("presences"))),Object(Wt["a"])((function(e){var t=kp(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(C["a"])(i[r.meta.address]):Lp(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return ur.success({userId:n,available:Ip.includes(t),ts:Date.now(),caps:ku(a)},r.meta)})),Object($t["a"])((function(e){return Object(C["a"])(ur.failure(e,r.meta))})))})))})))},Mp=function(e,t,n){Ap(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(Bi["a"])((function(e){return Object(Uf["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{mt(null===a||void 0===a?void 0:a.presence);var o=null===(t=Pp.exec(a.userId))||void 0===t?void 0:t[1];mt(o);var i=Object(_["getAddress"])(o);return mt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(wt),Object(Su["a"])(e.pipe(Object(B["a"])(ur.request.is),Object(Li["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(ou["a"])(new Set))),Object(B["a"])((function(e){var t=kp(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object(W["a"])((function(e){var t=kp(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=Ip.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;mt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(c,e.displayname);return mt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),ur.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:ku(e.avatar_url)},{address:n})})),Object($t["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),L["a"]})))}))).pipe(Object(Su["a"])(o),Object(B["a"])((function(e){var t=kp(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(Ni["a"])(0))},Bp=function(e){return e.pipe(Object(B["a"])(er.is),Object(M["a"])((function(e){return ur.request(void 0,{address:e.meta.partner})})))},Fp=function(e,t,n){Ap(e),Ap(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(Ni["a"])("caps"),Object(Pi["a"])(uu.a),Object(U["a"])(1),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object(W["a"])(function(){var e=_p(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=kp(t,2),r=n[0],a=n[1],e.abrupt("return",a.setAvatarUrl(r&&!Mu()(r)?_u(r):"").catch((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Ru["a"])())},Wp=n("41db"),$p=n("3ae7"),Hp=n.n($p);function qp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Vp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){qp(o,r,a,i,c,"next",e)}function c(e){qp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Kp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Yp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Gp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Zp(e,t){return zp(e)||Jp(e,t)||Yp(e,t)||Xp()}function Xp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yp(e,t){if(e){if("string"===typeof e)return Qp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qp(e,t):void 0}}function Qp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zp(e){if(Array.isArray(e))return e}function ed(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(C["a"])(n):Object(Uf["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(Au["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Su["a"])(r),Object(W["a"])((function(r){var a=Zp(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(Ui["a"])((function(e){return e.pipe(Object(Nf["a"])(i))})),Object(Ri["a"])(Object(Uf["a"])(e,"RoomMember.membership",(function(e,t){return Gp(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var td=function(e,t,n){Gp(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])(Pn([ya,er,Jr.request,fr])),Object(M["a"])((function(e){var t;switch(e.type){case ya.type:e.meta.direction===sa.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===sa.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case er.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(wt),Object(Di["a"])((function(e){return e})),Object(W["a"])((function(e){return e.pipe(Object(W["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Wt["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(Au["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object(W["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return lr({roomId:n},{address:t})})),Object($t["a"])((function(e){return a.error("Error creating room, ignoring",e),L["a"]})))})))})))},nd=function(e,t,n){Gp(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(Pn(ur.success)),Object(Di["a"])((function(e){return e.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Su["a"])(r),Object(Bi["a"])((function(e){var t=Zp(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(Pi["a"])(),Object(Bi["a"])((function(e){return Object(Eu["a"])(Object(C["a"])(e),e?Object(Uf["a"])(r,"RoomMember.membership",(function(e,t){return Gp(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(Ci["a"])(e)):L["a"])})),Object(Bi["a"])((function(e){return e?ed(r,e,n.payload.userId,a,{log:i}):L["a"]}))):L["a"]})))})),Object(Ru["a"])())},rd=function(e,t,n){Gp(e),Gp(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Bi["a"])((function(e){return Object(Uf["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Su["a"])(o),Object(W["a"])((function(e){var t=Zp(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Xi("presences"),Object(M["a"])((function(e){return Hp()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(wt),Object(Au["a"])(1),Object(Ri["a"])(Object(Ti["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Bt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Ci["a"])(lr({roomId:n.roomId},{address:a.meta.address})),Object($t["a"])((function(e){return r.error("Error joining invited room, ignoring",e),L["a"]})))})))},ad=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Pn(lr)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Su["a"])(t,o),Object(W["a"])((function(e){var t,n,a=Zp(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Bt["a"])(l.filter((function(e,t){return Gp(e),t>=u}))).pipe(Object(W["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return fr({roomId:e},i.meta)})))})))},od=function(e,t,n){Gp(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(Bi["a"])((function(e){return Object(Uf["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,room:t}})))})),Object(Du["a"])((function(){return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.httpTimeout;return Object(Ti["a"])(t)})))})),Object(Su["a"])(t,o),Object(B["a"])((function(e){var t,n=Zp(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=Pf(a.getHomeserverUrl());if(Xf(c).some((function(e){return Yf("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var f,p=l[u],d=Kp(p);try{for(d.s();!(f=d.n()).done;){var b=f.value;if(b===o.roomId)return!1}}catch(y){d.e(y)}finally{d.f()}}return!0})),Object(W["a"])(function(){var e=Vp(d.a.mark((function e(t){var n,a,o,i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Zp(t,1),a=n[0],o=a.matrix,i=a.room,r.warn("Unknown room in matrix, leaving",i.roomId),e.abrupt("return",o.leave(i.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Ru["a"])())},id=function(e,t,n){Gp(e);var r=n.log,a=n.matrix$;return a.pipe(Object(Bi["a"])((function(e){return Object(Uf["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,p,b,y;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Zp(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Zp(s[c],2),l=u[0],f=u[1],p=Kp(f),e.prev=5,p.s();case 7:if((b=p.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,fr({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),p.e(e.t0);case 20:return e.prev=20,p.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},cd=function(e,t,n){Gp(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Xi("transport","rooms"),Object(B["a"])(wt),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Zp(r[n],2),o=a[0],i=a[1],c=Kp(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Wp["a"])((function(e){var t=e.roomId;return t})),Object(W["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Su["a"])(o),Object(W["a"])((function(e){var t=Zp(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Qf(i,a).pipe(Object(Df["a"])(c),Object(Ru["a"])(),Object($t["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(C["a"])(fr({roomId:a},{address:o}))})))})))},sd=function(e,t){return e.pipe(Object(B["a"])(ea.is),Object(Su["a"])(t),Object(B["a"])((function(e){var t,n,r=Zp(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=Zp(e,1),n=t[0];return lr({roomId:n.payload.roomId},n.meta)})))};function ud(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fd(e,t,n){return t&&ld(e.prototype,t),n&&ld(e,n),e}var pd=function(){function e(t){ud(this,e),this.values=new Map,this.max=t}return fd(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function dd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=md(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function bd(e,t){return gd(e)||vd(e,t)||md(e,t)||yd()}function yd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function md(e,t){if(e){if("string"===typeof e)return hd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hd(e,t):void 0}}function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gd(e){if(Array.isArray(e))return e}function Od(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var wd=function(e,t,n){Od(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(Pn(Jr.request)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Di["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Iu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Co(t.payload.message),c={body:a,msgtype:"m.text"};return Jf(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(M["a"])((function(e){return Jr.success({via:e},t.meta)})),Object($t["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(C["a"])(Jr.failure(e,t.meta))})))})))})))},_d=function(e,t,n){Od(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Pn(zr)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Su["a"])(o),Object(W["a"])((function(e){var t=bd(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Xf(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),L["a"];var s=Pf(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Qf(o,u).pipe(Object(W["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Co(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object($t["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),L["a"]})))})),Object(Ru["a"])())},kd=function(e,t,n){Od(e),Od(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Bi["a"])((function(e){return Object(Uf["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Su["a"])(o),Object(B["a"])((function(e){var t,n,r=bd(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Xf(s).some((function(e){return Yf("#".concat(e,":").concat(Pf(o.getHomeserverUrl())),c)}))})),Object(W["a"])((function(e){var t=bd(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Hp()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Au["a"])(1),Object(Ri["a"])(Object(Ti["a"])(c)),Object(W["a"])(d.a.mark((function e(t){var n,i,c,s,u,l,f;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Hp()(n,["payload.userId",a.getSender()]),s=dd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,f=zf(l,c.meta.address,{log:r}),e.next=10,ea({text:l,message:f,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},jd=function(e,t,n){Od(t);var r=n.log,a=n.signer,o=n.latest$,i=new pd(32);return e.pipe(Object(B["a"])(Uo([Ct(vr),Ct(Or),Ct(_r)])),Object(Su["a"])(o),Object(B["a"])((function(e){var t,n=bd(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Re.NO_DELIVERY])})),Object(Iu["a"])((function(e){var t=bd(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(C["a"])(Jr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:qn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Bt["a"])(Po(a,s,{log:r})).pipe(Object(Si["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return Jr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Ed=n("4d57"),Td=n("56f3");function Ad(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Sd(e,t){return Dd(e)||Nd(e,t)||Id(e,t)||xd()}function xd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Dd(e){if(Array.isArray(e))return e}function Rd(e){return Ld(e)||Pd(e)||Id(e)||Cd()}function Cd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Id(e,t){if(e){if("string"===typeof e)return Ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ud(e,t):void 0}}function Pd(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ld(e){if(Array.isArray(e))return Ud(e)}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Md(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Bd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Md(o,r,a,i,c,"next",e)}function c(e){Md(o,r,a,i,c,"throw",e)}i(void 0)}))}}var Fd=new WeakMap;function Wd(e){return $d.apply(this,arguments)}function $d(){return $d=Bd(d.a.mark((function e(t){var n,r,a,o;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Fd.get(t),!(n&&Date.now()<n[0])){e.next=3;break}return e.abrupt("return",n[1]);case 3:return e.next=5,t.turnServer();case 5:return r=e.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Fd.set(t,[a,o]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Hd(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function qd(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Uf["a"])(e,"icecandidate").pipe(Object(Ni["a"])("candidate"),Object(Du["a"])((function(){return n})),Object(Mi["a"])(wt),Object(Ed["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(Si["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object(W["a"])((function(e){return Jf(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Uf["a"])(t,"event").pipe(Object(B["a"])(Hd("m.call.candidates",i,o)),Object(Si["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object(W["a"])((function(e){var t;return Object(Bt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object(W["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object($t["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),L["a"]})))})))).pipe(Object(Ru["a"])())}function Vd(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,f=a.latest$,p=a.config$;return Object(Bt["a"])(Wd(e)).pipe(Object(W["a"])((function(r){var d=new RTCPeerConnection({iceServers:[].concat(Rd(r),Rd(i))}),b=d.createDataChannel(c,{ordered:!1});return Object(I["a"])(qd(d,e,t,n,a),Object(P["a"])((function(){return d.createOffer()})).pipe(Object(W["a"])((function(t){d.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Uf["a"])(e,"event").pipe(Object(B["a"])(Hd("m.call.answer",s,c,o))),Jf(u,e,"m.call.invite",n,{log:l,latest$:f,config$:p}).pipe(Object(Si["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Ru["a"])()))})),Object(Au["a"])(1),Object(Si["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){d.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Ru["a"])()),Object(C["a"])(b))})))}function Kd(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,f=a.config$;return Object(Uf["a"])(e,"event").pipe(Object(B["a"])(Hd("m.call.invite",c,i,o)),Object(Si["a"])((function(){return u.info("RTC: got invite",i)})),Object(W["a"])((function(t){return Object(Bt["a"])(Wd(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Su["a"])(f),Object(W["a"])((function(r){var c=Sd(r,2),p=Sd(c[0],2),d=p[0],b=p[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(Rd(b),Rd(y))});return m.setRemoteDescription(new RTCSessionDescription(d.getContent().offer)),Object(I["a"])(qd(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object(W["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Jf(s,e,"m.call.answer",n,{log:u,latest$:l,config$:f})})),Object(Si["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Ru["a"])()),Object(Uf["a"])(m,"datachannel").pipe(Object(Ni["a"])("channel")))})),Object(Au["a"])(1))}function Gd(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object(W["a"])((function(t){return Object(I["a"])(Object(Uf["a"])(t,"close").pipe(Object(Si["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Ru["a"])()),Object(Uf["a"])(t,"error").pipe(Object(W["a"])((function(e){return Object(Ai["a"])(e.error)}))),Object(Uf["a"])(t,"open").pipe(Object(Au["a"])(1),Object(Df["a"])(c/3),Object(Si["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(Ci["a"])(pr(t,{address:i}))),Object(Uf["a"])(t,"message").pipe(Object(Si["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(Ni["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return ea({text:e,message:zf(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Nu["a"])((function(){return t.close()})))})),Object(Ri["a"])(e),Object($t["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),L["a"]})),Object(Td["a"])(pr(void 0,{address:i})))}}function Zd(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(Pi["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Su["a"])(i,c),Object(B["a"])((function(e){var t,n=Sd(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Re.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Re.WEBRTC])})),Object(Bi["a"])((function(t){var n=Sd(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(C["a"])(pr(void 0,i.meta));var l={log:r,latest$:o,config$:c},f=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),p=f.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:f,peerId:i.payload.userId,peerAddress:i.meta.address},a=new R["a"],d=new R["a"];return t=p?Vd(s,a,n,u,l):Kd(s,a,n,u,l),d.pipe(Object(W["a"])((function(){return Jf(i.meta.address,s,"m.call.hangup",{call_id:f,version:0},{log:r,latest$:o,config$:c}).pipe(Object(Ri["a"])(Object(Ti["a"])(u.httpTimeout/10)))})),Object(Ri["a"])(e.pipe(Object(B["a"])(Va.is)))).subscribe(),Object(I["a"])(t,Object(Uf["a"])(s,"event").pipe(Object(B["a"])(Hd("m.call.hangup",n.peerId,f)),Object(Cu["a"])(Object(Ai["a"])(new Error("RTC: peer hung up"))))).pipe(Gd(d,n,u,l))})).pipe(Object(Ui["a"])((function(e){return e.pipe(Object(Su["a"])(o,c),Object(W["a"])((function(e){var t,n,r=Sd(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?p?Object(Ti["a"])(o/10):Object(C["a"])(null):L["a"]})))})))})))}var Xd=function(e,t,n){return Ad(t),e.pipe(Object(B["a"])(ur.success.is),Object(Di["a"])((function(e){return e.meta.address})),Object(W["a"])((function(t){return Zd(e,t,n)})))};function Yd(e,t){return tb(e)||eb(e,t)||Jd(e,t)||Qd()}function Qd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jd(e,t){if(e){if("string"===typeof e)return zd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zd(e,t):void 0}}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function tb(e){if(Array.isArray(e))return e}var nb=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(Pn([rr.request,rr.success])),Object(Su["a"])(t),Object(W["a"])((function(e){var t=Yd(e,2),n=t[0],a=t[1];return Object(Bt["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=Yd(e,2),a=Yd(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(M["a"])((function(e){var t,n,r,a,o=Yd(e,2),i=o[0],c=o[1],s={secrethash:i,direction:sa.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?ba.success({balanceProof:Ro(c.unlock[1])},s):ba.success({},s):ba.failure(new yt(dt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(wt))})))},rb=d.a.mark(ab);function ab(){var e,t,n,r,a=arguments;return d.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e3,t=a.length>1&&void 0!==a[1]?a[1]:6e4,n=a.length>2&&void 0!==a[2]?a[2]:1.4,r=e;case 4:return o.next=7,r;case 7:r=Math.min(t,Math.ceil(r*n)),o.next=4;break;case 10:case"end":return o.stop()}}),rb)}function ob(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object(Au["a"])(1),Object(Ru["a"])()),Object(C["a"])(t))}function ib(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return ob(t,e,Bn(Jr,e.meta)).pipe(Qi(n,r))}function cb(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}function sb(e,t){return db(e)||pb(e,t)||lb(e,t)||ub()}function ub(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lb(e,t){if(e){if("string"===typeof e)return fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fb(e,t):void 0}}function fb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function db(e){if(Array.isArray(e))return e}function bb(e,t,n,r){var a=n.confirmationBlocks;return Object(Bt["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=sb(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object(W["a"])((function(t){var n=sb(t,2),r=n[0],a=n[1],o={secrethash:r,direction:sa.SENT};return Object(I["a"])(ob(e,ka.request(void 0,o),Bn(ka,o)),Object(C["a"])(ba.failure(new yt(dt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var yb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Pn(Qn)),Object(Su["a"])(t,r),Object(Wt["a"])((function(t){var n=sb(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return bb(e,a,o,r)})))};function mb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function hb(e,t){return Ob(e)||gb(e,t)||kb(e,t)||vb()}function vb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ob(e){if(Array.isArray(e))return e}function wb(e){return Eb(e)||jb(e)||kb(e)||_b()}function _b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kb(e,t){if(e){if("string"===typeof e)return Tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tb(e,t):void 0}}function jb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Eb(e){if(Array.isArray(e))return Tb(e)}function Tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ab(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return mt(n.length===e.locks.length-1,"invalid locks size"),n}function Sb(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function xb(e,t,n){var r=e.channels[fc(t)];return mt((null===r||void 0===r?void 0:r.state)===jo.open,"channel not open"),n&&(mt(n.chain_id.eq(e.chainId),"chainId mismatch"),mt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function Nb(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),L["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,p=t.payload.paths[0].path[0],b=t.payload.tokenNetwork,y=xb(e,{tokenNetwork:b,partner:p});mt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var m={amount:t.payload.value.add(f),expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},h=Xu([].concat(wb(y.own.locks),[m]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",y.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var v={type:qn.LOCKED_TRANSFER,message_identifier:zu(),chain_id:Object(_["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(y.id),nonce:y.own.nextNonce,transferred_amount:y.own.balanceProof.transferredAmount,locked_amount:y.own.balanceProof.lockedAmount.add(m.amount),locksroot:h,payment_identifier:t.payload.paymentId,token:y.token,recipient:p,lock:m,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Bt["a"])(Po(u,v,{log:i})).pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ya({message:n,fee:f,partner:p},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,ha({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Db(e,t,n){return Object(ru["a"])([e,n.config$]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var r=hb(e,2),a=r[0],o=r[1];return Nb(a,t,o,n)})),Object($t["a"])((function(e){return Object(C["a"])(ba.failure(e,t.meta))})))}function Rb(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;mt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=s.token_network_address,l=t.sent[i].partner,f=xb(t,{tokenNetwork:u,partner:l});if(t.sent[i].unlock)c=Object(C["a"])(t.sent[i].unlock[1]);else{mt(t.sent[i].secret,"unknown secret"),mt(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var p={type:qn.UNLOCK,message_identifier:zu(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:Xu(Ab(f.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Bt["a"])(Po(o,p,{log:a}))}return c.pipe(Object(Su["a"])(e),Object(M["a"])((function(e){var t=hb(e,2),r=t[0],a=t[1];return mt(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),mt(!a.sent[i].channelClosed,"channel closed!"),wa.success({message:r,partner:l},n.meta)})))}function Cb(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object(W["a"])((function(n){return Rb(e,n,t,{log:a,signer:r})})),Object($t["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(C["a"])(wa.failure(e,t.meta))})))}function Ib(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;mt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=c.token_network_address,u=e.sent[o].partner,l=xb(e,{tokenNetwork:s,partner:u});if(e.sent[o].lockExpired)i=Object(C["a"])(e.sent[o].lockExpired[1]);else{mt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),mt(!e.sent[o].unlock,"transfer already unlocked");var f=Xu(Ab(l.own,o)),p={type:qn.LOCK_EXPIRED,message_identifier:zu(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount,locked_amount:l.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:f,recipient:u,secrethash:o};i=Object(Bt["a"])(Po(r,p,{log:a}))}return i.pipe(Object(M["a"])((function(e){return ka.success({message:e,partner:u},t.meta)})))}function Pb(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Ib(e,t,{signer:a,log:r})})),Object($t["a"])((function(e){return Object(C["a"])(ka.failure(e,t.meta))})))}function Lb(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=t.payload.message.lock.secrethash,s={secrethash:c,direction:sa.RECEIVED};return Object(ru["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=hb(e,2),i=n[0],u=n[1],l=u.revealTimeout,f=u.caps,p=t.payload.message;if(c in i.received){a.warn("transfer already present",t.meta);var b=p.message_identifier;return i.received[c].partner===t.meta.address&&i.received[c].transfer[1].message_identifier.eq(b)?Object(C["a"])(ma({message:i.received[c].transferProcessed[1]},s)):L["a"]}var y=p.token_network_address,m=t.meta.address,h=xb(i,{tokenNetwork:y,partner:m},p);mt(p.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=[].concat(wb(h.partner.locks),[p.lock]),g=Xu(v);mt(p.locksroot===g,"locksroot mismatch"),mt(p.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),mt(p.locked_amount.eq(Sb(v)),"lockedAmount mismatch");var O=dc(h),w=O.partnerCapacity;mt(p.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),mt(p.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",p.lock.amount.toString(),"of token",h.token,", from",p.initiator,", through partner",m);var _=Object(C["a"])(void 0);!(null===f||void 0===f?void 0:f[Re.NO_RECEIVE])&&p.target===r&&p.lock.expiration.sub(l).gt(i.blockNumber)&&(_=Object(P["a"])((function(){var e={type:qn.SECRET_REQUEST,payment_identifier:p.payment_identifier,secrethash:c,amount:p.lock.amount,expiration:p.lock.expiration,message_identifier:zu()};return Po(o,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:qn.PROCESSED,message_identifier:p.message_identifier};return Po(o,e,{log:a})}));return Object(ru["a"])([j,_]).pipe(Object(W["a"])(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=hb(t,2),r=n[0],a=n[1],e.next=3,ya({message:p,fee:k["Zero"],partner:m},s);case 3:return e.next=5,ma({message:r},s);case 5:if(!a){e.next=10;break}return e.next=8,ur.request(void 0,{address:p.initiator});case 8:return e.next=10,ga({message:a},s);case 10:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return Object(C["a"])(ba.failure(e,s))})))}function Ub(e,t,n){var r=n.log,a=n.signer,o=Yu(t.payload.message.secret),i={secrethash:o,direction:sa.RECEIVED};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){if(!(o in e.received))return L["a"];var n=e.received[o],c=t.payload.message,s=t.meta.address;if(mt(s===n.partner,"wrong partner"),mt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(c.message_identifier)?Object(C["a"])(_a({message:n.unlockProcessed[1]},i)):L["a"];var u=n.transfer[1];mt(c.token_network_address===u.token_network_address,"wrong tokenNetwork");var l=c.token_network_address,f=xb(e,{tokenNetwork:l,partner:s},c);mt(c.nonce.eq(f.partner.nextNonce),"nonce mismatch");var p=u.lock.amount,b=Ab(f.partner,o);mt(c.locksroot===Xu(b),"locksroot mismatch"),mt(c.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(p)),"transferredAmount mismatch"),mt(c.locked_amount.eq(Sb(b)),"lockedAmount mismatch");var y={type:qn.PROCESSED,message_identifier:c.message_identifier};return Object(Bt["a"])(Po(a,y,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ha({secret:c.secret},i);case 2:return e.next=4,wa.success({message:c,partner:s},i);case 4:return e.next=6,_a({message:t},i);case 6:return e.next=8,ba.success({balanceProof:Ro(c)},i);case 8:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(C["a"])(wa.failure(e,i))})))}function Mb(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=t.payload.message.secrethash,c={secrethash:i,direction:sa.RECEIVED};return Object(ru["a"])([e,o]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,o,s=hb(e,2),u=s[0],l=s[1].confirmationBlocks;if(!(i in u.received))return L["a"];var f=u.received[i],p=t.payload.message,b=t.meta.address;if(mt(b===f.partner,"wrong partner"),mt(!f.unlock,"transfer unlocked"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(p.message_identifier)?Object(C["a"])(ja({message:f.lockExpiredProcessed[1]},c)):L["a"];var y=f.transfer[1];mt(y.lock.expiration.add(l).lte(u.blockNumber),"expiration block not confirmed yet"),mt(!(null===(o=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===o?void 0:o.registerBlock),"secret registered onchain"),mt(p.token_network_address===y.token_network_address,"wrong tokenNetwork");var m=p.token_network_address,h=xb(u,{tokenNetwork:m,partner:b},p);mt(p.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=Ab(h.partner,i);mt(p.locksroot===Xu(v),"locksroot mismatch"),mt(p.locked_amount.eq(Sb(v)),"lockedAmount mismatch"),mt(p.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var g={type:qn.PROCESSED,message_identifier:p.message_identifier};return Object(Bt["a"])(Po(a,g,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ka.success({message:p,partner:b},c);case 2:return e.next=4,ja({message:t},c);case 4:return e.next=6,ba.failure(new yt(dt.XFER_EXPIRED,{block:y.lock.expiration.toString()}),c);case 6:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(C["a"])(ka.failure(e,c))})))}function Bb(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==sa.SENT?L["a"]:Object(ru["a"])([e,c,s]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,c,s=hb(e,3),u=s[0],l=s[1].revealTimeout,f=s[2].presences,p=xb(u,t.meta);if(p.own.pendingWithdraws.some(cb(qn.WITHDRAW_REQUEST,t.meta)))return L["a"];mt(null===(c=null===(n=f[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,dt.CNL_WITHDRAW_PARTNER_OFFLINE),mt(t.meta.expiration>=u.blockNumber+l,dt.CNL_WITHDRAW_EXPIRES_SOON),mt(t.meta.totalWithdraw.gt(p.own.withdraw),dt.CNL_WITHDRAW_AMOUNT_TOO_LOW),mt(t.meta.totalWithdraw.lte(dc(p).ownTotalWithdrawable),dt.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var d={type:qn.WITHDRAW_REQUEST,message_identifier:zu(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(p.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:p.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Bt["a"])(Po(o,d,{log:r})).pipe(Object(M["a"])((function(e){return Sa.request({message:e},t.meta)})))})),Object($t["a"])((function(e){return Object(C["a"])(Aa.failure(e,t.meta))})))}function Fb(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:sa.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return xb(e,{tokenNetwork:o,partner:i},a),mt(a.participant===r,"participant mismatch"),Sa.success({message:a},c)})),Object($t["a"])((function(e){return Object(C["a"])(Sa.failure(e,c))})))}function Wb(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==sa.SENT?L["a"]:Object(ru["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=hb(e,2),i=n[0],c=n[1].confirmationBlocks,s=xb(i,t.meta);mt(!s.own.pendingWithdraws.some(cb(qn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(cb(qn.WITHDRAW_REQUEST,t.meta));mt(u,"no matching WithdrawRequest found, maybe already confirmed"),mt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:qn.WITHDRAW_EXPIRED,message_identifier:zu(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Bt["a"])(Po(o,l,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.success({message:n},t.meta);case 2:return e.next=4,Aa.failure(new yt(dt.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return Object(C["a"])(xa.failure(e,t.meta))})))}function $b(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:sa.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){mt(o.participant===t.meta.address,"participant mismatch");var n,u=xb(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(cb(qn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(C["a"])(l);else{mt(o.nonce.eq(u.partner.nextNonce),"nonce mismatch"),mt(o.total_withdraw.lte(dc(u).partnerTotalWithdrawable),"invalid total_withdraw");var f={type:qn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Bt["a"])(Po(r,f,{log:a}))}return n.pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Sa.request({message:o},s);case 2:return e.next=4,Sa.success({message:n},s);case 4:return e.next=6,Jr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return Object(C["a"])(Sa.failure(e,s))})))}function Hb(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:sa.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(ru["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=hb(e,2),i=n[0],f=n[1].confirmationBlocks;mt(u===t.meta.address,"participant mismatch");var p,b=xb(i,{tokenNetwork:s,partner:u},c),y="".concat(pc(b),"+").concat(c.message_identifier.toString()),m=r.get(y);if(m)p=Object(C["a"])(m);else{mt(c.nonce.eq(b.partner.nextNonce),"nonce mismatch"),mt(i.blockNumber>=l.expiration+f,"expire block not confirmed yet");var h={type:qn.PROCESSED,message_identifier:c.message_identifier};p=Object(Bt["a"])(Po(a,h,{log:o})).pipe(Object(Si["a"])((function(e){return r.put(y,e)})))}return p.pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.success({message:c},l);case 2:return e.next=4,Na(void 0,l);case 4:return e.next=6,Jr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object($t["a"])((function(e){return Object(C["a"])(xa.failure(e,l))})))}var qb=function(e,t,n){mb(t);var r=new pd(32),a=n.latest$.pipe(Xi("state"));return Object(I["a"])(e.pipe(Object(B["a"])(Pn([ba.request,wa.request,ka.request,Aa.request,xa.request]))),e.pipe(Object(B["a"])(Uo([Ct(Nr),Ct(Ir),Ct(Lr),Ct(Br),Ct(Wr),Ct(Hr)])))).pipe(Object(Iu["a"])((function(e){var t;switch(e.type){case ba.request.type:t=Db(a,e,n);break;case wa.request.type:t=Cb(a,e,n);break;case ka.request.type:t=Pb(a,e,n);break;case Aa.request.type:t=Bb(a,e,n);break;case xa.request.type:t=Wb(a,e,n);break;case ea.type:switch(e.payload.message.type){case qn.LOCKED_TRANSFER:t=Lb(a,e,n);break;case qn.UNLOCK:t=Ub(a,e,n);break;case qn.LOCK_EXPIRED:t=Mb(a,e,n);break;case qn.WITHDRAW_REQUEST:t=$b(a,e,n);break;case qn.WITHDRAW_CONFIRMATION:t=Fb(a,e,n);break;case qn.WITHDRAW_EXPIRED:t=Hb(a,e,n,r);break}break}return t})))};function Vb(e,t){return Yb(e)||Xb(e,t)||Gb(e,t)||Kb()}function Kb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gb(e,t){if(e){if("string"===typeof e)return Zb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zb(e,t):void 0}}function Zb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yb(e){if(Array.isArray(e))return e}function Qb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Jb=function(e,t){return Qb(e),t.pipe(Object(F["a"])(),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Vb(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:sa.SENT},e.next=9,ur.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,ya({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,wa.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,ka.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},zb=function(e,t,n){Qb(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(Bt["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=Vb(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(W["a"])((function(e){var t=Vb(e,2),n=t[0],a=t[1],o={secrethash:n,direction:sa.RECEIVED};return Object(I["a"])(Object(C["a"])(ya({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(C["a"])(ha({secret:a.secret[1].value},o)):L["a"],a.secretReveal?Object(C["a"])(Oa({message:a.secretReveal[1]},o)):L["a"],!a.secret&&a.secretRequest?r.pipe(Object(Ni["a"])("caps",Re.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object(Au["a"])(1),Object(Cu["a"])(Object(C["a"])(ur.request(void 0,{address:a.transfer[1].initiator}),ga({message:a.secretRequest[1]},o)))):L["a"])})))};function ey(e,t){return oy(e)||ay(e,t)||ny(e,t)||ty()}function ty(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ny(e,t){if(e){if("string"===typeof e)return ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ry(e,t):void 0}}function ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ay(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function oy(e){if(Array.isArray(e))return e}var iy=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(ya.is),Object(B["a"])((function(e){return e.meta.direction===sa.RECEIVED&&e.payload.message.target!==r})),Object(Su["a"])(t,a),Object(B["a"])((function(e){var t=ey(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Re.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=ey(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return ba.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:sa.SENT})})))};function cy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function sy(e,t){return dy(e)||py(e,t)||ly(e,t)||uy()}function uy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ly(e,t){if(e){if("string"===typeof e)return fy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fy(e,t):void 0}}function fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function py(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function dy(e){if(Array.isArray(e))return e}var by=function(e,t){return e.pipe(Object(B["a"])(Uo(Ct(vr))),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=sy(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=sy(s[c],2),l=u[0],f=u[1],!f.transfer[1].message_identifier.eq(o.message_identifier)||f.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,ma({message:o},{secrethash:i,direction:sa.SENT});case 16:case"end":return e.stop()}}),e)}))))},yy=function(e,t){return e.pipe(Object(B["a"])(Pn([ma,_a,ja])),Object(B["a"])((function(e){return e.meta.direction===sa.RECEIVED})),Object(Su["a"])(t),Object(M["a"])((function(e){var t=sy(e,2),n=t[0],r=t[1].received;return Jr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},my=function(e,t){return e.pipe(Object(B["a"])(Uo(Ct(vr))),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=sy(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:sa.SENT},e.next=8,ba.success({balanceProof:Ro(a.sent[i].unlock[1])},c);case 8:return e.next=10,_a({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},hy=function(e,t){return e.pipe(Object(B["a"])(Uo(Ct(vr))),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=sy(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ja({message:o},{secrethash:i,direction:sa.SENT});case 7:case"end":return e.stop()}}),e)}))))},vy=function(e,t,n){cy(t);var r=n.log,a=n.signer,o=new pd(32);return e.pipe(Object(B["a"])(Uo(Ct(Rr))),Object(Iu["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(C["a"])(Jr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:qn.PROCESSED,message_identifier:n};return Object(Bt["a"])(Po(a,s,{log:r})).pipe(Object(Si["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return Jr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},gy=n("bef3"),Oy=n.n(gy);function wy(e,t){return Ty(e)||Ey(e,t)||ky(e,t)||_y()}function _y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ky(e,t){if(e){if("string"===typeof e)return jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jy(e,t):void 0}}function jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ey(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ty(e){if(Array.isArray(e))return e}function Ay(e,t){return Oy()(e,t,(function(e,t){return _t.is(e)?e.eq(t):_t.is(t)?t.eq(e):void 0}))}var Sy=function(e,t){return e.pipe(Object(B["a"])(Uo(Ct(Rr))),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=wy(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&Ay(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:sa.SENT},e.next=14,Ea({message:o,partner:c.partner},u);case 14:return e.next=16,ba.failure(new yt(dt.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function xy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ny(e,t){return Py(e)||Iy(e,t)||Ry(e,t)||Dy()}function Dy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ry(e,t){if(e){if("string"===typeof e)return Cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cy(e,t):void 0}}function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Py(e){if(Array.isArray(e))return e}var Ly=function(e,t,n,r){return r.meta.direction!==sa.SENT?L["a"]:n.pipe(Object(F["a"])(),Object(Bi["a"])((function(n){var a=n.pollingInterval,o=n.httpTimeout,i=r.meta.secrethash,c=r.payload.message,s=Jr.request({message:c},{address:c.recipient,msgId:c.message_identifier.toString()}),u=t.pipe(Xi("sent",i),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return ib(s,e,u,ab(a,2*o))})))},Uy=function(e,t,n,r){return r.meta.direction!==sa.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Su["a"])(n),Object(Bi["a"])((function(n){var a=Ny(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=o.sent[u].transfer[1],p=Jr.request({message:l},{address:f.recipient,msgId:l.message_identifier.toString()}),d=t.pipe(Xi("sent",u),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return ib(p,e,d,ab(c,2*s))})))},My=function(e,t,n,r){return r.meta.direction!==sa.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Su["a"])(n),Object(Bi["a"])((function(n){var a=Ny(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=Jr.request({message:l},{address:o.sent[u].transfer[1].recipient,msgId:l.message_identifier.toString()}),p=t.pipe(Xi("sent",u),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return ib(f,e,p,ab(c,2*s))})))},By=function(e,t,n,r){return r.meta.direction!==sa.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Su["a"])(n),Object(Bi["a"])((function(n){var a=Ny(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=Jr.request({message:l},{address:o.received[u].transfer[1].initiator,msgId:l.message_identifier.toString()}),p=t.pipe(Xi("received",u),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return ib(f,e,p,ab(c,2*s))})))},Fy=function(e,t,n,r){return r.meta.direction!==sa.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Su["a"])(n),Object(Bi["a"])((function(n){var a=Ny(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=Jr.request({message:l},{address:o.received[u].partner,msgId:l.message_identifier.toString()}),p=t.pipe(Xi("received",u),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return ib(f,e,p,ab(c,2*s))})))},Wy=function(e,t,n){xy(t);var r=n.latest$,a=n.config$,o=r.pipe(Xi("state"));return e.pipe(Object(B["a"])(Pn([ya,wa.success,ka.success,ga,Oa])),Object(W["a"])((function(t){return ya.is(t)?Ly(e,o,a,t):wa.success.is(t)?Uy(e,o,a,t):ka.success.is(t)?My(e,o,a,t):ga.is(t)?By(e,o,a,t):Fy(e,o,a,t)})))};function $y(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Hy(e,t){return Zy(e)||Gy(e,t)||Vy(e,t)||qy()}function qy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vy(e,t){if(e){if("string"===typeof e)return Ky(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ky(e,t):void 0}}function Ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zy(e){if(Array.isArray(e))return e}var Xy=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(Uo(Ct(Or))),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Hy(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,ga({message:c},{secrethash:c.secrethash,direction:sa.SENT});case 10:case"end":return e.stop()}}),e)}))))},Yy=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),L["a"];var s,u=e.sent[c].transfer[1],l=u.target,f=e.sent[c].fee,p=u.lock.amount.sub(f);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),L["a"];if(i.amount.lt(p))return o.error("SecretRequest for amount too small!",i,u),Object(C["a"])(ba.failure(new yt(dt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(p)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(C["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:qn.SECRET_REVEAL,message_identifier:zu(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Bt["a"])(Po(a,b,{log:o}))}return s.pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oa({message:n},t.meta);case 2:return e.next=4,Jr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Qy=function(e,t,n){$y(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(Pn(ga)),Object(B["a"])((function(e){return e.meta.direction===sa.SENT})),Object(Iu["a"])((function(e){return o.pipe(Xi("state")).pipe(Object(F["a"])(),Object(W["a"])((function(t){return Yy(t,e,{log:r,signer:a})})))})))},Jy=function(e,t){return e.pipe(Object(B["a"])(Uo(_r)),Object(Su["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Hy(t,2),r=n[0],a=n[1],o=r.payload.message,i=Yu(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:sa.SENT},e.next=7,ha({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,wa.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,ha({secret:o.secret},{secrethash:i,direction:sa.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},zy=function(e,t,n){$y(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(Pn([ha,va.success])),Object(B["a"])((function(e){return e.meta.direction===sa.RECEIVED})),Object(Iu["a"])((function(e){return o.pipe(Xi("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object(W["a"])((function(){var t={type:qn.SECRET_REVEAL,message_identifier:zu(),secret:e.payload.secret};return Po(a,t,{log:r})})),Object(M["a"])((function(t){return Oa({message:t},e.meta)})),Object($t["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),L["a"]})))})))},em=function(e,t,n){$y(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(Xi("confirmationBlocks"),Object(Bi["a"])((function(e){return en(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(M["a"])(tn(a)),Object(B["a"])(wt),Object(Su["a"])(t,o),Object(B["a"])((function(e){var t=Hy(e,2),n=Hy(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return!!a&&(r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a))})),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,b,y,m;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Hy(t,3),r=Hy(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.blockNumber,u=c.sent,l=c.received,f=n[2].confirmationBlocks,p=[],a in u&&u[a].transfer[1].lock.expiration.gte(i.blockNumber)&&p.push(sa.SENT),a in l&&l[a].transfer[1].lock.expiration.gte(i.blockNumber)&&p.push(sa.RECEIVED),b=0,y=p;case 5:if(!(b<y.length)){e.next=12;break}return m=y[b],e.next=9,va.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+f<=s||void 0},{secrethash:a,direction:m});case 9:b++,e.next=5;break;case 12:case"end":return e.stop()}}),e)}))))},tm=function(e){return e.pipe(Object(B["a"])(va.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return ba.success({},e.meta)})))},nm=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Xi(sa.RECEIVED),Object(W["a"])((function(e){return Object(Bt["a"])(Object.keys(e))})),Object(Wp["a"])(),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(Qn.is),Object(Su["a"])(a.pipe(Object(Ni["a"])("state",sa.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=Hy(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[Re.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(Wt["a"])((function(n){var r=Hy(n,2),a=r[1],o={secrethash:t,direction:sa.RECEIVED};return ob(e,va.request({secret:a.secret[1].value},o),Fn(va,o))})),Object(Ri["a"])(a.pipe(Xi("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},rm=function(e,t,n){$y(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(B["a"])(va.request.is),Object(Su["a"])(u),Object(W["a"])((function(e){var t,n=Hy(e,2),u=n[0],l=n[1].subkey,f=Ul({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),p=f.signer,d=Ml(s,p);return Object(P["a"])((function(){return d.functions.registerSecret(u.payload.secret)})).pipe(bc("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}),Object(Ru["a"])(),Object($t["a"])((function(e){return Object(C["a"])(va.failure(e,u.meta))})))})))};function am(e,t){return cm(e)||im(e,t)||um(e,t)||om()}function om(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function im(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cm(e){if(Array.isArray(e))return e}function sm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=um(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function um(e,t){if(e){if("string"===typeof e)return lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lm(e,t):void 0}}function lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var pm=function(e,t){return fm(e),t.pipe(Object(F["a"])(),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===jo.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=sm(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==qn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(cb(qn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,Sa.request({message:c},{direction:sa.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==qn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,xa.success({message:c},{direction:sa.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},dm=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Sa.request.is),Object(B["a"])((function(e){return e.meta.direction===sa.SENT})),Object(Su["a"])(r),Object(W["a"])((function(n){var r=am(n,2),a=r[0],o=r[1],i=o.pollingInterval,c=o.httpTimeout,s=a.payload.message,u=Jr.request({message:s},{address:a.meta.partner,msgId:s.message_identifier.toString()}),l=t.pipe(Object(B["a"])((function(e){var t=e.channels[fc(a.meta)];return(null===t||void 0===t?void 0:t.state)!==jo.open||t.own.pendingWithdraws.some(cb(qn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(cb(qn.WITHDRAW_REQUEST,a.meta))})));return ib(u,e,l,ab(i,2*c))})))},bm=function(e,t,n){fm(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(B["a"])(Sa.success.is),Object(B["a"])((function(e){return e.meta.direction===sa.SENT})),Object(Iu["a"])((function(e){return u.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,f=u.revealTimeout;mt(e.meta.expiration>=n.blockNumber+f,dt.CNL_WITHDRAW_EXPIRES_SOON);var p=n.channels[fc(e.meta)];mt((null===p||void 0===p?void 0:p.state)===jo.open,"channel not open"),mt(e.meta.totalWithdraw.gt(p.own.withdraw),"withdraw already performed");var d=p.own.pendingWithdraws.find(cb(qn.WITHDRAW_REQUEST,e.payload.message));mt(d,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=Ul({signer:a,address:r,main:o},l),m=y.signer,h=Ml(s(b),m);return Object(P["a"])((function(){return h.functions.setTotalWithdraw(p.id,r,e.meta.totalWithdraw,e.meta.expiration,d.signature,e.payload.message.signature)})).pipe(bc("setTotalWithdraw",dt.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),hc(i.pollingInterval,void 0,void 0,{log:c}))})),Object(M["a"])((function(t){var n=am(t,2),r=n[1];return Aa.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object($t["a"])((function(t){return Object(C["a"])(Aa.failure(t,e.meta))})))})))},ym=function(e,t,n){fm(t);var r=n.signer,a=n.log,o=n.latest$,i=new pd(32);return e.pipe(Object(B["a"])(Pn([Sa.request,Sa.success])),Object(B["a"])((function(e){return e.meta.direction===sa.RECEIVED!==Sa.success.is(e)})),Object(Iu["a"])((function(e){return o.pipe(Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.presences;return e.meta.partner in r&&!(null===(n=r[e.meta.partner].payload.caps)||void 0===n?void 0:n[Re.NO_DELIVERY])})),Object(W["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(C["a"])(c);else{var s={type:qn.PROCESSED,message_identifier:n.message_identifier};t=Object(Bt["a"])(Po(r,s,{log:a})).pipe(Object(Si["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(M["a"])((function(t){return Jr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object($t["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),L["a"]})))})))},mm=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Qn.is),Object(Ni["a"])("payload","blockNumber"),Object(Su["a"])(t,r),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=am(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===jo.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(cb(qn.WITHDRAW_REQUEST)),l=sm(u),e.prev=8,l.s();case 10:if((f=l.n()).done){e.next=20;break}if(p=f.value,!p.expiration.add(o).gt(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(cb(qn.WITHDRAW_EXPIRED,p))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,xa.request(void 0,{direction:sa.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:p.expiration.toNumber(),totalWithdraw:p.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},hm=function(e,t,n){fm(t);var r=n.config$;return e.pipe(Object(B["a"])(xa.success.is),Object(B["a"])((function(e){return e.meta.direction===sa.SENT})),Object(Su["a"])(r),Object(W["a"])((function(t){var n=am(t,2),r=n[0],a=n[1],o=a.pollingInterval,i=a.httpTimeout,c=r.payload.message,s=Jr.request({message:c},{address:r.meta.partner,msgId:c.message_identifier.toString()}),u=e.pipe(Object(B["a"])(Uo(Ct(vr))),Object(B["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(c.message_identifier)})),Object(Ci["a"])(Na(void 0,r.meta)),Object(Au["a"])(1),Object(lu["a"])());return Object(I["a"])(ib(s,e,u,ab(o,2*i)),u)})))},vm=n("e68e"),gm=n("bbb8");function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach((function(t){_m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function km(e,t){return Sm(e)||Am(e,t)||Em(e,t)||jm()}function jm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Em(e,t){if(e){if("string"===typeof e)return Tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tm(e,t):void 0}}function Tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Am(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sm(e){if(Array.isArray(e))return e}function xm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Nm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xm(o,r,a,i,c,"next",e)}function c(e){xm(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Dm(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Re.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[fc({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==jo.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(jo.open,'"');var s=dc(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var Rm=N()(function(){var e=Nm(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functions.token());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Cm(e,t){var n=t.serviceRegistryContract,r=t.network,a=t.contractsInfo,o=t.config$,i=Pe["t"]({message:Pe["q"],network_info:Pe["t"]({chain_id:Pe["j"](r.chainId),token_network_registry_address:Pe["j"](a.TokenNetworkRegistry.address)}),operator:Pe["q"],payment_address:Nt,price_info:Et(32),version:Pe["q"]}),c=Nt.is(e)?Object(Bt["a"])(n.functions.urls(e)):Object(C["a"])(e);return c.pipe(Object(Su["a"])(o),Object(W["a"])((function(e){var t=km(e,2),r=t[0],a=t[1],o=a.httpTimeout,c=a.pfsMaxFee;if(!r)throw new yt(dt.PFS_EMPTY_URL);if(!Hl(r))throw new yt(dt.PFS_INVALID_URL,{url:r});r.startsWith("https://")||r.startsWith("http://")||(r="https://".concat(r));var s=Date.now();return Object(Cf["a"])(r+"/api/v1/info").pipe(Object(Df["a"])(o),Object(W["a"])(function(){var e=Nm(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Ot,e.t1=i,e.t2=yo,e.next=5,t.text();case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,e.t0)(e.t1,e.t4),e.next=10,Rm(n);case 10:return e.t6=e.sent,e.abrupt("return",[e.t5,e.t6]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(e){var t=km(e,2),n=t[0],a=t[1];return mt(n.price_info.lte(c),[dt.PFS_TOO_EXPENSIVE,{price:n.price_info.toString()}]),{address:n.payment_address,url:r,rtt:Date.now()-s,price:n.price_info,token:a}})))})))}function Im(e,t){var n=t.log;return Object(Bt["a"])(e).pipe(Object(W["a"])((function(e){return Cm(e,t).pipe(Object($t["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),L["a"]})))}),5),Object(xf["a"])(),Object(M["a"])((function(e){if(!e.length)throw new yt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function Pm(e){return Object(_["concat"])([po(e.one_to_n_address,20),po(e.chain_id,32),po(ko.IOU,32),po(e.sender,20),po(e.receiver,20),po(e.amount,32),po(e.expiration_block,32)])}function Lm(e,t){return Um.apply(this,arguments)}function Um(){return Um=Nm(d.a.mark((function e(t,n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.signMessage(Pm(n)).then((function(e){return wm(wm({},n),{},{signature:e})})));case 1:case"end":return e.stop()}}),e)}))),Um.apply(this,arguments)}function Mm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Qm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Bm(e){return $m(e)||Wm(e)||Qm(e)||Fm()}function Fm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wm(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $m(e){if(Array.isArray(e))return Jm(e)}function Hm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qm(Object(n),!0).forEach((function(t){Km(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Km(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Zm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Gm(o,r,a,i,c,"next",e)}function c(e){Gm(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xm(e,t){return eh(e)||zm(e,t)||Qm(e,t)||Ym()}function Ym(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qm(e,t){if(e){if("string"===typeof e)return Jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jm(e,t):void 0}}function Jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function eh(e){if(Array.isArray(e))return e}var th=Pe["n"](Pe["t"]({error_code:Pe["l"],errors:Pe["q"]}));function nh(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function rh(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.contractsInfo,c=n.latest$,s=n.config$;return Object(P["a"])((function(){var t=nh(),n=Object(_["concat"])([r,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Bt["a"])(a.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:r,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Su["a"])(s),Object(W["a"])((function(n){var r=Xm(n,2),a=r[0],o=r[1].httpTimeout;return Object(Cf["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Df["a"])(o))})),Object(Su["a"])(c.pipe(Object(Ni["a"])("state","blockNumber")),s),Object(W["a"])(function(){var t=Zm(d.a.mark((function t(n){var a,c,s,u,l,f,p,b;return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=Xm(n,3),c=a[0],s=a[1],u=a[2].pfsIouTimeout,404!==c.status){t.next=3;break}return t.abrupt("return",{sender:r,receiver:e.address,chain_id:Object(_["bigNumberify"])(o.chainId),amount:k["Zero"],one_to_n_address:i.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(u)});case 3:return t.next=5,c.text();case 5:if(l=t.sent,c.ok){t.next=8;break}throw new yt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:c.status,responseText:l});case 8:if(f=Ot(ca,yo(l)),p=f.last_iou,b=Object(_["verifyMessage"])(Pm(p),p.signature),b===r){t.next=12;break}throw new yt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:b,address:r});case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}function ah(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(C["a"])(i):rh(e,t,n)})),Object(M["a"])((function(t){return Vm(Vm({},t),{},{amount:t.amount.add(e.price)})})),Object(W["a"])((function(e){return Lm(n.signer,e)})))}var oh=function(e,t,n){return Hm(t),e.pipe(Object(B["a"])(Pn(Ca.request)),Object(Iu["a"])((function(t){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=L["a"],o=Object(C["a"])(r)):(a=Object(C["a"])(ur.request(void 0,{address:i})),o=vh(e,n,i)),Object(I["a"])(o.pipe(Object(W["a"])((function(e){return gh(t,n,e)})),Object(Su["a"])(n.latest$),Object(W["a"])((function(e){var r=Xm(e,2),a=r[0],o=r[1];return Oh(t,n,a,o)})),Object($t["a"])((function(e){return Object(C["a"])(Ca.failure(e,t.meta))}))),a)})))})))},ih=function(e,t,n){Hm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(vc,Object(W["a"])((function(e){return e.pipe(Object(vm["a"])(),Object(Su["a"])(c),Object(B["a"])((function(e){var t=Xm(e,2),n=Xm(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===jo.open&&!!a})),Object(gm["a"])((function(e){var t=Xm(e,2),n=Xm(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(Ti["a"])(o):Object(C["a"])(1)})),Object(Bi["a"])((function(e){var t=Xm(e,2),n=Xm(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,f=c.tokenNetwork,p=c.partner.address,d=dc(c),b=d.ownCapacity,y=d.partnerCapacity,m={type:qn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:f,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:p,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(P["a"])((function(){return Po(i,m,{log:r})})).pipe(Object(M["a"])((function(e){return zr({message:e},{roomName:l})})),Object($t["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),L["a"]})))})))})))},ch=function(e,t,n){Hm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(vc,Object(W["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Su["a"])(c),Object(B["a"])((function(e){var t=Xm(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===jo.open&&!!a&&!(null===o||void 0===o?void 0:o[Re.NO_MEDIATE])})),Object(W["a"])((function(e){var t=Xm(e,2),n=t[0],c=t[1].pfsRoom,s={type:qn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:nh(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Bt["a"])(Po(i,s,{log:r})).pipe(Object(M["a"])((function(e){return zr({message:e},{roomName:c})})),Object($t["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),L["a"]})))})))},sh=function(e,t,n){Hm(e),Hm(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(ru["a"])([i.pipe(Xi("pfs")),i.pipe(Xi("confirmationBlocks"))]).pipe(Object(Bi["a"])((function(e){var t=Xm(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?L["a"]:en(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Su["a"])(c),Object(B["a"])((function(e){var t=Xm(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object(Ni["a"])(0),Object(M["a"])(tn(a)),Object(B["a"])(wt)).pipe(Object(Di["a"])((function(e){var t=Xm(e,1),n=t[0];return n})),Object(W["a"])((function(e){return e.pipe(Object(Bi["a"])((function(e){var t=Xm(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return L["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(C["a"])({service:n,valid:!1}).pipe(Object(Nf["a"])(new Date(o.toNumber()))):L["a"];return Object(I["a"])(Object(C["a"])({service:n,valid:!0}),i)})))})),Object(Li["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(Bm(e),[n]):e}),[]),Object(Pi["a"])(),Object(Ft["a"])(1e3),Object(M["a"])((function(e){return Ia({pfsList:e})})))})))},uh=function(e,t,n){Hm(e),Hm(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(Xi("state","blockNumber"),Object(Wt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(Su["a"])(a),Object(B["a"])((function(e){var t=Xm(e,2),n=t[0],r=t[1].udcBalance;return!r.eq(n)})),Object(M["a"])((function(e){var t=Xm(e,1),n=t[0];return Ua.success(void 0,{totalDeposit:n})})))};function lh(e,t,n,r,a){var o=Xm(e,2),i=o[0],c=o[1],s=Xm(t,2),u=s[0],l=s[1],f=Xm(n,2),p=f[0],d=f[1],b=r.pollingInterval,y=r.minimumAllowance,m=a.log;return Object(P["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address),c.functions.effectiveBalance(l)])})).pipe(Object(W["a"])((function(e){var t=Xm(e,3),n=t[0],r=t[1],a=t[2];return mt(a.add(p).eq(d),[dt.UDC_DEPOSIT_OUTDATED,{requested:d.toString(),current:a.toString()}]),gc([n,r,p],i,c.address,dt.RDN_APPROVE_TRANSACTION_FAILED,{log:m,minimumAllowance:y})})),Object(W["a"])((function(){return c.functions.deposit(l,d)})),bc("deposit",dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:m}),hc(b,void 0,void 0,{log:m}))}var fh=function(e,t,n){Hm(t);var r=n.userDepositContract,a=n.getTokenContract,o=n.address,i=n.log,c=n.signer,s=n.main,u=n.config$,l=r.functions.token();return e.pipe(Object(B["a"])(Ua.request.is),Object(Iu["a"])((function(e){return Object(P["a"])((function(){return l})).pipe(Object(Su["a"])(u),Object(W["a"])((function(t){var n,u=Xm(t,2),l=u[0],f=u[1],p=Ul({signer:c,address:o,main:s},null!==(n=e.payload.subkey)&&void 0!==n?n:f.subkey),d=p.signer,b=p.address,y=Ml(a(l),d),m=Ml(r,d);return lh([y,m],[b,o],[e.payload.deposit,e.meta.totalDeposit],f,{log:i})})),Object(M["a"])((function(t){var n=Xm(t,2),r=n[1];return Ua.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object($t["a"])((function(t){return Object(C["a"])(Ua.failure(t,e.meta))})))})))};function ph(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Xm(e,2),u=s[1],l=dc(u),f=l.partnerUnlocked;return f.isZero()?L["a"]:Object(ru["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n,r=Xm(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&f.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(Au["a"])(1),Object(W["a"])((function(e){var i=Xm(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,f=u.partner.balanceProof,p=Ao(f),d=Object(_["concat"])([po(u.tokenNetwork,20),po(r.chainId,32),po(ko.BALANCE_PROOF_UPDATE,32),po(u.id,32),po(p,32),po(f.nonce,32),po(f.additionalHash,32),po(f.signature,65)]);return Object(Bt["a"])(a.signMessage(d)).pipe(Object(W["a"])((function(e){return Po(a,{type:qn.MONITOR_REQUEST,balance_proof:{chain_id:f.chainId,token_network_address:f.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:f.nonce,balance_hash:p,additional_hash:f.additionalHash,signature:f.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return zr({message:e},{roomName:l})})))})),Object($t["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),L["a"]})))}}var dh=function(e,t,n){return Hm(e),Hm(t),n.latest$.pipe(Object(Ni["a"])("state"),vc,Object(Su["a"])(n.config$),Object(W["a"])((function(e){var t=Xm(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(Pi["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(vm["a"])(),Object(gm["a"])((function(e){var t=Xm(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(Ti["a"])(a):Object(C["a"])(1)})),Object(Bi["a"])(ph(n)))})))},bh=function(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ba.request.is),Object(W["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(Iu["a"])((function(e){var n=Xm(e,2),s=n[0],u=n[1],l=Ml(r,i),f=s.meta.amount;return Object(P["a"])((function(){return mt(f.gt(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:f.toString()}]),mt(u.sub(f).gte(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:f.toString()}]),l.functions.planWithdraw(f)})).pipe(bc("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),hc(c.pollingInterval,void 0,void 0,{log:o}),Object(W["a"])((function(e){var n=Xm(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(Xi("blockNumber"),Object(Wt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(F["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ba.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object($t["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(C["a"])(Ba.failure(e,s.meta))})))})))},yh=function(e,t,n){Hm(e),Hm(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ba.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},mh=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ba.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object(W["a"])((function(e){return t.pipe(Object(Ni["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(Ci["a"])(e))})),Object(W["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(Iu["a"])((function(e){var n=Xm(e,2),s=n[0],u=n[1],l=Ml(a,i);return Object(P["a"])((function(){return mt(u.gt(k["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(bc("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),hc(c.pollingInterval,void 0,void 0,{log:r}),Object(Iu["a"])((function(e){var n=Xm(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(Xi("blockNumber"),Object(Wt["a"])((function(){return l.functions.balances(o)})),Object(F["a"])((function(e){return e.lt(u)})),Object(M["a"])((function(e){return Fa({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object($t["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(C["a"])(Ba.failure(e,s.meta))})))})))},hh=function(e,t,n){Hm(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(Xi("confirmationBlocks"),Object(Bi["a"])((function(e){return en(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(M["a"])(tn(a)),Object(B["a"])(wt),Object(B["a"])((function(e){var t=Xm(e,6),n=t[5];return n===o})),Object(Su["a"])(t,i),Object(M["a"])((function(e){var t=Xm(e,3),n=Xm(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,f=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),p=s.blockNumber;if(f&&p)return Wa({tokenNetwork:r,partner:f.partner.address,id:f.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:p,confirmed:p+l<=u.blockNumber||void 0})})),Object(B["a"])(wt))};function vh(e,t,n){return e.pipe(Object(B["a"])(Bn(ur,{address:n})),Object(Au["a"])(1),Object(W["a"])((function(e){if(ur.success.is(e))return t.latest$.pipe(Object(F["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function gh(e,t,n){var r=n.state,a=n.presences,o=n.config;wh(e,r,a);var i=e.meta,c=i.tokenNetwork,s=i.target,u=i.value;if(e.payload.paths)return Object(C["a"])({paths:e.payload.paths,iou:void 0});if(!0===Dm(r,a,c,s,s,u))return Object(C["a"])({paths:[{path:[t.address,e.meta.target],fee:k["Zero"]}],iou:void 0});if(_h(e,o))throw new yt(dt.PFS_DISABLED);return kh(e,t)}function Oh(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Bt["a"])(d.a.mark((function s(){var u;return d.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!xh(n)){s.next=6;break}return s.next=4,Pa({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,La(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!Dh(c)){s.next=13;break}throw new yt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new yt(dt.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=jh(e,t,r,i),!u.length){s.next=20;break}return s.next=18,Ca.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new yt(dt.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function wh(e,t,n){var r,a=e.meta,o=a.tokenNetwork,i=a.target,c=a.value;mt(Object.values(t.tokens).includes(o),[dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:o}]),mt(n[i].payload.available,[dt.PFS_TARGET_OFFLINE,{target:i}]),mt(!(null===(r=n[i].payload.caps)||void 0===r?void 0:r[Re.NO_RECEIVE]),[dt.PFS_TARGET_NO_RECEIVE,{target:i}]),mt(Object.values(t.channels).some((function(e){return!0===Dm(t,n,o,e.partner.address,i,c)})),dt.PFS_NO_ROUTES_BETWEEN_NODES)}function _h(e,t){var n=t.pfs,r=null===e.payload.pfs,a=!e.payload.pfs&&null===n;return r||a}function kh(e,t){var n=e.meta,r=n.tokenNetwork,a=n.target,o=n.value;return t.config$.pipe(Object(F["a"])(),Object(W["a"])((function(n){return Eh(e.payload.pfs,n.pfs,t).pipe(Object(W["a"])((function(e){return Th(e,r,t)})),Object(W["a"])((function(e){var i=e.pfs,c=e.iou;return Ah(i,c,r,t.address,a,o,n)})),Object(M["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return Sh(t,r,a,n)})))})))}function jh(e,t,n,r){var a=t.address,o=t.log,i=n.state,c=n.presences,s=[],u=new Set;if(r){var l,f=Mm(r);try{for(f.s();!(l=f.n()).done;){var p=l.value,d=p.path,b=p.fee,y=Nh(d,a),m=y[0],h=!1,v="";if(!u.has(m)){if(0===s.length){var g=e.meta,O=g.tokenNetwork,w=g.target,_=g.value,k=Dm(i,c,O,m,w,_);h=!0===k,v="string"===typeof k?k:""}else m!==s[0].path[0]?v="path: already selected another recipient":b.gt(s[0].fee)?v="path: already selected a smaller fee":h=!0;h?s.push({path:y,fee:b}):(o.warn("Invalidated received route. Reason:",v,"Route:",y),u.add(m))}}}catch(j){f.e(j)}finally{f.f()}}return s}function Eh(e,t,n){if(e)return Object(C["a"])(e);if(t)return Cm(t,n);var r=n.log,a=n.latest$;return a.pipe(Object(Ni["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object(W["a"])((function(e){return Im(e,n)})),Object(Si["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(Ni["a"])(0))}function Th(e,t,n){return e.price.isZero()?Object(C["a"])({pfs:e,iou:void 0}):ah(e,t,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))}function Ah(e,t,n,r,a,o,i){var c=i.httpTimeout,s=i.pfsMaxPaths,u=mo({from:r,to:a,value:Et(32).encode(o),max_paths:s,iou:t?Vm(Vm({},t),{},{amount:Et(32).encode(t.amount),expiration_block:Et(32).encode(t.expiration_block),chain_id:Et(32).encode(t.chain_id)}):void 0});return Object(Cf["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:u}).pipe(Object(Df["a"])(c),Object(W["a"])(function(){var e=Zm(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.text();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",{pfsResponse:e.t0,responseText:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function Sh(e,t,n,r){var a=r.pfsSafetyMargin,o=r.pfsMaxPaths,i=yo(t);if(e.ok){var c=Ot(ra,i).result.filter((function(e,t){return t<o})),s=c.map((function(e){var t=e.path,n=e.estimated_fee,r=n.mul(Math.round(1e6*a)).div(1e6);return{path:t,fee:r}}));return{paths:s,iou:n}}var u=Ot(th,i);return{iou:n,error:u}}function xh(e){var t=e.paths,n=e.error;return void 0!==t||Dh(n)}function Nh(e,t){return e[0]===t?e.slice(1):e}function Dh(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rh(Object(n),!0).forEach((function(t){Ih(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ih(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ph(e,t){return Fh(e)||Bh(e,t)||Uh(e,t)||Lh()}function Lh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uh(e,t){if(e){if("string"===typeof e)return Mh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mh(e,t):void 0}}function Mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fh(e){if(Array.isArray(e))return e}function Wh(e,t,n){var r=t.pipe(Xi("config"));return Object(ru["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=Ph(t,2),a=r[0],o=r[1],i=Ch(Ch({},e),a),c=null===a.caps?a.caps:Ch(Ih({},Re.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return Ch(Ch({},i),{},{caps:c})})),Object(Pi["a"])(uu.a))}function $h(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(B["a"])(Ua.success.is),Object(Ni["a"])("meta","totalDeposit"),Object(ou["a"])(k["MaxUint256"])),c=Wh(r,t,i),s=wu(e),u=e.pipe(Object(B["a"])(Ia.is),Object(Ni["a"])("payload","pfsList"),Object(ou["a"])([])),l=e.pipe(Object(B["a"])(pr.is),Object(Li["a"])((function(e,t){return t.payload?Ch(Ch({},e),{},Ih({},t.meta.address,t.payload)):wi()(t.meta.address,e)}),{}),Object(ou["a"])({}));return Object(au["a"])((function(){var e=c.pipe(Xi("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(Xi("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(ru["a"])([Object(ru["a"])([e,t,c,s,u,l]),Object(ru["a"])([i])]).pipe(Object(M["a"])((function(e){var t=Ph(e,2),n=Ph(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Ph(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var Hh=Ch(Ch(Ch(Ch({},s),u),l),f),qh=function(e,t,n){var r=e.pipe(Object(B["a"])(Pn(Va))),a=e.pipe(Object(Mi["a"])(cu()(Pn(Va)),!0)),o=t.pipe(Object(Ri["a"])(r));return Object(au["a"])((function(){return $h(a,o,n).subscribe(n.latest$)}),(function(){return Object(Bt["a"])(Object.values(Hh)).pipe(Object(W["a"])((function(e){return e(a,o,n)})),Object($t["a"])((function(e){return n.log.error("Fatal error:",e),Object(C["a"])(Va({reason:e}))})),Object(Ri["a"])(r))}))};function Vh(e){return Zh(e)||Gh(e)||ev(e)||Kh()}function Kh(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gh(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zh(e){if(Array.isArray(e))return tv(e)}function Xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(n),!0).forEach((function(t){Qh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jh(e,t){return rv(e)||nv(e,t)||ev(e,t)||zh()}function zh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ev(e,t){if(e){if("string"===typeof e)return tv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tv(e,t):void 0}}function tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rv(e){if(Array.isArray(e))return e}function av(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ov(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){av(o,r,a,i,c,"next",e)}function c(e){av(o,r,a,i,c,"throw",e)}i(void 0)}))}}function iv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sv(e,t,n){return t&&cv(e.prototype,t),n&&cv(e,n),e}var uv=function(){function e(t,n,r,a,o,i,c){var s,u,l,f,p,b=this;iv(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new D["a"](1);this.state$=h.pipe(Xi("state")),this.action$=h.pipe(Xi("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(Xi("channels"),Object(M["a"])(Ll)),this.transfers$=Pl(this.state$),this.events$=this.action$.pipe(Object(B["a"])(Pn(Za))),this.getTokenInfo=N()(function(){var e=ov(d.a.mark((function e(t){var n,r,a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.deps.getTokenContract(t),e.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=e.sent,a=Jh(r,4),o=a[0],i=a[1],c=a[2],s=a[3],mt(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),e.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),this.deps={latest$:h,config$:h.pipe(Xi("config")),matrix$:new R["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:K.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return Q.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return ne.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:ce.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:he.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),monitoringServiceContract:Se.connect(a.MonitoringService.address,null!==(p=null===c||void 0===c?void 0:c.signer)&&void 0!==p?p:r),main:c},this.userDepositTokenAddress=N()(ov(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(nu,o,Object(j["a"])(v,this.epicMiddleware)),$h(Object(C["a"])(Ka({})),Object(C["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return sv(e,[{key:"start",value:function(){var t=this;mt(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:this.deps.network,"raiden-ts":e.version,"raiden-contracts":e.contractVersion});var n={complete:function(){return t.epicMiddleware=null}};this.deps.latest$.subscribe(n),this.epicMiddleware.run(qh),this.epicMiddleware=void 0,this.store.dispatch(Ka({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch(Va({reason:De.STOP}))}},{key:"getBlockNumber",value:function(){var e=ov(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfig",value:function(e){this.store.dispatch(Ka(Ot(bn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Ul(this.deps,this.config.subkey).address,mt(Nt.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(){var e=ov(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null!==n&&void 0!==n?n:Ul(this.deps,this.config.subkey).address,mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{address:n}],this.log.info),mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),r=this.deps.getTokenContract(t),e.abrupt("return",r.functions.balanceOf(n));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTokenList",value:function(){var e=ov(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Yh(Yh({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{},{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=ov(d.a.mark((function e(t){var n;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.state.tokens[t],!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.deps.registryContract.token_to_token_networks(t);case 6:return n=e.sent,mt(n&&n!==k["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Jn({token:t,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},a=b.length>3?b[3]:void 0,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),e.next=6,this.monitorToken(t);case 6:return o=e.sent,mt(!r.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=r.settleTimeout?Ot(Et(4),r.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=r.deposit?Ot(Et(32),r.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:n},u=Wn(zn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Wn(tr,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(zn.request(Yh(Yh({},r),{},{settleTimeout:i,deposit:c}),s)),e.next=16,u;case 16:return f=e.sent,null===a||void 0===a||a({type:Ae.OPENED,payload:{txHash:f}}),e.next=20,this.state$.pipe(Xi("channels",fc({tokenNetwork:o,partner:n}),"state"),Object(F["a"])((function(e){return e===jo.open}))).toPromise();case 20:if(null===a||void 0===a||a({type:Ae.CONFIRMED,payload:{txHash:f}}),!l){e.next=26;break}return e.next=24,l;case 24:p=e.sent,null===a||void 0===a||a({type:Ae.DEPOSITED,payload:{txHash:p}});case 26:return e.abrupt("return",f);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositChannel",value:function(){var e=ov(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:{},o=a.subkey,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),i=this.state,c=i.tokens[t],mt(c,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),s=Ot(Et(32),r,dt.DTA_INVALID_DEPOSIT,this.log.info),u={tokenNetwork:c,partner:n},l=Wn(tr,u,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(tr.request({deposit:s,subkey:o},u)),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],mt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Wn(rr,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(rr.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],mt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Wn(or,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(or.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=ov(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),n={address:t},r=Wn(ur,n,this.action$),this.store.dispatch(ur.request(void 0,n)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=ov(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f,p,b,y=this,m=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:{},mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],mt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Ot(Et(32),r,dt.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==a.paymentId?Ot(Et(8),a.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):Ju(),s=a.paths?Ot(aa,a.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=a.pfs?Ot(oa,a.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,l=a.lockTimeout?this.state.blockNumber+a.lockTimeout:void 0,mt(void 0===a.secret||St.is(a.secret),dt.RDN_INVALID_SECRET,this.log.info),mt(void 0===a.secrethash||At.is(a.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),f=a.secret?a.secret:a.secrethash?void 0:Qu(),p=a.secrethash||Yu(f),mt(!f||Yu(f)===p,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),b={tokenNetwork:o,target:n,value:i},e.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Bn(Ca,b)),Object(M["a"])((function(e){if(Ca.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return y.store.dispatch(Ca.request({paths:s,pfs:u},b)),L["a"]}))).pipe(Object(W["a"])((function(e){return Object(I["a"])(y.action$.pipe(Object(B["a"])(Pn([ya,ba.failure])),Object(F["a"])((function(e){return e.meta.direction===sa.SENT&&e.meta.secrethash===p})),Object(M["a"])((function(e){if(ba.failure.is(e))throw e.payload;return tl(e.meta)}))),Object(P["a"])((function(){return y.store.dispatch(ba.request({tokenNetwork:o,target:n,value:i,paths:e,paymentId:c,secret:f,expiration:l},{secrethash:p,direction:sa.SENT})),L["a"]})))}))).toPromise());case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"waitTransfer",value:function(){var e=ov(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=rl(t),c=i.direction,s=i.secrethash,mt(s in this.state[c],dt.RDN_UNKNOWN_TRANSFER,this.log.info),u=il(this.state[c][s]),!u.completed){e.next=9;break}if(!u.success){e.next=8;break}return e.abrupt("return",null===(r=null===(n=this.state[c][s].secretRequest)||void 0===n?void 0:n[1])||void 0===r?void 0:r.amount);case 8:throw new yt(dt.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return e.next=11,Wn(ba,{secrethash:s,direction:c},this.action$);case 11:return e.abrupt("return",null===(o=null===(a=this.state[c][s].secretRequest)||void 0===a?void 0:a[1])||void 0===o?void 0:o.amount);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=ov(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],mt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Ot(Et(32),r),c=a.pfs?Ot(oa,a.pfs):void 0,s={tokenNetwork:o,target:n,value:i},u=Wn(Ca,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Ca.request({pfs:c},s)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=ov(d.a.mark((function e(t,n,r){var a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),a=this.state.tokens[t],mt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=Ot(Et(32),r),i={tokenNetwork:a,target:n,value:o},c=Wn(Ca,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Ca.request({pfs:null},i)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"findPFS",value:function(){var e=ov(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(C["a"])([this.config.pfs]):this.deps.latest$.pipe(Xi("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object(W["a"])((function(e){return Im(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},a=r.subkey,o=r.to,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),mt(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),i=Ul(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,u=pe.connect(t,c),l=null!==o&&void 0!==o?o:s,mt(Nt.is(l),[dt.DTA_INVALID_ADDRESS,{beneficiary:l}],this.log.info),f=Ot(Et(32),n,dt.DTA_INVALID_AMOUNT),e.next=11,Bl(u,"mintFor",[f,l],dt.RDN_MINT_FAILED,{log:this.log});case 11:return p=e.sent,e.next=14,Wl(p,this.deps,1);case 14:return e.abrupt("return",p.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=ov(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Kl(this.deps.latest$);case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(Vh(e),Vh(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},a=r.subkey,mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Ot(Et(32),t,dt.DTA_INVALID_DEPOSIT,this.log.info),mt(o.gt(k["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),e.next=6,Kl(this.deps.latest$);case 6:return i=e.sent,c={totalDeposit:i.add(o)},s=Wn(Ua,c,this.action$).then((function(e){return null===e||void 0===e?void 0:e.txHash})),this.store.dispatch(Ua.request({deposit:o,subkey:a},c)),e.next=12,s;case 12:return u=e.sent,null===n||void 0===n||n({type:Ae.DEPOSITED,payload:{txHash:u}}),l=Wn(Ua,c,this.action$,!0).then((function(e){return e.txHash})),e.next=17,l;case 17:return u=e.sent,null===n||void 0===n||n({type:Ae.CONFIRMED,payload:{txHash:u}}),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transferOnchainBalance",value:function(){var e=ov(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,b,y,m,h=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:k["MaxUint256"],r=h.length>2&&void 0!==h[2]?h[2]:{},a=r.subkey,o=r.gasPrice,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=Ul(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,!o){e.next=9;break}e.t0=Object(_["bigNumberify"])(o),e.next=12;break;case 9:return e.next=11,this.deps.provider.getGasPrice();case 11:e.t0=e.sent;case 12:return u=e.t0,l=Object(_["bigNumberify"])(21e3),e.next=16,this.getBalance(s);case 16:return f=e.sent,p=f.sub(u.mul(l)),mt(p.gt(k["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:p.toString()}],this.log.info),b=p.lte(n)?p:Object(_["bigNumberify"])(n),e.next=22,c.sendTransaction({to:t,value:b,gasPrice:u,gasLimit:l});case 22:return y=e.sent,e.next=25,y.wait();case 25:return m=e.sent,mt(m.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),e.abrupt("return",y.hash);case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnchainTokens",value:function(){var e=ov(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:k["MaxUint256"],a=b.length>3&&void 0!==b[3]?b[3]:{},o=a.subkey,mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{to:n}],this.log.info),mt(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=Ul(this.deps,null!==o&&void 0!==o?o:this.config.subkey),c=i.signer,s=i.address,u=Ml(this.deps.getTokenContract(t),c),e.next=9,this.getTokenBalance(t,s);case 9:return l=e.sent,f=l.lte(r)?l:Object(_["bigNumberify"])(r),e.next=13,Bl(u,"transfer",[n,f],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 13:return p=e.sent,e.abrupt("return",p.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=ov(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={amount:Ot(Et(32),t,dt.DTA_INVALID_AMOUNT,this.log.error)},r=Wn(Ba,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ba.request(void 0,n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"withdrawChannel",value:function(){var e=ov(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f,p,b;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Nt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Nt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),a=this.state.tokens[t],mt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[fc({tokenNetwork:a,partner:n})],mt((null===o||void 0===o?void 0:o.state)===jo.open,dt.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=dc(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=Ot(Et(32),null!==r&&void 0!==r?r:c,dt.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),f=this.state.blockNumber+2*this.config.revealTimeout,p={direction:sa.SENT,tokenNetwork:a,partner:n,totalWithdraw:l,expiration:f},b=Wn(Aa,p,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Aa.request(void 0,p)),e.abrupt("return",b);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(){var e=ov(d.a.mark((function e(t,n,r,a,o,i){var c,s,u,l,f,p,b,y,m,h,v,g,O;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="string"===typeof t?new w["JsonRpcProvider"](t):t instanceof w["JsonRpcProvider"]?t:new w["Web3Provider"](t),an(c),e.next=4,c.getNetwork();case 4:if(s=e.sent,a){e.next=9;break}u=Dl(s),e.next=17;break;case 9:if("string"!==typeof a){e.next=16;break}return mt(Nt.is(a),[dt.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:a}]),e.next=13,ql(c,a);case 13:u=e.sent,e.next=17;break;case 16:u=a;case 17:return e.next=19,Il(n,c,i);case 19:return l=e.sent,f=l.signer,p=l.address,b=l.main,e.next=25,gi(s,u,p,r,o&&Ot(bn,o));case 25:return y=e.sent,m=y.state,h=y.onState,v=y.onStateComplete,g=y.defaultConfig,mt(p===m.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:p,state:m.address}]),mt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),O=new this(c,s,f,u,m,g,b),h&&O.state$.subscribe(h,v,v),e.abrupt("return",O);case 35:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"version",get:function(){return Ne.sdk}},{key:"contractVersion",get:function(){return Ne.contracts}}]),e}()}});
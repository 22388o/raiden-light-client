(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-249e285a":"16bcc3de","chunk-376f281f":"94dd646c","chunk-2cab293b":"e82c07f3","chunk-323bf2d2":"23fd017b","chunk-6b04dd58":"a0ef93cb","chunk-a169a776":"e127a577","chunk-0a63347b":"6d73ec36","chunk-4908d41a":"3ac6a661","chunk-4d31dd79":"b680b2e6","chunk-62c2f116":"44b3339e","chunk-7baa35c7":"45a7c46d","chunk-6e0a2b0a":"ffd66634","chunk-33ae5e4a":"e5a344ba","chunk-0b566774":"e8c4ad3e","chunk-27d934ec":"2a6c1dc9","chunk-56de7314":"18883c28","chunk-56305510":"64ab9ff2","chunk-b435d1a2":"7b5dc0df","chunk-52114ca2":"9e3bb4db","chunk-9714f45e":"1a79d540","chunk-3d571b96":"0051f169","chunk-7ee7822e":"5a29fa50","chunk-d86182e6":"e36106cf"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-249e285a":1,"chunk-376f281f":1,"chunk-2cab293b":1,"chunk-323bf2d2":1,"chunk-6b04dd58":1,"chunk-a169a776":1,"chunk-0a63347b":1,"chunk-4908d41a":1,"chunk-4d31dd79":1,"chunk-62c2f116":1,"chunk-7baa35c7":1,"chunk-6e0a2b0a":1,"chunk-33ae5e4a":1,"chunk-0b566774":1,"chunk-27d934ec":1,"chunk-56de7314":1,"chunk-56305510":1,"chunk-b435d1a2":1,"chunk-52114ca2":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-249e285a":"0be479e4","chunk-376f281f":"36b3d7bb","chunk-2cab293b":"29b9440f","chunk-323bf2d2":"39812dc5","chunk-6b04dd58":"7bcf6af2","chunk-a169a776":"e7cb60cc","chunk-0a63347b":"d6328ca2","chunk-4908d41a":"1747eb60","chunk-4d31dd79":"507df6a3","chunk-62c2f116":"cbea7af2","chunk-7baa35c7":"430e28b1","chunk-6e0a2b0a":"b60c66cc","chunk-33ae5e4a":"a429efeb","chunk-0b566774":"22f04ebe","chunk-27d934ec":"2f2d8b85","chunk-56de7314":"aad0ea22","chunk-56305510":"102936a6","chunk-b435d1a2":"a1b68e66","chunk-52114ca2":"20c8978a","chunk-9714f45e":"31d6cfe0","chunk-3d571b96":"31d6cfe0","chunk-7ee7822e":"31d6cfe0","chunk-d86182e6":"31d6cfe0"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0006f":function(e,t,n){"use strict";var r=n("42f6"),a=n.n(r);a.a},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("1796"),i=n("ad5b");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],h.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],h.prototype,"fullscreen",void 0),h=Object(o["a"])([Object(i["a"])({})],h);var m=h,v=m,g=(n("71a0"),n("22b8")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("4f30"),a=n("a3d5"),o=n("230b"),i=n.n(o),c=n("5287"),s=n.n(c);function u(e,t){return b(e)||d(e,t)||p(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=function(){function e(){y(this,e)}return m(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("1796"),a=n("ad5b"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=y();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t,n){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{token:e,target:t},query:{amount:n}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"165c":function(e,t,n){"use strict";var r=n("7755"),a=n.n(r);a.a},"1a83":function(e,t,n){"use strict";var r=n("953f"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("f77a"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1f7b":function(e,t,n){"use strict";var r=n("3644"),a=n.n(r);a.a},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("1796"),i=n("ad5b"),c=n("2b7f"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=h(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:p({},Object(c["e"])(["defaultAccount"]))})],w);var _=w,k=_,j=(n("1a83"),n("22b8")),E=n("bc2d"),T=n.n(E),x=n("bbed"),S=Object(j["a"])(k,r,a,!1,null,"18cb3a6d",null);t["a"]=S.exports;T()(S,{VImg:x["a"]})},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},3644:function(e,t,n){},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"42f6":function(e,t,n){},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4c0d":function(e,t,n){},"4cb9":function(e,t,n){},"4db7":function(e,t,n){"use strict";var r=n("c20f"),a=n.n(r);a.a},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},6:function(e,t){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("1796"),i=n("0a08"),c=n("ad5b");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return p(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("22b8")),k=n("bc2d"),j=n.n(k),E=n("17c7"),T=n("a5f2"),x=n("53b9"),S=n("0002"),A=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=A.exports;j()(A,{VBtn:E["a"],VCard:T["a"],VDialog:x["a"],VIcon:S["a"]})},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("a534"),a=n.n(r);a.a},"72ec":function(e,t,n){"use strict";var r=n("cd46"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("1796"),i=n("ad5b");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=h();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){p(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("8652"),n("22b8")),_=n("bc2d"),k=n.n(_),j=n("17c7"),E=n("cb80"),T=n("0002"),x=n("7495"),S=Object(w["a"])(O,r,a,!1,null,"bff458d8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:x["a"]})},"753f":function(e,t,n){"use strict";var r=n("ca95"),a=n.n(r);a.a},"756c":function(e,t,n){e.exports=n.p+"img/notification_block.ad9b07ff.svg"},7755:function(e,t,n){},"77fd":function(e,t,n){"use strict";var r=n("1796"),a=n("ad5b");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8652:function(e,t,n){"use strict";var r=n("4c0d"),a=n.n(r);a.a},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return B}));var r=n("4bf2"),a=n.n(r),o=n("6f91"),i=n.n(o),c=n("e55b");function s(e){return p(e)||l(e)||m(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return v(e)}function f(e,t){return y(e)||b(e,t)||m(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function h(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function m(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function x(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function S(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?x(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?_(_({},e),{},{payload:x(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function A(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return D.apply(this,arguments)}function D(){return D=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var R=/^raiden:(0x[0-9a-f]{40})$/i;function C(e){return I.apply(this,arguments)}function I(){return I=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function P(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return C(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=S(n);i&&j.put(E,_({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,_({logger:r,level:e,message:n.map(A)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var U=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function M(e){var t,n=h(U);try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,p,f,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,p=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,f=new Date(n.key).toISOString(),d=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(f).concat(d).concat(b," [").concat(s,"] \t=> ").concat(p,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=M(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("1796"),i=n("ad5b"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return p(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("72ec"),n("22b8")),k=n("bc2d"),j=n.n(k),E=n("0404"),T=Object(_["a"])(w,r,a,!1,null,"4eb33862",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"953f":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_TOO_EXPENSIVE":"Pathfinding Service price higher than pfsMaxFee.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_DEPOSIT_OUTDATED":"The UDC contains a target balance different than requested deposit","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("49c0");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},a534:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.11.1","contracts":"0.37.1"}')},c20f:function(e,t,n){},c55c:function(e,t,n){},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},ca95:function(e,t,n){},cd46:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("4f30"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("transition",{attrs:{name:"slide"}},[n("router-view",{attrs:{name:"notifications"}})],1),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-snackbar")],1)},o=[],i=n("1796"),c=n("ad5b"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("div",{staticClass:"app-header__back"},[e.canGoBack?r("v-btn",{staticClass:"app-header__back-button",attrs:{height:"40px",width:"40px",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da")}})],1):e._e()],1),r("div",{staticClass:"app-header__title"},[r("span",{staticClass:"app-header__title__route"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__title__network"},[e._v(" "+e._s(e.network)+" ")])]),r("div",{staticClass:"app-header__icons"},[e.showTitleOnly?e._e():r("v-btn",{staticClass:"app-header__notifications-button",attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1),e.isDisclaimerRoute?e._e():r("header-identicon",{staticClass:"app-header__icons__identicon",nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)])},l=[],p=n("2b7f"),f=n("80bf"),d=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=x();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=Object(p["a"])("notifications"),N=A.mapState,D=A.mapMutations,R=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===f["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:d["a"],AddressDisplay:b["a"]},computed:m(m(m({},Object(p["e"])(["defaultAccount"])),N(["newNotifications"])),Object(p["c"])(["network","isConnected"])),methods:m({},D(["notificationsViewed"]))})],R);var C=R,I=C,P=(n("4db7"),n("22b8")),L=n("bc2d"),U=n.n(L),M=n("2231"),B=n("17c7"),F=n("bbed"),W=Object(P["a"])(I,u,l,!1,null,"362bc976",null),$=W.exports;U()(W,{VBadge:M["a"],VBtn:B["a"],VImg:F["a"]});var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},V=[],q=n("0a08");function K(e){return K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function X(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Q(e,t)}function z(e){var t=te();return function(){var n,r=ne(e);if(t){var a=ne(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}var re=function(e){X(n,e);var t=z(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Y(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);re=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],re);var ae=re,oe=ae,ie=n("0002"),ce=n("4be2"),se=Object(P["a"])(oe,H,V,!1,null,null,null),ue=se.exports;U()(se,{VIcon:ie["a"],VSnackbar:ce["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function fe(e){return fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function he(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e){var t=we();return function(){var n,r=_e(e);if(t){var a=_e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}var ke=function(e){he(n,e);var t=ve(n);function n(){var e;return de(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return ye(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);ke=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],ke);var je=ke,Ee=je,Te=Object(P["a"])(Ee,le,pe,!1,null,null,null),xe=Te.exports;U()(Te,{VBtn:B["a"],VSnackbar:ce["a"]});var Se,Ae,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,app:"",rounded:"","max-width":"550px",color:"primary"},on:{input:function(t){return e.setNotificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{icon:"",left:""},on:{click:function(t){return e.dismiss()}}},"v-btn",n,!1),[r("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"2"}},[r("img",{attrs:{src:n("756c")}})]),r("v-col",{staticClass:"notification-area__title"},[r("span",[e._v(" "+e._s(e.notification.title)+" ")])])],1)],1)},De=[];function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fe(e,t)}function We(e){var t=Ve();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Se||(Se={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(Ae||(Ae={}));var Ke={id:-1,title:"",description:"",icon:"",display:!1,duration:5e3,importance:Se.LOW,context:Ae.NONE,received:new Date},Ge=function(e){Be(n,e);var t=We(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.notification=Ke,e}return Me(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ke}},{key:"dismiss",value:function(){this.setNotificationShown(this.notification.id),this.notification=Ie(Ie({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Ge.prototype,"onQueueChange",null),Ge=Object(i["a"])([Object(c["a"])({computed:Ie({},Object(p["c"])("notifications",["notificationQueue"])),methods:Ie({},Object(p["d"])("notifications",["setNotificationShown"]))})],Ge);var Ze=Ge,Ye=Ze,Xe=(n("165c"),n("cb80")),Qe=n("7495"),ze=Object(P["a"])(Ye,Ne,De,!1,null,"1d4a3af2",null),Je=ze.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(ze,{VBtn:B["a"],VCol:Xe["a"],VIcon:ie["a"],VRow:Qe["a"],VSnackbar:ce["a"]});var pt=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));pt=Object(i["a"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:ue,UpdateSnackbar:xe,NotificationSnackbar:Je}})],pt);var ft=pt,dt=ft,bt=(n("1f7b"),n("e370")),yt=n("f43f"),ht=n("d5af"),mt=Object(P["a"])(dt,a,o,!1,null,"670b9005",null),vt=mt.exports;U()(mt,{VApp:bt["a"],VContainer:yt["a"],VMain:ht["a"]});var gt=n("0684");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("2c5b");function wt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_t(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function _t(e,t){if(e){if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n){var r,a=wt(this.children);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o(e);if(null===i)return void n();if(void 0!==i)return void n(i)}}catch(c){a.e(c)}finally{a.f()}n({})}var Et=n("66f9"),Tt=n("f455"),xt=n("87a2"),St=n("a308"),At=n.n(St),Nt=n("473d"),Dt=n.n(Nt),Rt=n("035e"),Ct=n.n(Rt),It=n("95e4"),Pt=n.n(It),Lt=n("d328"),Ut=n.n(Lt),Mt=n("31ec"),Bt=n.n(Mt),Ft=n("e590"),Wt=n.n(Ft),$t=n("12aa"),Ht=n.n($t);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){return Qt(e)||Xt(e)||Yt(e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qt(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e){var t=Object.values(e).map((function(e){return e.id}));return Math.max.apply(Math,Gt(t).concat([0]))+1}var en={notificationDelete:function(e,t){var n=qt({},e.notifications);delete n[t],e.notifications=n},notificationsViewed:function(e){e.newNotifications=!1},notificationAddOrReplace:function(e,t){var n,r,a,o,i,c=e.notifications,s=Object.values(c).filter((function(e){var n=e.txHash;return n&&n===t.txHash})),u=null!==(n=null===(r=s[0])||void 0===r?void 0:r.id)&&void 0!==n?n:Jt(c),l=!(null===(a=s[0])||void 0===a?void 0:a.id),p=qt(qt({},t),{},{id:u,received:new Date,display:l,context:null!==(o=t.context)&&void 0!==o?o:Ae.NONE,duration:null!==(i=t.duration)&&void 0!==i?i:5e3});e.notifications=qt(qt({},c),{},Kt({},p.id,p)),e.newNotifications=!0},setNotificationShown:function(e,t){e.notifications[t].display=!1},clear:function(e){e.notifications=[]}};function tn(e){return on(e)||an(e)||rn(e)||nn()}function nn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rn(e,t){if(e){if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function an(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function on(e){if(Array.isArray(e))return cn(e)}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sn={notifications:function(e){return Object.values(e.notifications).sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications,n=Object.values(t).map((function(e){return e.id}));return Math.max.apply(Math,tn(n).concat([0]))+1},notificationQueue:function(e){return Object.values(e.notifications).filter((function(e){return e.importance===Se.HIGH&&!0===e.display}))}},un=function(){return{notifications:{},newNotifications:!1}},ln=un(),pn=ln,fn={namespaced:!0,mutations:en,state:pn,getters:sn};function dn(e){return hn(e)||yn(e)||_n(e)||bn()}function bn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function hn(e){if(Array.isArray(e))return kn(e)}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){return En(e)||jn(e,t)||_n(e,t)||wn()}function wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _n(e,t){if(e){if("string"===typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function En(e){if(Array.isArray(e))return e}r["a"].use(p["b"]);var Tn={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:xt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:xt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function xn(){return Pt()(Tn)}var Sn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},An=new Et["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Nn=new Et["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),Dn={state:xn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=On(r[n],2),o=a[0],i=a[1];o in e.tokens&&Wt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=vn(vn({},e.tokens[o]),i):e.tokens=vn(vn({},e.tokens),{},gn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=dn(t)},updatePresence:function(e,t){e.presences=vn(vn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted,r=e.stateBackup;Object.assign(e,vn(vn({},xn()),{},{settings:t,disclaimerAccepted:n,stateBackup:r}))},updateTransfers:function(e,t){e.transfers=vn(vn({},e.transfers),{},gn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return At()(Ct()(Dt()(e.channels),(function(e){return!Ht()(e)})),(function(n){var r=Ut()(n,t,Object(xt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Sn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Ht()(r)&&(n=Dt()(r)),n}},openChannels:function(e){return Object.keys(e.channels).length>0},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Tt["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Tt["b"].open}));return Bt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){return Object.values(e.transfers).find((function(e){return e.paymentId.eq(t)}))}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[An.plugin,Nn.plugin],modules:{notifications:fn}},Rn=new p["b"].Store(Dn);function Cn(e){var t=Rn.state.disclaimerAccepted,n=e.name===f["a"].DISCLAIMER;return t||n?!t&&n?null:t&&n?{name:f["a"].HOME}:void 0:{name:f["a"].DISCLAIMER,query:{redirectTo:e.fullPath}}}var In=[f["a"].ACCOUNT_ROOT,f["a"].ACCOUNT_BACKUP,f["a"].ACCOUNT_RAIDEN,f["a"].ACCOUNT_SETTINGS,f["a"].ACCOUNT_WITHDRAWAL,f["a"].ACCOUNT_UDC];function Pn(e){var t,n=Rn.getters.isConnected,r=In.includes(null!==(t=e.name)&&void 0!==t?t:""),a=e.name===f["a"].HOME;if(!r)return n||a?!n&&a?null:n&&a?{name:f["a"].TRANSFER}:void 0:{name:f["a"].HOME,query:{redirectTo:e.fullPath}}}function Ln(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-52114ca2").then(n.bind(null,"c284"))}),r()}function Un(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-33ae5e4a").then(n.bind(null,"47f5"))}),r()}var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("div",{staticClass:"disclaimer"},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1),n("action-button",{staticClass:"disclaimer__accept-button",attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},Bn=[],Fn=n("750b");function Wn(e){return Wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}function qn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kn(e,t)}function Gn(e){var t=Xn();return function(){var n,r=Qn(e);if(t){var a=Qn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){return!t||"object"!==Wn(t)&&"function"!==typeof t?Yn(e):t}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}var zn=function(e){qn(n,e);var t=Gn(n);function n(){var e;return $n(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return Vn(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].HOME}}}]),n}(c["e"]);zn=Object(i["a"])([Object(c["a"])({components:{ActionButton:Fn["a"]}})],zn);var Jn=zn,er=Jn,tr=(n("f673"),n("91cd")),nr=Object(P["a"])(er,Mn,Bn,!1,null,"59dd71ba",null),rr=nr.exports;U()(nr,{VCheckbox:tr["a"],VContainer:yt["a"]});var ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{staticClass:"home__connect-button",attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)},or=[],ir=n("4bf2"),cr=n.n(ir),sr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},ur=[],lr=n("66bc"),pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},fr=[];function dr(e){return dr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),e}function mr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function gr(e){var t=_r();return function(){var n,r=kr(e);if(t){var a=kr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(e,t){return!t||"object"!==dr(t)&&"function"!==typeof t?wr(e):t}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}var jr=function(e){mr(n,e);var t=gr(n);function n(){return br(this,n),t.apply(this,arguments)}return hr(n,[{key:"networkUnsupported",get:function(){return this.reason===xt["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===xt["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===xt["a"].RDN_STATE_MIGRATION}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0})],jr.prototype,"reason",void 0),jr=Object(i["a"])([Object(c["a"])({})],jr);var Er=jr,Tr=Er,xr=(n("753f"),n("53be")),Sr=Object(P["a"])(Tr,pr,fr,!1,null,"7b92b083",null),Ar=Sr.exports;function Nr(e){return Nr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){Cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Pr(e.prototype,t),n&&Pr(e,n),e}function Ur(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}function Mr(e,t){return Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mr(e,t)}function Br(e){var t=$r();return function(){var n,r=Hr(e);if(t){var a=Hr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(e,t){return!t||"object"!==Nr(t)&&"function"!==typeof t?Wr(e):t}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Hr(e){return Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hr(e)}U()(Sr,{VAlert:xr["a"]});var Vr=function(e){Ur(n,e);var t=Br(n);function n(){var e;return Ir(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return Lr(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",Rr(Rr({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0,type:Boolean,default:!1})],Vr.prototype,"visible",void 0),Object(i["a"])([Object(c["d"])({default:!1,required:!0,type:Boolean})],Vr.prototype,"connecting",void 0),Object(i["a"])([Object(c["d"])({required:!0})],Vr.prototype,"hasProvider",void 0),Object(i["a"])([Object(c["b"])()],Vr.prototype,"close",null),Object(i["a"])([Object(c["b"])()],Vr.prototype,"connect",null),Vr=Object(i["a"])([Object(c["a"])({components:{RaidenDialog:lr["a"],ActionButton:Fn["a"],NoAccessMessage:Ar},computed:Object(p["e"])(["accessDenied"])})],Vr);var qr=Vr,Kr=qr,Gr=(n("e4b6"),n("4529")),Zr=Object(P["a"])(Kr,sr,ur,!1,null,"469a86df",null),Yr=Zr.exports;function Xr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Xr(o,r,a,i,c,"next",e)}function c(e){Xr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),e}U()(Zr,{VCardText:Gr["b"],VCardTitle:Gr["c"]});var ta=function(){function e(){zr(this,e)}return ea(e,null,[{key:"provider",value:function(){var e=Qr(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,!t){e.next=5;break}n=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 5:if("undefined"===typeof window.ethereum){e.next=12;break}return window.ethereum.autoRefreshOnNetworkChange=!1,e.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:n=window.ethereum,e.next=13;break;case 12:window.web3&&(n=window.web3.currentProvider);case 13:return n&&n.isMetaMask&&n.on("chainChanged",(function(){return window.location.replace(window.location.origin)})),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return la(e)||ua(e,t)||ca(e,t)||ia()}function ia(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ca(e,t){if(e){if("string"===typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sa(e,t):void 0}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ua(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function la(e){if(Array.isArray(e))return e}function pa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function fa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){pa(o,r,a,i,c,"next",e)}function c(e){pa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return t&&ba(e.prototype,t),n&&ba(e,n),e}ta.injectedWeb3Available=function(){return window.ethereum||window.web3};var ha=function(){function e(){da(this,e)}return ya(e,null,[{key:"contracts",value:function(){var e=fa(cr.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,p;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=oa(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=oa(s,2),l=u[0],p=u[1],e.abrupt("return",ra(ra({},l.contracts),p.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=fa(cr.a.mark((function e(){var t,n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function ma(e){return ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wa(o,r,a,i,c,"next",e)}function c(e){wa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t&&ja(e.prototype,t),n&&ja(e,n),e}function Ta(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function xa(e,t){return xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xa(e,t)}function Sa(e){var t=Da();return function(){var n,r=Ra(e);if(t){var a=Ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Aa(this,n)}}function Aa(e,t){return!t||"object"!==ma(t)&&"function"!==typeof t?Na(e):t}function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ra(e)}var Ca=function(e){Ta(n,e);var t=Sa(n);function n(){var e;return ka(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Ea(n,[{key:"created",value:function(){var e=_a(cr.a.mark((function e(){var t;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ta.injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,ha.configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=_a(cr.a.mark((function e(){var t,n,r,a;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,a=this.stateBackup,this.$store.commit("reset"),this.$store.commit("accessDenied",xt["a"].UNDEFINED),e.next=11,this.$raiden.connect(a,!!n||void 0);case 11:this.connecting=!1,this.accessDenied||(this.connectDialog=!1,this.$router.push(this.navigationTarget));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].TRANSFER}}}]),n}(c["e"]);Ca=Object(i["a"])([Object(c["a"])({computed:ga(ga({},Object(p["e"])(["loading","accessDenied","stateBackup","settings"])),Object(p["c"])(["isConnected","tokens"])),components:{ActionButton:Fn["a"],ConnectDialog:Yr,NoAccessMessage:Ar}})],Ca);var Ia=Ca,Pa=Ia,La=(n("0006f"),Object(P["a"])(Pa,ar,or,!1,null,"168f4240",null)),Ua=La.exports;U()(La,{VCol:Xe["a"],VContainer:yt["a"],VImg:F["a"],VRow:Qe["a"]});var Ma=[{path:"/",name:f["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:rr},{path:"*",redirect:"/"},{path:"/home",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Ua},{path:"/transfer/:token?",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-376f281f"),n.e("chunk-6b04dd58"),n.e("chunk-a169a776"),n.e("chunk-0a63347b")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-376f281f"),n.e("chunk-323bf2d2")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-a169a776"),n.e("chunk-6e0a2b0a")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-376f281f"),n.e("chunk-6b04dd58"),n.e("chunk-27d934ec"),n.e("chunk-56305510")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-376f281f"),n.e("chunk-27d934ec"),n.e("chunk-56de7314")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-376f281f"),n.e("chunk-2cab293b")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:Ln},{path:"/account",beforeEnter:Un,children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-62c2f116")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-4d31dd79")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-376f281f"),n.e("chunk-b435d1a2")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-4908d41a")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-249e285a"),n.e("chunk-7baa35c7")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-376f281f"),n.e("chunk-0b566774")]).then(n.bind(null,"4c07"))}}]}];r["a"].use(Ot["a"]);var Ba=new Ot["a"]({base:"/",mode:"hash",routes:Ma});Ba.beforeEach(jt.bind({children:[Cn,Pn]}));var Fa=Ba,Wa=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var $a=n("a3d5"),Ha=n("49c0"),Va=n("22ee"),qa=n("70de"),Ka=n("a8c1"),Ga=n.n(Ka),Za=n("89d8"),Ya=n("5b8f");function Xa(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Ya["a"]);var Qa=new Ya["a"]({locale:"en",fallbackLocale:"en",messages:Xa()}),za=n("2dfa"),Ja=n.n(za);function eo(e){return eo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}function no(e){var t=co();return function(){var n,r=lo(e);if(t){var a=lo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(e,t){return!t||"object"!==eo(t)&&"function"!==typeof t?ao(e):t}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e){var t="function"===typeof Map?new Map:void 0;return oo=function(e){if(null===e||!so(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return io(e,arguments,lo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),uo(n,e)},oo(e)}function io(e,t,n){return io=co()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&uo(o,n.prototype),o},io.apply(null,arguments)}function co(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function so(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function uo(e,t){return uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uo(e,t)}function lo(e){return lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lo(e)}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t){return mo(e)||ho(e,t)||Oo(e,t)||yo()}function yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ho(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mo(e){if(Array.isArray(e))return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function go(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Oo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Oo(e,t){if(e){if("string"===typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ko(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_o(o,r,a,i,c,"next",e)}function c(e){_o(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t,n){return t&&Eo(e.prototype,t),n&&Eo(e,n),e}var xo=function(){function e(t){jo(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return To(e,[{key:"updateBalances",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=go(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new So(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=ko(cr.a.mark((function t(n,r){var a,o,i,c,s,u=this;return cr.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.configuration();case 3:return o=t.sent,t.next=6,ta.provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=50;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Tt["f"](Tt["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=29,this.monitorPreSetTokens();case 29:return a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type})),Object(qa["a"])((function(){return u.fetchTokenData(Ja()(u.store.getters.tokens.map((function(e){return e.address})).concat(u._userDepositTokenAddress)))}))).subscribe(),a.events$.pipe(Object(Va["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),null===(n=t.caps)||void 0===n?void 0:n[Tt["a"].RECEIVE]){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",vo({},t.payload.token,{address:t.payload.token})),e.next=46;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",vo({},t.meta.address,t.payload.available)),e.next=46;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=46;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=46;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=46;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner);case 31:e.next=46;break;case 33:if("channel/settle/failure"!==t.type){e.next=38;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner);case 36:e.next=46;break;case 38:if("channel/open/success"!==t.type){e.next=43;break}return e.next=41,u.notifyChannelOpenSuccess(t.payload.txBlock,t.payload.txHash,t.payload.confirmed,t.meta.partner);case 41:e.next=46;break;case 43:if("channel/open/failed"!==t.type){e.next=46;break}return e.next=46,u.notifyChannelOpenFailed(t.payload.message);case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=42,this.getBalance();case 42:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=50;break}return t.t2=this.store,t.next=48,this.getBalance(a.address);case 48:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 50:t.next=56;break;case 52:t.prev=52,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?xt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?xt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Ao?xt["a"].INITIALIZATION_FAILED:xt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 56:this.store.commit("loadComplete");case 57:case"end":return t.stop()}}),t,this,[[0,52]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:Qa.t("receiving-disabled-dialog.title"),description:Qa.t("receiving-disabled-dialog.body"),importance:Se.HIGH,context:Ae.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=go(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=ko(cr.a.mark((function e(t,n,r){var a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=$a["a"].toUnits(n,i),s="string"===typeof t?Qa.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Qa.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.failure.title"),description:u,context:Ae.ERROR,importance:Se.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=ko(cr.a.mark((function e(t,n){var r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=$a["a"].toUnits(t,o),c=$a["a"].toUnits(n,o),e.next=6,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.success.title"),description:Qa.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:Ae.INFO,importance:Se.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=$a["a"].toUnits(r,c),e.next=5,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.ms-balance-proof.title"),description:Qa.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:Ae.INFO,importance:Se.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Qa.t("notifications.settlement.success.description",{partner:t}),e.next=3,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.success.title"),description:n,icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.failure.title"),description:Qa.t("notifications.settlement.failure.description",{partner:t}),icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenSuccess",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=void 0!==(null===(o=this.store.state)||void 0===o||null===(i=o.config)||void 0===i?void 0:i.confirmationBlocks)?t+this.store.state.config.confirmationBlocks:0,s=Qa.t("notifications.channel-open.success.description",{partner:a}),e.next=4,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.success.title"),description:s,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH,txConfirmationBlock:c,txHash:n,txConfirmed:r});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenFailed",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.failure.title"),description:t,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",$a["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=ko(cr.a.mark((function e(t){var n,r,a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=bo(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Tt["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=ko(cr.a.mark((function e(t){var n,r=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",vo({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Ga()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a,o){var i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Tt["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=ko(cr.a.mark((function e(t){var n,r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",vo({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._raiden.stop(),e.abrupt("return",this._raiden.dumpDatabase());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Ha["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Ha["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=ko(cr.a.mark((function e(t,n){var r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=ko(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Za["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,Ga()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=fo(fo({},t),r[e]),delete r[e])})),i=function(){var e=ko(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=fo(fo({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,Ga()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=ko(cr.a.mark((function e(t){var n,r,a,o,i=arguments;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ha.contracts();case 6:return o=e.sent,e.next=9,Tt["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Ao(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),So=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error)),Ao=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error));function No(e,t){e.prototype.$raiden=new xo(Rn)}var Do=n("5ffb"),Ro=n.n(Do);function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Po(e,t,n){return t&&Io(e.prototype,t),n&&Io(e,n),e}var Lo=function(){function e(){Co(this,e),this.cache={}}return Po(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Ro()(e);return this.cache[e]=n,n}}]),e}();function Uo(e,t){e.prototype.$identicon=new Lo}n("4909"),n("b4fc"),n("5650");var Mo=n("6bc0");r["a"].use(Mo["a"]);var Bo=new Mo["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Fo=n("a24d"),Wo=(n("6a4f"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_RAIDEN_PACKAGE||Object(Wo["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Wa["b"])(),r["a"].use(No),r["a"].use(Uo),r["a"].use(Fo["a"]),new r["a"]({vuetify:Bo,router:Fa,store:Rn,i18n:Qa,render:function(e){return e(vt)}}).$mount("#app")},e4b6:function(e,t,n){"use strict";var r=n("4cb9"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I have read, understood and hereby accept the above disclaimer and privacy warning","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","block-count-progress":"Blocks remaining: ","settlement":{"icon":"notification_settle","success":{"title":"Channel Settlement","description":"Channel with {partner} was settled."},"failure":{"title":"Channel Settlement","description":"Channel settlement with {partner} failed."}},"channel-open":{"icon":"notification_channels","success":{"title":"Channel Open","description":"Open channel with {partner}.","block-count-success":"Channel successfully opened"},"failure":{"title":"Channel Open Failure"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State and Connect","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens"},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"transfer-menus":{"change-token-title":"Change Token","deposit-button":"Deposit","channel-button":"Channels","no-channels":"No open channels"},"transfer-inputs":{"title":"Transfer"},"no-channels-dialog":{"title":"No connected tokens and open channels","button":"Connect new token"},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available Tokens"},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"token-list":{"item":{"blockie-alt":"Token address blockie","information-template":"{symbol} | {name}"}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return Ag})),n.d(t,"b",(function(){return ra})),n.d(t,"a",(function(){return Pe})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return yt})),n.d(t,"f",(function(){return mt})),n.d(t,"g",(function(){return yn}));var r={};n.r(r),n.d(r,"messageSend",(function(){return Gr})),n.d(r,"messageGlobalSend",(function(){return Zr})),n.d(r,"messageReceived",(function(){return Yr}));var a={};n.r(a),n.d(a,"newBlock",(function(){return Fa})),n.d(a,"tokenMonitored",(function(){return Wa})),n.d(a,"channelOpen",(function(){return $a})),n.d(a,"channelMonitored",(function(){return Ha})),n.d(a,"channelDeposit",(function(){return Va})),n.d(a,"channelWithdrawn",(function(){return qa})),n.d(a,"channelClose",(function(){return Ka})),n.d(a,"channelSettleable",(function(){return Ga})),n.d(a,"channelSettle",(function(){return Za}));var o={};n.r(o),n.d(o,"matrixSetup",(function(){return Qa})),n.d(o,"matrixPresence",(function(){return za})),n.d(o,"matrixRoom",(function(){return Ja})),n.d(o,"matrixRoomLeave",(function(){return eo})),n.d(o,"rtcChannel",(function(){return to}));var i={};n.r(i),n.d(i,"transfer",(function(){return so})),n.d(i,"transferSigned",(function(){return uo})),n.d(i,"transferProcessed",(function(){return lo})),n.d(i,"transferSecret",(function(){return po})),n.d(i,"transferSecretRegister",(function(){return fo})),n.d(i,"transferSecretRequest",(function(){return bo})),n.d(i,"transferSecretReveal",(function(){return yo})),n.d(i,"transferUnlock",(function(){return ho})),n.d(i,"transferUnlockProcessed",(function(){return mo})),n.d(i,"transferExpire",(function(){return vo})),n.d(i,"transferExpireProcessed",(function(){return go})),n.d(i,"transferClear",(function(){return Oo})),n.d(i,"transferLoad",(function(){return wo})),n.d(i,"withdraw",(function(){return ko})),n.d(i,"withdrawMessage",(function(){return jo})),n.d(i,"withdrawExpire",(function(){return Eo})),n.d(i,"withdrawCompleted",(function(){return To}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Ao})),n.d(c,"pfsListUpdated",(function(){return No})),n.d(c,"iouPersist",(function(){return Do})),n.d(c,"iouClear",(function(){return Ro})),n.d(c,"udcDeposit",(function(){return Co})),n.d(c,"udcWithdraw",(function(){return Po})),n.d(c,"udcWithdrawn",(function(){return Lo})),n.d(c,"msBalanceProofSent",(function(){return Uo}));var s={};n.r(s),n.d(s,"dbShutdownEpic",(function(){return $u}));var u={};n.r(u),n.d(u,"initNewBlockEpic",(function(){return Of})),n.d(u,"initTokensRegistryEpic",(function(){return wf})),n.d(u,"initMonitorProviderEpic",(function(){return _f})),n.d(u,"channelEventsEpic",(function(){return xf})),n.d(u,"channelMonitoredEpic",(function(){return Sf})),n.d(u,"channelOpenEpic",(function(){return Af})),n.d(u,"channelDepositEpic",(function(){return Df})),n.d(u,"channelCloseEpic",(function(){return Rf})),n.d(u,"channelUpdateEpic",(function(){return Cf})),n.d(u,"channelAutoSettleEpic",(function(){return If})),n.d(u,"channelSettleEpic",(function(){return Pf})),n.d(u,"channelSettleableEpic",(function(){return Lf})),n.d(u,"channelUnlockEpic",(function(){return Uf})),n.d(u,"confirmationEpic",(function(){return Bf}));var l={};n.r(l),n.d(l,"initMatrixEpic",(function(){return Cd})),n.d(l,"matrixShutdownEpic",(function(){return Id})),n.d(l,"matrixMonitorPresenceEpic",(function(){return tb})),n.d(l,"matrixPresenceUpdateEpic",(function(){return rb})),n.d(l,"matrixMonitorChannelPresenceEpic",(function(){return ab})),n.d(l,"matrixUpdateCapsEpic",(function(){return ob})),n.d(l,"matrixCreateRoomEpic",(function(){return gb})),n.d(l,"matrixInviteEpic",(function(){return Ob})),n.d(l,"matrixHandleInvitesEpic",(function(){return wb})),n.d(l,"matrixLeaveExcessRoomsEpic",(function(){return _b})),n.d(l,"matrixLeaveUnknownRoomsEpic",(function(){return kb})),n.d(l,"matrixCleanLeftRoomsEpic",(function(){return jb})),n.d(l,"matrixCleanMissingRoomsEpic",(function(){return Eb})),n.d(l,"matrixMessageReceivedUpdateRoomEpic",(function(){return Tb})),n.d(l,"matrixMessageSendEpic",(function(){return $b})),n.d(l,"matrixMessageGlobalSendEpic",(function(){return Hb})),n.d(l,"matrixMessageReceivedEpic",(function(){return qb})),n.d(l,"deliveredEpic",(function(){return Kb})),n.d(l,"rtcConnectEpic",(function(){return Ay}));var p={};n.r(p),n.d(p,"transferAutoExpireEpic",(function(){return Ly})),n.d(p,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return ph})),n.d(p,"initQueuePendingEnvelopeMessagesEpic",(function(){return Oh})),n.d(p,"initQueuePendingReceivedEpic",(function(){return wh})),n.d(p,"transferClearCompletedEpic",(function(){return kh})),n.d(p,"transferMediateEpic",(function(){return Rh})),n.d(p,"transferProcessedReceivedEpic",(function(){return Bh})),n.d(p,"transferProcessedSendEpic",(function(){return Fh})),n.d(p,"transferRetryMessageEpic",(function(){return Gh})),n.d(p,"transferSecretRequestedEpic",(function(){return nm})),n.d(p,"transferSecretRevealEpic",(function(){return am})),n.d(p,"transferSecretRevealedEpic",(function(){return om})),n.d(p,"transferRequestUnlockEpic",(function(){return im})),n.d(p,"monitorSecretRegistryEpic",(function(){return cm})),n.d(p,"transferSuccessOnSecretRegisteredEpic",(function(){return sm})),n.d(p,"transferAutoRegisterEpic",(function(){return um})),n.d(p,"transferSecretRegisterEpic",(function(){return lm})),n.d(p,"initWithdrawMessagesEpic",(function(){return gm})),n.d(p,"withdrawSendRequestMessageEpic",(function(){return Om})),n.d(p,"withdrawSendTxEpic",(function(){return wm})),n.d(p,"withdrawMessageProcessedEpic",(function(){return _m})),n.d(p,"autoWithdrawExpireEpic",(function(){return km})),n.d(p,"withdrawSendExpireMessageEpic",(function(){return jm}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return fv})),n.d(f,"pfsCapacityUpdateEpic",(function(){return dv})),n.d(f,"pfsFeeUpdateEpic",(function(){return bv})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return yv})),n.d(f,"monitorUdcBalanceEpic",(function(){return hv})),n.d(f,"udcDepositEpic",(function(){return vv})),n.d(f,"monitorRequestEpic",(function(){return Ov})),n.d(f,"udcWithdrawRequestEpic",(function(){return wv})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return _v})),n.d(f,"udcWithdrawPlannedEpic",(function(){return kv})),n.d(f,"msMonitorNewBPEpic",(function(){return jv}));var d=n("4bf2"),b=n.n(d),y=(n("01e5"),n("856a"),n("8e94"),n("6f91")),h=n.n(y),m=n("8546"),v=n("855c"),g=h.a.methodFactory;Object.assign(h.a,{methodFactory:g}),m["logger"].setLevel(h.a.levels.DEBUG);var O=Object(v["getRequest"])();Object(v["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7"));var w=n("6fd9"),_=n("49c0"),k=n("89d8"),j=n("45c3"),E=n("2b19"),T=n("ae32"),x=n("ee80"),S=n.n(x),A=n("e68d"),N=n.n(A),D=n("9c86"),R=n("d0e7"),C=n("6c90"),I=n("76fd"),P=n("2430"),L=n("4f19"),U=n("c49b"),M=n("b2be"),B=n("22ee"),F=n("6d46"),W=n("391b"),$=n("55da"),H=n("751e");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}var G=function(){function e(){V(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant1_settlement",type:"tuple"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant2_settlement",type:"tuple"}],name:"settleChannel2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}var de=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}var ve=function(){function e(){ye(this,e)}return me(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}var ke=function(){function e(){Oe(this,e)}return _e(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,je,t)}}]),e}(),je=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var Se,Ae,Ne=function(){function e(){Ee(this,e)}return xe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,De,t)}}]),e}(),De=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Re=n("bf6c");function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var Ie,Pe,Le=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Ue=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ie||(Ie={})),function(e){e["DELIVERY"]="Delivery",e["RECEIVE"]="Receive",e["MEDIATE"]="Mediate",e["WEBRTC"]="webRTC",e["TO_DEVICE"]="toDevice"}(Pe||(Pe={}));var Me=(Ae={},Ce(Ae,Pe.DELIVERY,1),Ce(Ae,Pe.RECEIVE,1),Ce(Ae,Pe.MEDIATE,1),Ce(Ae,Pe.WEBRTC,0),Ce(Ae,Pe.TO_DEVICE,0),Ae),Be=n("5971"),Fe=n("7303"),We=n("6417"),$e=n("217b"),He=n("5b3b"),Ve=n.n(He),qe=n("a32b");function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){return Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Xe(e){return et(e)||Je(e)||ze(e)||Qe()}function Qe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ze(e,t){if(e){if("string"===typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}function Je(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function et(e){if(Array.isArray(e))return tt(e)}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),e}function ot(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}function it(e){var t=pt();return function(){var n,r=bt(e);if(t){var a=bt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==Ye(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){var t="function"===typeof Map?new Map:void 0;return ut=function(e){if(null===e||!ft(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return lt(e,arguments,bt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),dt(n,e)},ut(e)}function lt(e,t,n){return lt=pt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&dt(o,n.prototype),o},lt.apply(null,arguments)}function pt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ft(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function dt(e,t){return dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dt(e,t)}function bt(e){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(e)}var yt=qe,ht=Be["r"](Be["s"],Be["x"]([Be["s"],Be["n"],Be["e"],Be["m"]])),mt=function(e){ot(n,e);var t=it(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(st(r),n.prototype),r}return at(n,[{key:"code",get:function(){var e,t=this;return null!==(e=Ve()(yt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ut(Error));function vt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?lt(mt,Xe(t)):new mt(null!==t&&void 0!==t?t:yt.RDN_ASSERT_ERROR,{condition:e})}var gt=Be["j"]([Be["v"]({name:Be["s"]}),Be["o"]({message:Be["s"],stack:Be["s"],details:ht})]),Ot=new Be["b"]("Error",(function(e){return"object"===Ye(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object($e["pipe"])(gt.decode(e),Object(Fe["map"])((function(e){return"details"in e?Object.assign(new mt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Ge({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function wt(e,t){if(null==e)return{};var n,r,a=_t(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _t(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){if(Object(Fe["isLeft"])(e))throw new Error(We["PathReporter"].report(e).join("\n"))}function xt(e,t,n,r){try{var a=e.decode(t);return Tt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new mt(n):o}}function St(e){return null!=e}var At=new Be["b"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){try{return Be["t"](Object(_["bigNumberify"])(e))}catch(n){return Be["h"](e,t)}}),(function(e){return e.toString()})),Nt=N()((function(e){return Be["f"](Be["s"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),Dt=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Be["f"](At,(function(e){return At.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Rt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Be["f"](At,(function(e){return At.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),Ct=Nt(65),It=Nt(32),Pt=Nt(32),Lt=Nt(32);function Ut(e){try{return Object(_["getAddress"])(e)===e}catch(t){return!1}}var Mt=new Be["a"]("Address",Ut,(function(e,t){try{return Be["t"](Object(_["getAddress"])(e))}catch(n){return Be["h"](e,t)}}),Be["i"],Nt(20),Ut),Bt=N()((function(e){return Be["j"]([e,Be["p"](Be["v"]({ts:Be["n"]}))])}));function Ft(e){return jt(jt({},e),{},{ts:Date.now()})}function Wt(e){e.ts;var t=wt(e,["ts"]);return t}var $t=N()((function(e){return Be["j"]([e,Be["p"](Be["v"]({signature:Ct}))])})),Ht=N()((function(e){return new Be["b"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Be["t"](t):Be["h"](t,n)}),Be["i"])}));function Vt(e){return e[e.length-1]}function qt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.lt(t)?t:e}))}var Kt=n("55af"),Gt=n("f04c"),Zt=n("aee4"),Yt=n("141b"),Xt=n("70de"),Qt=n("bce1");function zt(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zt(o,r,a,i,c,"next",e)}function c(e){zt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function en(e){return an(e)||rn(e)||nn(e)||tn()}function tn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nn(e,t){if(e){if("string"===typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}function rn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function an(e){if(Array.isArray(e))return on(e)}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(Gt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(P["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),ln(e,"block")})).pipe(Object(Yt["a"])(Math.ceil(e.pollingInterval/10)),Object(Xt["a"])((function(n){return Object(P["a"])((function(){return e.getLogs(sn(sn({},t),{},{fromBlock:i[0],toBlock:n}))})).pipe(Object(W["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(en(e.map((function(e){return e.blockNumber})).filter(St).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Zt["a"])(e)})),Object(Qt["a"])((function(){return L["a"]})))})))}function pn(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=sn(sn(sn({},t),n),{},{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(en(r),[a])}};return void 0!==t?n(t):n}function fn(e){return dn.apply(this,arguments)}function dn(){return dn=Jt(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Kt["getNetwork"],e.t1=parseInt,e.next=4,t.send("net_version",[]);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}function bn(e){var t=e.send;e.send=function(){var n=Jt(b.a.mark((function n(r,a){return b.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("eth_sign"!==r){n.next=2;break}return n.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch((function(n){if(n instanceof Error&&(n.message.includes("The method personal_sign does not exist")||n.message.includes("Method personal_sign not supported")))return e.send=t,e.send(r,a);throw n})));case 2:return n.abrupt("return",t.apply(this,[r,a]));case 3:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()}function yn(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var hn,mn=Be["x"]([Be["s"],Be["n"],Be["e"],Be["m"]],"CapsPrimitive"),vn=Be["x"]([mn,Be["d"](mn)],"CapsValue"),gn=Be["p"](Be["r"](Be["s"],vn),"Caps");function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn=Be["v"]({urls:Be["x"]([Be["s"],Be["d"](Be["s"])])}),jn=Be["p"](Be["j"]([Be["v"]({matrixServerLookup:Be["s"],revealTimeout:Be["n"],settleTimeout:Be["n"],httpTimeout:Be["n"],discoveryRoom:Be["x"]([Be["s"],Be["m"]]),pfsRoom:Be["x"]([Be["s"],Be["m"]]),monitoringRoom:Be["x"]([Be["s"],Be["m"]]),pfs:Be["x"]([Mt,Be["s"],Be["m"]]),pfsSafetyMargin:Be["n"],pfsMaxPaths:Be["n"],pfsMaxFee:Rt(32),pfsIouTimeout:Be["n"],matrixExcessRooms:Be["n"],confirmationBlocks:Be["n"],monitoringReward:Be["x"]([Be["m"],Rt(32)]),logger:Be["k"]((hn={},_n(hn,"",null),_n(hn,"trace",null),_n(hn,"debug",null),_n(hn,"info",null),_n(hn,"warn",null),_n(hn,"error",null),hn)),caps:Be["x"]([Be["m"],gn]),fallbackIceServers:Be["d"](kn),rateToSvt:Be["r"](Be["s"],Rt(32)),pollingInterval:Be["n"],minimumAllowance:Rt(32),autoSettle:Be["e"]}),Be["o"]({matrixServer:Be["s"],subkey:Be["e"]})])),En=Be["p"](Be["g"](Be["o"](wn(wn({},jn.type.types["0"].props),jn.type.types["1"].props))));function Tn(e,t){var n,r=e.network,a=yn(r),o=1===r.chainId?"https://raw.githubusercontent.com/raiden-network/raiden-service-bundle/master/known_servers/known_servers-production-v1.2.0.json":"https://raw.githubusercontent.com/raiden-network/raiden-service-bundle/master/known_servers/known_servers-development-v1.2.0.json";return wn({matrixServerLookup:o,settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(a,"_discovery"),pfsRoom:"raiden_".concat(a,"_path_finding"),monitoringRoom:"raiden_".concat(a,"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,pfsMaxPaths:3,pfsMaxFee:Object(_["parseEther"])("0.05"),pfsIouTimeout:2e5,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},_n(n,Pe.DELIVERY,0),_n(n,Pe.MEDIATE,0),_n(n,Pe.WEBRTC,1),_n(n,Pe.TO_DEVICE,1),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3,minimumAllowance:k["MaxUint256"],autoSettle:!1},t)}var xn,Sn=Be["s"],An=(Be["s"],Be["j"]([Be["v"]({amount:Rt(32),expiration:Rt(32),secrethash:It}),Be["o"]({registered:Be["l"](!0)})],"Lock")),Nn=Be["p"](Be["v"]({chainId:Rt(32),tokenNetworkAddress:Mt,channelId:Rt(32),nonce:Rt(8),transferredAmount:Rt(32),lockedAmount:Rt(32),locksroot:It,additionalHash:It})),Dn=Nn,Rn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Ue,additionalHash:k["HashZero"],signature:Le};(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(xn||(xn={}));var Cn=Be["p"](Be["v"]({message_identifier:Rt(8)})),In=Be["p"](Be["v"]({type:Be["l"](xn.DELIVERED),delivered_message_identifier:Rt(8)})),Pn=In,Ln=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.PROCESSED)}),Cn])),Un=Ln,Mn=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.SECRET_REQUEST),payment_identifier:Rt(8),secrethash:It,amount:Rt(32),expiration:Rt(32)}),Cn])),Bn=Mn,Fn=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.SECRET_REVEAL),secret:Pt}),Cn])),Wn=Fn,$n=Be["p"](Be["j"]([Be["v"]({chain_id:Rt(32),token_network_address:Mt,channel_identifier:Rt(32),nonce:Rt(8),transferred_amount:Rt(32),locked_amount:Rt(32),locksroot:It}),Cn])),Hn=Be["p"](Be["v"]({route:Be["q"](Mt)})),Vn=Hn,qn=Be["p"](Be["v"]({routes:Be["q"](Vn)})),Kn=qn,Gn=Be["p"](Be["j"]([Be["v"]({payment_identifier:Rt(8),token:Mt,recipient:Mt,lock:An,target:Mt,initiator:Mt,metadata:Kn}),$n])),Zn=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.LOCKED_TRANSFER)}),Gn])),Yn=Zn,Xn=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.UNLOCK),payment_identifier:Rt(8),secret:Pt}),$n])),Qn=Xn,zn=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.LOCK_EXPIRED),recipient:Mt,secrethash:It}),$n])),Jn=zn,er=Be["p"](Be["v"]({chain_id:Rt(32),token_network_address:Mt,channel_identifier:Rt(32),participant:Mt,total_withdraw:Rt(32),nonce:Rt(8),expiration:Rt(32)})),tr=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.WITHDRAW_REQUEST)}),er,Cn])),nr=tr,rr=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.WITHDRAW_CONFIRMATION)}),er,Cn])),ar=rr,or=Be["p"](Be["j"]([Be["v"]({type:Be["l"](xn.WITHDRAW_EXPIRED)}),er,Cn])),ir=or,cr=Be["p"](Be["v"]({type:Be["l"](xn.PFS_CAPACITY_UPDATE),canonical_identifier:Be["p"](Be["v"]({chain_identifier:Rt(32),token_network_address:Mt,channel_identifier:Rt(32)})),updating_participant:Mt,other_participant:Mt,updating_nonce:Rt(8),other_nonce:Rt(8),updating_capacity:Rt(32),other_capacity:Rt(32),reveal_timeout:Rt(32)})),sr=cr,ur=Be["p"](Be["v"]({type:Be["l"](xn.PFS_FEE_UPDATE),canonical_identifier:Be["p"](Be["v"]({chain_identifier:Rt(32),token_network_address:Mt,channel_identifier:Rt(32)})),updating_participant:Mt,timestamp:Be["s"],fee_schedule:Be["v"]({cap_fees:Be["e"],imbalance_penalty:Be["x"]([Be["m"],Be["d"](Be["u"]([Rt(32),Dt(32)]))]),proportional:Dt(32),flat:Dt(32)})})),lr=ur,pr=Be["p"](Be["v"]({type:Be["l"](xn.MONITOR_REQUEST),balance_proof:Be["v"]({chain_id:Rt(32),token_network_address:Mt,channel_identifier:Rt(32),nonce:Rt(8),balance_hash:It,additional_hash:It,signature:Ct}),monitoring_service_contract_address:Mt,non_closing_participant:Mt,non_closing_signature:Ct,reward_amount:Rt(32)})),fr=pr,dr=[Pn,Un,Bn,Wn,Yn,Qn,Jn,nr,ar,ir,sr,lr,fr],br=dr,yr=Be["x"](br),hr=n("bb5f"),mr=n("deeb"),vr=n("6e0b"),gr=n.n(vr);function Or(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(hr["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(hr["isArrayish"])(e)&&(e=Object(hr["hexlify"])(e)),At.is(e)){if(e.lt(0))throw new mt(yt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new mt(yt.DTA_NUMBER_TOO_LARGE);n=Object(hr["hexZeroPad"])(Object(hr["hexlify"])(e),t)}else{if("string"!==typeof e)throw new mt(yt.DTA_UNENCODABLE_DATA);if(Object(hr["hexDataLength"])(e)!==t)throw new mt(yt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var wr=gr()({storeAsString:!0}),_r=wr.parse,kr=wr.stringify,jr=n("731d"),Er=n.n(jr);function Tr(e){return Nr(e)||Ar(e)||Sr(e)||xr()}function xr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sr(e,t){if(e){if("string"===typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}function Ar(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Nr(e){if(Array.isArray(e))return Dr(e)}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Cr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rr(o,r,a,i,c,"next",e)}function c(e){Rr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){Lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ur(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Mr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Be["v"](Pr(Pr(Pr({type:Be["l"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Be["l"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Pr({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Pr(Pr(Pr({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Br(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Be["c"],c=Mr(t,a,e),s=Mr(n,o,e),u=Mr(r,i,e,!0);return{request:c,success:s,failure:u}}function Fr(e){var t=function(t){return Er()(t.meta,e,(function(e,t){return At.is(e)&&At.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Wr(e,t){var n=function(n){return Ur([e.success,e.failure],n)&&Fr(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function $r(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Wr(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Hr(e,t,n){return Vr.apply(this,arguments)}function Vr(){return Vr=Cr(b.a.mark((function e(t,n,r){var a,o=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",r.pipe(Object(F["a"])(a?$r(t,n):Wr(t,n)),Object(M["a"])((function(e){var n;if(t.failure.is(e))throw e.payload;if(!1===(null===(n=e.payload)||void 0===n?void 0:n.confirmed))throw new mt(yt.RDN_TRANSACTION_REORG,{transactionHash:e.payload.txHash});return e.payload}))).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function qr(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return vt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(Tr(a.map((function(e){return Lr({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Kr,Gr=Br(Be["v"]({address:Mt,msgId:Be["s"]}),"message/send/request","message/send/success","message/send/failure",Be["v"]({message:Be["x"]([Be["s"],$t(yr)])}),Be["x"]([Be["w"],Be["o"]({via:Be["s"]})])),Zr=Mr("message/global/send",Be["v"]({message:Be["x"]([Be["s"],$t(yr)])}),Be["v"]({roomName:Be["s"]})),Yr=Mr("message/received",Be["j"]([Be["v"]({text:Be["s"],ts:Be["n"]}),Be["o"]({message:Be["x"]([yr,$t(yr)]),userId:Be["s"],roomId:Be["s"]})]),Be["v"]({address:Mt}));function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zr(o,r,a,i,c,"next",e)}function c(e){zr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ea(e){return ea="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(e)}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var na,ra,aa=(Kr={},ta(Kr,xn.DELIVERED,12),ta(Kr,xn.PROCESSED,0),ta(Kr,xn.SECRET_REQUEST,3),ta(Kr,xn.SECRET_REVEAL,11),ta(Kr,xn.LOCKED_TRANSFER,7),ta(Kr,xn.UNLOCK,4),ta(Kr,xn.LOCK_EXPIRED,13),ta(Kr,xn.WITHDRAW_REQUEST,15),ta(Kr,xn.WITHDRAW_CONFIRMATION,16),ta(Kr,xn.WITHDRAW_EXPIRED,17),ta(Kr,xn.PFS_CAPACITY_UPDATE,-1),ta(Kr,xn.PFS_FEE_UPDATE,-1),ta(Kr,xn.MONITOR_REQUEST,-1),Kr);function oa(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function ia(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Ue)?k["HashZero"]:Object(_["keccak256"])(Object(hr["concat"])([Or(t,32),Or(n,32),Or(r,32)]))}function ca(e){switch(e.type){case xn.LOCKED_TRANSFER:var t=Object(hr["concat"])([Or(aa[e.type],1),Or(e.message_identifier,8),Or(e.payment_identifier,8),Or(e.lock.expiration,32),Or(e.token,20),Or(e.recipient,20),Or(e.target,20),Or(e.initiator,20),Or(e.lock.secrethash,32),Or(e.lock.amount,32)]);return e.type===xn.LOCKED_TRANSFER&&(t=Object(hr["concat"])([t,oa(e.metadata)])),Object(_["keccak256"])(t);case xn.UNLOCK:return Object(_["keccak256"])(Object(hr["concat"])([Or(aa[e.type],1),Or(e.message_identifier,8),Or(e.payment_identifier,8),Or(e.secret,32)]));case xn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(hr["concat"])([Or(aa[e.type],1),Or(e.message_identifier,8),Or(e.recipient,20),Or(e.secrethash,32)]))}}function sa(e){var t;switch(e.type){case xn.DELIVERED:return Object(hr["hexlify"])(Object(hr["concat"])([Or(aa[e.type],1),Or(0,3),Or(e.delivered_message_identifier,8)]));case xn.PROCESSED:return Object(hr["hexlify"])(Object(hr["concat"])([Or(aa[e.type],1),Or(0,3),Or(e.message_identifier,8)]));case xn.LOCKED_TRANSFER:case xn.UNLOCK:case xn.LOCK_EXPIRED:var n=ca(e),r=ia({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(hr["hexlify"])(Object(hr["concat"])([Or(e.token_network_address,20),Or(e.chain_id,32),Or(na.BALANCE_PROOF,32),Or(e.channel_identifier,32),Or(r,32),Or(e.nonce,32),Or(n,32)]));case xn.SECRET_REQUEST:return Object(hr["hexlify"])(Object(hr["concat"])([Or(aa[e.type],1),Or(0,3),Or(e.message_identifier,8),Or(e.payment_identifier,8),Or(e.secrethash,32),Or(e.amount,32),Or(e.expiration,32)]));case xn.SECRET_REVEAL:return Object(hr["hexlify"])(Object(hr["concat"])([Or(aa[e.type],1),Or(0,3),Or(e.message_identifier,8),Or(e.secret,32)]));case xn.WITHDRAW_REQUEST:case xn.WITHDRAW_CONFIRMATION:return Object(hr["hexlify"])(Object(hr["concat"])([Or(e.token_network_address,20),Or(e.chain_id,32),Or(na.WITHDRAW,32),Or(e.channel_identifier,32),Or(e.participant,20),Or(e.total_withdraw,32),Or(e.expiration,32)]));case xn.WITHDRAW_EXPIRED:return Object(hr["hexlify"])(Object(hr["concat"])([Or(aa[e.type],1),Or(0,3),Or(e.nonce,32),Or(e.message_identifier,8),Or(e.token_network_address,20),Or(e.chain_id,32),Or(na.WITHDRAW,32),Or(e.channel_identifier,32),Or(e.participant,20),Or(e.total_withdraw,32),Or(e.expiration,32)]));case xn.PFS_CAPACITY_UPDATE:return Object(hr["hexlify"])(Object(hr["concat"])([Or(e.canonical_identifier.chain_identifier,32),Or(e.canonical_identifier.token_network_address,20),Or(e.canonical_identifier.channel_identifier,32),Or(e.updating_participant,20),Or(e.other_participant,20),Or(e.updating_nonce,8),Or(e.other_nonce,8),Or(e.updating_capacity,32),Or(e.other_capacity,32),Or(e.reveal_timeout,32)]));case xn.PFS_FEE_UPDATE:return Object(hr["hexlify"])(Object(hr["concat"])([Or(e.canonical_identifier.chain_identifier,32),Or(e.canonical_identifier.token_network_address,20),Or(e.canonical_identifier.channel_identifier,32),Or(e.updating_participant,20),Or(e.fee_schedule.cap_fees,1),Or(e.fee_schedule.flat,32),Or(e.fee_schedule.proportional,32),Object(mr["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Or(e.timestamp,19)]));case xn.MONITOR_REQUEST:return Object(hr["hexlify"])(Object(hr["concat"])([Or(e.monitoring_service_contract_address,20),Or(e.balance_proof.chain_id,32),Or(na.MS_REWARD,32),Or(e.balance_proof.token_network_address,20),Or(e.non_closing_participant,20),Or(e.non_closing_signature,65),Or(e.reward_amount,32)]))}}function ua(e){return Ct.is(e.signature)}function la(e){return Object(_["verifyMessage"])(Object(hr["arrayify"])(sa(e)),e.signature)}function pa(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:ca(e),signature:e.signature}}function fa(e){return kr("signature"in e?$t(yr).encode(e):yr.encode(e))}function da(e){var t=_r(e);return vt(t&&"object"===ea(t)&&"type"in t&&Object.values(xn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),xt("signature"in t?$t(yr):yr,t)}function ba(e,t){return ya.apply(this,arguments)}function ya(){return ya=Jr(b.a.mark((function e(t,n){var r,a,o,i=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{log:h.a},a=r.log,!ua(n)){e.next=3;break}return e.abrupt("return",n);case 3:return a.debug('Signing message "'.concat(n.type,'"'),n),e.next=6,t.signMessage(Object(hr["arrayify"])(sa(n)));case 6:return o=e.sent,e.abrupt("return",Qr(Qr({},n),{},{signature:o}));case 8:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ha(e){return function(t){return Yr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(na||(na={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(ra||(ra={}));var ma,va=Be["p"](Be["v"]({address:Mt,deposit:Rt(32),withdraw:Rt(32),locks:Be["q"](An),balanceProof:$t(Dn),pendingWithdraws:Be["q"](Be["x"]([$t(nr),$t(ar),$t(ir)])),nextNonce:Rt(8)}),"ChannelEnd"),ga=va,Oa=Be["j"]([Be["p"](Be["v"]({_id:Be["s"],id:Be["n"],token:Mt,tokenNetwork:Mt,settleTimeout:Be["n"],isFirstParticipant:Be["e"],openBlock:Be["n"],own:ga,partner:ga}),"Channel"),Be["x"]([Be["p"](Be["v"]({state:Be["x"]([Be["l"](ra.open),Be["l"](ra.closing)])}),"state[open|closing]"),Be["j"]([Be["p"](Be["v"]({closeBlock:Be["n"],closeParticipant:Mt}),"ChannelClosed"),Be["x"]([Be["p"](Be["v"]({state:Be["x"]([Be["l"](ra.closed),Be["l"](ra.settleable),Be["l"](ra.settling)])}),"state[closed|settleable|settling]"),Be["p"](Be["v"]({state:Be["l"](ra.settled),settleBlock:Be["n"]}),"state[settled]")])])])]),wa=n("4d63"),_a=n.n(wa),ka={SENT:"sent",RECEIVED:"received"},ja=Be["k"](_a()(ka)),Ea=Be["p"](Be["j"]([Be["v"]({_id:Be["s"],channel:Be["s"],direction:ja,secrethash:It,expiration:Be["n"],transfer:Bt($t(Yn)),fee:Dt(32),partner:Mt,cleared:Be["n"]},"TransferStateBase"),Be["o"]({secret:Pt,secretRegistered:Bt(Be["v"]({txHash:It,txBlock:Be["n"]})),transferProcessed:Bt($t(Un)),channelClosed:Bt(Be["v"]({txHash:It,txBlock:Be["n"]})),channelSettled:Bt(Be["v"]({txHash:It,txBlock:Be["n"]})),secretRequest:Bt($t(Bn)),secretReveal:Bt($t(Wn)),unlock:Bt($t(Qn)),expired:Bt($t(Jn)),unlockProcessed:Bt($t(Un)),expiredProcessed:Bt($t(Un))},"TransferStateOpts")])),Ta=Ea;(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(ma||(ma={}));var xa=n("bf69"),Sa=n.n(xa);function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){Da(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Na(Na({},r),{},Da({},o,s)))}}return r}}var Ca=n("bc8e"),Ia=n.n(Ca),Pa=n("50fc"),La=n.n(Pa),Ua=n("d328"),Ma=n.n(Ua),Ba=Be["v"]({tokenNetwork:Mt,partner:Mt}),Fa=Mr("block/new",Be["v"]({blockNumber:Be["n"]})),Wa=Mr("token/monitored",Be["j"]([Be["v"]({token:Mt,tokenNetwork:Mt}),Be["o"]({fromBlock:Be["n"],toBlock:Be["n"]})])),$a=Br(Ba,"channel/open/request","channel/open/success","channel/open/failed",Be["o"]({settleTimeout:Be["n"],subkey:Be["e"],deposit:Rt(32)}),Be["v"]({id:Be["n"],token:Mt,settleTimeout:Be["n"],isFirstParticipant:Be["e"],txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})),Ha=Mr("channel/monitored",Be["v"]({id:Be["n"]}),Ba),Va=Br(Ba,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Be["j"]([Be["v"]({deposit:Rt(32)}),Be["o"]({subkey:Be["e"],waitOpen:Be["l"](!0)})]),Be["v"]({id:Be["n"],participant:Mt,totalDeposit:Rt(32),txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})),qa=Mr("channel/withdraw/success",Be["v"]({id:Be["n"],participant:Mt,totalWithdraw:Rt(32),txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])}),Ba),Ka=Br(Ba,"channel/close/request","channel/close/success","channel/close/failure",Be["x"]([Be["o"]({subkey:Be["e"]}),Be["w"]]),Be["v"]({id:Be["n"],participant:Mt,txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})),Ga=Mr("channel/settleable",Be["v"]({settleableBlock:Be["n"]}),Ba),Za=Br(Ba,"channel/settle/request","channel/settle/success","channel/settle/failure",Be["x"]([Be["o"]({subkey:Be["e"]}),Be["w"]]),Be["j"]([Be["v"]({id:Be["n"],txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])}),Be["o"]({locks:Be["q"](An)})])),Ya=Be["p"](Be["v"]({userId:Be["s"],accessToken:Be["s"],deviceId:Be["s"],displayName:Be["s"]})),Xa=Be["v"]({address:Mt}),Qa=Mr("matrix/setup",Be["v"]({server:Be["s"],setup:Ya})),za=Br(Xa,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Be["j"]([Be["v"]({userId:Be["s"],available:Be["e"],ts:Be["n"]}),Be["o"]({caps:Be["r"](Be["s"],Be["c"])})])),Ja=Mr("matrix/room",Be["v"]({roomId:Be["s"]}),Xa),eo=Mr("matrix/room/leave",Be["v"]({roomId:Be["s"]}),Xa),to=Mr("rtc/channel",Be["x"]([Be["w"],Ht(RTCDataChannel)]),Xa),no=Be["p"](Be["j"]([Be["v"]({result:Be["d"](Be["p"](Be["v"]({path:Be["q"](Mt),estimated_fee:Dt(32)})))}),Be["o"]({feedback_token:Be["s"]})])),ro=Be["d"](Be["p"](Be["v"]({path:Be["q"](Mt),fee:Dt(32)}))),ao=Be["p"](Be["v"]({address:Mt,url:Be["s"],rtt:Be["n"],price:Rt(32),token:Mt})),oo=Be["p"](Be["v"]({sender:Mt,receiver:Mt,amount:Rt(32),expiration_block:Rt(32),one_to_n_address:Mt,chain_id:Rt(32)})),io=Be["p"](Be["v"]({last_iou:$t(oo)})),co=Be["v"]({secrethash:It,direction:ja}),so=Br(co,"transfer/request","transfer/success","transfer/failure",Be["j"]([Be["v"]({tokenNetwork:Mt,target:Mt,value:Rt(32),paths:ro,paymentId:Rt(8)}),Be["o"]({secret:Pt,expiration:Be["n"],initiator:Mt})]),Be["o"]({balanceProof:$t(Dn)})),uo=Mr("transfer/signed",Be["v"]({message:$t(Yn),fee:Dt(32),partner:Mt}),co),lo=Mr("transfer/processed",Be["v"]({message:$t(Un)}),co),po=Mr("transfer/secret",Be["v"]({secret:Pt}),co),fo=Br(co,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Be["j"]([Be["v"]({secret:Pt}),Be["o"]({subkey:Be["e"]})]),Be["v"]({secret:Pt,txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})),bo=Mr("transfer/secret/request",Be["v"]({message:$t(Bn)}),co),yo=Mr("transfer/secret/reveal",Be["v"]({message:$t(Wn)}),co),ho=Br(co,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Be["v"]({message:$t(Qn),partner:Mt})),mo=Mr("transfer/unlock/processed",Be["v"]({message:$t(Un)}),co),vo=Br(co,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Be["v"]({message:$t(Jn),partner:Mt})),go=Mr("transfer/expire/processed",Be["v"]({message:$t(Un)}),co),Oo=Mr("transfer/clear",Be["w"],co),wo=Mr("transfer/load",Ta,co),_o=Be["v"]({direction:ja,tokenNetwork:Mt,partner:Mt,totalWithdraw:Rt(32),expiration:Be["n"]}),ko=Br(_o,"withdraw/request","withdraw/success","withdraw/failure",Be["w"],Be["v"]({txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})),jo=Br(_o,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Be["v"]({message:$t(nr)}),Be["v"]({message:$t(ar)})),Eo=Br(_o,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Be["w"],Be["v"]({message:$t(ir)})),To=Mr("withdraw/completed",Be["w"],_o),xo=Be["v"]({tokenNetwork:Mt,target:Mt,value:Rt(32)}),So=Be["v"]({tokenNetwork:Mt,serviceAddress:Mt}),Ao=Br(xo,"path/find/request","path/find/success","path/find/failure",Be["o"]({paths:ro,pfs:Be["x"]([ao,Be["m"]])}),Be["v"]({paths:ro})),No=Mr("pfs/list/updated",Be["v"]({pfsList:Be["q"](Mt)})),Do=Mr("iou/persist",Be["v"]({iou:$t(oo)}),So),Ro=Mr("iou/clear",void 0,So),Co=Br(Be["v"]({totalDeposit:Rt(32)}),"udc/deposit/request","udc/deposit/success","udc/deposit/failure",Be["j"]([Be["v"]({deposit:Rt(32)}),Be["o"]({subkey:Be["e"]})]),Be["x"]([Be["w"],Be["v"]({txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})])),Io=Be["v"]({amount:Rt(32)}),Po=Br(Io,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Be["w"],Be["j"]([Be["v"]({block:Be["n"]}),Be["o"]({txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])})])),Lo=Mr("udc/withdrawn",Be["v"]({withdrawal:Rt(32),txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])}),Io),Uo=Mr("ms/balanceProof/sent",Be["v"]({tokenNetwork:Mt,partner:Mt,id:Be["n"],reward:Rt(32),nonce:Rt(8),monitoringService:Mt,txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])}));function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wo=Mr("raiden/shutdown",Be["v"]({reason:Be["x"]([Be["l"](Ie.STOP),Be["l"](Ie.ACCOUNT_CHANGED),Be["l"](Ie.NETWORK_CHANGED),Ot])})),$o=Mr("raiden/config/update",En),Ho=Bo(Bo(Bo(Bo(Bo({raidenShutdown:Wo,raidenConfigUpdate:$o},a),o),r),i),c),Vo=[Ho.raidenShutdown,Ho.newBlock,Ho.matrixPresence.success,Ho.tokenMonitored,Ho.udcWithdrawn,Ho.udcWithdraw.failure,Ho.msBalanceProofSent,Ho.channelSettle.success,Ho.channelSettle.failure,Ho.channelOpen.success,Ho.channelOpen.failure],qo=Ma()(Ho,(function(e,t){return Bo(Bo({},e),"type"in t?Fo({},t.type,t):Ia()(t,La()("type")))}),{}),Ko=Be["p"](Be["v"]({type:Be["s"],payload:Be["p"](Be["v"]({txHash:It,txBlock:Be["n"],confirmed:Be["x"]([Be["w"],Be["e"]])}))})),Go=new Be["b"]("ConfirmableAction",Ko.is,(function(e,t){return Fe["either"].chain(Ko.validate(e,t),(function(e){var n=e.type;return n in qo?qo[n].codec.validate(e,t):Be["h"](e,t)}))}),(function(e){return qo[e.type].codec.encode(e)}));function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qo=Be["p"](Be["v"]({address:Mt,chainId:Be["n"],registry:Mt,blockNumber:Be["n"],config:En,channels:Be["p"](Be["r"](Sn,Oa)),oldChannels:Be["p"](Be["r"](Be["s"],Oa)),tokens:Be["p"](Be["r"](Be["s"],Mt)),transport:Be["p"](Be["o"]({server:Be["s"],setup:Ya,rooms:Be["p"](Be["r"](Be["s"],Be["d"](Be["s"])))})),transfers:Be["p"](Be["r"](Be["s"],Ta)),iou:Be["p"](Be["r"](Be["s"],Be["r"](Be["s"],$t(oo)))),pendingTxs:Be["q"](Go)}),"RaidenState"),zo=Qo;function Jo(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yo({address:n,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},transfers:{},iou:{},pendingTxs:[],config:{}},a)}var ei=Jo({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0},OneToN:{address:k["AddressZero"],block_number:0}}}),ti=n("ef71"),ni=n("6663"),ri=n("0b05"),ai=n("6e76"),oi=n("f644"),ii=n("0c45"),ci=n("0b5d"),si=n("6b75"),ui=n("63cc"),li=n("bbd6"),pi=n("97f3"),fi=n("8c2f"),di=n("56a1"),bi=n("6825"),yi=n("5974");function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){vi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gi(e,t){return ji(e)||ki(e,t)||wi(e,t)||Oi()}function Oi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wi(e,t){if(e){if("string"===typeof e)return _i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_i(e,t):void 0}}function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ki(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ji(e){if(Array.isArray(e))return e}var Ei=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe($["a"].apply(void 0,t),Object(li["a"])())}};function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(li["a"])(),Object(W["a"])((function(e){return Object(si["a"])(e)})),Object(pi["a"])((function(t,n){var r=t.acc,a=gi(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:mi(mi({},r),{},vi({},o,i)),changed:[o,i]}}),{acc:{}}),Object($["a"])("changed"),Object(B["a"])(St))}}function xi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(fi["a"])((function(e){return e.pipe(Object(M["a"])((function(){if("number"===typeof t)return t;var e=t.next();return e.done?-1:e.value})),Object(di["a"])((function(e){return e>=0})),Object(bi["a"])((function(e){return Object(ti["a"])(e)})))})),Object(ii["a"])(e))}}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return t>=10};return function(n){return n.pipe(Object(ai["a"])((function(n){return n.pipe(Object(W["a"])((function(n,r){var a;if("number"===typeof e)a=e;else{var o=e.next();a=o.done?-1:o.value}return t(n,r)||a<0?Object(ni["a"])(n):Object(ti["a"])(a)})))})))}}function Ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(P["a"])(e).pipe(Si(t,n))}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.pipe(Object(M["a"])((function(e){return t?!e:!!e})),Object(li["a"])());return function(e){return e.pipe(Object(ii["a"])(n.pipe(Object(B["a"])((function(e){return!e})))),Object(fi["a"])((function(){return n.pipe(Object(B["a"])((function(e){return e})))})))}}function Di(e){return function(t){return Object(ui["a"])(Object(ti["a"])(e).pipe(Object(yi["a"])(Object(ni["a"])(new Error("timeout waiting first")))),t)}}function Ri(e,t){return Pi(e)||Ii(e,t)||Fi(e,t)||Ci()}function Ci(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pi(e){if(Array.isArray(e))return e}function Li(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ui(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Li(o,r,a,i,c,"next",e)}function c(e){Li(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Mi(e){return $i(e)||Wi(e)||Fi(e)||Bi()}function Bi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fi(e,t){if(e){if("string"===typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Wi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $i(e){if(Array.isArray(e))return Hi(e)}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vi(e){var t=e.tokenNetwork,n=e.partner,r="string"===typeof n?n:n.address;return"".concat(t,"@").concat(r)}function qi(e){return"_id"in e&&e._id?e._id:"".concat(Vi(e),"#").concat(e.id.toString().padStart(9,"0"))}function Ki(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),p=s.sub(c),f=c.sub(s),d=qt.apply(void 0,[t].concat(Mi(e.own.pendingWithdraws.filter((function(e){return e.type===xn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=qt.apply(void 0,[n].concat(Mi(e.partner.pendingWithdraws.filter((function(e){return e.type===xn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(d).sub(u).add(p),h=e.partner.deposit.sub(b).sub(l).add(f),m=e.own.deposit.add(p).sub(u),v=m.sub(t),g=e.partner.deposit.add(f).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:p,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:f,partnerCapacity:h,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:m,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Gi(e,t,n){var r=n.log;return function(n){return n.pipe(Object(ri["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object(W["a"])(function(){var e=Ui(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.wait();case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(n){var a,o,i,c=Ri(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new mt(t,{status:null!==(a=u.status)&&void 0!==a?a:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var Zi=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],Yi=["always failing transaction","execution failed due to an exception","transaction failed","execution reverted"];function Xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:h.a},a=r.log;return function(r){return r.pipe(Object(ai["a"])((function(r){return r.pipe(Object(W["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t;return null===(t=r.message)||void 0===t?void 0:t.includes(e)}))?Object(ti["a"])(e):Object(ni["a"])(r)})))})))}}function Qi(e){return e.pipe(Object($["a"])("channels"),Ti(),Object($["a"])(1),Object(oi["a"])(qi,void 0,void 0,(function(){return new D["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=Ri(n,2),a=r[0],o=r[1],i=+o;return t.pipe(Object(ii["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[a])||void 0===t?void 0:t.id)!==i})))))})))}function zi(e,t,n){var r=Ri(e,3),a=r[0],o=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yt.RDN_APPROVE_TRANSACTION_FAILED,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:h.a,minimumAllowance:k["Zero"]},u=s.log,l=s.minimumAllowance;if(vt(a.gte(i),[yt.RDN_INSUFFICIENT_BALANCE,{current:a.toString(),required:i.toString()}]),o.gte(i))return Object(C["a"])(!0);var p=Object(C["a"])(!0);return o.isZero()||(p=Object(P["a"])((function(){return t.functions.approve(n,0)})).pipe(Gi("approve",c,{log:u}),Object(ci["a"])(!0))),p.pipe(Object(W["a"])((function(){return t.functions.approve(n,qt(l,i))})),Gi("approve",c,{log:u}),Object($["a"])(1))}function Ji(e){return Ji="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ji(e)}function ec(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=pc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function tc(e,t){if(null==e)return{};var n,r,a=nc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function nc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function rc(e){var t=ac(e,"string");return"symbol"===Ji(t)?t:String(t)}function ac(e,t){if("object"!==Ji(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function oc(e,t){return sc(e)||cc(e,t)||pc(e,t)||ic()}function ic(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sc(e){if(Array.isArray(e))return e}function uc(e){return dc(e)||fc(e)||pc(e)||lc()}function lc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pc(e,t){if(e){if("string"===typeof e)return bc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bc(e,t):void 0}}function fc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function dc(e){if(Array.isArray(e))return bc(e)}function bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vc(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var gc=qr(ei.blockNumber).handle(Fa,(function(e,t){vc(e);var n=t.payload;return n.blockNumber})),Oc=qr(ei.tokens).handle(Wa,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:hc(hc({},e),{},mc({},r,a))}));function wc(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var _c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Go.is(t)){if(void 0===t.payload.confirmed)return[].concat(uc(wc(e,t)),[t]);var n=wc(e,t);return n.length!==e.length?n:e}return e},kc={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:Rn,pendingWithdraws:[],nextNonce:k["One"]};function jc(e,t){var n,r,a=Vi(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={_id:qi(hc(hc({},t.meta),{},{id:t.payload.id})),id:t.payload.id,state:ra.open,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:hc(hc({},kc),{},{address:e.address}),partner:hc(hc({},kc),{},{address:t.meta.partner})};return hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},a,i))})}function Ec(e,t){var n;if(!t.payload.confirmed)return e;var r=Vi(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==ra.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=qa.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=oc(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=hc(hc({},a),{},mc({},o,hc(hc({},a[o]),{},(n={},mc(n,s,u),mc(n,"pendingWithdraws",l),n)))),hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},r,a))}))}function Tc(e,t){var n=Vi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===ra.open)r=hc(hc({},r),{},{state:ra.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=hc(hc({},r),{},{state:ra.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},n,r))})}function xc(e,t){var n=Vi(t.meta),r=e.channels[n];if(!r)return e;if(Ka.request.is(t)&&r.state===ra.open)r=hc(hc({},r),{},{state:ra.closing});else if(Za.request.is(t)&&r.state===ra.settleable)r=hc(hc({},r),{},{state:ra.settling});else{if(!Ga.is(t)||r.state!==ra.closed)return e;r=hc(hc({},r),{},{state:ra.settleable})}return hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},n,r))})}function Sc(e,t){var n=Vi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==ra.settling)return hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},n,hc(hc({},r),{},{state:ra.settling})))});if(t.payload.confirmed){var a=e.channels,o=(a[n],tc(a,[n].map(rc)));return hc(hc({},e),{},{channels:o,oldChannels:hc(hc({},e.oldChannels),{},mc({},qi(r),hc(hc({},r),{},{state:ra.settled,settleBlock:t.payload.txBlock})))})}return e}function Ac(e,t,n){var r=!1,a=e.map((function(e){return e.secrethash!==t||e.registered||e.expiration.lte(n)?e:(r=!0,hc(hc({},e),{},{registered:!0}))}));return r?a:e}function Nc(e,t){if(!t.payload.confirmed)return e;var n,r=t.meta.direction===ka.SENT?"own":"partner",a=uc(Object.keys(e.channels)),o=ec(a);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=e.channels[i],s=Ac(c[r].locks,t.meta.secrethash,t.payload.txBlock);s!==c[r].locks&&(e=hc(hc({},e),{},{channels:hc(hc({},e.channels),{},mc({},i,hc(hc({},c),{},mc({},r,hc(hc({},c[r]),{},{locks:s})))))}))}}catch(u){o.e(u)}finally{o.f()}return e}var Dc=qr(ei).handle($a.success,jc).handle([Va.success,qa],Ec).handle([Ka.request,Ga,Za.request],xc).handle(Ka.success,Tc).handle(Za.success,Sc).handle(fo.success,Nc),Rc=Ra({blockNumber:gc,tokens:Oc,pendingTxs:_c},ei),Cc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei,t=arguments.length>1?arguments[1]:void 0;return[Rc,Dc].reduce((function(e,n){return n(e,t)}),e)},Ic=Cc;function Pc(e){return Bc(e)||Mc(e)||Uc(e)||Lc()}function Lc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uc(e,t){if(e){if("string"===typeof e)return Fc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fc(e,t):void 0}}function Mc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Bc(e){if(Array.isArray(e))return Fc(e)}function Fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(n),!0).forEach((function(t){Hc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vc(e,t){if(null==e)return{};var n,r,a=qc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Kc,Gc=qr(ei.transport).handle(Qa,(function(e,t){e.rooms;var n=Vc(e,["rooms"]);return $c($c({},e.server!==t.payload.server?n:e),t.payload)})).handle(Ja,(function(e,t){var n,r;return $c($c({},e),{},{rooms:$c($c({},e.rooms),{},Hc({},t.meta.address,[t.payload.roomId].concat(Pc((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(eo,(function(e,t){var n,r;return $c($c({},e),{},{rooms:$c($c({},e.rooms),{},Hc({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Zc=Ra({transport:Gc},ei),Yc=Zc,Xc=n("cfd5"),Qc=n.n(Xc);function zc(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zc(o,r,a,i,c,"next",e)}function c(e){zc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ts(e,t){return as(e)||rs(e,t)||is(e,t)||ns()}function ns(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function as(e){if(Array.isArray(e))return e}function os(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=is(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function is(e,t){if(e){if("string"===typeof e)return cs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cs(e,t):void 0}}function cs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ss(e){var t,n=[],r=os(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Or(a.expiration,32),Or(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(hr["concat"])(n))}function us(e){return Object(_["sha256"])(e)}function ls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(hr["hexlify"])(Object(_["randomBytes"])(e))}function ps(){return Object(_["bigNumberify"])(Date.now())}function fs(){return Object(_["bigNumberify"])(Date.now())}function ds(e){return"_id"in e?e._id:"".concat(e.direction,":").concat(e.secrethash)}var bs=new RegExp("^(".concat(Object.values(ka).join("|"),"):(0x[a-f0-9]{64})$"),"i");function ys(e){var t=e.match(bs);vt(t,"Invalid transferKey format");var n=ts(t,3),r=n[1],a=n[2];return{direction:r,secrethash:a}}var hs,ms,vs=(Kc={},es(Kc,ma.expired,(function(e){var t;return null===(t=e.expiredProcessed)||void 0===t?void 0:t.ts})),es(Kc,ma.unlocked,(function(e){var t;return null===(t=e.unlockProcessed)||void 0===t?void 0:t.ts})),es(Kc,ma.expiring,(function(e){var t;return null===(t=e.expired)||void 0===t?void 0:t.ts})),es(Kc,ma.unlocking,(function(e){var t;return null===(t=e.unlock)||void 0===t?void 0:t.ts})),es(Kc,ma.registered,(function(e){var t;return null===(t=e.secretRegistered)||void 0===t?void 0:t.ts})),es(Kc,ma.revealed,(function(e){var t;return null===(t=e.secretReveal)||void 0===t?void 0:t.ts})),es(Kc,ma.requested,(function(e){var t;return null===(t=e.secretRequest)||void 0===t?void 0:t.ts})),es(Kc,ma.closed,(function(e){var t;return null===(t=e.channelClosed)||void 0===t?void 0:t.ts})),es(Kc,ma.received,(function(e){var t;return null===(t=e.transferProcessed)||void 0===t?void 0:t.ts})),es(Kc,ma.pending,(function(e){return e.transfer.ts})),Kc);function gs(e){for(var t=0,n=Object.entries(vs);t<n.length;t++){var r=ts(n[t],2),a=r[0],o=r[1],i=o(e);if(void 0!==i)return a}return ma.pending}function Os(e){return!!(e.unlockProcessed||e.expiredProcessed||e.secretRegistered||e.channelSettled)}function ws(e){var t=gs(e),n=new Date(e.transfer.ts),r=new Date(vs[t](e)),a=e.transfer,o=e.direction,i=a.lock.amount.sub(e.fee),c=e.secretRequest&&e.secretRequest.amount.lt(i),s=!!(e.secretReveal||e.unlock||e.secretRegistered)||!(c||e.expired||e.channelClosed)&&void 0,u=Os(e);return{key:ds(e),secrethash:a.lock.secrethash,direction:o,status:t,initiator:a.initiator,partner:e.partner,target:a.target,metadata:a.metadata,paymentId:a.payment_identifier,chainId:a.chain_id.toNumber(),token:a.token,tokenNetwork:a.token_network_address,channelId:a.channel_identifier,value:i,fee:e.fee,amount:a.lock.amount,expirationBlock:a.lock.expiration.toNumber(),startedAt:n,changedAt:r,success:s,completed:u,secret:e.secret}}function _s(e,t,n,r){return r===k["HashZero"]?Object(C["a"])(Rn):Object(P["a"])((function(){return e.find({selector:{channel:qi(t),direction:n}})})).pipe(Object(W["a"])((function(e){var t=e.docs;return Object(Zt["a"])(t)})),Object(W["a"])((function(e){var t=xt(Ta,e);return Object(Zt["a"])([t.transfer,t.unlock,t.expired])})),Object(B["a"])(St),Object(M["a"])(pa),Object(F["a"])((function(e){return ia(e)===r})))}function ks(e,t,n){return js.apply(this,arguments)}function js(){return js=Jc(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof r&&(r=ds(r)),"address"in t){e.next=5;break}return e.next=4,t.pipe(Object(F["a"])()).toPromise();case 4:t=e.sent;case 5:if(!(r in t.transfers)){e.next=7;break}return e.abrupt("return",t.transfers[r]);case 7:return e.t0=xt,e.t1=Ta,e.next=11,n.get(r);case 11:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 13:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Es(e){return Es="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(e)}function Ts(e,t){if(null==e)return{};var n,r,a=xs(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xs(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ss(e){var t=As(e,"string");return"symbol"===Es(t)?t:String(t)}function As(e,t){if("object"!==Es(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ns(e){return Is(e)||Cs(e)||Rs(e)||Ds()}function Ds(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rs(e,t){if(e){if("string"===typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,t):void 0}}function Cs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Is(e){if(Array.isArray(e))return Ps(e)}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bs=(hs={},Ms(hs,ka.SENT,"own"),Ms(hs,ka.RECEIVED,"partner"),hs);function Fs(e,t){var n,r=ds(t.meta);if(!(r in e.transfers))return e;var a=e.transfers[r];return a.secret||(e=Us(Us({},e),{},{transfers:Us(Us({},e.transfers),{},Ms({},r,Us(Us({},a),{},{secret:t.payload.secret})))})),fo.success.is(t)&&t.payload.confirmed&&t.payload.txBlock!==(null===(n=a.secretRegistered)||void 0===n?void 0:n.txBlock)&&t.payload.txBlock<a.expiration&&(e=Us(Us({},e),{},{transfers:Us(Us({},e.transfers),{},Ms({},r,Us(Us({},a),{},{secretRegistered:Ft(Qc()(["txHash","txBlock"],t.payload))})))})),e}function Ws(e,t){var n,r,a=t.payload.message,o=t.meta.secrethash,i=ds(t.meta),c=a.token_network_address,s=t.payload.partner,u=Vi({tokenNetwork:c,partner:s}),l=Bs[t.meta.direction],p=e.channels[u],f=i in e.transfers,d=ho.success.is(t)?"unlock":"expired";if(uo.is(t)&&f||!uo.is(t)&&(!f||d in e.transfers[i])||(null===p||void 0===p?void 0:p.state)!==ra.open||!a.nonce.eq(p[l].nextNonce))return e;switch(t.type){case uo.type:n=[].concat(Ns(p[l].locks),[t.payload.message.lock]),r=Us(Us({_id:i,channel:qi(p)},t.meta),{},{transfer:Ft(t.payload.message),fee:t.payload.fee,expiration:t.payload.message.lock.expiration.toNumber(),partner:s,cleared:0});break;case ho.success.type:case vo.success.type:n=p[l].locks.filter((function(e){return e.secrethash!==o})),r=Us(Ms({},d,Ft(t.payload.message)),e.transfers[i]);break}return p=Us(Us({},p),{},Ms({},l,Us(Us({},p[l]),{},{locks:n,balanceProof:pa(a),nextNonce:p[l].nextNonce.add(1)}))),Us(Us({},e),{},{channels:Us(Us({},e.channels),{},Ms({},u,p)),transfers:Us(Us({},e.transfers),{},Ms({},i,r))})}var $s=(ms={},Ms(ms,bo.type,"secretRequest"),Ms(ms,yo.type,"secretReveal"),Ms(ms,lo.type,"transferProcessed"),Ms(ms,mo.type,"unlockProcessed"),Ms(ms,go.type,"expiredProcessed"),ms);function Hs(e,t){var n=ds(t.meta),r=$s[t.type];return!(n in e.transfers)||!bo.is(t)&&r in e.transfers[n]||(e=Us(Us({},e),{},{transfers:Us(Us({},e.transfers),{},Ms({},n,Us(Us({},e.transfers[n]),{},Ms({},r,Ft(t.payload.message)))))})),e}function Vs(e,t){var n=ds(t.meta);if(n in e.transfers){var r=e.transfers,a=(r[n],Ts(r,[n].map(Ss)));e=Us(Us({},e),{},{transfers:a})}return e}function qs(e,t){var n=ds(t.meta);return n in e.transfers||(e=Us(Us({},e),{},{transfers:Us(Us({},e.transfers),{},Ms({},n,Us(Us({},t.payload),{},{cleared:0})))})),e}function Ks(e,t){if(!t.payload.confirmed)return e;for(var n=Ka.success.is(t)?"channelClosed":"channelSettled",r=qi(Us({id:t.payload.id},t.meta)),a=0,o=Object.values(e.transfers);a<o.length;a++){var i=o[a];i.channel===r&&(e=Us(Us({},e),{},{transfers:Us(Us({},e.transfers),{},Ms({},ds(i),Us(Us({},i),{},Ms({},n,Ft(Qc()(["txHash","txBlock"],t.payload))))))}))}return e}function Gs(e,t){var n=t.payload.message,r=Vi(t.meta),a=e.channels[r],o=t.meta.direction===ka.RECEIVED!==jo.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==ra.open||!n.nonce.eq(a[o].nextNonce))return e;a=Us(Us({},a),{},Ms({},o,Us(Us({},a[o]),{},{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===ka.RECEIVED?"partner":"own",c=[].concat(Ns(a[i].pendingWithdraws),[t.payload.message]);return a=Us(Us({},a),{},Ms({},i,Us(Us({},a[i]),{},{pendingWithdraws:c}))),Us(Us({},e),{},{channels:Us(Us({},e.channels),{},Ms({},r,a))})}function Zs(e,t){var n=Vi(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==ra.open)return e;var a=t.meta.direction===ka.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Us(Us({},r),{},Ms({},a,Us(Us({},r[a]),{},{pendingWithdraws:o}))),Us(Us({},e),{},{channels:Us(Us({},e.channels),{},Ms({},n,r))})}var Ys=qr(ei).handle([po,fo.success],Fs).handle([uo,ho.success,vo.success],Ws).handle([lo,mo,go,bo,yo],Hs).handle(Oo,Vs).handle(wo,qs).handle([Ka.success,Za.success],Ks).handle([jo.request,jo.success,Eo.success],Gs).handle(To,Zs),Xs=Ys;function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){Js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eu=qr(ei.iou).handle(Do,(function(e,t){return zs(zs({},e),{},Js({},t.meta.tokenNetwork,zs(zs({},e[t.meta.tokenNetwork]),{},Js({},t.meta.serviceAddress,t.payload.iou))))})).handle(Ro,(function(e,t){return Sa()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),tu=Ra({iou:eu},ei),nu=tu;function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){ou(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iu(e,t){return pu(e)||lu(e,t)||su(e,t)||cu()}function cu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function su(e,t){if(e){if("string"===typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uu(e,t):void 0}}function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pu(e){if(Array.isArray(e))return e}var fu=qr(ei).handle($o,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=iu(o[a],2),c=i[0],s=i[1];void 0!==s?r=au(au({},r),{},ou({},c,s)):c in r&&(r=Sa()(c,r))}return r===e.config?e:au(au({},e),{},{config:r})})),du={configReducer:fu,channelsReducer:Ic,transportReducer:Yc,transfersReducer:Xs,servicesReducer:nu},bu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei,t=arguments.length>1?arguments[1]:void 0;return Object.values(du).reduce((function(e,n){return n(e,t)}),e)},yu=n("3121"),hu=n("3d27"),mu=n("c578"),vu=n("0a13"),gu=n.n(vu),Ou=n("e590"),wu=n.n(Ou),_u=n("7924");function ku(e,t){return Su(e)||xu(e,t)||Eu(e,t)||ju()}function ju(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eu(e,t){if(e){if("string"===typeof e)return Tu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tu(e,t):void 0}}function Tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Su(e){if(Array.isArray(e))return e}function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){Du(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ru=N()((function(e){return e.pipe(Object(B["a"])(za.success.is),Object(pi["a"])((function(e,t){return Nu(Nu({},e),{},Du({},t.meta.address,t))}),{}),Object(_u["a"])(),Object(mu["a"])({}))}));function Cu(e,t){return Object.values(e).find((function(e){return e.payload.userId===t}))}function Iu(e){for(var t=new URL("mxc://raiden.network/cap"),n=function(e,n){return t.searchParams.append(e,n)},r=0,a=Object.entries(e);r<a.length;r++){var o=ku(a[r],2),i=o[0],c=o[1];Array.isArray(c)?c.forEach(n.bind(null,i)):n(i,c)}return t.href}function Pu(e){if(e){var t={};try{var n=new URL(e);return n.searchParams.forEach((function(e,n){var r=e;if(/^\d+$/.test(e))r=_r(e);else{var a=e.toLowerCase();"none"===a||"null"===a?r=null:"false"===a?r=!1:"true"===a&&(r=!0)}if(n in t){var o=t[n];Array.isArray(o)||(t[n]=o=[o]),o.push(r)}else t[n]=r})),t}catch(r){}}}function Lu(e,t){var n;return null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:Me[t]}var Uu=n("ad3b"),Mu=n("3e9b");function Bu(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Fu(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bu(o,r,a,i,c,"next",e)}function c(e){Bu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Wu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function $u(e,t,n){Wu(t);var r=n.db;return e.pipe(Object(Uu["a"])(),Object(Mu["a"])(Fu(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.busy$.pipe(Object(F["a"])((function(e){return!e}))).toPromise();case 2:return r.busy$.next(!0),e.prev=3,e.next=6,r.close();case 6:return e.prev=6,r.busy$.next(!1),r.busy$.complete(),e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[3,,6,10]])})))))}var Hu,Vu=n("79ce"),qu=n("17b7"),Ku=n("961b"),Gu=n("97cb"),Zu=n("9f7c"),Yu=n("739b"),Xu=n("793a"),Qu=n("5278"),zu=n.n(Qu),Ju=n("12aa"),el=n.n(Ju),tl=n("7954"),nl=n("5c41"),rl=n("a0df"),al=n("31a7"),ol=n("c998"),il=n("ee79"),cl=n("b4cc"),sl=n("0ff6"),ul=n("4e0b"),ll=n("1f0b"),pl=n("4e67"),fl=n("3c27"),dl=n("7bdd"),bl=n.n(dl),yl=n("6738"),hl=n("7bcb");function ml(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function vl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ml(o,r,a,i,c,"next",e)}function c(e){ml(o,r,a,i,c,"throw",e)}i(void 0)}))}}function gl(){return Ol.apply(this,arguments)}function Ol(){return Ol=vl(b.a.mark((function e(){var t,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Hu){e.next=2;break}return e.abrupt("return",Hu);case 2:if(!("JEST_WORKER_ID"in Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}))){e.next=11;break}return e.next=5,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-7ee7822e")]).then(n.bind(null,"0267"));case 5:r=e.sent,a=r.default,yl["a"].plugin(a),Hu="memory",e.next=26;break;case 11:if(!(null===(t=globalThis.location)||void 0===t?void 0:t.href)){e.next=20;break}return e.next=14,n.e("chunk-d86182e6").then(n.bind(null,"1f4b"));case 14:o=e.sent,i=o.default,yl["a"].plugin(i),Hu="indexeddb",e.next=26;break;case 20:return e.next=22,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-3d571b96")]).then(n.bind(null,"55ec"));case 22:c=e.sent,s=c.default,yl["a"].plugin(s),Hu="leveldb";case 26:return e.abrupt("return",Hu);case 27:case"end":return e.stop()}}),e)}))),Ol.apply(this,arguments)}var wl={},_l=wl;function kl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Nl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}var jl=b.a.mark(wp);function El(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?El(Object(n),!0).forEach((function(t){xl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sl(e,t){return Cl(e)||Rl(e,t)||Nl(e,t)||Al()}function Al(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nl(e,t){if(e){if("string"===typeof e)return Dl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dl(e,t):void 0}}function Dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Cl(e){if(Array.isArray(e))return e}function Il(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Pl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Il(o,r,a,i,c,"next",e)}function c(e){Il(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ll(e){return function(){return new Ul(e.apply(this,arguments))}}function Ul(e){var t,n;function r(e,r){return new Promise((function(o,i){var c={key:e,arg:r,resolve:o,reject:i,next:null};n?n=n.next=c:(t=n=c,a(e,r))}))}function a(t,n){try{var r=e[t](n),i=r.value,c=i instanceof Bl;Promise.resolve(c?i.wrapped:i).then((function(e){c?a("return"===t?"return":"next",e):o(r.done?"return":"normal",e)}),(function(e){a("throw",e)}))}catch(s){o("throw",s)}}function o(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1});break}t=t.next,t?a(t.key,t.arg):n=null}this._invoke=r,"function"!==typeof e.return&&(this.return=void 0)}function Ml(e){return new Bl(e)}function Bl(e){this.wrapped=e}function Fl(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator],null!=t))return t.call(e);if(Symbol.iterator&&(t=e[Symbol.iterator],null!=t))return t.call(e)}throw new TypeError("Object is not async iterable")}function Wl(e,t){var n={},r=!1;function a(n,a){return r=!0,a=new Promise((function(t){t(e[n](a))})),{done:!1,value:t(a)}}return"function"===typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return r?(r=!1,e):a("next",e)},"function"===typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"===typeof e.return&&(n.return=function(e){return r?(r=!1,e):a("return",e)}),n}"function"===typeof Symbol&&Symbol.asyncIterator&&(Ul.prototype[Symbol.asyncIterator]=function(){return this}),Ul.prototype.next=function(e){return this._invoke("next",e)},Ul.prototype.throw=function(e){return this._invoke("throw",e)},Ul.prototype.return=function(e){return this._invoke("return",e)},yl["a"].plugin(hl["a"]);var $l="state.",Hl="channels.";function Vl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r=e+"￰";return t?{startkey:r,endkey:n,descending:t}:{startkey:n,endkey:r}}function ql(e){return Kl.apply(this,arguments)}function Kl(){return Kl=Pl(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Set,e.next=3,t.allDocs({startkey:"a",endkey:"z￰"});case 3:return r=e.sent,r.rows.forEach((function(e){var t=e.id;return n.add(t)})),a=new pl["a"](!1),e.abrupt("return",Object.assign(t,{storageKeys:n,busy$:a}));case 7:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Gl(e){return Zl.apply(this,arguments)}function Zl(){return Zl=Pl(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),e.next=3,n.info();case 3:if(r=e.sent,0!==r.doc_count||0!=r.update_seq){e.next=8;break}return e.next=7,n.destroy();case 7:return e.abrupt("return");case 8:return e.abrupt("return",ql(n));case 9:case"end":return e.stop()}}),e,this)}))),Zl.apply(this,arguments)}function Yl(e){return Xl.apply(this,arguments)}function Xl(){return Xl=Pl(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),n.setMaxListeners(30),e.next=4,Promise.all([n.createIndex({index:{name:"byCleared",fields:["cleared","direction"]}}),n.createIndex({index:{name:"byPartner",fields:["direction","partner"]}}),n.createIndex({index:{name:"bySecrethash",fields:["secrethash"]}}),n.createIndex({index:{name:"byChannel",fields:["channel"]}})]);case 4:return e.abrupt("return",ql(n));case 5:case"end":return e.stop()}}),e,this)}))),Xl.apply(this,arguments)}function Ql(e,t){return Object(P["a"])((function(){var n=e.changes(t);return Object(I["a"])(Object(fl["a"])(n,"change"),Object(fl["a"])(n,"error").pipe(Object(W["a"])((function(e){return Object(ni["a"])(e)})))).pipe(Object($["a"])(0),Object(ii["a"])(Object(fl["a"])(n,"complete")),Object(Mu["a"])((function(){return n.cancel()})))}))}function zl(e){return Jl.apply(this,arguments)}function Jl(){return Jl=Pl(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.constructor.__defaults.log,r={channels:{},oldChannels:{},transfers:{}},e.next=4,t.allDocs(Tl(Tl({},Vl($l)),{},{include_docs:!0}));case 4:a=e.sent,o=kl(a.rows);try{for(o.s();!(i=o.n()).done;)c=i.value,s=c.id,u=c.doc,r[s.substr($l.length)]=u.value}catch(b){o.e(b)}finally{o.f()}return e.next=9,t.allDocs(Tl(Tl({},Vl(Hl)),{},{include_docs:!0}));case 9:l=e.sent,p=kl(l.rows);try{for(p.s();!(f=p.n()).done;)d=f.value,y=d.id,h=d.doc,"settleBlock"in h?r.oldChannels[y]=Tl(Tl({},h),{},{_id:y.substr(Hl.length)}):r.channels[Vi(h)]=Tl(Tl({},h),{},{_id:y.substr(Hl.length)})}catch(b){p.e(b)}finally{p.f()}return e.next=14,t.find({selector:{cleared:0,direction:{$exists:!0}}});case 14:m=e.sent,m.warning&&(null===n||void 0===n||n.warn(m.warning,"getRaidenState")),v=kl(m.docs);try{for(v.s();!(g=v.n()).done;)O=g.value,r.transfers[O._id]=O}catch(b){v.e(b)}finally{v.f()}if(!("address"in r)){e.next=20;break}return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function ep(e,t){return tp.apply(this,arguments)}function tp(){return tp=Pl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],a=0,o=Object.entries(n);a<o.length;a++)if(i=Sl(o[a],2),c=i[0],s=i[1],"channels"===c||"oldChannels"===c)for(u=0,l=Object.values(s);u<l.length;u++)p=l[u],r.push(Tl(Tl({},p),{},{_id:Hl+p._id}));else if("transfers"===c)for(f=0,d=Object.values(s);f<d.length;f++)y=d[f],r.push(y);else r.push({_id:$l+c,value:s});return e.next=4,t.bulkDocs(r);case 4:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e){return Object.keys(e).map((function(e){return+e})).sort()}function rp(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_l;return null!==(e=Vt(np(t)))&&void 0!==e?e:0}function ap(e){return+e.name.match(/_(\d+)$/)[1]}function op(){return ip.apply(this,arguments)}function ip(){return ip=Pl(b.a.mark((function e(){var t,n=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{log:h.a},t.log||(t.log=h.a),t.adapter){e.next=6;break}return e.next=5,gl();case 5:t.adapter=e.sent;case 6:return e.abrupt("return",yl["a"].defaults(t));case 7:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function cp(e){return sp.apply(this,arguments)}function sp(){return sp=Pl(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h=this,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=m.length>1&&void 0!==m[1]?m[1]:_l,r=m.length>2&&void 0!==m[2]&&m[2],a=this.__defaults.log,o=np(n),i=0,s=o.length-1;case 6:if(!(s>=0)){e.next=18;break}return u=o[s],e.next=10,Gl.call(this,"".concat(t,"_").concat(u));case 10:if(l=e.sent,!l){e.next=15;break}return i=u,c=l,e.abrupt("break",18);case 15:--s,e.next=6;break;case 18:if(c){e.next=22;break}return e.next=21,Gl.call(this,"".concat(t,"_").concat(i));case 21:c=e.sent;case 22:if(c){e.next=27;break}return i=rp(n),e.next=26,Yl.call(this,"".concat(t,"_").concat(i));case 26:c=e.sent;case 27:p=kl(o),e.prev=28,d=b.a.mark((function e(){var o,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=f.value,!(o<=i)){e.next=3;break}return e.abrupt("return","continue");case 3:return e.next=5,Yl.call(h,"".concat(t,"_").concat(o));case 5:return s=e.sent,e.prev=6,u=/^[a-z]/i,e.next=10,Ql(c,{since:0,include_docs:!0,filter:function(e){var t=e._id;return u.test(t)}}).pipe(Object(Xu["a"])((function(e){return Object(P["a"])((function(){return n[o](e.doc,c)})).pipe(Object(W["a"])((function(e){return Object(Zt["a"])(e)})),Object(Xu["a"])(function(){var e=Pl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"_rev"in t&&delete t["_rev"],e.abrupt("return",s.put(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))).toPromise();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e["catch"](6),null===a||void 0===a||a.error("Error migrating db",{from:i,to:o},e.t0),s.destroy(),e.t0;case 17:if(null===a||void 0===a||a.info("Migrated db",{name:t,from:i,to:o}),!r){e.next=23;break}return e.next=21,c.destroy();case 21:e.next=25;break;case 23:return e.next=25,c.close();case 25:i=o,c=s;case 27:case"end":return e.stop()}}),e,null,[[6,12]])})),p.s();case 31:if((f=p.n()).done){e.next=38;break}return e.delegateYield(d(),"t0",33);case 33:if(y=e.t0,"continue"!==y){e.next=36;break}return e.abrupt("continue",36);case 36:e.next=31;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](28),p.e(e.t1);case 43:return e.prev=43,p.f(),e.finish(43);case 46:return vt(ap(c)===rp(n),"Not latest version"),e.abrupt("return",c);case 48:case"end":return e.stop()}}),e,this,[[28,40,43,46]])}))),sp.apply(this,arguments)}function up(e){return lp.apply(this,arguments)}function lp(){return lp=Pl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=ap(t),e.next=3,t.get($l+"chainId");case 3:return e.t1=e.sent.value,e.next=6,t.get($l+"registry");case 6:return e.t2=e.sent.value,e.next=9,t.get($l+"address");case 9:return e.t3=e.sent.value,e.next=12,t.get($l+"blockNumber");case 12:return e.t4=e.sent.value,e.abrupt("return",{_id:"_meta",version:e.t0,network:e.t1,registry:e.t2,address:e.t3,blockNumber:e.t4});case 14:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function pp(e){return"function"===typeof e[Symbol.asyncIterator]}function fp(e,t){return dp.apply(this,arguments)}function dp(){return dp=Pl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=O.length>2&&void 0!==O[2]?O[2]:_l,a=O.length>3&&void 0!==O[3]&&O[3],o=this.__defaults.log,i=pp(t)?t[Symbol.asyncIterator]():t[Symbol.iterator](),e.next=6,i.next();case 6:c=e.sent,vt(!c.done&&"_meta"===c.value._id,'first yielded value must be "_meta"'),s=c.value,u=rp(r);case 10:if(!(u>=s.version)){e.next=28;break}return l="".concat(n,"_").concat(u),e.next=14,Gl.call(this,l);case 14:if(p=e.sent,p){e.next=17;break}return e.abrupt("continue",25);case 17:return e.next=19,up(p);case 19:return f=e.sent,vt(s.version>=u&&s.blockNumber>=f.blockNumber,yt.RDN_STATE_MIGRATION),vt(s.address===f.address,[yt.RDN_STATE_ADDRESS_MISMATCH,{expected:f.address,received:s.address}],null===o||void 0===o?void 0:o.error),vt(s.registry===f.registry&&s.network===f.network,[yt.RDN_STATE_NETWORK_MISMATCH,{expectedRegistry:f.registry,receivedRegistry:s.registry,expectedNetwork:f.network,receivedNetwork:s.network}],null===o||void 0===o?void 0:o.error),e.next=25,p.destroy();case 25:--u,e.next=10;break;case 28:return d="".concat(n,"_").concat(s.version),e.next=31,Yl.call(this,d);case 31:return y=e.sent,e.next=34,i.next();case 34:h=e.sent;case 35:if(h.done){e.next=45;break}return m=h.value,"_rev"in m&&delete m["_rev"],e.next=40,Promise.all([i.next(),y.put(m)]);case 40:v=e.sent,g=Sl(v,1),h=g[0],e.next=35;break;case 45:return null===o||void 0===o||o.warn("Replaced/loaded database",{name:n,meta:s}),e.next=48,y.close();case 48:return e.next=50,cp.call(this,n,r,a);case 50:return e.abrupt("return",e.sent);case 51:case"end":return e.stop()}}),e,this)}))),dp.apply(this,arguments)}function bp(e){return e?e.slice(0,-1)+String.fromCharCode(e.slice(-1).charCodeAt(0)+1):""}function yp(e){return hp.apply(this,arguments)}function hp(){return hp=Ll(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.batch,a=void 0===r?10:r,i=t.changes({since:"now",live:!0}),i.on("change",(function(e){var t=e.id;return o=t})),e.prev=3,e.next=6,up(t);case 6:c="a";case 7:return e.next=10,Ml(t.allDocs({startkey:c,endkey:"￰",limit:a,include_docs:!0}));case 10:return s=e.sent,e.delegateYield(Wl(Fl(s.rows.map((function(e){var t=e.doc;return bl()(["_rev"],t)}))),Ml),"t0",12);case 12:if(vt(!o,["Database changed while dumping",{key:o}]),u=Vt(s.rows),!u){e.next=18;break}c=bp(u.id),e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=7;break;case 21:return e.prev=21,i.cancel(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,,21,24]])}))),hp.apply(this,arguments)}function mp(e){return vp.apply(this,arguments)}function vp(){return vp=Pl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Yl.call(t.constructor,t.name));case 1:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function gp(e,t){return Op.apply(this,arguments)}function Op(){return Op=Pl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.constructor.__defaults.log,o=!1,i=10;case 3:if(!(i>0)){e.next=56;break}e.prev=4,c=[],s=!0,u=!1,e.prev=8,p=Fl(yp(t,n));case 10:return e.next=12,p.next();case 12:return f=e.sent,s=f.done,e.next=16,f.value;case 16:if(d=e.sent,s){e.next=23;break}y=d,c.push(y);case 20:s=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](8),u=!0,l=e.t0;case 29:if(e.prev=29,e.prev=30,s||null==p.return){e.next=34;break}return e.next=34,p.return();case 34:if(e.prev=34,!u){e.next=37;break}throw l;case 37:return e.finish(34);case 38:return e.finish(29);case 39:if(!o){e.next=42;break}return e.next=42,t.close();case 42:return e.abrupt("return",c);case 45:if(e.prev=45,e.t1=e["catch"](4),!(null===(r=null===e.t1||void 0===e.t1?void 0:e.t1.message)||void 0===r?void 0:r.includes("database is closed"))){e.next=52;break}return o=!0,e.next=51,mp(t);case 51:t=e.sent;case 52:null===a||void 0===a||a.warn("Restarting dump because",e.t1);case 53:--i,e.next=3;break;case 56:throw new Error("Could not dump database");case 57:case"end":return e.stop()}}),e,null,[[4,45],[8,25,29,39],[30,,34,38]])}))),Op.apply(this,arguments)}function wp(e){var t,n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(b){while(1)switch(b.prev=b.next){case 0:return n={_id:"_meta",version:0,network:e.chainId,registry:e.registry,address:e.address,blockNumber:e.blockNumber},b.next=3,n;case 3:r=0,a=Object.entries(e);case 4:if(!(r<a.length)){b.next=33;break}if(o=Sl(a[r],2),i=o[0],c=o[1],"channels"!==i&&"oldChannels"!==i){b.next=17;break}s=0,u=Object.values(c);case 8:if(!(s<u.length)){b.next=15;break}return l=u[s],b.next=12,Tl({_id:Hl+qi(l)},l);case 12:s++,b.next=8;break;case 15:b.next=30;break;case 17:if("sent"!==i&&"received"!==i){b.next=28;break}p=0,f=Object.values(c);case 19:if(!(p<f.length)){b.next=26;break}return d=f[p],b.next=23,Tl(Tl(Tl(Tl(Tl({_id:"".concat(i,":").concat(d.transfer.lock.secrethash),direction:i,secrethash:d.transfer.lock.secrethash,expiration:Object(_["bigNumberify"])(d.transfer.lock.expiration).toNumber(),channel:"".concat(d.transfer.token_network_address,"@").concat(d.partner,"#").concat(Object(_["bigNumberify"])(d.transfer.channel_identifier).toString().padStart(9,"0")),cleared:0},(null===(t=d.secret)||void 0===t?void 0:t.registerBlock)?{secretRegistered:{txHash:k["HashZero"],txBlock:d.secret.registerBlock,ts:1}}:{}),d),d.secret?{secret:d.secret.value}:{}),d.lockExpired?{expired:d.lockExpired}:{}),d.channelClosed?{channelSettled:d.channelClosed}:{});case 23:p++,b.next=19;break;case 26:b.next=30;break;case 28:return b.next=30,{_id:$l+i,value:c};case 30:r++,b.next=4;break;case 33:case"end":return b.stop()}}),jl)}function _p(e,t){if(null==e)return{};var n,r,a=kp(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function kp(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function jp(e,t){return xp(e)||Tp(e,t)||Np(e,t)||Ep()}function Ep(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xp(e){if(Array.isArray(e))return e}function Sp(e){return Rp(e)||Dp(e)||Np(e)||Ap()}function Ap(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Np(e,t){if(e){if("string"===typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}function Dp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Rp(e){if(Array.isArray(e))return Cp(e)}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ip(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Pp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ip(o,r,a,i,c,"next",e)}function c(e){Ip(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach((function(t){Mp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bp=function(e){switch(e.name){case"rinkeby":return Up(Up({},al.contracts),sl.contracts);case"ropsten":return Up(Up({},rl.contracts),cl.contracts);case"goerli":return Up(Up({},ol.contracts),ul.contracts);case"homestead":return Up(Up({},il.contracts),ll.contracts);default:throw new mt(yt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Fp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=Pp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==(a=null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===r?void 0:r.origin)&&void 0!==a?a:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(yn(t).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),e.next=4,n.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=e.sent,s=Object(_["sha256"])(c),u=new nl["Wallet"](s,n.provider),e.abrupt("return",{signer:u,address:u.address});case 8:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}var $p=function(){var e=Pp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!tl["Signer"].isSigner(t)){e.next=15;break}if(t.provider!==n){e.next=5;break}a=t,e.next=10;break;case 5:if(!(t instanceof nl["Wallet"])){e.next=9;break}a=t.connect(n),e.next=10;break;case 9:throw new mt(yt.RDN_SIGNER_NOT_CONNECTED,{account:t.toString(),provider:n.toString()});case 10:return e.next=12,a.getAddress();case 12:o=e.sent,e.next=38;break;case 15:if("number"!==typeof t){e.next=22;break}return a=n.getSigner(t),e.next=19,a.getAddress();case 19:o=e.sent,e.next=38;break;case 22:if(!Mt.is(t)){e.next=32;break}return e.next=25,n.listAccounts();case 25:if(c=e.sent,c.includes(t)){e.next=28;break}throw new mt(yt.RDN_ACCOUNT_NOT_FOUND,{account:t,accounts:JSON.stringify(c)});case 28:a=n.getSigner(t),o=t,e.next=38;break;case 32:if(!Lt.is(t)){e.next=37;break}a=new nl["Wallet"](t,n),o=a.address,e.next=38;break;case 37:throw new mt(yt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!r){e.next=50;break}return i={signer:a,address:o},e.t0=Fp,e.next=43,n.getNetwork();case 43:return e.t1=e.sent,e.t2=i.signer,e.next=47,(0,e.t0)(e.t1,e.t2);case 47:s=e.sent,a=s.signer,o=s.address;case 50:return e.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Hp(e,t){return Object(I["a"])(Ql(t,{since:0,include_docs:!0,selector:{direction:{$in:Object.values(ka)}}}).pipe(Object($["a"])("doc"),Object(B["a"])(St),Object(M["a"])((function(e){return xt(Ta,e)}))),e.pipe(Ei("transfers"),Ti(),Object($["a"])(1))).pipe(Object(M["a"])(ws))}var Vp=function(e){return Object.values(e).reduce((function(e,t){var n=Ki(t),r=Up({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Up(Up({},e),{},Mp({},t.token,Up(Up({},e[t.token]),{},Mp({},t.partner.address,r))))}),{})};function qp(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Kp(e,t){return e.signer===t?e:e.connect(t)}function Gp(e,t,n,r){return Zp.apply(this,arguments)}function Zp(){return Zp=Pp(b.a.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:{log:h.a},i=o.log,e.prev=1,e.next=4,(s=t.functions)[n].apply(s,Sp(r));case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),i.error("Error sending ".concat(n," tx"),e.t0),new mt(a,{error:e.t0.message});case 11:return i.debug("sent ".concat(n,' tx "').concat(c.hash,'" to "').concat(t.address,'"')),e.prev=12,e.next=15,c.wait();case 15:u=e.sent,vt(u.status,"tx status: ".concat(u.status)),e.next=23;break;case 19:throw e.prev=19,e.t1=e["catch"](12),i.error("Error mining ".concat(n," tx"),e.t1),new mt(a,{transactionHash:c.hash});case 23:return i.debug("".concat(n,' tx "').concat(c.hash,'" successfuly mined!')),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])}))),Zp.apply(this,arguments)}function Yp(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=Pp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.latest$,o=n.config$,i=n.provider,c=t.blockNumber,s=t.transactionHash,e.abrupt("return",a.pipe(Ei("state","blockNumber"),Object(Gu["a"])(o),Object(B["a"])((function(e){var t=jp(e,2),n=t[0],a=t[1].confirmationBlocks;return c+(null!==r&&void 0!==r?r:a)<=n})),Object(Xt["a"])((function(e){var t=jp(e,2),n=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return i.getTransactionReceipt(s)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==r&&void 0!==r?r:a))return e.blockNumber;if(c+2*(null!==r&&void 0!==r?r:a)<n)throw new mt(yt.RDN_TRANSACTION_REORG,{transactionHash:s})})))})),Object(F["a"])(St)).toPromise());case 4:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}var Qp=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function zp(e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=Pp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=ve.connect(n,t),e.next=3,r.msc_address();case 3:return a=e.sent,o=Ne.connect(a,t),e.next=7,o.token_network_registry();case 7:return i=e.sent,c=G.connect(i,t),e.next=11,c.secret_registry_address();case 11:return s=e.sent,e.next=14,o.service_registry();case 14:return u=e.sent,e.next=17,t.getLogs(Up(Up({},c.filters.TokenNetworkCreated(null,null)),{},{fromBlock:1,toBlock:"latest"}));case 17:return l=e.sent,p=l.map((function(e){return e.blockNumber})).filter(St),f=p.length?Math.min.apply(Math,Sp(p)):0,e.next=22,r.one_to_n_address();case 22:return d=e.sent,e.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:f},ServiceRegistry:{address:u,block_number:f},UserDeposit:{address:n,block_number:f},SecretRegistry:{address:s,block_number:f},MonitoringService:{address:a,block_number:f},OneToN:{address:d,block_number:f}});case 24:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}function ef(e){return tf.apply(this,arguments)}function tf(){return tf=Pp(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.pipe(Object($["a"])("udcBalance"),Object(F["a"])((function(e){return!!e&&e.lt(k["MaxUint256"])}))).toPromise());case 1:case"end":return e.stop()}}),e)}))),tf.apply(this,arguments)}function nf(e,t){var n,r,a,o=t.address,i=t.network,c=t.contractsInfo,s=e[0];vt("_meta"===(null===s||void 0===s?void 0:s._id),yt.RDN_STATE_MIGRATION),vt(s.address===o,yt.RDN_STATE_ADDRESS_MISMATCH),vt(s.registry===c.TokenNetworkRegistry.address,yt.RDN_STATE_NETWORK_MISMATCH),vt(s.network===i.chainId,yt.RDN_STATE_NETWORK_MISMATCH),vt((null===(n=e.find((function(e){return"state.address"===e._id})))||void 0===n?void 0:n.value)===o,yt.RDN_STATE_ADDRESS_MISMATCH),vt((null===(r=e.find((function(e){return"state.chainId"===e._id})))||void 0===r?void 0:r.value)===i.chainId,yt.RDN_STATE_NETWORK_MISMATCH),vt((null===(a=e.find((function(e){return"state.registry"===e._id})))||void 0===a?void 0:a.value)===c.TokenNetworkRegistry.address,yt.RDN_STATE_NETWORK_MISMATCH)}function rf(e){return af.apply(this,arguments)}function af(){return af=Pp(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.address,r=t.network,a=t.contractsInfo,o=t.log,i=h.length>1&&void 0!==h[1]?h[1]:{},c=["raiden",yn(r),a.TokenNetworkRegistry.address,n].join("_"),u=!1,l=i.state,p=i.storage,i.state,f=_p(i,["storage","state"]),l){e.next=11;break}return e.next=9,null===p||void 0===p?void 0:p.getItem(c);case 9:l=e.sent,l&&(u=!0);case 11:return e.next=13,op(Up({log:o},f));case 13:if(d=e.sent,!l){e.next=24;break}return"string"===typeof l&&(l=_r(l)),Array.isArray(l)||(l=Array.from(wp(l))),nf(l,{address:n,network:r,contractsInfo:a}),e.next=20,fp.call(d,l,c);case 20:s=e.sent,u&&(null===i||void 0===i||i.storage.removeItem(c)),e.next=27;break;case 24:return e.next=26,cp.call(d,c);case 26:s=e.sent;case 27:return e.next=29,zl(s);case 29:if(y=e.sent,y){e.next=36;break}return y=Jo({network:r,address:n,contractsInfo:a}),e.next=34,ep(s,y);case 34:e.next=37;break;case 36:y=xt(zo,y);case 37:return e.abrupt("return",{db:s,state:y});case 38:case"end":return e.stop()}}),e)}))),af.apply(this,arguments)}function of(e){return uf(e)||sf(e)||ff(e)||cf()}function cf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function uf(e){if(Array.isArray(e))return df(e)}function lf(e,t){return yf(e)||bf(e,t)||ff(e,t)||pf()}function pf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ff(e,t){if(e){if("string"===typeof e)return df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?df(e,t):void 0}}function df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function yf(e){if(Array.isArray(e))return e}function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hf(Object(n),!0).forEach((function(t){vf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Of(e,t,n){gf(e),gf(t);var r=n.provider;return Ai((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object(W["a"])((function(e){return Object(I["a"])(Object(C["a"])(e),ln(r,"block"))})),Object(M["a"])((function(e){return Fa({blockNumber:e})})))}function wf(e,t,n){gf(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Ku["a"])(1),Object(B["a"])((function(e){return el()(e.tokens)})),Object(W["a"])((function(){return Ai((function(){return a.getLogs(mf(mf({},o.filters.TokenNetworkCreated(null,null)),{},{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object(W["a"])(Zt["a"]),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object(W["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Vu["a"])(Ai((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Zt["a"])),Ai((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Zt["a"]))).pipe(Object(Ku["a"])(1),Object(ci["a"])(Wa({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))}function _f(e,t,n){gf(e),gf(t);var r=n.address,a=n.network,o=n.provider;return Ai((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object(W["a"])((function(e){return Object(qu["a"])(o.pollingInterval).pipe(Object(Xt["a"])((function(){return Object(I["a"])(e?Ai((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.includes(r)?L["a"]:Object(C["a"])(Wo({reason:Ie.ACCOUNT_CHANGED}))}))):L["a"],Ai((function(){return fn(o)}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.chainId!==a.chainId?Object(C["a"])(Wo({reason:Ie.NETWORK_CHANGED})):L["a"]}))))})))})))}function kf(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function jf(e,t){var n=lf(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=kf(s),l=u.openTopic,p=u.depositTopic,f=u.withdrawTopic,d=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Gu["a"])(i),Object(M["a"])((function(e){var t,n,i=lf(e,2),c=i[0],s=i[1],u=s.state,y=s.config,h=c[0].toNumber(),m=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===h})),v=Vt(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,_=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var k=lf(c,4),j=k[1],E=k[2],T=k[3];if((o===j||o===E)&&(!m||h>m.id)){var x=o==j?E:j;n=$a.success({id:h,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:x})}break;case p:var S=lf(c,3),A=S[1],N=S[2];(null===m||void 0===m?void 0:m.id)===h&&N.gt(m[A===m.partner.address?"partner":"own"].deposit)&&(n=Va.success({id:h,participant:A,totalDeposit:N,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address}));break;case f:var D=lf(c,3),R=D[1],C=D[2];(null===m||void 0===m?void 0:m.id)===h&&C.gt(m[R===m.partner.address?"partner":"own"].withdraw)&&(n=qa({id:h,participant:R,totalWithdraw:C,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address}));break;case d:if((null===m||void 0===m?void 0:m.id)===h&&!("closeBlock"in m)){var I=lf(c,2),P=I[1];n=Ka.success({id:h,participant:P,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address})}break;case b:(null===m||void 0===m?void 0:m.id)===h&&(n=Za.success({id:h,txHash:O,txBlock:w,confirmed:_,locks:m.partner.locks},{tokenNetwork:a,partner:m.partner.address}));break}return n})),Object(B["a"])(St))}}function Ef(e,t,n){var r=lf(e,2),a=r[0],o=r[1],i=lf(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,p=n.latest$,f=n.getTokenNetworkContract,d=f(s),b=kf(d),y=b.openTopic;return Ai((function(){return Promise.all([l.getLogs(mf(mf({},d.filters.ChannelOpened(null,u,null,null)),{},{fromBlock:a,toBlock:o})),l.getLogs(mf(mf({},d.filters.ChannelOpened(null,null,u,null)),{},{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Gu["a"])(p),Object(W["a"])((function(e){var t=lf(e,2),n=lf(t[0],2),r=n[0],i=n[1],c=t[1].state,p=r.concat(i).map(pn(d)).filter(St).filter((function(e){var t=lf(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Vi({tokenNetwork:s,partner:o});return!(qi({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),f=[].concat(of(p),of(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=lf(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===f.length?L["a"]:Ai((function(){return l.getLogs({address:s,topics:[Object.values(kf(d)).filter((function(e){return e!==y})),f],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object(W["a"])((function(e){var t=e.map(pn(d)).filter(St),n=[].concat(of(p),of(t));return Object(Zt["a"])(zu()(n,[function(e){return Vt(e).blockNumber},function(e){return Vt(e).transactionIndex}]))})))})),jf([c,s],n))}function Tf(e,t,n){var r=lf(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(kf(u))]};return s.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.confirmationBlocks;return ln(i,l,void 0,n,e)})),Object(M["a"])(pn(u)),Object(B["a"])(St),jf([a,o],n))}function xf(e,t,n){return e.pipe(Object(B["a"])(Fa.is),Object($["a"])("payload","blockNumber"),Object(Zu["a"])(1,void 0,(function(e){return t.pipe(Object($["a"])("tokens"),Ti(),Object(Gu["a"])(t),Object(W["a"])((function(t){var r=lf(t,2),a=lf(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new R["a"];return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(I["a"])(Object(C["a"])(Wa({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),Ef([s,e],[o,i],n).pipe(Object(Mu["a"])((function(){return u.next(!0),u.complete()}))),Tf(e+1,[o,i],n).pipe(Object(Yu["a"])((function(){return u}))))})))})))})))}function Sf(e,t){return gf(e),t.pipe(Qi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return Ha({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))}function Af(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Ur($a.request)),Object(Gu["a"])(t,u),Object(W["a"])((function(t){var n,u,l,p=lf(t,3),f=p[0],d=p[1],b=p[2],y=b.settleTimeout,h=b.subkey,m=f.meta,v=m.tokenNetwork,g=m.partner,O=null===(n=d.channels[Vi(f.meta)])||void 0===n?void 0:n.state;if(O)return Object(C["a"])($a.failure(new mt(yt.CNL_INVALID_STATE,{state:O}),f.meta));var w=qp({signer:a,address:o,main:i},null!==(u=f.payload.subkey)&&void 0!==u?u:h),_=w.signer,k=Kp(s(v),_),j=L["a"];return(null===(l=f.payload.deposit)||void 0===l?void 0:l.gt(0))&&(j=Object(C["a"])(Va.request({deposit:f.payload.deposit,subkey:f.payload.subkey,waitOpen:!0},f.meta))),Object(Vu["a"])(j,Object(P["a"])((function(){var e;return k.functions.openChannel(o,g,null!==(e=f.payload.settleTimeout)&&void 0!==e?e:y)})).pipe(Gi("openChannel",yt.CNL_OPENCHANNEL_FAILED,{log:r}),Xi(c.pollingInterval,void 0,Zi.concat(Yi),{log:r}),Object(ii["a"])(e.pipe(Object(B["a"])($a.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===v&&e.meta.partner===g})))),Object(Uu["a"])(),Object(Qt["a"])((function(e){return Object(C["a"])($a.failure(e,f.meta))}))))})))}function Nf(e,t,n,r,a){var o=lf(e,2),i=o[0],c=o[1],s=lf(t,3),u=s[0],l=s[1],p=s[2],f=a.log,d=a.config$;return Object(P["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(Gu["a"])(d),Object(W["a"])((function(e){var t=lf(e,2),r=lf(t[0],2),a=r[0],o=r[1],s=t[1].minimumAllowance;return zi([a,o,n],i,c.address,yt.CNL_APPROVE_TRANSACTION_FAILED,{log:f,minimumAllowance:s})})),Object(yi["a"])(r),Object(Ku["a"])(1),Object(W["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,p).then((function(t){var n=t[0];return[e,n]}))})),Object(W["a"])((function(e){var t=lf(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),p)})),Gi("setTotalDeposit",yt.CNL_SETTOTALDEPOSIT_FAILED,{log:f}),Xi(c.provider.pollingInterval,void 0,Zi.concat(Yi),{log:f}),Object(Uu["a"])())}function Df(e,t,n){gf(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(B["a"])(Ur(Va.request)),Object(oi["a"])((function(e){return e.meta.tokenNetwork})),Object(W["a"])((function(t){return t.pipe(Object(Xu["a"])((function(t){return Object(yu["a"])([l,u]).pipe(Object(F["a"])(),Object(W["a"])((function(n){var p,f=lf(n,2),d=f[0].state,b=f[1].subkey;vt(t.payload.deposit.gt(0),yt.DTA_INVALID_DEPOSIT);var y,h=t.meta,m=h.tokenNetwork,v=h.partner,g=Ve()(d.tokens,(function(e){return e===m})),O=d.channels[Vi(t.meta)];if(g&&!O&&t.payload.waitOpen)y=Object(I["a"])(e.pipe(Object(B["a"])($a.failure.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(yi["a"])(Object(ni["a"])(new mt(yt.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object($["a"])("state","channels",Vi(t.meta)),Object(B["a"])(St)));else{if((null===O||void 0===O?void 0:O.state)!==ra.open)throw new mt(yt.CNL_NO_OPEN_CHANNEL_FOUND);y=Object(C["a"])(O)}var w=qp({signer:a,address:o,main:i},null!==(p=t.payload.subkey)&&void 0!==p?p:b),_=w.signer,k=w.address,j=Kp(c(g),_),E=Kp(s(m),_);return y.pipe(Object($["a"])("id"),Object(Zu["a"])(1,void 0,(function(e){return Nf([j,E],[k,o,v],t.payload.deposit,e,{log:r,config$:u})})))})),Object(Qt["a"])((function(e){return Object(C["a"])(Va.failure(e,t.meta))})))})))})))}function Rf(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(Ur(Ka.request)),Object(Gu["a"])(t,l),Object(W["a"])((function(e){var t,n,l=lf(e,3),p=l[0],f=l[1],d=l[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=qp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Kp(u(y),v),O=f.channels[Vi(p.meta)];if((null===O||void 0===O?void 0:O.state)!==ra.open&&(null===O||void 0===O?void 0:O.state)!==ra.closing){var w=new mt(yt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,p.meta);return Object(C["a"])(Ka.failure(w,p.meta))}var k=O.partner.balanceProof,j=ia(k),E=k.nonce,T=k.additionalHash,x=k.signature,S=Object(_["concat"])([Or(y,20),Or(s.chainId,32),Or(na.BALANCE_PROOF,32),Or(O.id,32),Or(j,32),Or(E,32),Or(T,32),Or(x,65)]);return Object(Zt["a"])(a.signMessage(S)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return g.functions.closeChannel(O.id,h,o,j,E,T,x,e)})).pipe(Gi("closeChannel",yt.CNL_CLOSECHANNEL_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Uu["a"])(),Object(Qt["a"])((function(e){return Object(C["a"])(Ka.failure(e,p.meta))})))})))}function Cf(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(Ur(Ka.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(Yu["a"])((function(){return e.pipe(Object(B["a"])(Fa.is))})),Object(Gu["a"])(t,l),Object(B["a"])((function(e){var t=lf(e,2),n=t[0],r=t[1],a=r.channels[Vi(n.meta)];return(null===a||void 0===a?void 0:a.state)===ra.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object(W["a"])((function(e){var t=lf(e,3),n=t[0],l=t[1],p=t[2].subkey,f=n.meta,d=f.tokenNetwork,b=f.partner,y=qp({signer:a,address:o,main:i},p),h=y.signer,m=Kp(u(d),h),v=l.channels[Vi(n.meta)],g=ia(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,k=v.partner.balanceProof.signature,j=Object(_["concat"])([Or(d,20),Or(s.chainId,32),Or(na.BALANCE_PROOF_UPDATE,32),Or(v.id,32),Or(g,32),Or(O,32),Or(w,32),Or(k,65)]);return Object(Zt["a"])(a.signMessage(j)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return m.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,k,e)})).pipe(Gi("updateNonClosingBalanceProof",yt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Uu["a"])(),Object(Qt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),L["a"]})))})))}function If(e,t,n){gf(e);var r=n.config$;return t.pipe(Qi,Object(W["a"])((function(e){return e.pipe(Object(B["a"])((function(e){return e.state===ra.settleable})),Object(Ku["a"])(1),Object(Gu["a"])(r),Object(Yu["a"])((function(e){var n=lf(e,2),r=n[0],a=n[1].confirmationBlocks,o=r.closeBlock+r.settleTimeout+Math.round(a*(1+Math.random()));return t.pipe(Object($["a"])("blockNumber"),Object(B["a"])((function(e){return o<=e})),Object(Ku["a"])(1))})),Object(Gu["a"])(t),Object(B["a"])((function(e){var t,n=lf(e,2),r=lf(n[0],1),a=r[0],o=n[1];return(null===(t=o.channels[Vi(a)])||void 0===t?void 0:t.state)===ra.settleable})),Object(M["a"])((function(e){var t=lf(e,1),n=lf(t[0],1),r=n[0];return Za.request(void 0,{tokenNetwork:r.tokenNetwork,partner:r.partner.address})})))})),Ni(r.pipe(Object($["a"])("autoSettle"))))}function Pf(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$,l=n.db;return e.pipe(Object(B["a"])(Ur(Za.request)),Object(Gu["a"])(t,u),Object(W["a"])((function(e){var t,n,u=lf(e,3),p=u[0],f=u[1],d=u[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=qp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Kp(s(y),v),O=f.channels[Vi(p.meta)];if((null===O||void 0===O?void 0:O.state)!==ra.settleable&&(null===O||void 0===O?void 0:O.state)!==ra.settling){var w=new mt(yt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,p.meta);return Object(C["a"])(Za.failure(w,p.meta))}return Object(Zt["a"])(Promise.all([g.functions.getChannelParticipantInfo(O.id,o,h),g.functions.getChannelParticipantInfo(O.id,h,o)])).pipe(Object(W["a"])((function(e){var t,n,a=lf(e,2),i=a[0][3],s=a[1][3];return t=i===ia(O.own.balanceProof)?Object(C["a"])(O.own.balanceProof):_s(l,O,ka.SENT,i).pipe(Object(Qt["a"])((function(){return Object(ni["a"])(new mt(yt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:i}))}))),n=s===ia(O.partner.balanceProof)?Object(C["a"])(O.partner.balanceProof):_s(l,O,ka.RECEIVED,s).pipe(Object(Qt["a"])((function(){return Object(ni["a"])(new mt(yt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,partnerBalanceHash:s}))}))),Object(yu["a"])([t,n]).pipe(Object(M["a"])((function(e){var t=lf(e,2),n=t[0],r=t[1];return r.transferredAmount.add(r.lockedAmount).lt(n.transferredAmount.add(n.lockedAmount))?[[h,r],[o,n]]:[[o,n],[h,r]]})),Object(W["a"])((function(e){var t=lf(e,2),n=t[0],a=t[1];return Object(P["a"])((function(){return g.functions.settleChannel(O.id,n[0],n[1].transferredAmount,n[1].lockedAmount,n[1].locksroot,a[0],a[1].transferredAmount,a[1].lockedAmount,a[1].locksroot)})).pipe(Gi("settleChannel",yt.CNL_SETTLECHANNEL_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}))})))})),Object(Uu["a"])(),Object(Qt["a"])((function(e){return Object(C["a"])(Za.failure(e,p.meta))})))})))}function Lf(e,t){return e.pipe(Object(B["a"])(Ur(Fa)),Object(Gu["a"])(t),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=lf(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===ra.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Ga({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))}function Uf(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Ur(Za.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Gu["a"])(t,u),Object(B["a"])((function(e){var t,n=lf(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Vi(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object(W["a"])((function(e){var t=lf(e,3),n=t[0],u=t[2].subkey,l=n.meta,p=l.tokenNetwork,f=l.partner,d=Kp(s(p),qp({signer:a,address:o,main:i},u).signer),b=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(of(e),[Or(t.expiration,32),Or(t.amount,32),t.secrethash])}),[]));return Object(P["a"])((function(){return d.functions.unlock(n.payload.id,o,f,b)})).pipe(Gi("unlock",yt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}),Object(Uu["a"])(),Object(Qt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),L["a"]})))})))}function Mf(e,t,n,r){return Ai((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?mf(mf({},e),{},{payload:mf(mf({},e.payload),{},{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?mf(mf({},e),{},{payload:mf(mf({},e.payload),{},{confirmed:!1})}):void 0})),Object(B["a"])(St))}function Bf(e,t,n){gf(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(yu["a"])([t.pipe(Ei("blockNumber")),t.pipe(Object($["a"])("pendingTxs")),r.pipe(Ei("confirmationBlocks"))]).pipe(Object(B["a"])((function(e){var t=lf(e,2),n=t[1];return n.length>0})),Object(Xt["a"])((function(e){var t=lf(e,3),n=t[0],r=t[1],i=t[2];return Object(Zt["a"])(r).pipe(Object(B["a"])((function(e){return e.payload.txBlock+i<n})),Object(Xu["a"])((function(e){return Mf(e,a,n,i).pipe(Object(ii["a"])(o.pipe(Object(B["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))}var Ff=n("9849"),Wf=n("3bb9"),$f=n("84d1"),Hf=n("2705"),Vf=n("0218");function qf(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Kf(e,t){var n=Object(Vf["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Gf=b.a.mark(Zf);function Zf(){var e,t,n,r,a=arguments;return b.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e3,t=a.length>1&&void 0!==a[1]?a[1]:6e4,n=a.length>2&&void 0!==a[2]?a[2]:1.4,r=e;case 4:return o.next=7,r;case 7:r=Math.min(t,Math.ceil(r*n)),o.next=4;break;case 10:case"end":return o.stop()}}),Gf)}function Yf(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object(Ku["a"])(1),Object(Uu["a"])()),Object(C["a"])(t))}function Xf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Yf(t,e,Wr(Gr,e.meta)).pipe(xi(n,r))}function Qf(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}var zf=n("a51e"),Jf=n.n(zf);function ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function td(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function nd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){td(o,r,a,i,c,"next",e)}function c(e){td(o,r,a,i,c,"throw",e)}i(void 0)}))}}function rd(e,t){return sd(e)||cd(e,t)||od(e,t)||ad()}function ad(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function od(e,t){if(e){if("string"===typeof e)return id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(e,t):void 0}}function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sd(e){if(Array.isArray(e))return e}function ud(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(St)}var ld=Jf()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function pd(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(ld(t))),n?Object(C["a"])(n):Object(fl["a"])(e,"Room").pipe(Object(B["a"])(ld(t)),Object(Ku["a"])(1))}function fd(e,t,n){var r=n.latest$;return Object(yu["a"])([r.pipe(Ei("presences",t),Object(B["a"])((function(e){return!!(null===e||void 0===e?void 0:e.payload.available)}))),r.pipe(Object(M["a"])((function(e){var n,r,a=e.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0]})),Object(B["a"])(St),Object(li["a"])()),Object(fl["a"])(e,"Room").pipe(Object(mu["a"])(null)),Object(fl["a"])(e,"RoomMember.membership").pipe(Object(mu["a"])(null))]).pipe(Object(B["a"])((function(t){var n,r,a=rd(t,2),o=a[0],i=a[1];return"join"===(null===(r=null===(n=e.getRoom(i))||void 0===n?void 0:n.getMember(o.payload.userId))||void 0===r?void 0:r.membership)})),Object($["a"])(1),Object(Ku["a"])(1))}function dd(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n,r=t.presences;return!!(null===(n=r[e])||void 0===n?void 0:n.payload.available)})),Object(Ku["a"])(1),Object(Gu["a"])(c),Object(W["a"])((function(n){var r,a=rd(n,2),o=a[0],c=o.presences,u=o.rtc,l=a[1].caps;return s&&"open"===(null===(r=u[e])||void 0===r?void 0:r.readyState)?Object(C["a"])(u[e]):Lu(l,Pe.TO_DEVICE)&&Lu(c[e].payload.caps,Pe.TO_DEVICE)?Object(C["a"])(c[e].payload.userId):fd(t,e,{latest$:i})})),Object(W["a"])(function(){var e=nd(b.a.mark((function e(a){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"===typeof a){e.next=4;break}a.send(r.body),e.next=11;break;case 4:if(!a.startsWith("@")){e.next=9;break}return e.next=7,t.sendToDevice(n,ed({},a,{"*":r}));case 7:e.next=11;break;case 9:return e.next=11,t.sendEvent(a,n,r,"");case 11:return e.abrupt("return","string"!==typeof a?a.label:a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(ai["a"])((function(e){return e.pipe(Object(Gu["a"])(c),Object(W["a"])((function(e,t){var n=rd(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(ti["a"])(a)):Object(ni["a"])(r)})))})))}function bd(e,t,n){var r=n.log;if("string"===typeof e)try{var a=da(e);if("signature"in a){var o=la(a);if(o!==t)throw new mt(yt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function yd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function hd(e,t){return wd(e)||Od(e,t)||vd(e,t)||md()}function md(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vd(e,t){if(e){if("string"===typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gd(e,t):void 0}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Od(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wd(e){if(Array.isArray(e))return e}function _d(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function kd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_d(o,r,a,i,c,"next",e)}function c(e){_d(o,r,a,i,c,"throw",e)}i(void 0)}))}}var jd="RAIDEN";function Ed(e,t){var n=qf(t.getHomeserverUrl());return Object(Zt["a"])(ud(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object(W["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new v["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object($["a"])("roomId"),Object(Ff["a"])())}function Td(e,t){return xd.apply(this,arguments)}function xd(){return xd=kd(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={not_rooms:n,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[t.getUserId()]}},a={room:r},e.abrupt("return",t.createFilter(a));case 3:case"end":return e.stop()}}),e)}))),xd.apply(this,arguments)}function Sd(e,t,n,r){return e.pipe(Object(B["a"])(Qa.is),Object(Ku["a"])(1),Object(ri["a"])((function(){n.next(t),n.complete()})),Object(Gu["a"])(r),Object(Yu["a"])((function(e){var t=hd(e,2),n=t[1].pollingInterval;return Object(ti["a"])(Math.ceil(n/5))})),Object(W["a"])((function(e){var n=hd(e,2),r=n[1];return Ed(r,t).pipe(Object(W["a"])((function(e){return Td(t,e)})),Object(W["a"])((function(e){return t.startClient({filter:e})})),Si(Zf(r.pollingInterval,r.httpTimeout),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})))})),Object(Uu["a"])())}function Ad(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(Hf["a"])(e+"/_matrix/client/versions").pipe(Object(Wf["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Qt["a"])((function(){return Object(C["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}var Nd=Be["v"]({active_servers:Be["d"](Be["s"]),all_servers:Be["d"](Be["s"])});function Dd(e,t){return Object(Hf["a"])(e).pipe(Object(W["a"])(function(){var t=kd(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return vt(n.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(n.status)),t.abrupt("return",n.json());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(Wf["a"])(t),Object(W["a"])((function(e){return xt(Nd,e).active_servers})),Object(W["a"])((function(e){return Ad(e,t)})),Object(Ff["a"])(),Object(W["a"])((function(e){return zu()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object($f["a"])((function(){return new mt(yt.TRNS_NO_MATRIX_SERVERS)})))}function Rd(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=qf(e);if(!c)throw new mt(yt.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(F["a"])(),Object(W["a"])((function(n){var r=n.pollingInterval;if(t){var i=Object(v["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(C["a"])({matrix:i,server:e,setup:t,pollingInterval:r})}var s=Object(v["createClient"])({baseUrl:e}),u=a.toLowerCase(),l="@".concat(u,":").concat(c);return Object(Zt["a"])(o.signMessage(c)).pipe(Object(W["a"])((function(e){return Ai((function(){return s.login("m.login.password",{user:u,password:e,device_id:jd})}),r,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object(Qt["a"])((function(t){return s.register(u,e).catch((function(){throw t}))})))})),Object(W["a"])((function(t){var n=t.access_token,a=t.device_id;return s.deviceId=a,s._http.opts.accessToken=n,s.credentials={userId:l},Object(Zt["a"])(o.signMessage(l)).pipe(Object(M["a"])((function(t){return{matrix:s,server:e,setup:{userId:l,accessToken:n,deviceId:a,displayName:t},pollingInterval:r}})))})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup,o=e.pollingInterval;return Object(yu["a"])([Ai((function(){return t.setDisplayName(a.displayName)}),o,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Ai((function(){return t.setAvatarUrl(r&&!el()(r)?Iu(r):"")}),o,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))]).pipe(Object(ci["a"])({matrix:t,server:n,setup:a}))})))}function Cd(e,t,n){yd(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(yu["a"])([i,c]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var t,n=hd(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,p=i.caps,f=o.transport.server,d=o.transport.setup,b=[];s?(s===f&&b.push(Object(C["a"])({server:f,setup:d})),b.push(Object(C["a"])({server:s}))):(f&&b.push(Object(C["a"])({server:f,setup:d})),b.push(Dd(u,l)));var y=function(e){return t=e,L["a"]};return Object(P["a"])((function(){return b.shift()||L["a"]})).pipe(Object(Qt["a"])(y),Object(Xu["a"])((function(e){var t=e.server,n=e.setup;return Rd(t,n,{address:r,signer:a,config$:c},p).pipe(Object(Qt["a"])(y))})),Object(F["a"])(),Object(ri["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(ai["a"])((function(e){return e.pipe(Object(W["a"])((function(){return b.length?Object(C["a"])(null):Object(ni["a"])(t)})))})))})),Object(W["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(Sd(e,n,o,c),Object(C["a"])(Qa({server:r,setup:a})),c.pipe(Ei("logger"),Object(ri["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Uu["a"])()))})))}function Id(e,t,n){yd(t);var r=n.matrix$;return r.pipe(Object(W["a"])((function(t){return e.pipe(Object(Mu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Uu["a"])())}var Pd=n("e98d"),Ld=n.n(Pd),Ud=n("a434"),Md=n.n(Ud);function Bd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Fd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bd(o,r,a,i,c,"next",e)}function c(e){Bd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Wd(e,t){return Vd(e)||Hd(e,t)||Xd(e,t)||$d()}function $d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vd(e){if(Array.isArray(e))return e}function qd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){Zd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Xd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Xd(e,t){if(e){if("string"===typeof e)return Qd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qd(e,t):void 0}}function Qd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zd=["online","unavailable"],Jd=/^@(0x[0-9a-f]{40})[.:]/i;function eb(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object(W["a"])(b.a.mark((function e(n){var r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Yd(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Jd.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object(W["a"])((function(t){return Kf(e,t.user_id).then((function(e){return Gd(Gd({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(St),Object(Ff["a"])(),Object(M["a"])((function(e){if(!e.length)throw new mt(yt.TRNS_NO_VALID_USER,{address:t});return Ld()(e,"last_active_ago")})))}function tb(e,t,n){qd(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(Ur(za.request)),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(oi["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Gu["a"])(a.pipe(Ei("presences"))),Object(Xt["a"])((function(e){var t=Wd(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(C["a"])(i[r.meta.address]):eb(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return za.success({userId:n,available:zd.includes(t),ts:Date.now(),caps:Pu(a)},r.meta)})),Object(Qt["a"])((function(e){return Object(C["a"])(za.failure(e,r.meta))})))})))})))}var nb=["userId","available","caps"];function rb(e,t,n){qd(t);var r=n.log,a=n.matrix$,o=n.latest$,i=n.config$;return a.pipe(Object(bi["a"])((function(e){return Object(fl["a"])(e,"event").pipe(Object(B["a"])((function(e){return"m.presence"===e.getType()})),Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix;try{var a=r.getUser(n.getSender());vt(null===a||void 0===a?void 0:a.presence);var o=null===(t=Jd.exec(a.userId))||void 0===t?void 0:t[1];vt(o);var i=Object(_["getAddress"])(o);return vt(i),{matrix:r,user:a,address:i,event:n}}catch(c){}})),Object(B["a"])(St),Object(Gu["a"])(e.pipe(Object(B["a"])(za.request.is),Object(pi["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(mu["a"])(new Set)),i),Object(B["a"])((function(e){var t=Wd(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object(W["a"])((function(e){var t=Wd(e,3),n=t[0],a=n.matrix,o=n.user,i=n.address,c=t[2],s=c.pollingInterval,u=c.httpTimeout,l=o.userId,p=o.presence,f=zd.includes(p);return Object(P["a"])((function(){return a.getProfileInfo(l)})).pipe(Object(M["a"])((function(e){var t;vt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(l,e.displayname);return vt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),za.success({userId:l,available:f,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Pu(e.avatar_url)},{address:n})})),Si(Zf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(Qt["a"])((function(e){return r.warn("Error validating presence event, ignoring",l,e),L["a"]})))}))).pipe(Object(Gu["a"])(o),Object(B["a"])((function(e){var t,n=Wd(e,2),r=n[0],a=n[1].presences;return(r.payload.available||!(r.meta.address in a)||!a[r.meta.address].payload.available||r.payload.userId===a[r.meta.address].payload.userId)&&!wu()(Md()(r.payload,nb),Md()(null===(t=a[r.meta.address])||void 0===t?void 0:t.payload,nb))})),Object($["a"])(0))}function ab(e){return e.pipe(Object(B["a"])(Ha.is),Object(M["a"])((function(e){return za.request(void 0,{address:e.meta.partner})})))}function ob(e,t,n){qd(e),qd(t);var r=n.matrix$,a=n.config$;return a.pipe(Object($["a"])("caps"),Object(li["a"])(wu.a),Object(U["a"])(1),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object(W["a"])(function(){var e=Fd(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Wd(t,2),r=n[0],a=n[1],e.abrupt("return",a.setAvatarUrl(r&&!el()(r)?Iu(r):"").catch((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Uu["a"])())}var ib=n("67fa"),cb=n("4914");function sb(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ub(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sb(o,r,a,i,c,"next",e)}function c(e){sb(o,r,a,i,c,"throw",e)}i(void 0)}))}}function lb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=db(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function pb(e,t){return hb(e)||yb(e,t)||db(e,t)||fb()}function fb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function db(e,t){if(e){if("string"===typeof e)return bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bb(e,t):void 0}}function bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hb(e){if(Array.isArray(e))return e}function mb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function vb(e,t,n,r,a){var o,i=r.pollingInterval,c=r.httpTimeout,s=a.log;return Object(ti["a"])(i).pipe(Object(W["a"])((function(){return Object(P["a"])((function(){return e.invite(t,n)})).pipe(Object(Qt["a"])((function(e){return s.warn("Error inviting",e),L["a"]})),Object(fi["a"])((function(e){return e.pipe(Object(ib["a"])(c))})))})),Ni(Object(fl["a"])(e,"RoomMember.membership").pipe(Object($["a"])(1),Object(B["a"])((function(e){return e.roomId===t&&e.userId===n})),Object(mu["a"])(null===(o=e.getRoom(t))||void 0===o?void 0:o.getMember(n)),Object(M["a"])((function(e){return"join"!==(null===e||void 0===e?void 0:e.membership)})),Object(li["a"])())))}function gb(e,t,n){mb(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$,c=n.config$;return e.pipe(Object(B["a"])(Ur([uo,Ha,Gr.request,eo])),Object(M["a"])((function(e){var t;switch(e.type){case uo.type:e.meta.direction===ka.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===ka.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Ha.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(St),Object(oi["a"])((function(e){return e})),Object(W["a"])((function(e){return e.pipe(Object(W["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Gu["a"])(c),Object(Xt["a"])((function(e){var t=pb(e,2),n=t[0],r=n.address,o=n.matrix,c=t[1],s=c.pollingInterval,u=c.httpTimeout;return i.pipe(Object(B["a"])((function(e){var t=e.presences;return r in t})),Object(Ku["a"])(1),Object(B["a"])((function(e){var t=e.presences,n=e.config;return!Lu(n.caps,Pe.TO_DEVICE)||!Lu(t[r].payload.caps,Pe.TO_DEVICE)})),Object(B["a"])((function(e){var t,n,a=e.state;return!(null===(n=null===(t=a.transport.rooms)||void 0===t?void 0:t[r])||void 0===n?void 0:n[0])})),Object(W["a"])((function(e){var t=e.presences;return o.createRoom({visibility:"private",invite:[t[r].payload.userId]})})),Object(M["a"])((function(e){var t=e.room_id;return Ja({roomId:t},{address:r})})),Si(Zf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(Qt["a"])((function(e){return a.error("Error creating room, ignoring",e),L["a"]})))})))})))}function Ob(e,t,n){mb(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(Ur(za.success)),Object(oi["a"])((function(e){return e.meta.address})),Object(W["a"])((function(e){return Object(yu["a"])([e,o.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e.key])||void 0===r?void 0:r[0]})),Object(li["a"])())]).pipe(Object(Gu["a"])(r,a),Object(bi["a"])((function(e){var t=pb(e,3),n=pb(t[0],2),r=n[0],a=n[1],o=t[1],c=t[2];return r.payload.available&&a?vb(o,a,r.payload.userId,c,{log:i}):L["a"]})))})),Object(Uu["a"])())}function wb(e,t,n){mb(e),mb(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(bi["a"])((function(e){return Object(fl["a"])(e,"RoomMember.membership").pipe(Object(M["a"])((function(t){var n=pb(t,2),r=n[0],a=n[1];return{event:r,member:a,matrix:e}})))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Gu["a"])(o),Object(W["a"])((function(e){var t=pb(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Ei("presences"),Object(M["a"])((function(e){return Object.values(e).find((function(e){return e.payload.userId===s}))})),Object(B["a"])(St),Object(Ku["a"])(1),Object(ii["a"])(Object(ti["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(Gu["a"])(o),Object(W["a"])((function(e){var t=pb(e,2),n=t[0],a=n.matrix,o=n.member,i=n.senderPresence,c=t[1],s=c.pollingInterval,u=c.httpTimeout;return Object(P["a"])((function(){return a.joinRoom(o.roomId,{syncRoom:!0})})).pipe(Object(ci["a"])(Ja({roomId:o.roomId},{address:i.meta.address})),Si(Zf(s,u),(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),Object(Qt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),L["a"]})))})))}function _b(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Ur(Ja)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Gu["a"])(t,o),Object(W["a"])((function(e){var t,n,a=pb(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Zt["a"])(l.filter((function(e,t){return mb(e),t>=u}))).pipe(Object(W["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return eo({roomId:e},i.meta)})))})))}function kb(e,t,n){mb(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(bi["a"])((function(e){return Object(fl["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,room:t}})))})),Object(Yu["a"])((function(){return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.httpTimeout;return Object(ti["a"])(t)})))})),Object(Gu["a"])(t,o),Object(B["a"])((function(e){var t,n=pb(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=qf(a.getHomeserverUrl());if(ud(c).some((function(e){return ld("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var p,f=l[u],d=lb(f);try{for(d.s();!(p=d.n()).done;){var b=p.value;if(b===o.roomId)return!1}}catch(y){d.e(y)}finally{d.f()}}return!0})),Object(W["a"])(function(){var e=ub(b.a.mark((function e(t){var n,a,o,i;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=pb(t,1),a=n[0],o=a.matrix,i=a.room,r.warn("Unknown room in matrix, leaving",i.roomId),e.abrupt("return",o.leave(i.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Uu["a"])())}function jb(e,t,n){mb(e);var r=n.log,a=n.matrix$;return a.pipe(Object(bi["a"])((function(e){return Object(fl["a"])(e,"Room.myMembership").pipe(Object(M["a"])((function(t){var n=pb(t,2),r=n[0],a=n[1];return{room:r,membership:a,matrix:e}})))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Gu["a"])(t),Object(W["a"])(b.a.mark((function e(t){var n,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=pb(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=pb(s[c],2),l=u[0],p=u[1],f=lb(p),e.prev=5,f.s();case 7:if((d=f.n()).done){e.next=15;break}if(y=d.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,eo({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))}function Eb(e,t,n){mb(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Ei("transport","rooms"),Object(B["a"])(St),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=pb(r[n],2),o=a[0],i=a[1],c=lb(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(cb["a"])((function(e){var t=e.roomId;return t})),Object(W["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Gu["a"])(o),Object(W["a"])((function(e){var t=pb(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return pd(i,a).pipe(Object(Wf["a"])(c),Object(Uu["a"])(),Object(Qt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(C["a"])(eo({roomId:a},{address:o}))})))})))}function Tb(e,t){return e.pipe(Object(B["a"])(Yr.is),Object(Gu["a"])(t),Object(B["a"])((function(e){var t,n,r=pb(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=pb(e,1),n=t[0];return Ja({roomId:n.payload.roomId},n.meta)})))}function xb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ab(e,t,n){return t&&Sb(e.prototype,t),n&&Sb(e,n),e}var Nb=function(){function e(t){xb(this,e),this.values=new Map,this.max=t}return Ab(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function Db(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Db(Object(n),!0).forEach((function(t){Cb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ib(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ub(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Pb(e,t){return Fb(e)||Bb(e,t)||Ub(e,t)||Lb()}function Lb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ub(e,t){if(e){if("string"===typeof e)return Mb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mb(e,t):void 0}}function Mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fb(e){if(Array.isArray(e))return e}function Wb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function $b(e,t,n){Wb(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(Ur(Gr.request)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(oi["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Xu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:fa(t.payload.message),c={body:a,msgtype:"m.text"};return dd(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(M["a"])((function(e){return Gr.success({via:e},t.meta)})),Object(Qt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(C["a"])(Gr.failure(e,t.meta))})))})))})))}function Hb(e,t,n){Wb(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Ur(Zr)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Gu["a"])(o),Object(W["a"])((function(e){var t=Pb(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=ud(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),L["a"];var s=qf(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return pd(o,u).pipe(Object(W["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:fa(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Qt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),L["a"]})))})),Object(Uu["a"])())}function Vb(e){var t=Pb(e,2),n=t[0],r=n.matrix,a=n.event,o=n.room,i=t[1],c="m.room.message"===a.getType()&&"m.text"===a.getContent().msgtype&&a.getSender()!==r.getUserId(),s=!!o&&!ud(i).some((function(e){return ld("#".concat(e,":").concat(qf(r.getHomeserverUrl())),o)})),u=!o&&!!Lu(i.caps,Pe.TO_DEVICE);return c&&(s||u)}function qb(e,t,n){Wb(e),Wb(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(bi["a"])((function(e){return Object(I["a"])(Object(fl["a"])(e,"Room.timeline").pipe(Object(M["a"])((function(t){var n=Pb(t,2),r=n[0],a=n[1];return{matrix:e,event:r,room:a}}))),Object(fl["a"])(e,"toDeviceEvent").pipe(Object(M["a"])((function(t){return{matrix:e,event:t,room:void 0}}))))})),Object(Gu["a"])(o),Object(B["a"])(Vb),Object(W["a"])((function(e){var t=Pb(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Cu(r,a.getSender());if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!o||s.includes(o.roomId)})),Object(Ku["a"])(1),Object(ii["a"])(Object(ti["a"])(c)),Object(W["a"])(b.a.mark((function e(t){var n,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,s=Cu(n,a.getSender()),u=Ib((null!==(i=a.getContent().body)&&void 0!==i?i:"").split("\n")),e.prev=3,u.s();case 5:if((l=u.n()).done){e.next=12;break}return p=l.value,f=bd(p,s.meta.address,{log:r}),e.next=10,Yr(Rb({text:p,message:f,ts:null!==(c=a.event.origin_server_ts)&&void 0!==c?c:Date.now(),userId:s.payload.userId},o?{roomId:o.roomId}:{}),s.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),u.e(e.t0);case 17:return e.prev=17,u.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))}function Kb(e,t,n){Wb(t);var r=n.log,a=n.signer,o=n.latest$,i=new Nb(32);return e.pipe(Object(B["a"])(ha([$t(Un),$t(Bn),$t(Wn)])),Object(Gu["a"])(o),Object(B["a"])((function(e){var t=Pb(e,2),n=t[0],r=t[1].presences;return n.meta.address in r&&!!Lu(r[n.meta.address].payload.caps,Pe.DELIVERY)})),Object(Xu["a"])((function(e){var t=Pb(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(C["a"])(Gr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:xn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Zt["a"])(ba(a,s,{log:r})).pipe(Object(ri["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return Gr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))}var Gb,Zb,Yb=n("e11c"),Xb=n("1e67");function Qb(e,t){return ey(e)||Jb(e,t)||ay(e,t)||zb()}function zb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ey(e){if(Array.isArray(e))return e}function ty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ny(e){return iy(e)||oy(e)||ay(e)||ry()}function ry(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ay(e,t){if(e){if("string"===typeof e)return cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cy(e,t):void 0}}function oy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function iy(e){if(Array.isArray(e))return cy(e)}function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sy(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function uy(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sy(o,r,a,i,c,"next",e)}function c(e){sy(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ly(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e["offer"]="offer",e["answer"]="answer",e["candidates"]="candidates",e["hangup"]="hangup"})(Zb||(Zb={}));var py=Be["p"](Be["j"]([Be["v"]({type:Be["l"](Zb.offer),sdp:Be["s"]}),Be["o"]({call_id:Be["s"]})])),fy=Be["p"](Be["j"]([Be["v"]({type:Be["l"](Zb.answer),sdp:Be["s"]}),Be["o"]({call_id:Be["s"]})])),dy=Be["p"](Be["j"]([Be["v"]({type:Be["l"](Zb.candidates),candidates:Be["q"](Be["y"])}),Be["o"]({call_id:Be["s"]})])),by=Be["p"](Be["j"]([Be["v"]({type:Be["l"](Zb.hangup)}),Be["o"]({call_id:Be["s"]})])),yy=(Gb={},ly(Gb,Zb.offer,py),ly(Gb,Zb.answer,fy),ly(Gb,Zb.candidates,dy),ly(Gb,Zb.hangup,by),Gb),hy=new WeakMap;function my(e){return vy.apply(this,arguments)}function vy(){return vy=uy(b.a.mark((function e(t){var n,r,a,o;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=hy.get(t),!(n&&Date.now()<n[0])){e.next=3;break}return e.abrupt("return",n[1]);case 3:return e.next=5,t.turnServer().catch((function(){}));case 5:return r=e.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),hy.set(t,[a,o]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),vy.apply(this,arguments)}function gy(e,t,n){return Object(I["a"])(Object(fl["a"])(e,"Room.timeline").pipe(Object($["a"])(0)),Object(fl["a"])(e,"toDeviceEvent")).pipe(Object(B["a"])((function(e){var t;return"m.room.message"===e.getType()&&e.getSender()===n&&"m.notice"===(null===(t=e.getContent())||void 0===t?void 0:t.msgtype)})),Object(W["a"])((function(e){var n;try{return Object(C["a"])(xt(yy[t],_r(null===(n=e.getContent())||void 0===n?void 0:n.body)))}catch(r){}return L["a"]})))}function Oy(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(fl["a"])(e,"icecandidate").pipe(Object($["a"])("candidate"),Object(Yu["a"])((function(){return n})),Object(di["a"])(St),Object(Yb["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(ri["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object(W["a"])((function(e){var n={type:Zb.candidates,candidates:e,call_id:o};return dd(c,t,"m.room.message",{msgtype:"m.notice",body:kr(n)},{log:s,latest$:u,config$:l})}))),gy(t,Zb.candidates,i).pipe(Object(ri["a"])((function(e){return s.debug("RTC: received candidates",o,e.candidates)})),Object(W["a"])((function(e){var t;return Object(Zt["a"])(null!==(t=e.candidates)&&void 0!==t?t:[])})),Object(W["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Qt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),L["a"]})))})))).pipe(Object(Uu["a"])())}function wy(e,t,n,r,a){var o=r.fallbackIceServers,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,p=a.config$;return Object(P["a"])((function(){return my(e)})).pipe(Object(W["a"])((function(r){var f=new RTCPeerConnection({iceServers:[].concat(ny(r),ny(o))}),d=f.createDataChannel(i,{ordered:!1});return Object.assign(d,{connection:f}),Object(I["a"])(Oy(f,e,t,n,a),Object(P["a"])(uy(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.createOffer());case 1:case"end":return e.stop()}}),e)})))).pipe(Object(W["a"])(function(){var e=uy(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.setLocalDescription(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(W["a"])((function(t){var n={type:t.type,sdp:t.sdp,call_id:i};return Object(I["a"])(gy(e,Zb.answer,c),dd(s,e,"m.room.message",{msgtype:"m.notice",body:kr(n)},{log:u,latest$:l,config$:p}).pipe(Object(ri["a"])((function(e){return u.debug("RTC: sent invite",i,e)})),Object(Uu["a"])()))})),Object(Ku["a"])(1),Object(ri["a"])((function(e){u.info("RTC: got answer",i),e.call_id!==i&&u.warn('RTC: callId mismatch, continuing: we="'.concat(i,'", them="').concat(e.call_id,'"'))})),Object(W["a"])(function(){var e=uy(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.setRemoteDescription(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(ri["a"])((function(){t.next(null),t.complete()})),Object(Uu["a"])()),Object(C["a"])([f,d]))})))}function _y(e,t,n,r,a){ty(r);var o=n.callId,i=n.peerId,c=n.peerAddress,s=a.log,u=a.latest$,l=a.config$;return gy(e,Zb.offer,i).pipe(Object(ri["a"])((function(){return s.info("RTC: got invite",o)})),Object(W["a"])((function(t){return Object(Zt["a"])(my(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Gu["a"])(l),Object(W["a"])((function(r){var i=Qb(r,2),p=Qb(i[0],2),f=p[0],d=p[1],y=i[1].fallbackIceServers;f.call_id!==o&&s.warn('RTC: callId mismatch, continuing: we="'.concat(o,'", them="').concat(f.call_id,'"'));var h=new RTCPeerConnection({iceServers:[].concat(ny(d),ny(y))});return Object(I["a"])(Oy(h,e,t,n,a),Object(P["a"])(uy(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.setRemoteDescription(f));case 1:case"end":return e.stop()}}),e)})))).pipe(Object(W["a"])(uy(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.createAnswer());case 1:case"end":return e.stop()}}),e)})))),Object(W["a"])(function(){var e=uy(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.setLocalDescription(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(W["a"])((function(t){var n={type:t.type,sdp:t.sdp,call_id:o};return dd(c,e,"m.room.message",{msgtype:"m.notice",body:kr(n)},{log:s,latest$:u,config$:l})})),Object(ri["a"])((function(e){s.debug("RTC: sent answer",o,e),t.next(null),t.complete()})),Object(Uu["a"])()),Object(fl["a"])(h,"datachannel").pipe(Object($["a"])("channel"),Object(ri["a"])((function(e){return Object.assign(e,{connection:h})})),Object(M["a"])((function(e){return[h,e]}))))})),Object(Ku["a"])(1))}var ky="RTC: peer hung up",jy="RTC: dataChannel closed",Ey="ping",Ty=["failed","closed","disconnected"];function xy(e,t,n){var r=t.callId,a=t.peerId,o=t.peerAddress,i=n.log;return function(t){return t.pipe(Object(W["a"])((function(t){var n=Qb(t,2),c=n[0],s=n[1];return Object(I["a"])(Object(fl["a"])(c,"connectionstatechange").pipe(Object(mu["a"])(null),Object(W["a"])((function(){return Ty.includes(c.connectionState)?Object(ni["a"])(new Error("RTC: connection failed")):L["a"]}))),Object(fl["a"])(s,"close").pipe(Object(yi["a"])(Object(ni["a"])(new Error(jy)))),Object(fl["a"])(s,"error").pipe(Object(W["a"])((function(e){return Object(ni["a"])(e.error)}))),Object(fl["a"])(s,"open").pipe(Object(ri["a"])((function(){i.info("RTC: dataChannel open",r),s.send(Ey)})),Object(Uu["a"])()),Object(fl["a"])(s,"message").pipe(Di(e),Object(ri["a"])((function(e){return i.debug("RTC: dataChannel message",r,e)})),Object($["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(W["a"])(b.a.mark((function e(t,n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==n){e.next=3;break}return e.next=3,to(s,{address:o});case 3:if(t!==Ey){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Yr({text:t,message:bd(t,o,{log:i}),ts:Date.now(),userId:a},{address:o});case 7:case"end":return e.stop()}}),e)}))))).pipe(Object(Mu["a"])((function(){s.close()})))})))}}function Sy(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(li["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available&&Lu(e.payload.caps,Pe.WEBRTC)===Lu(t.payload.caps,Pe.WEBRTC)})),Object(Gu["a"])(i,c),Object(B["a"])((function(e){var t=Qb(e,3),n=t[0],r=t[2].caps;return!!Lu(n.payload.caps,Pe.WEBRTC)&&!!Lu(r,Pe.WEBRTC)})),Object(bi["a"])((function(t){var n=Qb(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(C["a"])(to(void 0,i.meta));var l={log:r,latest$:o,config$:c},p=[a,i.meta.address].sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).join("|"),f=p.startsWith(a),d=Zf(u.pollingInterval,2*u.httpTimeout);return Object(P["a"])((function(){var t,n={callId:p,peerId:i.payload.userId,peerAddress:i.meta.address},a=new R["a"],b=new R["a"];t=f?wy(s,a,n,u,l):_y(s,a,n,u,l),b.pipe(Object(B["a"])((function(e){return e})),Object(W["a"])((function(){var e={type:Zb.hangup,call_id:p};return dd(i.meta.address,s,"m.room.message",{msgtype:"m.notice",body:kr(e)},{log:r,latest$:o,config$:c}).pipe(Object(ii["a"])(Object(ti["a"])(u.httpTimeout/10)))})),Object(ii["a"])(e.pipe(Object(Uu["a"])(),Object(Xb["a"])(null)))).subscribe();var y=d.next(),h=y.value;return h?Object(I["a"])(t,gy(s,Zb.hangup,n.peerId).pipe(Object(yi["a"])(Object(ni["a"])(new Error(ky))))).pipe(xy(h,n,l),Object(ii["a"])(b),Object(Qt["a"])((function(e){var t;return b.next(![ky,jy].includes(null===e||void 0===e?void 0:e.message)),b.complete(),r.info("Couldn't set up WebRTC dataChannel, retrying",p,null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:e),L["a"]})),Object(Xb["a"])(to(void 0,{address:i.meta.address}))):L["a"]})).pipe(Object(fi["a"])((function(e){return e.pipe(Object(Gu["a"])(o,c),Object(W["a"])((function(e){var t,n=Qb(e,3),r=n[1].presences,a=n[2].httpTimeout;return(null===(t=r[i.meta.address])||void 0===t?void 0:t.payload.available)?f?Object(ti["a"])(a/10):Object(C["a"])(null):L["a"]})))})))})))}function Ay(e,t,n){return ty(t),e.pipe(Object(B["a"])(za.success.is),Object(oi["a"])((function(e){return e.meta.address})),Object(W["a"])((function(t){return Sy(e,t,n)})))}function Ny(e,t){return Py(e)||Iy(e,t)||Ry(e,t)||Dy()}function Dy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ry(e,t){if(e){if("string"===typeof e)return Cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cy(e,t):void 0}}function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Py(e){if(Array.isArray(e))return e}function Ly(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Fa.is),Object($["a"])("payload","blockNumber"),Object(Gu["a"])(t,r),Object(Xt["a"])((function(t){var n=Ny(t,3),r=n[0],a=n[1].transfers,o=n[2].confirmationBlocks;return Object(Zt["a"])(Object.values(a).filter((function(e){return e.direction===ka.SENT&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed&&e.expiration<=r-2*o}))).pipe(Object(W["a"])((function(t){var n={secrethash:t.transfer.lock.secrethash,direction:ka.SENT};return Object(I["a"])(Yf(e,vo.request(void 0,n),Wr(vo,n)),Object(C["a"])(so.failure(new mt(yt.XFER_EXPIRED,{block:t.transfer.lock.expiration.toString()}),n)))})))})))}function Uy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function My(e,t){return Wy(e)||Fy(e,t)||Vy(e,t)||By()}function By(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wy(e){if(Array.isArray(e))return e}function $y(e){return Ky(e)||qy(e)||Vy(e)||Hy()}function Hy(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vy(e,t){if(e){if("string"===typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gy(e,t):void 0}}function qy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ky(e){if(Array.isArray(e))return Gy(e)}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zy(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return vt(n.length===e.locks.length-1,"invalid locks size"),n}function Yy(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function Xy(e,t,n){var r=e.channels[Vi(t)];return vt((null===r||void 0===r?void 0:r.state)===ra.open,"channel not open"),n&&(vt(n.chain_id.eq(e.chainId),"chainId mismatch"),vt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function Qy(e,t,n,r){var a,o=n.revealTimeout,i=n.confirmationBlocks,c=r.log,s=r.address,u=r.network,l=r.signer,p={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,d=t.payload.paths[0].path[0],y=t.payload.tokenNetwork,h=Xy(e,{tokenNetwork:y,partner:d});vt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o+i,"expiration too soon");var m=xt(Rt(32),t.payload.value.add(f),"overflow of locked amount with fee"),v={amount:m,expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},g=ss([].concat($y(h.own.locks),[v]));c.info("Signing transfer of value",t.payload.value.toString(),"of token",h.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var O={type:xn.LOCKED_TRANSFER,message_identifier:fs(),chain_id:Object(_["bigNumberify"])(u.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(h.id),nonce:h.own.nextNonce,transferred_amount:h.own.balanceProof.transferredAmount,locked_amount:h.own.balanceProof.lockedAmount.add(v.amount),locksroot:g,payment_identifier:t.payload.paymentId,token:h.token,recipient:d,lock:v,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:s,metadata:p};return Object(Zt["a"])(ba(l,O,{log:c})).pipe(Object(W["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uo({message:n,fee:f,partner:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,po({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function zy(e,t,n){return Object(yu["a"])([e,n.config$]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var r=My(e,2),a=r[0],o=r[1];return n.db.storageKeys.has(ds(t.meta))?(n.log.warn("transfer already present",t.meta),L["a"]):Qy(a,t,o,n)})),Object(Qt["a"])((function(e){return Object(C["a"])(so.failure(e,t.meta))})))}function Jy(e,t,n,r,a){var o,i=a.log,c=a.signer,s=n.meta.secrethash,u=r.transfer,l=u.token_network_address,p=r.partner,f=Xy(t,{tokenNetwork:l,partner:p});if(r.unlock)o=Object(C["a"])(r.unlock);else{vt(r.secret,"unknown secret"),vt(f.own.locks.find((function(e){return e.secrethash===s})),"transfer already unlocked or expired"),vt(r.secretRegistered||r.expiration>t.blockNumber,"lock expired");var d={type:xn.UNLOCK,message_identifier:fs(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(u.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(u.lock.amount),locksroot:ss(Zy(f.own,s)),payment_identifier:u.payment_identifier,secret:r.secret};o=Object(Zt["a"])(ba(c,d,{log:i}))}return o.pipe(Object(Gu["a"])(e),Object(M["a"])((function(e){var t=My(e,2),r=t[0],a=t[1],o=a.transfers[ds(n.meta)],i=Xy(a,{tokenNetwork:l,partner:p});return vt(o.expiration>a.blockNumber||o.secretRegistered||i.own.locks.find((function(e){return e.secrethash===s&&e.registered})),"lock expired"),ho.success({message:r,partner:p},n.meta)})))}function eh(e,t,n){var r=n.signer,a=n.log,o=n.db;return Object(P["a"])((function(){return ks(e,o,t.meta)})).pipe(Object(Gu["a"])(e),Object(W["a"])((function(n){var o=My(n,2),i=o[0],c=o[1];return Jy(e,c,t,i,{log:a,signer:r})})),Object(Qt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(C["a"])(ho.failure(e,t.meta))})))}function th(e,t,n,r){var a,o=r.signer,i=r.log,c=t.meta.secrethash,s=n.transfer,u=s.token_network_address,l=n.partner,p=Xy(e,{tokenNetwork:u,partner:l});if(n.expired)a=Object(C["a"])(n.expired);else{vt(s.lock.expiration.lt(e.blockNumber),"lock not yet expired"),vt(p.own.locks.find((function(e){return e.secrethash===c}))&&!n.unlock,"transfer already unlocked or expired");var f=ss(Zy(p.own,c)),d={type:xn.LOCK_EXPIRED,message_identifier:fs(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:p.own.nextNonce,transferred_amount:p.own.balanceProof.transferredAmount,locked_amount:p.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:f,recipient:l,secrethash:c};a=Object(Zt["a"])(ba(o,d,{log:i}))}return a.pipe(Object(M["a"])((function(e){return vo.success({message:e,partner:l},t.meta)})))}function nh(e,t,n){var r=n.log,a=n.signer,o=n.db;return Object(P["a"])((function(){return ks(e,o,t.meta)})).pipe(Object(Gu["a"])(e),Object(W["a"])((function(e){var n=My(e,2),o=n[0],i=n[1];return th(i,t,o,{signer:a,log:r})})),Object(Qt["a"])((function(e){return Object(C["a"])(vo.failure(e,t.meta))})))}function rh(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=n.db,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:ka.RECEIVED};return Object(yu["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=My(e,2),i=n[0],l=n[1],p=l.revealTimeout,f=l.caps,d=t.payload.message;if(c.storageKeys.has(ds(u))){a.warn("transfer already present",u);var y=d.message_identifier,h=i.transfers[ds(u)];return(null===h||void 0===h?void 0:h.transferProcessed)&&h.partner===t.meta.address&&y.eq(h.transfer.message_identifier)?Object(C["a"])(lo({message:Wt(h.transferProcessed)},u)):L["a"]}var m=d.token_network_address,v=t.meta.address,g=Xy(i,{tokenNetwork:m,partner:v},d);vt(d.nonce.eq(g.partner.nextNonce),["nonce mismatch",{expected:g.partner.nextNonce.toNumber(),received:d.nonce.toNumber()}]);var O=[].concat($y(g.partner.locks),[d.lock]),w=ss(O);vt(d.locksroot===w,"locksroot mismatch"),vt(d.transferred_amount.eq(g.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),vt(d.locked_amount.eq(Yy(O)),"lockedAmount mismatch");var _=Ki(g),j=_.partnerCapacity;vt(d.lock.amount.lte(j),"balanceProof total amount bigger than capacity"),vt(d.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",d.lock.amount.toString(),"of token",g.token,", from",d.initiator,", through partner",v);var E=Object(C["a"])(void 0);Lu(f,Pe.RECEIVE)&&d.target===r&&d.lock.expiration.sub(p).gt(i.blockNumber)&&(E=Object(P["a"])((function(){var e={type:xn.SECRET_REQUEST,payment_identifier:d.payment_identifier,secrethash:s,amount:d.lock.amount,expiration:d.lock.expiration,message_identifier:fs()};return ba(o,e,{log:a})})));var T=Object(P["a"])((function(){var e={type:xn.PROCESSED,message_identifier:d.message_identifier};return ba(o,e,{log:a})}));return Object(yu["a"])([T,E]).pipe(Object(W["a"])(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=My(t,2),r=n[0],a=n[1],e.next=3,uo({message:d,fee:k["Zero"],partner:v},u);case 3:return e.next=5,lo({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,za.request(void 0,{address:d.initiator});case 8:return e.next=10,bo({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return Object(C["a"])(so.failure(e,u))})))}function ah(e,t,n){var r=n.log,a=n.signer,o=n.db,i=us(t.payload.message.secret),c={secrethash:i,direction:ka.RECEIVED};return Object(P["a"])((function(){return ks(e,o,c)})).pipe(Object(Gu["a"])(e),Object(W["a"])((function(e){var n=My(e,2),o=n[0],s=n[1];vt(o,"unknown transfer");var u=t.payload.message,l=t.meta.address;if(vt(l===o.partner,"wrong partner"),vt(!o.expired,"already expired"),o.unlock)return r.warn("transfer already unlocked",t.meta),o.unlockProcessed&&u.message_identifier.eq(o.unlockProcessed.message_identifier)?Object(C["a"])(mo({message:Wt(o.unlockProcessed)},c)):L["a"];var p=o.transfer;vt(u.token_network_address===p.token_network_address,"wrong tokenNetwork");var f=u.token_network_address,d=Xy(s,{tokenNetwork:f,partner:l},u);vt(u.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:u.nonce.toNumber()}]);var y=p.lock.amount,h=Zy(d.partner,i);vt(u.locksroot===ss(h),"locksroot mismatch"),vt(u.transferred_amount.eq(d.partner.balanceProof.transferredAmount.add(y)),"transferredAmount mismatch"),vt(u.locked_amount.eq(Yy(h)),"lockedAmount mismatch");var m={type:xn.PROCESSED,message_identifier:u.message_identifier};return Object(Zt["a"])(ba(a,m,{log:r})).pipe(Object(W["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.secret){e.next=3;break}return e.next=3,po({secret:u.secret},c);case 3:return e.next=5,ho.success({message:u,partner:l},c);case 5:return e.next=7,mo({message:t},c);case 7:return e.next=9,so.success({balanceProof:pa(u)},c);case 9:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(C["a"])(ho.failure(e,c))})))}function oh(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=n.db,c=t.payload.message.secrethash,s={secrethash:c,direction:ka.RECEIVED};return Object(P["a"])((function(){return ks(e,i,s)})).pipe(Object(Gu["a"])(e,o),Object(W["a"])((function(e){var n=My(e,3),o=n[0],i=n[1],u=n[2].confirmationBlocks,l=t.payload.message,p=t.meta.address;if(vt(p===o.partner,"wrong partner"),vt(!o.unlock,"transfer unlocked"),o.expired)return r.warn("transfer already expired",t.meta),o.expiredProcessed&&l.message_identifier.eq(o.expiredProcessed.message_identifier)?Object(C["a"])(go({message:Wt(o.expiredProcessed)},s)):L["a"];var f=o.transfer;vt(f.lock.expiration.add(u).lte(i.blockNumber),"expiration block not confirmed yet"),vt(!o.secretRegistered,"secret registered onchain"),vt(l.token_network_address===f.token_network_address,"wrong tokenNetwork");var d=l.token_network_address,y=Xy(i,{tokenNetwork:d,partner:p},l);vt(l.nonce.eq(y.partner.nextNonce),["nonce mismatch",{expected:y.partner.nextNonce.toNumber(),received:l.nonce.toNumber()}]);var h=Zy(y.partner,c);vt(l.locksroot===ss(h),"locksroot mismatch"),vt(l.locked_amount.eq(Yy(h)),"lockedAmount mismatch"),vt(l.transferred_amount.eq(y.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var m={type:xn.PROCESSED,message_identifier:l.message_identifier};return Object(Zt["a"])(ba(a,m,{log:r})).pipe(Object(W["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vo.success({message:l,partner:p},s);case 2:return e.next=4,go({message:t},s);case 4:return e.next=6,so.failure(new mt(yt.XFER_EXPIRED,{block:f.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(C["a"])(vo.failure(e,s))})))}function ih(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==ka.SENT?L["a"]:Object(yu["a"])([e,c,s]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,c=My(e,3),s=c[0],u=c[1].revealTimeout,l=c[2].presences,p=Xy(s,t.meta);if(p.own.pendingWithdraws.some(Qf(xn.WITHDRAW_REQUEST,t.meta)))return L["a"];vt(null===(n=l[t.meta.partner])||void 0===n?void 0:n.payload.available,yt.CNL_WITHDRAW_PARTNER_OFFLINE),vt(t.meta.expiration>=s.blockNumber+u,yt.CNL_WITHDRAW_EXPIRES_SOON),vt(t.meta.totalWithdraw.gt(p.own.withdraw),yt.CNL_WITHDRAW_AMOUNT_TOO_LOW),vt(t.meta.totalWithdraw.lte(Ki(p).ownTotalWithdrawable),yt.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var f={type:xn.WITHDRAW_REQUEST,message_identifier:fs(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(p.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:p.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Zt["a"])(ba(o,f,{log:r})).pipe(Object(M["a"])((function(e){return jo.request({message:e},t.meta)})))})),Object(Qt["a"])((function(e){return Object(C["a"])(ko.failure(e,t.meta))})))}function ch(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:ka.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return Xy(e,{tokenNetwork:o,partner:i},a),vt(a.participant===r,"participant mismatch"),jo.success({message:a},c)})),Object(Qt["a"])((function(e){return Object(C["a"])(jo.failure(e,c))})))}function sh(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==ka.SENT?L["a"]:Object(yu["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=My(e,2),i=n[0],c=n[1].confirmationBlocks,s=Xy(i,t.meta);vt(!s.own.pendingWithdraws.some(Qf(xn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(Qf(xn.WITHDRAW_REQUEST,t.meta));vt(u,"no matching WithdrawRequest found, maybe already confirmed"),vt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:xn.WITHDRAW_EXPIRED,message_identifier:fs(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Zt["a"])(ba(o,l,{log:r})).pipe(Object(W["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Eo.success({message:n},t.meta);case 2:return e.next=4,ko.failure(new mt(yt.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return Object(C["a"])(Eo.failure(e,t.meta))})))}function uh(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:ka.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){vt(o.participant===t.meta.address,"participant mismatch");var n,u=Xy(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(Qf(xn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(C["a"])(l);else{vt(o.nonce.eq(u.partner.nextNonce),["nonce mismatch",{expected:u.partner.nextNonce.toNumber(),received:o.nonce.toNumber()}]),vt(o.total_withdraw.lte(Ki(u).partnerTotalWithdrawable),"invalid total_withdraw");var p={type:xn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Zt["a"])(ba(r,p,{log:a}))}return n.pipe(Object(W["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jo.request({message:o},s);case 2:return e.next=4,jo.success({message:n},s);case 4:return e.next=6,Gr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return Object(C["a"])(jo.failure(e,s))})))}function lh(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:ka.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(yu["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=My(e,2),i=n[0],p=n[1].confirmationBlocks;vt(u===t.meta.address,"participant mismatch");var f,d=Xy(i,{tokenNetwork:s,partner:u},c),y="".concat(qi(d),"+").concat(c.message_identifier.toString()),h=r.get(y);if(h)f=Object(C["a"])(h);else{vt(c.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:c.nonce.toNumber()}]),vt(i.blockNumber>=l.expiration+p,"expire block not confirmed yet");var m={type:xn.PROCESSED,message_identifier:c.message_identifier};f=Object(Zt["a"])(ba(a,m,{log:o})).pipe(Object(ri["a"])((function(e){return r.put(y,e)})))}return f.pipe(Object(W["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Eo.success({message:c},l);case 2:return e.next=4,To(void 0,l);case 4:return e.next=6,Gr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Qt["a"])((function(e){return Object(C["a"])(Eo.failure(e,l))})))}function ph(e,t,n){Uy(t);var r=new Nb(32),a=n.latest$.pipe(Ei("state"));return Object(I["a"])(e.pipe(Object(B["a"])(Ur([so.request,ho.request,vo.request,ko.request,Eo.request]))),e.pipe(Object(B["a"])(ha([$t(Yn),$t(Qn),$t(Jn),$t(nr),$t(ar),$t(ir)])))).pipe(Object(Xu["a"])((function(e){var t;switch(e.type){case so.request.type:t=zy(a,e,n);break;case ho.request.type:t=eh(a,e,n);break;case vo.request.type:t=nh(a,e,n);break;case ko.request.type:t=ih(a,e,n);break;case Eo.request.type:t=sh(a,e,n);break;case Yr.type:switch(e.payload.message.type){case xn.LOCKED_TRANSFER:t=rh(a,e,n);break;case xn.UNLOCK:t=ah(a,e,n);break;case xn.LOCK_EXPIRED:t=oh(a,e,n);break;case xn.WITHDRAW_REQUEST:t=uh(a,e,n);break;case xn.WITHDRAW_CONFIRMATION:t=ch(a,e,n);break;case xn.WITHDRAW_EXPIRED:t=lh(a,e,n,r);break}break}return t})))}var fh=n("c8ea");function dh(e,t){return vh(e)||mh(e,t)||yh(e,t)||bh()}function bh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yh(e,t){if(e){if("string"===typeof e)return hh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hh(e,t):void 0}}function hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vh(e){if(Array.isArray(e))return e}function gh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Oh(e,t){return gh(e),t.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.transfers;return Object(Zt["a"])(Object.values(t).filter((function(e){return e.direction===ka.SENT&&!e.unlockProcessed&&!e.expiredProcessed&&!e.secretRegistered&&!e.channelClosed})))})),Object(W["a"])(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={secrethash:t.transfer.lock.secrethash,direction:ka.SENT},e.next=3,za.request(void 0,{address:t.transfer.target});case 3:if(t.transferProcessed){e.next=6;break}return e.next=6,uo({message:Wt(t.transfer),fee:t.fee,partner:t.partner},n);case 6:if(!t.unlock){e.next=9;break}return e.next=9,ho.success({message:Wt(t.unlock),partner:t.partner},n);case 9:if(!t.expired){e.next=12;break}return e.next=12,vo.success({message:Wt(t.expired),partner:t.partner},n);case 12:case"end":return e.stop()}}),e)}))))}function wh(e,t,n){gh(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.transfers;return Object(Zt["a"])(Object.values(t).filter((function(e){return e.direction===ka.RECEIVED&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed})))})),Object(W["a"])((function(e){var t=e.transfer.lock.secrethash,n={secrethash:t,direction:ka.RECEIVED};return Object(I["a"])(Object(C["a"])(uo({message:Wt(e.transfer),fee:e.fee,partner:e.partner},n)),e.secret&&!e.secretReveal?Object(C["a"])(po({secret:e.secret},n)):L["a"],e.secretReveal?Object(C["a"])(yo({message:Wt(e.secretReveal)},n)):L["a"],!e.secret&&e.secretRequest?r.pipe(Object($["a"])("caps"),Object(B["a"])((function(e){return!!Lu(e,Pe.RECEIVE)})),Object(Ku["a"])(1),Object(yi["a"])(Object(C["a"])(za.request(void 0,{address:e.transfer.initiator}),bo({message:Wt(e.secretRequest)},n)))):L["a"])})))}function _h(e){var t,n;return"meta"in e&&(null===(t=e.meta)||void 0===t?void 0:t.secrethash)&&(null===(n=e.meta)||void 0===n?void 0:n.direction)}function kh(e,t,n){var r=n.config$;return t.pipe(Ei("transfers"),Ti(),Object(oi["a"])((function(e){var t=dh(e,1),n=t[0];return n}),fh["a"],(function(e){return t.pipe(Object(B["a"])((function(t){var n=t.transfers;return!(e.key in n)})))})),Object(Gu["a"])(r),Object(W["a"])((function(n){var r=dh(n,2),a=r[0],o=r[1].httpTimeout;return a.pipe(Object(B["a"])((function(e){var t=dh(e,2),n=t[1];return!!(n.unlockProcessed||n.expiredProcessed||n.channelSettled)})),Object(Ku["a"])(1),Object(W["a"])((function(t){var n=dh(t,2),r=n[1];return e.pipe(Object(B["a"])(_h),Object(B["a"])((function(e){return ds(e.meta)===a.key})),Object(mu["a"])({meta:Qc()(["secrethash","direction"],r)}))})),Object(Yt["a"])(3*o),Object(M["a"])((function(e){var t=e.meta;return Oo(void 0,t)})),Object(ii["a"])(t.pipe(Object(B["a"])((function(e){var t=e.transfers;return!(a.key in t)})))))})))}function jh(e,t){return Ah(e)||Sh(e,t)||Th(e,t)||Eh()}function Eh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Th(e,t){if(e){if("string"===typeof e)return xh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xh(e,t):void 0}}function xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ah(e){if(Array.isArray(e))return e}function Nh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Dh(e,t,n){var r=n.caps,a=Lu(r,Pe.MEDIATE),o=e.meta.direction===ka.RECEIVED&&e.payload.message.target!==t;return!!a&&o}function Rh(e,t,n){Nh(t);var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(uo.is),Object(Gu["a"])(a),Object(B["a"])((function(e){var t=jh(e,2),n=t[0],a=t[1];return Dh(n,r,a)})),Object(M["a"])((function(e){var t=jh(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return so.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:ka.SENT})})))}function Ch(e,t){return Mh(e)||Uh(e,t)||Ph(e,t)||Ih()}function Ih(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ph(e,t){if(e){if("string"===typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lh(e,t):void 0}}function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mh(e){if(Array.isArray(e))return e}function Bh(e,t){return e.pipe(Object(B["a"])(ha($t(Un))),Object(Gu["a"])(t),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ch(t,2),r=n[0],a=n[1].transfers,u=0,l=Object.values(a);case 2:if(!(u<l.length)){e.next=25;break}if(p=l[u],p.direction===ka.SENT&&p.partner===r.meta.address){e.next=6;break}return e.abrupt("continue",22);case 6:if(f={secrethash:p.secrethash,direction:ka.SENT},!r.payload.message.message_identifier.eq(p.transfer.message_identifier)){e.next=12;break}return e.next=10,lo({message:r.payload.message},f);case 10:e.next=22;break;case 12:if(!r.payload.message.message_identifier.eq(null!==(i=null===(o=p.unlock)||void 0===o?void 0:o.message_identifier)&&void 0!==i?i:-1)){e.next=19;break}return e.next=15,so.success({balanceProof:pa(p.unlock)},f);case 15:return e.next=17,mo({message:r.payload.message},f);case 17:e.next=22;break;case 19:if(!r.payload.message.message_identifier.eq(null!==(s=null===(c=p.expired)||void 0===c?void 0:c.message_identifier)&&void 0!==s?s:-1)){e.next=22;break}return e.next=22,go({message:r.payload.message},f);case 22:u++,e.next=2;break;case 25:case"end":return e.stop()}}),e)}))))}function Fh(e,t,n){var r=n.db;return e.pipe(Object(B["a"])(Ur([lo,mo,go])),Object(B["a"])((function(e){return e.meta.direction===ka.RECEIVED})),Object(Gu["a"])(t),Object(W["a"])((function(e){var t=Ch(e,2),n=t[0],a=t[1];return ks(a,r,n.meta).then((function(e){return[n,e]}))})),Object(M["a"])((function(e){var t=Ch(e,2),n=t[0],r=t[1];return Gr.request({message:n.payload.message},{address:r.partner,msgId:n.payload.message.message_identifier.toString()})})))}function Wh(e,t){return Kh(e)||qh(e,t)||Hh(e,t)||$h()}function $h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hh(e,t){if(e){if("string"===typeof e)return Vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vh(e,t):void 0}}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Kh(e){if(Array.isArray(e))return e}function Gh(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Ur([uo,ho.success,vo.success,bo,yo])),Object(Gu["a"])(t,r),Object(W["a"])((function(n){var r,a,o=Wh(n,3),i=o[0],c=o[1],s=o[2],u=s.pollingInterval,l=s.httpTimeout,p=s.revealTimeout,f=c.transfers[ds(i.meta)],d=t.pipe(Ei("transfers",ds(i.meta)));switch(i.type){case uo.type:i.meta.direction===ka.SENT&&(r=i.payload.partner,a=d.pipe(Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.expiredProcessed||e.channelClosed)}))));break;case ho.success.type:i.meta.direction===ka.SENT&&(r=i.payload.partner,a=d.pipe(Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)}))));break;case vo.success.type:i.meta.direction===ka.SENT&&(r=i.payload.partner,a=d.pipe(Object(B["a"])((function(e){return!(!e.expiredProcessed&&!e.channelClosed)}))));break;case bo.type:i.meta.direction===ka.RECEIVED&&f&&(r=f.transfer.initiator,a=Object(yu["a"])([t,d]).pipe(Object(B["a"])((function(e){var t=Wh(e,2),n=t[0].blockNumber,r=t[1];return!(!r.secretReveal&&!r.channelClosed)||n>r.expiration-p}))));break;case yo.type:i.meta.direction===ka.RECEIVED&&f&&(r=f.partner,a=d.pipe(Object(B["a"])((function(e){return!(!e.unlock&&!e.channelClosed)}))));break}return r&&a?Xf(Gr.request({message:i.payload.message},{address:r,msgId:i.payload.message.message_identifier.toString()}),e,a,Zf(u,2*l)):L["a"]})))}function Zh(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zh(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Yh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xh(e,t){return tm(e)||em(e,t)||zh(e,t)||Qh()}function Qh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zh(e,t){if(e){if("string"===typeof e)return Jh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jh(e,t):void 0}}function Jh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function em(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function tm(e){if(Array.isArray(e))return e}function nm(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(ha($t(Bn))),Object(Gu["a"])(t),Object(W["a"])(b.a.mark((function e(t){var n,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Xh(t,2),o=n[0],i=n[1],c=o.payload.message,s=ds({secrethash:c.secrethash,direction:ka.SENT}),s in i.transfers){e.next=5;break}return e.abrupt("return");case 5:if(u=i.transfers[s].transfer,u.initiator===r&&u.target===o.meta.address&&u.payment_identifier.eq(c.payment_identifier)){e.next=9;break}return a.warn("Invalid SecretRequest for transfer",c,u),e.abrupt("return");case 9:return e.next=11,bo({message:c},{secrethash:c.secrethash,direction:ka.SENT});case 11:case"end":return e.stop()}}),e)}))))}var rm=function(e,t){var n=t.signer,r=t.log,a=t.latest$,o=e.payload.message;return a.pipe(Object(F["a"])(),Object(W["a"])((function(t){var a=t.state,i=a.transfers[ds(e.meta)];vt(i.secret,"SecretRequest for unknown secret");var c,s=i.transfer,u=s.target,l=i.fee,p=s.lock.amount.sub(l);if(vt(o.expiration.lte(s.lock.expiration)&&o.expiration.gt(a.blockNumber),"SecretRequest for expired transfer"),vt(o.amount.gte(p),"SecretRequest for amount too small!"),o.amount.eq(p)||r.info("Accepted SecretRequest for amount different than sent",o,s),i.secretReveal)c=Object(C["a"])(i.secretReveal);else{var f={type:xn.SECRET_REVEAL,message_identifier:fs(),secret:i.secret};c=Object(Zt["a"])(ba(n,f,{log:r}))}return c.pipe(Object(W["a"])(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,yo({message:n},e.meta);case 2:return t.next=4,Gr.request({message:n},{address:u,msgId:n.message_identifier.toString()});case 4:case"end":return t.stop()}}),t)}))))})),Object(Qt["a"])((function(t){return r.error("Invalid SecretRequest",t),Object(C["a"])(so.failure(new mt(yt.XFER_INVALID_SECRETREQUEST),e.meta))})))};function am(e,t,n){return Yh(t),e.pipe(Object(B["a"])(Ur(bo)),Object(B["a"])((function(e){return e.meta.direction===ka.SENT})),Object(Xu["a"])((function(e){return rm(e,n)})))}function om(e,t){return e.pipe(Object(B["a"])(ha(Wn)),Object(Gu["a"])(t),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Xh(t,2),r=n[0],a=n[1],o=us(r.payload.message.secret),i=Object.values(ka).map((function(e){return a.transfers[ds({secrethash:o,direction:e})]})).filter(St),c=r.payload.message,s=Zh(i.filter((function(e){return e.direction===ka.SENT}))),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=17;break}return l=u.value,p={secrethash:o,direction:ka.SENT},e.next=12,po({secret:c.secret},p);case 12:if(r.meta.address!==l.partner||l.channelClosed){e.next=15;break}return e.next=15,ho.request(void 0,p);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:f=Zh(i.filter((function(e){return e.direction===ka.RECEIVED}))),e.prev=26,f.s();case 28:if((d=f.n()).done){e.next=34;break}return d.value,e.next=32,po({secret:c.secret},{secrethash:o,direction:ka.RECEIVED});case 32:e.next=28;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e["catch"](26),f.e(e.t1);case 39:return e.prev=39,f.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[5,19,22,25],[26,36,39,42]])}))))}function im(e,t,n){Yh(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(Ur([po,fo.success])),Object(B["a"])((function(e){return e.meta.direction===ka.RECEIVED})),Object(B["a"])((function(e){return po.is(e)||!!e.payload.confirmed})),Object(Xu["a"])((function(e){return o.pipe(Ei("state"),Object(F["a"])(),Object(B["a"])((function(t){var n=t.transfers;return ds(e.meta)in n})),Object(W["a"])((function(t){var n,o=t.transfers,i=null===(n=o[ds(e.meta)])||void 0===n?void 0:n.secretReveal;if(i)return Object(C["a"])(Wt(i));var c={type:xn.SECRET_REVEAL,message_identifier:fs(),secret:e.payload.secret};return ba(a,c,{log:r})})),Object(M["a"])((function(t){return yo({message:t},e.meta)})),Object(Qt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),L["a"]})))})))}function cm(e,t,n){Yh(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(Ei("confirmationBlocks"),Object(bi["a"])((function(e){return ln(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(M["a"])(pn(a)),Object(B["a"])(St),Object(Gu["a"])(t,o),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Xh(t,3),r=Xh(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.transfers,u=c.blockNumber,l=n[2].confirmationBlocks,p=0,f=Object.values(ka);case 2:if(!(p<f.length)){e.next=12;break}if(d=f[p],y=ds({secrethash:a,direction:d}),y in s){e.next=7;break}return e.abrupt("continue",9);case 7:return e.next=9,fo.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+l<=u?i.blockNumber<s[y].expiration:void 0},{secrethash:a,direction:d});case 9:p++,e.next=2;break;case 12:case"end":return e.stop()}}),e)}))))}function sm(e){return e.pipe(Object(B["a"])(fo.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return so.success({},e.meta)})))}function um(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Object(Gu["a"])(r),Object(W["a"])((function(e){var t=Xh(e,2),n=t[0],r=n.blockNumber,a=n.transfers,o=t[1].revealTimeout;return Object(Zt["a"])(Object.values(a).filter((function(e){return e.direction===ka.RECEIVED&&!e.unlock&&!e.expired&&!!e.secret&&!e.secretRegistered&&e.expiration>r&&e.expiration<=r+o})))})),Object(oi["a"])((function(e){return e._id}),fh["a"],(function(e){return a.pipe(Object($["a"])("state"),Object(B["a"])((function(t){var n=t.blockNumber,r=t.transfers;return!!(r[e.key].expiration<n||r[e.key].unlock||r[e.key].secretRegistered)})))})),Object(W["a"])((function(t){return t.pipe(Object(Xt["a"])((function(t){var n={secrethash:t.secrethash,direction:ka.RECEIVED};return Yf(e,fo.request({secret:t.secret},n),$r(fo,n))})),Object(ii["a"])(t.pipe(Object(Uu["a"])(),Object(Xb["a"])(1))))})),Ni(r.pipe(Object($["a"])("caps"),Object(M["a"])((function(e){return Lu(e,Pe.RECEIVE)})))))}function lm(e,t,n){Yh(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(B["a"])(fo.request.is),Object(Gu["a"])(u),Object(W["a"])((function(e){var t,n=Xh(e,2),u=n[0],l=n[1].subkey,p=qp({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),f=p.signer,d=Kp(s,f);return Object(P["a"])((function(){return d.functions.registerSecret(u.payload.secret)})).pipe(Gi("registerSecret",yt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}),Object(Uu["a"])(),Object(Qt["a"])((function(e){return Object(C["a"])(fo.failure(e,u.meta))})))})))}function pm(e,t){return bm(e)||dm(e,t)||hm(e,t)||fm()}function fm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bm(e){if(Array.isArray(e))return e}function ym(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=hm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function hm(e,t){if(e){if("string"===typeof e)return mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mm(e,t):void 0}}function mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function gm(e,t){return vm(e),t.pipe(Object(F["a"])(),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===ra.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=ym(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==xn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(Qf(xn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,jo.request({message:c},{direction:ka.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==xn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,Eo.success({message:c},{direction:ka.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))}function Om(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(jo.request.is),Object(B["a"])((function(e){return e.meta.direction===ka.SENT})),Object(Gu["a"])(r),Object(W["a"])((function(n){var r=pm(n,2),a=r[0],o=r[1],i=o.pollingInterval,c=o.httpTimeout,s=a.payload.message,u=Gr.request({message:s},{address:a.meta.partner,msgId:s.message_identifier.toString()}),l=t.pipe(Object(B["a"])((function(e){var t=e.channels[Vi(a.meta)];return(null===t||void 0===t?void 0:t.state)!==ra.open||t.own.pendingWithdraws.some(Qf(xn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(Qf(xn.WITHDRAW_REQUEST,a.meta))})));return Xf(u,e,l,Zf(i,2*c))})))}function wm(e,t,n){vm(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(B["a"])(jo.success.is),Object(B["a"])((function(e){return e.meta.direction===ka.SENT})),Object(Xu["a"])((function(e){return u.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,p=u.revealTimeout;vt(e.meta.expiration>=n.blockNumber+p,yt.CNL_WITHDRAW_EXPIRES_SOON);var f=n.channels[Vi(e.meta)];vt((null===f||void 0===f?void 0:f.state)===ra.open,"channel not open"),vt(e.meta.totalWithdraw.gt(f.own.withdraw),"withdraw already performed");var d=f.own.pendingWithdraws.find(Qf(xn.WITHDRAW_REQUEST,e.payload.message));vt(d,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=qp({signer:a,address:r,main:o},l),h=y.signer,m=Kp(s(b),h);return Object(P["a"])((function(){return m.functions.setTotalWithdraw(f.id,r,e.meta.totalWithdraw,e.meta.expiration,d.signature,e.payload.message.signature)})).pipe(Gi("setTotalWithdraw",yt.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),Xi(i.pollingInterval,void 0,void 0,{log:c}))})),Object(M["a"])((function(t){var n=pm(t,2),r=n[1];return ko.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Qt["a"])((function(t){return Object(C["a"])(ko.failure(t,e.meta))})))})))}function _m(e,t,n){vm(t);var r=n.signer,a=n.log,o=n.latest$,i=new Nb(32);return e.pipe(Object(B["a"])(Ur([jo.request,jo.success])),Object(B["a"])((function(e){return e.meta.direction===ka.RECEIVED!==jo.success.is(e)})),Object(Xu["a"])((function(e){return o.pipe(Object(F["a"])(),Object(B["a"])((function(t){var n=t.presences;return e.meta.partner in n&&!!Lu(n[e.meta.partner].payload.caps,Pe.DELIVERY)})),Object(W["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(C["a"])(c);else{var s={type:xn.PROCESSED,message_identifier:n.message_identifier};t=Object(Zt["a"])(ba(r,s,{log:a})).pipe(Object(ri["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(M["a"])((function(t){return Gr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(Qt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),L["a"]})))})))}function km(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Fa.is),Object($["a"])("payload","blockNumber"),Object(Gu["a"])(t,r),Object(W["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=pm(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===ra.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(Qf(xn.WITHDRAW_REQUEST)),l=ym(u),e.prev=8,l.s();case 10:if((p=l.n()).done){e.next=20;break}if(f=p.value,!f.expiration.add(2*o).gte(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(Qf(xn.WITHDRAW_EXPIRED,f))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,Eo.request(void 0,{direction:ka.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:f.expiration.toNumber(),totalWithdraw:f.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))}function jm(e,t,n){vm(t);var r=n.config$;return e.pipe(Object(B["a"])(Eo.success.is),Object(B["a"])((function(e){return e.meta.direction===ka.SENT})),Object(Gu["a"])(r),Object(W["a"])((function(t){var n=pm(t,2),r=n[0],a=n[1],o=a.pollingInterval,i=a.httpTimeout,c=r.payload.message,s=Gr.request({message:c},{address:r.meta.partner,msgId:c.message_identifier.toString()}),u=e.pipe(Object(B["a"])(ha($t(Un))),Object(B["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(c.message_identifier)})),Object(ci["a"])(To(void 0,r.meta)),Object(Ku["a"])(1),Object(_u["a"])());return Object(I["a"])(Xf(s,e,u,Zf(o,2*i)),u)})))}var Em=n("754b"),Tm=n("e30d");function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach((function(t){Am(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Am(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nm(e,t){return Pm(e)||Im(e,t)||Rm(e,t)||Dm()}function Dm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rm(e,t){if(e){if("string"===typeof e)return Cm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cm(e,t):void 0}}function Cm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Im(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pm(e){if(Array.isArray(e))return e}function Lm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Um(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Lm(o,r,a,i,c,"next",e)}function c(e){Lm(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Mm(e,t,n,r,a,o){if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&!Lu(t[r].payload.caps,Pe.MEDIATE))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var i=e.channels[Vi({tokenNetwork:n,partner:r})];if(!i)return"path: there's no direct channel with partner \"".concat(r,'"');if(i.state!==ra.open)return'path: channel with "'.concat(r,'" in state "').concat(i.state,'" instead of "').concat(ra.open,'"');var c=Ki(i),s=c.ownCapacity;return!s.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(s.toString())}var Bm=N()(function(){var e=Um(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functions.token());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Fm(e,t){var n=t.serviceRegistryContract,r=t.network,a=t.contractsInfo,o=t.config$,i=Be["v"]({message:Be["s"],network_info:Be["v"]({chain_id:Be["l"](r.chainId),token_network_registry_address:Be["l"](a.TokenNetworkRegistry.address)}),operator:Be["s"],payment_address:Mt,price_info:Rt(32),version:Be["s"]}),c=Mt.is(e)?Object(Zt["a"])(n.functions.urls(e)):Object(C["a"])(e);return c.pipe(Object(Gu["a"])(o),Object(W["a"])((function(e){var t=Nm(e,2),r=t[0],a=t[1],o=a.httpTimeout,c=a.pfsMaxFee;if(!r)throw new mt(yt.PFS_EMPTY_URL);if(!Qp(r))throw new mt(yt.PFS_INVALID_URL,{url:r});r.startsWith("https://")||r.startsWith("http://")||(r="https://".concat(r));var s=Date.now();return Object(Hf["a"])(r+"/api/v1/info").pipe(Object(Wf["a"])(o),Object(W["a"])(function(){var e=Um(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=xt,e.t1=i,e.t2=_r,e.next=5,t.text();case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,e.t0)(e.t1,e.t4),e.next=10,Bm(n);case 10:return e.t6=e.sent,e.abrupt("return",[e.t5,e.t6]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(e){var t=Nm(e,2),n=t[0],a=t[1];return vt(n.price_info.lte(c),[yt.PFS_TOO_EXPENSIVE,{price:n.price_info.toString()}]),{address:n.payment_address,url:r,rtt:Date.now()-s,price:n.price_info,token:a}})))})))}function Wm(e,t){var n=t.log;return Object(Zt["a"])(e).pipe(Object(W["a"])((function(e){return Fm(e,t).pipe(Object(Qt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),L["a"]})))}),5),Object(Ff["a"])(),Object(M["a"])((function(e){if(!e.length)throw new mt(yt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function $m(e){return Object(_["concat"])([Or(e.one_to_n_address,20),Or(e.chain_id,32),Or(na.IOU,32),Or(e.sender,20),Or(e.receiver,20),Or(e.amount,32),Or(e.expiration_block,32)])}function Hm(e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=Um(b.a.mark((function e(t,n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.signMessage($m(n)).then((function(e){return Sm(Sm({},n),{},{signature:e})})));case 1:case"end":return e.stop()}}),e)}))),Vm.apply(this,arguments)}function qm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=av(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Km(e){return Ym(e)||Zm(e)||av(e)||Gm()}function Gm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zm(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ym(e){if(Array.isArray(e))return ov(e)}function Xm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(n),!0).forEach((function(t){Jm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ev(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function tv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ev(o,r,a,i,c,"next",e)}function c(e){ev(o,r,a,i,c,"throw",e)}i(void 0)}))}}function nv(e,t){return cv(e)||iv(e,t)||av(e,t)||rv()}function rv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function av(e,t){if(e){if("string"===typeof e)return ov(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ov(e,t):void 0}}function ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cv(e){if(Array.isArray(e))return e}var sv=Be["p"](Be["v"]({error_code:Be["n"],errors:Be["s"]}));function uv(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function lv(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.contractsInfo,c=n.latest$,s=n.config$;return Object(P["a"])((function(){var t=uv(),n=Object(_["concat"])([r,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Zt["a"])(a.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:r,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Gu["a"])(s),Object(W["a"])((function(n){var r=nv(n,2),a=r[0],o=r[1].httpTimeout;return Object(Hf["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Wf["a"])(o))})),Object(Gu["a"])(c.pipe(Object($["a"])("state","blockNumber")),s),Object(W["a"])(function(){var t=tv(b.a.mark((function t(n){var a,c,s,u,l,p,f,d;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=nv(n,3),c=a[0],s=a[1],u=a[2].pfsIouTimeout,404!==c.status){t.next=3;break}return t.abrupt("return",{sender:r,receiver:e.address,chain_id:Object(_["bigNumberify"])(o.chainId),amount:k["Zero"],one_to_n_address:i.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(u)});case 3:return t.next=5,c.text();case 5:if(l=t.sent,c.ok){t.next=8;break}throw new mt(yt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:c.status,responseText:l});case 8:if(p=xt(io,_r(l)),f=p.last_iou,d=Object(_["verifyMessage"])($m(f),f.signature),d===r){t.next=12;break}throw new mt(yt.PFS_IOU_SIGNATURE_MISMATCH,{signer:d,address:r});case 12:return t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}function pv(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(C["a"])(i):lv(e,t,n)})),Object(M["a"])((function(t){return zm(zm({},t),{},{amount:t.amount.add(e.price)})})),Object(W["a"])((function(e){return Hm(n.signer,e)})))}function fv(e,t,n){return Xm(t),e.pipe(Object(B["a"])(Ur(Ao.request)),Object(Xu["a"])((function(t){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=L["a"],o=Object(C["a"])(r)):(a=Object(C["a"])(za.request(void 0,{address:i})),o=Ev(e,n,i)),Object(I["a"])(o.pipe(Object(W["a"])((function(e){return Tv(t,n,e)})),Object(Gu["a"])(n.latest$),Object(W["a"])((function(e){var r=nv(e,2),a=r[0],o=r[1];return xv(t,n,a,o)})),Object(Qt["a"])((function(e){return Object(C["a"])(Ao.failure(e,t.meta))}))),a)})))})))}function dv(e,t,n){Xm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Qi,Object(W["a"])((function(e){return e.pipe(Object(Em["a"])(),Object(Gu["a"])(c),Object(B["a"])((function(e){var t=nv(e,2),n=nv(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===ra.open&&!!a})),Object(Tm["a"])((function(e){var t=nv(e,2),n=nv(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(ti["a"])(o):Object(C["a"])(1)})),Object(bi["a"])((function(e){var t=nv(e,2),n=nv(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,p=c.tokenNetwork,f=c.partner.address,d=Ki(c),b=d.ownCapacity,y=d.partnerCapacity,h={type:xn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:p,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(P["a"])((function(){return ba(i,h,{log:r})})).pipe(Object(M["a"])((function(e){return Zr({message:e},{roomName:l})})),Object(Qt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),L["a"]})))})))})))}function bv(e,t,n){Xm(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Qi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Gu["a"])(c),Object(B["a"])((function(e){var t=nv(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===ra.open&&!!a&&!!Lu(o,Pe.MEDIATE)})),Object(W["a"])((function(e){var t=nv(e,2),n=t[0],c=t[1].pfsRoom,s={type:xn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:uv(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Zt["a"])(ba(i,s,{log:r})).pipe(Object(M["a"])((function(e){return Zr({message:e},{roomName:c})})),Object(Qt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),L["a"]})))})))}function yv(e,t,n){Xm(e),Xm(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(yu["a"])([i.pipe(Ei("pfs")),i.pipe(Ei("confirmationBlocks"))]).pipe(Object(bi["a"])((function(e){var t=nv(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?L["a"]:ln(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Gu["a"])(c),Object(B["a"])((function(e){var t=nv(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object($["a"])(0),Object(M["a"])(pn(a)),Object(B["a"])(St)).pipe(Object(oi["a"])((function(e){var t=nv(e,1),n=t[0];return n})),Object(W["a"])((function(e){return e.pipe(Object(bi["a"])((function(e){var t=nv(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return L["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(C["a"])({service:n,valid:!1}).pipe(Object(ib["a"])(new Date(o.toNumber()))):L["a"];return Object(I["a"])(Object(C["a"])({service:n,valid:!0}),i)})))})),Object(pi["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(Km(e),[n]):e}),[]),Object(li["a"])(),Object(Yt["a"])(1e3),Object(M["a"])((function(e){return No({pfsList:e})})))})))}function hv(e,t,n){Xm(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return e.pipe(Object(B["a"])(Fa.is),Object(mu["a"])(null),Object(Xt["a"])((function(){return Object(P["a"])(tv(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o.functions.effectiveBalance(r));case 1:case"end":return e.stop()}}),e)})))).pipe(Object(Qt["a"])(S()(L["a"])))})),Object(Gu["a"])(a),Object(B["a"])((function(e){var t=nv(e,2),n=t[0],r=t[1].udcBalance;return!r.eq(n)})),Object(M["a"])((function(e){var t=nv(e,1),n=t[0];return Co.success(void 0,{totalDeposit:n})})))}function mv(e,t,n,r,a){var o=nv(e,2),i=o[0],c=o[1],s=nv(t,2),u=s[0],l=s[1],p=nv(n,2),f=p[0],d=p[1],b=r.pollingInterval,y=r.minimumAllowance,h=a.log;return Object(P["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address),c.functions.effectiveBalance(l)])})).pipe(Object(W["a"])((function(e){var t=nv(e,3),n=t[0],r=t[1],a=t[2];return vt(a.add(f).eq(d),[yt.UDC_DEPOSIT_OUTDATED,{requested:d.toString(),current:a.toString()}]),zi([n,r,f],i,c.address,yt.RDN_APPROVE_TRANSACTION_FAILED,{log:h,minimumAllowance:y})})),Object(W["a"])((function(){return c.functions.deposit(l,d)})),Gi("deposit",yt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:h}),Xi(b,void 0,void 0,{log:h}))}function vv(e,t,n){Xm(t);var r=n.userDepositContract,a=n.getTokenContract,o=n.address,i=n.log,c=n.signer,s=n.main,u=n.config$,l=r.functions.token();return e.pipe(Object(B["a"])(Co.request.is),Object(Xu["a"])((function(e){return Object(P["a"])((function(){return l})).pipe(Object(Gu["a"])(u),Object(W["a"])((function(t){var n,u=nv(t,2),l=u[0],p=u[1],f=qp({signer:c,address:o,main:s},null!==(n=e.payload.subkey)&&void 0!==n?n:p.subkey),d=f.signer,b=f.address,y=Kp(a(l),d),h=Kp(r,d);return mv([y,h],[b,o],[e.payload.deposit,e.meta.totalDeposit],p,{log:i})})),Object(M["a"])((function(t){var n=nv(t,2),r=n[1];return Co.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Qt["a"])((function(t){return Object(C["a"])(Co.failure(t,e.meta))})))})))}function gv(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=nv(e,2),u=s[1],l=Ki(u),p=l.partnerUnlocked;return p.isZero()?L["a"]:Object(yu["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n=nv(e,2),r=n[0].udcBalance,a=n[1],o=a.monitoringRoom,i=a.monitoringReward,c=a.rateToSvt;return!!o&&!!(null===i||void 0===i?void 0:i.gt(k["Zero"]))&&r.gte(i)&&p.mul(null!==(t=c[u.token])&&void 0!==t?t:k["MaxUint256"]).div(k["WeiPerEther"]).gt(i)})),Object(Ku["a"])(1),Object(W["a"])((function(e){var i=nv(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,p=u.partner.balanceProof,f=ia(p),d=Object(_["concat"])([Or(u.tokenNetwork,20),Or(r.chainId,32),Or(na.BALANCE_PROOF_UPDATE,32),Or(u.id,32),Or(f,32),Or(p.nonce,32),Or(p.additionalHash,32),Or(p.signature,65)]);return Object(Zt["a"])(a.signMessage(d)).pipe(Object(W["a"])((function(e){return ba(a,{type:xn.MONITOR_REQUEST,balance_proof:{chain_id:p.chainId,token_network_address:p.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:p.nonce,balance_hash:f,additional_hash:p.additionalHash,signature:p.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return Zr({message:e},{roomName:l})})))})),Object(Qt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),L["a"]})))}}function Ov(e,t,n){return Xm(e),Xm(t),n.latest$.pipe(Object($["a"])("state"),Qi,Object(Gu["a"])(n.config$),Object(W["a"])((function(e){var t=nv(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(li["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(Em["a"])(),Object(Tm["a"])((function(e){var t=nv(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(ti["a"])(a):Object(C["a"])(1)})),Object(bi["a"])(gv(n)))})))}function wv(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Po.request.is),Object(W["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(Xu["a"])((function(e){var n=nv(e,2),s=n[0],u=n[1],l=Kp(r,i),p=s.meta.amount;return Object(P["a"])((function(){return vt(p.gt(k["Zero"]),[yt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:p.toString()}]),vt(u.sub(p).gte(k["Zero"]),[yt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:p.toString()}]),l.functions.planWithdraw(p)})).pipe(Gi("planWithdraw",yt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Xi(c.pollingInterval,void 0,void 0,{log:o}),Object(W["a"])((function(e){var n=nv(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(Ei("blockNumber"),Object(Xt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(F["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Po.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object(Qt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(C["a"])(Po.failure(e,s.meta))})))})))}function _v(e,t,n){Xm(e),Xm(t);var r=n.userDepositContract,a=n.address,o=n.config$;return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.pollingInterval;return Ai((function(){return r.functions.withdraw_plans(a)}),t)})),Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Po.success({block:n.toNumber(),confirmed:!0},{amount:t})})))}function kv(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Po.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object(W["a"])((function(e){return t.pipe(Object($["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(ci["a"])(e))})),Object(W["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(Xu["a"])((function(e){var n=nv(e,2),s=n[0],u=n[1],l=Kp(a,i);return Object(P["a"])((function(){return vt(u.gt(k["Zero"]),[yt.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(Gi("withdraw",yt.UDC_WITHDRAW_FAILED,{log:r}),Xi(c.pollingInterval,void 0,void 0,{log:r}),Object(Xu["a"])((function(e){var n=nv(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(Ei("blockNumber"),Object(Xt["a"])((function(){return l.functions.balances(o)})),Object(F["a"])((function(e){return e.lt(u)})),Object(M["a"])((function(e){return Lo({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object(Qt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(C["a"])(Po.failure(e,s.meta))})))})))}function jv(e,t,n){Xm(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(Ei("confirmationBlocks"),Object(bi["a"])((function(e){return ln(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(M["a"])(pn(a)),Object(B["a"])(St),Object(B["a"])((function(e){var t=nv(e,6),n=t[5];return n===o})),Object(Gu["a"])(t,i),Object(M["a"])((function(e){var t=nv(e,3),n=nv(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,p=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),f=s.blockNumber;if(p&&f)return Uo({tokenNetwork:r,partner:p.partner.address,id:p.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:f,confirmed:f+l<=u.blockNumber||void 0})})),Object(B["a"])(St))}function Ev(e,t,n){return e.pipe(Object(B["a"])(Wr(za,{address:n})),Object(Ku["a"])(1),Object(W["a"])((function(e){if(za.success.is(e))return t.latest$.pipe(Object(F["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function Tv(e,t,n){var r=n.state,a=n.presences,o=n.config;Sv(e,r,a);var i=e.meta,c=i.tokenNetwork,s=i.target,u=i.value;if(e.payload.paths)return Object(C["a"])({paths:e.payload.paths,iou:void 0});if(!0===Mm(r,a,c,s,s,u))return Object(C["a"])({paths:[{path:[t.address,e.meta.target],fee:k["Zero"]}],iou:void 0});if(Av(e,o))throw new mt(yt.PFS_DISABLED);return Nv(e,t)}function xv(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Zt["a"])(b.a.mark((function s(){var u;return b.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!Lv(n)){s.next=6;break}return s.next=4,Do({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,Ro(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!Mv(c)){s.next=13;break}throw new mt(yt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new mt(yt.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=Dv(e,t,r,i),!u.length){s.next=20;break}return s.next=18,Ao.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new mt(yt.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function Sv(e,t,n){var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value;vt(Object.values(t.tokens).includes(a),[yt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:a}]),vt(n[o].payload.available,[yt.PFS_TARGET_OFFLINE,{target:o}]),vt(Lu(n[o].payload.caps,Pe.RECEIVE),[yt.PFS_TARGET_NO_RECEIVE,{target:o}]),vt(Object.values(t.channels).some((function(e){return!0===Mm(t,n,a,e.partner.address,o,i)})),yt.PFS_NO_ROUTES_BETWEEN_NODES)}function Av(e,t){var n=t.pfs,r=null===e.payload.pfs,a=!e.payload.pfs&&null===n;return r||a}function Nv(e,t){var n=e.meta,r=n.tokenNetwork,a=n.target,o=n.value;return t.config$.pipe(Object(F["a"])(),Object(W["a"])((function(n){return Rv(e.payload.pfs,n.pfs,t).pipe(Object(W["a"])((function(e){return Cv(e,r,t)})),Object(W["a"])((function(e){var i=e.pfs,c=e.iou;return Iv(i,c,r,t.address,a,o,n)})),Object(M["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return Pv(t,r,a,n)})))})))}function Dv(e,t,n,r){var a=t.address,o=t.log,i=n.state,c=n.presences,s=[],u=new Set;if(r){var l,p=qm(r);try{for(p.s();!(l=p.n()).done;){var f=l.value,d=f.path,b=f.fee,y=Uv(d,a),h=y[0],m=!1,v="";if(!u.has(h)){if(0===s.length){var g=e.meta,O=g.tokenNetwork,w=g.target,_=g.value,k=Mm(i,c,O,h,w,_);m=!0===k,v="string"===typeof k?k:""}else h!==s[0].path[0]?v="path: already selected another recipient":b.gt(s[0].fee)?v="path: already selected a smaller fee":m=!0;m?s.push({path:y,fee:b}):(o.warn("Invalidated received route. Reason:",v,"Route:",y),u.add(h))}}}catch(j){p.e(j)}finally{p.f()}}return s}function Rv(e,t,n){if(e)return Object(C["a"])(e);if(t)return Fm(t,n);var r=n.log,a=n.latest$;return a.pipe(Object($["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object(W["a"])((function(e){return Wm(e,n)})),Object(ri["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object($["a"])(0))}function Cv(e,t,n){return e.price.isZero()?Object(C["a"])({pfs:e,iou:void 0}):pv(e,t,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))}function Iv(e,t,n,r,a,o,i){var c=i.httpTimeout,s=i.pfsMaxPaths,u=kr({from:r,to:a,value:Rt(32).encode(o),max_paths:s,iou:t?zm(zm({},t),{},{amount:Rt(32).encode(t.amount),expiration_block:Rt(32).encode(t.expiration_block),chain_id:Rt(32).encode(t.chain_id)}):void 0});return Object(Hf["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:u}).pipe(Object(Wf["a"])(c),Object(W["a"])(function(){var e=tv(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.text();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",{pfsResponse:e.t0,responseText:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function Pv(e,t,n,r){var a=r.pfsSafetyMargin,o=r.pfsMaxPaths,i=_r(t);if(e.ok){var c=xt(no,i).result.filter((function(e,t){return t<o})),s=c.map((function(e){var t=e.path,n=e.estimated_fee,r=n.mul(Math.round(1e6*a)).div(1e6);return{path:t,fee:r}}));return{paths:s,iou:n}}var u=xt(sv,i);return{iou:n,error:u}}function Lv(e){var t=e.paths,n=e.error;return void 0!==t||Mv(n)}function Uv(e,t){return e[0]===t?e.slice(1):e}function Mv(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){Wv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $v(e,t){return Gv(e)||Kv(e,t)||Vv(e,t)||Hv()}function Hv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vv(e,t){if(e){if("string"===typeof e)return qv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qv(e,t):void 0}}function qv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gv(e){if(Array.isArray(e))return e}function Zv(e,t,n){var r=t.pipe(Ei("config"));return Object(yu["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=$v(t,2),a=r[0],o=r[1],i=Fv(Fv({},e),a);return null!==i.caps&&(i.caps=Fv(Fv(Wv({},Pe.RECEIVE,(null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o)?1:0),e.caps),a.caps)),i})),Object(li["a"])(wu.a))}function Yv(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(B["a"])(Co.success.is),Object($["a"])("meta","totalDeposit"),Object(mu["a"])(k["MaxUint256"])),c=Zv(r,t,i),s=Ru(e),u=e.pipe(Object(B["a"])(No.is),Object($["a"])("payload","pfsList"),Object(mu["a"])([])),l=e.pipe(Object(B["a"])(to.is),Object(pi["a"])((function(e,t){return t.payload?Fv(Fv({},e),{},Wv({},t.meta.address,t.payload)):Sa()(t.meta.address,e)}),{}),Object(mu["a"])({}));return Object(hu["a"])((function(){var e=c.pipe(Ei("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(Ei("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(yu["a"])([Object(yu["a"])([e,t,c,s,u,l]),Object(yu["a"])([i])]).pipe(Object(M["a"])((function(e){var t=$v(e,2),n=$v(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=$v(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var Xv=Fv(Fv(Fv(Fv(Fv({},s),u),l),p),f);function Qv(e,t,n){var r=e.pipe(Object(B["a"])(Ur(Wo))),a=e.pipe(Object(di["a"])(gu()(Ur(Wo)),!0)),o=t.pipe(Object(ii["a"])(r));return Object(hu["a"])((function(){return Yv(a,o,n).subscribe(n.latest$)}),(function(){return Object(Zt["a"])(Object.values(Xv)).pipe(Object(W["a"])((function(e){return e(a,o,n).pipe(Object(Qt["a"])((function(t){return n.log.error("Epic error",e.name,e,t),Object(ni["a"])(t)})))})),Object(Qt["a"])((function(e){return Object(C["a"])(Wo({reason:e}))})),Object(ii["a"])(r))}))}function zv(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ag(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Jv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jv(Object(n),!0).forEach((function(t){tg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ng(e,t){return cg(e)||ig(e,t)||ag(e,t)||rg()}function rg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ag(e,t){if(e){if("string"===typeof e)return og(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?og(e,t):void 0}}function og(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ig(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cg(e){if(Array.isArray(e))return e}function sg(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ug(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){sg(o,r,a,i,c,"next",e)}function c(e){sg(o,r,a,i,c,"throw",e)}i(void 0)}))}}function lg(e){var t=e.constructor.__defaults.log,n={},r=function(){var t=ug(b.a.mark((function t(){var r;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=b.a.mark((function t(){var r,a,o,i,c,s,u,l;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,n={},a=Object.keys(r),t.next=5,e.allDocs({keys:a});case 5:return o=t.sent,i=function(e){var t=o.rows.find((function(t){return t.id===e}));return(null===t||void 0===t?void 0:t.value.deleted)?{_rev:t.value.rev,deleted:!1}:t&&!("error"in t)?{_rev:t.value.rev}:void 0},t.next=9,e.bulkDocs(Object.entries(r).map((function(e){var t=ng(e,2),n=t[0],r=t[1];return eg(eg({},r),{},{_id:n},i(n))})));case 9:c=t.sent,s=zv(c);try{for(s.s();!(u=s.n()).done;)l=u.value,"error"in l&&l.error&&l.id&&!(l.id in n)&&(n[l.id]=r[l.id])}catch(p){s.e(p)}finally{s.f()}case 12:case"end":return t.stop()}}),t)}));case 1:if(el()(n)){t.next=5;break}return t.delegateYield(r(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(a){return function(o){return function(i){var c=a.getState(),s=o(i),u=a.getState();if(u===c)return s;for(var l in u){var p=l;if(u[p]!==c[p])if("channels"===p||"oldChannels"===p){for(var f in u[p])if(u[p][f]!==c[p][f]){var d="channels.".concat(u[p][f]._id);e.storageKeys.add(d),n[d]=u[p][f]}}else if("transfers"===p){for(var b in u.transfers)u.transfers[b]!==c.transfers[b]&&(e.storageKeys.add(b),n[b]=u.transfers[b]);for(var y in c.transfers)y in u.transfers||(n[y]=eg(eg({},c.transfers[y]),{},{cleared:Date.now()}))}else{var h="state.".concat(p);e.storageKeys.add(h),n[h]={value:u[p]}}}return e.busy$.value||(e.busy$.next(!0),r().catch((function(e){return null===t||void 0===t?void 0:t.warn("Persister saveDatabase error",e)})).finally((function(){return e.busy$.next(!1)}))),s}}}}function pg(e){return bg(e)||dg(e)||Og(e)||fg()}function fg(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dg(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function bg(e){if(Array.isArray(e))return wg(e)}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(n),!0).forEach((function(t){mg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vg(e,t){return kg(e)||_g(e,t)||Og(e,t)||gg()}function gg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Og(e,t){if(e){if("string"===typeof e)return wg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wg(e,t):void 0}}function wg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _g(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kg(e){if(Array.isArray(e))return e}function jg(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Eg(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){jg(o,r,a,i,c,"next",e)}function c(e){jg(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Tg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sg(e,t,n){return t&&xg(e.prototype,t),n&&xg(e,n),e}var Ag=function(){function e(t,n,r,a,o,i){var c,s,u,l,p,f=this,d=o.db,y=o.state,m=o.config;Tg(this,e);var v=y.address;this.resolveName=t.resolveName.bind(t),this.log=h.a.getLogger("raiden:".concat(v));var g=Tn({network:n},m&&xt(En,m));t.resetEventsBlock(y.blockNumber+1);var O=new D["a"](1);this.state$=O.pipe(Ei("state")),this.action$=O.pipe(Ei("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(Ei("channels"),Object(M["a"])(Vp)),this.transfers$=Hp(this.state$,d),this.events$=this.action$.pipe(Object(B["a"])(Ur(Vo))),this.getTokenInfo=N()(function(){var e=Eg(b.a.mark((function e(t){var n,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.deps.getTokenContract(t),e.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=e.sent,a=vg(r,4),o=a[0],i=a[1],c=a[2],s=a[3],vt(o&&null!=i,yt.RDN_NOT_A_TOKEN,this.log.info),e.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),this.deps={latest$:O,config$:O.pipe(Ei("config")),matrix$:new R["a"],provider:t,network:n,signer:r,address:v,log:this.log,defaultConfig:g,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(c=null===i||void 0===i?void 0:i.signer)&&void 0!==c?c:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(s=null===i||void 0===i?void 0:i.signer)&&void 0!==s?s:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(u=null===i||void 0===i?void 0:i.signer)&&void 0!==u?u:r),secretRegistryContract:ke.connect(a.SecretRegistry.address,null!==(l=null===i||void 0===i?void 0:i.signer)&&void 0!==l?l:r),monitoringServiceContract:Ne.connect(a.MonitoringService.address,null!==(p=null===i||void 0===i?void 0:i.signer)&&void 0!==p?p:r),main:i,db:d},this.userDepositTokenAddress=N()(Eg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var w=Object(T["createLogger"])({predicate:function(){return f.log.getLevel()<=h.a.levels.INFO},logger:this.log,level:{prevState:!1,action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return f.config=e})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps});var _=lg(d);this.store=Object(j["b"])(bu,y,Object(j["a"])(w,_,this.epicMiddleware)),Yv(Object(C["a"])($o({})),Object(C["a"])(this.store.getState()),this.deps).subscribe((function(e){return f.deps.latest$.next(e)}))}return Sg(e,[{key:"start",value:function(){var t=this;vt(this.epicMiddleware,yt.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:{name:this.deps.network.name,chainId:this.deps.network.chainId},"raiden-ts":e.version,"raiden-contracts":e.contractVersion,config:this.config});var n={complete:function(){return t.epicMiddleware=null}};this.deps.latest$.subscribe(n),this.epicMiddleware.run(Qv),this.epicMiddleware=void 0,this.store.dispatch($o({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch(Wo({reason:Ie.STOP}))}},{key:"getBlockNumber",value:function(){var e=Eg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfig",value:function(e){this.store.dispatch($o(xt(En,e)))}},{key:"dumpDatabase",value:function(){var e=Eg(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===this.started){e.next=3;break}return e.next=3,this.deps.db.busy$.toPromise();case 3:return e.abrupt("return",gp(this.deps.db));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:qp(this.deps,this.config.subkey).address,vt(Mt.is(e),[yt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(){var e=Eg(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null!==n&&void 0!==n?n:qp(this.deps,this.config.subkey).address,vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{address:n}],this.log.info),vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),r=this.deps.getTokenContract(t),e.abrupt("return",r.functions.balanceOf(n));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTokenList",value:function(){var e=Eg(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(hg(hg({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{},{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Eg(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.state.tokens[t],!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.deps.registryContract.token_to_token_networks(t);case 6:return n=e.sent,vt(n&&n!==k["AddressZero"],yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Wa({token:t,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=d.length>3?d[3]:void 0,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),e.next=6,this.monitorToken(t);case 6:return o=e.sent,vt(!r.subkey||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),i=r.settleTimeout?xt(Rt(4),r.settleTimeout,yt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=r.deposit?xt(Rt(32),r.deposit,yt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:n},u=Hr($a,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),(null===c||void 0===c?void 0:c.gt(0))&&(l=Hr(Va,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch($a.request(hg(hg({},r),{},{settleTimeout:i,deposit:c}),s)),e.next=16,u;case 16:return p=e.sent,null===a||void 0===a||a({type:Se.OPENED,payload:{txHash:p}}),e.next=20,this.state$.pipe(Ei("channels",Vi({tokenNetwork:o,partner:n}),"state"),Object(F["a"])((function(e){return e===ra.open}))).toPromise();case 20:if(null===a||void 0===a||a({type:Se.CONFIRMED,payload:{txHash:p}}),!l){e.next=26;break}return e.next=24,l;case 24:f=e.sent,null===a||void 0===a||a({type:Se.DEPOSITED,payload:{txHash:f}});case 26:return e.abrupt("return",p);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositChannel",value:function(){var e=Eg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:{},o=a.subkey,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),i=this.state,c=i.tokens[t],vt(c,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),vt(!o||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),s=xt(Rt(32),r,yt.DTA_INVALID_DEPOSIT,this.log.info),u={tokenNetwork:c,partner:n},l=Hr(Va,u,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Va.request({deposit:s,subkey:o},u)),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],vt(i,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),vt(!a||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Hr(Ka,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ka.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],vt(i,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),vt(!a||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Hr(Za,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Za.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Eg(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),n={address:t},r=Hr(za,n,this.action$),this.store.dispatch(za.request(void 0,n)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Eg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d,y=this,h=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],vt(o,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=xt(Rt(32),r,yt.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==a.paymentId?xt(Rt(8),a.paymentId,yt.DTA_INVALID_PAYMENT_ID,this.log.info):ps(),s=a.paths?xt(ro,a.paths,yt.DTA_INVALID_PATH,this.log.info):void 0,u=a.pfs?xt(ao,a.pfs,yt.DTA_INVALID_PFS,this.log.info):void 0,l=a.lockTimeout?this.state.blockNumber+a.lockTimeout:void 0,vt(void 0===a.secret||Pt.is(a.secret),yt.RDN_INVALID_SECRET,this.log.info),vt(void 0===a.secrethash||It.is(a.secrethash),yt.RDN_INVALID_SECRETHASH,this.log.info),p=a.secret?a.secret:a.secrethash?void 0:ls(),f=a.secrethash||us(p),vt(!p||us(p)===f,yt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),d={tokenNetwork:o,target:n,value:i},e.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Wr(Ao,d)),Object(M["a"])((function(e){if(Ao.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return y.store.dispatch(Ao.request({paths:s,pfs:u},d)),L["a"]}))).pipe(Object(W["a"])((function(e){return Object(I["a"])(y.action$.pipe(Object(B["a"])(Ur([uo,so.failure])),Object(F["a"])((function(e){return e.meta.direction===ka.SENT&&e.meta.secrethash===f})),Object(M["a"])((function(e){if(so.failure.is(e))throw e.payload;return ds(e.meta)}))),Object(P["a"])((function(){return y.store.dispatch(so.request({tokenNetwork:o,target:n,value:i,paths:e,paymentId:c,secret:p,expiration:l},{secrethash:f,direction:ka.SENT})),L["a"]})))}))).toPromise());case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"waitTransfer",value:function(){var e=Eg(b.a.mark((function e(t){var n,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=ys(t),a=r.direction,o=r.secrethash,i=this.state.transfers[t],i){e.next=14;break}return e.prev=3,e.t0=xt,e.t1=Ta,e.next=8,this.deps.db.get(t);case 8:e.t2=e.sent,i=(0,e.t0)(e.t1,e.t2),e.next=14;break;case 12:e.prev=12,e.t3=e["catch"](3);case 14:if(vt(i,yt.RDN_UNKNOWN_TRANSFER,this.log.info),c=ws(i),!c.completed){e.next=22;break}if(!c.success){e.next=21;break}return e.abrupt("return",c);case 21:throw new mt(yt.XFER_ALREADY_COMPLETED,{status:c.status});case 22:return e.next=24,Hr(so,{secrethash:o,direction:a},this.action$);case 24:return e.next=26,this.state$.pipe(Object($["a"])("transfers",t),Object(F["a"])((function(e){return!!e.unlockProcessed}))).toPromise();case 26:return s=e.sent,this.log.info("Transfer successful",{key:t,partner:s.partner,initiator:s.transfer.initiator,target:s.transfer.target,fee:s.fee.toString(),lockAmount:s.transfer.lock.amount.toString(),targetReceived:null===(n=s.secretRequest)||void 0===n?void 0:n.amount.toString(),transferTime:s.unlockProcessed.ts-s.transfer.ts}),e.abrupt("return",ws(s));case 29:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Eg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],vt(o,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=xt(Rt(32),r),c=a.pfs?xt(ao,a.pfs):void 0,s={tokenNetwork:o,target:n,value:i},u=Hr(Ao,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Ao.request({pfs:c},s)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Eg(b.a.mark((function e(t,n,r){var a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),a=this.state.tokens[t],vt(a,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=xt(Rt(32),r),i={tokenNetwork:a,target:n,value:o},c=Hr(Ao,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Ao.request({pfs:null},i)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"findPFS",value:function(){var e=Eg(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vt(null!==this.config.pfs,yt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(C["a"])([this.config.pfs]):this.deps.latest$.pipe(Ei("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object(W["a"])((function(e){return Wm(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=r.subkey,o=r.to,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(!a||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),vt(1!==this.deps.network.chainId,yt.RDN_MINT_MAINNET,this.log.info),i=qp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,u=de.connect(t,c),l=null!==o&&void 0!==o?o:s,vt(Mt.is(l),[yt.DTA_INVALID_ADDRESS,{beneficiary:l}],this.log.info),p=xt(Rt(32),n,yt.DTA_INVALID_AMOUNT),e.next=11,Gp(u,"mintFor",[p,l],yt.RDN_MINT_FAILED,{log:this.log});case 11:return f=e.sent,e.next=14,Yp(f,this.deps,1);case 14:return e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Eg(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ef(this.deps.latest$);case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(pg(e),pg(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},a=r.subkey,vt(!a||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),o=xt(Rt(32),t,yt.DTA_INVALID_DEPOSIT,this.log.info),vt(o.gt(k["Zero"]),yt.DTA_NON_POSITIVE_NUMBER,this.log.info),e.next=6,ef(this.deps.latest$);case 6:return i=e.sent,c={totalDeposit:i.add(o)},s=Hr(Co,c,this.action$).then((function(e){return null===e||void 0===e?void 0:e.txHash})),this.store.dispatch(Co.request({deposit:o,subkey:a},c)),e.next=12,s;case 12:return u=e.sent,null===n||void 0===n||n({type:Se.DEPOSITED,payload:{txHash:u}}),l=Hr(Co,c,this.action$,!0).then((function(e){return e.txHash})),e.next=17,l;case 17:return u=e.sent,null===n||void 0===n||n({type:Se.CONFIRMED,payload:{txHash:u}}),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transferOnchainBalance",value:function(){var e=Eg(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:k["MaxUint256"],r=m.length>2&&void 0!==m[2]?m[2]:{},a=r.subkey,o=r.gasPrice,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),vt(!a||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),i=qp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,!o){e.next=9;break}e.t0=Object(_["bigNumberify"])(o),e.next=12;break;case 9:return e.next=11,this.deps.provider.getGasPrice();case 11:e.t0=e.sent;case 12:return u=e.t0,l=Object(_["bigNumberify"])(21e3),e.next=16,this.getBalance(s);case 16:return p=e.sent,f=p.sub(u.mul(l)),vt(f.gt(k["Zero"]),[yt.RDN_INSUFFICIENT_BALANCE,{transferable:f.toString()}],this.log.info),d=f.lte(n)?f:Object(_["bigNumberify"])(n),e.next=22,c.sendTransaction({to:t,value:d,gasPrice:u,gasLimit:l});case 22:return y=e.sent,e.next=25,y.wait();case 25:return h=e.sent,vt(h.status,yt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),e.abrupt("return",y.hash);case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnchainTokens",value:function(){var e=Eg(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:k["MaxUint256"],a=d.length>3&&void 0!==d[3]?d[3]:{},o=a.subkey,vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{to:n}],this.log.info),vt(!o||this.deps.main,yt.RDN_SUBKEY_NOT_SET,this.log.info),i=qp(this.deps,null!==o&&void 0!==o?o:this.config.subkey),c=i.signer,s=i.address,u=Kp(this.deps.getTokenContract(t),c),e.next=9,this.getTokenBalance(t,s);case 9:return l=e.sent,p=l.lte(r)?l:Object(_["bigNumberify"])(r),e.next=13,Gp(u,"transfer",[n,p],yt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 13:return f=e.sent,e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Eg(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={amount:xt(Rt(32),t,yt.DTA_INVALID_AMOUNT,this.log.error)},r=Hr(Po,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Po.request(void 0,n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"withdrawChannel",value:function(){var e=Eg(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return vt(Mt.is(t),[yt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),vt(Mt.is(n),[yt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),a=this.state.tokens[t],vt(a,yt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[Vi({tokenNetwork:a,partner:n})],vt((null===o||void 0===o?void 0:o.state)===ra.open,yt.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Ki(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=xt(Rt(32),null!==r&&void 0!==r?r:c,yt.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),p=this.state.blockNumber+2*this.config.revealTimeout,f={direction:ka.SENT,tokenNetwork:a,partner:n,totalWithdraw:l,expiration:p},d=Hr(ko,f,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(ko.request(void 0,f)),e.abrupt("return",d);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(){var e=Eg(b.a.mark((function e(t,n,r,a,o,i){var c,s,u,l,p,f,d,y,m,v;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="string"===typeof t?new w["JsonRpcProvider"](t):t instanceof w["JsonRpcProvider"]?t:new w["Web3Provider"](t),bn(c),e.next=4,c.getNetwork();case 4:if(s=e.sent,a){e.next=9;break}u=Bp(s),e.next=17;break;case 9:if("string"!==typeof a){e.next=16;break}return vt(Mt.is(a),[yt.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:a}]),e.next=13,zp(c,a);case 13:u=e.sent,e.next=17;break;case 16:u=a;case 17:return e.next=19,$p(n,c,i);case 19:return l=e.sent,p=l.signer,f=l.address,d=l.main,e.next=25,rf({network:s,contractsInfo:u,address:f,log:h.a.getLogger("raiden:".concat(f))},r);case 25:return y=e.sent,m=y.state,v=y.db,vt(f===m.address,[yt.RDN_STATE_ADDRESS_MISMATCH,{account:f,state:m.address}]),vt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[yt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),e.abrupt("return",new this(c,s,p,u,{db:v,state:m,config:o},d));case 31:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"version",get:function(){return Re.sdk}},{key:"contractVersion",get:function(){return Re.contracts}}]),e}()},f673:function(e,t,n){"use strict";var r=n("c55c"),a=n.n(r);a.a},f77a:function(e,t,n){}});
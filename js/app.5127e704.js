(function(e){function t(t){for(var a,r,c=t[0],s=t[1],u=t[2],p=0,l=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2a5b2f9c":"dcfaaf80","chunk-016a9c39":"bbd5383b","chunk-10ff31b6":"b936da40","chunk-14d17f51":"e2a236d0","chunk-15c53508":"895dfc44","chunk-d73914b8":"6de7c56e","chunk-eb37963c":"75b2e86e"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2a5b2f9c":1,"chunk-016a9c39":1,"chunk-10ff31b6":1,"chunk-14d17f51":1,"chunk-15c53508":1,"chunk-d73914b8":1,"chunk-eb37963c":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2a5b2f9c":"91aeee02","chunk-016a9c39":"5c4534eb","chunk-10ff31b6":"b4487b1e","chunk-14d17f51":"d154f1bd","chunk-15c53508":"4d3f2534","chunk-d73914b8":"88d11361","chunk-eb37963c":"d50b715f"}[e]+".css",o=s.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===a||p===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],p=u.getAttribute("data-href");if(p===a||p===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],d.parentNode.removeChild(d),n(i)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.src=c(e);var l=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=p;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09ca":function(e,t,n){},"0b85":function(e,t,n){},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("2b0e"),r=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a7"),s=n.n(c);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var d=function(){function e(){u(this,e)}return l(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var a=Math.floor(t/2);return e.substr(0,a)+n+e.substr(e.length-a)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(e,t){var n=r["a"].toUnits(e,t),a=parseFloat(n);if(0===a)return"0.0";if(a<1e-5)return"<0.00001";var o=i()(n,".");return o[1]&&o[1].length>5?n.substr(0,n.indexOf(".")+6):n}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();a["a"].filter("truncate",d.truncate),a["a"].filter("decimals",d.decimals),a["a"].filter("upper",d.upper),a["a"].filter("displayFormat",d.displayFormat),a["a"].filter("capitalizeFirst",d.capitalizeFirst)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a","transaction_hash":"0x2321d67b966e82f7a054abfd45a0cbd47bd14736add98b18e0143d91c5447b8b","block_number":5152486,"gas_cost":2525133,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x99360d569d56Eca65d59527771F21BdfA43fEAb0","transaction_hash":"0x84adae24bb476bfa3c5a37a8a34370282d71f323aaecdd283faa1d067ce03c2b","block_number":5152487,"gas_cost":1898944,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383",1.157920892373162e+77]},"MonitoringService":{"address":"0x402B6956de78584AAd190584Bb52Ce7b39AF2F53","transaction_hash":"0xbef5bff2b380220c194795ceec9e0b6d79f7605946b8cf962c93bf6d379f4292","block_number":5152488,"gas_cost":2507553,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383","0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a","0x99360d569d56Eca65d59527771F21BdfA43fEAb0","0x07147fE01573D88B4a8D60f94877d7b47f06e7EC"]},"OneToN":{"address":"0x2293b064c07aB4AB805b4FFD67278AAe6dEDb4cE","transaction_hash":"0xb19b6c56fa4348e19339bb05583c37c664481b235f877a4607623bd400695dc5","block_number":5152489,"gas_cost":1364293,"constructor_arguments":["0x99360d569d56Eca65d59527771F21BdfA43fEAb0",4,"0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var a=n("9ab4"),r=n("60a3"),o=n("5a48");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}var m=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return f(t,e),u(t,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME})}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e){this.$router.push({name:o["a"].TRANSFER,params:{token:e}})}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),t}(r["e"]);m=a["a"]([r["a"]],m),t["a"]=m},"1e23":function(e,t,n){},2:function(e,t){},"2e1f":function(e,t,n){e.exports=n.p+"img/done.24f4e34a.svg"},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0xfC83B78195A99Ee782fABCFF9d259764640cEc7E","transaction_hash":"0xf79919c727a4ad270548d7b0a3dcb5f4b6f391097528adfe5ec4cbfd1cda4faa","block_number":4667704,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x07147fE01573D88B4a8D60f94877d7b47f06e7EC","transaction_hash":"0xeafb4216cf9958eec50747a5d6aaa98e825060673f85903b1edf18e03a8c118e","block_number":5152481,"gas_cost":5030881,"constructor_arguments":["0xfC83B78195A99Ee782fABCFF9d259764640cEc7E",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},4787:function(e,t,n){},"49f8":function(e,t,n){var a={"./en.json":"edd4"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x7a8aA60bc95697e767367f63f386cd94cC8db5dA","transaction_hash":"0xc1b554e807309930ba36d306f6e4f6972a6d36cc63cbce4284a4d4000b75e6ae","block_number":1360431,"gas_cost":2525197,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x39ff19161414E257AA29461dCD087F6a1AE362Fd","transaction_hash":"0xd53e32349bdd05a7669a1c82d0aefbd243e9ce0f198b744679f4ffd6cd583207","block_number":1360433,"gas_cost":1899008,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77",1.157920892373162e+77]},"MonitoringService":{"address":"0xdA8953b43044D1FdceF1a4609D1c663052B45F0f","transaction_hash":"0x74628c0c32a27c4346923a424c9934c487c21190d4162c8b58a71d5e7b64abe7","block_number":1360434,"gas_cost":2507617,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77","0x7a8aA60bc95697e767367f63f386cd94cC8db5dA","0x39ff19161414E257AA29461dCD087F6a1AE362Fd","0x754b1Fa6bcb43F09557Eb5A212513F40A263DAF8"]},"OneToN":{"address":"0x3d26600Ded4a0A2576998381e3c9d3a9ad7434b3","transaction_hash":"0x31fd539559a1ffdb7591509d09471b8cbf8ab41e90737c0eed2f6849e5289785","block_number":1360435,"gas_cost":1364293,"constructor_arguments":["0x39ff19161414E257AA29461dCD087F6a1AE362Fd",5,"0x7a8aA60bc95697e767367f63f386cd94cC8db5dA"]}}}')},"5a48":function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e["TRANSFER"]="transfer",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel"}(a||(a={}))},"5c11":function(e,t,n){"use strict";var a=n("4787"),r=n.n(a);r.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"10"}},[n("v-btn",{staticClass:"text-capitalize action-button__button",attrs:{disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v("\n      "+e._s(e.text)+"\n    ")])],1)],1)},r=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var h=function(e){function t(){return s(this,t),l(this,f(t).apply(this,arguments))}return b(t,e),p(t,[{key:"click",value:function(){}}]),t}(i["e"]);o["a"]([Object(i["d"])({required:!0,type:Boolean})],h.prototype,"enabled",void 0),o["a"]([Object(i["d"])({required:!0})],h.prototype,"text",void 0),o["a"]([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"loading",void 0),o["a"]([Object(i["b"])()],h.prototype,"click",null),h=o["a"]([Object(i["a"])({})],h);var y=h,O=y,j=(n("84f9"),n("2877")),v=n("6544"),_=n.n(v),k=n("8336"),g=n("62ad"),w=n("0fd9"),E=Object(j["a"])(O,a,r,!1,null,"f9550b38",null);t["a"]=E.exports;_()(E,{VBtn:k["a"],VCol:g["a"],VRow:w["a"]})},"77fd":function(e,t,n){"use strict";var a=n("9ab4"),r=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var b=function(e){function t(){return i(this,t),u(this,l(t).apply(this,arguments))}return d(t,e),s(t,[{key:"$blockie",value:function(e){return this.$identicon.getIdenticon(e)}}]),t}(r["e"]);b=a["a"]([r["a"]],b),t["a"]=b},"84f9":function(e,t,n){"use strict";var a=n("09ca"),r=n.n(a);r.a},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var a,r=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED"})(a||(a={}))},"8be4":function(e,t,n){"use strict";var a=n("baab"),r=n.n(a);r.a},"8ecd":function(e,t,n){"use strict";var a=n("b5a6"),r=n.n(a);r.a},"8ffa":function(e,t,n){"use strict";var a=n("9c6f"),r=n.n(a);r.a},"90a8":function(e,t,n){"use strict";var a=n("1e23"),r=n.n(a);r.a},"927e":function(e,t,n){e.exports=n.p+"img/copy_icon.80d12304.svg"},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},"9c6f":function(e,t,n){},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xA39faF9464b4E5668154003464e3a40ab9a83cB8","transaction_hash":"0x948201d71da1c344ff722257e2153eafa2f7a55c1dd2afc72fbf61271d8bfa3f","block_number":5914539,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x522c6a70c9346D8146c1378184f448571c608559","transaction_hash":"0x9cd6b4feb85c24bc887a84296476952e57982be6de6f5fca474bc3d6b30097ad","block_number":6457381,"gas_cost":5030817,"constructor_arguments":["0xA39faF9464b4E5668154003464e3a40ab9a83cB8",3,20,555428,1.157920892373162e+77]}}}')},a1ab:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.display?a("div",{staticClass:"stepper"},[a("div",{staticClass:"stepper__card"},[a("div",{staticClass:"stepper__card__steps"},[e._l(e.steps,(function(t,n){return a("div",{key:n,staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.current===n&&!e.done}},[a("span",{staticClass:"stepper__card__steps__step__label"},[e._v("\n          "+e._s(t.label)+"\n        ")])])})),a("div",{staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.done}},[e._v("\n        "+e._s(e.doneStep.label)+"\n      ")])],2),a("div",{staticClass:"stepper__card__content"},[a("div",{staticClass:"stepper__card__content__title"},[e.done?a("span",[e._v("\n          "+e._s(e.doneStep.title)+"\n        ")]):a("span",[e._v(e._s(e.steps[e.current].title))])]),e.done?a("div",[a("v-img",{staticClass:"stepper__card__content--done",attrs:{src:n("2e1f")}})],1):a("v-progress-circular",{staticClass:"stepper__card__content--progress",attrs:{size:110,width:7,indeterminate:""}}),a("p",{staticClass:"stepper__card__content__description"},[e.done?a("span",[e._v("\n          "+e._s(e.doneStep.description)+"\n        ")]):a("span",[e._v("\n          "+e._s(e.steps[e.current].description)+"\n        ")])])],1)])]):e._e()},r=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var b=function(e){function t(){return s(this,t),u(this,l(t).apply(this,arguments))}return d(t,e),t}(i["e"]);o["a"]([Object(i["d"])({required:!0})],b.prototype,"display",void 0),o["a"]([Object(i["d"])({required:!1,default:0})],b.prototype,"current",void 0),o["a"]([Object(i["d"])({required:!0})],b.prototype,"steps",void 0),o["a"]([Object(i["d"])({required:!0})],b.prototype,"doneStep",void 0),o["a"]([Object(i["d"])({})],b.prototype,"done",void 0),b=o["a"]([Object(i["a"])({})],b);var m=b,h=m,y=(n("8ffa"),n("2877")),O=n("6544"),j=n.n(O),v=n("adda"),_=n("490a"),k=Object(y["a"])(h,a,r,!1,null,"30108802",null);t["a"]=k.exports;j()(k,{VImg:v["a"],VProgressCircular:_["a"]})},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("6934");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){r(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(a["formatEther"])(e)}},{key:"toUnits",value:function(e,t){return Object(a["formatUnits"])(e,t)}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(a["parseUnits"])(e,t)}}]),e}()},b358:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4","transaction_hash":"0x1b891535e2fcd929bc3b5df5a16c80bf1dff670fb649ebba1840c14217481303","block_number":6457392,"gas_cost":2525197,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x160eeF30E8c3C18e3A91FaEF3962B6B316720916","transaction_hash":"0xc4a754955a2e7093efc9aa25a46bbf21180d4352a492c6ece7697667cab03d06","block_number":6457395,"gas_cost":1899008,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10",1.157920892373162e+77]},"MonitoringService":{"address":"0xa312893DA25C72c27313AC4d82C24f65c2d81981","transaction_hash":"0xd6a541da68d63239fbd48a33818f8484fc3f58b555287c90d47fe4e927b291df","block_number":6457397,"gas_cost":2507553,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10","0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4","0x160eeF30E8c3C18e3A91FaEF3962B6B316720916","0x522c6a70c9346D8146c1378184f448571c608559"]},"OneToN":{"address":"0x6F7bC802dAA92B8e3612823f4cAf2e54b829E10C","transaction_hash":"0x8c2eeff2b2f900670391ba60ba0bc0f64bfe7ef871242970e4b614bc9d5b5fc9","block_number":6457400,"gas_cost":1364229,"constructor_arguments":["0x160eeF30E8c3C18e3A91FaEF3962B6B316720916",3,"0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4"]}}}')},b5a6:function(e,t,n){},baab:function(e,t,n){},bcd1:function(e,t,n){"use strict";var a=n("b358"),r=n.n(a);r.a},c60f:function(e,t,n){"use strict";var a=n("0b85"),r=n.n(a);r.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xF6d610f7c8473a0F0c8c1653AF28A68C69860288","transaction_hash":"0x9e4d32a73673f046e731580c2a6aaafc28a9ca0aaecee689fb61e28754abcb82","block_number":875035,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x754b1Fa6bcb43F09557Eb5A212513F40A263DAF8","transaction_hash":"0xe91593170a4b67983cba9edc2933db8dd3a04e1d3c145ef8b3713ab6450caddc","block_number":1360415,"gas_cost":5030881,"constructor_arguments":["0xF6d610f7c8473a0F0c8c1653AF28A68C69860288",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2be"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f5766"),n("ed50"),n("788df"),n("14b96"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[e.inaccessible?n("splash-screen",{attrs:{connecting:e.connecting},on:{connect:function(t){return e.connect()}}}):n("div",{attrs:{id:"application-wrapper"}},[n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)]),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v("\n      "+e._s(e.$t("application.privacy-policy"))+"\n    ")])])],1)},o=[],i=n("a34a"),c=n.n(i),s=n("9ab4"),u=n("60a3"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"splash-screen fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"4",lg:"4",md:"6",sm:"8"}},[a("div",{staticClass:"splash-screen__wrapper display-3"},[a("div",{staticClass:"splash-screen__logo-container"},[a("v-img",{staticClass:"splash-screen__logo",attrs:{src:n("9b19"),"min-width":"50px","aspect-ratio":"1",contain:""}})],1),a("div",{staticClass:"splash-screen__app-name"},[a("div",[e._v("\n            "+e._s(e.name)+"\n          ")])])]),a("div",{staticClass:"font-weight-light text-center splash-screen__disclaimer"},[e._v("\n        "+e._s(e.$t("splash-screen.disclaimer"))+"\n      ")]),a("div",{staticClass:"font-weight-light text-center splash-screen__matrix_sign"},[e._v("\n        "+e._s(e.$t("splash-screen.matrix-sign"))+"\n      ")]),a("div",{staticClass:"splash-screen__button"},[e.injectedProvider?a("action-button",{attrs:{text:e.$t("splash-screen.connect-button"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}}):a("span",{staticClass:"splash-screen__no-provider"},[e._v("\n          "+e._s(e.$t("splash-screen.no-provider"))+"\n        ")])],1),a("div",{staticClass:"splash-screen__message"},[e.accessDenied?a("no-access-message",{attrs:{reason:e.accessDenied}}):e._e()],1)])],1)],1)},l=[],d=n("f15c"),f=n("2f62"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v("\n      "+e._s(e.$t("no-access.unsupported-network"))+"\n    ")]):e.initializationFailed?n("span",[e._v("\n      "+e._s(e.$t("no-access.sdk-initialization-failure"))+"\n    ")]):n("span",[e._v("\n      "+e._s(e.$t("no-access.generic-error"))+"\n    ")])])])},m=[],h=n("87a2");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function _(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var x=function(e){function t(){return O(this,t),_(this,g(t).apply(this,arguments))}return w(t,e),v(t,[{key:"networkUnsupported",get:function(){return this.reason===h["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===h["a"].INITIALIZATION_FAILED}}]),t}(u["e"]);s["a"]([Object(u["d"])({required:!0})],x.prototype,"reason",void 0),x=s["a"]([Object(u["a"])({})],x);var A=x,C=A,S=(n("8ecd"),n("2877")),P=n("6544"),N=n.n(P),R=n("0798"),T=Object(S["a"])(C,b,m,!1,null,"6b8163f4",null),I=T.exports;N()(T,{VAlert:R["a"]});var D=n("750b");function $(e){return $="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function L(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}var q=function(e){function t(){var e;return F(this,t),e=L(this,H(t).apply(this,arguments)),e.name="Raiden dApp",e}return V(t,e),B(t,[{key:"connect",value:function(){}},{key:"injectedProvider",get:function(){return d["a"].injectedWeb3Available()}}]),t}(u["e"]);s["a"]([Object(u["d"])({default:!1,required:!0,type:Boolean})],q.prototype,"connecting",void 0),s["a"]([Object(u["b"])()],q.prototype,"connect",null),q=s["a"]([Object(u["a"])({components:{ActionButton:D["a"],NoAccessMessage:I},computed:Object(f["c"])(["accessDenied"])})],q);var Z=q,K=Z,z=(n("c60f"),n("62ad")),G=n("a523"),X=n("adda"),Y=n("0fd9"),J=Object(S["a"])(K,p,l,!1,null,"4b726f94",null),Q=J.exports;N()(J,{VCol:z["a"],VContainer:G["a"],VImg:X["a"],VRow:Y["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.loading&&e.defaultAccount?a("div",{staticClass:"app-header"},[a("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"app-header__top__content"},[a("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?a("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[a("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),a("v-spacer"),a("v-col",{attrs:{"align-self":"center"}},[a("div",{staticClass:"app-header__top__content__title"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n          ")]),a("div",{staticClass:"app-header__top__content__network"},[e._v("\n            "+e._s(e.network)+"\n          ")])]),a("v-spacer"),a("div",[a("v-img",{staticClass:"app-header__top__content__blockie",attrs:{src:e.$blockie(e.defaultAccount),height:"36",width:"36",contain:"","aspect-ratio":"1"}})],1)],1)])],1),a("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"app-header__bottom__address text-left"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("span",e._g({},n),[e._v("\n              "+e._s(e._f("truncate")(e.defaultAccount,8))+"\n            ")])]}}],null,!1,3329657142)},[a("span",[e._v(e._s(e.defaultAccount))])]),a("v-tooltip",{attrs:{bottom:"",dark:"","close-delay":"1500"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{id:"copyBtn",text:"",icon:""},on:{click:function(t){return e.copy()}}},r),[a("v-img",{staticClass:"app-header__bottom__address__copy",attrs:{src:n("927e"),contain:""}})],1)]}}],null,!1,121364382)},[a("span",[e._v("\n            "+e._s(e.copied?e.$t("app-header.copy-success"):e.$t("app-header.copy"))+"\n          ")])])],1)]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"app-header__bottom__balance text-right"},[e._v("\n        "+e._s(e._f("decimals")(e.accountBalance))+"\n        "),a("span",{staticClass:"app-header__bottom__balance__currency"},[e._v("\n          "+e._s(e.$t("app-header.currency"))+"\n        ")])])])],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.defaultAccount,expression:"defaultAccount"}],ref:"copy",staticClass:"app-header__copy-area",domProps:{value:e.defaultAccount},on:{input:function(t){t.target.composing||(e.defaultAccount=t.target.value)}}})],1):e._e()},te=[],ne=n("77fd"),ae=n("5a48"),re=n("152b");function oe(e){return oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function de(e,t){return!t||"object"!==oe(t)&&"function"!==typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}var ye=function(e){function t(){var e;return ue(this,t),e=de(this,be(t).apply(this,arguments)),e.copied=!1,e.timeout=0,e}return me(t,e),le(t,[{key:"copy",value:function(){var e=this,t=this.$refs.copy;t.focus(),t.select(),this.copied=document.execCommand("copy"),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.copied=!1}),2e3)}},{key:"canGoBack",get:function(){return this.$route.name!==ae["a"].HOME}}]),t}(Object(u["c"])(ne["a"],re["a"]));ye=s["a"]([Object(u["a"])({computed:ce({},Object(f["c"])(["loading","defaultAccount","accountBalance"]),{},Object(f["b"])(["network"]))})],ye);var Oe=ye,je=Oe,ve=(n("90a8"),n("8336")),_e=n("2fa4"),ke=n("3a2f"),ge=Object(S["a"])(je,ee,te,!1,null,"08e6cbd5",null),we=ge.exports;function Ee(e){return Ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function xe(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(a,r)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){xe(o,a,r,i,c,"next",e)}function c(e){xe(o,a,r,i,c,"throw",e)}i(void 0)}))}}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Ne(e,t){return!t||"object"!==Ee(t)&&"function"!==typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}N()(ge,{VBtn:ve["a"],VCol:z["a"],VImg:X["a"],VRow:Y["a"],VSpacer:_e["a"],VTooltip:ke["a"]});var $e=function(e){function t(){var e;return Ce(this,t),e=Ne(this,Te(t).call(this)),e.connecting=!1,e.name="Raiden dApp",e}return Ie(t,e),Pe(t,[{key:"connect",value:function(){var e=Ae(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.connecting=!0,this.$store.commit("reset"),e.next=4,this.$raiden.connect();case 4:this.connecting=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==h["a"].UNDEFINED}}]),t}(u["e"]);$e=s["a"]([Object(u["a"])({computed:Object(f["c"])(["loading","accessDenied"]),components:{AppHeader:we,SplashScreen:Q}})],$e);var Fe=$e,Me=Fe,Be=(n("8be4"),n("7496")),Le=n("a75b"),Ue=Object(S["a"])(Me,r,o,!1,null,"36797782",null),He=Ue.exports;N()(Ue,{VApp:Be["a"],VContainer:G["a"],VContent:Le["a"]});var Ve=n("2fe1");Ve["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var We=n("8c4f"),qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-core")},Ze=[],Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tokens")},ze=[],Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height"},[n("v-col",{staticClass:"fill-height",attrs:{cols:"12"}},[n("list-header",{staticClass:"connected-tokens__header",attrs:{header:e.$t("tokens.connected.header")}}),n("v-row",{attrs:{justify:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-list",{staticClass:"connected-tokens__tokens",attrs:{expand:""}},e._l(e.tokens,(function(t,a){return n("v-list-group",{key:t.token,staticClass:"connected-tokens__tokens__token",attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item",{attrs:{id:"token-"+a}},[n("v-list-item-avatar",{staticClass:"list-blockie"},[n("img",{attrs:{src:e.$blockie(t.address),alt:e.$t("tokens.connected.token.blockie-alt")}})]),n("v-list-item-content",[n("v-list-item-title",{staticClass:"connected-tokens__tokens__token__info"},[e._v("\n                    "+e._s(e.$t("tokens.connected.token.token-info",{symbol:t.symbol,name:t.name}))+"\n                  ")]),n("v-list-item-subtitle",{staticClass:"connected-tokens__tokens__token__address"},[e._v("\n                    "+e._s(t.address)+"\n                  ")])],1)],1)]},proxy:!0}],null,!0)},[n("div",{staticClass:"connected-tokens__tokens__token__expanded",attrs:{id:"expanded-area-"+a}},[n("v-row",{attrs:{justify:"center",align:"center","no-gutters":""}},[n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{disabled:0===t.open,id:"transfer-"+a,to:"/transfer/"+t.address}},[e._v("\n                  "+e._s(e.$t("general.buttons.transfer"))+"\n                ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button leave",attrs:{id:"leave-"+a},on:{click:function(n){return e.leaveNetwork(t)}}},[e._v("\n                  "+e._s(e.$t("tokens.connected.token.buttons.disconnect"))+"\n                ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{to:"/channels/"+t.address}},[e._v("\n                  "+e._s(e.$t("tokens.connected.token.buttons.view-channels"))+"\n                ")])],1)],1)])})),1)],1)],1),n("action-button",{staticClass:"connected-tokens__button",attrs:{text:e.$t("tokens.connect-new"),enabled:""},on:{click:function(t){return e.navigateToTokenSelect()}}}),n("confirmation-dialog",{attrs:{display:e.leaveModalVisible},on:{confirm:function(t){return e.leaveConfirmed()},cancel:function(t){return e.leaveCancelled()}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n        "+e._s(e.$t("tokens.disconnect-dialog.header"))+"\n      ")]},proxy:!0}])},[e.selectedToken?n("i18n",{attrs:{path:"tokens.disconnect-dialog.confirmation-message",tag:"div"}},[n("b",{attrs:{place:"symbol"}},[e._v(e._s(e.selectedToken.symbol))]),n("span",{staticClass:"connected-tokens__tokens__token__leave__address",attrs:{place:"address"}},[e._v("\n          "+e._s(e.selectedToken.address)+"\n        ")])]):e._e()],1),n("stepper",{attrs:{display:e.loading,steps:e.steps,doneStep:e.doneStep}})],1)],1)},Xe=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"625"},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[n("v-card",[n("v-card-title",[n("v-col",[n("h1",{staticClass:"confirmation-dialog__header"},[e._t("header")],2)])],1),n("v-card-text",[n("p",{staticClass:"confirmation-dialog__message"},[e._t("default")],2)]),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"confirmation-dialog__button",attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.cancel"))+"\n        ")]),n("v-btn",{staticClass:"confirmation-dialog__button confirmation-dialog__button__primary",attrs:{text:""},on:{click:function(t){return e.confirm()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.confirm"))+"\n        ")]),n("v-spacer")],1)],1)],1)],1)},Je=[];function Qe(e){return Qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function at(e,t){return!t||"object"!==Qe(t)&&"function"!==typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}function ct(e,t){return ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ct(e,t)}var st=function(e){function t(){return et(this,t),at(this,ot(t).apply(this,arguments))}return it(t,e),nt(t,[{key:"confirm",value:function(){this.$emit("confirm")}},{key:"cancel",value:function(){this.$emit("cancel")}}]),t}(u["e"]);s["a"]([Object(u["d"])({required:!0})],st.prototype,"display",void 0),st=s["a"]([Object(u["a"])({})],st);var ut=st,pt=ut,lt=(n("e0d1"),n("b0af")),dt=n("99d9"),ft=n("169a"),bt=Object(S["a"])(pt,Ye,Je,!1,null,"2ef2cf74",null),mt=bt.exports;N()(bt,{VBtn:ve["a"],VCard:lt["a"],VCardActions:dt["a"],VCardText:dt["b"],VCardTitle:dt["c"],VCol:z["a"],VDialog:ft["a"],VRow:Y["a"],VSpacer:_e["a"]});var ht=n("a1ab"),yt=n("d0aa");function Ot(e){return Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function jt(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(a,r)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){jt(o,a,r,i,c,"next",e)}function c(e){jt(o,a,r,i,c,"throw",e)}i(void 0)}))}}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gt(e,t,n){return t&&kt(e.prototype,t),n&&kt(e,n),e}function wt(e,t){return!t||"object"!==Ot(t)&&"function"!==typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}function At(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}function Ct(e,t){return Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ct(e,t)}var St=function(e){function t(){var e;return _t(this,t),e=wt(this,xt(t).apply(this,arguments)),e.selectedToken=null,e.leaveModalVisible=!1,e.loading=!1,e.steps=[],e.doneStep=Object(h["c"])(),e}return At(t,e),gt(t,[{key:"created",value:function(){this.steps=[this.$t("tokens.leave-progress")],this.doneStep=this.$t("tokens.leave-done")}},{key:"dismissModal",value:function(){this.leaveModalVisible=!1,this.selectedToken=null}},{key:"leaveNetwork",value:function(e){this.selectedToken=e,this.leaveModalVisible=!0}},{key:"leaveConfirmed",value:function(){var e=vt(c.a.mark((function e(){var t;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selectedToken.address,this.dismissModal(),this.loading=!0,e.next=5,this.$raiden.leaveNetwork(t);case 5:this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"leaveCancelled",value:function(){this.dismissModal()}}]),t}(Object(u["c"])(ne["a"],re["a"]));St=s["a"]([Object(u["a"])({components:{ListHeader:yt["a"],Stepper:ht["a"],ConfirmationDialog:mt,ActionButton:D["a"]},computed:Object(f["b"])(["tokens"])})],St);var Pt=St,Nt=Pt,Rt=(n("bcd1"),n("8860")),Tt=n("56b0"),It=n("da13"),Dt=n("8270"),$t=n("5d23"),Ft=Object(S["a"])(Nt,Ge,Xe,!1,null,"107a7378",null),Mt=Ft.exports;function Bt(e){return Bt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){return!t||"object"!==Bt(t)&&"function"!==typeof t?Ht(e):t}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Wt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}function qt(e,t){return qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qt(e,t)}N()(Ft,{VBtn:ve["a"],VCol:z["a"],VList:Rt["a"],VListGroup:Tt["a"],VListItem:It["a"],VListItemAvatar:Dt["a"],VListItemContent:$t["b"],VListItemSubtitle:$t["c"],VListItemTitle:$t["d"],VRow:Y["a"]});var Zt=function(e){function t(){return Lt(this,t),Ut(this,Vt(t).apply(this,arguments))}return Wt(t,e),t}(u["e"]);Zt=s["a"]([Object(u["a"])({components:{Tokens:Mt}})],Zt);var Kt=Zt,zt=Kt,Gt=Object(S["a"])(zt,Ke,ze,!1,null,null,null),Xt=Gt.exports;function Yt(e){return Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){return!t||"object"!==Yt(t)&&"function"!==typeof t?en(e):t}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}function an(e,t){return an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},an(e,t)}var rn=function(e){function t(){return Jt(this,t),Qt(this,tn(t).apply(this,arguments))}return nn(t,e),t}(u["e"]);rn=s["a"]([Object(u["a"])({components:{AppCore:Xt}})],rn);var on=rn,cn=on,sn=Object(S["a"])(cn,qe,Ze,!1,null,null,null),un=sn.exports;a["a"].use(We["a"]);var pn=new We["a"]({mode:"history",base:"/",routes:[{path:"/",name:ae["a"].HOME,meta:{title:"Raiden dApp"},component:un},{path:"*",redirect:"/"},{path:"/transfer/:token",name:ae["a"].TRANSFER,meta:{title:"Send"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-016a9c39"),n.e("chunk-14d17f51")]).then(n.bind(null,"69aa"))}},{path:"/connect",name:ae["a"].SELECT_TOKEN,meta:{title:"Select token"},component:function(){return n.e("chunk-eb37963c").then(n.bind(null,"7724"))}},{path:"/connect/:token",name:ae["a"].SELECT_HUB,meta:{title:"Select hub"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-d73914b8")]).then(n.bind(null,"c405"))}},{path:"/connect/:token/:partner",name:ae["a"].OPEN_CHANNEL,meta:{title:"Open channel"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-016a9c39"),n.e("chunk-10ff31b6")]).then(n.bind(null,"7542"))}},{path:"/channels/:token",name:ae["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-15c53508")]).then(n.bind(null,"3010"))}}]}),ln=pn,dn=n("f455"),fn=n("dd61"),bn=n.n(fn),mn=n("e9a8d"),hn=n.n(mn),yn=n("9380"),On=n.n(yn),jn=n("b8ce"),vn=n.n(jn),_n=n("c5a2"),kn=n.n(_n),gn=n("93c6"),wn=n.n(gn),En=n("63ea"),xn=n.n(En),An=n("13ea"),Cn=n.n(An);function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(n,!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){return Dn(e)||In(e,t)||Tn()}function Tn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function In(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){r=!0,o=s}finally{try{a||null==c["return"]||c["return"]()}finally{if(r)throw o}}return n}}function Dn(e){if(Array.isArray(e))return e}a["a"].use(f["a"]);var $n={loading:!0,defaultAccount:"",accountBalance:"0.0",providerDetected:!0,accessDenied:h["a"].UNDEFINED,channels:{},tokens:{},network:h["b"]};function Fn(){return vn()($n)}var Mn={state:Fn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=Rn(a[n],2),o=r[0],i=r[1];o in e.tokens&&xn()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=Pn({},e.tokens[o],{},i):e.tokens=Pn({},e.tokens,Nn({},o,i)))}},network:function(e,t){e.network=t},reset:function(e){Object.assign(e,Fn())}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return bn()(On()(hn()(e.channels),(function(e){return!Cn()(e)})),(function(n){var a=kn()(n,t,Object(h["d"])()),r=e.tokens[a.address];return r&&(a.name=r.name||"",a.symbol=r.symbol||""),a}))},allTokens:function(e){return Object.values(e.tokens)},channels:function(e){return function(t){var n=[],a=e.channels[t];return a&&!Cn()(a)&&(n=hn()(a)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),a=n.filter((function(e){return e.state===dn["a"].open}));return wn()(a,["capacity"],["desc"])[0]}}}},Bn=new f["a"].Store(Mn),Ln=n("9483");Object({NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_RAIDEN_PACKAGE||Object(Ln["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Ve["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Un=n("e62e");function Hn(e,t){e.prototype.$raiden=new Un["c"](Bn)}var Vn=n("103a"),Wn=n.n(Vn);function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Kn(e,t,n){return t&&Zn(e.prototype,t),n&&Zn(e,n),e}var zn=function(){function e(){qn(this,e),this.cache={}}return Kn(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Wn()(e);return this.cache[e]=n,n}}]),e}();function Gn(e,t){e.prototype.$identicon=new zn}var Xn=n("a925");function Yn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var r=a[1];t[r]=e(n)}})),t}a["a"].use(Xn["a"]);var Jn=new Xn["a"]({locale:"en",fallbackLocale:"en",messages:Yn()}),Qn=(n("5363"),n("f309"));a["a"].use(Qn["a"]);var ea=new Qn["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87"}}}}),ta=n("e508");n("a899");a["a"].config.productionTip=!1,a["a"].use(Hn),a["a"].use(Gn),a["a"].use(ta["a"]),new a["a"]({vuetify:ea,router:ln,store:Bn,i18n:Jn,render:function(e){return e(He)}}).$mount("#app")},d0aa:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"list-header",attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"list-header__header"},[e._v(e._s(e.header))]),n("div",{staticClass:"list-header__divider"})])],1)},r=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var b=function(e){function t(){return s(this,t),u(this,l(t).apply(this,arguments))}return d(t,e),t}(i["e"]);o["a"]([Object(i["d"])({required:!0})],b.prototype,"header",void 0),b=o["a"]([Object(i["a"])({})],b);var m=b,h=m,y=(n("5c11"),n("2877")),O=n("6544"),j=n.n(O),v=n("62ad"),_=n("0fd9"),k=Object(y["a"])(h,a,r,!1,null,"046d9f4b",null);t["a"]=k.exports;j()(k,{VCol:v["a"],VRow:_["a"]})},d9f4:function(e,t,n){},e0d1:function(e,t,n){"use strict";var a=n("d9f4"),r=n.n(a);r.a},e62e:function(e,t,n){"use strict";var a=n("a34a"),r=n.n(a),o=n("f455"),i=n("f15c"),c=n("a3d5"),s=n("87a2"),u=n("8404"),p=n("5670"),l=n("e95d"),d=n("3fab"),f=n("7f4b"),b=n.n(f);function m(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){m(o,a,r,i,c,"next",e)}function c(e){m(o,a,r,i,c,"throw",e)}i(void 0)}))}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}var v=function(){function e(){y(this,e)}return j(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=h(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}]),e}();function _(e){return _="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function k(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!C(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,P(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},E(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e,t,n){return A=x()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=Function.bind.apply(e,a),o=new r;return n&&S(o,n.prototype),o},A.apply(null,arguments)}function C(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function N(e,t){return I(e)||T(e,t)||R()}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function T(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){r=!0,o=s}finally{try{a||null==c["return"]||c["return"]()}finally{if(r)throw o}}return n}}function I(e){if(Array.isArray(e))return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(a,r)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){$(o,a,r,i,c,"next",e)}function c(e){$(o,a,r,i,c,"throw",e)}i(void 0)}))}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}n.d(t,"c",(function(){return U})),n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return q}));var U=function(){function e(t){M(this,e),this._raiden=void 0,this.store=t}return L(e,[{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}}],[{key:"createRaiden",value:function(){var e=F(r.a.mark((function e(t){var n,a=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,e.prev=1,e.next=4,o["b"].create(t,n,window.localStorage,void 0,{pfsSafetyMargin:1.1});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),new z(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),L(e,[{key:"ensResolve",value:function(){var e=F(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Z(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=F(r.a.mark((function t(){var n,a,o,c,u,d=this;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=Object({NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_RAIDEN_PACKAGE,!n){t.next=11;break}return t.next=5,v.fetch(n);case 5:return a=t.sent,t.next=8,i["a"].provider(a);case 8:o=t.sent,t.next=14;break;case 11:return t.next=13,i["a"].provider();case 13:o=t.sent;case 14:if(o){t.next=18;break}this.store.commit("noProvider"),t.next=44;break;case 18:if(!a){t.next=24;break}return t.next=21,e.createRaiden(o,a.PRIVATE_KEY);case 21:c=t.sent,t.next=27;break;case 24:return t.next=26,e.createRaiden(o);case 26:c=t.sent;case 27:return this._raiden=c,t.t0=this.store,t.next=31,this.getAccount();case 31:return t.t1=t.sent,t.t0.commit.call(t.t0,"account",t.t1),t.t2=this.store,t.next=36,this.getBalance();case 36:t.t3=t.sent,t.t2.commit.call(t.t2,"balance",t.t3),c.events$.pipe(Object(p["a"])((function(e){return"newBlock"===e.type})),Object(l["a"])((function(){return d.fetchTokenData(d.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(p["a"])((function(e){return"raidenShutdown"===e.type}))).subscribe((function(){return d.store.commit("reset")})),c.events$.subscribe((function(e){"tokenMonitored"===e.type&&d.store.commit("updateTokens",D({},e.payload.token,{address:e.payload.token}))})),c.channels$.subscribe((function(e){d.store.commit("updateChannels",e)})),this.store.commit("network",c.network),c.start();case 44:t.next=51;break;case 46:t.prev=46,t.t4=t["catch"](0),console.error(t.t4),u=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?s["a"].UNSUPPORTED_NETWORK:t.t4 instanceof z?s["a"].INITIALIZATION_FAILED:s["a"].NO_ACCOUNT,this.store.commit("accessDenied",u);case 51:this.store.commit("loadComplete");case 52:case"end":return t.stop()}}),t,this,[[0,46]])})));function n(){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=F(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=F(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance();case 2:return t=e.sent,e.abrupt("return",c["a"].toEth(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=F(r.a.mark((function e(t){var n,a,o,i,c,s,u,p;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return a=e.sent,o=N(a,2),i=o[0],c=o[1],s=c.decimals,u=c.symbol,p=c.name,e.abrupt("return",{name:p,symbol:u,balance:i,decimals:s,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=F(r.a.mark((function e(t,n,a,o){var i,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=function(e,t){o&&o({current:e,total:t})},c=this.raiden,i(1,3),e.prev=3,e.next=6,c.openChannel(t,n);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new W(e.t0);case 11:if(i(2,3),!a.gt(u["Zero"])){e.next=15;break}return e.next=15,this.deposit(t,n,a);case 15:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"leaveNetwork",value:function(){var e=F(r.a.mark((function e(t,n){var a,o,i,c,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this.store.getters.channels(t),o={closed:0,failed:0},i=a.length,c=0;case 4:if(!(c<i)){e.next=19;break}return n&&n({current:c+1,total:i}),s=a[c],e.prev=7,e.next=10,this.closeChannel(s.token,s.partner);case 10:o.closed+=1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),o.failed+=1;case 16:c++,e.next=4;break;case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this,[[7,13]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=F(r.a.mark((function e(t,n){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new V(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=F(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,a);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new q(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=F(r.a.mark((function e(t,n){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new H(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=F(r.a.mark((function e(t){var n,a=this;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=F(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getToken(t).then((function(e){e&&a.store.commit("updateTokens",D({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,b()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=F(r.a.mark((function e(t,n,a,o){var i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,a,{paths:o});case 3:return i=e.sent,e.next=6,this.raiden.transfers$.pipe(Object(d["a"])((function(e){return e.secrethash===i&&e.completed}))).toPromise();case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new K(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=F(r.a.mark((function e(t,n,a,o){var i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(n);case 3:return e.next=5,this.raiden.findRoutes(t,n,a,{pfs:o});case 5:i=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new G(e.t0);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=F(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.findPFS();case 3:t=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e["catch"](0),new X(e.t0);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"noPfsSelected",value:function(){return void 0===this.raiden.config.pfs}}]),e}(),H=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),V=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),W=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),q=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),Z=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),K=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),z=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),G=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error)),X=function(e){function t(){return M(this,t),k(this,P(t).apply(this,arguments))}return w(t,e),t}(E(Error))},edd4:function(e){e.exports=JSON.parse('{"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"}},"address-input":{"paste-button":"Paste","input":{"placeholder":"Enter an address or ENS name..."},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Please enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Please enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}"}},"app-header":{"copy":"Copy","copy-success":"Copied!","currency":"ETH"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"busy-title":"Searching available routes","title":"Select a route","description":"Mediators require a small fee to forward your token transfer. Please select one below:","buttons":{"confirm":"Continue"},"hops":"Hops","fees-in":"Fees in {token}","total-amount":"{totalAmount} {token}","error":{"title":"Ops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nhis may take up some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"splash-screen":{"disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can just be used on the Ethereum Testnets.","matrix-sign":"On the first launch you get asked to sign two messages to connect to the Raiden transport layer. You sign the matrix server name and the public user name.","connect-button":"Connect","no-provider":"No web3 provider was detected. Please install e.g. MetaMask"},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"transfer":{"deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","capacity-amount":"{capacity} {token}","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Specify amount...","error":{"button":"Dismiss","title":"Token transfer unsuccessful. Please retry.","deposit-title":"Deposit was unsuccessful. Please retry."},"steps":{"transfer":{"label":"Transfer","title":"Sending Tokens","description":"Please do not close the browser and confirm the transactions with MetaMask."},"done":{"label":"Done","title":"Send Successful","description":"Your transfer was successful"},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Please do not close the browser and confirm the transactions with MetaMask."},"deposit-done":{"label":"Done","title":"Deposit successful","description":"Your tokens have been success"}}},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel has been opened successfully. You may now select a transfer target."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","price":"{amount} {symbol}","headers":{"address":"Address","url":"URL","rtt":"RTT","price":"Price"}}}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("a34a"),r=n.n(a);function o(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var p=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,a=null,!t){e.next=6;break}a="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:a=n,e.next=13;break;case 12:window.web3&&(a=window.web3.currentProvider);case 13:return a&&a.isMetaMask&&(a.autoRefreshOnNetworkChange=!1,a.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();p.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"newBlock",(function(){return ut})),n.d(a,"tokenMonitored",(function(){return pt})),n.d(a,"channelOpen",(function(){return lt})),n.d(a,"channelOpened",(function(){return dt})),n.d(a,"channelOpenFailed",(function(){return ft})),n.d(a,"channelMonitored",(function(){return bt})),n.d(a,"channelDeposit",(function(){return mt})),n.d(a,"channelDeposited",(function(){return ht})),n.d(a,"channelDepositFailed",(function(){return yt})),n.d(a,"channelWithdrawn",(function(){return Ot})),n.d(a,"channelClose",(function(){return jt})),n.d(a,"channelClosed",(function(){return vt})),n.d(a,"channelCloseFailed",(function(){return _t})),n.d(a,"channelSettleable",(function(){return kt})),n.d(a,"channelSettle",(function(){return gt})),n.d(a,"channelSettled",(function(){return wt})),n.d(a,"channelSettleFailed",(function(){return Et}));var r={};n.r(r),n.d(r,"matrixSetup",(function(){return Pt})),n.d(r,"matrixRequestMonitorPresence",(function(){return Nt})),n.d(r,"matrixPresenceUpdate",(function(){return Rt})),n.d(r,"matrixRequestMonitorPresenceFailed",(function(){return Tt})),n.d(r,"matrixRoom",(function(){return It})),n.d(r,"matrixRoomLeave",(function(){return Dt}));var o={};n.r(o),n.d(o,"transfer",(function(){return an})),n.d(o,"transferSigned",(function(){return rn})),n.d(o,"transferProcessed",(function(){return on})),n.d(o,"transferSecret",(function(){return cn})),n.d(o,"transferSecretRequest",(function(){return sn})),n.d(o,"transferSecretReveal",(function(){return un})),n.d(o,"transferUnlock",(function(){return pn})),n.d(o,"transferUnlocked",(function(){return ln})),n.d(o,"transferUnlockProcessed",(function(){return dn})),n.d(o,"transferExpire",(function(){return fn})),n.d(o,"transferExpired",(function(){return bn})),n.d(o,"transferExpireFailed",(function(){return mn})),n.d(o,"transferExpireProcessed",(function(){return hn})),n.d(o,"transferRefunded",(function(){return yn})),n.d(o,"transferred",(function(){return On})),n.d(o,"transferFailed",(function(){return jn})),n.d(o,"transferClear",(function(){return vn})),n.d(o,"withdrawReceiveRequest",(function(){return _n})),n.d(o,"withdrawSendConfirmation",(function(){return kn}));var i={};n.r(i),n.d(i,"messageSend",(function(){return wn})),n.d(i,"messageSent",(function(){return En})),n.d(i,"messageGlobalSend",(function(){return xn})),n.d(i,"messageReceived",(function(){return An}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Cn})),n.d(c,"pathFound",(function(){return Sn})),n.d(c,"pathFindFailed",(function(){return Pn})),n.d(c,"pfsListUpdated",(function(){return Nn}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return ia})),n.d(s,"initMonitorRegistryEpic",(function(){return ca})),n.d(s,"initMonitorChannelsEpic",(function(){return sa})),n.d(s,"initMonitorProviderEpic",(function(){return ua})),n.d(s,"tokenMonitoredEpic",(function(){return pa})),n.d(s,"channelMonitoredEpic",(function(){return la})),n.d(s,"channelOpenEpic",(function(){return da})),n.d(s,"channelOpenedEpic",(function(){return fa})),n.d(s,"channelDepositEpic",(function(){return ba})),n.d(s,"channelCloseEpic",(function(){return ma})),n.d(s,"channelSettleEpic",(function(){return ha})),n.d(s,"channelSettleableEpic",(function(){return ya}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Wa})),n.d(u,"matrixShutdownEpic",(function(){return qa})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Za})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Ka})),n.d(u,"matrixCreateRoomEpic",(function(){return za})),n.d(u,"matrixInviteEpic",(function(){return Ga})),n.d(u,"matrixHandleInvitesEpic",(function(){return Xa})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Ya})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Ja})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Qa})),n.d(u,"matrixMessageSendEpic",(function(){return er})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return tr})),n.d(u,"matrixMessageReceivedEpic",(function(){return nr})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return ar})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return rr})),n.d(u,"deliveredEpic",(function(){return or}));var p={};n.r(p),n.d(p,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return dr})),n.d(p,"transferSignedRetryMessageEpic",(function(){return fr})),n.d(p,"transferUnlockedRetryMessageEpic",(function(){return br})),n.d(p,"transferExpiredRetryMessageEpic",(function(){return mr})),n.d(p,"transferAutoExpireEpic",(function(){return hr})),n.d(p,"initQueuePendingEnvelopeMessagesEpic",(function(){return yr})),n.d(p,"transferProcessedReceivedEpic",(function(){return Or})),n.d(p,"transferSecretRequestedEpic",(function(){return jr})),n.d(p,"transferSecretRevealEpic",(function(){return vr})),n.d(p,"transferSecretRevealedEpic",(function(){return _r})),n.d(p,"transferUnlockProcessedReceivedEpic",(function(){return kr})),n.d(p,"transferExpireProcessedEpic",(function(){return gr})),n.d(p,"transferChannelClosedEpic",(function(){return wr})),n.d(p,"transferRefundedEpic",(function(){return Er})),n.d(p,"transferReceivedReplyProcessedEpic",(function(){return xr})),n.d(p,"withdrawRequestReceivedEpic",(function(){return Ar})),n.d(p,"withdrawSendConfirmationEpic",(function(){return Cr}));var l={};n.r(l),n.d(l,"pathFindServiceEpic",(function(){return Br})),n.d(l,"pfsCapacityUpdateEpic",(function(){return Lr})),n.d(l,"pfsServiceRegistryMonitorEpic",(function(){return Ur}));var d=n("bef3"),f=n("8404"),b=n("6934"),m=n("ad02"),h=n("9749"),y=n("3498"),O=n("ffa9");function j(e,t){const n=e.decode(t);if(Object(y["isLeft"])(n))throw O["ThrowReporter"].report(n);return n.right}const v=e=>null!==e&&void 0!==e&&"function"===typeof e["toString"],_=e=>e&&"BigNumber"===e["_ethersType"],k=new d["a"]("BigNumber",_,(e,t)=>{if(_(e))return d["p"](e);try{if(v(e))return d["p"](Object(b["bigNumberify"])(e.toString()))}catch(n){return d["e"](e,t,n.message)}return d["e"](e,t)},e=>new m["LosslessNumber"](e.toString())),g=Object(h["memoize"])((function(e){return d["d"](d["o"],t=>"string"===typeof t&&(e?Object(b["hexDataLength"])(t)===e:Object(b["isHexString"])(t)),"HexString")})),w=Object(h["memoize"])((function(e){const t=e?f["Zero"].sub(f["Two"].pow(8*e-1)):void 0,n=e?f["Two"].pow(8*e-1):void 0;return d["d"](k,e=>k.is(e)&&(!t||!n||e.gte(t)&&e.lt(n)),"Int")})),E=Object(h["memoize"])((function(e){const t=e?f["Zero"]:void 0,n=e?f["Two"].pow(8*e):void 0;return d["d"](k,e=>k.is(e)&&(!t||!n||e.gte(t)&&e.lt(n)),"UInt")})),x=g(65),A=g(32),C=g(),S=g(32),P=d["d"](g(20),e=>{try{return"string"===typeof e&&Object(b["getAddress"])(e)===e}catch(t){}return!1},"Address"),N=Object(h["memoize"])(e=>d["q"]([d["j"],e]));function R(e){return[Date.now(),e]}const T=d["l"](d["f"]([d["r"]({matrixServerLookup:d["o"],revealTimeout:d["j"],settleTimeout:d["j"],httpTimeout:d["j"],discoveryRoom:d["s"]([d["o"],d["i"]]),pfsRoom:d["s"]([d["o"],d["i"]]),pfsSafetyMargin:d["j"],matrixExcessRooms:d["j"]}),d["k"]({matrixServer:d["o"],logger:d["g"]({[""]:null,debug:null,log:null,info:null,warn:null,error:null}),pfs:d["s"]([P,d["o"],d["i"]])})]));function I({network:e},t={}){return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:`raiden_${"unknown"!==e.name?e.name:e.chainId}_discovery`,pfsRoom:`raiden_${"unknown"!==e.name?e.name:e.chainId}_path_finding`,matrixExcessRooms:3,pfsSafetyMargin:1},t)}var D=n("948b");function $(e,t){let n;if("number"===typeof e&&(e=Object(b["bigNumberify"])(e)),k.is(e)){if(e.lt(0))throw new Error("Number is negative");if(e.gte(f["Two"].pow(8*t)))throw new Error("Number too large");n=Object(D["hexZeroPad"])(Object(D["hexlify"])(e),t)}else{if("string"!==typeof e&&!Object(D["isArrayish"])(e))throw new Error("data is not a HexString or Uint8Array");{const a=Object(D["hexlify"])(e);if(Object(D["hexDataLength"])(a)!==t)throw new Error("Uint8Array or hex string must be of exact length");n=a}}return n}const F=e=>e&&!0===e["isLosslessNumber"];function M(e){return Object(m["parse"])(e,({},e)=>{if(F(e))try{return e.valueOf()}catch(t){}return e})}const B=d["r"]({amount:E(32),expiration:E(32),secrethash:A},"Lock"),L=d["r"]({chainId:E(32),tokenNetworkAddress:P,channelId:E(32),nonce:E(8),transferredAmount:E(32),lockedAmount:E(32),locksroot:A,messageHash:A,signature:x,sender:P});var U;(function(e){e["opening"]="opening",e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})(U||(U={}));const H=d["l"](d["f"]([d["r"]({deposit:E(32)}),d["k"]({locks:d["b"](B),balanceProof:L,withdraw:E(32)})])),V=d["f"]([d["l"](d["r"]({own:H,partner:H})),d["s"]([d["l"](d["r"]({state:d["h"](U.opening)})),d["l"](d["r"]({state:d["s"]([d["h"](U.open),d["h"](U.closing)]),id:d["j"],settleTimeout:d["j"],openBlock:d["j"],isFirstParticipant:d["c"]})),d["l"](d["r"]({state:d["s"]([d["h"](U.closed),d["h"](U.settleable),d["h"](U.settling)]),id:d["j"],settleTimeout:d["j"],openBlock:d["j"],isFirstParticipant:d["c"],closeBlock:d["j"]}))])]),W=d["l"](d["r"]({userId:d["o"],accessToken:d["o"],deviceId:d["o"],displayName:d["o"]}));var q;(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["TO_DEVICE"]="ToDevice",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate"})(q||(q={}));const Z=d["l"](d["r"]({message_identifier:E(8)})),K=d["l"](d["r"]({type:d["h"](q.DELIVERED),delivered_message_identifier:E(8)})),z=d["l"](d["f"]([d["r"]({type:d["h"](q.PROCESSED)}),Z])),G=d["l"](d["f"]([d["r"]({type:d["h"](q.SECRET_REQUEST),payment_identifier:E(8),secrethash:A,amount:E(32),expiration:E(32)}),Z])),X=d["l"](d["f"]([d["r"]({type:d["h"](q.SECRET_REVEAL),secret:C}),Z])),Y=d["l"](d["f"]([d["r"]({chain_id:E(32),token_network_address:P,channel_identifier:E(32),nonce:E(8),transferred_amount:E(32),locked_amount:E(32),locksroot:A}),Z])),J=d["l"](d["r"]({route:d["m"](P)})),Q=d["l"](d["r"]({routes:d["m"](J)})),ee=d["l"](d["f"]([d["r"]({payment_identifier:E(8),token:P,recipient:P,lock:B,target:P,initiator:P,fee:E(32),metadata:Q}),Y])),te=d["l"](d["f"]([d["r"]({type:d["h"](q.LOCKED_TRANSFER)}),ee])),ne=d["l"](d["f"]([d["r"]({type:d["h"](q.REFUND_TRANSFER)}),ee])),ae=d["l"](d["f"]([d["r"]({type:d["h"](q.UNLOCK),payment_identifier:E(8),secret:C}),Y])),re=d["l"](d["f"]([d["r"]({type:d["h"](q.LOCK_EXPIRED),recipient:P,secrethash:A}),Y])),oe=d["l"](d["r"]({type:d["h"](q.TO_DEVICE),message_identifier:E(8)})),ie=d["l"](d["r"]({chain_id:E(32),token_network_address:P,channel_identifier:E(32),participant:P,total_withdraw:E(32),nonce:E(8),expiration:E(32)})),ce=d["l"](d["f"]([d["r"]({type:d["h"](q.WITHDRAW_REQUEST)}),ie,Z])),se=d["l"](d["f"]([d["r"]({type:d["h"](q.WITHDRAW_CONFIRMATION)}),ie,Z])),ue=d["l"](d["f"]([d["r"]({type:d["h"](q.WITHDRAW_EXPIRED)}),ie,Z])),pe=d["l"](d["r"]({type:d["h"](q.PFS_CAPACITY_UPDATE),canonical_identifier:d["l"](d["r"]({chain_identifier:E(32),token_network_address:P,channel_identifier:E(32)})),updating_participant:P,other_participant:P,updating_nonce:E(8),other_nonce:E(8),updating_capacity:E(32),other_capacity:E(32),reveal_timeout:d["j"]})),le=d["s"]([K,z,G,X,te,ne,ae,re,oe,ce,se,ue,pe]),de=Object(h["memoize"])(e=>d["f"]([e,d["l"](d["r"]({signature:x}))])),fe=d["l"](d["f"]([d["r"]({transfer:N(de(te)),fee:w(32)}),d["k"]({transferProcessed:N(de(z)),refund:N(de(ne)),channelClosed:N(A),secretReveal:N(de(X)),unlock:N(de(ae)),lockExpired:N(de(re)),unlockProcessed:N(de(z)),lockExpiredProcessed:N(de(z))})])),be=d["l"](d["n"](d["o"],fe));var me;(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["revealed"]="REVEALED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(me||(me={}));const he=d["l"](d["r"]({address:P,chainId:d["j"],registry:P,blockNumber:d["j"],config:T,channels:d["l"](d["n"](d["o"],d["l"](d["n"](d["o"],V)))),tokens:d["l"](d["n"](d["o"],P)),transport:d["l"](d["k"]({matrix:d["l"](d["f"]([d["r"]({server:d["o"]}),d["k"]({setup:W,rooms:d["l"](d["n"](d["o"],d["b"](d["o"])))})]))})),secrets:d["l"](d["n"](d["o"],d["l"](d["f"]([d["r"]({secret:C}),d["k"]({registerBlock:d["j"]})])))),sent:be}));function ye(e){return Object(m["stringify"])(he.encode(e),void 0,2)}function Oe(e){return"string"===typeof e&&(e=M(e)),j(he,e)}function je({network:e,address:t,contractsInfo:n},a={}){return{address:t,chainId:e.chainId,registry:n.TokenNetworkRegistry.address,blockNumber:n.TokenNetworkRegistry.block_number||0,config:I({network:e},a.config),channels:{},tokens:{},transport:{},secrets:{},sent:{}}}const ve=je({network:Object(b["getNetwork"])("unspecified"),address:f["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:f["AddressZero"],block_number:0},ServiceRegistry:{address:f["AddressZero"],block_number:0}}}),_e=Object(b["padZeros"])([],65);var ke;(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(ke||(ke={}));var ge=n("e7ea"),we=n("ddfd"),Ee=n("686e"),xe=n("7508"),Ae=n("733d"),Ce=n("7442"),Se=n("371e"),Pe=n("ff97"),Ne=n("6aa5"),Re=n("eec8"),Te=n("6292"),Ie=n("a1c0"),De=n("649d"),$e=n("06d2"),Fe=n("5580"),Me=n("f791"),Be=n("891b"),Le=n("e102"),Ue=n("7fdb"),He=n("ac72"),Ve=n("3a71"),We=n("7b32"),qe=n("446c");n("86ae"),n("fa1e");class Ze{static connect(e,t){return new ge["Contract"](e,Ke,t)}}const Ke=[{constant:!0,inputs:[{name:"",type:"address"}],name:"token_to_token_networks",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"max_token_networks",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_created",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_token_address",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{name:"token_network_address",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"secret_registry_address",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_secret_registry_address",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_max_token_networks",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"token_address",type:"address"},{indexed:!0,name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"}];class ze{static connect(e,t){return new ge["Contract"](e,Ge,t)}}const Ge=[{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"receiver",type:"address"},{name:"sender",type:"address"},{name:"locks",type:"bytes"}],name:"unlock",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"participant1",type:"address"},{name:"participant2",type:"address"},{name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"secret_registry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"channel_participant_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_deposit",type:"uint256"},{name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"channel_counter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MAX_SAFE_UINT256",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"non_closing_participant",type:"address"},{name:"closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"non_closing_signature",type:"bytes"},{name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"signature_prefix",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant1_transferred_amount",type:"uint256"},{name:"participant1_locked_amount",type:"uint256"},{name:"participant1_locksroot",type:"bytes32"},{name:"participant2",type:"address"},{name:"participant2_transferred_amount",type:"uint256"},{name:"participant2_locked_amount",type:"uint256"},{name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_withdraw",type:"uint256"},{name:"expiration_block",type:"uint256"},{name:"participant_signature",type:"bytes"},{name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"safety_deprecation_switch",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"channels",outputs:[{name:"settle_block_number",type:"uint256"},{name:"state",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"bytes32"},{name:"",type:"uint256"},{name:"",type:"bytes32"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"closing_participant",type:"address"},{name:"non_closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"closing_signature",type:"bytes"},{name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"sender",type:"address"},{name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{inputs:[{name:"_token_address",type:"address"},{name:"_secret_registry",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_deprecation_executor",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant1",type:"address"},{indexed:!0,name:"participant2",type:"address"},{indexed:!1,name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"locksroot",type:"bytes32"},{indexed:!1,name:"unlocked_amount",type:"uint256"},{indexed:!1,name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!1,name:"participant1_amount",type:"uint256"},{indexed:!1,name:"participant1_locksroot",type:"bytes32"},{indexed:!1,name:"participant2_amount",type:"uint256"},{indexed:!1,name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"}];class Xe{static connect(e,t){return new ge["Contract"](e,Ye,t)}}const Ye=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"supply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"decimals",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenName",type:"string"},{name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!1,stateMutability:"nonpayable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}];class Je{static connect(e,t){return new ge["Contract"](e,Qe,t)}}const Qe=[{constant:!0,inputs:[],name:"price_bump_denominator",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"set_price",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_set_price",type:"uint256"},{name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_price_bump_numerator",type:"uint256"},{name:"_price_bump_denominator",type:"uint256"},{name:"_decay_constant",type:"uint256"},{name:"_min_price",type:"uint256"},{name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"set_price_at",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"everMadeDepositsLen",outputs:[{name:"_len",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"new_url",type:"string"}],name:"setURL",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decay_constant",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"service_valid_till",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentPrice",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"registration_duration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"setDeprecationSwitch",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"min_price",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"urls",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{name:"_has_registration",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"controller",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"price_bump_numerator",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_token_for_registration",type:"address"},{name:"_controller",type:"address"},{name:"_initial_price",type:"uint256"},{name:"_price_bump_numerator",type:"uint256"},{name:"_price_bump_denominator",type:"uint256"},{name:"_decay_constant",type:"uint256"},{name:"_min_price",type:"uint256"},{name:"_registration_duration",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"service",type:"address"},{indexed:!1,name:"valid_till",type:"uint256"},{indexed:!1,name:"deposit_amount",type:"uint256"},{indexed:!1,name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"}];var et=n("a0df"),tt=n("31a7"),nt=n("c998"),at=n("b4cc"),rt=n("0ff6"),ot=n("4e0b");function it(e){const t=f["Zero"];if(e.state!==U.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t};const n=e.own.withdraw||t,a=e.partner.withdraw||t,r=e.own.balanceProof?e.own.balanceProof.transferredAmount:t,o=e.partner.balanceProof?e.partner.balanceProof.transferredAmount:t,i=e.own.balanceProof?e.own.balanceProof.lockedAmount:t,c=e.partner.balanceProof?e.partner.balanceProof.lockedAmount:t,s=o.sub(r),u=r.sub(o),p=e.own.deposit.sub(n).sub(i).add(s),l=e.partner.deposit.sub(a).sub(c).add(u);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:r,ownLocked:i,ownBalance:s,ownCapacity:p,partnerDeposit:e.partner.deposit,partnerWithdraw:a,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:l}}var ct=n("0b23");function st(e,t){return function(n=t,a){for(const r in e){const o=e[r];if(!o)continue;const i=n[r]||t[r],c=o(i,a);c!==i&&(n=Object.assign({},n,{[r]:c}))}return n}}const ut=Object(Ce["createStandardAction"])("newBlock")(),pt=Object(Ce["createStandardAction"])("tokenMonitored")(),lt=Object(Ce["createStandardAction"])("channelOpen")(),dt=Object(Ce["createStandardAction"])("channelOpened")(),ft=Object(Ce["createStandardAction"])("channelOpenFailed").map((e,t)=>({payload:e,error:!0,meta:t})),bt=Object(Ce["createStandardAction"])("channelMonitored")(),mt=Object(Ce["createStandardAction"])("channelDeposit")(),ht=Object(Ce["createStandardAction"])("channelDeposited")(),yt=Object(Ce["createStandardAction"])("channelDepositFailed").map((e,t)=>({payload:e,error:!0,meta:t})),Ot=Object(Ce["createStandardAction"])("channelWithdrawn")(),jt=Object(Ce["createStandardAction"])("channelClose")(),vt=Object(Ce["createStandardAction"])("channelClosed")(),_t=Object(Ce["createStandardAction"])("channelCloseFailed").map((e,t)=>({payload:e,error:!0,meta:t})),kt=Object(Ce["createStandardAction"])("channelSettleable")(),gt=Object(Ce["createStandardAction"])("channelSettle")(),wt=Object(Ce["createStandardAction"])("channelSettled")(),Et=Object(Ce["createStandardAction"])("channelSettleFailed").map((e,t)=>({payload:e,error:!0,meta:t}));function xt(e=ve.blockNumber,t){return Object(Ce["isActionOf"])(ut,t)?t.payload.blockNumber:e}function At(e=ve.tokens,t){return Object(Ce["isActionOf"])(pt,t)?Object(ct["set"])([t.payload.token],t.payload.tokenNetwork,e):e}function Ct(e=ve.channels,t){if(Object(Ce["isActionOf"])(lt,t)){const n=[t.meta.tokenNetwork,t.meta.partner];if(Object(ct["get"])(n,e))return e;const a={state:U.opening,own:{deposit:f["Zero"]},partner:{deposit:f["Zero"]}};return Object(ct["set"])(n,a,e)}if(Object(Ce["isActionOf"])(dt,t)){const n=[t.meta.tokenNetwork,t.meta.partner],a={state:U.open,own:{deposit:f["Zero"]},partner:{deposit:f["Zero"]},id:t.payload.id,settleTimeout:t.payload.settleTimeout,openBlock:t.payload.openBlock,isFirstParticipant:t.payload.isFirstParticipant};return Object(ct["set"])(n,a,e)}if(Object(Ce["isActionOf"])(ft,t)){const n=[t.meta.tokenNetwork,t.meta.partner];return Object(ct["get"])([...n,"state"],e)!==U.opening?e:Object(ct["unset"])(n,e)}if(Object(Ce["isActionOf"])(ht,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return a&&a.state===U.open&&a.id===t.payload.id?(a=t.payload.participant===t.meta.partner?Object.assign({},a,{partner:Object.assign({},a.partner,{deposit:t.payload.totalDeposit})}):Object.assign({},a,{own:Object.assign({},a.own,{deposit:t.payload.totalDeposit})}),Object(ct["set"])(n,a,e)):e}if(Object(Ce["isActionOf"])(Ot,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return a&&a.state===U.open&&a.id===t.payload.id?(a=t.payload.participant===t.meta.partner?Object.assign({},a,{partner:Object.assign({},a.partner,{withdraw:t.payload.totalWithdraw})}):Object.assign({},a,{own:Object.assign({},a.own,{withdraw:t.payload.totalWithdraw})}),Object(ct["set"])(n,a,e)):e}if(Object(Ce["isActionOf"])(jt,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return a&&a.state===U.open?(a=Object.assign({},a,{state:U.closing}),Object(ct["set"])(n,a,e)):e}if(Object(Ce["isActionOf"])(vt,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return!a||a.state!==U.open&&a.state!==U.closing||a.id!==t.payload.id?e:(a=Object.assign({},a,{state:U.closed,closeBlock:t.payload.closeBlock}),Object(ct["set"])(n,a,e))}if(Object(Ce["isActionOf"])(kt,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return a&&a.state===U.closed?(a=Object.assign({},a,{state:U.settleable}),Object(ct["set"])(n,a,e)):e}if(Object(Ce["isActionOf"])(gt,t)){const n=[t.meta.tokenNetwork,t.meta.partner];let a=Object(ct["get"])(n,e);return a&&a.state===U.settleable?(a=Object.assign({},a,{state:U.settling}),Object(ct["set"])(n,a,e)):e}if(Object(Ce["isActionOf"])(wt,t)){const n=[t.meta.tokenNetwork,t.meta.partner],a=Object(ct["get"])(n,e);return a&&[U.closed,U.settleable,U.settling].includes(a.state)?Object(ct["unset"])(n,e):e}return e}const St=st({blockNumber:xt,tokens:At,channels:Ct},ve),Pt=Object(Ce["createStandardAction"])("matrixSetup")(),Nt=Object(Ce["createStandardAction"])("matrixRequestMonitorPresence")(),Rt=Object(Ce["createStandardAction"])("matrixPresenceUpdate").map(({userId:e,available:t,ts:n},a)=>({payload:{userId:e,available:t,ts:n||Date.now()},meta:a})),Tt=Object(Ce["createStandardAction"])("matrixRequestMonitorPresenceFailed").map((e,t)=>({payload:e,error:!0,meta:t})),It=Object(Ce["createStandardAction"])("matrixRoom")(),Dt=Object(Ce["createStandardAction"])("matrixRoomLeave")();function $t(e=ve.transport,t){if(Object(Ce["isActionOf"])(Pt,t))return Object.assign({},e,{matrix:Object.assign({},e.matrix,t.payload)});if(Object(Ce["isActionOf"])(It,t)){const n=["matrix","rooms",t.meta.address];return Object(ct["set"])(n,[t.payload.roomId,...Object(ct["getOr"])([],n,e).filter(e=>e!==t.payload.roomId)],e)}if(Object(Ce["isActionOf"])(Dt,t)){const n=["matrix","rooms",t.meta.address];return e=Object(ct["set"])(n,Object(ct["getOr"])([],n,e).filter(e=>e!==t.payload.roomId),e),Object(ct["isEmpty"])(Object(ct["get"])(n,e))&&(e=Object(ct["unset"])(n,e)),e}return e}const Ft=st({transport:$t},ve);function Mt(e){const t=[];for(const n of e)t.push($(n.expiration,32),$(n.amount,32),n.secrethash);return Object(b["keccak256"])(Object(D["concat"])(t))}function Bt(e){return Object(b["sha256"])(e)}function Lt(e=32){return Object(D["hexlify"])(Object(b["randomBytes"])(e))}function Ut(){return Object(b["bigNumberify"])(Object(b["randomBytes"])(8))}function Ht(){return Object(b["bigNumberify"])(Date.now())}function Vt(e){const[t,n]=e.lockExpiredProcessed?[me.expired,e.lockExpiredProcessed[0]]:e.unlockProcessed?[me.unlocked,e.unlockProcessed[0]]:e.lockExpired?[me.expiring,e.lockExpired[0]]:e.unlock?[me.unlocking,e.unlock[0]]:e.secretReveal?[me.revealed,e.secretReveal[0]]:e.channelClosed?[me.closed,e.channelClosed[0]]:e.refund?[me.refunded,e.refund[0]]:e.transferProcessed?[me.received,e.transferProcessed[0]]:[me.pending,e.transfer[0]],a=!(!e.secretReveal&&!e.unlock)||!(e.refund||e.lockExpired||e.channelClosed)&&void 0,r=!!(e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed);return{secrethash:e.transfer[1].lock.secrethash,status:t,initiator:e.transfer[1].initiator,recipient:e.transfer[1].recipient,target:e.transfer[1].target,metadata:e.transfer[1].metadata,paymentId:e.transfer[1].payment_identifier,chainId:e.transfer[1].chain_id.toNumber(),token:e.transfer[1].token,tokenNetwork:e.transfer[1].token_network_address,channelId:e.transfer[1].channel_identifier,value:e.transfer[1].lock.amount.sub(e.fee),fee:e.fee,amount:e.transfer[1].lock.amount,expirationBlock:e.transfer[1].lock.expiration.toNumber(),startedAt:new Date(e.transfer[0]),changedAt:new Date(n),success:a,completed:r}}var Wt=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};const qt={[q.DELIVERED]:12,[q.PROCESSED]:0,[q.SECRET_REQUEST]:3,[q.SECRET_REVEAL]:11,[q.LOCKED_TRANSFER]:7,[q.REFUND_TRANSFER]:8,[q.UNLOCK]:4,[q.LOCK_EXPIRED]:13,[q.TO_DEVICE]:14,[q.WITHDRAW_REQUEST]:15,[q.WITHDRAW_CONFIRMATION]:16,[q.WITHDRAW_EXPIRED]:17,[q.PFS_CAPACITY_UPDATE]:-1};var Zt;function Kt(e){const t=e.routes.map(e=>Object(b["keccak256"])(b["RLP"].encode(e.route)));return Object(b["keccak256"])(b["RLP"].encode(t))}function zt(e,t,n){return e.isZero()&&t.isZero()&&n===f["HashZero"]?f["HashZero"]:Object(b["keccak256"])(Object(D["concat"])([$(e,32),$(t,32),$(n,32)]))}function Gt(e){switch(e.type){case q.LOCKED_TRANSFER:case q.REFUND_TRANSFER:let t=Object(D["concat"])([$(qt[e.type],1),$(e.message_identifier,8),$(e.payment_identifier,8),$(e.lock.expiration,32),$(e.token,20),$(e.recipient,20),$(e.target,20),$(e.initiator,20),$(e.lock.secrethash,32),$(e.lock.amount,32),$(e.fee,32)]);return e.type===q.LOCKED_TRANSFER&&(t=Object(D["concat"])([t,Kt(e.metadata)])),Object(b["keccak256"])(t);case q.UNLOCK:return Object(b["keccak256"])(Object(D["concat"])([$(qt[e.type],1),$(e.message_identifier,8),$(e.payment_identifier,8),$(e.secret,32)]));case q.LOCK_EXPIRED:return Object(b["keccak256"])(Object(D["concat"])([$(qt[e.type],1),$(e.message_identifier,8),$(e.recipient,20),$(e.secrethash,32)]))}}function Xt(e){switch(e.type){case q.DELIVERED:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.delivered_message_identifier,8)]));case q.PROCESSED:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.message_identifier,8)]));case q.LOCKED_TRANSFER:case q.REFUND_TRANSFER:case q.UNLOCK:case q.LOCK_EXPIRED:{const t=Gt(e),n=zt(e.transferred_amount,e.locked_amount,e.locksroot);return Object(D["hexlify"])(Object(D["concat"])([$(e.token_network_address,20),$(e.chain_id,32),$(Zt.BALANCE_PROOF,32),$(e.channel_identifier,32),$(n,32),$(e.nonce,32),$(t,32)]))}case q.SECRET_REQUEST:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.message_identifier,8),$(e.payment_identifier,8),$(e.secrethash,32),$(e.amount,32),$(e.expiration,32)]));case q.SECRET_REVEAL:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.message_identifier,8),$(e.secret,32)]));case q.TO_DEVICE:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.message_identifier,8)]));case q.WITHDRAW_REQUEST:case q.WITHDRAW_CONFIRMATION:return Object(D["hexlify"])(Object(D["concat"])([$(e.token_network_address,20),$(e.chain_id,32),$(Zt.WITHDRAW,32),$(e.channel_identifier,32),$(e.participant,20),$(e.total_withdraw,32),$(e.expiration,32)]));case q.WITHDRAW_EXPIRED:return Object(D["hexlify"])(Object(D["concat"])([$(qt[e.type],1),$(0,3),$(e.nonce,32),$(e.message_identifier,8),$(e.token_network_address,20),$(e.chain_id,32),$(Zt.WITHDRAW,32),$(e.channel_identifier,32),$(e.participant,20),$(e.total_withdraw,32),$(e.expiration,32)]));case q.PFS_CAPACITY_UPDATE:return Object(D["hexlify"])(Object(D["concat"])([$(e.canonical_identifier.chain_identifier,32),$(e.canonical_identifier.token_network_address,20),$(e.canonical_identifier.channel_identifier,32),$(e.updating_participant,20),$(e.other_participant,20),$(e.updating_nonce,8),$(e.other_nonce,8),$(e.updating_capacity,32),$(e.other_capacity,32),$(e.reveal_timeout,32)]))}}function Yt(e){return x.is(e.signature)}function Jt(e){return Object(b["verifyMessage"])(Object(D["arrayify"])(Xt(e)),e.signature)}function Qt(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,messageHash:Gt(e),signature:e.signature,sender:Jt(e)}}function en(e){return Object(m["stringify"])(de(le).encode(e))}function tn(e){const t=M(e),n=de(le).decode(t);if(Object(y["isLeft"])(n))throw O["ThrowReporter"].report(n);return n.right}function nn(e,t){return Wt(this,void 0,void 0,(function*(){if(Yt(t))return t;const n=yield e.signMessage(Object(D["arrayify"])(Xt(t)));return Object.assign({},t,{signature:n})}))}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["WITHDRAW"]=3]="WITHDRAW"})(Zt||(Zt={}));const an=Object(Ce["createStandardAction"])("transfer")(),rn=Object(Ce["createStandardAction"])("transferSigned")(),on=Object(Ce["createStandardAction"])("transferProcessed")(),cn=Object(Ce["createStandardAction"])("transferSecret")(),sn=Object(Ce["createStandardAction"])("transferSecretRequest")(),un=Object(Ce["createStandardAction"])("transferSecretReveal")(),pn=Object(Ce["createStandardAction"])("transferUnlock")(),ln=Object(Ce["createStandardAction"])("transferUnlocked")(),dn=Object(Ce["createStandardAction"])("transferUnlockProcessed")(),fn=Object(Ce["createStandardAction"])("transferExpire")(),bn=Object(Ce["createStandardAction"])("transferExpired")(),mn=Object(Ce["createStandardAction"])("transferExpireFailed").map((e,t)=>({payload:e,error:!0,meta:t})),hn=Object(Ce["createStandardAction"])("transferExpireProcessed")(),yn=Object(Ce["createStandardAction"])("transferRefunded")(),On=Object(Ce["createStandardAction"])("transferred")(),jn=Object(Ce["createStandardAction"])("transferFailed").map((e,t)=>({payload:e,error:!0,meta:t})),vn=Object(Ce["createStandardAction"])("transferClear")(),_n=Object(Ce["createStandardAction"])("withdrawReceiveRequest")(),kn=Object(Ce["createStandardAction"])("withdrawSendConfirmation")();function gn(e=ve,t){if(Object(Ce["isActionOf"])(cn,t))return t.meta.secrethash in e.secrets&&e.secrets[t.meta.secrethash].registerBlock?e:Object.assign({},e,{secrets:Object.assign({},e.secrets,{[t.meta.secrethash]:t.payload})});if(Object(Ce["isActionOf"])(rn,t)){const n=t.payload.message,a=n.lock,r=a.secrethash;if(r in e.sent)return e;const o=["channels",n.token_network_address,n.recipient];let i=Object(ct["get"])(o,e);if(!i)return e;const c=[...i.own.locks||[],a],s=Mt(c);if(n.locksroot!==s||!n.nonce.eq((i.own.balanceProof?i.own.balanceProof.nonce:f["Zero"]).add(1))||!n.transferred_amount.eq(i.own.balanceProof?i.own.balanceProof.transferredAmount:f["Zero"])||!n.locked_amount.eq((i.own.balanceProof?i.own.balanceProof.lockedAmount:f["Zero"]).add(a.amount)))return e;i=Object.assign({},i,{own:Object.assign({},i.own,{locks:c,balanceProof:Qt(n)})});const u={transfer:R(n),fee:t.payload.fee};return e=Object(ct["set"])(o,i,e),e=Object(ct["set"])(["sent",r],u,e),e}if(Object(Ce["isActionOf"])(on,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,{[t.meta.secrethash]:Object.assign({},e.sent[t.meta.secrethash],{transferProcessed:R(t.payload.message)})})}):e;if(Object(Ce["isActionOf"])(un,t))return t.meta.secrethash in e.sent&&!e.sent[t.meta.secrethash].secretReveal?Object.assign({},e,{sent:Object.assign({},e.sent,{[t.meta.secrethash]:Object.assign({},e.sent[t.meta.secrethash],{secretReveal:R(t.payload.message)})})}):e;if(Object(Ce["isActionOf"])(ln,t)){const n=t.payload.message,a=t.meta.secrethash;if(!(a in e.sent)||e.sent[a].unlock)return e;const r=e.sent[a].transfer[1],o=r.lock,i=["channels",r.token_network_address,r.recipient];let c=Object(ct["get"])(i,e);if(!c||!c.own.locks||!c.own.balanceProof)return e;const s=c.own.locks.filter(e=>e.secrethash!==a),u=Mt(s);if(n.locksroot!==u||!c.own.balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(c.own.balanceProof.transferredAmount.add(o.amount))||!n.locked_amount.eq(c.own.balanceProof.lockedAmount.sub(o.amount)))return e;c=Object.assign({},c,{own:Object.assign({},c.own,{locks:s,balanceProof:Qt(n)})});const p=Object.assign({},e.sent[a],{unlock:R(n)});return e=Object(ct["set"])(i,c,e),e=Object(ct["set"])(["sent",a],p,e),e}if(Object(Ce["isActionOf"])(bn,t)){const n=t.payload.message,a=t.meta.secrethash;if(!(a in e.sent)||e.sent[a].unlock||e.sent[a].lockExpired)return e;const r=e.sent[a].transfer[1],o=r.lock,i=["channels",r.token_network_address,r.recipient];let c=Object(ct["get"])(i,e);if(!c||!c.own.locks||!c.own.balanceProof)return e;const s=c.own.locks.filter(e=>e.secrethash!==a),u=Mt(s);if(n.locksroot!==u||!c.own.balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(c.own.balanceProof.transferredAmount)||!n.locked_amount.eq(c.own.balanceProof.lockedAmount.sub(o.amount)))return e;c=Object.assign({},c,{own:Object.assign({},c.own,{locks:s,balanceProof:Qt(n)})});const p=Object.assign({},e.sent[a],{lockExpired:R(n)});return e=Object(ct["set"])(i,c,e),e=Object(ct["set"])(["sent",a],p,e),e}if(Object(Ce["isActionOf"])(dn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,{[t.meta.secrethash]:Object.assign({},e.sent[t.meta.secrethash],{unlockProcessed:R(t.payload.message)})})}):e;if(Object(Ce["isActionOf"])(hn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,{[t.meta.secrethash]:Object.assign({},e.sent[t.meta.secrethash],{lockExpiredProcessed:R(t.payload.message)})})}):e;if(Object(Ce["isActionOf"])(yn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,{[t.meta.secrethash]:Object.assign({},e.sent[t.meta.secrethash],{refund:R(t.payload.message)})})}):e;if(Object(Ce["isActionOf"])(vt,t))return Object.assign({},e,{sent:Object(ct["mapValues"])(e=>e.transfer[1].channel_identifier.eq(t.payload.id)&&e.transfer[1].recipient===t.meta.partner&&e.transfer[1].token_network_address===t.meta.tokenNetwork?Object.assign({},e,{channelClosed:R(t.payload.txHash)}):e)(e.sent)});if(Object(Ce["isActionOf"])(vn,t))return t.meta.secrethash in e.sent?(e=Object(ct["unset"])(["sent",t.meta.secrethash],e),e=Object(ct["unset"])(["secrets",t.meta.secrethash],e),e):e;if(Object(Ce["isActionOf"])(kn,t)){const n=t.payload.message,a=["channels",t.meta.tokenNetwork,t.meta.partner];let r=Object(ct["get"])(a,e);if(!r||r.state!==U.open)return e;const o=r.own.balanceProof||{chainId:n.chain_id,tokenNetworkAddress:t.meta.tokenNetwork,channelId:n.channel_identifier,nonce:f["Zero"],transferredAmount:f["Zero"],lockedAmount:f["Zero"],locksroot:f["HashZero"],messageHash:f["HashZero"],signature:Object(b["hexlify"])(_e),sender:e.address};return n.nonce.eq(o.nonce.add(1))&&n.expiration.gt(e.blockNumber)&&(r=Object.assign({},r,{own:Object.assign({},r.own,{balanceProof:Object.assign({},o,{nonce:n.nonce})})}),e=Object(ct["set"])(a,r,e)),e}return e}const wn=Object(Ce["createStandardAction"])("messageSend")(),En=Object(Ce["createStandardAction"])("messageSent")(),xn=Object(Ce["createStandardAction"])("messageGlobalSend")(),An=Object(Ce["createStandardAction"])("messageReceived").map(({text:e,message:t,ts:n,userId:a,roomId:r},o)=>({payload:{text:e,message:t,ts:n||Date.now(),userId:a,roomId:r},meta:o})),Cn=Object(Ce["createStandardAction"])("pathFind")(),Sn=Object(Ce["createStandardAction"])("pathFound")(),Pn=Object(Ce["createStandardAction"])("pathFindFailed").map((e,t)=>({payload:e,error:!0,meta:t})),Nn=Object(Ce["createStandardAction"])("pfsListUpdated")(),Rn=Object(Ce["createStandardAction"])("raidenShutdown")(),Tn=Object(Ce["createStandardAction"])("raidenConfigUpdate")(),In=Object.assign({raidenShutdown:Rn,raidenConfigUpdate:Tn},a,r,i,o,c),Dn=Object(h["pick"])(In,[In.raidenShutdown,In.newBlock,In.matrixPresenceUpdate,In.tokenMonitored].map(Ce["getType"])),$n=(e=ve,t)=>{return Object(Ce["isActionOf"])(Tn,t)&&!Object(ct["isEmpty"])(t.payload.config)?Object.assign({},e,{config:Object.assign({},e.config,t.payload.config)}):e},Fn={configReducer:$n,channelsReducer:St,transportReducer:Ft,transfersReducer:gn},Mn=(e=ve,t)=>Object.values(Fn).reduce((e,n)=>n(e,t),e);var Bn=n("3c89"),Ln=n("379c"),Un=n("99e6"),Hn=n("1c03"),Vn=n("1a65"),Wn=n("ee13"),qn=n("e418"),Zn=n("0815"),Kn=n("7182"),zn=n("b66b"),Gn=n("8012c"),Xn=n("d193"),Yn=n("6f0b"),Jn=n("8753"),Qn=n("a3fa"),ea=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};function ta(e,t,n){return Object(Jn["a"])(n=>e.on(t,n),n=>e.removeListener(t,n),n)}function na(e,t,n,a){const r=e.provider;let o=Fe["a"];n&&a&&(o=Object(Qn["a"])(n,Object($e["a"])(()=>r.blockNumber?Object(Bn["a"])(r.blockNumber):a)).pipe(Object(We["a"])(),Object(qn["a"])(([e,n])=>Promise.all(t.map(t=>r.getLogs(Object.assign({},t,{fromBlock:e,toBlock:n}))))),Object(qe["a"])(e=>Object(Re["a"])(Object(h["sortBy"])(Object(h["flatten"])(e),["blockNumber"]))),Object(Me["a"])(t=>{const n=e.interface.parseLog(t);if(!n)return;const a=Array.prototype.slice.call(n.values),o=Object.assign({},t,n,{args:a,removeListener:()=>{},getBlock:()=>r.getBlock(t.blockHash),getTransaction:()=>r.getTransaction(t.transactionHash),getTransactionReceipt:()=>r.getTransactionReceipt(t.transactionHash),decode:void 0});return[...a,o]}),Object(Ve["a"])(e=>!!e)));const i=Object(Re["a"])(t).pipe(Object(qe["a"])(t=>ta(e,t,(...e)=>e)));return Object(De["a"])(o,i)}function aa(e){return ea(this,void 0,void 0,(function*(){return Object(Yn["getNetwork"])(parseInt(yield e.send("net_version",[])))}))}function ra(e){const t=e.send;e.send=function(n,a){return ea(this,void 0,void 0,(function*(){return"eth_sign"===n?t.apply(this,["personal_sign",[a[1],a[0]]]).catch(r=>{if(r instanceof Error&&(r.message.includes("The method personal_sign does not exist")||r.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,a);throw r}):t.apply(this,[n,a])}))}}var oa=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};const ia=({},{},{provider:e})=>Object(Re["a"])(e.getBlockNumber()).pipe(Object(qe["a"])(t=>Object(De["a"])(Object(Bn["a"])(t),ta(e,"block"))),Object(Me["a"])(e=>ut({blockNumber:e}))),ca=({},e,{registryContract:t,contractsInfo:n})=>e.pipe(Object(Wn["a"])(1,void 0,e=>e.pipe(Object(We["a"])(),Object(qn["a"])(a=>Object(De["a"])(na(t,[t.filters.TokenNetworkCreated(null,null)],Object(h["isEmpty"])(a.tokens)?Object(Bn["a"])(n.TokenNetworkRegistry.block_number):void 0,Object(h["isEmpty"])(a.tokens)?e.pipe(Object(Be["a"])("blockNumber")):void 0).pipe(Object(Zn["a"])(e),Object(Me["a"])(([[e,t,n],a])=>pt({token:e,tokenNetwork:t,fromBlock:e in a.tokens?void 0:n.blockNumber}))),Object(Re["a"])(Object.entries(a.tokens)).pipe(Object(Me["a"])(([e,t])=>pt({token:e,tokenNetwork:t})))))))),sa=({},e)=>e.pipe(Object(We["a"])(),Object(qe["a"])((function*(e){for(const[t,n]of Object.entries(e.channels))for(const[e,a]of Object.entries(n))a.state!==U.opening&&(yield bt({id:a.id},{tokenNetwork:t,partner:e}))}))),ua=({},{},{address:e,network:t,provider:n})=>Object(Re["a"])(n.listAccounts()).pipe(Object(Me["a"])(t=>t.includes(e)),Object(qe["a"])(a=>Object(Vn["a"])(n.pollingInterval).pipe(Object(qe["a"])(()=>Object(De["a"])(a?Object(Re["a"])(n.listAccounts()).pipe(Object(qe["a"])(t=>t.includes(e)?Fe["a"]:Object(Bn["a"])(Rn({reason:ke.ACCOUNT_CHANGED})))):Fe["a"],Object(Re["a"])(aa(n)).pipe(Object(qe["a"])(e=>e.chainId!==t.chainId?Object(Bn["a"])(Rn({reason:ke.NETWORK_CHANGED})):Fe["a"]))))))),pa=(e,t,{address:n,getTokenNetworkContract:a})=>t.pipe(Object(Be["a"])("blockNumber"),Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(pt)),Object(Kn["a"])(e=>e.payload.tokenNetwork),Object(qe["a"])(e=>e.pipe(Object(zn["a"])(e=>{const r=a(e.payload.tokenNetwork),o=[r.filters.ChannelOpened(null,n,null,null),r.filters.ChannelOpened(null,null,n,null)];return na(r,o,e.payload.fromBlock?Object(Bn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Ve["a"])(([,e,t])=>e===n||t===n),Object(Me["a"])(([e,t,a,o,i])=>dt({id:e.toNumber(),settleTimeout:o.toNumber(),openBlock:i.blockNumber,isFirstParticipant:n===t,txHash:i.transactionHash},{tokenNetwork:r.address,partner:n===t?a:t})))})))))),la=(e,t,{getTokenNetworkContract:n})=>t.pipe(Object(Be["a"])("blockNumber"),Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(bt)),Object(Kn["a"])(e=>`${e.payload.id}#${e.meta.partner}@${e.meta.tokenNetwork}`),Object(qe["a"])(e=>e.pipe(Object(zn["a"])(e=>{const a=n(e.meta.tokenNetwork),r=a.filters.ChannelNewDeposit(e.payload.id,null,null),o=a.filters.ChannelWithdraw(e.payload.id,null,null),i=a.filters.ChannelClosed(e.payload.id,null,null,null),c=a.filters.ChannelSettled(e.payload.id,null,null,null,null);return Object(De["a"])(na(a,[r],e.payload.fromBlock?Object(Bn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Me["a"])(([t,n,a,r])=>ht({id:t.toNumber(),participant:n,totalDeposit:a,txHash:r.transactionHash},e.meta))),na(a,[o],e.payload.fromBlock?Object(Bn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Me["a"])(([t,n,a,r])=>Ot({id:t.toNumber(),participant:n,totalWithdraw:a,txHash:r.transactionHash},e.meta))),na(a,[i],e.payload.fromBlock?Object(Bn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Me["a"])(([t,n,,,a])=>vt({id:t.toNumber(),participant:n,closeBlock:a.blockNumber,txHash:a.transactionHash},e.meta))),na(a,[c],e.payload.fromBlock?Object(Bn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Me["a"])(([t,,,,,n])=>wt({id:t.toNumber(),settleBlock:n.blockNumber,txHash:n.transactionHash},e.meta)))).pipe(Object(Ln["a"])(Object(h["negate"])(Object(Ce["isActionOf"])(wt)),!0))})))))),da=(e,t,{getTokenNetworkContract:n,config$:a})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(lt)),Object(Zn["a"])(t,a),Object(qe["a"])(([e,t,a])=>{const r=n(e.meta.tokenNetwork),o=Object(h["get"])(t.channels,[e.meta.tokenNetwork,e.meta.partner,"state"]);return o!==U.opening?Object(Bn["a"])(ft(new Error(`Invalid channel state: ${o}`),e.meta)):Object(Re["a"])(r.functions.openChannel(t.address,e.meta.partner,e.payload.settleTimeout||a.settleTimeout)).pipe(Object(qe["a"])(e=>oa(void 0,void 0,void 0,(function*(){return{receipt:yield e.wait(),tx:e}}))),Object(Me["a"])(({receipt:e,tx:t})=>{if(!e.status)throw new Error(`openChannel transaction "${t.hash}" failed`);return t.hash}),Object(Gn["a"])(Fe["a"]),Object(Hn["a"])(t=>Object(Bn["a"])(ft(t,e.meta))))})),fa=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(dt)),Object(Zn["a"])(t),Object(Ve["a"])(([e,t])=>{const n=Object(h["get"])(t.channels,[e.meta.tokenNetwork,e.meta.partner]);return!!n&&n.state===U.open}),Object(Me["a"])(([e])=>bt({id:e.payload.id,fromBlock:e.payload.openBlock},e.meta))),ba=(e,t,{address:n,getTokenContract:a,getTokenNetworkContract:r})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(mt)),Object(Zn["a"])(t),Object(qe["a"])(([e,o])=>{const i=Object(h["findKey"])(o.tokens,t=>t===e.meta.tokenNetwork);if(!i){const t=new Error(`token for tokenNetwork "${e.meta.tokenNetwork}" not found`);return Object(Bn["a"])(yt(t,e.meta))}const c=a(i),s=r(e.meta.tokenNetwork),u=Object(h["get"])(o.channels,[e.meta.tokenNetwork,e.meta.partner]);if(!u||u.state!==U.open||void 0===u.id){const t=new Error(`channel for "${e.meta.tokenNetwork}" and "${e.meta.partner}" not found or not in 'open' state`);return Object(Bn["a"])(yt(t,e.meta))}const p=u.id;return Object(Re["a"])(c.functions.approve(e.meta.tokenNetwork,e.payload.deposit)).pipe(Object(Xn["a"])(e=>console.log(`sent approve tx "${e.hash}" to "${i}"`)),Object(qe["a"])(e=>oa(void 0,void 0,void 0,(function*(){return{receipt:yield e.wait(),tx:e}}))),Object(Me["a"])(({receipt:e,tx:t})=>{if(!e.status)throw new Error(`token "${i}" approve transaction "${t.hash}" failed`);return t.hash}),Object(Xn["a"])(e=>console.log(`approve tx "${e}" successfuly mined!`))).pipe(Object(Zn["a"])(t),Object(qe["a"])(([,t])=>s.functions.setTotalDeposit(p,n,t.channels[e.meta.tokenNetwork][e.meta.partner].own.deposit.add(e.payload.deposit),e.meta.partner,{gasLimit:1e5})),Object(Xn["a"])(t=>console.log(`sent setTotalDeposit tx "${t.hash}" to "${e.meta.tokenNetwork}"`)),Object(qe["a"])(e=>oa(void 0,void 0,void 0,(function*(){return{receipt:yield e.wait(),tx:e}}))),Object(Me["a"])(({receipt:t,tx:n})=>{if(!t.status)throw new Error(`tokenNetwork "${e.meta.tokenNetwork}" setTotalDeposit transaction "${n.hash}" failed`);return n.hash}),Object(Xn["a"])(e=>console.log(`setTotalDeposit tx "${e}" successfuly mined!`)),Object(Gn["a"])(Fe["a"]),Object(Hn["a"])(t=>Object(Bn["a"])(yt(t,e.meta))))})),ma=(e,t,{address:n,network:a,getTokenNetworkContract:r,signer:o})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(jt)),Object(Zn["a"])(t),Object(qe["a"])(([e,t])=>{const i=r(e.meta.tokenNetwork),c=Object(h["get"])(t.channels,[e.meta.tokenNetwork,e.meta.partner]);if(!c||c.state!==U.open&&c.state!==U.closing||!c.id){const t=new Error(`channel for "${e.meta.tokenNetwork}" and "${e.meta.partner}" not found or not in 'open' or 'closing' state`);return Object(Bn["a"])(_t(t,e.meta))}const s=c.id,u=f["HashZero"],p=f["Zero"],l=f["HashZero"],d=Object(b["hexlify"])(_e),m=Object(b["concat"])([$(e.meta.tokenNetwork,20),$(a.chainId,32),$(1,32),$(s,32),$(u,32),$(p,32),$(l,32),$(d,65)]);return Object(Re["a"])(o.signMessage(m)).pipe(Object(qe["a"])(t=>i.functions.closeChannel(s,e.meta.partner,n,u,p,l,d,t)),Object(Xn["a"])(t=>console.log(`sent closeChannel tx "${t.hash}" to "${e.meta.tokenNetwork}"`)),Object(qe["a"])(e=>oa(void 0,void 0,void 0,(function*(){return{receipt:yield e.wait(),tx:e}}))),Object(Me["a"])(({receipt:t,tx:n})=>{if(!t.status)throw new Error(`tokenNetwork "${e.meta.tokenNetwork}" closeChannel transaction "${n.hash}" failed`);return console.log(`closeChannel tx "${n.hash}" successfuly mined!`),n.hash}),Object(Gn["a"])(Fe["a"]),Object(Hn["a"])(t=>Object(Bn["a"])(_t(t,e.meta))))})),ha=(e,t,{address:n,getTokenNetworkContract:a})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(gt)),Object(Zn["a"])(t),Object(qe["a"])(([e,t])=>{const r=a(e.meta.tokenNetwork),o=Object(h["get"])(t.channels,[e.meta.tokenNetwork,e.meta.partner]);if(!o||o.state!==U.settleable&&o.state!==U.settling||!o.id){const t=new Error(`channel for "${e.meta.tokenNetwork}" and "${e.meta.partner}" not found or not in 'settleable' or 'settling' state`);return Object(Bn["a"])(Et(t,e.meta))}const i=o.id,c={transferredAmount:f["Zero"],lockedAmount:f["Zero"],locksroot:f["HashZero"]};let s=Object.assign({address:e.meta.partner},o.partner.balanceProof||c),u=Object.assign({address:n},o.own.balanceProof||c);return o.isFirstParticipant&&([s,u]=[u,s]),Object(Re["a"])(r.functions.settleChannel(i,s.address,s.transferredAmount,s.lockedAmount,s.locksroot,u.address,u.transferredAmount,u.lockedAmount,u.locksroot)).pipe(Object(Xn["a"])(t=>console.log(`sent settleChannel tx "${t.hash}" to "${e.meta.tokenNetwork}"`)),Object(qe["a"])(e=>oa(void 0,void 0,void 0,(function*(){return{receipt:yield e.wait(),tx:e}}))),Object(Me["a"])(({receipt:t,tx:n})=>{if(!t.status)throw new Error(`tokenNetwork "${e.meta.tokenNetwork}" settleChannel transaction "${n.hash}" failed`);return console.log(`settleChannel tx "${n.hash}" successfuly mined!`),n.hash}),Object(Gn["a"])(Fe["a"]),Object(Hn["a"])(t=>Object(Bn["a"])(Et(t,e.meta))))})),ya=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(ut)),Object(Zn["a"])(t),Object(qe["a"])((function*([{payload:{blockNumber:e}},t]){for(const n in t.channels)for(const a in t.channels[n]){const r=t.channels[n][a];r.state===U.closed&&r.settleTimeout&&r.closeBlock&&e>r.closeBlock+r.settleTimeout&&(yield kt({settleableBlock:e},{tokenNetwork:n,partner:a}))}})));var Oa=n("9e2e"),ja=n("9000"),va=n("8914"),_a=n("7186"),ka=n("9b90"),ga=n("8de5"),wa=n("c363"),Ea=n("f494"),xa=n("e2a1"),Aa=n("09b6"),Ca=n("0c33"),Sa=n("0d2a"),Pa=n("183d"),Na=n("fc5d");function Ra(e){const t=/^\s*-\s*(.+?)\s*$/gm,n=[];let a;while(a=t.exec(e))n.push(a[1]);return n}function Ta(e,t){let n=e;return n.includes("://")||(n=`https://${n}`),n+="/_matrix/client/versions",Object($e["a"])(()=>{const a=Date.now();return Object(Sa["fromFetch"])(n).pipe(Object(Me["a"])(e=>e.ok?Date.now():NaN),Object(_a["a"])(t||Number.MAX_SAFE_INTEGER),Object(Hn["a"])(()=>Object(Bn["a"])(NaN)),Object(Me["a"])(e=>e-a),Object(Me["a"])(t=>({server:e,rtt:t})))})}function Ia(e){const t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Da(e,t){const n=Object(Na["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}class $a{constructor(e){this.values=new Map,this.max=e}get(e){const t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}put(e,t){if(this.values.size>=this.max){const e=this.values.keys().next().value;this.values.delete(e)}this.values.set(e,t)}}var Fa=n("f079");const Ma=Object(h["memoize"])(e=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Rt)),Object(He["a"])((e,t)=>Object.assign({},e,{[t.meta.address]:t}),{}),Object(Fa["a"])(),Object(Ca["a"])({})));function Ba(e){return[e.discoveryRoom,e.pfsRoom].filter(e=>!!e)}const La=Object(h["curry"])((e,t)=>e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e));function Ua(e,t){let n=e.getRoom(t);return n||(n=e.getRooms().find(La(t))),n?Object(Bn["a"])(n):Object(ja["a"])(e,"Room").pipe(Object(Ve["a"])(La(t)),Object(wa["a"])(1))}const Ha=["online","unavailable"],Va=/^@(0x[0-9a-f]{40})[.:]/i,Wa=({},e,{address:t,signer:n,matrix$:a,config$:r})=>e.pipe(Object(We["a"])(),Object(Zn["a"])(r),Object(qe["a"])(([e,{matrixServer:t,matrixServerLookup:n,httpTimeout:a}])=>{const r=Object(h["get"])(e,["transport","matrix","server"]),o=Object(h["get"])(e,["transport","matrix","setup"]);return!r||t&&t!==r?t?Object(Bn["a"])({server:t,setup:void 0}):Object(Sa["fromFetch"])(n).pipe(Object(qe["a"])(e=>{return e.ok?e.text():Object(Oa["a"])(new Error(`Could not fetch server list from "${n}" => ${e.status}`))}),Object(_a["a"])(a),Object(qe["a"])(e=>Object(Re["a"])(Ra(e))),Object(qe["a"])(e=>Ta(e,a)),Object(ka["a"])(),Object(Me["a"])(e=>Object(h["sortBy"])(e,["rtt"])),Object(Me["a"])(e=>{if(!e[0]||"number"!==typeof e[0].rtt||isNaN(e[0].rtt))throw new Error(`Could not contact any matrix servers: ${JSON.stringify(e)}`);return e[0].server}),Object(Me["a"])(e=>({server:e.includes("://")?e:`https://${e}`,setup:void 0}))):Object(Bn["a"])({server:r,setup:o})}),Object(qe["a"])((function({server:e,setup:a}){let{userId:r,accessToken:o,deviceId:i}=a||{};if(a){const t=Object(Pa["createClient"])({baseUrl:e,userId:r,accessToken:o,deviceId:i});return Object(Bn["a"])({matrix:t,server:e,setup:a})}{const a=Ia(e);if(!a)return Object(Oa["a"])(new Error(`Could not get serverName from "${e}"`));const c=Object(Pa["createClient"])({baseUrl:e}),s=t.toLowerCase();return r=`@${s}:${a}`,Object(Re["a"])(n.signMessage(a)).pipe(Object(qe["a"])(e=>Object(Re["a"])(c.loginWithPassword(s,e)).pipe(Object(Hn["a"])(()=>Object(Re["a"])(c.register(s,e))))),Object(Xn["a"])(e=>{c.deviceId=e.device_id,c._http.opts.accessToken=e.access_token,c.credentials={userId:e.user_id},o=e.access_token,i=e.device_id}),Object(qe["a"])(()=>n.signMessage(r)),Object(Me["a"])(t=>({matrix:c,server:e,setup:{userId:r,accessToken:o,deviceId:i,displayName:t}})))}})),Object(Zn["a"])(r),Object(qe["a"])(([{matrix:e,server:t,setup:n},a])=>Object(Re["a"])(e.setDisplayName(n.displayName)).pipe(Object(qe["a"])(()=>Object(De["a"])(...Ba(a).map(n=>Object(Re["a"])(e.joinRoom(`#${n}:${Ia(t)}`))))),Object(ka["a"])(),Object(ga["a"])({matrix:e,server:t,setup:n}))),Object(qe["a"])(({matrix:t,server:n,setup:r})=>Object(De["a"])(e.pipe(Object(Be["a"])("transport","matrix","server"),Object(Ve["a"])(e=>!!e),Object(wa["a"])(1),Object(Xn["a"])(()=>{a.next(t),a.complete()}),Object(qn["a"])(()=>a),Object(Ea["a"])(1e3),Object(qe["a"])(e=>e.startClient({initialSyncLimit:0})),Object(xa["a"])()),Object(Bn["a"])(Pt({server:n,setup:r}))))),qa=(e,{},{matrix$:t})=>t.pipe(Object(qe["a"])(t=>e.pipe(Object(Aa["a"])(()=>t.stopClient()))),Object(xa["a"])()),Za=(e,{},{matrix$:t})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Nt)),Object(qe["a"])(e=>t.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Zn["a"])(Ma(e)),Object(qe["a"])(([{action:e,matrix:t},n])=>{if(e.meta.address in n)return Object(Bn["a"])(n[e.meta.address]);const a=[];for(const o of t.getUsers()){if(!o.displayName)continue;if(!o.presence)continue;let t;try{const n=Va.exec(o.userId);if(!n||Object(b["getAddress"])(n[1])!==e.meta.address)continue;if(t=Object(b["verifyMessage"])(o.userId,o.displayName),!t||t!==e.meta.address)continue}catch(r){continue}a.push(o)}if(a.length>0){const t=Object(h["minBy"])(a,"lastPresenceTs");return Object(Bn["a"])(Rt({userId:t.userId,available:Ha.includes(t.presence)},e.meta))}return Object(Re["a"])(t.searchUserDirectory({term:e.meta.address.toLowerCase()})).pipe(Object(qe["a"])((function*({results:t}){for(const n of t)if(n.display_name){try{const t=Va.exec(n.user_id);if(!t||Object(b["getAddress"])(t[1])!==e.meta.address)continue;const a=Object(b["verifyMessage"])(n.user_id,n.display_name);if(!a||a!==e.meta.address)continue}catch(r){continue}yield n.user_id}})),Object(qe["a"])(e=>Da(t,e).then(t=>Object.assign({},t,{user_id:e})).catch(t=>{return console.log("Error fetching user presence, ignoring:",t),{presence:"",user_id:e}})),Object(Ve["a"])(e=>!!e&&!!e.presence),Object(ka["a"])(),Object(Me["a"])(t=>{if(!t.length)throw new Error(`Could not find any user with valid signature for ${e.meta.address}`);return Object(h["minBy"])(t,"last_active_ago")}),Object(Me["a"])(({presence:t,user_id:n})=>Rt({userId:n,available:Ha.includes(t)},e.meta)),Object(Hn["a"])(t=>Object(Bn["a"])(Tt(t,e.meta))))})),Ka=(e,{},{matrix$:t})=>t.pipe(Object(qn["a"])(e=>Object(ja["a"])(e,"event").pipe(Object(Me["a"])(t=>({event:t,matrix:e})))),Object(Ve["a"])(({event:e})=>"m.presence"===e.getType()),Object(Me["a"])(({event:e,matrix:t})=>{const n=t.getUser(e.getSender()),a=Va.exec(n.userId),r=a&&a[1];return{user:n,matrix:t,peerAddress:r&&Object(b["getAddress"])(r)}}),Object(Ve["a"])(({user:e,peerAddress:t})=>!(!e.presence||!t)),Object(Zn["a"])(e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Nt)),Object(He["a"])((e,t)=>e.add(t.meta.address),new Set),Object(Ca["a"])(new Set)),Ma(e)),Object(Ve["a"])(([{peerAddress:e},t])=>t.has(e)),Object(qe["a"])(([{user:e,matrix:t,peerAddress:n},,a])=>{const r=e.userId,o=n,i=e.presence,c=Ha.includes(i);if(o in a&&a[o].payload.userId===r&&a[o].payload.available===c)return Fe["a"];const s=e.displayName?Object(Bn["a"])(e.displayName):Object(Re["a"])(t.getProfileInfo(r,"displayname")).pipe(Object(Me["a"])(e=>e.displayname),Object(Hn["a"])(()=>Object(Bn["a"])(void 0)));return s.pipe(Object(Me["a"])(e=>{if(!e)throw new Error(`Could not get displayName of "${r}"`);const t=Object(b["verifyMessage"])(r,e);if(!t||t!==n)throw new Error(`Could not verify displayName signature of "${r}": got "${t}"`);return t}),Object(Me["a"])(t=>Rt({userId:r,available:c,ts:e.lastPresenceTs},{address:t})))}),Object(Hn["a"])(e=>(console.log("Error validating presence event, ignoring",e),Fe["a"]))),za=(e,t,{matrix$:n})=>Object(Qn["a"])(Ma(e),t).pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(wn)),Object(qe["a"])(e=>n.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Ue["a"])(({action:e,matrix:n})=>t.pipe(Object(Ve["a"])(([t])=>e.meta.address in t),Object(wa["a"])(1),Object(Ve["a"])(([,t])=>!Object(h["get"])(t,["transport","matrix","rooms",e.meta.address,0])),Object(qe["a"])(([t])=>n.createRoom({visibility:"private",invite:[t[e.meta.address].payload.userId]})),Object(Me["a"])(({room_id:t})=>It({roomId:t},e.meta))))))),Ga=(e,t,{matrix$:n})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Rt)),Object(Ve["a"])(e=>e.payload.available),Object(qe["a"])(e=>n.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Zn["a"])(t),Object(qe["a"])(([{action:e,matrix:t},n])=>{const a=Object(h["get"])(n,["transport","matrix","rooms",e.meta.address,0]);if(a){const n=t.getRoom(a);if(n){const r=n.getMember(e.payload.userId);if(!r)return Object(Re["a"])(t.invite(a,e.payload.userId))}}return Fe["a"]}),Object(xa["a"])()),Xa=(e,{},{matrix$:t})=>t.pipe(Object(qn["a"])(e=>Object(ja["a"])(e,"RoomMember.membership",(t,n)=>({event:t,member:n,matrix:e}))),Object(Ve["a"])(({member:e,matrix:t})=>e.userId===t.getUserId()&&"invite"===e.membership),Object(Zn["a"])(Ma(e)),Object(qe["a"])(([{event:t,member:n,matrix:a},r])=>{const o=t.getSender(),i=Object(h["find"])(r,e=>e.payload.userId===o),c=i?Object(Bn["a"])(i):e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Rt)),Object(Ve["a"])(e=>e.payload.userId===o),Object(wa["a"])(1),Object(Un["a"])(Object(va["a"])(3e4)));return c.pipe(Object(Me["a"])(e=>({matrix:a,member:n,senderPresence:e})))}),Object(qe["a"])(({matrix:e,member:t,senderPresence:n})=>Object(Re["a"])(e.joinRoom(t.roomId,{syncRoom:!0})).pipe(Object(Me["a"])(()=>It({roomId:t.roomId},{address:n.meta.address}))))),Ya=(e,t,{matrix$:n,config$:a})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(It)),Object(qe["a"])(e=>n.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Zn["a"])(t,a),Object(qe["a"])(([{action:e,matrix:t},n,{matrixExcessRooms:a}])=>{const r=n.transport.matrix.rooms[e.meta.address];return Object(Re["a"])(r.filter(({},e)=>e>=a)).pipe(Object(qe["a"])(e=>t.leave(e).then(()=>e)),Object(Me["a"])(t=>Dt({roomId:t},e.meta)))})),Ja=({},e,{matrix$:t,config$:n})=>t.pipe(Object(qn["a"])(e=>Object(ja["a"])(e,"Room").pipe(Object(Me["a"])(t=>({matrix:e,roomId:t.roomId})))),Object(Ea["a"])(18e4),Object(Zn["a"])(e,n),Object(Ve["a"])(([{matrix:e,roomId:t},n,a])=>{const r=e.getRoom(t);if(!r)return!1;const o=Ba(a);if(r.name&&o.some(e=>r.name.match(`#${e}:`)))return!1;const i=Object(h["get"])(n,["transport","matrix","rooms"],{});for(const c in i)for(const e of i[c])if(e===r.roomId)return!1;return!0}),Object(qe["a"])(([{matrix:e,roomId:t}])=>e.leave(t)),Object(xa["a"])()),Qa=({},e,{matrix$:t})=>t.pipe(Object(qn["a"])(e=>Object(ja["a"])(e,"Room.myMembership",(t,n)=>({room:t,membership:n,matrix:e}))),Object(Ve["a"])(({membership:e})=>"leave"===e),Object(Zn["a"])(e),Object(qe["a"])((function*([{room:e},t]){const n=Object(h["get"])(t,["transport","matrix","rooms"],{});for(const a in n)for(const t of n[a])t===e.roomId&&(yield Dt({roomId:t},{address:a}))}))),er=(e,t,{matrix$:n})=>Object(Qn["a"])(Ma(e),t).pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(wn)),Object(qe["a"])(e=>n.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Kn["a"])(({action:e})=>e.meta.address),Object(qe["a"])(e=>e.pipe(Object(Ue["a"])(({action:e,matrix:n})=>t.pipe(Object(Ve["a"])(([t,n])=>e.meta.address in t&&t[e.meta.address].payload.available&&Object(h["get"])(n,["transport","matrix","rooms",e.meta.address,0])),Object(Me["a"])(([,t])=>t.transport.matrix.rooms[e.meta.address][0]),Object(Le["a"])(),Object(qn["a"])(e=>Ua(n,e)),Object(Zn["a"])(t),Object(qe["a"])(([a,[r]])=>{const o=r[e.meta.address].payload.userId,i=a.getMember(o);return i&&"join"===i.membership?Object(Bn["a"])(i):Object(ja["a"])(n,"RoomMember.membership",({},e)=>e).pipe(Object(Zn["a"])(t),Object(Ve["a"])(([t,[n]])=>t.roomId===a.roomId&&t.userId===n[e.meta.address].payload.userId&&"join"===t.membership),Object(wa["a"])(1),Object(Me["a"])(([e])=>e))}),Object(wa["a"])(1),Object(qe["a"])(t=>{const a="string"===typeof e.payload.message?e.payload.message:en(e.payload.message);return n.sendEvent(t.roomId,"m.room.message",{body:a,msgtype:"m.text"},"")}),Object(Me["a"])(()=>En(e.payload,e.meta))))))))),tr=(e,{},{matrix$:t,config$:n})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(xn)),Object(qe["a"])(e=>t.pipe(Object(Me["a"])(t=>({action:e,matrix:t})))),Object(Zn["a"])(n),Object(qe["a"])(([{action:e,matrix:t},n])=>{const a=Ba(n);if(!a.includes(e.meta.roomName))return console.warn("messageGlobalSend for unknown global room, ignoring",e.meta.roomName,a),Fe["a"];const r=Ia(t.baseUrl),o=`#${e.meta.roomName}:${r}`;return Ua(t,o).pipe(Object(qe["a"])(n=>{const a="string"===typeof e.payload.message?e.payload.message:en(e.payload.message);return t.sendEvent(n.roomId,"m.room.message",{body:a,msgtype:"m.text"},"")}))}),Object(xa["a"])()),nr=(e,t,{matrix$:n,config$:a})=>Object(Qn["a"])(Ma(e),t).pipe(Object(Wn["a"])(1,void 0,e=>n.pipe(Object(qn["a"])(e=>Object(ja["a"])(e,"Room.timeline",(t,n)=>({matrix:e,event:t,room:n}))),Object(Zn["a"])(a),Object(Ve["a"])(([{matrix:e,event:t,room:n},a])=>"m.room.message"===t.getType()&&"m.text"===t.event.content.msgtype&&t.getSender()!==e.getUserId()&&!Ba(a).some(t=>La(`#${t}:${Ia(e.getHomeserverUrl())}`,n))),Object(qe["a"])(([{event:t,room:n}])=>e.pipe(Object(Ve["a"])(([e,a])=>{const r=Object(h["find"])(e,["payload.userId",t.getSender()]);if(!r)return!1;const o=Object(h["get"])(a,["transport","matrix","rooms",r.meta.address],[]);return!!o.includes(n.roomId)}),Object(wa["a"])(1),Object(Un["a"])(Object(va["a"])(3e4)),Object(qe["a"])((function*([e]){const a=Object(h["find"])(e,["payload.userId",t.getSender()]);for(const o of(t.event.content.body||"").split("\n")){let e;try{e=tn(o);const t=Jt(e);if(t!==a.meta.address)throw new Error(`Signature mismatch: sender=${a.meta.address} != signer=${t}`)}catch(r){console.warn(`Could not decode message: ${o}: ${r}`),e=void 0}yield An({text:o,message:e,ts:t.event.origin_server_ts,userId:a.payload.userId,roomId:n.roomId},a.meta)}}))))))),ar=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(Ve["a"])(([e,t])=>{const n=Object(h["get"])(t,["transport","matrix","rooms",e.meta.address],[]);return!!e.payload.roomId&&n.includes(e.payload.roomId)&&n[0]!==e.payload.roomId}),Object(Me["a"])(([e])=>It({roomId:e.payload.roomId},e.meta))),rr=e=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(bt)),Object(Me["a"])(e=>Nt(void 0,{address:e.meta.partner}))),or=(e,{},{signer:t})=>{const n=new $a(32);return e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Ue["a"])(e=>{const a=e.payload.message;if(!a||!(de(z).is(a)||de(G).is(a)||de(X).is(a)))return Fe["a"];const r=a.message_identifier,o=r.toString(),i=n.get(o);if(i)return Object(Bn["a"])(wn({message:i},e.meta));const c={type:q.DELIVERED,delivered_message_identifier:r};return Object(Re["a"])(nn(t,c)).pipe(Object(Xn["a"])(e=>n.put(o,e)),Object(Me["a"])(t=>wn({message:t},e.meta)))}))};var ir=n("f412");function cr(e){return e?e.nonce.add(1):f["One"]}function sr(e,t,{network:n,address:a,signer:r,config$:o}){return Object(Qn["a"])(e,o).pipe(Object(We["a"])(),Object(qe["a"])(([e,{revealTimeout:o}])=>{if(t.meta.secrethash in e.sent)return console.error("transfer already present",t.meta),Fe["a"];const i={routes:t.payload.paths.map(({path:e})=>({route:e}))},c=t.payload.paths[0].fee,s=t.payload.paths[0].path[0],u=e.channels[t.payload.tokenNetwork][s];if(!u||u.state!==U.open)throw new Error("not open");const p={amount:t.payload.value.add(c),expiration:Object(b["bigNumberify"])(e.blockNumber+2*o),secrethash:t.meta.secrethash},l=[...u.own.locks||[],p],d=Mt(l),m=Object(h["findKey"])(e.tokens,e=>e===t.payload.tokenNetwork);console.log("Signing transfer of value",t.payload.value.toString(),"of token",m,", to",t.payload.target,", through routes",t.payload.paths,", paying",c.toString(),"in fees.");const y={type:q.LOCKED_TRANSFER,message_identifier:Ht(),chain_id:Object(b["bigNumberify"])(n.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(b["bigNumberify"])(u.id),nonce:cr(u.own.balanceProof),transferred_amount:u.own.balanceProof?u.own.balanceProof.transferredAmount:f["Zero"],locked_amount:(u.own.balanceProof?u.own.balanceProof.lockedAmount:f["Zero"]).add(p.amount),locksroot:d,payment_identifier:t.payload.paymentId,token:m,recipient:s,lock:p,target:t.payload.target,initiator:a,fee:f["Zero"],metadata:i};return Object(Re["a"])(nn(r,y)).pipe(Object(qe["a"])((function*(e){t.payload.secret&&(yield cn({secret:t.payload.secret},t.meta)),yield rn({message:e,fee:c},t.meta)})))}),Object(Hn["a"])(e=>Object(Bn["a"])(jn(e,t.meta))))}function ur(e,t,{signer:n}){return e.pipe(Object(We["a"])(),Object(qe["a"])(a=>{const r=t.meta.secrethash;if(!(r in a.sent))throw new Error("unknown transfer");const o=a.sent[r].transfer[1],i=Object(h["get"])(a.channels,[o.token_network_address,o.recipient]);if(!i||i.state!==U.open||!i.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");let c;if(a.sent[r].unlock)c=Object(Bn["a"])(a.sent[r].unlock[1]);else{if(o.lock.expiration.lte(a.blockNumber))throw new Error("lock expired");const e=(i.own.locks||[]).filter(e=>e.secrethash!==r),s=Mt(e),u={type:q.UNLOCK,message_identifier:Ht(),chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,nonce:cr(i.own.balanceProof),transferred_amount:i.own.balanceProof.transferredAmount.add(o.lock.amount),locked_amount:i.own.balanceProof.lockedAmount.sub(o.lock.amount),locksroot:s,payment_identifier:o.payment_identifier,secret:a.secrets[t.meta.secrethash].secret};c=Object(Re["a"])(nn(n,u))}return c.pipe(Object(Zn["a"])(e),Object(qe["a"])((function*([e,n]){if(o.lock.expiration.lte(n.blockNumber))throw new Error("lock expired!");if(n.sent[r].channelClosed)throw new Error("channel closed!");yield ln({message:e},t.meta)})))}),Object(Hn["a"])(e=>{return console.error("Error when trying to unlock after SecretReveal",e),Fe["a"]}))}function pr(e,t,{signer:n}){return e.pipe(Object(We["a"])(),Object(qe["a"])(e=>{const a=t.meta.secrethash;if(!(a in e.sent))throw new Error("unknown transfer");const r=e.sent[a].transfer[1],o=Object(h["get"])(e.channels,[r.token_network_address,r.recipient]);if(!o||o.state!==U.open||!o.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");let i;if(e.sent[a].lockExpired)i=Object(Bn["a"])(e.sent[a].lockExpired[1]);else{if(r.lock.expiration.gte(e.blockNumber))throw new Error("lock not yet expired");if(e.sent[a].unlock)throw new Error("transfer already unlocked");const t=(o.own.locks||[]).filter(e=>e.secrethash!==a),c=Mt(t),s={type:q.LOCK_EXPIRED,message_identifier:Ht(),chain_id:r.chain_id,token_network_address:r.token_network_address,channel_identifier:r.channel_identifier,nonce:cr(o.own.balanceProof),transferred_amount:o.own.balanceProof.transferredAmount,locked_amount:o.own.balanceProof.lockedAmount.sub(r.lock.amount),locksroot:c,recipient:r.recipient,secrethash:a};i=Object(Re["a"])(nn(n,s))}return i.pipe(Object(Me["a"])(e=>bn({message:e},t.meta)))}),Object(Hn["a"])(e=>Object(Bn["a"])(mn(e,t.meta))))}function lr(e,t,{signer:n},a){return e.pipe(Object(We["a"])(),Object(qe["a"])(e=>{const r=t.payload.message,o=Object(h["get"])(e.channels,[t.meta.tokenNetwork,t.meta.partner]);if(!o||o.state!==U.open||!r.channel_identifier.eq(o.id))throw new Error("channel gone or not open");if(r.expiration.lte(e.blockNumber))throw new Error("WithdrawRequest expired");if(r.total_withdraw.gt(o.partner.deposit.add(o.own.balanceProof?o.own.balanceProof.transferredAmount:f["Zero"])))throw new Error("invalid total_withdraw, greater than partner.deposit + own.transferredAmount");let i;const c=r.message_identifier.toString(),s=a.get(c);if(s&&s.chain_id.eq(r.chain_id)&&s.token_network_address===r.token_network_address&&s.channel_identifier.eq(r.channel_identifier)&&s.participant===r.participant&&s.total_withdraw.eq(r.total_withdraw)&&s.expiration.eq(r.expiration))i=Object(Bn["a"])(s);else{const e={type:q.WITHDRAW_CONFIRMATION,message_identifier:r.message_identifier,chain_id:r.chain_id,token_network_address:r.token_network_address,channel_identifier:r.channel_identifier,participant:r.participant,total_withdraw:r.total_withdraw,nonce:cr(o.own.balanceProof),expiration:r.expiration};i=Object(Re["a"])(nn(n,e)).pipe(Object(Xn["a"])(e=>a.put(c,e)))}return i.pipe(Object(Me["a"])(e=>kn({message:e},t.meta)))}),Object(Hn["a"])(e=>{return console.error("Error trying to handle WithdrawRequest, ignoring:",e),Fe["a"]}))}const dr=(e,t,n)=>t.pipe(Object(Wn["a"])(1,void 0,t=>{const a=new $a(32);return e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([an,pn,fn,_n])),Object(Ue["a"])(e=>Object(Ce["isActionOf"])(an,e)?sr(t,e,n):Object(Ce["isActionOf"])(pn,e)?ur(t,e,n):Object(Ce["isActionOf"])(fn,e)?pr(t,e,n):lr(t,e,n,a)))})),fr=(e,t)=>t.pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(rn)),Object(qe["a"])(n=>{const a=n.meta.secrethash,r=n.payload.message,o=wn({message:r},{address:r.recipient}),i=Object(De["a"])(Object(Bn["a"])(o),e.pipe(Object(Ve["a"])(e=>Object(Ce["isActionOf"])(En,e)&&e.payload.message===o.payload.message&&e.meta.address===o.meta.address),Object(wa["a"])(1),Object(xa["a"])()));return i.pipe(Object(ir["a"])(e=>e.pipe(Object(Ea["a"])(3e4))),Object(Un["a"])(t.pipe(Object(Ve["a"])(e=>!!e.sent[a].transferProcessed||!!e.sent[a].unlockProcessed||!!e.sent[a].lockExpiredProcessed||!!e.sent[a].channelClosed))))})))),br=(e,t)=>t.pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(ln)),Object(Zn["a"])(t),Object(qe["a"])(([n,a])=>{const r=n.meta.secrethash;if(!(r in a.sent))return Fe["a"];const o=n.payload.message,i=a.sent[r].transfer[1],c=wn({message:o},{address:i.recipient}),s=Object(De["a"])(Object(Bn["a"])(c),e.pipe(Object(Ve["a"])(e=>Object(Ce["isActionOf"])(En,e)&&e.payload.message===c.payload.message&&e.meta.address===c.meta.address),Object(wa["a"])(1),Object(xa["a"])()));return s.pipe(Object(ir["a"])(e=>e.pipe(Object(Ea["a"])(3e4))),Object(Un["a"])(t.pipe(Object(Ve["a"])(e=>!!e.sent[r].unlockProcessed||!!e.sent[r].channelClosed))))})))),mr=(e,t)=>t.pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(bn)),Object(Zn["a"])(t),Object(qe["a"])(([n,a])=>{const r=n.meta.secrethash;if(!(r in a.sent))return Fe["a"];const o=n.payload.message,i=wn({message:o},{address:a.sent[r].transfer[1].recipient}),c=Object(De["a"])(Object(Bn["a"])(i),e.pipe(Object(Ve["a"])(e=>Object(Ce["isActionOf"])(En,e)&&e.payload.message===i.payload.message&&e.meta.address===i.meta.address),Object(wa["a"])(1),Object(xa["a"])()));return c.pipe(Object(ir["a"])(e=>e.pipe(Object(Ea["a"])(3e4))),Object(Un["a"])(t.pipe(Object(Ve["a"])(e=>!!e.sent[r].lockExpiredProcessed||!!e.sent[r].channelClosed))))})))),hr=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(ut)),Object(Zn["a"])(t),Object(zn["a"])(([{payload:{blockNumber:t}},n])=>{const a=[];for(const[r,o]of Object.entries(n.sent)){if(o.unlock||o.lockExpired||o.channelClosed||o.transfer[1].lock.expiration.gte(t))continue;const n=r,i=Object(De["a"])(Object(Bn["a"])(fn(void 0,{secrethash:n})),e.pipe(Object(Ve["a"])(e=>Object(Ce["isActionOf"])([bn,mn],e)&&e.meta.secrethash===n),Object(wa["a"])(1),Object(xa["a"])()));a.push(i),a.push(Object(Bn["a"])(jn(new Error(`transfer expired at block=${o.transfer[1].lock.expiration.toString()}`),{secrethash:n})))}return Object(De["a"])(...a)})),yr=({},e)=>e.pipe(Object(We["a"])(),Object(qe["a"])((function*(e){for(const[t,n]of Object.entries(e.sent)){const e=t;n.unlockProcessed||n.lockExpiredProcessed||n.channelClosed||(yield Nt(void 0,{address:n.transfer[1].target}),n.transferProcessed||(yield rn({message:n.transfer[1],fee:n.fee},{secrethash:e})),n.unlock&&(yield ln({message:n.unlock[1]},{secrethash:e})),n.lockExpired&&(yield bn({message:n.lockExpired[1]},{secrethash:e})))}}))),Or=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(z).is(n))return;let a=void 0;for(const[r,o]of Object.entries(t.sent))if(o.transfer[1].message_identifier.eq(n.message_identifier)&&o.transfer[1].recipient===e.meta.address){a=r;break}a&&(yield on({message:n},{secrethash:a}))}))),jr=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(G).is(n))return;if(!(n.secrethash in t.secrets)||!(n.secrethash in t.sent))return;const a=t.sent[n.secrethash].transfer[1],r=t.sent[n.secrethash].fee,o=a.lock.amount.sub(r);a.target===e.meta.address&&a.payment_identifier.eq(n.payment_identifier)?n.expiration.lte(a.lock.expiration)&&n.expiration.gt(t.blockNumber)?n.amount.gte(o)?(n.amount.eq(o)||console.warn("Accepted SecretRequest for amount different than sent",n,a),yield sn({message:n},{secrethash:n.secrethash})):console.warn("SecretRequest for amount too small!",n,a):console.warn("SecretRequest for expired transfer",n,a):console.warn("Invalid SecretRequest for transfer",n,a)}))),vr=(e,t,{signer:n})=>t.pipe(Object(Wn["a"])(1,void 0,t=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(sn)),Object(Ue["a"])(e=>t.pipe(Object(We["a"])(),Object(qe["a"])(t=>{const a=t.sent[e.meta.secrethash].transfer[1].target;let r;if(t.sent[e.meta.secrethash].secretReveal)r=Object(Bn["a"])(t.sent[e.meta.secrethash].secretReveal[1]);else{const a={type:q.SECRET_REVEAL,message_identifier:Ht(),secret:t.secrets[e.meta.secrethash].secret};r=Object(Re["a"])(nn(n,a))}return r.pipe(Object(qe["a"])((function*(t){yield un({message:t},e.meta),yield wn({message:t},{address:a})})))})))))),_r=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(X).is(n))return;const a=Bt(n.secret);a in t.sent&&e.meta.address===t.sent[a].transfer[1].recipient&&!t.sent[a].channelClosed&&!t.sent[a].unlock&&(yield cn({secret:n.secret},{secrethash:a}),yield pn(void 0,{secrethash:a}))}))),kr=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(z).is(n))return;let a;for(const[r,o]of Object.entries(t.sent))if(o.unlock&&o.unlock[1].message_identifier.eq(n.message_identifier)&&o.transfer[1].recipient===e.meta.address){a=r;break}a&&(yield On({balanceProof:Qt(t.sent[a].unlock[1])},{secrethash:a}),yield dn({message:n},{secrethash:a}))}))),gr=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(z).is(n))return;let a;for(const[r,o]of Object.entries(t.sent))if(o.lockExpired&&o.lockExpired[1].message_identifier.eq(n.message_identifier)&&o.transfer[1].recipient===e.meta.address){a=r;break}a&&(yield hn({message:n},{secrethash:a}))}))),wr=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([jt,vt])),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){for(const[n,a]of Object.entries(t.sent)){const r=n,o=a.transfer[1];o.token_network_address===e.meta.tokenNetwork&&o.recipient===e.meta.partner&&(a.secretReveal||a.unlock?t.sent[r].unlock?yield On({balanceProof:Qt(t.sent[r].unlock[1])},{secrethash:r}):yield On({},{secrethash:r}):yield jn(new Error("Channel closed before revealing or unlocking"),{secrethash:r}))}}))),Er=(e,t)=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Zn["a"])(t),Object(qe["a"])((function*([e,t]){const n=e.payload.message;if(!n||!de(ne).is(n))return;const a=n.lock.secrethash;if(!(a in t.sent))return;const[,r]=t.sent[a].transfer;!(n.initiator===r.recipient&&n.payment_identifier.eq(r.payment_identifier)&&n.lock.amount.eq(r.lock.amount)&&n.lock.expiration.eq(r.lock.expiration))||t.sent[a].unlock||t.sent[a].lockExpired||t.sent[a].channelClosed||n.lock.expiration.lte(t.blockNumber)||(yield yn({message:n},{secrethash:a}),yield jn(new Error("transfer refunded"),{secrethash:a}))}))),xr=(e,{},{signer:t})=>{const n=new $a(32);return e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(Ue["a"])(e=>{const a=e.payload.message;if(!a||!(de(te).is(a)||de(ne).is(a)||de(re).is(a)||de(ue).is(a)))return Fe["a"];const r=a.message_identifier,o=r.toString(),i=n.get(o);if(i)return Object(Bn["a"])(wn({message:i},e.meta));const c={type:q.PROCESSED,message_identifier:r};return Object(Re["a"])(nn(t,c)).pipe(Object(Xn["a"])(e=>n.put(o,e)),Object(Me["a"])(t=>wn({message:t},e.meta)))}))},Ar=e=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(An)),Object(qe["a"])((function*(e){const t=e.payload.message;t&&de(ce).is(t)&&t.participant===e.meta.address&&(yield _n({message:t},{tokenNetwork:t.token_network_address,partner:t.participant,totalWithdraw:t.total_withdraw,expiration:t.expiration.toNumber()}))}))),Cr=e=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(kn)),Object(Me["a"])(e=>wn({message:e.payload.message},{address:e.meta.partner})));var Sr=n("3eda"),Pr=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};function Nr(e,t,n,a,r){if(!(a in t)||!t[a].payload.available)return`path: partner "${a}" not available in transport`;if(!(a in e.channels[n]))return`path: there's no direct channel with partner "${a}"`;const o=e.channels[n][a];if(o.state!==U.open)return`path: channel with "${a}" in state "${o.state}" instead of "${U.open}"`;const{ownCapacity:i}=it(o);return!i.lt(r)||`path: channel with "${a}" don't have enough capacity=${i.toString()}`}const Rr=Object(h["memoize"])(e=>Pr(void 0,void 0,void 0,(function*(){return e.functions.token()})));function Tr(e,{serviceRegistryContract:t,network:n,contractsInfo:a,config$:r}){const o=d["r"]({message:d["o"],network_info:d["r"]({chain_id:d["h"](n.chainId),registry_address:d["h"](a.TokenNetworkRegistry.address)}),operator:d["o"],payment_address:P,price_info:E(32),version:d["o"]}),i=P.is(e)?Object(Re["a"])(t.functions.urls(e)):Object(Bn["a"])(e);return i.pipe(Object(Zn["a"])(r),Object(qe["a"])(([e,{httpTimeout:n}])=>{if(!e||!e.includes("://"))throw new Error(`Invalid URL: ${e}`);const a=Date.now();return Object(Sa["fromFetch"])(`${e}/api/v1/info`).pipe(Object(_a["a"])(n),Object(qe["a"])(e=>Pr(this,void 0,void 0,(function*(){return[j(o,M(yield e.text())),yield Rr(t)]}))),Object(Me["a"])(([t,n])=>({address:t.payment_address,url:e,rtt:Date.now()-a,price:t.price_info,token:n})))}))}function Ir(e,t){return Object(Re["a"])(e).pipe(Object(qe["a"])(e=>Tr(e,t).pipe(Object(Hn["a"])(t=>{return console.warn(`Error trying to fetch PFS info for "${e}" - ignoring:`,t),Fe["a"]})),5),Object(ka["a"])(),Object(Me["a"])(e=>{if(!e.length)throw new Error("Could not validate any PFS info. Possibly out-of-sync with PFSs version.");return e.sort((e,t)=>{const n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt})}))}const Dr=d["l"](d["f"]([d["r"]({result:d["b"](d["l"](d["r"]({path:d["m"](P),estimated_fee:w(32)})))}),d["k"]({feedback_token:d["o"]})])),$r=d["b"](d["l"](d["r"]({path:d["m"](P),fee:w(32)}))),Fr=d["l"](d["r"]({address:P,url:d["o"],rtt:d["j"],price:E(32),token:P}));var Mr=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};const Br=(e,t,n)=>Object(Qn["a"])(t,Ma(e),n.config$,e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Nn)),Object(Be["a"])("payload","pfsList"),Object(Ca["a"])([]))).pipe(Object(Wn["a"])(1,void 0,t=>{return e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Cn)),Object(Ue["a"])(e=>t.pipe(Object(We["a"])(),Object(qe["a"])(([a,r,{pfs:o,httpTimeout:i,pfsSafetyMargin:c}])=>{const{tokenNetwork:s,target:u}=e.meta;if(!(s in a.channels))throw new Error(`PFS: unknown tokenNetwork ${s}`);if(!(u in r)||!r[u].payload.available)throw new Error(`PFS: target ${u} not online`);if(e.payload.paths)return Object(Bn["a"])(e.payload.paths);if(!0===Nr(a,r,s,u,e.meta.value))return Object(Bn["a"])([{path:[a.address,u],fee:f["Zero"]}]);if(e.payload.pfs||null!==o){const a=e.payload.pfs?Object(Bn["a"])(e.payload.pfs):Object(h["isNil"])(o)?t.pipe(Object(Be["a"])(3),Object(We["a"])(e=>e.length>0),Object(qe["a"])(e=>Ir(e,n)),Object(Xn["a"])(e=>console.log("Auto-selecting best PFS from:",e)),Object(Be["a"])(0)):Tr(o,n);return a.pipe(Object(qe["a"])(t=>Object(Sa["fromFetch"])(`${t.url}/api/v1/${s}/paths`,{method:"POST",headers:{"Content-Type":"application/json"},body:Object(m["stringify"])({from:n.address,to:u,value:E(32).encode(e.meta.value),max_paths:10})})),Object(_a["a"])(i),Object(qe["a"])(e=>Mr(void 0,void 0,void 0,(function*(){const t=yield e.text();if(!e.ok)throw new Error(`PFS: paths request: code=${e.status} => body="${t}"`);return j(Dr,M(t))}))),Object(Me["a"])(e=>e.result.map(e=>({path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*c)).div(1e6)}))))}throw new Error("PFS disabled and no direct route available")}),Object(Zn["a"])(t),Object(Me["a"])(([t,[n,a]])=>{const r=[],o=new Set;for(let{path:i,fee:c}of t){i[0]===n.address&&(i=i.slice(1));const t=i[0];if(o.has(t))continue;const s=r.length?t!==r[0].path[0]?"path: already selected another recipient":!c.gt(r[0].fee)||"path: already selected a smaller fee":Nr(n,a,e.meta.tokenNetwork,t,e.meta.value.add(c));!0===s?r.push({path:i,fee:c}):(console.log("Invalidated received route. Reason:",s,"Route:",i),o.add(t))}if(!r.length)throw new Error("PFS: no valid routes found");return Sn({paths:r},e.meta)}),Object(Hn["a"])(t=>Object(Bn["a"])(Pn(t,e.meta))))))})),Lr=(e,t,{address:n,network:a,signer:r,config$:o})=>e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(ht)),Object(Ve["a"])(e=>e.payload.participant===n),Object(Sr["a"])(1e4),Object(Zn["a"])(t,o),Object(Ve["a"])(([,,{pfsRoom:e}])=>!!e),Object(qe["a"])(([e,t,{revealTimeout:o,pfsRoom:i}])=>{const c=t.channels[e.meta.tokenNetwork][e.meta.partner];if(!c||c.state!==U.open)return Fe["a"];const{ownCapacity:s,partnerCapacity:u}=it(c),p={type:q.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(b["bigNumberify"])(a.chainId),token_network_address:e.meta.tokenNetwork,channel_identifier:Object(b["bigNumberify"])(c.id)},updating_participant:n,other_participant:e.meta.partner,updating_nonce:c.own.balanceProof?c.own.balanceProof.nonce:f["Zero"],other_nonce:c.partner.balanceProof?c.partner.balanceProof.nonce:f["Zero"],updating_capacity:s,other_capacity:u,reveal_timeout:o};return Object(Re["a"])(nn(r,p)).pipe(Object(Me["a"])(e=>xn({message:e},{roomName:i})))}),Object(Hn["a"])(e=>{return console.error("Error trying to generate & sign PFSCapacityUpdate",e),Fe["a"]})),Ur=({},e,{serviceRegistryContract:t,contractsInfo:n,config$:a})=>e.pipe(Object(Be["a"])("blockNumber"),Object(Le["a"])(),Object(Wn["a"])(1,void 0,e=>a.pipe(Object(Be["a"])("pfs"),Object(Le["a"])(),Object(qn["a"])(a=>void 0!==a?Fe["a"]:na(t,[t.filters.RegisteredService(null,null,null,null)],Object(Bn["a"])(n.ServiceRegistry.block_number),e).pipe(Object(Kn["a"])(([e])=>e),Object(qe["a"])(e=>e.pipe(Object(qn["a"])(([e,t])=>{const n=Date.now(),a=t.mul(1e3);if(a.lt(n))return Fe["a"];const r=a.sub(n).lt(f["Two"].pow(31))?Object(Bn["a"])({service:e,valid:!1}).pipe(Object(Ea["a"])(new Date(a.toNumber()))):Fe["a"];return Object(De["a"])(Object(Bn["a"])({service:e,valid:!0}),r)}))),Object(He["a"])((e,{service:t,valid:n})=>!n&&e.includes(t)?e.filter(e=>e!==t):n&&!e.includes(t)?[...e,t]:e,[]),Object(Le["a"])(),Object(Sr["a"])(1e3),Object(Me["a"])(e=>Nn({pfsList:e}))))))),Hr=Object.assign({},s,u,p,l),Vr=(e,t,n)=>{const a=e.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Rn))),r=e.pipe(Object(Ln["a"])(Object(h["negate"])(Object(Ce["isActionOf"])(Rn)),!0)),o=t.pipe(Object(Un["a"])(a));return o.subscribe(n.stateOutput$),r.subscribe(n.actionOutput$),o.pipe(Object(Be["a"])("config"),Object(Le["a"])()).subscribe(n.config$),Object(Re["a"])(Object.values(Hr)).pipe(Object(qe["a"])(e=>e(r,o,n)),Object(Hn["a"])(e=>Object(Bn["a"])(Rn({reason:e}))),Object(Un["a"])(a))};var Wr=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,c)}s((a=a.apply(e,t||[])).next())}))};class qr{constructor(e,t,n,a,r){this.resolveName=e.resolveName.bind(e);const o=r.address;e.resetEventsBlock(r.blockNumber+1);const i=new Pe["a"](r);this.state$=i;const c=new Ne["a"];this.action$=c,this.channels$=i.pipe(Object(Me["a"])(e=>Object(h["transform"])(e.channels,(t,n,a)=>{const r=Object(h["findKey"])(e.tokens,e=>e===a);r&&(t[r]=Object(h["transform"])(n,(e,t,n)=>{const{ownDeposit:o,partnerDeposit:i,ownBalance:c,ownCapacity:s}=it(t);e[n]=Object.assign({state:t.state},Object(h["pick"])(t,["id","settleTimeout","openBlock","closeBlock"]),{token:r,tokenNetwork:a,partner:n,ownDeposit:o,partnerDeposit:i,balance:c,capacity:s})}))}))),this.transfers$=i.pipe(Object(Be["a"])("sent"),Object(Le["a"])(),Object(Ue["a"])(e=>Object(Re["a"])(Object.entries(e))),Object(He["a"])(({acc:e},[t,n])=>e[t]===n?{acc:e}:{acc:Object.assign({},e,{[t]:n}),changed:n},{acc:{}}),Object(Ve["a"])(({changed:e})=>!!e),Object(Me["a"])(({changed:e})=>e),Object(Me["a"])(Vt)),this.events$=c.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Object.values(Dn)))),this.getTokenInfo=Object(h["memoize"])(e=>Wr(this,void 0,void 0,(function*(){if(!P.is(e))throw new Error("Invalid address");if(!(e in this.state.tokens))throw new Error(`token "${e}" not monitored`);const t=this.deps.getTokenContract(e),[n,a,r,o]=yield Promise.all([t.functions.totalSupply(),t.functions.decimals(),t.functions.name().catch(Object(h["constant"])(void 0)),t.functions.symbol().catch(Object(h["constant"])(void 0))]);return{totalSupply:n,decimals:a,name:r,symbol:o}})));const s=new Te["a"](1);this.pfsList$=s,c.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])(Nn)),Object(Be["a"])("payload","pfsList")).subscribe(s);const u=[Object(Se["createLogger"])({level:()=>void 0!==this.deps.config$.value.logger?this.deps.config$.value.logger:""})];this.deps={stateOutput$:i,actionOutput$:c,config$:new Pe["a"](r.config),matrix$:new Ie["a"],provider:e,network:t,signer:n,address:o,contractsInfo:a,registryContract:Ze.connect(a.TokenNetworkRegistry.address,n),getTokenNetworkContract:Object(h["memoize"])(e=>ze.connect(e,n)),getTokenContract:Object(h["memoize"])(e=>Xe.connect(e,n)),serviceRegistryContract:Je.connect(a.ServiceRegistry.address,n)},this.epicMiddleware=Object(Ae["a"])({dependencies:this.deps}),this.store=Object(xe["b"])(Mn,r,Object(xe["a"])(...u,this.epicMiddleware))}static create(e,t,n,a,r){return Wr(this,void 0,void 0,(function*(){let o;o="string"===typeof e?new Ee["JsonRpcProvider"](e):e instanceof Ee["JsonRpcProvider"]?e:new Ee["Web3Provider"](e),ra(o);const i=yield o.getNetwork();if(!a)switch(i.name){case"rinkeby":a=Object.assign({},tt.contracts,rt.contracts);break;case"ropsten":a=Object.assign({},et.contracts,at.contracts);break;case"goerli":a=Object.assign({},nt.contracts,ot.contracts);break;default:throw new Error(`No deploy info provided nor recognized network: ${JSON.stringify(i)}`)}let c;if(ge["Signer"].isSigner(t))if(t.provider===o)c=t;else{if(!(t instanceof we["Wallet"]))throw new Error(`Signer ${t} not connected to ${o}`);c=t.connect(o)}else if("number"===typeof t)c=o.getSigner(t);else if(P.is(t)){const e=yield o.listAccounts();if(!e.includes(t))throw new Error(`Account "${t}" not found in provider, got=${e}`);c=o.getSigner(t)}else{if(!S.is(t))throw new Error("String account must be either a 0x-encoded address or private key");c=new we["Wallet"](t,o)}const s=yield c.getAddress();let u=je({network:i,address:s,contractsInfo:a},{config:r});function p(e){return e&&"function"===typeof e.getItem}let l=void 0,d=void 0;if(n&&p(n)){const e=`raiden_${i.name||i.chainId}_${a.TokenNetworkRegistry.address}_${s}`,t=Object(h["merge"])({},u,M((yield n.getItem(e))||"null"));u=Oe(t);const r=Object(h["debounce"])(t=>{n.setItem(e,ye(t))},1e3,{maxWait:5e3});l=r,d=()=>r.flush()}else n&&he.is(n)?u=n:n&&(u=Oe(n));if(s!==u.address)throw new Error(`Mismatch between provided account and loaded state: "${s}" !== "${u.address}"`);if(i.chainId!==u.chainId||a.TokenNetworkRegistry.address!==u.registry)throw new Error("Mismatch between network or registry address and loaded state");const f=new qr(o,i,c,a,u);return l&&f.state$.subscribe(l,d,d),f}))}start(){if(!this.epicMiddleware)throw new Error("Already started or stopped!");this.epicMiddleware.run(Vr),this.epicMiddleware=void 0,this.store.dispatch(Tn({config:{}}))}get started(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}stop(){this.epicMiddleware=null,this.store.dispatch(Rn({reason:ke.STOP}))}get state(){return this.store.getState()}get address(){return this.deps.address}get network(){return this.deps.network}getBlockNumber(){return Wr(this,void 0,void 0,(function*(){return this.deps.provider.blockNumber||(yield this.deps.provider.getBlockNumber())}))}get config(){return this.state.config}updateConfig(e){this.store.dispatch(Tn({config:e}))}getBalance(e){if(e=e||this.address,!P.is(e))throw new Error("Invalid address");return this.deps.provider.getBalance(e)}getTokenBalance(e,t){return Wr(this,void 0,void 0,(function*(){if(t=t||this.address,!P.is(t)||!P.is(e))throw new Error("Invalid address");if(!(e in this.state.tokens))throw new Error(`token "${e}" not monitored`);const n=this.deps.getTokenContract(e);return n.functions.balanceOf(t)}))}getTokenList(){return Wr(this,void 0,void 0,(function*(){return this.state$.pipe(Object(We["a"])(e=>!Object(h["isEmpty"])(e.tokens)),Object(Me["a"])(e=>Object.keys(e.tokens))).toPromise()}))}openChannel(e,t,n={}){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const a=this.state,r=a.tokens[e];if(!r)throw new Error("Unknown token network");const o=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([dt,ft])),Object(Ve["a"])(e=>e.meta.tokenNetwork===r&&e.meta.partner===t),Object(We["a"])(),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(ft,e))throw e.payload;return e.payload.txHash})).toPromise();return this.store.dispatch(lt(Object.assign({},n),{tokenNetwork:r,partner:t})),o}))}depositChannel(e,t,n){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const a=this.state,r=a.tokens[e];if(!r)throw new Error("Unknown token network");const o=j(E(32),n),i=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([ht,yt])),Object(Ve["a"])(e=>e.meta.tokenNetwork===r&&e.meta.partner===t),Object(We["a"])(),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(yt,e))throw e.payload;return e.payload.txHash})).toPromise();return this.store.dispatch(mt({deposit:o},{tokenNetwork:r,partner:t})),i}))}closeChannel(e,t){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const n=this.state,a=n.tokens[e];if(!a)throw new Error("Unknown token network");const r=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([vt,_t])),Object(Ve["a"])(e=>e.meta.tokenNetwork===a&&e.meta.partner===t),Object(We["a"])(),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(_t,e))throw e.payload;return e.payload.txHash})).toPromise();return this.store.dispatch(jt(void 0,{tokenNetwork:a,partner:t})),r}))}settleChannel(e,t){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const n=this.state,a=n.tokens[e];if(!a)throw new Error("Unknown token network");const r=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([wt,Et])),Object(Ve["a"])(e=>e.meta.tokenNetwork===a&&e.meta.partner===t),Object(We["a"])(),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(Et,e))throw e.payload;return e.payload.txHash})).toPromise();return this.store.dispatch(gt(void 0,{tokenNetwork:a,partner:t})),r}))}getAvailability(e){return Wr(this,void 0,void 0,(function*(){if(!P.is(e))throw new Error("Invalid address");const t=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([Rt,Tt])),Object(Ve["a"])(t=>t.meta.address===e),Object(We["a"])(),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(Tt,e))throw e.payload;return e.payload})).toPromise();return this.store.dispatch(Nt(void 0,{address:e})),t}))}transfer(e,t,n,a={}){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const r=this.state.tokens[e];if(!r)throw new Error("Unknown token network");const o=j(E(32),n),i=a.paymentId?j(E(8),a.paymentId):Ut(),c=a.paths?j($r,a.paths):void 0,s=a.pfs?j(Fr,a.pfs):void 0;if(void 0!==a.secret&&!C.is(a.secret))throw new Error("Invalid options.secret");if(void 0!==a.secrethash&&!A.is(a.secrethash))throw new Error("Invalid options.secrethash");const u=a.secret?a.secret:a.secrethash?void 0:Lt(),p=a.secrethash||Bt(u);if(u&&Bt(u)!==p)throw new Error("Provided secrethash must match the sha256 hash of provided secret");return Object(De["a"])(this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([Sn,Pn])),Object(We["a"])(e=>e.meta.tokenNetwork===r&&e.meta.target===t&&e.meta.value.eq(n)),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(Pn,e))throw e.payload;return e.payload.paths})),Object($e["a"])(()=>{return this.store.dispatch(Cn({paths:c,pfs:s},{tokenNetwork:r,target:t,value:o})),Fe["a"]})).pipe(Object(qe["a"])(e=>Object(De["a"])(this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([rn,jn])),Object(We["a"])(e=>e.meta.secrethash===p),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(jn,e))throw e.payload;return p})),Object($e["a"])(()=>{return this.store.dispatch(an({tokenNetwork:r,target:t,value:o,paths:e,paymentId:i,secret:u},{secrethash:p})),Fe["a"]})))).toPromise()}))}findRoutes(e,t,n,a={}){return Wr(this,void 0,void 0,(function*(){if(!P.is(e)||!P.is(t))throw new Error("Invalid address");const r=this.state.tokens[e];if(!r)throw new Error("Unknown token network");const o=j(E(32),n),i=a.pfs?j(Fr,a.pfs):void 0,c=this.action$.pipe(Object(Ve["a"])(Object(Ce["isActionOf"])([Sn,Pn])),Object(We["a"])(e=>e.meta.tokenNetwork===r&&e.meta.target===t&&e.meta.value.eq(n)),Object(Me["a"])(e=>{if(Object(Ce["isActionOf"])(Pn,e))throw e.payload;return e.payload.paths})).toPromise();return this.store.dispatch(Cn({pfs:i},{tokenNetwork:r,target:t,value:o})),c}))}findPFS(){return Wr(this,void 0,void 0,(function*(){if(void 0!==this.config.pfs)throw new Error("config.pfs isn't auto (undefined)");return this.pfsList$.pipe(Object(We["a"])(),Object(qe["a"])(e=>Ir(e,this.deps))).toPromise()}))}}n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return qr}))}});
//# sourceMappingURL=app.5127e704.js.map
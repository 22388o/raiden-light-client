(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"c4026140","chunk-895be7da":"361865ac","chunk-0a1aad5a":"f7c2e0ff","chunk-29ded97f":"d01d28b5","chunk-4dbd0956":"e6a5bb59","chunk-08dab35b":"d3ef5b64","chunk-1c4c3756":"3b5d1392","chunk-4d730eb5":"5248ff69","chunk-ef6e3450":"2603f62c","chunk-fb35a2fc":"45f9b58c","chunk-12baf7f0":"9c23522a","chunk-192741ba":"b797e0ae","chunk-2fc925ad":"0f409b95","chunk-42bc8b47":"12af7567","chunk-7916f8ca":"051ad923","chunk-481c5204":"7557d6c4","chunk-5340b808":"e41ca350","chunk-7b0391a4":"d972bf86"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0a9c6d1a":1,"chunk-895be7da":1,"chunk-0a1aad5a":1,"chunk-29ded97f":1,"chunk-4dbd0956":1,"chunk-08dab35b":1,"chunk-1c4c3756":1,"chunk-4d730eb5":1,"chunk-ef6e3450":1,"chunk-fb35a2fc":1,"chunk-12baf7f0":1,"chunk-192741ba":1,"chunk-2fc925ad":1,"chunk-42bc8b47":1,"chunk-7916f8ca":1,"chunk-481c5204":1,"chunk-5340b808":1,"chunk-7b0391a4":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"284343a3","chunk-895be7da":"7f5fbf66","chunk-0a1aad5a":"e02dd5fa","chunk-29ded97f":"6144f939","chunk-4dbd0956":"57dadbf8","chunk-08dab35b":"78af775a","chunk-1c4c3756":"0cd0c0e2","chunk-4d730eb5":"d84f9e81","chunk-ef6e3450":"8683804e","chunk-fb35a2fc":"809dfbf4","chunk-12baf7f0":"53c90c86","chunk-192741ba":"d669c000","chunk-2fc925ad":"8cbb0a83","chunk-42bc8b47":"50c8bcda","chunk-7916f8ca":"665ed9bd","chunk-481c5204":"36154c83","chunk-5340b808":"0048ddb9","chunk-7b0391a4":"799c11d3"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["b"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("e6c7"),n("2877")),O=Object(g["a"])(v,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["b"])([a["a"]],h),t["a"]=h},"15c8":function(e,t,n){},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=_();return function(){var n,r=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var k=function(e){m(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));k=Object(o["b"])([Object(i["a"])({computed:d(d({},Object(c["d"])(["defaultAccount"])),Object(c["c"])(["pendingTransfers"]))})],k);var j=k,E=j,T=(n("be88"),n("2877")),A=n("6544"),S=n.n(A),x=n("4ca6"),N=n("adda"),R=n("3a2f"),C=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=C.exports;S()(C,{VBadge:x["a"],VImg:N["a"],VTooltip:R["a"]})},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},"325a":function(e,t,n){"use strict";var r=n("a279"),a=n.n(r);a.a},"3c41":function(e,t,n){},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},"51ce":function(e,t,n){},"553a":function(e,t,n){},6:function(e,t){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,_=O,w=(n("1c30"),n("2877")),k=n("6544"),j=n.n(k),E=n("8336"),T=n("b0af"),A=n("169a"),S=n("132d"),x=Object(w["a"])(_,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},7:function(e,t){},7189:function(e,t,n){"use strict";var r=n("8620"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["b"])([Object(i["a"])({})],v);var g=v,O=g,_=(n("c6c9"),n("2877")),w=n("6544"),k=n.n(w),j=n("8336"),E=n("62ad"),T=n("132d"),A=n("0fd9"),S=Object(_["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["b"])([a["a"]],m),t["a"]=m},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8620:function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return T}));var r=n("4795"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return f(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function _(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function w(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?_(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:_(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function k(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function j(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=w(n);i&&g.put(O,{logger:r,level:e,message:i},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(k)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return A.apply(this,arguments)}function A(){return A=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}},9:function(e,t){},9040:function(e,t,n){"use strict";var r=n("15c8"),a=n.n(r);a.a},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["b"])([Object(i["a"])({})],g);var O=g,_=O,w=(n("a130"),n("2877")),k=n("6544"),j=n.n(k),E=n("3a2f"),T=Object(w["a"])(_,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a279:function(e,t,n){},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction failed.","CNL_OPENCHANNEL_FAILED":"Token networks openChannel transaction failed.","CNL_SETTOTALDEPOSIT_FAILED":"Token networks setTotalDeposit transaction failed.","CNL_CLOSECHANNEL_FAILED":"Token networks closeChannel transaction failed.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"Token networks settleChannel transaction failed.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction failed.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction failed.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction failed","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},af21:function(e,t,n){},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b1a0:function(e,t,n){"use strict";var r=n("3c41"),a=n.n(r);a.a},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("4795"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),d=n("750b"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("f15c"),y=n("66bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},h=[];function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=function(e){w(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return _(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0})],x.prototype,"reason",void 0),x=Object(c["b"])([Object(s["a"])({})],x);var N=x,R=N,C=(n("753f"),n("2877")),D=n("6544"),I=n.n(D),P=n("0798"),U=Object(C["a"])(R,m,h,!1,null,"7b92b083",null),L=U.exports;function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function G(e){var t=X();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}I()(U,{VAlert:P["a"]});var z=function(e){V(n,e);var t=G(n);function n(){var e;return q(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return W(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",F(F({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}},{key:"hasProvider",get:function(){return!!Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||b["a"].injectedWeb3Available()}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],z.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],z.prototype,"connecting",void 0),Object(c["b"])([Object(s["b"])()],z.prototype,"close",null),Object(c["b"])([Object(s["b"])()],z.prototype,"connect",null),z=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:d["a"],NoAccessMessage:L},computed:Object(u["d"])(["accessDenied"])})],z);var J=z,ee=J,te=(n("9040"),n("99d9")),ne=Object(C["a"])(ee,f,p,!1,null,"0a49a460",null),re=ne.exports;I()(ne,{VCardText:te["b"],VCardTitle:te["c"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},oe=[],ie=n("152b");function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e){var t=ge();return function(){var n,r=Oe(e);if(t){var a=Oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var _e=function(e){be(n,e);var t=me(n);function n(){return de(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ie["a"]));Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],_e.prototype,"onChange",null),_e=Object(c["b"])([Object(s["a"])({computed:ue({},Object(u["c"])(["tokens"]))})],_e);var we=_e,ke=we,je=(n("1a2b"),n("8336")),Ee=n("62ad"),Te=n("a523"),Ae=n("132d"),Se=n("0fd9"),xe=Object(C["a"])(ke,ae,oe,!1,null,"4f16408a",null),Ne=xe.exports;function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,c,"next",e)}function c(e){Pe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function Fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function qe(e){var t=Ve();return function(){var n,r=Ke(e);if(t){var a=Ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?We(e):t}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}I()(xe,{VBtn:je["a"],VCol:Ee["a"],VContainer:Te["a"],VIcon:Ae["a"],VRow:Se["a"]});var Ge=function(e){Fe(n,e);var t=qe(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e}return Be(n,[{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ge=Object(c["b"])([Object(s["a"])({computed:De(De({},Object(u["d"])(["loading","accessDenied","stateBackup","settings"])),Object(u["c"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:re,NoTokens:Ne,NoAccessMessage:L}})],Ge);var Ze=Ge,Ye=Ze,Xe=(n("7189"),n("adda")),Qe=Object(C["a"])(Ye,r,a,!1,null,"05942de6",null);t["a"]=Qe.exports;I()(Qe,{VCol:Ee["a"],VContainer:Te["a"],VImg:Xe["a"],VRow:Se["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.9.0","contracts":"0.37.0"}')},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c7d9:function(e,t,n){"use strict";var r=n("553a"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("receiving-disabled-dialog",{attrs:{visible:e.showReceivingDisabled},on:{dismiss:function(t){e.showReceivingDisabled=!1}}})],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("2f62"),u=n("152b"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),!e.loading&&e.defaultAccount?r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1):e._e(),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},d=[],f=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=Object(s["a"])("notifications"),N=x.mapState,R=x.mapMutations,C=function(e){w(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return _(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(u["a"]));C=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(s["d"])(["loading","defaultAccount"])),N(["newNotifications"])),Object(s["c"])(["network","isConnected"])),methods:h({},R(["notificationsViewed"]))})],C);var D=C,I=D,P=(n("b1a0"),n("2877")),U=n("6544"),L=n.n(U),M=n("4ca6"),B=n("8336"),F=n("62ad"),$=n("adda"),q=n("0fd9"),H=n("2fa4"),W=Object(P["a"])(I,l,d,!1,null,"486857fe",null),V=W.exports;L()(W,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:$["a"],VRow:q["a"],VSpacer:H["a"]});var K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},G=[],Z=n("0a08");function Y(e){return Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function J(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=ae();return function(){var n,r=oe(e);if(t){var a=oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var ie=function(e){J(n,e);var t=te(n);function n(){var e;return X(this,n),e=t.apply(this,arguments),e.offline=!1,e}return z(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);ie=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:Z["a"]}})],ie);var ce=ie,se=ce,ue=n("132d"),le=n("2db4"),de=Object(P["a"])(se,K,G,!1,null,null,null),fe=de.exports;L()(de,{VIcon:ue["a"],VSnackbar:le["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},be=[];function ye(e){return ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}function ge(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Oe(e,t)}function _e(e){var t=je();return function(){var n,r=Ee(e);if(t){var a=Ee(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?ke(e):t}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}var Te=function(e){ge(n,e);var t=_e(n);function n(){var e;return me(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return ve(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Te=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:Z["a"]}})],Te);var Ae=Te,Se=Ae,xe=Object(P["a"])(Se,pe,be,!1,null,null,null),Ne=xe.exports;L()(xe,{VBtn:B["a"],VSnackbar:le["a"]});var Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("raiden-dialog",{staticClass:"receiving-disabled-dialog",attrs:{visible:e.visible},on:{close:e.dismiss}},[r("v-card-title",{staticClass:"receiving-disabled-dialog__title"},[e._v(" "+e._s(e.$t("receiving-disabled-dialog.title"))+" ")]),r("v-card-text",[r("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-img",{staticClass:"receiving-disabled-dialog__icon",attrs:{src:n("afb7"),height:"110px"}})],1),r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"receiving-disabled-dialog__description"},[r("span",[e._v(" "+e._s(e.$t("receiving-disabled-dialog.body"))+" ")])])])],1)],1)],1)},Ce=[],De=n("66bc");function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}function Me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function Fe(e){var t=He();return function(){var n,r=We(e);if(t){var a=We(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var Ve=function(e){Me(n,e);var t=Fe(n);function n(){return Pe(this,n),t.apply(this,arguments)}return Le(n,[{key:"dismiss",value:function(){}}]),n}(c["e"]);Object(i["b"])([Object(c["d"])({required:!0,type:Boolean})],Ve.prototype,"visible",void 0),Object(i["b"])([Object(c["b"])()],Ve.prototype,"dismiss",null),Ve=Object(i["b"])([Object(c["a"])({components:{RaidenDialog:De["a"]}})],Ve);var Ke=Ve,Ge=Ke,Ze=(n("c7d9"),n("99d9")),Ye=Object(P["a"])(Ge,Re,Ce,!1,null,"2055512c",null),Xe=Ye.exports;function Qe(e){return Qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==Qe(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}L()(Ye,{VCardText:Ze["b"],VCardTitle:Ze["c"],VCol:F["a"],VImg:$["a"],VRow:q["a"]});var dt=function(e){at(n,e);var t=it(n);function n(){var e;return tt(this,n),e=t.apply(this,arguments),e.showReceivingDisabled=!1,e}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"onCanReceiveChanged",value:function(e){this.showReceivingDisabled=!1===e}}]),n}(Object(c["c"])(u["a"]));Object(i["b"])([Object(c["f"])("canReceive")],dt.prototype,"onCanReceiveChanged",null),dt=Object(i["b"])([Object(c["a"])({computed:Je({},Object(s["c"])(["canReceive"])),components:{AppHeader:V,OfflineSnackbar:fe,UpdateSnackbar:Ne,ReceivingDisabledDialog:Xe}})],dt);var ft=dt,pt=ft,bt=(n("325a"),n("7496")),yt=n("a523"),mt=n("f6c4"),ht=Object(P["a"])(pt,a,o,!1,null,"6d7add07",null),vt=ht.exports;L()(ht,{VApp:bt["a"],VContainer:yt["a"],VMain:mt["a"]});var gt=n("2fe1");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("8c4f"),_t=n("bb51");r["a"].use(Ot["a"]);var wt=new Ot["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:_t["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-895be7da"),n.e("chunk-4dbd0956"),n.e("chunk-08dab35b"),n.e("chunk-481c5204")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-895be7da"),n.e("chunk-7b0391a4")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-7916f8ca")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-4dbd0956"),n.e("chunk-08dab35b"),n.e("chunk-1c4c3756")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-4dbd0956"),n.e("chunk-4d730eb5")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-895be7da"),n.e("chunk-5340b808")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-ef6e3450").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:f["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-0a9c6d1a").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-192741ba")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-12baf7f0")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-29ded97f")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-42bc8b47")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-2fc925ad")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-0a1aad5a")]).then(n.bind(null,"4c07"))}}]}]}),kt=wt,jt=n("bfa9"),Et=n("f455"),Tt=n("87a2"),At=n("dd61"),St=n.n(At),xt=n("e9a8d"),Nt=n.n(xt),Rt=n("9380"),Ct=n.n(Rt),Dt=n("b8ce"),It=n.n(Dt),Pt=n("c5a2"),Ut=n.n(Pt),Lt=n("93c6"),Mt=n.n(Lt),Bt=n("63ea"),Ft=n.n(Bt),$t=n("13ea"),qt=n.n($t);function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt={notify:function(e,t){var n=e.commit,r=e.getters.nextNotificationId;n("notificationAdd",Wt(Wt({},t),{},{id:r,received:new Date}))}},Gt={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0}},Zt={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]}},Yt=function(){return{notifications:[],newNotifications:!1}},Xt=Yt(),Qt=Xt,zt={namespaced:!0,mutations:Gt,actions:Kt,state:Qt,getters:Zt};function Jt(e){return nn(e)||tn(e)||un(e)||en()}function en(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function nn(e){if(Array.isArray(e))return ln(e)}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e,t){return fn(e)||dn(e,t)||un(e,t)||sn()}function sn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function un(e,t){if(e){if("string"===typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fn(e){if(Array.isArray(e))return e}r["a"].use(s["b"]);var pn={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:Tt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:Tt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:""};function bn(){return It()(pn)}var yn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},mn=new jt["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),hn={state:bn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=cn(r[n],2),o=a[0],i=a[1];o in e.tokens&&Ft()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=an(an({},e.tokens[o]),i):e.tokens=an(an({},e.tokens),{},on({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=Jt(t)},updatePresence:function(e,t){e.presences=an(an({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,an(an({},bn()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=an(an({},e.transfers),{},on({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return St()(Ct()(Nt()(e.channels),(function(e){return!qt()(e)})),(function(n){var r=Ut()(n,t,Object(Tt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return yn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!qt()(r)&&(n=Nt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Et["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Et["b"].open}));return Mt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},canReceive:function(e){var t;return!(null===(t=e.config.caps)||void 0===t?void 0:t[Et["a"].NO_RECEIVE])},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[mn.plugin],modules:{notifications:zt}},vn=new s["b"].Store(hn),gn=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var On=n("4795"),_n=n.n(On),wn=n("f15c"),kn=n("a3d5"),jn=n("6934"),En=n("5670"),Tn=n("e95d"),An=n("7f4b"),Sn=n.n(An);function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cn(e,t){return Ln(e)||Un(e,t)||In(e,t)||Dn()}function Dn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function In(e,t){if(e){if("string"===typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ln(e){if(Array.isArray(e))return e}function Mn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Bn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Mn(o,r,a,i,c,"next",e)}function c(e){Mn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t,n){return t&&$n(e.prototype,t),n&&$n(e,n),e}var Hn=function(){function e(){Fn(this,e)}return qn(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Bn(_n.a.mark((function e(t){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"contracts",value:function(){var e=Bn(_n.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,d;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=Cn(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=Cn(s,2),l=u[0],d=u[1],e.abrupt("return",Nn(Nn({},l.contracts),d.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Wn=n("8404"),Vn=n("a925");function Kn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Vn["a"]);var Gn=new Vn["a"]({locale:"en",fallbackLocale:"en",messages:Kn()});function Zn(e){return Zn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Yn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}function Xn(e){var t=tr();return function(){var n,r=ar(e);if(t){var a=ar(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qn(this,n)}}function Qn(e,t){return!t||"object"!==Zn(t)&&"function"!==typeof t?zn(e):t}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e){var t="function"===typeof Map?new Map:void 0;return Jn=function(e){if(null===e||!nr(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return er(e,arguments,ar(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),rr(n,e)},Jn(e)}function er(e,t,n){return er=tr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&rr(o,n.prototype),o},er.apply(null,arguments)}function tr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nr(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function rr(e,t){return rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rr(e,t)}function ar(e){return ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ar(e)}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t){return lr(e)||ur(e,t)||pr(e,t)||sr()}function sr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ur(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lr(e){if(Array.isArray(e))return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=pr(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function pr(e,t){if(e){if("string"===typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function mr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){yr(o,r,a,i,c,"next",e)}function c(e){yr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t,n){return t&&vr(e.prototype,t),n&&vr(e,n),e}var Or=function(){function e(t){hr(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return gr(e,[{key:"updateBalances",value:function(){var e=mr(_n.a.mark((function e(){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=mr(_n.a.mark((function e(){var t,n,r,a,o,i;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=fr(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=mr(_n.a.mark((function e(t){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new _r(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=mr(_n.a.mark((function t(n,r){var a,o,i,c,s,u,l,d=this;return _n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,Hn.fetch(a);case 5:return o=t.sent,t.next=8,wn["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,wn["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=54;break;case 18:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=20;break}throw new Et["f"](Et["c"].RDN_UNRECOGNIZED_NETWORK);case 20:return t.next=22,e.createRaiden(i,null===(s=o)||void 0===s?void 0:s.PRIVATE_KEY,n,r);case 22:return c=t.sent,this._raiden=c,t.next=26,this.getAccount();case 26:return u=t.sent,this.store.commit("account",u),t.next=30,c.userDepositTokenAddress();case 30:return this._userDepositTokenAddress=t.sent,t.next=33,this.fetchTokenData([this._userDepositTokenAddress]);case 33:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),c.events$.pipe(Object(En["a"])((function(e){return"block/new"===e.type})),Object(Tn["a"])((function(){return d.fetchTokenData(d.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(En["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return d.store.commit("reset")})),c.config$.subscribe((function(e){return d.store.commit("updateConfig",e)})),c.events$.subscribe(function(){var e=mr(_n.a.mark((function e(t){var n;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}d.store.commit("updateTokens",dr({},t.payload.token,{address:t.payload.token})),e.next=25;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}d.store.commit("updatePresence",dr({},t.meta.address,t.payload.available)),e.next=25;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,d.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=25;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,d.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=25;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=25;break}return e.next=25,d.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.channels$.subscribe((function(e){d.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){d.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return d.raiden.stop()})),c.start(),t.t0=this.store,t.next=46,this.getBalance();case 46:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=54;break}return t.t2=this.store,t.next=52,this.getBalance(c.address);case 52:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 54:t.next=60;break;case 56:t.prev=56,t.t4=t["catch"](0),l=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?Tt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?Tt["a"].RDN_STATE_MIGRATION:t.t4 instanceof wr?Tt["a"].INITIALIZATION_FAILED:Tt["a"].NO_ACCOUNT,this.store.commit("accessDenied",l);case 60:this.store.commit("loadComplete");case 61:case"end":return t.stop()}}),t,this,[[0,56]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyWithdrawalFailure",value:function(){var e=mr(_n.a.mark((function e(t,n,r){var a,o,i,c,s,u;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=kn["a"].toUnits(n,i),s="string"===typeof t?Gn.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Gn.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:Gn.t("notifications.withdrawal.failure.title"),description:u});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=mr(_n.a.mark((function e(t,n){var r,a,o,i,c;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=kn["a"].toUnits(t,o),c=kn["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:Gn.t("notifications.withdrawal.success.title"),description:Gn.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol})});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=mr(_n.a.mark((function e(t,n,r,a){var o,i,c,s;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=kn["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:Gn.t("notifications.ms-balance-proof.title"),description:Gn.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,txHash:a})});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=mr(_n.a.mark((function e(){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=mr(_n.a.mark((function e(){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=mr(_n.a.mark((function e(t){var n;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",kn["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=mr(_n.a.mark((function e(t){var n,r,a,o,i,c,s,u;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=cr(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=mr(_n.a.mark((function e(t,n,r,a){var o,i;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Et["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=mr(_n.a.mark((function e(t,n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=mr(_n.a.mark((function e(t,n,r){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=mr(_n.a.mark((function e(t,n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=mr(_n.a.mark((function e(t){var n,r=this;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=mr(_n.a.mark((function e(t){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",dr({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Sn()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=mr(_n.a.mark((function e(t,n,r,a,o){var i;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=mr(_n.a.mark((function e(t,n,r,a){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=mr(_n.a.mark((function e(){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=mr(_n.a.mark((function e(t,n,r){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=mr(_n.a.mark((function e(t,n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=mr(_n.a.mark((function e(t,n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Et["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=mr(_n.a.mark((function e(t){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=mr(_n.a.mark((function e(){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=mr(_n.a.mark((function e(t){var n,r;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",dr({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=mr(_n.a.mark((function e(){var t,n;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=mr(_n.a.mark((function e(t){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(jn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=mr(_n.a.mark((function e(t){var n;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(jn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=mr(_n.a.mark((function e(t,n){var r;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=mr(_n.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=mr(_n.a.mark((function e(n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Wn["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,Sn()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=ir(ir({},t),r[e]),delete r[e])})),i=function(){var e=mr(_n.a.mark((function e(n){return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=ir(ir({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,Sn()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=mr(_n.a.mark((function e(t){var n,r,a,o,i=arguments;return _n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,Hn.contracts();case 6:return o=e.sent,e.next=9,Et["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network"},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new wr(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),_r=function(e){Yn(n,e);var t=Xn(n);function n(){return hr(this,n),t.apply(this,arguments)}return n}(Jn(Error)),wr=function(e){Yn(n,e);var t=Xn(n);function n(){return hr(this,n),t.apply(this,arguments)}return n}(Jn(Error));function kr(e,t){e.prototype.$raiden=new Or(vn)}var jr=n("103a"),Er=n.n(jr);function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t,n){return t&&Ar(e.prototype,t),n&&Ar(e,n),e}var xr=function(){function e(){Tr(this,e),this.cache={}}return Sr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Er()(e);return this.cache[e]=n,n}}]),e}();function Nr(e,t){e.prototype.$identicon=new xr}n("5363"),n("d1e7"),n("d4b8");var Rr=n("f309");r["a"].use(Rr["a"]);var Cr=new Rr["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Dr=n("e508"),Ir=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Ir["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(gn["b"])(),r["a"].use(kr),r["a"].use(Nr),r["a"].use(Dr["a"]),new r["a"]({vuetify:Cr,router:kt,store:vn,i18n:Gn,render:function(e){return e(vt)}}).$mount("#app")},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"The monitoring service {monitoringService} successfully submitted a balance proof for a channel with {partner} claiming a reward of {reward}. ({txHash})"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"UDC Balance:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"button":"Mint and deposit","button-main":"Deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"transfer-title":"Make Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("4795"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.INFURA_ENDPOINT.startsWith("http")?t.INFURA_ENDPOINT:"https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return Iy})),n.d(t,"b",(function(){return qa})),n.d(t,"a",(function(){return De})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return pt})),n.d(t,"g",(function(){return an}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Hn})),n.d(r,"tokenMonitored",(function(){return Wn})),n.d(r,"channelOpen",(function(){return Vn})),n.d(r,"channelMonitor",(function(){return Kn})),n.d(r,"channelDeposit",(function(){return Gn})),n.d(r,"channelWithdrawn",(function(){return Zn})),n.d(r,"channelClose",(function(){return Yn})),n.d(r,"channelSettleable",(function(){return Xn})),n.d(r,"channelSettle",(function(){return Qn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return er})),n.d(a,"matrixPresence",(function(){return tr})),n.d(a,"matrixRoom",(function(){return nr})),n.d(a,"matrixRoomLeave",(function(){return rr})),n.d(a,"rtcChannel",(function(){return ar}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Ar})),n.d(o,"messageGlobalSend",(function(){return Sr})),n.d(o,"messageReceived",(function(){return xr}));var i={};n.r(i),n.d(i,"transfer",(function(){return $r})),n.d(i,"transferSigned",(function(){return qr})),n.d(i,"transferProcessed",(function(){return Hr})),n.d(i,"transferSecret",(function(){return Wr})),n.d(i,"transferSecretRegister",(function(){return Vr})),n.d(i,"transferSecretRequest",(function(){return Kr})),n.d(i,"transferSecretReveal",(function(){return Gr})),n.d(i,"transferUnlock",(function(){return Zr})),n.d(i,"transferUnlockProcessed",(function(){return Yr})),n.d(i,"transferExpire",(function(){return Xr})),n.d(i,"transferExpireProcessed",(function(){return Qr})),n.d(i,"transferRefunded",(function(){return zr})),n.d(i,"withdrawReceive",(function(){return ea})),n.d(i,"withdrawExpired",(function(){return ta}));var c={};n.r(c),n.d(c,"pathFind",(function(){return aa})),n.d(c,"pfsListUpdated",(function(){return oa})),n.d(c,"iouPersist",(function(){return ia})),n.d(c,"iouClear",(function(){return ca})),n.d(c,"udcDeposited",(function(){return sa})),n.d(c,"udcWithdraw",(function(){return la})),n.d(c,"udcWithdrawn",(function(){return da})),n.d(c,"msBalanceProofSent",(function(){return fa}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return Eu})),n.d(s,"initTokensRegistryEpic",(function(){return Tu})),n.d(s,"initMonitorChannelsEpic",(function(){return Au})),n.d(s,"initMonitorProviderEpic",(function(){return Su})),n.d(s,"tokenMonitoredEpic",(function(){return xu})),n.d(s,"channelOpenedEpic",(function(){return Nu})),n.d(s,"channelMonitoredEpic",(function(){return Du})),n.d(s,"channelOpenEpic",(function(){return Pu})),n.d(s,"channelDepositEpic",(function(){return Uu})),n.d(s,"channelCloseEpic",(function(){return Lu})),n.d(s,"channelUpdateEpic",(function(){return Mu})),n.d(s,"channelSettleEpic",(function(){return Bu})),n.d(s,"channelSettleableEpic",(function(){return Fu})),n.d(s,"channelUnlockEpic",(function(){return $u})),n.d(s,"confirmationEpic",(function(){return Hu}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Rl})),n.d(u,"matrixShutdownEpic",(function(){return Cl})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Gl})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Zl})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Yl})),n.d(u,"matrixUpdateCapsEpic",(function(){return Xl})),n.d(u,"matrixCreateRoomEpic",(function(){return dd})),n.d(u,"matrixInviteEpic",(function(){return fd})),n.d(u,"matrixHandleInvitesEpic",(function(){return pd})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return bd})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return yd})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return md})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return hd})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return vd})),n.d(u,"matrixMessageSendEpic",(function(){return Rd})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return Cd})),n.d(u,"matrixMessageReceivedEpic",(function(){return Dd})),n.d(u,"deliveredEpic",(function(){return Id})),n.d(u,"rtcConnectEpic",(function(){return rf}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return df})),n.d(l,"transferAutoExpireEpic",(function(){return Of})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Kf})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return ep})),n.d(l,"initQueuePendingReceivedEpic",(function(){return tp})),n.d(l,"transferMediateEpic",(function(){return sp})),n.d(l,"transferProcessedReceivedEpic",(function(){return mp})),n.d(l,"transferProcessedSendEpic",(function(){return hp})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return vp})),n.d(l,"transferExpireProcessedEpic",(function(){return gp})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return Op})),n.d(l,"transferRefundedEpic",(function(){return Np})),n.d(l,"transferRetryMessageEpic",(function(){return Vp})),n.d(l,"transferSecretRequestedEpic",(function(){return Jp})),n.d(l,"transferSecretRevealEpic",(function(){return tb})),n.d(l,"transferSecretRevealedEpic",(function(){return nb})),n.d(l,"transferRequestUnlockEpic",(function(){return rb})),n.d(l,"monitorSecretRegistryEpic",(function(){return ab})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return ob})),n.d(l,"transferAutoRegisterEpic",(function(){return ib})),n.d(l,"transferSecretRegisterEpic",(function(){return cb})),n.d(l,"withdrawSendConfirmationEpic",(function(){return yb})),n.d(l,"autoExpireWithdrawEpic",(function(){return hb}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return zb})),n.d(d,"pfsCapacityUpdateEpic",(function(){return Jb})),n.d(d,"pfsFeeUpdateEpic",(function(){return ey})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return ty})),n.d(d,"monitorUdcBalanceEpic",(function(){return ny})),n.d(d,"monitorRequestEpic",(function(){return ay})),n.d(d,"udcWithdrawRequestEpic",(function(){return oy})),n.d(d,"udcCheckWithdrawPlannedEpic",(function(){return iy})),n.d(d,"udcWithdrawPlannedEpic",(function(){return cy})),n.d(d,"msMonitorNewBPEpic",(function(){return sy}));var f=n("4795"),p=n.n(f),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),m=n("51b1"),h=n("aadd"),v=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(v,{createNewMatrixCall:function(){return null}});var _=n("686e"),w=n("6934"),k=n("8404"),j=n("7508"),E=n("733d"),T=n("371e"),A=n("72f0"),S=n.n(A),x=n("e380"),N=n.n(x),R=n("4b96"),C=n("b2f7"),D=n("17f5"),I=n("a748"),P=n("9586"),U=n("1b92"),L=n("d263"),M=n("ebb6"),B=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var G=function(){function e(){W(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var pe=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}var ke=function(){function e(){Oe(this,e)}return we(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,je,t)}}]),e}(),je=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var Se,xe=function(){function e(){Ee(this,e)}return Ae(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ne,t)}}]),e}(),Ne=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Re=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var Ce,De,Ie=Object(w["hexlify"])(Object(w["padZeros"])([],65)),Pe=Object(w["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ce||(Ce={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(De||(De={}));var Ue=n("bef3"),Le=n("b047c"),Me=n.n(Le),Be=n("ffa9"),Fe=n("3498"),$e=n("6f95"),qe=n("74c8"),He=n.n(qe),We=n("a32b");function Ve(e){return Ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e){return Xe(e)||Ye(e)||Ze(e)||Ge()}function Ge(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(e){if("string"===typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}function Ye(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xe(e){if(Array.isArray(e))return Qe(e)}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}function tt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function nt(e){var t=ct();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ve(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){var t="function"===typeof Map?new Map:void 0;return ot=function(e){if(null===e||!st(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return it(e,arguments,lt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,e)},ot(e)}function it(e,t,n){return it=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ut(o,n.prototype),o},it.apply(null,arguments)}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function st(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var dt=We,ft=Ue["p"](Ue["q"],Ue["v"]([Ue["q"],Ue["l"],Ue["d"],Ue["k"]])),pt=function(e){tt(n,e);var t=nt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(at(r),n.prototype),r}return et(n,[{key:"code",get:function(){var e,t=this;return null!==(e=He()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ot(Error));function bt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?it(pt,Ke(t)):new pt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var yt=Ue["h"]([Ue["t"]({name:Ue["q"]}),Ue["m"]({message:Ue["q"],stack:Ue["q"],details:ft})]),mt=new Ue["a"]("Error",(function(e){return"object"===Ve(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object($e["pipe"])(yt.decode(e),Object(Fe["map"])((function(e){return"details"in e?Object.assign(new pt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function ht(e){Be["ThrowReporter"].report(e)}function vt(e,t,n,r){try{var a=e.decode(t);return ht(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new pt(n):o}}function gt(e){return null!=e}var Ot=new Ue["a"]("BigNumber",w["BigNumber"].isBigNumber,(function(e,t){var n,r;if(w["BigNumber"].isBigNumber(e))return Ue["r"](e);try{return Ue["r"](Object(w["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Ue["f"](e,t)}}),(function(e){return e.toString()})),_t=N()((function(e){return Ue["e"](Ue["q"],(function(t){return"string"===typeof t&&(e?Object(w["hexDataLength"])(t)===e:Object(w["isHexString"])(t))}),"HexString")})),wt=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Ue["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),kt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Ue["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),jt=_t(65),Et=_t(32),Tt=_t(32),At=_t(32),St=new Ue["a"]("Address",(function(e){try{return _t(20).is(e)&&Object(w["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!_t(20).is(e))return Ue["f"](e,t);var n;try{n=Object(w["getAddress"])(e)}catch(r){return Ue["f"](e,t)}return n?Ue["r"](n):Ue["f"](e,t)}),Ue["g"]),xt=N()((function(e){return Ue["s"]([Ue["l"],e])}));function Nt(e){return[Date.now(),e]}var Rt=N()((function(e){return Ue["h"]([e,Ue["n"](Ue["t"]({signature:jt}))])})),Ct=N()((function(e){return new Ue["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Ue["r"](t):Ue["f"](t,n)}),Ue["g"])})),Dt=n("6f0b"),It=n("9044"),Pt=n("7738"),Ut=n("d3fb"),Lt=n("4b59"),Mt=n("d792"),Bt=n("4d8c"),Ft=n.n(Bt),$t=n("c707"),qt=n.n($t);function Ht(e,t){return Kt(e)||Vt(e,t)||Yt(e,t)||Wt()}function Wt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Kt(e){if(Array.isArray(e))return e}function Gt(e){return Qt(e)||Xt(e)||Yt(e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qt(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function en(e,t,n){return Object(It["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function tn(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Gt(a),[o])}},o=U["a"],i=Object(D["a"])(-1);n&&(i=Object(P["a"])((function(){return r.blockNumber?Object(D["a"])(r.blockNumber):en(r,"block").pipe(Object(F["a"])(),Object(M["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(Lt["a"])()),o=Object(Pt["a"])(n,i).pipe(Object(F["a"])(),Object(Mt["a"])((function(e){var n=Ht(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(Ut["a"])(qt()(Ft()(e),["blockNumber"]))})),Object(M["a"])(a),Object(B["a"])(gt)));var c=i.pipe(Object(Mt["a"])((function(){return Object(Ut["a"])(t)})),Object($["a"])((function(e){return en(r,e)})),Object(M["a"])(a),Object(B["a"])(gt));return Object(I["a"])(o,c)}function nn(e){return Jt(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Dt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function rn(e){var t=e.send;e.send=function(n,r){return Jt(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function an(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var on,cn=Ue["n"](Ue["p"](Ue["q"],Ue["b"]));function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var un=Ue["t"]({urls:Ue["v"]([Ue["q"],Ue["c"](Ue["q"])])}),ln=Ue["n"](Ue["h"]([Ue["t"]({matrixServerLookup:Ue["q"],revealTimeout:Ue["l"],settleTimeout:Ue["l"],httpTimeout:Ue["l"],discoveryRoom:Ue["v"]([Ue["q"],Ue["k"]]),pfsRoom:Ue["v"]([Ue["q"],Ue["k"]]),monitoringRoom:Ue["v"]([Ue["q"],Ue["k"]]),pfs:Ue["v"]([St,Ue["q"],Ue["k"]]),pfsSafetyMargin:Ue["l"],matrixExcessRooms:Ue["l"],confirmationBlocks:Ue["l"],monitoringReward:Ue["v"]([Ue["k"],kt(32)]),logger:Ue["i"]((on={},sn(on,"",null),sn(on,"trace",null),sn(on,"debug",null),sn(on,"info",null),sn(on,"warn",null),sn(on,"error",null),on)),caps:Ue["v"]([Ue["k"],cn]),fallbackIceServers:Ue["c"](un),rateToSvt:Ue["p"](Ue["q"],kt(32))}),Ue["m"]({matrixServer:Ue["q"],subkey:Ue["d"]})])),dn=Ue["n"](Ue["m"](Object.assign(Object.assign({},ln.type.types["0"].props),ln.type.types["1"].props)));function fn(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(an(r),"_discovery"),pfsRoom:"raiden_".concat(an(r),"_path_finding"),monitoringRoom:"raiden_".concat(an(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(w["parseEther"])("5"),logger:"info",caps:(n={},sn(n,De.NO_DELIVERY,!0),sn(n,De.NO_MEDIATE,!0),sn(n,De.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var pn=n("4472"),bn=n.n(pn),yn=n("f9ce"),mn=n.n(yn),hn=n("c5a2"),vn=n.n(hn),gn=n("f49b"),On=n.n(gn);function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wn(e){return Tn(e)||En(e)||jn(e)||kn()}function kn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jn(e,t){if(e){if("string"===typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?An(e,t):void 0}}function En(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Tn(e){if(Array.isArray(e))return An(e)}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function xn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Ue["t"](Object.assign(Object.assign(Object.assign({type:Ue["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Ue["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Rn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Ue["b"],c=Nn(t,a,e),s=Nn(n,o,e),u=Nn(r,i,e,!0);return{request:c,success:s,failure:u}}function Cn(e){var t=function(t){return On()(t.meta,e,(function(e,t){return Ot.is(e)&&Ot.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Dn(e,t){var n=function(n){return xn([e.success,e.failure],n)&&Cn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function In(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Dn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Pn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?In(e,t):Dn(e,t)),Object(M["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function Un(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return bt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(wn(a.map((function(e){return _n({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Ln,Mn=Ue["q"],Bn=(Ue["q"],Ue["h"]([Ue["t"]({amount:kt(32),expiration:kt(32),secrethash:Et}),Ue["m"]({registered:Ue["j"](!0)})],"Lock")),Fn=Ue["n"](Ue["t"]({chainId:kt(32),tokenNetworkAddress:St,channelId:kt(32),nonce:kt(8),transferredAmount:kt(32),lockedAmount:kt(32),locksroot:Et,additionalHash:Et})),$n={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Pe,additionalHash:k["HashZero"],signature:Ie},qn=Ue["t"]({tokenNetwork:St,partner:St}),Hn=Nn("block/new",Ue["t"]({blockNumber:Ue["l"]})),Wn=Nn("token/monitored",Ue["h"]([Ue["t"]({token:St,tokenNetwork:St}),Ue["m"]({fromBlock:Ue["l"]})])),Vn=Rn(qn,"channel/open/request","channel/open/success","channel/open/failed",Ue["m"]({settleTimeout:Ue["l"],subkey:Ue["d"],deposit:kt(32)}),Ue["t"]({id:Ue["l"],token:St,settleTimeout:Ue["l"],isFirstParticipant:Ue["d"],txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Kn=Nn("channel/monitor",Ue["h"]([Ue["t"]({id:Ue["l"]}),Ue["m"]({fromBlock:Ue["l"]})]),qn),Gn=Rn(qn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Ue["h"]([Ue["t"]({deposit:kt(32)}),Ue["m"]({subkey:Ue["d"]})]),Ue["t"]({id:Ue["l"],participant:St,totalDeposit:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Zn=Nn("channel/withdraw/success",Ue["t"]({id:Ue["l"],participant:St,totalWithdraw:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),qn),Yn=Rn(qn,"channel/close/request","channel/close/success","channel/close/failure",Ue["v"]([Ue["m"]({subkey:Ue["d"]}),Ue["u"]]),Ue["t"]({id:Ue["l"],participant:St,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Xn=Nn("channel/settleable",Ue["t"]({settleableBlock:Ue["l"]}),qn),Qn=Rn(qn,"channel/settle/request","channel/settle/success","channel/settle/failure",Ue["v"]([Ue["m"]({subkey:Ue["d"]}),Ue["u"]]),Ue["h"]([Ue["t"]({id:Ue["l"],txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),Ue["m"]({locks:Ue["o"](Bn)})])),zn=Ue["n"](Ue["t"]({userId:Ue["q"],accessToken:Ue["q"],deviceId:Ue["q"],displayName:Ue["q"]})),Jn=Ue["t"]({address:St}),er=Nn("matrix/setup",Ue["t"]({server:Ue["q"],setup:zn})),tr=Rn(Jn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Ue["h"]([Ue["t"]({userId:Ue["q"],available:Ue["d"],ts:Ue["l"]}),Ue["m"]({caps:Ue["p"](Ue["q"],Ue["b"])})])),nr=Nn("matrix/room",Ue["t"]({roomId:Ue["q"]}),Jn),rr=Nn("matrix/room/leave",Ue["t"]({roomId:Ue["q"]}),Jn),ar=Nn("rtc/channel",Ue["v"]([Ue["u"],Ct(RTCDataChannel)]),Jn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Ln||(Ln={}));var or,ir=Ue["n"](Ue["t"]({message_identifier:kt(8)})),cr=Ue["n"](Ue["t"]({type:Ue["j"](Ln.DELIVERED),delivered_message_identifier:kt(8)})),sr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.PROCESSED)}),ir])),ur=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.SECRET_REQUEST),payment_identifier:kt(8),secrethash:Et,amount:kt(32),expiration:kt(32)}),ir])),lr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.SECRET_REVEAL),secret:Tt}),ir])),dr=Ue["n"](Ue["h"]([Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),transferred_amount:kt(32),locked_amount:kt(32),locksroot:Et}),ir])),fr=Ue["n"](Ue["t"]({route:Ue["o"](St)})),pr=Ue["n"](Ue["t"]({routes:Ue["o"](fr)})),br=Ue["n"](Ue["h"]([Ue["t"]({payment_identifier:kt(8),token:St,recipient:St,lock:Bn,target:St,initiator:St,metadata:pr}),dr])),yr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.LOCKED_TRANSFER)}),br])),mr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.REFUND_TRANSFER)}),br])),hr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.UNLOCK),payment_identifier:kt(8),secret:Tt}),dr])),vr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.LOCK_EXPIRED),recipient:St,secrethash:Et}),dr])),gr=Ue["n"](Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),participant:St,total_withdraw:kt(32),nonce:kt(8),expiration:kt(32)})),Or=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.WITHDRAW_REQUEST)}),gr,ir])),_r=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.WITHDRAW_CONFIRMATION)}),gr,ir])),wr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Ln.WITHDRAW_EXPIRED)}),gr,ir])),kr=Ue["n"](Ue["t"]({type:Ue["j"](Ln.PFS_CAPACITY_UPDATE),canonical_identifier:Ue["n"](Ue["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,other_participant:St,updating_nonce:kt(8),other_nonce:kt(8),updating_capacity:kt(32),other_capacity:kt(32),reveal_timeout:kt(32)})),jr=Ue["n"](Ue["t"]({type:Ue["j"](Ln.PFS_FEE_UPDATE),canonical_identifier:Ue["n"](Ue["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,timestamp:Ue["q"],fee_schedule:Ue["t"]({cap_fees:Ue["d"],imbalance_penalty:Ue["v"]([Ue["k"],Ue["c"](Ue["s"]([kt(32),wt(32)]))]),proportional:wt(32),flat:wt(32)})})),Er=Ue["n"](Ue["t"]({type:Ue["j"](Ln.MONITOR_REQUEST),balance_proof:Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),balance_hash:Et,additional_hash:Et,signature:jt}),monitoring_service_contract_address:St,non_closing_participant:St,non_closing_signature:jt,reward_amount:kt(32)})),Tr=Ue["v"]([cr,sr,ur,lr,yr,mr,hr,vr,Or,_r,wr,kr,jr,Er]),Ar=Rn(Ue["t"]({address:St,msgId:Ue["q"]}),"message/send/request","message/send/success","message/send/failure",Ue["t"]({message:Ue["v"]([Ue["q"],Rt(Tr)])}),void 0),Sr=Nn("message/global/send",Ue["t"]({message:Ue["v"]([Ue["q"],Rt(Tr)])}),Ue["t"]({roomName:Ue["q"]})),xr=Nn("message/received",Ue["h"]([Ue["t"]({text:Ue["q"],ts:Ue["l"]}),Ue["m"]({message:Ue["v"]([Tr,Rt(Tr)]),userId:Ue["q"],roomId:Ue["q"]})]),Ue["t"]({address:St})),Nr=n("27f3"),Rr=n.n(Nr),Cr=Ue["n"](Ue["h"]([Ue["t"]({result:Ue["c"](Ue["n"](Ue["t"]({path:Ue["o"](St),estimated_fee:wt(32)})))}),Ue["m"]({feedback_token:Ue["q"]})])),Dr=Ue["c"](Ue["n"](Ue["t"]({path:Ue["o"](St),fee:wt(32)}))),Ir=Ue["n"](Ue["t"]({address:St,url:Ue["q"],rtt:Ue["l"],price:kt(32),token:St})),Pr=Ue["n"](Ue["t"]({sender:St,receiver:St,amount:kt(32),expiration_block:kt(32),one_to_n_address:St,chain_id:kt(32)})),Ur=Ue["n"](Ue["t"]({last_iou:Rt(Pr)})),Lr={SENT:"sent",RECEIVED:"received"},Mr=Ue["n"](Ue["h"]([Ue["t"]({transfer:xt(Rt(yr)),fee:wt(32),partner:St}),Ue["m"]({secret:xt(Ue["t"]({value:Tt,registerBlock:Ue["l"]})),transferProcessed:xt(Rt(sr)),refund:xt(Rt(mr)),channelClosed:xt(Et),secretRequest:xt(Rt(ur)),secretReveal:xt(Rt(lr)),unlock:xt(Rt(hr)),lockExpired:xt(Rt(vr)),unlockProcessed:xt(Rt(sr)),lockExpiredProcessed:xt(Rt(sr))})])),Br=Ue["n"](Ue["p"](Ue["q"],Mr));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(or||(or={}));var Fr=Ue["t"]({secrethash:Et,direction:Ue["i"](Rr()(Lr))}),$r=Rn(Fr,"transfer/request","transfer/success","transfer/failure",Ue["h"]([Ue["t"]({tokenNetwork:St,target:St,value:kt(32),paths:Dr,paymentId:kt(8)}),Ue["m"]({secret:Tt,expiration:Ue["l"],initiator:St})]),Ue["m"]({balanceProof:Rt(Fn)})),qr=Nn("transfer/signed",Ue["t"]({message:Rt(yr),fee:wt(32),partner:St}),Fr),Hr=Nn("transfer/processed",Ue["t"]({message:Rt(sr)}),Fr),Wr=Nn("transfer/secret",Ue["t"]({secret:Tt}),Fr),Vr=Rn(Fr,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Ue["h"]([Ue["t"]({secret:Tt}),Ue["m"]({subkey:Ue["d"]})]),Ue["t"]({secret:Tt,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Kr=Nn("transfer/secret/request",Ue["t"]({message:Rt(ur)}),Fr),Gr=Nn("transfer/secret/reveal",Ue["t"]({message:Rt(lr)}),Fr),Zr=Rn(Fr,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Ue["t"]({message:Rt(hr),partner:St})),Yr=Nn("transfer/unlock/processed",Ue["t"]({message:Rt(sr)}),Fr),Xr=Rn(Fr,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Ue["t"]({message:Rt(vr),partner:St})),Qr=Nn("transfer/expire/processed",Ue["t"]({message:Rt(sr)}),Fr),zr=Nn("transfer/refunded",Ue["t"]({message:Rt(mr),partner:St}),Fr),Jr=Ue["t"]({tokenNetwork:St,partner:St,totalWithdraw:kt(32),expiration:Ue["l"]}),ea=Rn(Jr,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Ue["t"]({message:Rt(Or)}),Ue["t"]({message:Rt(_r)}),Ue["t"]({message:Rt(wr)})),ta=Nn("withdraw/expired",Ue["t"]({participant:St}),Jr),na=Ue["t"]({tokenNetwork:St,target:St,value:kt(32)}),ra=Ue["t"]({tokenNetwork:St,serviceAddress:St}),aa=Rn(na,"path/find/request","path/find/success","path/find/failure",Ue["m"]({paths:Dr,pfs:Ue["v"]([Ir,Ue["k"]])}),Ue["t"]({paths:Dr})),oa=Nn("pfs/list/updated",Ue["t"]({pfsList:Ue["o"](St)})),ia=Nn("iou/persist",Ue["t"]({iou:Rt(Pr)}),ra),ca=Nn("iou/clear",void 0,ra),sa=Nn("udc/deposited",kt(32)),ua=Ue["t"]({amount:kt(32)}),la=Rn(ua,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Ue["u"],Ue["h"]([Ue["t"]({block:Ue["l"]}),Ue["m"]({txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})])),da=Nn("udc/withdrawn",Ue["t"]({withdrawal:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),ua),fa=Nn("ms/balanceProof/sent",Ue["t"]({tokenNetwork:St,partner:St,id:Ue["l"],reward:kt(32),nonce:kt(8),monitoringService:St,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}));function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba=Nn("raiden/shutdown",Ue["t"]({reason:Ue["v"]([Ue["j"](Ce.STOP),Ue["j"](Ce.ACCOUNT_CHANGED),Ue["j"](Ce.NETWORK_CHANGED),mt])})),ya=Nn("raiden/config/update",dn),ma=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:ba,raidenConfigUpdate:ya},r),a),o),i),c),ha=[ma.raidenShutdown,ma.newBlock,ma.matrixPresence.success,ma.tokenMonitored,ma.udcWithdrawn,ma.udcWithdraw.failure,ma.msBalanceProofSent],va=vn()(ma,(function(e,t){return Object.assign(Object.assign({},e),"type"in t?pa({},t.type,t):bn()(t,mn()("type")))}),{}),ga=Ue["n"](Ue["t"]({type:Ue["q"],payload:Ue["n"](Ue["t"]({txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}))})),Oa=new Ue["a"]("ConfirmableAction",ga.is,(function(e,t){return Fe["either"].chain(ga.validate(e,t),(function(e){var n=e.type;return n in va?va[n].codec.validate(e,t):Ue["f"](e,t)}))}),(function(e){return va[e.type].codec.encode(e)}));function _a(e){return Object.assign(Object.assign({},e),{version:0})}function wa(e,t){return Aa(e)||Ta(e,t)||ja(e,t)||ka()}function ka(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ja(e,t){if(e){if("string"===typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,t):void 0}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ta(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Aa(e){if(Array.isArray(e))return e}function Sa(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=wa(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function xa(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var Na=n("948b"),Ra=n("3b2b"),Ca=n("ad02");function Da(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ia(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(w["bigNumberify"])(e)),"string"!==typeof e||Object(Na["isHexString"])(e)||(e=Object(w["toUtf8Bytes"])(e)),Object(Na["isArrayish"])(e)&&(e=Object(Na["hexlify"])(e)),Ot.is(e)){if(e.lt(0))throw new pt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new pt(dt.DTA_NUMBER_TOO_LARGE);n=Object(Na["hexZeroPad"])(Object(Na["hexlify"])(e),t)}else{if("string"!==typeof e)throw new pt(dt.DTA_UNENCODABLE_DATA);if(Object(Na["hexDataLength"])(e)!==t)throw new pt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var Pa,Ua=function(e){return null!=e&&e["isLosslessNumber"]};function La(e){return Ca["parse"](e,(function(e,t){if(Da(e),Ua(t))try{return t.valueOf()}catch(n){return Object(w["bigNumberify"])(t.toString())}return t}))}function Ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Da(e),w["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return Ca["stringify"](e,t,n)}function Ba(e){return Ba="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(e)}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $a,qa,Ha=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Wa=(Pa={},Fa(Pa,Ln.DELIVERED,12),Fa(Pa,Ln.PROCESSED,0),Fa(Pa,Ln.SECRET_REQUEST,3),Fa(Pa,Ln.SECRET_REVEAL,11),Fa(Pa,Ln.LOCKED_TRANSFER,7),Fa(Pa,Ln.REFUND_TRANSFER,8),Fa(Pa,Ln.UNLOCK,4),Fa(Pa,Ln.LOCK_EXPIRED,13),Fa(Pa,Ln.WITHDRAW_REQUEST,15),Fa(Pa,Ln.WITHDRAW_CONFIRMATION,16),Fa(Pa,Ln.WITHDRAW_EXPIRED,17),Fa(Pa,Ln.PFS_CAPACITY_UPDATE,-1),Fa(Pa,Ln.PFS_FEE_UPDATE,-1),Fa(Pa,Ln.MONITOR_REQUEST,-1),Pa);function Va(e){var t=e.routes.map((function(e){return Object(w["keccak256"])(w["RLP"].encode(e.route))}));return Object(w["keccak256"])(w["RLP"].encode(t))}function Ka(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Pe)?k["HashZero"]:Object(w["keccak256"])(Object(Na["concat"])([Ia(t,32),Ia(n,32),Ia(r,32)]))}function Ga(e){switch(e.type){case Ln.LOCKED_TRANSFER:case Ln.REFUND_TRANSFER:var t=Object(Na["concat"])([Ia(Wa[e.type],1),Ia(e.message_identifier,8),Ia(e.payment_identifier,8),Ia(e.lock.expiration,32),Ia(e.token,20),Ia(e.recipient,20),Ia(e.target,20),Ia(e.initiator,20),Ia(e.lock.secrethash,32),Ia(e.lock.amount,32)]);return e.type===Ln.LOCKED_TRANSFER&&(t=Object(Na["concat"])([t,Va(e.metadata)])),Object(w["keccak256"])(t);case Ln.UNLOCK:return Object(w["keccak256"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(e.message_identifier,8),Ia(e.payment_identifier,8),Ia(e.secret,32)]));case Ln.LOCK_EXPIRED:return Object(w["keccak256"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(e.message_identifier,8),Ia(e.recipient,20),Ia(e.secrethash,32)]))}}function Za(e){var t;switch(e.type){case Ln.DELIVERED:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(0,3),Ia(e.delivered_message_identifier,8)]));case Ln.PROCESSED:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(0,3),Ia(e.message_identifier,8)]));case Ln.LOCKED_TRANSFER:case Ln.REFUND_TRANSFER:case Ln.UNLOCK:case Ln.LOCK_EXPIRED:var n=Ga(e),r=Ka({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(Na["hexlify"])(Object(Na["concat"])([Ia(e.token_network_address,20),Ia(e.chain_id,32),Ia($a.BALANCE_PROOF,32),Ia(e.channel_identifier,32),Ia(r,32),Ia(e.nonce,32),Ia(n,32)]));case Ln.SECRET_REQUEST:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(0,3),Ia(e.message_identifier,8),Ia(e.payment_identifier,8),Ia(e.secrethash,32),Ia(e.amount,32),Ia(e.expiration,32)]));case Ln.SECRET_REVEAL:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(0,3),Ia(e.message_identifier,8),Ia(e.secret,32)]));case Ln.WITHDRAW_REQUEST:case Ln.WITHDRAW_CONFIRMATION:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(e.token_network_address,20),Ia(e.chain_id,32),Ia($a.WITHDRAW,32),Ia(e.channel_identifier,32),Ia(e.participant,20),Ia(e.total_withdraw,32),Ia(e.expiration,32)]));case Ln.WITHDRAW_EXPIRED:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(Wa[e.type],1),Ia(0,3),Ia(e.nonce,32),Ia(e.message_identifier,8),Ia(e.token_network_address,20),Ia(e.chain_id,32),Ia($a.WITHDRAW,32),Ia(e.channel_identifier,32),Ia(e.participant,20),Ia(e.total_withdraw,32),Ia(e.expiration,32)]));case Ln.PFS_CAPACITY_UPDATE:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(e.canonical_identifier.chain_identifier,32),Ia(e.canonical_identifier.token_network_address,20),Ia(e.canonical_identifier.channel_identifier,32),Ia(e.updating_participant,20),Ia(e.other_participant,20),Ia(e.updating_nonce,8),Ia(e.other_nonce,8),Ia(e.updating_capacity,32),Ia(e.other_capacity,32),Ia(e.reveal_timeout,32)]));case Ln.PFS_FEE_UPDATE:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(e.canonical_identifier.chain_identifier,32),Ia(e.canonical_identifier.token_network_address,20),Ia(e.canonical_identifier.channel_identifier,32),Ia(e.updating_participant,20),Ia(e.fee_schedule.cap_fees,1),Ia(e.fee_schedule.flat,32),Ia(e.fee_schedule.proportional,32),Object(Ra["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Ia(e.timestamp,19)]));case Ln.MONITOR_REQUEST:return Object(Na["hexlify"])(Object(Na["concat"])([Ia(e.monitoring_service_contract_address,20),Ia(e.balance_proof.chain_id,32),Ia($a.MS_REWARD,32),Ia(e.balance_proof.token_network_address,20),Ia(e.non_closing_participant,20),Ia(e.non_closing_signature,65),Ia(e.reward_amount,32)]))}}function Ya(e){return jt.is(e.signature)}function Xa(e){return Object(w["verifyMessage"])(Object(Na["arrayify"])(Za(e)),e.signature)}function Qa(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:Ga(e),signature:e.signature}}function za(e){return Ma("signature"in e?Rt(Tr).encode(e):Tr.encode(e))}function Ja(e){var t=La(e);return bt(t&&"object"===Ba(t)&&"type"in t&&Object.values(Ln).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),vt("signature"in t?Rt(Tr):Tr,t)}function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return Ha(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Ya(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(Na["arrayify"])(Za(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function to(e){return function(t){return xr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})($a||($a={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(qa||(qa={}));var no=Ue["n"](Ue["t"]({address:St,deposit:kt(32),withdraw:kt(32),locks:Ue["o"](Bn),balanceProof:Rt(Fn),withdrawRequests:Ue["o"](Rt(Or)),nextNonce:kt(8)})),ro=Ue["h"]([Ue["n"](Ue["t"]({id:Ue["l"],token:St,tokenNetwork:St,settleTimeout:Ue["l"],isFirstParticipant:Ue["d"],openBlock:Ue["l"],own:no,partner:no})),Ue["v"]([Ue["n"](Ue["t"]({state:Ue["v"]([Ue["j"](qa.open),Ue["j"](qa.closing)])})),Ue["h"]([Ue["n"](Ue["t"]({closeBlock:Ue["l"],closeParticipant:St})),Ue["v"]([Ue["n"](Ue["t"]({state:Ue["v"]([Ue["j"](qa.closed),Ue["j"](qa.settleable),Ue["j"](qa.settling)])})),Ue["n"](Ue["t"]({state:Ue["j"](qa.settled),settleBlock:Ue["l"]}))])])])]);function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(e,t){return lo(e)||uo(e,t)||co(e,t)||io()}function io(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function co(e,t){if(e){if("string"===typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lo(e){if(Array.isArray(e))return e}function fo(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=oo(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:$n,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function po(e){for(var t,n={},r=function(){for(var t=oo(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=oo(s[c],2),l=u[0],d=u[1];fo(d,{own:e.address,partner:l});var f=He()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:f,tokenNetwork:r}),Object.assign(n,ao({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function bo(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=yo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function yo(e,t){if(e){if("string"===typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(e,t):void 0}}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ho(e){var t,n=bo(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(w["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}var vo=[_a,Sa,xa,po,ho],go=vo.length-1;function Oo(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:go,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(vo[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var _o=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},wo=Ue["n"](Ue["t"]({address:St,version:Ue["j"](go),chainId:Ue["l"],registry:St,blockNumber:Ue["l"],config:dn,channels:Ue["n"](Ue["p"](Mn,ro)),oldChannels:Ue["n"](Ue["p"](Ue["q"],ro)),tokens:Ue["n"](Ue["p"](Ue["q"],St)),transport:Ue["n"](Ue["m"]({server:Ue["q"],setup:zn,rooms:Ue["n"](Ue["p"](Ue["q"],Ue["c"](Ue["q"])))})),sent:Br,received:Br,iou:Ue["n"](Ue["p"](Ue["q"],Ue["p"](Ue["q"],Rt(Pr)))),pendingTxs:Ue["o"](Oa)}));function ko(e){return Ma(wo.encode(e),void 0,2)}function jo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=La(e));var r=Oo(e,go,{log:n});try{return vt(wo,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function Eo(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({address:n,version:go,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var To=Eo({network:Object(w["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0}}}),Ao=function(e){return e&&"function"===typeof e.getItem},So=function(e,t,n,r,a){return _o(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,d,f,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Ao(r)?(u=r,l=void 0):Ao(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=jo(l,{log:i})),!u){o.next=23;break}return f="raiden_".concat(an(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(f);case 8:if(b=o.sent,!b){o.next=20;break}if(m=jo(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new pt(dt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Me()((function(e){u.setItem(f,ko(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=Eo({network:e,address:n,contractsInfo:t})),v=fn({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},xo=n("9bf7"),No=n.n(xo);function Ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),Ro({},o,s)))}}return r}}var Do=n("c4cc"),Io=n("2313"),Po=n("9f2d"),Uo=n("69dd"),Lo=n("742d");function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bo(e,t){return Wo(e)||Ho(e,t)||$o(e,t)||Fo()}function Fo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $o(e,t){if(e){if("string"===typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(e,t):void 0}}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ho(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wo(e){if(Array.isArray(e))return e}function Vo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(Uo["a"])())}}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(Uo["a"])(),Object($["a"])((function(e){return Object(Ut["a"])(Object.entries(e))})),Object(Lo["a"])((function(t,n){var r=t.acc,a=Bo(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),Mo({},o,i)),changed:[o,i]}}),{acc:{}}),Object(q["a"])("changed"),Object(B["a"])(gt))}}function Go(e,t){return Xo(e)||Yo(e,t)||Jo(e,t)||Zo()}function Zo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xo(e){if(Array.isArray(e))return e}function Qo(e){return ti(e)||ei(e)||Jo(e)||zo()}function zo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jo(e,t){if(e){if("string"===typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}function ei(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ti(e){if(Array.isArray(e))return ni(e)}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function ai(e){return"".concat(e.id,"#").concat(ri(e))}function oi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function ii(e){var t=k["Zero"];if(e.state!==qa.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,ownOnchainUnlocked:t,ownUnlocked:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t,partnerOnchainUnlocked:t,partnerUnlocked:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=oi.apply(void 0,[n].concat(Qo(e.own.withdrawRequests.map((function(e){return e.total_withdraw}))))),d=oi.apply(void 0,[r].concat(Qo(e.partner.withdrawRequests.map((function(e){return e.total_withdraw}))))),f=e.own.deposit.sub(l).sub(i).add(s),p=e.partner.deposit.sub(d).sub(c).add(u),b=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),y=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),m=a.add(b),h=o.add(y);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:f,ownOnchainUnlocked:b,ownUnlocked:m,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:p,partnerOnchainUnlocked:y,partnerUnlocked:h}}function ci(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Do["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(e){return e.wait()})),Object(M["a"])((function(n){var a,o,i;if(!n.status||!n.transactionHash||!n.blockNumber)throw new pt(t,{status:null!==(a=n.status)&&void 0!==a?a:null,transactionHash:null!==(o=n.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=n.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(n.transactionHash,'" successfuly mined!')),n})))}}function si(e){return e.pipe(Object(q["a"])("channels"),Ko(),Object(q["a"])(1),Object(Io["a"])(ai,void 0,void 0,(function(){return new R["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=Go(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(Po["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function ui(e){return ui="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function li(e,t){return pi(e)||fi(e,t)||mi(e,t)||di()}function di(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pi(e){if(Array.isArray(e))return e}function bi(e){return vi(e)||hi(e)||mi(e)||yi()}function yi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mi(e,t){if(e){if("string"===typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gi(e,t):void 0}}function hi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function vi(e){if(Array.isArray(e))return gi(e)}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var wi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ki=Un(To.blockNumber).handle(Hn,(function(e,t){_i(e);var n=t.payload;return n.blockNumber})),ji=Un(To.tokens).handle(Wn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:Object.assign(Object.assign({},e),Oi({},r,a))})),Ei=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Oa.is(t)){if(void 0===t.payload.confirmed)return[].concat(bi(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},Ti={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:$n,withdrawRequests:[],nextNonce:k["One"]};function Ai(e,t){var n,r,a=ri(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:qa.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},Ti),{address:e.address}),partner:Object.assign(Object.assign({},Ti),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},a,i))})}function Si(e,t){var n;if(!t.payload.confirmed)return e;var r=ri(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==qa.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Zn.is(t)?["withdraw",t.payload.totalWithdraw,a[o].withdrawRequests.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].withdrawRequests],c=li(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),Oi({},o,Object.assign(Object.assign({},a[o]),(n={},Oi(n,s,u),Oi(n,"withdrawRequests",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},r,a))}))}function xi(e,t){var n=ri(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===qa.open)r=Object.assign(Object.assign({},r),{state:qa.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:qa.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},n,r))})}function Ni(e,t){var n=ri(t.meta),r=e.channels[n];if(!r)return e;if(Yn.request.is(t)&&r.state===qa.open)r=Object.assign(Object.assign({},r),{state:qa.closing});else if(Qn.request.is(t)&&r.state===qa.settleable)r=Object.assign(Object.assign({},r),{state:qa.settling});else{if(!Xn.is(t)||r.state!==qa.closed)return e;r=Object.assign(Object.assign({},r),{state:qa.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},n,r))})}function Ri(e,t){var n=ri(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==qa.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},n,Object.assign(Object.assign({},r),{state:qa.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],wi(a,["symbol"===ui(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),Oi({},ai(r),Object.assign(Object.assign({},r),{state:qa.settled,settleBlock:t.payload.txBlock})))})}return e}function Ci(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=ri({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===Lr.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Oi({},a,Object.assign(Object.assign({},e.channels[a]),Oi({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var Di=Un(To).handle(Vn.success,Ai).handle([Gn.success,Zn],Si).handle([Yn.request,Xn,Qn.request],Ni).handle(Yn.success,xi).handle(Qn.success,Ri).handle(Vr.success,Ci),Ii=Co({blockNumber:ki,tokens:ji,pendingTxs:Ei},To),Pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To,t=arguments.length>1?arguments[1]:void 0;return[Ii,Di].reduce((function(e,n){return n(e,t)}),e)},Ui=Pi;function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mi(e){return qi(e)||$i(e)||Fi(e)||Bi()}function Bi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fi(e,t){if(e){if("string"===typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function $i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function qi(e){if(Array.isArray(e))return Hi(e)}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wi,Vi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ki=Un(To.transport).handle(er,(function(e,t){e.rooms;var n=Vi(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(nr,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Li({},t.meta.address,[t.payload.roomId].concat(Mi((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(rr,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Li({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Gi=Co({transport:Ki},To),Zi=Gi;function Yi(e){return zi(e)||Qi(e)||tc(e)||Xi()}function Xi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function zi(e){if(Array.isArray(e))return nc(e)}function Ji(e,t){return ac(e)||rc(e,t)||tc(e,t)||ec()}function ec(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tc(e,t){if(e){if("string"===typeof e)return nc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nc(e,t):void 0}}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ac(e){if(Array.isArray(e))return e}function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ic=(Wi={},oc(Wi,Lr.SENT,"own"),oc(Wi,Lr.RECEIVED,"partner"),Wi);function cc(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Vr.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:Nt({value:t.payload.secret,registerBlock:u})})))))),e}function sc(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=ri({tokenNetwork:a,partner:o}),c=ic[t.meta.direction],s=e.channels[i];if(qr.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==qa.open||!n.nonce.eq(s[c].nextNonce))return e;var u=qr.is(t)?[[].concat(Yi(s[c].locks),[t.payload.message.lock]),{transfer:Nt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),oc({},Zr.success.is(t)?"unlock":"lockExpired",Nt(t.payload.message)))],l=Ji(u,2),d=l[0],f=l[1];return s=Object.assign(Object.assign({},s),oc({},c,Object.assign(Object.assign({},s[c]),{locks:d,balanceProof:Qa(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),oc({channels:Object.assign(Object.assign({},e.channels),oc({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},r,f))))}function uc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:Nt(t.payload.message)}))))):e}function lc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:Nt(t.payload.message)})))))}function dc(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Hr.is(t))n="transferProcessed";else if(Yr.is(t))n="unlockProcessed";else if(Qr.is(t))n="lockExpiredProcessed";else{if(!zr.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),oc({},n,Nt(t.payload.message)))))))}function fc(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Ji(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),oc({},i,Object.assign(Object.assign({},c),{channelClosed:Nt(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var f=Ji(d[l],2),p=f[0],b=f[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),oc({},p,Object.assign(Object.assign({},b),{channelClosed:Nt(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function pc(e,t){var n=t.payload.message,r=ri(t.meta),a=n.participant===t.meta.partner!==ea.success.is(t)?"partner":"own",o=e.channels[r];if((null===o||void 0===o?void 0:o.state)!==qa.open||!n.nonce.eq(o[a].nextNonce))return e;var i=o[a].withdrawRequests;return ea.request.is(t)&&(i=[].concat(Yi(o[a].withdrawRequests),[t.payload.message])),o=Object.assign(Object.assign({},o),oc({},a,Object.assign(Object.assign({},o[a]),{withdrawRequests:i,nextNonce:o[a].nextNonce.add(1)}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),oc({},r,o))})}function bc(e,t){var n=ri(t.meta),r=t.payload.participant===t.meta.partner?"partner":"own",a=e.channels[n];if((null===a||void 0===a?void 0:a.state)!==qa.open)return e;var o=a[r].withdrawRequests.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return a=Object.assign(Object.assign({},a),oc({},r,Object.assign(Object.assign({},a[r]),{withdrawRequests:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),oc({},n,a))})}var yc=Un(To).handle([Wr,Vr.success],cc).handle([qr,Zr.success,Xr.success],sc).handle([Hr,Yr,Qr,zr],dc).handle(Kr,uc).handle(Gr,lc).handle(Yn.success,fc).handle([ea.request,ea.success,ea.failure],pc).handle(ta,bc),mc=yc;function hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vc=Un(To.iou).handle(ia,(function(e,t){return Object.assign(Object.assign({},e),hc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),hc({},t.meta.serviceAddress,t.payload.iou))))})).handle(ca,(function(e,t){return No()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),gc=Co({iou:vc},To),Oc=gc;function _c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wc(e,t){return Ac(e)||Tc(e,t)||jc(e,t)||kc()}function kc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jc(e,t){if(e){if("string"===typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ec(e,t):void 0}}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ac(e){if(Array.isArray(e))return e}var Sc=Un(To).handle(ya,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=wc(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),_c({},c,s)):c in r&&(r=No()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),xc={configReducer:Sc,channelsReducer:Ui,transportReducer:Zi,transfersReducer:mc,servicesReducer:Oc},Nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To,t=arguments.length>1?arguments[1]:void 0;return Object.values(xc).reduce((function(e,n){return n(e,t)}),e)},Rc=n("a744"),Cc=n("8ef6"),Dc=n("f59d"),Ic=n("a0ac"),Pc=n.n(Ic),Uc=n("63ea"),Lc=n.n(Uc);function Mc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=$c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Bc(e,t){return Wc(e)||Hc(e,t)||$c(e,t)||Fc()}function Fc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $c(e,t){if(e){if("string"===typeof e)return qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qc(e,t):void 0}}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wc(e){if(Array.isArray(e))return e}function Vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kc=N()((function(e){return e.pipe(Object(B["a"])(tr.success.is),Object(Lo["a"])((function(e,t){return Object.assign(Object.assign({},e),Vc({},t.meta.address,t))}),{}),Object(Lt["a"])(),Object(Rc["a"])({}))}));function Gc(e){return Object.entries(e).filter((function(e){var t=Bc(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=Bc(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Zc(e){var t;if(e){var n={};try{var r,a=Mc(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Yc,Xc=n("808d"),Qc=n("5e53"),zc=n("744c"),Jc=n("c575"),es=n("66aa"),ts=n("b7d7"),ns=n("6863"),rs=n("e95d"),as=n("fcf1"),os=n("b4cc1"),is=n("0318"),cs=n("8f41"),ss=n("0ca2"),us=n("b389"),ls=n("13ea"),ds=n.n(ls),fs=n("cd9d"),ps=n.n(fs),bs=n("8358"),ys=n("ddfd");function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hs(e,t){return Os(e)||gs(e,t)||ws(e,t)||vs()}function vs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Os(e){if(Array.isArray(e))return e}function _s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ws(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ws(e,t){if(e){if("string"===typeof e)return ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ks(e,t):void 0}}function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function js(e){var t,n=[],r=_s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Ia(a.expiration,32),Ia(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(w["keccak256"])(Object(Na["concat"])(n))}function Es(e){return Object(w["sha256"])(e)}function Ts(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(Na["hexlify"])(Object(w["randomBytes"])(e))}function As(){return Object(w["bigNumberify"])(Date.now())}function Ss(){return Object(w["bigNumberify"])(Date.now())}function xs(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?Lr.SENT:Lr.RECEIVED}function Ns(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(xs(e),":").concat(e.transfer[1].lock.secrethash)}var Rs=new RegExp("^(".concat(Object.values(Lr).join("|"),"):0x[a-z0-9]{64}$"),"i");function Cs(e){bt(Rs.test(e),"Invalid transferKey format");var t=e.split(":"),n=hs(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function Ds(e){return function(t){return t[e]?t[e][0]:void 0}}var Is=(Yc={},ms(Yc,or.expired,Ds("lockExpiredProcessed")),ms(Yc,or.unlocked,Ds("unlockProcessed")),ms(Yc,or.expiring,Ds("lockExpired")),ms(Yc,or.unlocking,Ds("unlock")),ms(Yc,or.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),ms(Yc,or.revealed,Ds("secretReveal")),ms(Yc,or.requested,Ds("secretRequest")),ms(Yc,or.closed,Ds("channelClosed")),ms(Yc,or.refunded,Ds("refund")),ms(Yc,or.received,Ds("transferProcessed")),ms(Yc,or.pending,Ds("transfer")),Yc);function Ps(e){for(var t,n,r,a,o,i,c=new Date(e.transfer[0]),s=c,u=or.pending,l=0,d=Object.entries(Is);l<d.length;l++){var f=hs(d[l],2),p=f[0],b=f[1],y=b(e);if(void 0!==y){u=p,s=new Date(y);break}}var m=e.transfer[1],h=xs(e),v=m.lock.amount.sub(e.fee),g=e.secretRequest&&e.secretRequest[1].amount.lt(v),O=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(g||e.refund||e.lockExpired||e.channelClosed)&&void 0,_=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:Ns(e),secrethash:m.lock.secrethash,direction:h,status:u,initiator:m.initiator,partner:e.partner,target:m.target,metadata:m.metadata,paymentId:m.payment_identifier,chainId:m.chain_id.toNumber(),token:m.token,tokenNetwork:m.token_network_address,channelId:m.channel_identifier,value:v,fee:e.fee,amount:m.lock.amount,expirationBlock:m.lock.expiration.toNumber(),startedAt:c,changedAt:s,success:O,completed:_,secret:null===(i=null===(o=e.secret)||void 0===o?void 0:o[1])||void 0===i?void 0:i.value}}function Us(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return $n;var c,s=_s(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(gt).map(Qa).find((function(e){return Ka(e)===t}));if(l)return l}}}catch(d){s.e(d)}finally{s.f()}}var Ls=n("a0df"),Ms=n("31a7"),Bs=n("c998"),Fs=n("ee79"),$s=n("b4cc"),qs=n("0ff6"),Hs=n("4e0b2"),Ws=n("1f0b");function Vs(e,t){return Zs(e)||Gs(e,t)||Qs(e,t)||Ks()}function Ks(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zs(e){if(Array.isArray(e))return e}function Ys(e){return Js(e)||zs(e)||Qs(e)||Xs()}function Xs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qs(e,t){if(e){if("string"===typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,t):void 0}}function zs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Js(e){if(Array.isArray(e))return eu(e)}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nu=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ru=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},Ms.contracts),qs.contracts);case"ropsten":return Object.assign(Object.assign({},Ls.contracts),$s.contracts);case"goerli":return Object.assign(Object.assign({},Bs.contracts),Hs.contracts);case"homestead":return Object.assign(Object.assign({},Fs.contracts),Ws.contracts);default:throw new pt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function au(e,t){var n,r;return nu(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(an(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(w["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(w["sha256"])(c),u=new ys["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var ou=function(e,t,n){return nu(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!bs["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof ys["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new pt(dt.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!St.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new pt(dt.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!At.is(e)){r.next=37;break}a=new ys["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new pt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=au,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},iu=function(e){return e.pipe(Object($["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),Ko(),Object(q["a"])(1),Object(M["a"])(Ps))},cu=function(e){return Object.values(e).reduce((function(e,t){var n=ii(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),tu({},t.token,Object.assign(Object.assign({},e[t.token]),tu({},t.partner.address,c))))}),{})};function su(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function uu(e,t){return e.signer===t?e:e.connect(t)}function lu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return nu(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Ys(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new pt(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,bt(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new pt(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function du(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return nu(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(Vo("state","blockNumber"),Object(as["a"])(a),Object(B["a"])((function(e){var t=Vs(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(rs["a"])((function(e){var t=Vs(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(gt)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var fu=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function pu(e){return mu(e)||yu(e)||gu(e)||bu()}function bu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function mu(e){if(Array.isArray(e))return Ou(e)}function hu(e,t){return wu(e)||_u(e,t)||gu(e,t)||vu()}function vu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gu(e,t){if(e){if("string"===typeof e)return Ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ou(e,t):void 0}}function Ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _u(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wu(e){if(Array.isArray(e))return e}function ku(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ju(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(P["a"])(e).pipe(Object(es["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(Xc["a"])(t):Object(Qc["a"])(e)})))})))}var Eu=function(e,t,n){ku(e),ku(t);var r=n.provider;return ju((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),en(r,"block"))})),Object(M["a"])((function(e){return Hn({blockNumber:e})})))},Tu=function(e,t,n){ku(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(ts["a"])(1),Object($["a"])((function(e){var t=w["defaultAbiCoder"].encode(["address"],[r]);return ds()(e.tokens)?ju((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(Ut["a"])(e)})),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(zc["a"])(ju((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Ut["a"])),ju((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Ut["a"]))).pipe(Object(ts["a"])(1),Object(ns["a"])(Wn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(Ut["a"])(Object.entries(e.tokens).map((function(e){var t=hu(e,2),n=t[0],r=t[1];return Wn({token:n,tokenNetwork:r})})))})))},Au=function(e,t){return ku(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,Kn({id:a.id},{tokenNetwork:a.tokenNetwork,partner:a.partner.address});case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)}))))},Su=function(e,t,n){ku(e),ku(t);var r=n.address,a=n.network,o=n.provider;return ju((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(Jc["a"])(o.pollingInterval).pipe(Object(rs["a"])((function(){return Object(I["a"])(e?ju((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(D["a"])(ba({reason:Ce.ACCOUNT_CHANGED}))}))):U["a"],ju((function(){return nn(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(ba({reason:Ce.NETWORK_CHANGED})):U["a"]}))))})))})))},xu=function(e,t,n){ku(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(B["a"])(xn(Wn)),Object(Io["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(rs["a"])((function(e){var t=a(e.payload.tokenNetwork);return tn(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(D["a"])(e.payload.fromBlock):void 0).pipe(Object(B["a"])((function(e){var t=hu(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(M["a"])((function(n){var a=hu(n,5),o=a[0],i=a[1],c=a[2],s=a[3],u=a[4];return Vn.success({id:o.toNumber(),token:e.payload.token,settleTimeout:s.toNumber(),isFirstParticipant:r===i,txHash:u.transactionHash,txBlock:u.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===i?c:i})})))})))})))},Nu=function(e){return e.pipe(Object(B["a"])(xn(Vn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return Kn({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))};function Ru(e){var t=e.interface.events;return{depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function Cu(e,t){var n=Ru(e),r=n.depositTopic,a=n.withdrawTopic,o=n.closedTopic,i=n.settledTopic,c={tokenNetwork:e.address,partner:t};return function(e){var n,s,u=hu(e,2),l=u[0],d=u[1],f=l[l.length-1],p=null===(n=f.topics)||void 0===n?void 0:n[0],b=l[0].toNumber();switch(p){case r:var y=hu(l,3),m=y[1],h=y[2],v=m===t?"partner":"own";if(h.lte(d[v].deposit))break;s=Gn.success({id:b,participant:m,totalDeposit:h,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case a:var g=hu(l,3),O=g[1],_=g[2],w=O===t?"partner":"own";if(_.lte(d[w].withdraw))break;s=Zn({id:b,participant:O,totalWithdraw:_,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case o:if("closeBlock"in d)break;var k=hu(l,2),j=k[1];s=Yn.success({id:b,participant:j,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case i:s=Qn.success({id:b,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0,locks:d.partner.locks},c);break}return s}}var Du=function(e,t,n){ku(e);var r=n.getTokenNetworkContract,a=n.latest$;return t.pipe(si,Object($["a"])((function(e){return e.pipe(Object(rs["a"])((function(e){var t=e.tokenNetwork,n=e.partner.address,o=ri(e),i=r(t),c=w["defaultAbiCoder"].encode(["uint256"],[e.id]),s={address:t,topics:[Object.values(Ru(i)),[c]]};return tn(i,[s],Object(D["a"])(e.openBlock)).pipe(Object(as["a"])(a.pipe(Object(q["a"])("state","channels",o))),Object(M["a"])(Cu(i,n)),Object(B["a"])(gt),Object(os["a"])(ps.a))})),Object(Po["a"])(e.pipe(Object(is["a"])(1))))})))},Iu=function(e,t,n,r,a,o,i,c){var s=c.log;return(null===o||void 0===o?void 0:o.gt(k["Zero"]))?Object(P["a"])((function(){return e.functions.allowance(n,t.address)})).pipe(Object($["a"])((function(n){return n.gte(o)?Object(D["a"])(!0):Object(Ut["a"])(e.functions.approve(t.address,o)).pipe(ci("approve",dt.CNL_APPROVE_TRANSACTION_FAILED,{log:s}))})),Object(cs["a"])(i),Object(ts["a"])(1),Object($["a"])((function(e){return t.functions.getChannelParticipantInfo(e,r,a).then((function(t){var n=t[0];return[e,n]}))})),Object($["a"])((function(e){var n=hu(e,2),i=n[0],c=n[1];return t.functions.setTotalDeposit(i,r,c.add(o),a)})),ci("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:s}),Object(ss["a"])(),Object(Dc["a"])((function(e){return Object(D["a"])(Gn.failure(e,{tokenNetwork:t.address,partner:a}))}))):U["a"]},Pu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(xn(Vn.request)),Object(as["a"])(t,u),Object($["a"])((function(t){var n,u,l=hu(t,3),d=l[0],f=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,m=d.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=f.channels[ri(d.meta)])||void 0===n?void 0:n.state;if(g)return Object(D["a"])(Vn.failure(new pt(dt.CNL_INVALID_STATE,{state:g}),d.meta));var O=su({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:y),_=O.signer,w=O.address,k=uu(s(h),_),j=He()(f.tokens,(function(e){return e===h})),E=uu(c(j),_);return e.pipe(Object(B["a"])(Vn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(q["a"])("payload","id"),Object(us["a"])(1,void 0,(function(e){return Object(P["a"])((function(){var e;return k.functions.openChannel(o,v,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object($["a"])((function(t){return Object(I["a"])(Object(D["a"])(t).pipe(ci("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),Object(ss["a"])()),Iu(E,k,w,o,v,d.payload.deposit,e,{log:r}))})),Object(Dc["a"])((function(e){return Object(D["a"])(Vn.failure(e,d.meta))})))})))})))},Uu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(xn(Gn.request)),Object(as["a"])(t,u),Object($["a"])((function(e){var t,n=hu(e,3),u=n[0],l=n[1],d=n[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=ri(u.meta),m=l.channels[y];if((null===m||void 0===m?void 0:m.state)!==qa.open){var h=new pt(dt.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(D["a"])(Gn.failure(h,u.meta))}var v=su({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:d),g=v.signer,O=v.address,_=uu(c(m.token),g),w=uu(s(p),g);return Iu(_,w,O,o,b,u.payload.deposit,Object(D["a"])(m.id),{log:r})})))},Lu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(xn(Yn.request)),Object(as["a"])(t,u),Object($["a"])((function(e){var t,n,u=hu(e,3),l=u[0],d=u[1],f=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=su({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=m.signer,v=uu(s(b),h),g=d.channels[ri(l.meta)];if((null===g||void 0===g?void 0:g.state)!==qa.open&&(null===g||void 0===g?void 0:g.state)!==qa.closing){var O=new pt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(D["a"])(Yn.failure(O,l.meta))}var _=g.partner.balanceProof,k=Ka(_),j=_.nonce,E=_.additionalHash,T=_.signature,A=Object(w["concat"])([Ia(b,20),Ia(c.chainId,32),Ia($a.BALANCE_PROOF,32),Ia(g.id,32),Ia(k,32),Ia(j,32),Ia(E,32),Ia(T,65)]);return Object(Ut["a"])(a.signMessage(A)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,k,j,E,T,e)})),ci("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(ss["a"])(),Object(Dc["a"])((function(e){return Object(D["a"])(Yn.failure(e,l.meta))})))})))},Mu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(xn(Yn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(B["a"])(Hn.is),Object(L["a"])(1),Object(ts["a"])(1),Object(ns["a"])(t))})),Object(as["a"])(t,u),Object(B["a"])((function(e){var t=hu(e,2),n=t[0],r=t[1],a=r.channels[ri(n.meta)];return(null===a||void 0===a?void 0:a.state)===qa.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=hu(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,f=d.tokenNetwork,p=d.partner,b=su({signer:a,address:o,main:i},l),y=b.signer,m=uu(s(f),y),h=u.channels[ri(n.meta)],v=Ka(h.partner.balanceProof),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,_=h.partner.balanceProof.signature,k=Object(w["concat"])([Ia(f,20),Ia(c.chainId,32),Ia($a.BALANCE_PROOF_UPDATE,32),Ia(h.id,32),Ia(v,32),Ia(g,32),Ia(O,32),Ia(_,65)]);return Object(Ut["a"])(a.signMessage(k)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,p,o,v,g,O,_,e)})),ci("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(ss["a"])(),Object(Dc["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},Bu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(xn(Qn.request)),Object(as["a"])(t,s),Object($["a"])((function(e){var t,n,s=hu(e,3),u=s[0],l=s[1],d=s[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=su({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),m=y.signer,h=uu(c(p),m),v=l.channels[ri(u.meta)];if((null===v||void 0===v?void 0:v.state)!==qa.settleable&&(null===v||void 0===v?void 0:v.state)!==qa.settling){var g=new pt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(D["a"])(Qn.failure(g,u.meta))}return Object(Ut["a"])(Promise.all([h.functions.getChannelParticipantInfo(v.id,o,b),h.functions.getChannelParticipantInfo(v.id,b,o)])).pipe(Object($["a"])((function(e){var t=hu(e,2),n=t[0][3],r=t[1][3],a=v.own.balanceProof;if(n!==Ka(a)){var i=Us(l.sent,n,u.meta);bt(i,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),a=i}var c=v.partner.balanceProof;if(r!==Ka(c)){var s=Us(l.received,r,u.meta);bt(s,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:b,partnerBalanceHash:r}]),c=s}var d=[o,a],f=[b,c];if(f[1].transferredAmount.add(f[1].lockedAmount).lt(d[1].transferredAmount.add(d[1].lockedAmount))){var p=[f,d];d=p[0],f=p[1]}return h.functions.settleChannel(v.id,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot,f[0],f[1].transferredAmount,f[1].lockedAmount,f[1].locksroot)})),ci("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(ss["a"])(),Object(Dc["a"])((function(e){return Object(D["a"])(Qn.failure(e,u.meta))})))})))},Fu=function(e,t){return e.pipe(Object(B["a"])(xn(Hn)),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=hu(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===qa.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Xn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},$u=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(xn(Qn.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(as["a"])(t,s),Object(B["a"])((function(e){var t,n=hu(e,2),r=n[0],a=n[1];return(null===(t=a.channels[ri(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=hu(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,f=uu(c(l),su({signer:a,address:o,main:i},s).signer),p=Object(w["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(pu(e),[Ia(t.expiration,32),Ia(t.amount,32),t.secrethash])}),[]));return Object(Ut["a"])(f.functions.unlock(n.payload.id,o,d,p)).pipe(ci("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(ss["a"])(),Object(Dc["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function qu(e,t,n,r){return ju((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(B["a"])(gt))}var Hu=function(e,t,n){ku(e);var r=n.config$,a=n.provider;return Object(Pt["a"])(t.pipe(Vo("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(Vo("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=hu(e,2),n=t[1];return n.length>0})),Object(rs["a"])((function(e){var t=hu(e,3),n=t[0],r=t[1],o=t[2];return zc["a"].apply(void 0,pu(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return qu(e,a,n,o)}))))})))},Wu=n("47ea"),Vu=n("bee6"),Ku=n("d337"),Gu=n("b4d5"),Zu=n("3e18"),Yu=n("d96a"),Xu=n("2527"),Qu=n("fc5d");function zu(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Ju(e,t){var n=Object(Qu["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var el=n("6e77"),tl=n("dc46"),nl=n.n(tl);function rl(e,t){return sl(e)||cl(e,t)||ol(e,t)||al()}function al(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ol(e,t){if(e){if("string"===typeof e)return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?il(e,t):void 0}}function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sl(e){if(Array.isArray(e))return e}function ul(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ll(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(gt)}var dl=nl()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function fl(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(dl(t))),n?Object(D["a"])(n):Object(el["a"])(e,"Room").pipe(Object(B["a"])(dl(t)),Object(ts["a"])(1))}function pl(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(ts["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(gt),Object(Uo["a"])(),Object(Mt["a"])((function(n){return fl(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(Uo["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(Mt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return U["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(el["a"])(t,"RoomMember.membership",(function(e,t){return ul(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(ts["a"])(1),Object($["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(ns["a"])("string"===typeof e?e:e.label),Object(es["a"])((function(e){return e.pipe(Object(as["a"])(c),Object($["a"])((function(e,t){var n=rl(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Xc["a"])(a/u)):Object(Qc["a"])(r)})))})))})))}function bl(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Ja(e);if("signature"in a){var o=Xa(a);if(o!==t)throw new pt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function yl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ml(e,t){return _l(e)||Ol(e,t)||vl(e,t)||hl()}function hl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vl(e,t){if(e){if("string"===typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gl(e,t):void 0}}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ol(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _l(e){if(Array.isArray(e))return e}var wl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},kl="RAIDEN";function jl(e,t){var n=zu(t.getHomeserverUrl());return Object(Ut["a"])(ll(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(q["a"])("roomId"),Object(Wu["a"])())}function El(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function Tl(e,t,n,r){return e.pipe(Object(B["a"])(er.is),Object(ts["a"])(1),Object(Do["a"])((function(){n.next(t),n.complete()})),Object(Vu["a"])(1e3),Object(as["a"])(r),Object($["a"])((function(e){var n=ml(e,2),r=n[1];return jl(r,t).pipe(Object($["a"])((function(e){return El(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(ss["a"])())}function Al(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Sl(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(Xu["a"])(e+"/_matrix/client/versions").pipe(Object(Ku["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Dc["a"])((function(){return Object(D["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function xl(e,t){var n=this;return Object(Xu["a"])(e).pipe(Object($["a"])((function(t){return wl(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Ku["a"])(t),Object($["a"])((function(e){return Al(e)})),Object($["a"])((function(e){return Sl(e,t)})),Object(Wu["a"])(),Object($["a"])((function(e){return qt()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Gu["a"])((function(){return new pt(dt.TRNS_NO_MATRIX_SERVERS)})))}function Nl(e,t,n,r){var a=n.address,o=n.signer,i=zu(e);if(!i)throw new pt(dt.TRNS_NO_SERVERNAME,{server:e});return Object(P["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(Ut["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(Ut["a"])(r.login("m.login.password",{user:c,password:e,device_id:kl})).pipe(Object(Dc["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(Ut["a"])(o.signMessage(s)).pipe(Object(M["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(Ut["a"])(t.setDisplayName(a.displayName)),Object(Ut["a"])(t.setAvatarUrl(r&&!ds()(r)?Gc(r):""))).pipe(Object(ns["a"])({matrix:t,server:n,setup:a}))})))}var Rl=function(e,t,n){yl(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(Pt["a"])([i,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=ml(e,2),o=n[0].state,i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,d=o.transport.server,f=o.transport.setup,p=[];c?(c===d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(Object(D["a"])({server:c}))):(d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(xl(s,u)));var b=function(e){return t=e,U["a"]};return Object(P["a"])((function(){return p.shift()||U["a"]})).pipe(Object(Dc["a"])(b),Object(Zu["a"])((function(e){var t=e.server,n=e.setup;return Nl(t,n,{address:r,signer:a},l).pipe(Object(Dc["a"])(b))})),Object(F["a"])(),Object(Do["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(es["a"])((function(e){return e.pipe(Object($["a"])((function(){return p.length?Object(D["a"])(null):Object(Qc["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(Tl(e,n,o,c),Object(D["a"])(er({server:r,setup:a})),c.pipe(Vo("logger"),Object(Do["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(ss["a"])()))})))},Cl=function(e,t,n){yl(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Yu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(ss["a"])())},Dl=n("80f6"),Il=n.n(Dl);function Pl(e,t){return Ml(e)||Ll(e,t)||$l(e,t)||Ul()}function Ul(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ll(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ml(e){if(Array.isArray(e))return e}function Bl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Fl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=$l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function $l(e,t){if(e){if("string"===typeof e)return ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ql(e,t):void 0}}function ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Wl=["online","unavailable"],Vl=/^@(0x[0-9a-f]{40})[.:]/i;function Kl(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Fl(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Vl.exec(i.user_id),c&&Object(w["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(w["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Ju(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(gt),Object(Wu["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(dt.TRNS_NO_VALID_USER,{address:t});return Il()(e,"last_active_ago")})))}var Gl=function(e,t,n){Bl(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(xn(tr.request)),Object($["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Io["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(as["a"])(a.pipe(Vo("presences"))),Object(rs["a"])((function(e){var t=Pl(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):Kl(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return tr.success({userId:n,available:Wl.includes(t),ts:Date.now(),caps:Zc(a)},r.meta)})),Object(Dc["a"])((function(e){return Object(D["a"])(tr.failure(e,r.meta))})))})))})))},Zl=function(e,t,n){Bl(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(Mt["a"])((function(e){return Object(el["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{bt(null===a||void 0===a?void 0:a.presence);var o=null===(t=Vl.exec(a.userId))||void 0===t?void 0:t[1];bt(o);var i=Object(w["getAddress"])(o);return bt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(gt),Object(as["a"])(e.pipe(Object(B["a"])(tr.request.is),Object(Lo["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(Rc["a"])(new Set))),Object(B["a"])((function(e){var t=Pl(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=Pl(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=Wl.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;bt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(w["verifyMessage"])(c,e.displayname);return bt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),tr.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Zc(e.avatar_url)},{address:n})})),Object(Dc["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),U["a"]})))}))).pipe(Object(as["a"])(o),Object(B["a"])((function(e){var t=Pl(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},Yl=function(e){return e.pipe(Object(B["a"])(Kn.is),Object(M["a"])((function(e){return tr.request(void 0,{address:e.meta.partner})})))},Xl=function(e,t,n){Bl(e),Bl(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(q["a"])("caps"),Object(Uo["a"])(Lc.a),Object(L["a"])(1),Object($["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object($["a"])((function(e){var t=Pl(e,2),n=t[0],r=t[1];return Hl(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!ds()(n)?Gc(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(ss["a"])())},Ql=n("59b7"),zl=n("a2ef"),Jl=n("2769"),ed=n.n(Jl);function td(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=od(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function nd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function rd(e,t){return sd(e)||cd(e,t)||od(e,t)||ad()}function ad(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function od(e,t){if(e){if("string"===typeof e)return id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(e,t):void 0}}function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sd(e){if(Array.isArray(e))return e}var ud=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function ld(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(el["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(ts["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(as["a"])(r),Object($["a"])((function(r){var a=rd(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(os["a"])((function(e){return e.pipe(Object(Vu["a"])(i))})),Object(Po["a"])(Object(el["a"])(e,"RoomMember.membership",(function(e,t){return nd(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var dd=function(e,t,n){nd(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])(xn([qr,Kn,Ar.request,rr])),Object(M["a"])((function(e){var t;switch(e.type){case qr.type:e.meta.direction===Lr.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===Lr.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Kn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(gt),Object(Io["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(rs["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(ts["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return nr({roomId:n},{address:t})})),Object(Dc["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},fd=function(e,t,n){nd(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(xn(tr.success)),Object(Io["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(as["a"])(r),Object(Mt["a"])((function(e){var t=rd(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(Uo["a"])(),Object(Mt["a"])((function(e){return Object(zc["a"])(Object(D["a"])(e),e?Object(el["a"])(r,"RoomMember.membership",(function(e,t){return nd(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(ns["a"])(e)):U["a"])})),Object(Mt["a"])((function(e){return e?ld(r,e,n.payload.userId,a,{log:i}):U["a"]}))):U["a"]})))})),Object(ss["a"])())},pd=function(e,t,n){nd(e),nd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Mt["a"])((function(e){return Object(el["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(as["a"])(o),Object($["a"])((function(e){var t=rd(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Vo("presences"),Object(M["a"])((function(e){return ed()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(gt),Object(ts["a"])(1),Object(Po["a"])(Object(Xc["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Ut["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(ns["a"])(nr({roomId:n.roomId},{address:a.meta.address})),Object(Dc["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},bd=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(xn(nr)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(as["a"])(t,o),Object($["a"])((function(e){var t,n,a=rd(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Ut["a"])(l.filter((function(e,t){return nd(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return rr({roomId:e},i.meta)})))})))},yd=function(e,t,n){nd(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(Mt["a"])((function(e){return Object(el["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(Ql["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(Xc["a"])(t)})))})),Object(as["a"])(t,o),Object(B["a"])((function(e){var t,n=rd(e,3),r=n[0],a=r.matrix,o=r.roomId,i=n[1].transport,c=n[2],s=a.getRoom(o);if(!s)return!1;var u=zu(a.getHomeserverUrl());if(ll(c).some((function(e){return dl("#".concat(e,":").concat(u),s)})))return!1;for(var l=0,d=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});l<d.length;l++){var f,p=d[l],b=td(p);try{for(b.s();!(f=b.n()).done;){var y=f.value;if(y===s.roomId)return!1}}catch(m){b.e(m)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=rd(e,1),n=t[0],a=n.matrix,o=n.roomId;return ud(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(ss["a"])())},md=function(e,t,n){nd(e);var r=n.log,a=n.matrix$;return a.pipe(Object(Mt["a"])((function(e){return Object(el["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=rd(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=rd(s[c],2),l=u[0],d=u[1],f=td(d),e.prev=5,f.s();case 7:if((b=f.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,rr({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},hd=function(e,t,n){nd(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Vo("transport","rooms"),Object(B["a"])(gt),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=rd(r[n],2),o=a[0],i=a[1],c=td(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(zl["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(as["a"])(o),Object($["a"])((function(e){var t=rd(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return fl(i,a).pipe(Object(Ku["a"])(c),Object(ss["a"])(),Object(Dc["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(rr({roomId:a},{address:o}))})))})))},vd=function(e,t){return e.pipe(Object(B["a"])(xr.is),Object(as["a"])(t),Object(B["a"])((function(e){var t,n,r=rd(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=rd(e,1),n=t[0];return nr({roomId:n.payload.roomId},n.meta)})))};function gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _d(e,t,n){return t&&Od(e.prototype,t),n&&Od(e,n),e}var wd=function(){function e(t){gd(this,e),this.values=new Map,this.max=t}return _d(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function kd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Td(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function jd(e,t){return xd(e)||Sd(e,t)||Td(e,t)||Ed()}function Ed(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Td(e,t){if(e){if("string"===typeof e)return Ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ad(e,t):void 0}}function Ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xd(e){if(Array.isArray(e))return e}function Nd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Rd=function(e,t,n){Nd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(xn(Ar.request)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Io["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Zu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:za(t.payload.message),c={body:a,msgtype:"m.text"};return pl(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(ns["a"])(Ar.success(void 0,t.meta)),Object(Dc["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(Ar.failure(e,t.meta))})))})))})))},Cd=function(e,t,n){Nd(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(xn(Sr)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(as["a"])(o),Object($["a"])((function(e){var t=jd(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=ll(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=zu(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return fl(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:za(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Dc["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(ss["a"])())},Dd=function(e,t,n){Nd(e),Nd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Mt["a"])((function(e){return Object(el["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(as["a"])(o),Object(B["a"])((function(e){var t,n,r=jd(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!ll(s).some((function(e){return dl("#".concat(e,":").concat(zu(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=jd(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=ed()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(ts["a"])(1),Object(Po["a"])(Object(Xc["a"])(c)),Object($["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=ed()(n,["payload.userId",a.getSender()]),s=kd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=bl(l,c.meta.address,{log:r}),e.next=10,xr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Id=function(e,t,n){Nd(t);var r=n.log,a=n.signer,o=n.latest$,i=new wd(32);return e.pipe(Object(B["a"])(to([Rt(sr),Rt(ur),Rt(lr)])),Object(as["a"])(o),Object(B["a"])((function(e){var t,n=jd(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[De.NO_DELIVERY])})),Object(Zu["a"])((function(e){var t=jd(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(Ar.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Ln.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Ut["a"])(eo(a,s,{log:r})).pipe(Object(Do["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return Ar.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Pd=n("6fb6"),Ud=n("de5c");function Ld(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Md(e,t){return $d(e)||Fd(e,t)||Wd(e,t)||Bd()}function Bd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $d(e){if(Array.isArray(e))return e}function qd(e){return Kd(e)||Vd(e)||Wd(e)||Hd()}function Hd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wd(e,t){if(e){if("string"===typeof e)return Gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gd(e,t):void 0}}function Vd(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Kd(e){if(Array.isArray(e))return Gd(e)}function Gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Yd=new WeakMap;function Xd(e){return Zd(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Yd.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Yd.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Qd(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function zd(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(el["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(Ql["a"])((function(){return n})),Object(Cc["a"])(gt),Object(Pd["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(Do["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return pl(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(el["a"])(t,"event").pipe(Object(B["a"])(Qd("m.call.candidates",i,o)),Object(Do["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(Ut["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Dc["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(ss["a"])())}function Jd(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,f=a.config$;return Object(Ut["a"])(Xd(e)).pipe(Object($["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(qd(r),qd(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(zd(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object($["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(el["a"])(e,"event").pipe(Object(B["a"])(Qd("m.call.answer",s,c,o))),pl(u,e,"m.call.invite",n,{log:l,latest$:d,config$:f}).pipe(Object(Do["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(ss["a"])()))})),Object(ts["a"])(1),Object(Do["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(ss["a"])()),Object(D["a"])(b))})))}function ef(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(el["a"])(e,"event").pipe(Object(B["a"])(Qd("m.call.invite",c,i,o)),Object(Do["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(Ut["a"])(Xd(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(as["a"])(d),Object($["a"])((function(r){var c=Md(r,2),f=Md(c[0],2),p=f[0],b=f[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(qd(b),qd(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(zd(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return pl(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(Do["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(ss["a"])()),Object(el["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(ts["a"])(1))}function tf(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(el["a"])(t,"close").pipe(Object(Do["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(ss["a"])()),Object(el["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(Qc["a"])(e.error)}))),Object(el["a"])(t,"open").pipe(Object(ts["a"])(1),Object(Ku["a"])(c/3),Object(Do["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(ns["a"])(ar(t,{address:i}))),Object(el["a"])(t,"message").pipe(Object(Do["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return xr({text:e,message:bl(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Yu["a"])((function(){return t.close()})))})),Object(Po["a"])(e),Object(Dc["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),U["a"]})),Object(Ud["a"])(ar(void 0,{address:i})))}}function nf(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(Uo["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(as["a"])(i,c),Object(B["a"])((function(e){var t,n=Md(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[De.WEBRTC])&&!!(null===a||void 0===a?void 0:a[De.WEBRTC])})),Object(Mt["a"])((function(t){var n=Md(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(ar(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=d.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],p=new C["a"];return t=f?Jd(s,a,n,u,l):ef(s,a,n,u,l),p.pipe(Object($["a"])((function(){return pl(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(Po["a"])(Object(Xc["a"])(u.httpTimeout/10)))})),Object(Po["a"])(e.pipe(Object(B["a"])(ba.is)))).subscribe(),Object(I["a"])(t,Object(el["a"])(s,"event").pipe(Object(B["a"])(Qd("m.call.hangup",n.peerId,d)),Object(cs["a"])(Object(Qc["a"])(new Error("RTC: peer hung up"))))).pipe(tf(p,n,u,l))})).pipe(Object(os["a"])((function(e){return e.pipe(Object(as["a"])(o,c),Object($["a"])((function(e){var t,n,r=Md(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(Xc["a"])(o/10):Object(D["a"])(null):U["a"]})))})))})))}var rf=function(e,t,n){return Ld(t),e.pipe(Object(B["a"])(tr.success.is),Object(Io["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return nf(e,t,n)})))};function af(e,t){return lf(e)||uf(e,t)||cf(e,t)||of()}function of(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cf(e,t){if(e){if("string"===typeof e)return sf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sf(e,t):void 0}}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lf(e){if(Array.isArray(e))return e}var df=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(xn([Yn.request,Yn.success])),Object(as["a"])(t),Object($["a"])((function(e){var t=af(e,2),n=t[0],a=t[1];return Object(Ut["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=af(e,2),a=af(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(M["a"])((function(e){var t,n,r,a,o=af(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Lr.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?$r.success({balanceProof:Qa(c.unlock[1])},s):$r.success({},s):$r.failure(new pt(dt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(gt))})))};function ff(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object(ts["a"])(1),Object(ss["a"])()),Object(D["a"])(t))}function pf(e,t){return vf(e)||hf(e,t)||yf(e,t)||bf()}function bf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yf(e,t){if(e){if("string"===typeof e)return mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mf(e,t):void 0}}function mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vf(e){if(Array.isArray(e))return e}function gf(e,t,n,r){var a=n.confirmationBlocks;return Object(Ut["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=pf(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=pf(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Lr.SENT};return Object(I["a"])(ff(e,Xr.request(void 0,o),Dn(Xr,o)),Object(D["a"])($r.failure(new pt(dt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var Of=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(xn(Hn)),Object(as["a"])(t,r),Object(rs["a"])((function(t){var n=pf(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return gf(e,a,o,r)})))};function _f(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function wf(e,t){return Ef(e)||jf(e,t)||Sf(e,t)||kf()}function kf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ef(e){if(Array.isArray(e))return e}function Tf(e){return Nf(e)||xf(e)||Sf(e)||Af()}function Af(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sf(e,t){if(e){if("string"===typeof e)return Rf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rf(e,t):void 0}}function xf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Nf(e){if(Array.isArray(e))return Rf(e)}function Rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cf(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return bt(n.length===e.locks.length-1,"invalid locks size"),n}function Df(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function If(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),U["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,f=t.payload.paths[0].path[0],b=e.channels[ri({tokenNetwork:t.payload.tokenNetwork,partner:f})];bt((null===b||void 0===b?void 0:b.state)===qa.open,"not open"),bt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(d),expiration:Object(w["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},m=js([].concat(Tf(b.own.locks),[y]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",b.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var h={type:Ln.LOCKED_TRANSFER,message_identifier:Ss(),chain_id:Object(w["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(w["bigNumberify"])(b.id),nonce:b.own.nextNonce,transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:m,payment_identifier:t.payload.paymentId,token:b.token,recipient:f,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Ut["a"])(eo(u,h,{log:i})).pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qr({message:n,fee:d,partner:f},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Wr({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Pf(e,t,n){return Object(Pt["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=wf(e,2),a=r[0],o=r[1];return If(a,t,o,n)})),Object(Dc["a"])((function(e){return Object(D["a"])($r.failure(e,t.meta))})))}function Uf(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;bt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=t.sent[i].partner,l=t.channels[ri({tokenNetwork:s.token_network_address,partner:u})];if(bt((null===l||void 0===l?void 0:l.state)===qa.open,"channel not open"),t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{bt(t.sent[i].secret,"unknown secret"),bt(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var d={type:Ln.UNLOCK,message_identifier:Ss(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:l.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:js(Cf(l.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Ut["a"])(eo(o,d,{log:a}))}return c.pipe(Object(as["a"])(e),Object(M["a"])((function(e){var t=wf(e,2),r=t[0],a=t[1];return bt(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),bt(!a.sent[i].channelClosed,"channel closed!"),Zr.success({message:r,partner:u},n.meta)})))}function Lf(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return Uf(e,n,t,{log:a,signer:r})})),Object(Dc["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(Zr.failure(e,t.meta))})))}function Mf(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;bt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[ri({tokenNetwork:c.token_network_address,partner:s})];if(bt((null===u||void 0===u?void 0:u.state)===qa.open,"channel not open"),e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{bt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),bt(!e.sent[o].unlock,"transfer already unlocked");var l=js(Cf(u.own,o)),d={type:Ln.LOCK_EXPIRED,message_identifier:Ss(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:u.own.nextNonce,transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(Ut["a"])(eo(r,d,{log:a}))}return i.pipe(Object(M["a"])((function(e){return Xr.success({message:e,partner:s},t.meta)})))}function Bf(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Mf(e,t,{signer:a,log:r})})),Object(Dc["a"])((function(e){return Object(D["a"])(Xr.failure(e,t.meta))})))}function Ff(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:Lr.RECEIVED};return Object(Pt["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=wf(e,2),c=n[0],l=n[1],d=l.revealTimeout,f=l.caps,b=t.payload.message;if(s in c.received){a.warn("transfer already present",t.meta);var y=b.message_identifier;return c.received[s].partner===t.meta.address&&c.received[s].transfer[1].message_identifier.eq(y)?Object(D["a"])(Hr({message:c.received[s].transferProcessed[1]},u)):U["a"]}var m=b.token_network_address,h=t.meta.address,v=c.channels[ri({tokenNetwork:m,partner:h})];bt((null===v||void 0===v?void 0:v.state)===qa.open,"channel not open"),bt(b.chain_id.eq(o.chainId),"chainId mismatch"),bt(b.channel_identifier.eq(v.id),"channelId mismatch"),bt(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=[].concat(Tf(v.partner.locks),[b.lock]),O=js(g);bt(b.locksroot===O,"locksroot mismatch"),bt(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),bt(b.locked_amount.eq(Df(g)),"lockedAmount mismatch");var _=ii(v).partnerCapacity;bt(b.lock.amount.lte(_),"balanceProof total amount bigger than capacity"),bt(b.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",b.lock.amount.toString(),"of token",v.token,", from",b.initiator,", through partner",h);var w=Object(D["a"])(void 0);!(null===f||void 0===f?void 0:f[De.NO_RECEIVE])&&b.target===r&&b.lock.expiration.sub(d).gt(c.blockNumber)&&(w=Object(P["a"])((function(){var e={type:Ln.SECRET_REQUEST,payment_identifier:b.payment_identifier,secrethash:s,amount:b.lock.amount,expiration:b.lock.expiration,message_identifier:Ss()};return eo(i,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:Ln.PROCESSED,message_identifier:b.message_identifier};return eo(i,e,{log:a})}));return Object(Pt["a"])([j,w]).pipe(Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=wf(t,2),r=n[0],a=n[1],e.next=3,qr({message:b,fee:k["Zero"],partner:h},u);case 3:return e.next=5,Hr({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,tr.request(void 0,{address:b.initiator});case 8:return e.next=10,Kr({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return Object(D["a"])($r.failure(e,u))})))}function $f(e,t,n){var r=n.log,a=n.network,o=n.signer,i=Es(t.payload.message.secret),c={secrethash:i,direction:Lr.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return U["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(bt(u===n.partner,"wrong partner"),bt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(D["a"])(Yr({message:n.unlockProcessed[1]},c)):U["a"];var l=n.transfer[1];bt(s.token_network_address===l.token_network_address,"wrong tokenNetwork");var d=s.token_network_address,f=e.channels[ri({tokenNetwork:d,partner:u})];bt((null===f||void 0===f?void 0:f.state)===qa.open,"channel not open"),bt(s.chain_id.eq(a.chainId),"chainId mismatch"),bt(s.channel_identifier.eq(f.id),"channelId mismatch"),bt(s.nonce.eq(f.partner.nextNonce),"nonce mismatch");var b=l.lock.amount,y=Cf(f.partner,i);bt(s.locksroot===js(y),"locksroot mismatch"),bt(s.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(b)),"transferredAmount mismatch"),bt(s.locked_amount.eq(Df(y)),"lockedAmount mismatch");var m={type:Ln.PROCESSED,message_identifier:s.message_identifier};return Object(Ut["a"])(eo(o,m,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wr({secret:s.secret},c);case 2:return e.next=4,Zr.success({message:s,partner:u},c);case 4:return e.next=6,Yr({message:t},c);case 6:return e.next=8,$r.success({balanceProof:Qa(s)},c);case 8:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(Zr.failure(e,c))})))}function qf(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:Lr.RECEIVED};return Object(Pt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=wf(e,2),l=u[0],d=u[1].confirmationBlocks;if(!(c in l.received))return U["a"];var f=l.received[c],b=t.payload.message,y=t.meta.address;if(bt(y===f.partner,"wrong partner"),bt(!f.unlock,"transfer unlocked"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(D["a"])(Qr({message:f.lockExpiredProcessed[1]},s)):U["a"];var m=f.transfer[1];bt(m.lock.expiration.add(d).lte(l.blockNumber),"expiration block not confirmed yet"),bt(!(null===(i=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered onchain"),bt(b.token_network_address===m.token_network_address,"wrong tokenNetwork");var h=b.token_network_address,v=l.channels[ri({tokenNetwork:h,partner:y})];bt((null===v||void 0===v?void 0:v.state)===qa.open,"channel not open"),bt(b.chain_id.eq(a.chainId),"chainId mismatch"),bt(b.channel_identifier.eq(v.id),"channelId mismatch"),bt(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=Cf(v.partner,c);bt(b.locksroot===js(g),"locksroot mismatch"),bt(b.locked_amount.eq(Df(g)),"lockedAmount mismatch"),bt(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var O={type:Ln.PROCESSED,message_identifier:b.message_identifier};return Object(Ut["a"])(eo(o,O,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xr.success({message:b,partner:y},s);case 2:return e.next=4,Qr({message:t},s);case 4:return e.next=6,$r.failure(new pt(dt.XFER_EXPIRED,{block:m.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(Xr.failure(e,s))})))}function Hf(e,t,n,r){var a=n.log,o=n.signer,i=t.payload.message;bt(i.participant===t.meta.address,"participant mismatch");var c=i.token_network_address,s=i.participant,u=e.channels[ri({tokenNetwork:c,partner:s})];bt((null===u||void 0===u?void 0:u.state)===qa.open,"channel not open"),bt(i.chain_id.eq(e.chainId),"chainId mismatch"),bt(i.channel_identifier.eq(u.id),"channelId mismatch");var l=Object(D["a"])(void 0),d="".concat(ai(u),"+").concat(i.message_identifier.toString()),f=r.get(d);if(f)l=Object(D["a"])(f);else{bt(i.nonce.eq(u.partner.nextNonce),"nonce mismatch");var p=ii(u),b=p.partnerBalance,y=p.partnerLocked,m=p.partnerDeposit,h=m.add(b).sub(y);if(bt(i.total_withdraw.lte(h),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount"),i.expiration.gt(e.blockNumber)){var v={type:Ln.WITHDRAW_CONFIRMATION,message_identifier:i.message_identifier,chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,participant:i.participant,total_withdraw:i.total_withdraw,nonce:u.own.nextNonce,expiration:i.expiration};l=Object(Ut["a"])(eo(o,v,{log:a})).pipe(Object(Do["a"])((function(e){return r.put(d,e)})))}}var g={tokenNetwork:c,partner:s,totalWithdraw:i.total_withdraw,expiration:i.expiration.toNumber()};return Object(I["a"])(Object(D["a"])(ea.request({message:i},g)),l.pipe(Object(B["a"])(gt),Object(M["a"])((function(t){return bt(i.expiration.gt(e.blockNumber),"request expired while signing"),ea.success({message:t},g)})),Object(Dc["a"])((function(e){return a.warn("error while signing WithdrawConfirmation, ignoring",e),U["a"]}))))}function Wf(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Hf(e,t,{log:o,signer:a},r)})),Object(Dc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}function Vf(e,t,n,r){var a=n.signer,o=n.log,i=n.config$;return Object(Pt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=wf(e,2),i=n[0],c=n[1].confirmationBlocks,s=t.payload.message;bt(s.participant===t.meta.address,"participant mismatch");var u,l=s.token_network_address,d=s.participant,f=i.channels[ri({tokenNetwork:l,partner:d})];bt((null===f||void 0===f?void 0:f.state)===qa.open,"channel not open"),bt(s.chain_id.eq(i.chainId),"chainId mismatch"),bt(s.channel_identifier.eq(f.id),"channelId mismatch");var b="".concat(ai(f),"+").concat(s.message_identifier.toString()),y=r.get(b);if(y)u=Object(D["a"])(y);else{bt(s.nonce.eq(f.partner.nextNonce),"nonce mismatch"),bt(s.expiration.add(c).lte(i.blockNumber));var m={type:Ln.PROCESSED,message_identifier:s.message_identifier};u=Object(Ut["a"])(eo(a,m,{log:o})).pipe(Object(Do["a"])((function(e){return r.put(b,e)})))}var h={tokenNetwork:l,partner:d,totalWithdraw:s.total_withdraw,expiration:s.expiration.toNumber()};return u.pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ea.failure({message:s},h);case 2:return e.next=4,Ar.request({message:t},{address:d,msgId:t.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}var Kf=function(e,t,n){_f(t);var r=new wd(32),a=new wd(32),o=n.latest$.pipe(Vo("state"));return Object(I["a"])(e.pipe(Object(B["a"])(xn([$r.request,Zr.request,Xr.request]))),e.pipe(Object(B["a"])(to([Rt(yr),Rt(hr),Rt(vr),Rt(Or),Rt(wr)])))).pipe(Object(Zu["a"])((function(e){var t;switch(e.type){case $r.request.type:t=Pf(o,e,n);break;case Zr.request.type:t=Lf(o,e,n);break;case Xr.request.type:t=Bf(o,e,n);break;case xr.type:switch(e.payload.message.type){case Ln.LOCKED_TRANSFER:t=Ff(o,e,n);break;case Ln.UNLOCK:t=$f(o,e,n);break;case Ln.LOCK_EXPIRED:t=qf(o,e,n);break;case Ln.WITHDRAW_REQUEST:t=Wf(o,e,n,r);break;case Ln.WITHDRAW_EXPIRED:t=Vf(o,e,n,a);break}break}return t})))};function Gf(e,t){return zf(e)||Qf(e,t)||Yf(e,t)||Zf()}function Zf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yf(e,t){if(e){if("string"===typeof e)return Xf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xf(e,t):void 0}}function Xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zf(e){if(Array.isArray(e))return e}function Jf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var ep=function(e,t){return Jf(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Gf(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Lr.SENT},e.next=9,tr.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,qr({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,Zr.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Xr.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},tp=function(e,t,n){Jf(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(Ut["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=Gf(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object($["a"])((function(e){var t=Gf(e,2),n=t[0],a=t[1],o={secrethash:n,direction:Lr.RECEIVED};return Object(I["a"])(Object(D["a"])(qr({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(Wr({secret:a.secret[1].value},o)):U["a"],a.secretReveal?Object(D["a"])(Gr({message:a.secretReveal[1]},o)):U["a"],!a.secret&&a.secretRequest?r.pipe(Object(q["a"])("caps",De.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object(ts["a"])(1),Object(cs["a"])(Object(D["a"])(tr.request(void 0,{address:a.transfer[1].initiator}),Kr({message:a.secretRequest[1]},o)))):U["a"])})))};function np(e,t){return cp(e)||ip(e,t)||ap(e,t)||rp()}function rp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ap(e,t){if(e){if("string"===typeof e)return op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?op(e,t):void 0}}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ip(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cp(e){if(Array.isArray(e))return e}var sp=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(qr.is),Object(B["a"])((function(e){return e.meta.direction===Lr.RECEIVED&&e.payload.message.target!==r})),Object(as["a"])(t,a),Object(B["a"])((function(e){var t=np(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[De.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=np(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return $r.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Lr.SENT})})))};function up(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function lp(e,t){return yp(e)||bp(e,t)||fp(e,t)||dp()}function dp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fp(e,t){if(e){if("string"===typeof e)return pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pp(e,t):void 0}}function pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function yp(e){if(Array.isArray(e))return e}var mp=function(e,t){return e.pipe(Object(B["a"])(to(Rt(sr))),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=lp(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=lp(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Hr({message:o},{secrethash:i,direction:Lr.SENT});case 16:case"end":return e.stop()}}),e)}))))},hp=function(e,t){return e.pipe(Object(B["a"])(xn([Hr,Yr,Qr])),Object(B["a"])((function(e){return e.meta.direction===Lr.RECEIVED})),Object(as["a"])(t),Object(M["a"])((function(e){var t=lp(e,2),n=t[0],r=t[1].received;return Ar.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},vp=function(e,t){return e.pipe(Object(B["a"])(to(Rt(sr))),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=lp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Lr.SENT},e.next=8,$r.success({balanceProof:Qa(a.sent[i].unlock[1])},c);case 8:return e.next=10,Yr({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},gp=function(e,t){return e.pipe(Object(B["a"])(to(Rt(sr))),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=lp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Qr({message:o},{secrethash:i,direction:Lr.SENT});case 7:case"end":return e.stop()}}),e)}))))},Op=function(e,t,n){up(t);var r=n.log,a=n.signer,o=new wd(32);return e.pipe(Object(B["a"])(to([Rt(mr),Rt(wr)])),Object(Zu["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(Ar.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Ln.PROCESSED,message_identifier:n};return Object(Ut["a"])(eo(a,s,{log:r})).pipe(Object(Do["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return Ar.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},_p=n("b6ad"),wp=n.n(_p);function kp(e,t){return Sp(e)||Ap(e,t)||Ep(e,t)||jp()}function jp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ep(e,t){if(e){if("string"===typeof e)return Tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tp(e,t):void 0}}function Tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ap(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sp(e){if(Array.isArray(e))return e}function xp(e,t){return wp()(e,t,(function(e,t){return Ot.is(e)?e.eq(t):Ot.is(t)?t.eq(e):void 0}))}var Np=function(e,t){return e.pipe(Object(B["a"])(to(Rt(mr))),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=kp(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&xp(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:Lr.SENT},e.next=14,zr({message:o,partner:c.partner},u);case 14:return e.next=16,$r.failure(new pt(dt.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function Rp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Cp(e,t){return Lp(e)||Up(e,t)||Ip(e,t)||Dp()}function Dp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ip(e,t){if(e){if("string"===typeof e)return Pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pp(e,t):void 0}}function Pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Lp(e){if(Array.isArray(e))return e}function Mp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(os["a"])((function(e){return e.pipe(Object(Vu["a"])(t))})),Object(Po["a"])(e))}}function Bp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return ff(t,e,Dn(Ar,e.meta)).pipe(Mp(n,r))}var Fp=function(e,t,n,r){return r.meta.direction!==Lr.SENT?U["a"]:n.pipe(Object(F["a"])(),Object(Mt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=Ar.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(Vo("sent",o),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Bp(c,e,s,a)})))},$p=function(e,t,n,r){return r.meta.direction!==Lr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(as["a"])(n),Object(Mt["a"])((function(n){var a=Cp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=Ar.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(Vo("sent",c),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Bp(l,e,d,i)})))},qp=function(e,t,n,r){return r.meta.direction!==Lr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(as["a"])(n),Object(Mt["a"])((function(n){var a=Cp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Ar.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(Vo("sent",c),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Bp(u,e,l,i)})))},Hp=function(e,t,n,r){return r.meta.direction!==Lr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(as["a"])(n),Object(Mt["a"])((function(n){var a=Cp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Ar.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(Vo("received",c),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Bp(u,e,l,i)})))},Wp=function(e,t,n,r){return r.meta.direction!==Lr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(as["a"])(n),Object(Mt["a"])((function(n){var a=Cp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Ar.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(Vo("received",c),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Bp(u,e,l,i)})))},Vp=function(e,t,n){Rp(t);var r=n.latest$,a=n.config$,o=r.pipe(Vo("state"));return e.pipe(Object(B["a"])(xn([qr,Zr.success,Xr.success,Kr,Gr])),Object($["a"])((function(t){return qr.is(t)?Fp(e,o,a,t):Zr.success.is(t)?$p(e,o,a,t):Xr.success.is(t)?qp(e,o,a,t):Kr.is(t)?Hp(e,o,a,t):Wp(e,o,a,t)})))};function Kp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Gp(e,t){return zp(e)||Qp(e,t)||Yp(e,t)||Zp()}function Zp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yp(e,t){if(e){if("string"===typeof e)return Xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xp(e,t):void 0}}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zp(e){if(Array.isArray(e))return e}var Jp=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(to(Rt(ur))),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Gp(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Kr({message:c},{secrethash:c.secrethash,direction:Lr.SENT});case 10:case"end":return e.stop()}}),e)}))))},eb=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),U["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,f=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),U["a"];if(i.amount.lt(f))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])($r.failure(new pt(dt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(f)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Ln.SECRET_REVEAL,message_identifier:Ss(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Ut["a"])(eo(a,b,{log:o}))}return s.pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Gr({message:n},t.meta);case 2:return e.next=4,Ar.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},tb=function(e,t,n){Kp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(xn(Kr)),Object(B["a"])((function(e){return e.meta.direction===Lr.SENT})),Object(Zu["a"])((function(e){return o.pipe(Vo("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return eb(t,e,{log:r,signer:a})})))})))},nb=function(e,t){return e.pipe(Object(B["a"])(to(lr)),Object(as["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Gp(t,2),r=n[0],a=n[1],o=r.payload.message,i=Es(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Lr.SENT},e.next=7,Wr({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,Zr.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Wr({secret:o.secret},{secrethash:i,direction:Lr.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},rb=function(e,t,n){Kp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(xn([Wr,Vr.success])),Object(B["a"])((function(e){return e.meta.direction===Lr.RECEIVED})),Object(Zu["a"])((function(e){return o.pipe(Vo("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Ln.SECRET_REVEAL,message_identifier:Ss(),secret:e.payload.secret};return eo(a,t,{log:r})})),Object(M["a"])((function(t){return Gr({message:t},e.meta)})),Object(Dc["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},ab=function(e,t,n){Kp(e);var r=n.secretRegistryContract;return tn(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(as["a"])(t),Object(B["a"])((function(e){var t=Gp(e,2),n=Gp(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Gp(t,2),r=Gp(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Vr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Lr.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Vr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Lr.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},ob=function(e){return e.pipe(Object(B["a"])(Vr.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return $r.success({},e.meta)})))},ib=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Vo(Lr.RECEIVED),Object($["a"])((function(e){return Object(Ut["a"])(Object.keys(e))})),Object(zl["a"])(),Object($["a"])((function(t){return e.pipe(Object(B["a"])(Hn.is),Object(as["a"])(a.pipe(Object(q["a"])("state",Lr.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=Gp(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[De.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(rs["a"])((function(n){var r=Gp(n,2),a=r[1],o={secrethash:t,direction:Lr.RECEIVED};return ff(e,Vr.request({secret:a.secret[1].value},o),In(Vr,o))})),Object(Po["a"])(a.pipe(Vo("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},cb=function(e,t,n){Kp(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(B["a"])(Vr.request.is),Object(as["a"])(s),Object($["a"])((function(e){var t,n=Gp(e,2),s=n[0],u=n[1].subkey,l=su({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,f=uu(c,d);return Object(Ut["a"])(f.functions.registerSecret(s.payload.secret)).pipe(ci("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(ss["a"])(),Object(Dc["a"])((function(e){return Object(D["a"])(Vr.failure(e,s.meta))})))})))};function sb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=db(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ub(e,t){return bb(e)||pb(e,t)||db(e,t)||lb()}function lb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function db(e,t){if(e){if("string"===typeof e)return fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fb(e,t):void 0}}function fb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bb(e){if(Array.isArray(e))return e}var yb=function(e){return e.pipe(Object(B["a"])(xn(ea.success)),Object(M["a"])((function(e){return Ar.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},mb=[["partner",1],["own",2]],hb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Hn.is),Object(q["a"])("payload","blockNumber"),Object(as["a"])(t,r),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,f,b,y,m,h;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=ub(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=43;break}if(s=c[i],s.state===qa.open){e.next=6;break}return e.abrupt("continue",40);case 6:u=sb(mb),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=32;break}d=ub(l.value,2),f=d[0],b=d[1],y=sb(s[f].withdrawRequests),e.prev=12,y.s();case 14:if((m=y.n()).done){e.next=22;break}if(h=m.value,!h.expiration.add(o*b).gt(r)){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,ta({participant:s[f].address},{tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:h.expiration.toNumber(),totalWithdraw:h.total_withdraw});case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](12),y.e(e.t0);case 27:return e.prev=27,y.f(),e.finish(27);case 30:e.next=9;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](7),u.e(e.t1);case 37:return e.prev=37,u.f(),e.finish(37);case 40:i++,e.next=2;break;case 43:case"end":return e.stop()}}),e,null,[[7,34,37,40],[12,24,27,30]])}))))},vb=n("ab21"),gb=n("6d6a"),Ob=n("1a2de");function _b(e,t){return Tb(e)||Eb(e,t)||kb(e,t)||wb()}function wb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kb(e,t){if(e){if("string"===typeof e)return jb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jb(e,t):void 0}}function jb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Tb(e){if(Array.isArray(e))return e}var Ab=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Sb(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[De.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[ri({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==qa.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(qa.open,'"');var s=ii(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var xb=N()((function(e){return Ab(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function Nb(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Ue["t"]({message:Ue["q"],network_info:Ue["t"]({chain_id:Ue["j"](a.chainId),token_network_registry_address:Ue["j"](o.TokenNetworkRegistry.address)}),operator:Ue["q"],payment_address:St,price_info:kt(32),version:Ue["q"]}),s=St.is(e)?Object(Ut["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(as["a"])(i),Object($["a"])((function(e){var t=_b(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new pt(dt.PFS_EMPTY_URL);if(!fu(a))throw new pt(dt.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(Xu["a"])(a+"/api/v1/info").pipe(Object(Ku["a"])(o),Object($["a"])((function(e){return Ab(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=vt,t.t1=c,t.t2=La,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,xb(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(M["a"])((function(e){var t=_b(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function Rb(e,t){var n=t.log;return Object(Ut["a"])(e).pipe(Object($["a"])((function(e){return Nb(e,t).pipe(Object(Dc["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(Wu["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function Cb(e){return Object(w["concat"])([Ia(e.one_to_n_address,20),Ia(e.chain_id,32),Ia($a.IOU,32),Ia(e.sender,20),Ia(e.receiver,20),Ia(e.amount,32),Ia(e.expiration_block,32)])}function Db(e,t){return Ab(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(Cb(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function Ib(e){return Lb(e)||Ub(e)||qb(e)||Pb()}function Pb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ub(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Lb(e){if(Array.isArray(e))return Hb(e)}function Mb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Bb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Fb(e,t){return Vb(e)||Wb(e,t)||qb(e,t)||$b()}function $b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qb(e,t){if(e){if("string"===typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hb(e,t):void 0}}function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vb(e){if(Array.isArray(e))return e}var Kb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Gb=N()((function(e){return Kb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),Zb=Ue["n"](Ue["t"]({error_code:Ue["l"],errors:Ue["q"]}));function Yb(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Xb(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.userDepositContract,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=Yb(),n=Object(w["concat"])([a,e.address,Object(w["toUtf8Bytes"])(t)]);return Object(Ut["a"])(o.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(as["a"])(u),Object($["a"])((function(n){var r=Fb(n,2),a=r[0],o=r[1].httpTimeout;return Object(Xu["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Ku["a"])(o))})),Object(as["a"])(s.pipe(Object(q["a"])("state","blockNumber"))),Object($["a"])((function(t){var n=Fb(t,2),o=n[0],s=n[1];return Kb(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=10;break}return t.t0=a,t.t1=e.address,t.t2=Object(w["bigNumberify"])(i.chainId),t.t3=k["Zero"],t.next=7,Gb(c);case 7:return t.t4=t.sent,t.t5=Object(w["bigNumberify"])(s).add(2*Math.pow(10,5)),t.abrupt("return",{sender:t.t0,receiver:t.t1,chain_id:t.t2,amount:t.t3,one_to_n_address:t.t4,expiration_block:t.t5});case 10:return t.next=12,o.text();case 12:if(n=t.sent,o.ok){t.next=15;break}throw new pt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 15:if(r=vt(Ur,La(n)),u=r.last_iou,l=Object(w["verifyMessage"])(Cb(u),u.signature),l===a){t.next=19;break}throw new pt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))}function Qb(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):Xb(e,t,n)})),Object(M["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return Db(n.signer,e)})))}var zb=function(e,t,n){Bb(t);var r=n.log,a=n.latest$;return e.pipe(Object(B["a"])(xn(aa.request)),Object(Zu["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,f=e.meta,b=f.tokenNetwork,y=f.target;if(!Object.values(i.tokens).includes(b))throw new pt(dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new pt(dt.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[De.NO_RECEIVE])throw new pt(dt.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===Sb(i,c,b,y,y,e.meta.value))return Object(D["a"])({paths:[{path:[n.address,y],fee:k["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new pt(dt.PFS_DISABLED);var m=e.payload.pfs?Object(D["a"])(e.payload.pfs):u?Nb(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return Rb(e,n)})),Object(Do["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):Qb(e,b,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(Xu["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Ma({from:n.address,to:y,value:kt(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:kt(32).encode(a.amount),expiration_block:kt(32).encode(a.expiration_block),chain_id:kt(32).encode(a.chain_id)}):void 0})}).pipe(Object(Ku["a"])(l),Object(M["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return Kb(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(M["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=La(n);return t.ok?{paths:vt(Cr,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:vt(Zb,a),iou:r}})))})),Object(as["a"])(a),Object($["a"])((function(t){var a=Fb(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(Ut["a"])(p.a.mark((function t(){var a,i,u,l,d,f,b,y,m,h,v,g,O;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,ia({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,ca(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new pt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new pt(dt.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],f=new Set,b=Mb(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,h=m.path,v=m.fee,h[0]===n.address&&(h=h.slice(1)),g=h[0],!f.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!v.gt(d[0].fee)||"path: already selected a smaller fee":Sb(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",h),f.add(g),t.abrupt("continue",30);case 29:d.push({path:h,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new pt(dt.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,aa.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(Dc["a"])((function(t){return Object(D["a"])(aa.failure(t,e.meta))})))})))},Jb=function(e,t,n){Bb(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(si,Object($["a"])((function(e){return e.pipe(Object(vb["a"])(),Object(as["a"])(c),Object(B["a"])((function(e){var t=Fb(e,2),n=Fb(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===qa.open&&!!a})),Object(gb["a"])((function(e){var t=Fb(e,2),n=Fb(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(Xc["a"])(o):Object(D["a"])(1)})),Object(Mt["a"])((function(e){var t=Fb(e,2),n=Fb(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,d=c.tokenNetwork,f=c.partner.address,p=ii(c),b=p.ownCapacity,y=p.partnerCapacity,m={type:Ln.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(w["bigNumberify"])(o.chainId),token_network_address:d,channel_identifier:Object(w["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(w["bigNumberify"])(u)};return Object(P["a"])((function(){return eo(i,m,{log:r})})).pipe(Object(M["a"])((function(e){return Sr({message:e},{roomName:l})})),Object(Dc["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},ey=function(e,t,n){Bb(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(si,Object($["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(as["a"])(c),Object(B["a"])((function(e){var t=Fb(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===qa.open&&!!a&&!(null===o||void 0===o?void 0:o[De.NO_MEDIATE])})),Object($["a"])((function(e){var t=Fb(e,2),n=t[0],c=t[1].pfsRoom,s={type:Ln.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(w["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(w["bigNumberify"])(n.id)},updating_participant:a,timestamp:Yb(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Ut["a"])(eo(i,s,{log:r})).pipe(Object(M["a"])((function(e){return Sr({message:e},{roomName:c})})),Object(Dc["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},ty=function(e,t,n){Bb(e),Bb(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(Vo("pfs"),Object(Mt["a"])((function(e){return""!==e&&void 0!==e?U["a"]:tn(r,[r.filters.RegisteredService(null,null,null,null)],Object(D["a"])(a.ServiceRegistry.block_number)).pipe(Object(Io["a"])((function(e){var t=Fb(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(Mt["a"])((function(e){var t=Fb(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(Vu["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(Lo["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(Ib(e),[n]):e}),[]),Object(Uo["a"])(),Object(Ob["a"])(1e3),Object(M["a"])((function(e){return oa({pfsList:e})})))})))},ny=function(e,t,n){Bb(e),Bb(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(Vo("state","blockNumber"),Object(rs["a"])((function(){return o.functions.effectiveBalance(r)})),Object(Uo["a"])((function(e,t){return t.eq(e)})),Object(M["a"])(sa))};function ry(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Fb(e,2),u=s[1],l=ii(u),d=l.partnerUnlocked,f=l.ownDeposit;return d.isZero()||f.isZero()?U["a"]:Object(Pt["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n,r=Fb(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&d.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(ts["a"])(1),Object($["a"])((function(e){var i=Fb(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,d=u.partner.balanceProof,f=Ka(d),p=Object(w["concat"])([Ia(u.tokenNetwork,20),Ia(r.chainId,32),Ia($a.BALANCE_PROOF_UPDATE,32),Ia(u.id,32),Ia(f,32),Ia(d.nonce,32),Ia(d.additionalHash,32),Ia(d.signature,65)]);return Object(Ut["a"])(a.signMessage(p)).pipe(Object($["a"])((function(e){return eo(a,{type:Ln.MONITOR_REQUEST,balance_proof:{chain_id:d.chainId,token_network_address:d.tokenNetworkAddress,channel_identifier:Object(w["bigNumberify"])(u.id),nonce:d.nonce,balance_hash:f,additional_hash:d.additionalHash,signature:d.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return Sr({message:e},{roomName:l})})))})),Object(Dc["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]})))}}var ay=function(e,t,n){return Bb(e),Bb(t),n.latest$.pipe(Object(q["a"])("state"),si,Object(as["a"])(n.config$),Object($["a"])((function(e){var t=Fb(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(Uo["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(vb["a"])(),Object(gb["a"])((function(e){var t=Fb(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(Xc["a"])(a):Object(D["a"])(1)})),Object(Mt["a"])(ry(n)))})))},oy=function(e,t,n){Bb(t);var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer;return e.pipe(Object(B["a"])(la.request.is),Object($["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(Zu["a"])((function(e){var t=Fb(e,2),n=t[0],c=t[1],s=uu(r,i),u=n.meta.amount;return Object(P["a"])((function(){return bt(u.gt(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:u.toString()}]),bt(c.sub(u).gte(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:c.toString(),amount:u.toString()}]),s.functions.planWithdraw(u)})).pipe(ci("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Object($["a"])((function(e){var t=e.transactionHash,n=e.blockNumber;return Object(Ut["a"])(r.functions.withdraw_plans(a)).pipe(Object(M["a"])((function(e){var r=e.amount,a=e.withdraw_block;return la.success({block:a.toNumber(),txHash:t,txBlock:n,confirmed:void 0},{amount:r})})))})),Object(Dc["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(D["a"])(la.failure(e,n.meta))})))})))},iy=function(e,t,n){Bb(e),Bb(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return la.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},cy=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer;return e.pipe(Object(B["a"])(la.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object($["a"])((function(e){return t.pipe(Object(q["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(ns["a"])(e))})),Object($["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(Zu["a"])((function(e){var t=Fb(e,2),n=t[0],c=t[1],s=uu(a,i);return Object(P["a"])((function(){return bt(c.gt(k["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:c.toString()}]),s.functions.withdraw(n.meta.amount)})).pipe(ci("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),Object(Zu["a"])((function(e){var t=e.transactionHash,r=e.blockNumber;return Object(P["a"])((function(){return s.functions.balances(o)})).pipe(Object(M["a"])((function(e){return da({withdrawal:c.sub(e),txHash:t,txBlock:r,confirmed:void 0},n.meta)})))})),Object(Dc["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(D["a"])(la.failure(e,n.meta))})))})))},sy=function(e,t,n){Bb(e);var r=n.monitoringServiceContract,a=n.address;return tn(r,[r.filters.NewBalanceProofReceived(null,null,null,null,null,a)]).pipe(Object(B["a"])((function(e){var t=Fb(e,6),n=t[5];return n===a})),Object(as["a"])(t),Object(M["a"])((function(e){var t=Fb(e,2),n=Fb(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)}));if(l)return fa({tokenNetwork:r,partner:l.partner.address,id:l.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:s.blockNumber,confirmed:void 0})})),Object(B["a"])(gt))};function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ly(e,t){return yy(e)||by(e,t)||fy(e,t)||dy()}function dy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fy(e,t){if(e){if("string"===typeof e)return py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?py(e,t):void 0}}function py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function by(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function yy(e){if(Array.isArray(e))return e}function my(e,t,n){var r=t.pipe(Vo("config"));return Object(Pt["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=ly(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(uy({},De.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(Uo["a"])(Lc.a))}function hy(e,t,n){var r=n.defaultConfig,a=e.pipe(Object(B["a"])(sa.is),Object(q["a"])("payload"),Object(Rc["a"])(k["MaxUint256"])),o=my(r,t,a),i=Kc(e),c=e.pipe(Object(B["a"])(oa.is),Object(q["a"])("payload","pfsList"),Object(Rc["a"])([])),s=e.pipe(Object(B["a"])(ar.is),Object(Lo["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),uy({},t.meta.address,t.payload)):No()(t.meta.address,e)}),{}),Object(Rc["a"])({}));return Object(Pt["a"])([Object(Pt["a"])([e,t,o,i,c,s]),Object(Pt["a"])([a])]).pipe(Object(M["a"])((function(e){var t=ly(e,2),n=ly(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=ly(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}var vy=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),gy=function(e,t,n){var r=e.pipe(Object(B["a"])(xn(ba))),a=e.pipe(Object(Cc["a"])(Pc()(xn(ba)),!0)),o=t.pipe(Object(Po["a"])(r));return hy(a,o,n).subscribe(n.latest$),Object(Ut["a"])(Object.values(vy)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(Dc["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(ba({reason:e}))})),Object(Po["a"])(r))};function Oy(e){return ky(e)||wy(e)||Ty(e)||_y()}function _y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ky(e){if(Array.isArray(e))return Ay(e)}function jy(e,t){return xy(e)||Sy(e,t)||Ty(e,t)||Ey()}function Ey(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ty(e,t){if(e){if("string"===typeof e)return Ay(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ay(e,t):void 0}}function Ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xy(e){if(Array.isArray(e))return e}function Ny(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cy(e,t,n){return t&&Ry(e.prototype,t),n&&Ry(e,n),e}var Dy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Iy=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,f,b=this;Ny(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new R["a"](1);this.state$=h.pipe(Vo("state")),this.action$=h.pipe(Vo("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(Vo("channels"),Object(M["a"])(cu)),this.transfers$=iu(this.state$),this.events$=this.action$.pipe(Object(B["a"])(xn(ha))),this.getTokenInfo=N()((function(e){return Dy(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=jy(r,4),o=a[0],i=a[1],c=a[2],s=a[3],bt(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:h,config$:h.pipe(Vo("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:ke.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),monitoringServiceContract:xe.connect(a.MonitoringService.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),main:c},this.userDepositTokenAddress=N()((function(){return Dy(b,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.config$.pipe(Vo("logger")).subscribe((function(e){return b.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(Nc,o,Object(j["a"])(v,this.epicMiddleware)),hy(Object(D["a"])(ya({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return Cy(e,[{key:"start",value:function(){var e=this;bt(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(gy),this.epicMiddleware=void 0,this.store.dispatch(ya({}))}},{key:"stop",value:function(){this.store.dispatch(ba({reason:Ce.STOP}))}},{key:"getBlockNumber",value:function(){return Dy(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(ya(vt(dn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:su(this.deps,this.config.subkey).address,bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Dy(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:su(this.deps,this.config.subkey).address,bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Dy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Dy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,bt(r&&r!==k["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Wn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Dy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,bt(!n.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=n.settleTimeout?vt(kt(4),n.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=n.deposit?vt(kt(32),n.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:t},u=Pn(Vn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Pn(Gn,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Vn.request(Object.assign(Object.assign({},n),{settleTimeout:i,deposit:c}),s)),a.next=14,u;case 14:return d=a.sent,null===r||void 0===r||r({type:Se.OPENED,payload:{txHash:d}}),a.next=18,this.state$.pipe(Vo("channels",ri({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===qa.open}))).toPromise();case 18:if(null===r||void 0===r||r({type:Se.CONFIRMED,payload:{txHash:d}}),!l){a.next=24;break}return a.next=22,l;case 22:f=a.sent,null===r||void 0===r||r({type:Se.DEPOSITED,payload:{txHash:f}});case 24:return a.abrupt("return",d);case 25:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Dy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],bt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c=vt(kt(32),n),s={tokenNetwork:i,partner:t},u=Pn(Gn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Gn.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Dy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Pn(Yn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Yn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Dy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Pn(Qn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Qn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Dy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=Pn(tr,n,this.action$),this.store.dispatch(tr.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Dy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n,dt.DTA_INVALID_AMOUNT,this.log.info),c=r.paymentId?vt(kt(8),r.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):As(),s=r.paths?vt(Dr,r.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=r.pfs?vt(Ir,r.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,bt(void 0===r.secret||Tt.is(r.secret),dt.RDN_INVALID_SECRET,this.log.info),bt(void 0===r.secrethash||Et.is(r.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),l=r.secret?r.secret:r.secrethash?void 0:Ts(),d=r.secrethash||Es(l),bt(!l||Es(l)===d,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),f={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Dn(aa,f)),Object(M["a"])((function(e){if(aa.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return b.store.dispatch(aa.request({paths:s,pfs:u},f)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(B["a"])(xn([qr,$r.failure])),Object(F["a"])((function(e){return e.meta.direction===Lr.SENT&&e.meta.secrethash===d})),Object(M["a"])((function(e){if($r.failure.is(e))throw e.payload;return Ns(e.meta)}))),Object(P["a"])((function(){return b.store.dispatch($r.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:Lr.SENT})),U["a"]})))}))).toPromise());case 15:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Dy(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=Cs(e),c=i.direction,s=i.secrethash,bt(s in this.state[c],dt.RDN_UNKNOWN_TRANSFER,this.log.info),u=Ps(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new pt(dt.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,Pn($r,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Dy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n),c=r.pfs?vt(Ir,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Pn(aa,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(aa.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Dy(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],bt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=vt(kt(32),n),i={tokenNetwork:a,target:t,value:o},c=Pn(aa,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(aa.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Dy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(Vo("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return Rb(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Dy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),bt(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),a=su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=pe.connect(e,o),n.next=7,lu(i,"mint",[vt(kt(32),t)],dt.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,du(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Dy(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(gt)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(Oy(e),Oy(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return Dy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y,m;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(w["bigNumberify"])(e),bt(o.gt(k["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),i=su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=uu(this.deps.userDepositContract,c),n.t0=uu,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return d=n.sent,bt(d.gte(e),[dt.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:d.toString(),required:Object(w["bigNumberify"])(e).toString()}],this.log.info),bt(!a||Object(w["bigNumberify"])(a).gte(e),[dt.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(w["bigNumberify"])(d).toString(),required:Object(w["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(f=n.sent,b=k["HashZero"],!f.lt(o)){n.next=26;break}return n.next=25,lu(l,"approve",[u.address,null!==a&&void 0!==a?a:o],dt.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:Se.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,lu(u,"deposit",[this.address,y.add(o)],dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return m=n.sent,null===t||void 0===t||t({type:Se.DEPOSITED,payload:{txHash:m.transactionHash}}),n.next=36,du(m,this.deps);case 36:return this.log.debug('deposit tx "'.concat(m.transactionHash,'" confirmed')),null===t||void 0===t||t({type:Se.CONFIRMED,payload:{txHash:m.transactionHash}}),n.abrupt("return",m.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Dy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{to:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(w["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(w["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),bt(d.gt(k["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:d.toString()}],this.log.info),f=d.lte(t)?d:Object(w["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:f,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,bt(y.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Dy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,d;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=su(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=uu(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(w["bigNumberify"])(n),r.next=11,lu(s,"transfer",[t,l],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return d=r.sent,r.abrupt("return",d.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"planUdcWithdraw",value:function(e){return Dy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:Object(w["bigNumberify"])(e)},r=Pn(la,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(la.request(void 0,n)),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return Dy(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,d,f,b,y,m,h,v,g;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new _["JsonRpcProvider"](e):e instanceof _["JsonRpcProvider"]?e:new _["Web3Provider"](e),rn(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=ru(s)),i.next=8,ou(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,f=u.main,i.next=14,So(s,r,d,n,a&&vt(dn,a));case 14:return b=i.sent,y=b.state,m=b.onState,h=b.onStateComplete,v=b.defaultConfig,bt(d===y.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:d,state:y.address}]),bt(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:r.TokenNetworkRegistry.address,stateNetwork:y.chainId,stateRegistry:y.registry}]),g=new this(c,s,l,r,y,v,f),m&&g.state$.subscribe(m,h,h),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Re.sdk}},{key:"contractVersion",get:function(){return Re.contracts}}]),e}()},f45e:function(e,t,n){}});
{"version":3,"sources":["webpack:///./src/views/OpenChannel.vue?7ee5","webpack:///./src/views/OpenChannel.vue","webpack:///./src/views/OpenChannel.vue?ca51","webpack:///./src/views/OpenChannel.vue?1438","webpack:///./src/views/OpenChannel.vue?01e0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","autocomplete","model","value","callback","$$v","valid","expression","column","justify-space-between","fill-height","align-center","justify-center","xs10","token","limit","deposit","xs2","_v","_s","$t","xs8","partner","enabled","text","on","click","$event","openChannel","display","loading","steps","done-step","doneStep","current","done","description","error","title","button-label","dismiss","staticRenderFns","OpenChannelvue_type_script_lang_ts_OpenChannel","_Mixins","OpenChannel","_this","Object","classCallCheck","types","inherits","createClass","key","to","from","next","window","confirm","_openChannel","asyncToGenerator","regeneratorRuntime","mark","_callee","depositAmount","_this2","wrap","_context","prev","balance_utils","parse","decimals","eq","constants","$raiden","address","progress","setTimeout","navigateToSelectPaymentTarget","t0","raiden_service","message","stop","apply","arguments","_created","_callee2","_this$$route$params","tokenInfo","_context2","$route","params","address_utils","checkAddressChecksum","navigateToHome","abrupt","navigateToTokenSelect","$store","getters","getToken","sent","created","vue_property_decorator","navigation_mixin","tslib_es6","components","TokenInformation","Divider","ErrorScreen","Stepper","ActionButton","AmountInput","OpenChannelvue_type_script_lang_ts_","views_OpenChannelvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","installComponents_default","VFlex","VForm","VLayout","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_7b85c173_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_7b85c173_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6c5cd2c5.769b34bc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{staticClass:\"open-channel\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"justify-space-between\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\"}},[_c('amount-input',{attrs:{\"token\":_vm.token,\"limit\":\"\"},model:{value:(_vm.deposit),callback:function ($$v) {_vm.deposit=$$v},expression:\"deposit\"}})],1)],1),_c('divider'),_c('token-information',{attrs:{\"token\":_vm.token}}),_c('divider'),_c('v-layout',{staticClass:\"open-channel__hub\",attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{staticClass:\"open-channel__hub__label text-left\",attrs:{\"xs2\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('open-channel.hub'))+\"\\n      \")]),_c('v-flex',{staticClass:\"open-channel__hub__address text-left\",attrs:{\"xs8\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.partner)+\"\\n      \")])],1),_c('action-button',{attrs:{\"enabled\":_vm.valid,\"text\":_vm.$t('open-channel.open-button')},on:{\"click\":function($event){return _vm.openChannel()}}}),_c('stepper',{attrs:{\"display\":_vm.loading,\"steps\":_vm.steps,\"done-step\":_vm.doneStep,\"current\":_vm.current,\"done\":_vm.done}}),_c('error-screen',{attrs:{\"description\":_vm.error,\"title\":_vm.$t('open-channel.error.title'),\"button-label\":_vm.$t('open-channel.error.button')},on:{\"dismiss\":function($event){_vm.error = ''}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport AmountInput from '../components/AmountInput.vue';\nimport {\n  ChannelDepositFailed,\n  ChannelOpenFailed\n} from '@/services/raiden-service';\nimport {\n  emptyDescription,\n  StepDescription,\n  Token,\n  TokenPlaceholder\n} from '@/model/types';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport Stepper from '@/components/Stepper.vue';\nimport { Zero } from 'ethers/constants';\nimport AddressUtils from '@/utils/address-utils';\nimport NavigationMixin from '@/mixins/navigation-mixin';\nimport { Route } from 'vue-router';\nimport ErrorScreen from '@/components/ErrorScreen.vue';\nimport Divider from '@/components/Divider.vue';\nimport TokenInformation from '@/components/TokenInformation.vue';\nimport ActionButton from '@/components/ActionButton.vue';\n\n@Component({\n  components: {\n    TokenInformation,\n    Divider,\n    ErrorScreen,\n    Stepper,\n    ActionButton,\n    AmountInput\n  }\n})\nexport default class OpenChannel extends Mixins(NavigationMixin) {\n  partner: string = '';\n  token: Token = TokenPlaceholder;\n\n  deposit: string = '0.00';\n\n  valid: boolean = false;\n  loading: boolean = false;\n  error: string = '';\n\n  steps: StepDescription[] = [];\n\n  doneStep: StepDescription = emptyDescription();\n  current = 0;\n  done = false;\n\n  beforeRouteLeave(to: Route, from: Route, next: any) {\n    if (!this.loading) {\n      next();\n    } else {\n      if (window.confirm(this.$t('open-channel.confirmation') as string)) {\n        next();\n      } else {\n        next(false);\n      }\n    }\n  }\n\n  async openChannel() {\n    const token = this.token;\n    const depositAmount = BalanceUtils.parse(this.deposit, token.decimals);\n\n    if (depositAmount.eq(Zero)) {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription\n      ];\n    } else {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription,\n        (this.$t('open-channel.steps.transfer') as any) as StepDescription,\n        (this.$t('open-channel.steps.deposit') as any) as StepDescription\n      ];\n    }\n\n    this.loading = true;\n\n    try {\n      await this.$raiden.openChannel(\n        token.address,\n        this.partner,\n        depositAmount,\n        progress => (this.current = progress.current - 1)\n      );\n\n      this.done = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.navigateToSelectPaymentTarget(this.token.address);\n      }, 2000);\n    } catch (e) {\n      this.error = '';\n      if (e instanceof ChannelOpenFailed) {\n        this.error = this.$t('open-channel.error.open-failed') as string;\n      } else if (e instanceof ChannelDepositFailed) {\n        this.error = this.$t('open-channel.error.deposit-failed') as string;\n      } else {\n        this.error = e.message;\n      }\n\n      this.done = false;\n      this.loading = false;\n    }\n  }\n\n  async created() {\n    this.doneStep = (this.$t(\n      'open-channel.steps.done'\n    ) as any) as StepDescription;\n    const { token, partner } = this.$route.params;\n\n    if (!AddressUtils.checkAddressChecksum(token)) {\n      this.navigateToHome();\n      return;\n    }\n\n    if (!AddressUtils.checkAddressChecksum(partner)) {\n      this.navigateToTokenSelect();\n      return;\n    } else {\n      this.partner = partner;\n    }\n\n    let tokenInfo = this.$store.getters.token(token);\n    if (!tokenInfo) {\n      tokenInfo = await this.$raiden.getToken(token);\n    }\n\n    if (!tokenInfo) {\n      this.navigateToHome();\n    } else {\n      this.token = tokenInfo;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OpenChannel.vue?vue&type=template&id=7b85c173&scoped=true&\"\nimport script from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nexport * from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OpenChannel.vue?vue&type=style&index=0&id=7b85c173&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b85c173\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VFlex,VForm,VLayout})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=7b85c173&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=7b85c173&scoped=true&lang=scss&\""],"sourceRoot":""}
(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-15f0b7af":"b5319531","chunk-67b172b3":"97fd3c49","chunk-73a2659e":"39c7792f","chunk-d483edf6":"5cba24b1","chunk-895be7da":"e57cd428","chunk-56eafb7a":"651f81d2","chunk-7ea59430":"1e0ac891","chunk-bebefaa6":"dc2d6106","chunk-1503d996":"0bf9ae71","chunk-7a1b58ac":"8ef548fc","chunk-5dcb669a":"535c9d99","chunk-36b5fef4":"cf453415","chunk-d03713e2":"9b0a12b4","chunk-f9c339fe":"09d0c4bd"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-15f0b7af":1,"chunk-67b172b3":1,"chunk-73a2659e":1,"chunk-d483edf6":1,"chunk-895be7da":1,"chunk-56eafb7a":1,"chunk-7ea59430":1,"chunk-bebefaa6":1,"chunk-1503d996":1,"chunk-7a1b58ac":1,"chunk-5dcb669a":1,"chunk-36b5fef4":1,"chunk-d03713e2":1,"chunk-f9c339fe":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-15f0b7af":"1d5a726d","chunk-67b172b3":"53c90c86","chunk-73a2659e":"90ce0cc7","chunk-d483edf6":"b955e85d","chunk-895be7da":"c5984820","chunk-56eafb7a":"9b9a3184","chunk-7ea59430":"c5adc0ad","chunk-bebefaa6":"1b781117","chunk-1503d996":"711c53d5","chunk-7a1b58ac":"e4c0c4bb","chunk-5dcb669a":"0727a159","chunk-36b5fef4":"90c578bf","chunk-d03713e2":"a811d323","chunk-f9c339fe":"370906c3"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["b"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("e6c7"),n("2877")),O=Object(g["a"])(v,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||f(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(e,t){var n=a["a"].toUnits(e,t||18),r=parseFloat(n);if(0===r)return"0.0";if(r<1e-6)return"<0.000001";var o=i()(n,"."),c=u(o,2),s=c[0],l=c[1];if(l&&l.length>6){var d=l.substring(0,6);return"≈".concat(s,".").concat(d)}return n}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,t||18)},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","transaction_hash":"0xd206df08ae6d2107efcfae3c666456580f2d9b2a62d8f3fdcaa95c86e66ffbcc","block_number":5907112,"gas_cost":1980416,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","transaction_hash":"0x3ad7e5b3080fd8ef6018b296a8a87047b1a91536c2247161cd07ea5ff96a1141","block_number":5907113,"gas_cost":1530254,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8",1.157920892373162e+77]},"MonitoringService":{"address":"0x709282aE42C9Df6F156F8A92fC110Fed039DCdB3","transaction_hash":"0x7809b24fa2f04603dab3cc9f7a2a2c310f244dcbbb93960542b4f7eb15475142","block_number":5907114,"gas_cost":1949685,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1"]},"OneToN":{"address":"0x083a0411483b3Fb9eb9ccfb1F07003BF8f27D094","transaction_hash":"0x63d88efd315657d9b8e370a04f77b290d06909d5211248f5c05695539438c2e3","block_number":5907115,"gas_cost":1097569,"constructor_arguments":["0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe",4,"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=p(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"onGeneralBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["b"])([a["a"]],h),t["a"]=h},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=k();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var w=function(e){m(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));w=Object(o["b"])([Object(i["a"])({computed:d(d({},Object(c["c"])(["defaultAccount"])),Object(c["b"])(["pendingTransfers"]))})],w);var _=w,E=_,T=(n("be88"),n("2877")),x=n("6544"),S=n.n(x),A=n("4ca6"),R=n("adda"),N=n("3a2f"),C=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=C.exports;S()(C,{VBadge:A["a"],VImg:R["a"],VTooltip:N["a"]})},3:function(e,t){},"316d":function(e,t,n){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x7714DA9D9c577F0b89FE4774193d646F07b880c5","transaction_hash":"0x3377ccdc9624bd432a89b6e3d068fe8dd01949f2f52b4e0538843b88b9fbcdab","block_number":5907003,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1","transaction_hash":"0x84fcd1320182f5255b93609e17056fb84a0edf4752ca6841a8a271bea7981ce4","block_number":5907005,"gas_cost":4001114,"constructor_arguments":["0x7714DA9D9c577F0b89FE4774193d646F07b880c5",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},"48e0":function(e,t,n){"use strict";var r=n("316d"),a=n.n(r);a.a},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x1d238cdacA8fFFD56F722B587aA010d6B438B077","transaction_hash":"0x3bdd7711721781ba977cf436d8cc77312e27b1467102927169e8aa6c3a3abdf0","block_number":2114518,"gas_cost":1980416,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","transaction_hash":"0xabb4bf75eb1946f6342c21959d6443140ab7378f33d9a5bdb1f3a039083b1214","block_number":2114520,"gas_cost":1530254,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952",1.157920892373162e+77]},"MonitoringService":{"address":"0x850C3E4914417eC41230177c2821B9514c2e2bC9","transaction_hash":"0x2cf29dea37d02049295ffa5ea9f744cff82995c0c547f79f6bdd7f27abeae0b4","block_number":2114521,"gas_cost":1949685,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x1d238cdacA8fFFD56F722B587aA010d6B438B077","0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526"]},"OneToN":{"address":"0xe4C2C47F070152c03a564C2c681C3FbD78234156","transaction_hash":"0xe5d1fa41d7b72feeaed494c42bd98860c49c396fe1961f9f2f5567a392018816","block_number":2114523,"gas_cost":1097569,"constructor_arguments":["0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A",5,"0x1d238cdacA8fFFD56F722B587aA010d6B438B077"]}}}')},5:function(e,t){},"51ce":function(e,t,n){},6:function(e,t){},6554:function(e,t,n){"use strict";var r=n("ff61"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,k=O,j=(n("1c30"),n("2877")),w=n("6544"),_=n.n(w),E=n("8336"),T=n("b0af"),x=n("169a"),S=n("132d"),A=Object(j["a"])(k,r,a,!1,null,"188eebce",null);t["a"]=A.exports;_()(A,{VBtn:E["a"],VCard:T["a"],VDialog:x["a"],VIcon:S["a"]})},7:function(e,t){},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["b"])([Object(i["a"])({})],v);var g=v,O=g,k=(n("c6c9"),n("2877")),j=n("6544"),w=n.n(j),_=n("8336"),E=n("62ad"),T=n("132d"),x=n("0fd9"),S=Object(k["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=S.exports;w()(S,{VBtn:_["a"],VCol:E["a"],VIcon:T["a"],VRow:x["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["b"])([a["a"]],m),t["a"]=m},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return T}));var r=n("a34a"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return p(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function k(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function j(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?k(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:k(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function w(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function _(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=j(n);i&&g.put(O,{logger:r,level:e,message:n},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(w)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return x.apply(this,arguments)}function x(){return x=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}},9:function(e,t){},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["b"])([Object(i["a"])({})],g);var O=g,k=O,j=(n("a130"),n("2877")),w=n("6544"),_=n.n(w),E=n("3a2f"),T=Object(j["a"])(k,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;_()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf","transaction_hash":"0x59a02287485ff7ac0153022959f0bbe4a044242ba94bb53f7dedbafd4d35fb4e","block_number":7255736,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a","transaction_hash":"0x20ae67f204baca19726e040399ab2fc45fd3e8abdd16eb3d67abeca2eab31d45","block_number":7255738,"gas_cost":4001114,"constructor_arguments":["0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf",3,20,555428,1.157920892373162e+77]}}}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){return Object(r["formatUnits"])(e,t)}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e,t)}}]),e}()},af21:function(e,t,n){},b397:function(e,t,n){"use strict";var r=n("ebf0"),a=n.n(r);a.a},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","transaction_hash":"0xc7bb55a286aa1dba66dc08a8197be50e8b4dc2658ff1867a998e292c30e5cc2c","block_number":7255768,"gas_cost":1980416,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","transaction_hash":"0x9f6a524f5ce39584637d2d60a9726e1f4137de10cd892b46852f1b903680f008","block_number":7255770,"gas_cost":1530254,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70",1.157920892373162e+77]},"MonitoringService":{"address":"0xFE94CfD16926af2EfD31C3F7F7d60D40180cA552","transaction_hash":"0xd3bcc2d4d6b7cf9c0d899cc6bdde3f9ebc88769c925d0c77fa736138e5d4e4f3","block_number":7255775,"gas_cost":1949685,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a"]},"OneToN":{"address":"0x69A69251f281eEf1926fdF7744BcE48163493E9f","transaction_hash":"0x70e3b1d71a77a85357c14f8e1e1b9ed73696f59025e93358a540a9bfbe9c8d7f","block_number":7255778,"gas_cost":1097569,"constructor_arguments":["0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF",3,"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])])],1)],1),r("action-button",{attrs:{enabled:"",text:e.$t("home.connect-button"),sticky:""},on:{click:function(t){e.connectDialog=!0}}}),r("connect-dialog",{attrs:{connecting:e.connecting,"connecting-subkey":e.connectingSubkey,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("a34a"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),d=n("750b"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.connect-title"))+" ")]),e.injectedProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.web3-provider"),enabled:!e.connecting&&!e.connectingSubkey,loading:e.connecting},on:{click:function(t){return e.connect(e.stateBackup)}}})],1),n("div",{staticClass:"text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.connect-dialog.divider"))+" ")]),e.connectingSubkey?n("div",{staticClass:"connect__raiden-account-spinner text-center"},[n("v-progress-circular",{attrs:{size:30,width:1,indeterminate:""}})],1):n("i18n",{staticClass:"connect__raiden-account text-center font-weight-light",attrs:{path:"home.connect-dialog.raiden-account.description",tag:"div"}},[e.connecting?n("span",[e._v(" "+e._s(e.$t("home.connect-dialog.raiden-account.link-name"))+" ")]):n("a",{on:{click:function(t){return e.connect(e.stateBackup,!0)}}},[e._v(" "+e._s(e.$t("home.connect-dialog.raiden-account.link-name"))+" ")])])],1):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.injectedProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},f=[],b=n("f15c"),y=n("66bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},h=[];function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){var t=x();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0})],A.prototype,"reason",void 0),A=Object(c["b"])([Object(s["a"])({})],A);var R=A,N=R,C=(n("753f"),n("2877")),P=n("6544"),I=n.n(P),D=n("0798"),M=Object(C["a"])(N,m,h,!1,null,"7b92b083",null),L=M.exports;function B(e){return B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H(e,t)}function V(e){var t=K();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}I()(M,{VAlert:D["a"]});var X=function(e){q(n,e);var t=V(n);function n(){var e;return U(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return $(n,[{key:"close",value:function(){}},{key:"connect",value:function(e,t){return{uploadedState:e,subkey:t}}},{key:"injectedProvider",get:function(){return b["a"].injectedWeb3Available()}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],X.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],X.prototype,"connecting",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],X.prototype,"connectingSubkey",void 0),Object(c["b"])([Object(s["b"])()],X.prototype,"close",null),Object(c["b"])([Object(s["b"])()],X.prototype,"connect",null),X=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:d["a"],NoAccessMessage:L},computed:Object(u["c"])(["stateBackup","accessDenied"])})],X);var Y=X,Q=Y,z=(n("ee20"),n("99d9")),J=n("490a"),ee=Object(C["a"])(Q,p,f,!1,null,"4996046c",null),te=ee.exports;I()(ee,{VCardText:z["b"],VCardTitle:z["c"],VProgressCircular:J["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},re=[],ae=n("152b");function oe(e){return oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}function be(e){var t=he();return function(){var n,r=ve(e);if(t){var a=ve(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==oe(t)&&"function"!==typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var ge=function(e){pe(n,e);var t=be(n);function n(){return ue(this,n),t.apply(this,arguments)}return de(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ae["a"]));Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],ge.prototype,"onChange",null),ge=Object(c["b"])([Object(s["a"])({computed:ce({},Object(u["b"])(["tokens"]))})],ge);var Oe=ge,ke=Oe,je=(n("1a2b"),n("8336")),we=n("62ad"),_e=n("a523"),Ee=n("132d"),Te=n("0fd9"),xe=Object(C["a"])(ke,ne,re,!1,null,"4f16408a",null),Se=xe.exports;function Ae(e){return Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,c,"next",e)}function c(e){Pe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function Fe(e){var t=He();return function(){var n,r=Ve(e);if(t){var a=Ve(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Ae(t)&&"function"!==typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}I()(xe,{VBtn:je["a"],VCol:we["a"],VContainer:_e["a"],VIcon:Ee["a"],VRow:Te["a"]});var We=function(e){Be(n,e);var t=Fe(n);function n(){var e;return De(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.connectingSubkey=!1,e}return Le(n,[{key:"connect",value:function(){var e=Ie(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.uploadedState,r=t.subkey,r?this.connectingSubkey=!0:this.connecting=!0,this.$store.commit("reset"),e.next=6,this.$raiden.connect(n,r);case 6:this.connectingSubkey=!1,this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);We=Object(c["b"])([Object(s["a"])({computed:Ne(Ne({},Object(u["c"])(["loading","accessDenied"])),Object(u["b"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:te,NoTokens:Se}})],We);var Ge=We,Ke=Ge,Ze=(n("b397"),n("adda")),Xe=Object(C["a"])(Ke,r,a,!1,null,"6dfe7e7e",null);t["a"]=Xe.exports;I()(Xe,{VCol:we["a"],VContainer:_e["a"],VImg:Ze["a"],VRow:Te["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.6.0","contracts":"0.36.2"}')},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6","transaction_hash":"0xf015b6c93951e645c45d4632dcd25de2869bd6613b5b59c53e2453c168c36447","block_number":2114499,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526","transaction_hash":"0xa77a53156131d50af579a3ab22e80af01eb3e40405292d78e80c8c4d238d4886","block_number":2114501,"gas_cost":4001114,"constructor_arguments":["0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar")],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},l=[],d=n("2f62"),p=n("80bf"),f=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){var t=x();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"canGoBack",get:function(){var e=[p["a"].HOME,p["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(s["a"]));A=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:f["a"],AddressDisplay:b["a"]},computed:h(h({},Object(d["c"])(["loading","defaultAccount"])),Object(d["b"])(["network","isConnected"]))})],A);var R=A,N=R,C=(n("48e0"),n("2877")),P=n("6544"),I=n.n(P),D=n("8336"),M=n("62ad"),L=n("adda"),B=n("0fd9"),U=n("2fa4"),F=Object(C["a"])(N,u,l,!1,null,"22e36b17",null),$=F.exports;I()(F,{VBtn:D["a"],VCol:M["a"],VImg:L["a"],VRow:B["a"],VSpacer:U["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},H=[],V=n("0a08");function W(e){return W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function X(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){var t=ee();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(e){X(n,e);var t=Q(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Z(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);ne=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],ne);var re=ne,ae=re,oe=n("132d"),ie=n("2db4"),ce=Object(C["a"])(ae,q,H,!1,null,null,null),se=ce.exports;I()(ce,{VIcon:oe["a"],VSnackbar:ie["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},le=[];function de(e){return de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function he(e){var t=Oe();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==de(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var je=function(e){ye(n,e);var t=he(n);function n(){var e;return pe(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return be(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);je=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],je);var we=je,_e=we,Ee=Object(C["a"])(_e,ue,le,!1,null,null,null),Te=Ee.exports;function xe(e){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ne(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function Pe(e){var t=Me();return function(){var n,r=Le(e);if(t){var a=Le(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}I()(Ee,{VBtn:D["a"],VSnackbar:ie["a"]});var Be=function(e){Ne(n,e);var t=Pe(n);function n(){return Se(this,n),t.apply(this,arguments)}return Re(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));Be=Object(i["b"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:se,UpdateSnackbar:Te}})],Be);var Ue=Be,Fe=Ue,$e=(n("6554"),n("7496")),qe=n("a523"),He=n("a75b"),Ve=Object(C["a"])(Fe,a,o,!1,null,"3bcb8e58",null),We=Ve.exports;I()(Ve,{VApp:$e["a"],VContainer:qe["a"],VContent:He["a"]});var Ge=n("2fe1");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ke=n("8c4f"),Ze=n("bb51");r["a"].use(Ke["a"]);var Xe=new Ke["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:p["a"].HOME,meta:{title:"Raiden dApp"},component:Ze["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:p["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-bebefaa6"),n.e("chunk-1503d996"),n.e("chunk-7a1b58ac")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:p["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-7ea59430")]).then(n.bind(null,"146c"))}},{path:"/connect",name:p["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-d483edf6")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:p["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-bebefaa6"),n.e("chunk-1503d996"),n.e("chunk-5dcb669a")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:p["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-bebefaa6"),n.e("chunk-36b5fef4")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:p["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-56eafb7a")]).then(n.bind(null,"3a90"))}},{path:"/account",name:p["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-f9c339fe").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:p["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-73a2659e")]).then(n.bind(null,"f18d"))}},{path:"backup",name:p["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-67b172b3")]).then(n.bind(null,"248b"))}},{path:"raiden",name:p["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-d03713e2")]).then(n.bind(null,"9114"))}}]}]}),Ye=Xe,Qe=n("f455"),ze=n("87a2"),Je=n("dd61"),et=n.n(Je),tt=n("e9a8d"),nt=n.n(tt),rt=n("9380"),at=n.n(rt),ot=n("b8ce"),it=n.n(ot),ct=n("c5a2"),st=n.n(ct),ut=n("93c6"),lt=n.n(ut),dt=n("63ea"),pt=n.n(dt),ft=n("13ea"),bt=n.n(ft);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){return wt(e)||jt(e,t)||Ot(e,t)||gt()}function gt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(e,t){if(e){if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wt(e){if(Array.isArray(e))return e}r["a"].use(d["a"]);var _t={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:ze["a"].UNDEFINED,channels:{},tokens:{},transfers:{},presences:{},network:ze["b"],stateBackup:""};function Et(){return it()(_t)}var Tt=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},xt={state:Et(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=vt(r[n],2),o=a[0],i=a[1];o in e.tokens&&pt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=mt(mt({},e.tokens[o]),i):e.tokens=mt(mt({},e.tokens),{},ht({},o,i)))}},updatePresence:function(e,t){e.presences=mt(mt({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){Object.assign(e,Et())},updateTransfers:function(e,t){e.transfers=mt(mt({},e.transfers),{},ht({},t.secrethash,t))},backupState:function(e,t){e.stateBackup=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return et()(at()(nt()(e.channels),(function(e){return!bt()(e)})),(function(n){var r=st()(n,t,Object(ze["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).sort((function(e,t){return Tt(e,t)?e.balance<t.balance?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!bt()(r)&&(n=nt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Qe["a"].open}));return lt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance}}},St=new d["a"].Store(xt),At=n("8aa9");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Rt=n("a34a"),Nt=n.n(Rt),Ct=n("f15c"),Pt=n("a3d5"),It=n("6934"),Dt=n("5670"),Mt=n("e95d"),Lt=n("7f4b"),Bt=n.n(Lt);function Ut(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ut(o,r,a,i,c,"next",e)}function c(e){Ut(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}var Vt=function(){function e(){$t(this,e)}return Ht(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Ft(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}]),e}();function Wt(e){return Wt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Gt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}function Kt(e){var t=zt();return function(){var n,r=tn(e);if(t){var a=tn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!==Wt(t)&&"function"!==typeof t?Xt(e):t}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yt(e){var t="function"===typeof Map?new Map:void 0;return Yt=function(e){if(null===e||!Jt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Qt(e,arguments,tn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),en(n,e)},Yt(e)}function Qt(e,t,n){return Qt=zt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&en(o,n.prototype),o},Qt.apply(null,arguments)}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Jt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function en(e,t){return en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){return on(e)||an(e,t)||un(e,t)||rn()}function rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function an(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function on(e){if(Array.isArray(e))return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=un(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function un(e,t){if(e){if("string"===typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function pn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dn(o,r,a,i,c,"next",e)}function c(e){dn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),e}var mn=function(){function e(t){fn(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return yn(e,[{key:"updateBalances",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=pn(Nt.a.mark((function e(){var t,n,r,a,o,i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=sn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokens",r),e.next=10,this.fetchTokenData(n);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new kn(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=pn(Nt.a.mark((function t(n,r){var a,o,i,c,s,u,l=this;return Nt.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,Vt.fetch(a);case 5:return o=t.sent,t.next=8,Ct["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,Ct["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=54;break;case 18:if(!o){t.next=24;break}return t.next=21,e.createRaiden(i,o.PRIVATE_KEY,n,r);case 21:c=t.sent,t.next=27;break;case 24:return t.next=26,e.createRaiden(i,void 0,n,r);case 26:c=t.sent;case 27:return this._raiden=c,t.next=30,this.getAccount();case 30:return s=t.sent,this.store.commit("account",s),t.next=34,c.userDepositTokenAddress();case 34:return this._userDepositTokenAddress=t.sent,c.events$.pipe(Object(Dt["a"])((function(e){return"newBlock"===e.type})),Object(Mt["a"])((function(){return l.fetchTokenData(l.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(Dt["a"])((function(e){return"raidenShutdown"===e.type}))).subscribe((function(){return l.store.commit("reset")})),c.events$.subscribe((function(e){"tokenMonitored"===e.type&&l.store.commit("updateTokens",cn({},e.payload.token,{address:e.payload.token})),"matrix/presence/success"===e.type&&l.store.commit("updatePresence",cn({},e.meta.address,e.payload.available))})),c.channels$.subscribe((function(e){l.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){e.initiator===s&&l.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return l.raiden.stop()})),c.start(),t.t0=this.store,t.next=46,this.getBalance();case 46:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=54;break}return t.t2=this.store,t.next=52,this.getBalance(c.address);case 52:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 54:t.next=60;break;case 56:t.prev=56,t.t4=t["catch"](0),u=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?ze["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?ze["a"].RDN_STATE_MIGRATION:t.t4 instanceof wn?ze["a"].INITIALIZATION_FAILED:ze["a"].NO_ACCOUNT,this.store.commit("accessDenied",u);case 60:this.store.commit("loadComplete");case 61:case"end":return t.stop()}}),t,this,[[0,56]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=pn(Nt.a.mark((function e(t){var n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",Pt["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=nn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a){var o,i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.prev=3,e.next=6,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Qe["b"].OPENED?o(2,3):""}));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new gn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new vn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=pn(Nt.a.mark((function e(t,n,r){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new On(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new hn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r=this;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",cn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Bt()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a,o){var i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 3:return i=e.sent,e.next=6,this.raiden.waitTransfer(i);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new jn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a){var o;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=pn(Nt.a.mark((function e(){var t;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=pn(Nt.a.mark((function e(t,n,r){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Qe["b"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",cn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=pn(Nt.a.mark((function e(){var t,n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(It["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=pn(Nt.a.mark((function e(t){var n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(It["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"userDepositTokenAddress",get:function(){if(!this._userDepositTokenAddress)throw new Error("address empty");return this._userDepositTokenAddress}}],[{key:"createRaiden",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r,a,o=arguments;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,e.prev=3,e.next=6,Qe["c"].create(t,n,{storage:window.localStorage,state:r},void 0,{pfsSafetyMargin:1.1,pfs:"https://pfs.raidentransport.test001.env.raiden.network",matrixServer:"https://raidentransport.test001.env.raiden.network"},a);case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e["catch"](3),new wn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),hn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),vn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),gn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),On=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),kn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),jn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),wn=function(e){Gt(n,e);var t=Kt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error));function _n(e,t){e.prototype.$raiden=new mn(St)}var En=n("103a"),Tn=n.n(En);function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),e}var Rn=function(){function e(){xn(this,e),this.cache={}}return An(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Tn()(e);return this.cache[e]=n,n}}]),e}();function Nn(e,t){e.prototype.$identicon=new Rn}var Cn=n("a925");function Pn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Cn["a"]);var In=new Cn["a"]({locale:"en",fallbackLocale:"en",messages:Pn()}),Dn=(n("5363"),n("f309"));r["a"].use(Dn["a"]);var Mn=new Dn["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87"}}}}),Ln=n("e508"),Bn=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Bn["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(At["b"])(),r["a"].use(_n),r["a"].use(Nn),r["a"].use(Ln["a"]),new r["a"]({vuetify:Mn,router:Ye,store:St,i18n:In,render:function(e){return e(We)}}).$mount("#app")},e056:function(e,t,n){},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},ebf0:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"connect-title":"Connect","divider":"-OR-","web3-provider":"Use Web3 Provider","raiden-account":{"description":"Connect to Web3 and re-generate a {0}","link-name":"dedicated Raiden account."},"no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"}}},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Enter an address or ENS name..."},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Please enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Please enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Please enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"mint-deposit-dialog":{"button":"Mint and deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Specify amount...","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is to low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp. Your transfer will finish in the background."},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occured","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}}}')},ee20:function(e,t,n){"use strict";var r=n("e056"),a=n.n(r);a.a},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("a34a"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"c",(function(){return Tf})),n.d(t,"a",(function(){return xa})),n.d(t,"b",(function(){return we}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Dn})),n.d(r,"tokenMonitored",(function(){return Mn})),n.d(r,"channelOpen",(function(){return Ln})),n.d(r,"channelMonitor",(function(){return Bn})),n.d(r,"channelDeposit",(function(){return Un})),n.d(r,"channelWithdrawn",(function(){return Fn})),n.d(r,"channelClose",(function(){return $n})),n.d(r,"channelSettleable",(function(){return qn})),n.d(r,"channelSettle",(function(){return Hn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return Gn})),n.d(a,"matrixPresence",(function(){return Kn})),n.d(a,"matrixRoom",(function(){return Zn})),n.d(a,"matrixRoomLeave",(function(){return Xn})),n.d(a,"rtcChannel",(function(){return Yn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return vr})),n.d(o,"messageGlobalSend",(function(){return gr})),n.d(o,"messageReceived",(function(){return Or}));var i={};n.r(i),n.d(i,"transfer",(function(){return xr})),n.d(i,"transferSigned",(function(){return Sr})),n.d(i,"transferProcessed",(function(){return Ar})),n.d(i,"transferSecret",(function(){return Rr})),n.d(i,"transferSecretRegister",(function(){return Nr})),n.d(i,"transferSecretRequest",(function(){return Cr})),n.d(i,"transferSecretReveal",(function(){return Pr})),n.d(i,"transferUnlock",(function(){return Ir})),n.d(i,"transferUnlockProcessed",(function(){return Dr})),n.d(i,"transferExpire",(function(){return Mr})),n.d(i,"transferExpireProcessed",(function(){return Lr})),n.d(i,"transferRefunded",(function(){return Br})),n.d(i,"transferClear",(function(){return Ur})),n.d(i,"withdrawReceive",(function(){return $r}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Vr})),n.d(c,"pfsListUpdated",(function(){return Wr})),n.d(c,"iouPersist",(function(){return Gr})),n.d(c,"iouClear",(function(){return Kr})),n.d(c,"udcDeposited",(function(){return Zr}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return bs})),n.d(s,"initTokensRegistryEpic",(function(){return ys})),n.d(s,"initMonitorChannelsEpic",(function(){return ms})),n.d(s,"initMonitorProviderEpic",(function(){return hs})),n.d(s,"tokenMonitoredEpic",(function(){return vs})),n.d(s,"channelOpenedEpic",(function(){return gs})),n.d(s,"channelMonitoredEpic",(function(){return Os})),n.d(s,"channelOpenEpic",(function(){return ks})),n.d(s,"channelDepositEpic",(function(){return js})),n.d(s,"channelCloseEpic",(function(){return ws})),n.d(s,"channelUpdateEpic",(function(){return _s})),n.d(s,"channelSettleEpic",(function(){return Es})),n.d(s,"channelSettleableEpic",(function(){return Ts})),n.d(s,"channelUnlockEpic",(function(){return xs})),n.d(s,"confirmationEpic",(function(){return As}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Cu})),n.d(u,"matrixShutdownEpic",(function(){return Pu})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Iu})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Du})),n.d(u,"matrixCreateRoomEpic",(function(){return Mu})),n.d(u,"matrixInviteEpic",(function(){return Lu})),n.d(u,"matrixHandleInvitesEpic",(function(){return Bu})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Uu})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Fu})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return $u})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return qu})),n.d(u,"matrixMessageSendEpic",(function(){return Vu})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return Wu})),n.d(u,"matrixMessageReceivedEpic",(function(){return Ku})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Zu})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Xu})),n.d(u,"deliveredEpic",(function(){return Yu})),n.d(u,"rtcConnectEpic",(function(){return ol}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return pl})),n.d(l,"transferAutoExpireEpic",(function(){return kl})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Zl})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return nd})),n.d(l,"initQueuePendingReceivedEpic",(function(){return rd})),n.d(l,"transferMediateEpic",(function(){return ld})),n.d(l,"transferProcessedReceivedEpic",(function(){return vd})),n.d(l,"transferProcessedSendEpic",(function(){return gd})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return Od})),n.d(l,"transferExpireProcessedEpic",(function(){return kd})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return jd})),n.d(l,"transferRefundedEpic",(function(){return Cd})),n.d(l,"transferRetryMessageEpic",(function(){return Kd})),n.d(l,"transferSecretRequestedEpic",(function(){return tp})),n.d(l,"transferSecretRevealEpic",(function(){return rp})),n.d(l,"transferSecretRevealedEpic",(function(){return ap})),n.d(l,"transferRequestUnlockEpic",(function(){return op})),n.d(l,"monitorSecretRegistryEpic",(function(){return ip})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return cp})),n.d(l,"transferAutoRegisterEpic",(function(){return sp})),n.d(l,"transferSecretRegisterEpic",(function(){return up})),n.d(l,"withdrawRequestReceivedEpic",(function(){return lp})),n.d(l,"withdrawSendConfirmationEpic",(function(){return dp}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return Kp})),n.d(d,"pfsCapacityUpdateEpic",(function(){return Xp})),n.d(d,"pfsFeeUpdateEpic",(function(){return Yp})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return Qp})),n.d(d,"monitorUdcBalanceEpic",(function(){return zp})),n.d(d,"monitorRequestEpic",(function(){return ef}));var p=n("a34a"),f=n.n(p),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),m=n("51b1"),h=n("aadd"),v=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(v,{createNewMatrixCall:function(){return null}});var k=n("686e"),j=n("6934"),w=n("8404"),_=n("7508"),E=n("733d"),T=n("371e"),x=n("72f0"),S=n.n(x),A=n("e380"),R=n.n(A),N=n("4b96"),C=n("b2f7"),P=n("a748"),I=n("9586"),D=n("1b92"),M=n("17f5"),L=n("d263"),B=n("ebb6"),U=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}var K=function(){function e(){V(this,e)}return G(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}var z=function(){function e(){X(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var fe=function(){function e(){le(this,e)}return pe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),e}var we,_e=function(){function e(){Oe(this,e)}return je(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Te=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(we||(we={}));var xe,Se,Ae=Object(j["hexlify"])(Object(j["padZeros"])([],65));(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(xe||(xe={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Se||(Se={}));var Re=n("bef3"),Ne=n("b047c"),Ce=n.n(Ne),Pe=n("ffa9");function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function Le(e){var t=qe();return function(){var n,r=We(e);if(t){var a=We(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Ue(e):t}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){var t="function"===typeof Map?new Map:void 0;return Fe=function(e){if(null===e||!He(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $e(e,arguments,We(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ve(n,e)},Fe(e)}function $e(e,t,n){return $e=qe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Ve(o,n.prototype),o},$e.apply(null,arguments)}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var Ge=function(e){Me(n,e);var t=Le(n);function n(){return De(this,n),t.apply(this,arguments)}return n}(Fe(Error));function Ke(e,t,n){if(!e)throw null===n||void 0===n||n("AssertionError",e,t),new Ge(null!==t&&void 0!==t?t:"AssertionError")}function Ze(e){Pe["ThrowReporter"].report(e)}function Xe(e,t){var n=e.decode(t);return Ze(n),n.right}function Ye(e){return null!=e}var Qe=new Re["a"]("BigNumber",j["BigNumber"].isBigNumber,(function(e,t){var n,r;if(j["BigNumber"].isBigNumber(e))return Re["r"](e);try{return Re["r"](Object(j["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Re["f"](e,t)}}),(function(e){return e.toString()})),ze=R()((function(e){return Re["e"](Re["q"],(function(t){return"string"===typeof t&&(e?Object(j["hexDataLength"])(t)===e:Object(j["isHexString"])(t))}),"HexString")})),Je=R()((function(e){var t=e?w["Zero"].sub(w["Two"].pow(8*e-1)):void 0,n=e?w["Two"].pow(8*e-1):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),et=R()((function(e){var t=e?w["Zero"]:void 0,n=e?w["Two"].pow(8*e):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),tt=ze(65),nt=ze(32),rt=ze(32),at=ze(32),ot=new Re["a"]("Address",(function(e){try{return ze(20).is(e)&&Object(j["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!ze(20).is(e))return Re["f"](e,t);var n;try{n=Object(j["getAddress"])(e)}catch(r){return Re["f"](e,t)}return n?Re["r"](n):Re["f"](e,t)}),Re["g"]),it=R()((function(e){return Re["s"]([Re["l"],e])}));function ct(e){return[Date.now(),e]}var st=R()((function(e){return Re["h"]([e,Re["n"](Re["t"]({signature:tt}))])})),ut=R()((function(e){return new Re["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Re["r"](t):Re["f"](t,n)}),Re["g"])})),lt=n("6f0b"),dt=n("9044"),pt=n("7738"),ft=n("d3fb"),bt=n("4b59"),yt=n("d792"),mt=n("4d8c"),ht=n.n(mt),vt=n("c707"),gt=n.n(vt);function Ot(e,t){return wt(e)||jt(e,t)||Tt(e,t)||kt()}function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wt(e){if(Array.isArray(e))return e}function _t(e){return St(e)||xt(e)||Tt(e)||Et()}function Et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(e,t){if(e){if("string"===typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}function xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function St(e){if(Array.isArray(e))return At(e)}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rt,Nt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Ct(e,t,n){return Object(dt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function Pt(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(_t(a),[o])}},o=D["a"],i=Object(M["a"])(-1);n&&(i=Object(I["a"])((function(){return r.blockNumber?Object(M["a"])(r.blockNumber):Ct(r,"block").pipe(Object(F["a"])(),Object(B["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(bt["a"])()),o=Object(pt["a"])(n,i).pipe(Object(F["a"])(),Object(yt["a"])((function(e){var n=Ot(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(ft["a"])(gt()(ht()(e),["blockNumber"]))})),Object(B["a"])(a),Object(U["a"])(Ye)));var c=i.pipe(Object(yt["a"])((function(){return Object(ft["a"])(t)})),Object($["a"])((function(e){return Ct(r,e)})),Object(B["a"])(a),Object(U["a"])(Ye));return Object(P["a"])(o,c)}function It(e){return Nt(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=lt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function Dt(e){var t=e.send;e.send=function(n,r){return Nt(this,void 0,void 0,f.a.mark((function a(){return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function Mt(e){return"unknown"!==e.name?e.name:e.chainId.toString()}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bt=Re["t"]({urls:Re["v"]([Re["q"],Re["c"](Re["q"])])}),Ut=Re["n"](Re["h"]([Re["t"]({matrixServerLookup:Re["q"],revealTimeout:Re["l"],settleTimeout:Re["l"],httpTimeout:Re["l"],discoveryRoom:Re["v"]([Re["q"],Re["k"]]),pfsRoom:Re["v"]([Re["q"],Re["k"]]),monitoringRoom:Re["v"]([Re["q"],Re["k"]]),pfs:Re["v"]([ot,Re["q"],Re["k"]]),pfsSafetyMargin:Re["l"],matrixExcessRooms:Re["l"],confirmationBlocks:Re["l"],monitoringReward:Re["v"]([Re["k"],et(32)]),logger:Re["i"]((Rt={},Lt(Rt,"",null),Lt(Rt,"trace",null),Lt(Rt,"debug",null),Lt(Rt,"info",null),Lt(Rt,"warn",null),Lt(Rt,"error",null),Rt)),caps:Re["n"](Re["p"](Re["q"],Re["b"])),fallbackIceServers:Re["c"](Bt)}),Re["m"]({matrixServer:Re["q"],subkey:Re["d"]})])),Ft=Re["n"](Re["m"](Object.assign(Object.assign({},Ut.type.types["0"].props),Ut.type.types["1"].props)));function $t(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(Mt(r),"_discovery"),pfsRoom:"raiden_".concat(Mt(r),"_path_finding"),monitoringRoom:"raiden_".concat(Mt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:null,logger:"info",caps:(n={},Lt(n,Se.NO_DELIVERY,!0),Lt(n,Se.NO_RECEIVE,!0),Lt(n,Se.NO_MEDIATE,!0),Lt(n,Se.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}]},t)}var qt,Ht=n("f49b"),Vt=n.n(Ht),Wt=n("3498"),Gt=n("6f95"),Kt=n("74c8"),Zt=n.n(Kt);function Xt(e){return Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t,n){return t&&Qt(e.prototype,t),n&&Qt(e,n),e}function Jt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}function en(e){var t=on();return function(){var n,r=un(e);if(t){var a=un(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tn(this,n)}}function tn(e,t){return!t||"object"!==Xt(t)&&"function"!==typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){var t="function"===typeof Map?new Map:void 0;return rn=function(e){if(null===e||!cn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return an(e,arguments,un(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),sn(n,e)},rn(e)}function an(e,t,n){return an=on()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&sn(o,n.prototype),o},an.apply(null,arguments)}function on(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function sn(e,t){return sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sn(e,t)}function un(e){return un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},un(e)}(function(e){e["PFS_EMPTY_URL"]="A registered Pathfinding Service returned an empty service URL.",e["PFS_INVALID_URL"]="A registered Pathfinding Service returned an invalid service URL.",e["PFS_INVALID_INFO"]="Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.",e["PFS_NO_ROUTES_FOUND"]="No valid routes found.",e["PFS_ERROR_RESPONSE"]="Pathfinding Service request returned an error",e["PFS_DISABLED"]="Pathfinding Service is disabled and no direct route is available.",e["PFS_UNKNOWN_TOKEN_NETWORK"]="No open channels on this token network.",e["PFS_TARGET_OFFLINE"]="The requested target is offline.",e["PFS_TARGET_NO_RECEIVE"]="The requested target doesn't receive transfers.",e["PFS_LAST_IOU_REQUEST_FAILED"]="The request for the last IOU has failed.",e["PFS_IOU_SIGNATURE_MISMATCH"]="The signature of the last IOU did not match.",e["PFS_NO_ROUTES_BETWEEN_NODES"]="No route between nodes found.",e["CNL_INVALID_STATE"]="Invalid channel state.",e["CNL_TOKEN_NOT_FOUND"]="Could not find token for token network.",e["CNL_NO_OPEN_CHANNEL_FOUND"]="No open channel has been found.",e["CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND"]="No open or closing channel has been found.",e["CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND"]="No settleable or settling channel has been found.",e["CNL_APPROVE_TRANSACTION_FAILED"]="Token approve transaction failed.",e["CNL_OPENCHANNEL_FAILED"]="Token networks openChannel transaction failed.",e["CNL_SETTOTALDEPOSIT_FAILED"]="Token networks setTotalDeposit transaction failed.",e["CNL_CLOSECHANNEL_FAILED"]="Token networks closeChannel transaction failed.",e["CNL_SETTLECHANNEL_FAILED"]="Token networks settleChannel transaction failed.",e["CNL_UPDATE_NONCLOSING_BP_FAILED"]="updateNonClosingBalanceProof transaction failed.",e["CNL_ONCHAIN_UNLOCK_FAILED"]="on-chain unlock transaction failed.",e["XFER_EXPIRED"]="Transfer expired.",e["XFER_CHANNEL_CLOSED_PREMATURELY"]="Channel was closed before secret got reveiled or transfer unlocked.",e["XFER_REFUNDED"]="Transfer has been refunded.",e["XFER_INVALID_SECRETREQUEST"]="Invalid SecretRequest received",e["XFER_ALREADY_COMPLETED"]="Not waiting for transfer, it's already completed.",e["XFER_REGISTERSECRET_TX_FAILED"]="SecretRegistry.registerSecret transaction failed",e["TRNS_NO_MATRIX_SERVERS"]="Could not contact any Matrix servers.",e["TRNS_NO_VALID_USER"]="Could not find a user with a valid signature.",e["TRNS_NO_SERVERNAME"]="Could not get server name from Matrix server.",e["TRNS_MESSAGE_SIGNATURE_MISMATCH"]="Unable to decode message due to signature mismatch.",e["RDN_GENERAL_ERROR"]="An unknown error occured.",e["RDN_MINT_FAILED"]="Failed to mint tokens.",e["RDN_APPROVE_TRANSACTION_FAILED"]="Approve transaction has failed.",e["RDN_DEPOSIT_TRANSACTION_FAILED"]="Deposit transaction has failed.",e["RDN_TRANSFER_ONCHAIN_BALANCE_FAILED"]="Failed to transfer on-chain balance.",e["RDN_TRANSFER_ONCHAIN_TOKENS_FAILED"]="Failed to transfer on-chain tokens.",e["RDN_UNRECOGNIZED_NETWORK"]="No deploy info provided nor recognized network.",e["RDN_SIGNER_NOT_CONNECTED"]="The signing account is not connected to the provider.",e["RDN_ACCOUNT_NOT_FOUND"]="Account not found in provider.",e["RDN_STRING_ACCOUNT_INVALID"]="String account must be either a 0x-encoded address or private key.",e["RDN_TRANSACTION_REORG"]="Transaction has been mined but got removed by a reorg.",e["RDN_STATE_MIGRATION"]="Could not replace stored state with older, provided state.",e["DTA_NEGATIVE_NUMBER"]="Encountered negative number while encoding to HEX string.",e["DTA_NUMBER_TOO_LARGE"]="Encountered a number that is too large to be encoded.",e["DTA_ARRAY_LENGTH_DIFFRENCE"]="Expected length of HEX string differs from integer array input.",e["DTA_UNENCODABLE_DATA"]="Passed data is not a HEX string nor integer array."})(qt||(qt={}));var ln=Re["p"](Re["q"],Re["v"]([Re["q"],Re["l"],Re["d"],Re["k"]])),dn=function(e){Jt(n,e);var t=en(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yt(this,n),r=t.call(this,null!==e&&void 0!==e?e:qt.RDN_GENERAL_ERROR),r.details=a,r.name="RaidenError",r._code=void 0,Object.setPrototypeOf(nn(r),n.prototype),r}return zt(n,[{key:"code",get:function(){var e,t=this;return void 0===this._code&&(this._code=null!==(e=Zt()(qt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"),this._code}}]),n}(rn(Error)),pn=Re["h"]([Re["t"]({name:Re["q"]}),Re["m"]({message:Re["q"],stack:Re["q"],details:ln})]),fn=new Re["a"]("Error",(function(e){return"object"===Xt(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Gt["pipe"])(pn.decode(e),Object(Wt["map"])((function(e){return"details"in e?Object.assign(new dn(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){return gn(e)||vn(e)||hn(e)||mn()}function mn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hn(e,t){if(e){if("string"===typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function vn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gn(e){if(Array.isArray(e))return On(e)}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function jn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function wn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Re["t"](Object.assign(Object.assign(Object.assign({type:Re["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Re["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r};return Object.assign((function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)}),{codec:c,type:r,is:s},void 0!==i?{error:i}:null)}function _n(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:fn,c=wn(t,a,e),s=wn(n,o,e),u=wn(r,i,e,!0);return{request:c,success:s,failure:u}}function En(e){var t=function(t){return Vt()(t.meta,e,(function(e,t){return Qe.is(e)&&Qe.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Tn(e,t){var n=function(n){return jn([e.success,e.failure],n)&&En(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function xn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Tn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kn(this,void 0,void 0,f.a.mark((function a(){return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?xn(e,t):Tn(e,t)),Object(B["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new dn(qt.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function An(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return Ke(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(yn(a.map((function(e){return bn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Rn,Nn=Re["q"],Cn=Re["t"]({amount:et(32),expiration:et(32),secrethash:nt},"Lock"),Pn=Re["t"]({chainId:et(32),tokenNetworkAddress:ot,channelId:et(32),nonce:et(8),transferredAmount:et(32),lockedAmount:et(32),locksroot:nt,additionalHash:nt}),In=Re["t"]({tokenNetwork:ot,partner:ot}),Dn=wn("newBlock",Re["t"]({blockNumber:Re["l"]})),Mn=wn("tokenMonitored",Re["h"]([Re["t"]({token:ot,tokenNetwork:ot}),Re["m"]({fromBlock:Re["l"]})])),Ln=_n(In,"channel/open/request","channel/open/success","channel/open/failed",Re["m"]({settleTimeout:Re["l"],subkey:Re["d"],deposit:et(32)}),Re["t"]({id:Re["l"],token:ot,settleTimeout:Re["l"],isFirstParticipant:Re["d"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Bn=wn("channel/monitor",Re["h"]([Re["t"]({id:Re["l"]}),Re["m"]({fromBlock:Re["l"]})]),In),Un=_n(In,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Re["h"]([Re["t"]({deposit:et(32)}),Re["m"]({subkey:Re["d"]})]),Re["t"]({id:Re["l"],participant:ot,totalDeposit:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Fn=wn("channel/withdraw/success",Re["t"]({id:Re["l"],participant:ot,totalWithdraw:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),In),$n=_n(In,"channel/close/request","channel/close/success","channel/close/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["t"]({id:Re["l"],participant:ot,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),qn=wn("channel/settleable",Re["t"]({settleableBlock:Re["l"]}),In),Hn=_n(In,"channel/settle/request","channel/settle/success","channel/settle/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["h"]([Re["t"]({id:Re["l"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),Re["m"]({locks:Re["o"](Cn)})])),Vn=Re["n"](Re["t"]({userId:Re["q"],accessToken:Re["q"],deviceId:Re["q"],displayName:Re["q"]})),Wn=Re["t"]({address:ot}),Gn=wn("matrixSetup",Re["t"]({server:Re["q"],setup:Vn})),Kn=_n(Wn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Re["h"]([Re["t"]({userId:Re["q"],available:Re["d"],ts:Re["l"]}),Re["m"]({caps:Re["p"](Re["q"],Re["b"])})])),Zn=wn("matrixRoom",Re["t"]({roomId:Re["q"]}),Wn),Xn=wn("matrixRoomLeave",Re["t"]({roomId:Re["q"]}),Wn),Yn=wn("rtcChannel",Re["v"]([Re["u"],ut(RTCDataChannel)]),Wn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Rn||(Rn={}));var Qn=Re["n"](Re["t"]({message_identifier:et(8)})),zn=Re["n"](Re["t"]({type:Re["j"](Rn.DELIVERED),delivered_message_identifier:et(8)})),Jn=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.PROCESSED)}),Qn])),er=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.SECRET_REQUEST),payment_identifier:et(8),secrethash:nt,amount:et(32),expiration:et(32)}),Qn])),tr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.SECRET_REVEAL),secret:rt}),Qn])),nr=Re["n"](Re["h"]([Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),transferred_amount:et(32),locked_amount:et(32),locksroot:nt}),Qn])),rr=Re["n"](Re["t"]({route:Re["o"](ot)})),ar=Re["n"](Re["t"]({routes:Re["o"](rr)})),or=Re["n"](Re["h"]([Re["t"]({payment_identifier:et(8),token:ot,recipient:ot,lock:Cn,target:ot,initiator:ot,metadata:ar}),nr])),ir=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.LOCKED_TRANSFER)}),or])),cr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.REFUND_TRANSFER)}),or])),sr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.UNLOCK),payment_identifier:et(8),secret:rt}),nr])),ur=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.LOCK_EXPIRED),recipient:ot,secrethash:nt}),nr])),lr=Re["n"](Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),participant:ot,total_withdraw:et(32),nonce:et(8),expiration:et(32)})),dr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_REQUEST)}),lr,Qn])),pr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_CONFIRMATION)}),lr,Qn])),fr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_EXPIRED)}),lr,Qn])),br=Re["n"](Re["t"]({type:Re["j"](Rn.PFS_CAPACITY_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,other_participant:ot,updating_nonce:et(8),other_nonce:et(8),updating_capacity:et(32),other_capacity:et(32),reveal_timeout:et(32)})),yr=Re["n"](Re["t"]({type:Re["j"](Rn.PFS_FEE_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,timestamp:Re["q"],fee_schedule:Re["t"]({cap_fees:Re["d"],imbalance_penalty:Re["v"]([Re["k"],Re["c"](Re["s"]([et(32),Je(32)]))]),proportional:Je(32),flat:Je(32)})})),mr=Re["n"](Re["t"]({type:Re["j"](Rn.MONITOR_REQUEST),balance_proof:Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),balance_hash:nt,additional_hash:nt,signature:tt}),monitoring_service_contract_address:ot,non_closing_participant:ot,non_closing_signature:tt,reward_amount:et(32)})),hr=Re["v"]([zn,Jn,er,tr,ir,cr,sr,ur,dr,pr,fr,br,yr,mr]),vr=_n(Re["t"]({address:ot,msgId:Re["q"]}),"message/send/request","message/send/success","message/send/failure",Re["t"]({message:Re["v"]([Re["q"],st(hr)])}),void 0),gr=wn("messageGlobalSend",Re["t"]({message:Re["v"]([Re["q"],st(hr)])}),Re["t"]({roomName:Re["q"]})),Or=wn("messageReceived",Re["h"]([Re["t"]({text:Re["q"],ts:Re["l"]}),Re["m"]({message:Re["v"]([hr,st(hr)]),userId:Re["q"],roomId:Re["q"]})]),Re["t"]({address:ot})),kr=Re["n"](Re["h"]([Re["t"]({result:Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),estimated_fee:Je(32)})))}),Re["m"]({feedback_token:Re["q"]})])),jr=Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),fee:Je(32)}))),wr=Re["n"](Re["t"]({address:ot,url:Re["q"],rtt:Re["l"],price:et(32),token:ot})),_r=Re["n"](Re["t"]({sender:ot,receiver:ot,amount:et(32),expiration_block:et(32),one_to_n_address:ot,chain_id:et(32)})),Er=Re["n"](Re["t"]({last_iou:st(_r)})),Tr=Re["t"]({secrethash:nt,direction:Re["i"]({sent:null,received:null})}),xr=_n(Tr,"transfer/request","transfer/success","transfer/failure",Re["h"]([Re["t"]({tokenNetwork:ot,target:ot,value:et(32),paths:jr,paymentId:et(8)}),Re["m"]({secret:rt,expiration:Re["l"],initiator:ot})]),Re["m"]({balanceProof:st(Pn)})),Sr=wn("transferSigned",Re["t"]({message:st(ir),fee:Je(32)}),Tr),Ar=wn("transferProcessed",Re["t"]({message:st(Jn)}),Tr),Rr=wn("transferSecret",Re["t"]({secret:rt}),Tr),Nr=_n(Tr,"transferSecret/register/request","transferSecret/register/success","transferSecret/register/failure",Re["h"]([Re["t"]({secret:rt}),Re["m"]({subkey:Re["d"]})]),Re["t"]({secret:rt,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Cr=wn("transferSecretRequest",Re["t"]({message:st(er)}),Tr),Pr=wn("transferSecretReveal",Re["t"]({message:st(tr)}),Tr),Ir=_n(Tr,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Re["t"]({message:st(sr)})),Dr=wn("transferUnlockProcessed",Re["t"]({message:st(Jn)}),Tr),Mr=_n(Tr,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Re["t"]({message:st(ur)})),Lr=wn("transferExpireProcessed",Re["t"]({message:st(Jn)}),Tr),Br=wn("transferRefunded",Re["t"]({message:st(cr)}),Tr),Ur=wn("transferClear",void 0,Tr),Fr=Re["t"]({tokenNetwork:ot,partner:ot,totalWithdraw:et(32),expiration:Re["l"]}),$r=_n(Fr,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Re["t"]({message:st(dr)}),Re["t"]({message:st(pr)})),qr=Re["t"]({tokenNetwork:ot,target:ot,value:et(32)}),Hr=Re["t"]({tokenNetwork:ot,serviceAddress:ot}),Vr=_n(qr,"path/find/request","path/find/success","path/find/failure",Re["m"]({paths:jr,pfs:Re["v"]([wr,Re["k"]])}),Re["t"]({paths:jr})),Wr=wn("pfsListUpdated",Re["t"]({pfsList:Re["o"](ot)})),Gr=wn("iouPersist",Re["t"]({iou:st(_r)}),Hr),Kr=wn("iouClear",void 0,Hr),Zr=wn("udcDeposited",et(32)),Xr=wn("raidenShutdown",Re["t"]({reason:Re["v"]([Re["j"](xe.STOP),Re["j"](xe.ACCOUNT_CHANGED),Re["j"](xe.NETWORK_CHANGED),fn])})),Yr=wn("raidenConfigUpdate",Ft),Qr=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:Xr,raidenConfigUpdate:Yr},r),a),o),i),c),zr=[Qr.raidenShutdown,Qr.newBlock,Qr.matrixPresence.success,Qr.tokenMonitored],Jr=[Ln.success,Un.success,Fn,$n.success,Hn.success,Nr.success],ea=Re["v"]([Ln.success.codec,Un.success.codec,Fn.codec,$n.success.codec,Hn.success.codec,Nr.success.codec]);function ta(e){return Object.assign(Object.assign({},e),{version:0})}function na(e,t){return ca(e)||ia(e,t)||aa(e,t)||ra()}function ra(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function aa(e,t){if(e){if("string"===typeof e)return oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oa(e,t):void 0}}function oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ia(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ca(e){if(Array.isArray(e))return e}function sa(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=na(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function ua(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e,t){return ma(e)||ya(e,t)||fa(e,t)||pa()}function pa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fa(e,t){if(e){if("string"===typeof e)return ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ba(e,t):void 0}}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ya(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ma(e){if(Array.isArray(e))return e}var ha={chainId:w["Zero"],tokenNetworkAddress:w["AddressZero"],channelId:w["Zero"],nonce:w["Zero"],transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"],additionalHash:w["HashZero"],signature:Ae};function va(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=da(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:ha,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:w["Zero"]})}}function ga(e){for(var t,n={},r=function(){for(var t=da(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=da(s[c],2),l=u[0],d=u[1];va(d,{own:e.address,partner:l});var p=Zt()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:p,tokenNetwork:r}),Object.assign(n,la({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}var Oa=[ta,sa,ua,ga],ka=Oa.length-1;function ja(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ka,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Oa[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var wa=n("948b"),_a=n("ad02");function Ea(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ta(e,t){var n;if("boolean"===typeof e?e=e?w["One"]:w["Zero"]:"number"===typeof e&&(e=Object(j["bigNumberify"])(e)),"string"!==typeof e||Object(wa["isHexString"])(e)||(e=Object(j["toUtf8Bytes"])(e)),Object(wa["isArrayish"])(e)&&(e=Object(wa["hexlify"])(e)),Qe.is(e)){if(e.lt(0))throw new dn(qt.DTA_NEGATIVE_NUMBER);if(e.gte(w["Two"].pow(8*t)))throw new dn(qt.DTA_NUMBER_TOO_LARGE);n=Object(wa["hexZeroPad"])(Object(wa["hexlify"])(e),t)}else{if("string"!==typeof e)throw new dn(qt.DTA_UNENCODABLE_DATA);if(Object(wa["hexDataLength"])(e)!==t)throw new dn(qt.DTA_ARRAY_LENGTH_DIFFRENCE);n=e}return n}var xa,Sa=function(e){return null!=e&&e["isLosslessNumber"]};function Aa(e){return _a["parse"](e,(function(e,t){if(Ea(e),Sa(t))try{return t.valueOf()}catch(n){return Object(j["bigNumberify"])(t.toString())}return t}))}function Ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Ea(e),j["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return _a["stringify"](e,t,n)}(function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})(xa||(xa={}));var Na,Ca=Re["n"](Re["t"]({address:ot,deposit:et(32),withdraw:et(32),locks:Re["o"](Cn),balanceProof:st(Pn)})),Pa=Re["h"]([Re["n"](Re["t"]({id:Re["l"],token:ot,tokenNetwork:ot,settleTimeout:Re["l"],isFirstParticipant:Re["d"],openBlock:Re["l"],own:Ca,partner:Ca})),Re["v"]([Re["n"](Re["t"]({state:Re["v"]([Re["j"](xa.open),Re["j"](xa.closing)])})),Re["h"]([Re["n"](Re["t"]({closeBlock:Re["l"],closeParticipant:ot})),Re["v"]([Re["n"](Re["t"]({state:Re["v"]([Re["j"](xa.closed),Re["j"](xa.settleable),Re["j"](xa.settling)])})),Re["n"](Re["t"]({state:Re["j"](xa.settled),settleBlock:Re["l"]}))])])])]);(function(e){e["SENT"]="sent",e["RECEIVED"]="received"})(Na||(Na={}));var Ia,Da=Re["n"](Re["h"]([Re["t"]({transfer:it(st(ir)),fee:Je(32),partner:ot}),Re["m"]({secret:it(Re["t"]({value:rt,registerBlock:Re["l"]})),transferProcessed:it(st(Jn)),refund:it(st(cr)),channelClosed:it(nt),secretRequest:it(st(er)),secretReveal:it(st(tr)),unlock:it(st(sr)),lockExpired:it(st(ur)),unlockProcessed:it(st(Jn)),lockExpiredProcessed:it(st(Jn))})])),Ma=Re["n"](Re["p"](Re["q"],Da));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Ia||(Ia={}));var La=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ba=Re["n"](Re["t"]({address:ot,version:Re["j"](ka),chainId:Re["l"],registry:ot,blockNumber:Re["l"],config:Ft,channels:Re["n"](Re["p"](Nn,Pa)),oldChannels:Re["n"](Re["p"](Re["q"],Pa)),tokens:Re["n"](Re["p"](Re["q"],ot)),transport:Re["n"](Re["m"]({server:Re["q"],setup:Vn,rooms:Re["n"](Re["p"](Re["q"],Re["c"](Re["q"])))})),sent:Ma,received:Ma,iou:Re["n"](Re["p"](Re["q"],Re["p"](Re["q"],st(_r)))),pendingTxs:Re["o"](ea)}));function Ua(e){return Ra(Ba.encode(e),void 0,2)}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=Aa(e));var r=ja(e,ka,{log:n});try{return Xe(Ba,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r),a}}function $a(e){var t,n=e.network,r=e.address,a=e.contractsInfo,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:r,version:ka,chainId:n.chainId,registry:a.TokenNetworkRegistry.address,blockNumber:a.TokenNetworkRegistry.block_number,config:null!==(t=o.config)&&void 0!==t?t:{},channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[]}}var qa=$a({network:Object(j["getNetwork"])("unspecified"),address:w["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:w["AddressZero"],block_number:0},ServiceRegistry:{address:w["AddressZero"],block_number:0},UserDeposit:{address:w["AddressZero"],block_number:0},SecretRegistry:{address:w["AddressZero"],block_number:0},MonitoringService:{address:w["AddressZero"],block_number:0}}}),Ha=function(e){return e&&"function"===typeof e.getItem},Va=function(e,t,n,r,a){return La(void 0,void 0,void 0,f.a.mark((function o(){var i,c,s,u,l,d,p,b,m,h,v;return f.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Ha(r)?(u=r,l=void 0):Ha(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=Fa(l,{log:i})),!u){o.next=23;break}return p="raiden_".concat(Mt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(p);case 8:if(b=o.sent,!b){o.next=20;break}if(m=Fa(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new dn(qt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Ce()((function(e){u.setItem(p,Ua(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=$a({network:e,address:n,contractsInfo:t})),v=$t({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},Wa=n("9bf7"),Ga=n.n(Wa);function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Za(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),Ka({},o,s)))}}return r}}var Xa=n("c4cc");function Ya(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Qa(e){var t=w["Zero"];if(e.state!==xa.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=e.own.deposit.sub(n).sub(i).add(s),d=e.partner.deposit.sub(r).sub(c).add(u);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:l,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:d}}function za(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Xa["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(n){return Object(ft["a"])(n.wait()).pipe(Object(B["a"])((function(a){if(!a.status)throw new dn(t,{transactionHash:n.hash});return r.debug("".concat(e,' tx "').concat(n.hash,'" successfuly mined!')),n.hash})))})))}}function Ja(e){return Ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ja(e)}function eo(e){return ao(e)||ro(e)||no(e)||to()}function to(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function no(e,t){if(e){if("string"===typeof e)return oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(e,t):void 0}}function ro(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ao(e){if(Array.isArray(e))return oo(e)}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var so=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},uo=An(qa.blockNumber).handle(Dn,(function(e,t){co(e);var n=t.payload;return n.blockNumber})),lo=An(qa.tokens).handle(Mn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return Object.assign(Object.assign({},e),io({},r,a))})),po=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(jn(Jr,t)){if(void 0===t.payload.confirmed)return[].concat(eo(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},fo={address:w["AddressZero"],deposit:w["Zero"],withdraw:w["Zero"],locks:[],balanceProof:{chainId:w["Zero"],tokenNetworkAddress:w["AddressZero"],channelId:w["Zero"],nonce:w["Zero"],transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"],additionalHash:w["HashZero"],signature:Ae}};function bo(e,t){var n,r,a=Ya(t.meta);if((null!==(r=null===(n=e.channels[a])||void 0===n?void 0:n.openBlock)&&void 0!==r?r:0)>=t.payload.txBlock||!t.payload.confirmed)return e;var o={state:xa.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},fo),{address:e.address}),partner:Object.assign(Object.assign({},fo),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),io({},a,o))})}function yo(e,t){if(!t.payload.confirmed)return e;var n=Ya(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==xa.open||r.id!==t.payload.id)return e;var a=Fn.is(t)?"withdraw":"deposit",o=Fn.is(t)?t.payload.totalWithdraw:t.payload.totalDeposit,i=t.payload.participant===t.meta.partner,c=i?"partner":"own";return r=Object.assign(Object.assign({},r),io({},c,Object.assign(Object.assign({},r[c]),io({},a,o)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),io({},n,r))})}function mo(e,t){var n=Ya(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===xa.open)r=Object.assign(Object.assign({},r),{state:xa.closing});else{if(!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:xa.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),io({},n,r))})}function ho(e,t){var n=Ya(t.meta),r=e.channels[n];if(!r)return e;if($n.request.is(t)&&r.state===xa.open)r=Object.assign(Object.assign({},r),{state:xa.closing});else if(Hn.request.is(t)&&r.state===xa.settleable)r=Object.assign(Object.assign({},r),{state:xa.settling});else{if(!qn.is(t)||r.state!==xa.closed)return e;r=Object.assign(Object.assign({},r),{state:xa.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),io({},n,r))})}function vo(e,t){var n=Ya(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==xa.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),io({},n,Object.assign(Object.assign({},r),{state:xa.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],so(a,["symbol"===Ja(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),io({},"".concat(r.id,"#").concat(n),Object.assign(Object.assign({},r),{state:xa.settled,settleBlock:t.payload.txBlock})))})}return e}var go=An(qa).handle(Ln.success,bo).handle([Un.success,Fn],yo).handle([$n.request,qn,Hn.request],ho).handle($n.success,mo).handle(Hn.success,vo),Oo=Za({blockNumber:uo,tokens:lo,pendingTxs:po},qa),ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;return[Oo,go].reduce((function(e,n){return n(e,t)}),e)},jo=ko;function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _o(e){return So(e)||xo(e)||To(e)||Eo()}function Eo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function To(e,t){if(e){if("string"===typeof e)return Ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ao(e,t):void 0}}function xo(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function So(e){if(Array.isArray(e))return Ao(e)}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ro,No=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Co=An(qa.transport).handle(Gn,(function(e,t){e.rooms;var n=No(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(Zn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),wo({},t.meta.address,[t.payload.roomId].concat(_o((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Xn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),wo({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Po=Za({transport:Co},qa),Io=Po,Do=n("3b2b");function Mo(e){return Mo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bo,Uo,Fo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},$o=(Ro={},Lo(Ro,Rn.DELIVERED,12),Lo(Ro,Rn.PROCESSED,0),Lo(Ro,Rn.SECRET_REQUEST,3),Lo(Ro,Rn.SECRET_REVEAL,11),Lo(Ro,Rn.LOCKED_TRANSFER,7),Lo(Ro,Rn.REFUND_TRANSFER,8),Lo(Ro,Rn.UNLOCK,4),Lo(Ro,Rn.LOCK_EXPIRED,13),Lo(Ro,Rn.WITHDRAW_REQUEST,15),Lo(Ro,Rn.WITHDRAW_CONFIRMATION,16),Lo(Ro,Rn.WITHDRAW_EXPIRED,17),Lo(Ro,Rn.PFS_CAPACITY_UPDATE,-1),Lo(Ro,Rn.PFS_FEE_UPDATE,-1),Lo(Ro,Rn.MONITOR_REQUEST,-1),Ro);function qo(e){var t=e.routes.map((function(e){return Object(j["keccak256"])(j["RLP"].encode(e.route))}));return Object(j["keccak256"])(j["RLP"].encode(t))}function Ho(e,t,n){return e.isZero()&&t.isZero()&&n===w["HashZero"]?w["HashZero"]:Object(j["keccak256"])(Object(wa["concat"])([Ta(e,32),Ta(t,32),Ta(n,32)]))}function Vo(e){switch(e.type){case Rn.LOCKED_TRANSFER:case Rn.REFUND_TRANSFER:var t=Object(wa["concat"])([Ta($o[e.type],1),Ta(e.message_identifier,8),Ta(e.payment_identifier,8),Ta(e.lock.expiration,32),Ta(e.token,20),Ta(e.recipient,20),Ta(e.target,20),Ta(e.initiator,20),Ta(e.lock.secrethash,32),Ta(e.lock.amount,32)]);return e.type===Rn.LOCKED_TRANSFER&&(t=Object(wa["concat"])([t,qo(e.metadata)])),Object(j["keccak256"])(t);case Rn.UNLOCK:return Object(j["keccak256"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(e.message_identifier,8),Ta(e.payment_identifier,8),Ta(e.secret,32)]));case Rn.LOCK_EXPIRED:return Object(j["keccak256"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(e.message_identifier,8),Ta(e.recipient,20),Ta(e.secrethash,32)]))}}function Wo(e){var t;switch(e.type){case Rn.DELIVERED:return Object(wa["hexlify"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(0,3),Ta(e.delivered_message_identifier,8)]));case Rn.PROCESSED:return Object(wa["hexlify"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(0,3),Ta(e.message_identifier,8)]));case Rn.LOCKED_TRANSFER:case Rn.REFUND_TRANSFER:case Rn.UNLOCK:case Rn.LOCK_EXPIRED:var n=Vo(e),r=Ho(e.transferred_amount,e.locked_amount,e.locksroot);return Object(wa["hexlify"])(Object(wa["concat"])([Ta(e.token_network_address,20),Ta(e.chain_id,32),Ta(Bo.BALANCE_PROOF,32),Ta(e.channel_identifier,32),Ta(r,32),Ta(e.nonce,32),Ta(n,32)]));case Rn.SECRET_REQUEST:return Object(wa["hexlify"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(0,3),Ta(e.message_identifier,8),Ta(e.payment_identifier,8),Ta(e.secrethash,32),Ta(e.amount,32),Ta(e.expiration,32)]));case Rn.SECRET_REVEAL:return Object(wa["hexlify"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(0,3),Ta(e.message_identifier,8),Ta(e.secret,32)]));case Rn.WITHDRAW_REQUEST:case Rn.WITHDRAW_CONFIRMATION:return Object(wa["hexlify"])(Object(wa["concat"])([Ta(e.token_network_address,20),Ta(e.chain_id,32),Ta(Bo.WITHDRAW,32),Ta(e.channel_identifier,32),Ta(e.participant,20),Ta(e.total_withdraw,32),Ta(e.expiration,32)]));case Rn.WITHDRAW_EXPIRED:return Object(wa["hexlify"])(Object(wa["concat"])([Ta($o[e.type],1),Ta(0,3),Ta(e.nonce,32),Ta(e.message_identifier,8),Ta(e.token_network_address,20),Ta(e.chain_id,32),Ta(Bo.WITHDRAW,32),Ta(e.channel_identifier,32),Ta(e.participant,20),Ta(e.total_withdraw,32),Ta(e.expiration,32)]));case Rn.PFS_CAPACITY_UPDATE:return Object(wa["hexlify"])(Object(wa["concat"])([Ta(e.canonical_identifier.chain_identifier,32),Ta(e.canonical_identifier.token_network_address,20),Ta(e.canonical_identifier.channel_identifier,32),Ta(e.updating_participant,20),Ta(e.other_participant,20),Ta(e.updating_nonce,8),Ta(e.other_nonce,8),Ta(e.updating_capacity,32),Ta(e.other_capacity,32),Ta(e.reveal_timeout,32)]));case Rn.PFS_FEE_UPDATE:return Object(wa["hexlify"])(Object(wa["concat"])([Ta(e.canonical_identifier.chain_identifier,32),Ta(e.canonical_identifier.token_network_address,20),Ta(e.canonical_identifier.channel_identifier,32),Ta(e.updating_participant,20),Ta(e.fee_schedule.cap_fees,1),Ta(e.fee_schedule.flat,32),Ta(e.fee_schedule.proportional,32),Object(Do["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Ta(e.timestamp,19)]));case Rn.MONITOR_REQUEST:return Object(wa["hexlify"])(Object(wa["concat"])([Ta(e.monitoring_service_contract_address,20),Ta(e.balance_proof.chain_id,32),Ta(Bo.MS_REWARD,32),Ta(e.balance_proof.token_network_address,20),Ta(e.non_closing_participant,20),Ta(e.non_closing_signature,65),Ta(e.reward_amount,32)]))}}function Go(e){return tt.is(e.signature)}function Ko(e){return Object(j["verifyMessage"])(Object(wa["arrayify"])(Wo(e)),e.signature)}function Zo(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:Vo(e),signature:e.signature}}function Xo(e){return Ra("signature"in e?st(hr).encode(e):hr.encode(e))}function Yo(e){var t=Aa(e);return Ke(t&&"object"===Mo(t)&&"type"in t&&Object.values(Rn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Xe("signature"in t?st(hr):hr,t)}function Qo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return Fo(this,void 0,void 0,f.a.mark((function n(){var a;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Go(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(wa["arrayify"])(Wo(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function zo(e){return function(t){return Or.is(t)&&(Array.isArray(e)?Re["v"](e).is(t.payload.message):e.is(t.payload.message))}}function Jo(e,t){return ni(e)||ti(e,t)||oi(e,t)||ei()}function ei(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ti(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ni(e){if(Array.isArray(e))return e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=oi(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function oi(e,t){if(e){if("string"===typeof e)return ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(e,t):void 0}}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ci(e){var t,n=[],r=ai(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Ta(a.expiration,32),Ta(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(j["keccak256"])(Object(wa["concat"])(n))}function si(e){return Object(j["sha256"])(e)}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(wa["hexlify"])(Object(j["randomBytes"])(e))}function li(){return Object(j["bigNumberify"])(Date.now())}function di(){return Object(j["bigNumberify"])(Date.now())}function pi(e){return function(t){return t[e]?t[e][0]:void 0}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(Bo||(Bo={}));var fi,bi=(Uo={},ri(Uo,Ia.expired,pi("lockExpiredProcessed")),ri(Uo,Ia.unlocked,pi("unlockProcessed")),ri(Uo,Ia.expiring,pi("lockExpired")),ri(Uo,Ia.unlocking,pi("unlock")),ri(Uo,Ia.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),ri(Uo,Ia.revealed,pi("secretReveal")),ri(Uo,Ia.requested,pi("secretRequest")),ri(Uo,Ia.closed,pi("channelClosed")),ri(Uo,Ia.refunded,pi("refund")),ri(Uo,Ia.received,pi("transferProcessed")),ri(Uo,Ia.pending,pi("transfer")),Uo);function yi(e){for(var t,n,r,a,o=new Date(e.transfer[0]),i=o,c=Ia.pending,s=0,u=Object.entries(bi);s<u.length;s++){var l=Jo(u[s],2),d=l[0],p=l[1],f=p(e);if(void 0!==f){c=d,i=new Date(f);break}}var b=e.transfer[1],y=b.lock.amount.sub(e.fee),m=e.secretRequest&&e.secretRequest[1].amount.lt(y),h=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(m||e.refund||e.lockExpired||e.channelClosed)&&void 0,v=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{secrethash:b.lock.secrethash,direction:"sent",status:c,initiator:b.initiator,partner:b.recipient,target:b.target,metadata:b.metadata,paymentId:b.payment_identifier,chainId:b.chain_id.toNumber(),token:b.token,tokenNetwork:b.token_network_address,channelId:b.channel_identifier,value:y,fee:e.fee,amount:b.lock.amount,expirationBlock:b.lock.expiration.toNumber(),startedAt:o,changedAt:i,success:h,completed:v}}function mi(e,t){return gi(e)||vi(e,t)||ji(e,t)||hi()}function hi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gi(e){if(Array.isArray(e))return e}function Oi(e){return _i(e)||wi(e)||ji(e)||ki()}function ki(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ji(e,t){if(e){if("string"===typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ei(e,t):void 0}}function wi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _i(e){if(Array.isArray(e))return Ei(e)}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi=(fi={},Ti(fi,Na.SENT,"own"),Ti(fi,Na.RECEIVED,"partner"),fi);function Si(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Nr.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),Ti({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:ct({value:t.payload.secret,registerBlock:u})})))))),e}function Ai(e,t){var n=t.payload.message,r=n.lock,a=r.secrethash,o=t.meta.direction===Na.SENT?n.recipient:Ko(n),i=xi[t.meta.direction];if(a in e[t.meta.direction])return e;var c=Ya({tokenNetwork:n.token_network_address,partner:o}),s=e.channels[c];if(!s)return e;var u=s[i].balanceProof,l=[].concat(Oi(s[i].locks),[r]),d=ci(l);if(n.locksroot!==d||!n.nonce.eq(u.nonce.add(1))||!n.transferred_amount.eq(u.transferredAmount)||!n.locked_amount.eq(u.lockedAmount.add(r.amount)))return e;s=Object.assign(Object.assign({},s),Ti({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:Zo(n)})));var p={transfer:ct(n),fee:t.payload.fee,partner:o};return Object.assign(Object.assign({},e),Ti({channels:Object.assign(Object.assign({},e.channels),Ti({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},a,p))))}function Ri(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),Ti({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:ct(t.payload.message)}))))):e}function Ni(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),Ti({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:ct(t.payload.message)})))))}function Ci(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=xi[t.meta.direction],c=Ya({tokenNetwork:a.token_network_address,partner:o}),s=e.channels[c],u=a.lock;if(!s||!s[i].locks.length)return e;var l=s[i].locks.filter((function(e){return e.secrethash!==r})),d=ci(l);if(n.locksroot!==d||!s[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(s[i].balanceProof.transferredAmount.add(u.amount))||!n.locked_amount.eq(s[i].balanceProof.lockedAmount.sub(u.amount)))return e;s=Object.assign(Object.assign({},s),Ti({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:Zo(n)})));var p=Object.assign(Object.assign({},e[t.meta.direction][r]),{unlock:ct(n)});return Object.assign(Object.assign({},e),Ti({channels:Object.assign(Object.assign({},e.channels),Ti({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},r,p))))}function Pi(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock||e[t.meta.direction][r].lockExpired)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=xi[t.meta.direction],c=Ya({tokenNetwork:a.token_network_address,partner:o}),s=e.channels[c],u=a.lock;if(!s||!s[i].locks.length)return e;var l=s[i].locks.filter((function(e){return e.secrethash!==r})),d=ci(l);if(n.locksroot!==d||!s[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(s[i].balanceProof.transferredAmount)||!n.locked_amount.eq(s[i].balanceProof.lockedAmount.sub(u.amount)))return e;s=Object.assign(Object.assign({},s),Ti({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:Zo(n)})));var p=Object.assign(Object.assign({},e[t.meta.direction][r]),{lockExpired:ct(n)});return Object.assign(Object.assign({},e),Ti({channels:Object.assign(Object.assign({},e.channels),Ti({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},r,p))))}function Ii(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Ar.is(t))n="transferProcessed";else if(Dr.is(t))n="unlockProcessed";else if(Lr.is(t))n="lockExpiredProcessed";else{if(!Br.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),Ti({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ti({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),Ti({},n,ct(t.payload.message)))))))}function Di(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=mi(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),Ti({},i,Object.assign(Object.assign({},c),{channelClosed:ct(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var p=mi(d[l],2),f=p[0],b=p[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),Ti({},f,Object.assign(Object.assign({},b),{channelClosed:ct(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Mi(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?(e=Ga()([t.meta.direction,n],e),e):e}function Li(e,t){var n=t.payload.message,r=Ya(t.meta),a=e.channels[r];if(!a||a.state!==xa.open)return e;var o=a.own.balanceProof;return n.nonce.eq(o.nonce.add(1))&&n.expiration.gt(e.blockNumber)&&(a=Object.assign(Object.assign({},a),{own:Object.assign(Object.assign({},a.own),{balanceProof:Object.assign(Object.assign({},o),{nonce:n.nonce})})}),e=Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ti({},r,a))})),e}var Bi=An(qa).handle([Rr,Nr.success],Si).handle(Sr,Ai).handle([Ar,Dr,Lr,Br],Ii).handle(Cr,Ri).handle(Pr,Ni).handle(Ir.success,Ci).handle(Mr.success,Pi).handle($n.success,Di).handle(Ur,Mi).handle($r.success,Li),Ui=Bi;function Fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $i=An(qa.iou).handle(Gr,(function(e,t){return Object.assign(Object.assign({},e),Fi({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),Fi({},t.meta.serviceAddress,t.payload.iou))))})).handle(Kr,(function(e,t){return Ga()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),qi=Za({iou:$i},qa),Hi=qi;function Vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wi(e,t){return Yi(e)||Xi(e,t)||Ki(e,t)||Gi()}function Gi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ki(e,t){if(e){if("string"===typeof e)return Zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zi(e,t):void 0}}function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yi(e){if(Array.isArray(e))return e}var Qi=An(qa).handle(Yr,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=Wi(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),Vi({},c,s)):c in r&&(r=Ga()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),zi={configReducer:Qi,channelsReducer:jo,transportReducer:Io,transfersReducer:Ui,servicesReducer:Hi},Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;return Object.values(zi).reduce((function(e,n){return n(e,t)}),e)},ec=n("a744"),tc=n("742d"),nc=n("8ef6"),rc=n("9f2d"),ac=n("f59d"),oc=n("a0ac"),ic=n.n(oc),cc=n("69dd");function sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(cc["a"])())}}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lc=R()((function(e){return e.pipe(Object(U["a"])(Kn.success.is),Object(tc["a"])((function(e,t){return Object.assign(Object.assign({},e),uc({},t.meta.address,t))}),{}),Object(bt["a"])(),Object(ec["a"])({}))})),dc=n("808d"),pc=n("5e53"),fc=n("744c"),bc=n("c575"),yc=n("66aa"),mc=n("b7d7"),hc=n("6863"),vc=n("e95d"),gc=n("2313"),Oc=n("fcf1"),kc=n("b389"),jc=n("0ca2"),wc=n("13ea"),_c=n.n(wc),Ec=n("8358"),Tc=n("ddfd"),xc=n("3e18"),Sc=n("a0df"),Ac=n("31a7"),Rc=n("c998"),Nc=n("b4cc"),Cc=n("0ff6"),Pc=n("4e0b2");function Ic(e){return Lc(e)||Mc(e)||$c(e)||Dc()}function Dc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Lc(e){if(Array.isArray(e))return qc(e)}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uc(e,t){return Vc(e)||Hc(e,t)||$c(e,t)||Fc()}function Fc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $c(e,t){if(e){if("string"===typeof e)return qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qc(e,t):void 0}}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vc(e){if(Array.isArray(e))return e}var Wc=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Gc=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},Ac.contracts),Cc.contracts);case"ropsten":return Object.assign(Object.assign({},Sc.contracts),Nc.contracts);case"goerli":return Object.assign(Object.assign({},Rc.contracts),Pc.contracts);default:throw new dn(qt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Kc(e,t){var n,r;return Wc(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(Mt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(j["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(j["sha256"])(c),u=new Tc["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Zc=function(e,t,n){return Wc(void 0,void 0,void 0,f.a.mark((function r(){var a,o,i,c,s;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!Ec["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof Tc["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new dn(qt.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!ot.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new dn(qt.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!at.is(e)){r.next=37;break}a=new Tc["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new dn(qt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Kc,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Xc=function(e){return e.pipe(sc("sent"),Object(xc["a"])((function(e){return Object(ft["a"])(Object.entries(e))})),Object(tc["a"])((function(e,t){var n=e.acc,r=Uc(t,2),a=r[0],o=r[1];return n[a]===o?{acc:n}:{acc:Object.assign(Object.assign({},n),Bc({},a,o)),changed:o}}),{acc:{}}),Object(q["a"])("changed"),Object(U["a"])(Ye),Object(B["a"])(yi))},Yc=function(e){return Object.values(e).reduce((function(e,t){var n=Qa(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),Bc({},t.token,Object.assign(Object.assign({},e[t.token]),Bc({},t.partner.address,c))))}),{})};function Qc(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function zc(e,t){return e.signer===t?e:e.connect(t)}function Jc(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Wc(this,void 0,void 0,f.a.mark((function a(){var i,c,s;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Ic(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new dn(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,Ke(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new dn(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function es(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Wc(this,void 0,void 0,f.a.mark((function t(){var i,c;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(sc("state","blockNumber"),Object(Oc["a"])(a),Object(U["a"])((function(e){var t=Uc(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(vc["a"])((function(e){var t=Uc(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(I["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new dn(qt.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(Ye)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var ts=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function ns(e){return os(e)||as(e)||ss(e)||rs()}function rs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function as(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function os(e){if(Array.isArray(e))return us(e)}function is(e,t){return ds(e)||ls(e,t)||ss(e,t)||cs()}function cs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ss(e,t){if(e){if("string"===typeof e)return us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?us(e,t):void 0}}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ls(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ds(e){if(Array.isArray(e))return e}function ps(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function fs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(I["a"])(e).pipe(Object(yc["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(dc["a"])(t):Object(pc["a"])(e)})))})))}var bs=function(e,t,n){ps(e),ps(t);var r=n.provider;return fs((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(P["a"])(Object(M["a"])(e),Ct(r,"block"))})),Object(B["a"])((function(e){return Dn({blockNumber:e})})))},ys=function(e,t,n){ps(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(mc["a"])(1),Object($["a"])((function(e){var t=j["defaultAbiCoder"].encode(["address"],[r]);return _c()(e.tokens)?fs((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(ft["a"])(e)})),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(U["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(fc["a"])(fs((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(ft["a"])),fs((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(ft["a"]))).pipe(Object(mc["a"])(1),Object(hc["a"])(Mn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(ft["a"])(Object.entries(e.tokens).map((function(e){var t=is(e,2),n=t[0],r=t[1];return Mn({token:n,tokenNetwork:r})})))})))},ms=function(e,t){return ps(e),t.pipe(Object(F["a"])(),Object($["a"])(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,Bn({id:a.id},{tokenNetwork:a.tokenNetwork,partner:a.partner.address});case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)}))))},hs=function(e,t,n){ps(e),ps(t);var r=n.address,a=n.network,o=n.provider;return fs((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(bc["a"])(o.pollingInterval).pipe(Object(vc["a"])((function(){return Object(P["a"])(e?fs((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?D["a"]:Object(M["a"])(Xr({reason:xe.ACCOUNT_CHANGED}))}))):D["a"],fs((function(){return It(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(M["a"])(Xr({reason:xe.NETWORK_CHANGED})):D["a"]}))))})))})))},vs=function(e,t,n){ps(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(U["a"])(jn(Mn)),Object(gc["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(vc["a"])((function(e){var t=a(e.payload.tokenNetwork);return Pt(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(M["a"])(e.payload.fromBlock):void 0).pipe(Object(U["a"])((function(e){var t=is(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(B["a"])((function(n){var a=is(n,5),o=a[0],i=a[1],c=a[2],s=a[3],u=a[4];return Ln.success({id:o.toNumber(),token:e.payload.token,settleTimeout:s.toNumber(),isFirstParticipant:r===i,txHash:u.transactionHash,txBlock:u.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===i?c:i})})))})))})))},gs=function(e){return e.pipe(Object(U["a"])(jn(Ln.success)),Object(U["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return Bn({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))},Os=function(e,t,n){ps(t);var r=n.getTokenNetworkContract,a=n.latest$;return e.pipe(Object(U["a"])(jn(Bn)),Object(gc["a"])((function(e){return"".concat(e.payload.id,"#").concat(Ya(e.meta))})),Object($["a"])((function(e){return e.pipe(Object(vc["a"])((function(e){var t=e.meta.tokenNetwork,n=r(t),o=n.filters.ChannelNewDeposit(e.payload.id,null,null),i=n.filters.ChannelWithdraw(e.payload.id,null,null),c=n.filters.ChannelClosed(e.payload.id,null,null,null),s=n.filters.ChannelSettled(e.payload.id,null,null,null,null),u={address:n.address,topics:[[o.topics[0],i.topics[0],c.topics[0],s.topics[0]],[s.topics[1]]]};function l(e,t){var n=t[t.length-1];if(!n||!n.topics||!e.topics)return!1;var r=e.topics[0];return Array.isArray(r)?r.includes(n.topics[0]):r===n.topics[0]}return Pt(n,[u],e.payload.fromBlock?Object(M["a"])(e.payload.fromBlock):void 0).pipe(Object(Oc["a"])(a.pipe(Object(q["a"])("state","channels"))),Object(B["a"])((function(t){var n,r,a=is(t,2),u=a[0],d=a[1];if(l(o,u)){var p=is(u,4),f=p[0],b=p[1],y=p[2],m=p[3];return Un.success({id:f.toNumber(),participant:b,totalDeposit:y,txHash:m.transactionHash,txBlock:m.blockNumber,confirmed:void 0},e.meta)}if(l(i,u)){var h=is(u,4),v=h[0],g=h[1],O=h[2],k=h[3];return Fn({id:v.toNumber(),participant:g,totalWithdraw:O,txHash:k.transactionHash,txBlock:k.blockNumber,confirmed:void 0},e.meta)}if(l(c,u)){var j=is(u,5),w=j[0],_=j[1],E=j[4];return $n.success({id:w.toNumber(),participant:_,txHash:E.transactionHash,txBlock:E.blockNumber,confirmed:void 0},e.meta)}if(l(s,u)){var T=is(u,6),x=T[0],S=T[5];return Hn.success({id:x.toNumber(),txHash:S.transactionHash,txBlock:S.blockNumber,confirmed:void 0,locks:null===(r=null===(n=d[Ya(e.meta)])||void 0===n?void 0:n.partner)||void 0===r?void 0:r.locks},e.meta)}})),Object(U["a"])(Ye),Object(nc["a"])(ic()(Hn.success.is),!0))})))})))},ks=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(U["a"])(jn(Ln.request)),Object(Oc["a"])(t,u),Object($["a"])((function(t){var n,u,l=is(t,3),d=l[0],p=l[1],f=l[2],b=f.settleTimeout,y=f.subkey,m=d.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=p.channels[Ya(d.meta)])||void 0===n?void 0:n.state;if(g)return Object(M["a"])(Ln.failure(new dn(qt.CNL_INVALID_STATE,{state:g}),d.meta));var O=Qc({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:y),k=O.signer,j=zc(s(h),k),w=!d.payload.deposit||d.payload.deposit.isZero()?void 0:d.payload.deposit,_=Zt()(p.tokens,(function(e){return e===h})),E=zc(c(_),k);return e.pipe(Object(U["a"])(Ln.success.is),Object(U["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(kc["a"])(1,void 0,(function(e){return Object(I["a"])((function(){var e;return j.functions.openChannel(o,v,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object($["a"])((function(e){return w?Object(ft["a"])(E.functions.approve(h,w)).pipe(Object(B["a"])((function(t){return[e,t]}))):Object(M["a"])([e])})),Object(Xa["a"])((function(e){var t=is(e,1),n=t[0];return r.debug('sent openChannel tx "'.concat(n.hash,'" to "').concat(h,'"'))})),Object(Xa["a"])((function(e){var t=is(e,2),n=t[1];return n?r.debug('sent approve tx "'.concat(n.hash,'" to "').concat(_,'"')):0})),Object($["a"])((function(e){var t=is(e,2),n=t[0],r=t[1];return Object(pt["a"])([Object(ft["a"])(n.wait()).pipe(Object(B["a"])((function(e){return{tx:n,receipt:e}}))),r?Object(ft["a"])(r.wait()).pipe(Object(B["a"])((function(e){return{tx:r,receipt:e}}))):Object(M["a"])(void 0)])})),Object($["a"])((function(t){var n=is(t,2),a=n[0],i=n[1];if(!a.receipt.status)throw new dn(qt.CNL_OPENCHANNEL_FAILED,Object.assign(Object.assign({},d.meta),{transactionHash:a.tx.hash}));return r.debug('openChannel tx "'.concat(a.tx.hash,'" successfuly mined!')),(i?Object(M["a"])(i):D["a"]).pipe(Object($["a"])((function(t){var n=t.tx,a=t.receipt;if(!a.status)throw new dn(qt.CNL_APPROVE_TRANSACTION_FAILED,{token:_,transactionHash:n.hash});return r.debug('approve tx "'.concat(n.hash,'" successfuly mined!')),e.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.payload.id;return j.functions.setTotalDeposit(t,o,w,v)})))})),za("setTotalDeposit",qt.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return Object(M["a"])(Un.failure(e,d.meta))})))})),Object(ac["a"])((function(e){return Object(M["a"])(Ln.failure(e,d.meta))})))})))})))},js=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(U["a"])(jn(Un.request)),Object(Oc["a"])(t,u),Object($["a"])((function(e){var n,u=is(e,3),l=u[0],d=u[1],p=u[2].subkey,f=l.meta,b=f.tokenNetwork,y=f.partner,m=Zt()(d.tokens,(function(e){return e===b}));if(!m){var h=new dn(qt.CNL_TOKEN_NOT_FOUND,l.meta);return Object(M["a"])(Un.failure(h,l.meta))}var v=Qc({signer:a,address:o,main:i},null!==(n=l.payload.subkey)&&void 0!==n?n:p),g=v.signer,O=zc(c(m),g),k=zc(s(b),g),j=Ya(l.meta),w=d.channels[j];if((null===w||void 0===w?void 0:w.state)!==xa.open){var _=new dn(qt.CNL_NO_OPEN_CHANNEL_FOUND,l.meta);return Object(M["a"])(Un.failure(_,l.meta))}return Object(ft["a"])(O.functions.approve(b,l.payload.deposit)).pipe(za("approve",qt.CNL_APPROVE_TRANSACTION_FAILED,{log:r}),Object(Oc["a"])(t),Object($["a"])((function(e){var t=is(e,2),n=t[1];return k.functions.setTotalDeposit(w.id,o,n.channels[j].own.deposit.add(l.payload.deposit),y)})),za("setTotalDeposit",qt.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return Object(M["a"])(Un.failure(e,l.meta))})))})))},ws=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(U["a"])(jn($n.request)),Object(Oc["a"])(t,u),Object($["a"])((function(e){var t,n,u=is(e,3),l=u[0],d=u[1],p=u[2].subkey,f=l.meta,b=f.tokenNetwork,y=f.partner,m=Qc({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:p),h=m.signer,v=zc(s(b),h),g=d.channels[Ya(l.meta)];if((null===g||void 0===g?void 0:g.state)!==xa.open&&(null===g||void 0===g?void 0:g.state)!==xa.closing){var O=new dn(qt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(M["a"])($n.failure(O,l.meta))}var k=g.partner.balanceProof,w=Ho(k.transferredAmount,k.lockedAmount,k.locksroot),_=k.nonce,E=k.additionalHash,T=k.signature,x=Object(j["concat"])([Ta(b,20),Ta(c.chainId,32),Ta(Bo.BALANCE_PROOF,32),Ta(g.id,32),Ta(w,32),Ta(_,32),Ta(E,32),Ta(T,65)]);return Object(ft["a"])(a.signMessage(x)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,w,_,E,T,e)})),za("closeChannel",qt.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return Object(M["a"])($n.failure(e,l.meta))})))})))},_s=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(U["a"])(jn($n.success)),Object(U["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(U["a"])(Dn.is),Object(L["a"])(1),Object(mc["a"])(1),Object(hc["a"])(t))})),Object(Oc["a"])(t,u),Object(U["a"])((function(e){var t=is(e,2),n=t[0],r=t[1],a=r.channels[Ya(n.meta)];return(null===a||void 0===a?void 0:a.state)===xa.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(w["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=is(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,p=d.tokenNetwork,f=d.partner,b=Qc({signer:a,address:o,main:i},l),y=b.signer,m=zc(s(p),y),h=u.channels[Ya(n.meta)],v=Ho(h.partner.balanceProof.transferredAmount,h.partner.balanceProof.lockedAmount,h.partner.balanceProof.locksroot),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,k=h.partner.balanceProof.signature,w=Object(j["concat"])([Ta(p,20),Ta(c.chainId,32),Ta(Bo.BALANCE_PROOF_UPDATE,32),Ta(h.id,32),Ta(v,32),Ta(g,32),Ta(O,32),Ta(k,65)]);return Object(ft["a"])(a.signMessage(w)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,f,o,v,g,O,k,e)})),za("updateNonClosingBalanceProof",qt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),D["a"]})))})))},Es=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(U["a"])(jn(Hn.request)),Object(Oc["a"])(t,s),Object($["a"])((function(e){var t,n,s=is(e,3),u=s[0],l=s[1],d=s[2].subkey,p=u.meta.tokenNetwork,f=Qc({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),b=f.signer,y=zc(c(p),b),m=l.channels[Ya(u.meta)];if((null===m||void 0===m?void 0:m.state)!==xa.settleable&&(null===m||void 0===m?void 0:m.state)!==xa.settling){var h=new dn(qt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(M["a"])(Hn.failure(h,u.meta))}var v=m.own,g=m.partner;if(g.balanceProof.transferredAmount.add(g.balanceProof.lockedAmount).lt(v.balanceProof.transferredAmount.add(v.balanceProof.lockedAmount))){var O=[g,v];v=O[0],g=O[1]}return Object(ft["a"])(y.functions.settleChannel(m.id,v.address,v.balanceProof.transferredAmount,v.balanceProof.lockedAmount,v.balanceProof.locksroot,g.address,g.balanceProof.transferredAmount,g.balanceProof.lockedAmount,g.balanceProof.locksroot)).pipe(za("settleChannel",qt.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return Object(M["a"])(Hn.failure(e,u.meta))})))})))},Ts=function(e,t){return e.pipe(Object(U["a"])(jn(Dn)),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=is(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===xa.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,qn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},xs=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(U["a"])(jn(Hn.success)),Object(U["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Oc["a"])(t,s),Object(U["a"])((function(e){var t,n=is(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Ya(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=is(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,p=zc(c(l),Qc({signer:a,address:o,main:i},s).signer),f=Object(j["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(ns(e),[Ta(t.expiration,32),Ta(t.amount,32),t.secrethash])}),[]));return Object(ft["a"])(p.functions.unlock(n.payload.id,o,d,f)).pipe(za("unlock",qt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),D["a"]})))})))};function Ss(e,t,n,r){return fs((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:t.blockNumber,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(U["a"])(Ye))}var As=function(e,t,n){ps(e);var r=n.config$,a=n.provider;return Object(pt["a"])(t.pipe(sc("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(sc("confirmationBlocks"))).pipe(Object(U["a"])((function(e){var t=is(e,2),n=t[1];return n.length>0})),Object(vc["a"])((function(e){var t=is(e,3),n=t[0],r=t[1],o=t[2];return fc["a"].apply(void 0,ns(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return Ss(e,a,n,o)}))))})))},Rs=n("6e77"),Ns=n("47ea"),Cs=n("bee6"),Ps=n("b4cc1"),Is=n("d337"),Ds=n("b4d5"),Ms=n("d96a"),Ls=n("59b7"),Bs=n("a2ef"),Us=n("6fb6"),Fs=n("de5c"),$s=n("8f41"),qs=n("2527"),Hs=n("2769"),Vs=n.n(Hs),Ws=n("80f6"),Gs=n.n(Ws),Ks=n("dc46"),Zs=n.n(Ks),Xs=n("fc5d");function Ys(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Qs(e,t){var n=Object(Xs["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}function zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e,t,n){return t&&Js(e.prototype,t),n&&Js(e,n),e}var tu=function(){function e(t){zs(this,e),this.values=new Map,this.max=t}return eu(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function nu(e){return ou(e)||au(e)||lu(e)||ru()}function ru(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function au(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ou(e){if(Array.isArray(e))return du(e)}function iu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function cu(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=lu(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function su(e,t){return fu(e)||pu(e,t)||lu(e,t)||uu()}function uu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lu(e,t){if(e){if("string"===typeof e)return du(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?du(e,t):void 0}}function du(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fu(e){if(Array.isArray(e))return e}var bu=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},yu=["online","unavailable"],mu=/^@(0x[0-9a-f]{40})[.:]/i,hu="RAIDEN";function vu(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Ye)}var gu=Zs()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Ou(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(gu(t))),n?Object(M["a"])(n):Object(Rs["a"])(e,"Room").pipe(Object(U["a"])(gu(t)),Object(mc["a"])(1))}function ku(e,t){var n=Ys(t.getHomeserverUrl());return Object(ft["a"])(vu(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),r}))})),Object(q["a"])("roomId"),Object(Ns["a"])())}function ju(e,t){return Object(I["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function wu(e,t,n,r){return e.pipe(Object(U["a"])(Gn.is),Object(mc["a"])(1),Object(Xa["a"])((function(){n.next(t),n.complete()})),Object(Cs["a"])(1e3),Object(Oc["a"])(r),Object($["a"])((function(e){var n=su(e,2),r=n[1];return ku(r,t).pipe(Object($["a"])((function(e){return ju(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(jc["a"])())}function _u(e,t,n){var r=n.log;return Object(I["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(f.a.mark((function e(n){var r,a,o,i,c,s;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=cu(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=mu.exec(i.user_id),c&&Object(j["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(j["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Qs(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(U["a"])(Ye),Object(Ns["a"])(),Object(B["a"])((function(e){if(!e.length)throw new dn(qt.TRNS_NO_VALID_USER,{address:t});return Gs()(e,"last_active_ago")})))}function Eu(e){var t;if(e){var n={};try{var r,a=cu(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}function Tu(e){return Object.entries(e).filter((function(e){var t=su(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=su(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function xu(e,t,n,r,a){var o=a.log;return Object(I["a"])((function(){var n=e.getRoom(t);return n?Object(M["a"])(n):Object(Rs["a"])(e,"Room").pipe(Object(U["a"])((function(e){return e.roomId===t})),Object(mc["a"])(1))})).pipe(Object(U["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Oc["a"])(r),Object($["a"])((function(r){var a=su(r,2),i=a[1].httpTimeout;return Object(I["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(Ps["a"])((function(e){return e.pipe(Object(Cs["a"])(i))})),Object(rc["a"])(Object(Rs["a"])(e,"RoomMember.membership",(function(e,t){return iu(e),t})).pipe(Object(U["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}function Su(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Au(e,t){return e.includes("://")||(e="https://"+e),Object(I["a"])((function(){var n=Date.now();return Object(qs["a"])(e+"/_matrix/client/versions").pipe(Object(Is["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(ac["a"])((function(){return Object(M["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Ru(e,t){var n=this;return Object(qs["a"])(e).pipe(Object($["a"])((function(t){return bu(n,void 0,void 0,f.a.mark((function n(){return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Is["a"])(t),Object($["a"])((function(e){return Su(e)})),Object($["a"])((function(e){return Au(e,t)})),Object(Ns["a"])(),Object($["a"])((function(e){return gt()(e,["rtt"])})),Object(U["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Ds["a"])((function(){return new dn(qt.TRNS_NO_MATRIX_SERVERS)})))}function Nu(e,t,n,r){var a=n.address,o=n.signer,i=Ys(e);if(!i)throw new dn(qt.TRNS_NO_SERVERNAME,{server:e});return Object(I["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(M["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(ft["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(ft["a"])(r.login("m.login.password",{user:c,password:e,device_id:hu})).pipe(Object(ac["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(ft["a"])(o.signMessage(s)).pipe(Object(B["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(P["a"])(Object(ft["a"])(t.setDisplayName(a.displayName)),Object(ft["a"])(t.setPresence({presence:"online",status_msg:""})),r?Object(ft["a"])(t.setAvatarUrl(Tu(r))):D["a"]).pipe(Object(hc["a"])({matrix:t,server:n,setup:a}))})))}var Cu=function(e,t,n){iu(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(pt["a"])([i.pipe(Object(q["a"])("state")),c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=su(e,2),o=n[0],i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,d=o.transport.server,p=o.transport.setup,f=[];c?(c===d&&f.push(Object(M["a"])({server:d,setup:p})),f.push(Object(M["a"])({server:c}))):(d&&f.push(Object(M["a"])({server:d,setup:p})),f.push(Ru(s,u)));var b=function(e){return t=e,D["a"]};return Object(I["a"])((function(){return f.shift()||D["a"]})).pipe(Object(ac["a"])(b),Object(xc["a"])((function(e){var t=e.server,n=e.setup;return Nu(t,n,{address:r,signer:a},l).pipe(Object(ac["a"])(b))})),Object(F["a"])(),Object(Xa["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(yc["a"])((function(e){return e.pipe(Object($["a"])((function(){return f.length?Object(M["a"])(null):Object(pc["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(P["a"])(wu(e,n,o,c),Object(M["a"])(Gn({server:r,setup:a})),c.pipe(sc("logger"),Object(Xa["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(jc["a"])()))})))},Pu=function(e,t,n){iu(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Ms["a"])((function(){t.setPresence({presence:"offline",status_msg:""}).catch((function(){})),t.stopClient()})))})),Object(jc["a"])())},Iu=function(e,t,n){iu(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(U["a"])(jn(Kn.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(gc["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Oc["a"])(a.pipe(sc("presences"))),Object(vc["a"])((function(e){var t=su(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(M["a"])(i[r.meta.address]):_u(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Kn.success({userId:n,available:yu.includes(t),ts:Date.now(),caps:Eu(a)},r.meta)})),Object(ac["a"])((function(e){return Object(M["a"])(Kn.failure(e,r.meta))})))})))})))},Du=function(e,t,n){iu(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Rs["a"])(e,"event").pipe(Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(U["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(B["a"])((function(e){var t=e.event,n=e.matrix,r=n.getUser(t.getSender());if(r&&r.presence){var a=mu.exec(r.userId),o=a&&a[1];if(o){var i=Object(j["getAddress"])(o);if(i)return{matrix:n,user:r,address:i}}}})),Object(U["a"])(Ye),Object(Oc["a"])(e.pipe(Object(U["a"])(jn(Kn.request)),Object(tc["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(ec["a"])(new Set)),o.pipe(sc("presences"))),Object(U["a"])((function(e){var t=su(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=su(e,3),n=t[0],a=n.matrix,o=n.user,i=n.address,c=t[2],s=o.userId,u=o.presence,l=yu.includes(u);if(i in c&&c[i].payload.userId===s&&c[i].payload.available===l)return D["a"];var d=tt.is(o.displayName)?Object(M["a"])({displayname:o.displayName,avatar_url:o.avatarUrl}):Object(I["a"])((function(){return a.getProfileInfo(s)}));return d.pipe(Object(B["a"])((function(e){var t;Ke(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(j["verifyMessage"])(s,e.displayname);return Ke(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Kn.success({userId:s,available:l,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Eu(e.avatar_url)},{address:n})})),Object(ac["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),D["a"]})))}))).pipe(Object(Oc["a"])(o),Object(U["a"])((function(e){var t=su(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},Mu=function(e,t,n){iu(t);var r=n.log,a=n.matrix$,o=n.latest$;return e.pipe(Object(U["a"])(jn([Sr,Bn,vr.request,Xn])),Object(B["a"])((function(e){return jn(Sr,e)?e.payload.message.target:jn(Bn,e)?e.meta.partner:e.meta.address})),Object(gc["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(vc["a"])((function(e){var t=e.address,n=e.matrix;return o.pipe(Object(U["a"])((function(e){var n=e.presences;return t in n})),Object(mc["a"])(1),Object(U["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(B["a"])((function(e){var n=e.room_id;return Zn({roomId:n},{address:t})})),Object(ac["a"])((function(e){return r.error("Error creating room, ignoring",e),D["a"]})))})))})))},Lu=function(e,t,n){iu(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(U["a"])(jn(Kn.success)),Object(gc["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Oc["a"])(r),Object(yt["a"])((function(e){var t=su(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(B["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(cc["a"])(),Object(yt["a"])((function(e){return Object(fc["a"])(Object(M["a"])(e),e?Object(Rs["a"])(r,"RoomMember.membership",(function(e,t){return iu(e),t})).pipe(Object(U["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(hc["a"])(e)):D["a"])})),Object(yt["a"])((function(e){return e?xu(r,e,n.payload.userId,a,{log:i}):D["a"]}))):D["a"]})))})),Object(jc["a"])())},Bu=function(e,t,n){iu(e),iu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Rs["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(U["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Oc["a"])(o),Object($["a"])((function(e){var t=su(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(sc("presences"),Object(B["a"])((function(e){return Vs()(e,(function(e){return e.payload.userId===s}))})),Object(U["a"])(Ye),Object(mc["a"])(1),Object(rc["a"])(Object(dc["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(ft["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(hc["a"])(Zn({roomId:n.roomId},{address:a.meta.address})),Object(ac["a"])((function(e){return r.error("Error joining invited room, ignoring",e),D["a"]})))})))},Uu=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(U["a"])(jn(Zn)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Oc["a"])(t,o),Object($["a"])((function(e){var t,n,a=su(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(ft["a"])(l.filter((function(e,t){return iu(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return Xn({roomId:e},i.meta)})))})))},Fu=function(e,t,n){iu(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(yt["a"])((function(e){return Object(Rs["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(Ls["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(dc["a"])(t)})))})),Object(Oc["a"])(t,o),Object(U["a"])((function(e){var t,n=su(e,3),r=n[0],a=r.matrix,o=r.roomId,i=n[1].transport,c=n[2],s=a.getRoom(o);if(!s)return!1;var u=vu(c);if(s.name&&u.some((function(e){return s.name.match("#".concat(e,":"))})))return!1;for(var l=0,d=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});l<d.length;l++){var p,f=d[l],b=cu(f);try{for(b.s();!(p=b.n()).done;){var y=p.value;if(y===s.roomId)return!1}}catch(m){b.e(m)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=su(e,1),n=t[0],a=n.matrix,o=n.roomId;return bu(void 0,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(jc["a"])())},$u=function(e,t,n){iu(e);var r=n.log,a=n.matrix$;return a.pipe(Object(yt["a"])((function(e){return Object(Rs["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(U["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,p,b,y;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=su(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=su(s[c],2),l=u[0],d=u[1],p=cu(d),e.prev=5,p.s();case 7:if((b=p.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Xn({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),p.e(e.t0);case 20:return e.prev=20,p.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},qu=function(e,t,n){iu(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(sc("transport","rooms"),Object(U["a"])(Ye),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=su(r[n],2),o=a[0],i=a[1],c=cu(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Bs["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Oc["a"])(o),Object($["a"])((function(e){var t=su(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Ou(i,a).pipe(Object(Is["a"])(c),Object(jc["a"])(),Object(ac["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(M["a"])(Xn({roomId:a},{address:o}))})))})))};function Hu(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(U["a"])((function(t){var n=t.presences;return e in n})),Object(mc["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(M["a"])(a[e]):i.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(U["a"])(Ye),Object(cc["a"])(),Object(yt["a"])((function(n){return Ou(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(B["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(cc["a"])(),Object(B["a"])((function(e){return{room:t,userId:e}})))})),Object(yt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return D["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(M["a"])(a):Object(Rs["a"])(t,"RoomMember.membership",(function(e,t){return iu(e),t})).pipe(Object(U["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(mc["a"])(1),Object($["a"])((function(e){return Object(I["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(hc["a"])("string"===typeof e?e:e.label),Object(yc["a"])((function(e){return e.pipe(Object(Oc["a"])(c),Object($["a"])((function(e,t){var n=su(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(dc["a"])(a/u)):Object(pc["a"])(r)})))})))})))}var Vu=function(e,t,n){iu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(U["a"])(jn(vr.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(gc["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(xc["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Xo(t.payload.message),c={body:a,msgtype:"m.text"};return Hu(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(hc["a"])(vr.success(void 0,t.meta)),Object(ac["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(M["a"])(vr.failure(e,t.meta))})))})))})))},Wu=function(e,t,n){iu(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(U["a"])(jn(gr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Oc["a"])(o),Object($["a"])((function(e){var t=su(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=vu(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),D["a"];var s=Ys(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Ou(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Xo(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(ac["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),D["a"]})))})),Object(jc["a"])())};function Gu(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Yo(e);if("signature"in a){var o=Ko(a);if(o!==t)throw new dn(qt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}var Ku=function(e,t,n){iu(e),iu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Rs["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Oc["a"])(o),Object(U["a"])((function(e){var t,n,r=su(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!vu(s).some((function(e){return gu("#".concat(e,":").concat(Ys(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=su(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(U["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Vs()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(mc["a"])(1),Object(rc["a"])(Object(dc["a"])(c)),Object($["a"])(f.a.mark((function e(t){var n,i,c,s,u,l,d;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Vs()(n,["payload.userId",a.getSender()]),s=cu((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=Gu(l,c.meta.address,{log:r}),e.next=10,Or({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Zu=function(e,t){return e.pipe(Object(U["a"])(Or.is),Object(Oc["a"])(t),Object(U["a"])((function(e){var t,n,r=su(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=su(e,1),n=t[0];return Zn({roomId:n.payload.roomId},n.meta)})))},Xu=function(e){return e.pipe(Object(U["a"])(jn(Bn)),Object(B["a"])((function(e){return Kn.request(void 0,{address:e.meta.partner})})))},Yu=function(e,t,n){iu(t);var r=n.log,a=n.signer,o=n.latest$,i=new tu(32);return e.pipe(Object(U["a"])(zo([st(Jn),st(er),st(tr)])),Object(Oc["a"])(o),Object(U["a"])((function(e){var t,n=su(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Se.NO_DELIVERY])})),Object(xc["a"])((function(e){var t=su(e,1),n=t[0],o=n.payload.message;return Object(I["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(M["a"])(vr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Rn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(ft["a"])(Qo(a,s,{log:r})).pipe(Object(Xa["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return vr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Qu=new WeakMap;function zu(e){return bu(this,void 0,void 0,f.a.mark((function t(){var n,r,a,o;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Qu.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Qu.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Ju(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function el(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(P["a"])(Object(Rs["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(Ls["a"])((function(){return n})),Object(nc["a"])(Ye),Object(Us["a"])(10),Object(U["a"])((function(e){return e.length>0})),Object(Xa["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return Hu(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Rs["a"])(t,"event").pipe(Object(U["a"])(Ju("m.call.candidates",i,o)),Object(Xa["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(ft["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(I["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(ac["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),D["a"]})))})))).pipe(Object(jc["a"])())}function tl(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,p=a.config$;return Object(ft["a"])(zu(e)).pipe(Object($["a"])((function(r){var f=new RTCPeerConnection({iceServers:[].concat(nu(r),nu(i))}),b=f.createDataChannel(c,{ordered:!1});return Object(P["a"])(el(f,e,t,n,a),Object(I["a"])((function(){return f.createOffer()})).pipe(Object($["a"])((function(t){f.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(P["a"])(Object(Rs["a"])(e,"event").pipe(Object(U["a"])(Ju("m.call.answer",s,c,o))),Hu(u,e,"m.call.invite",n,{log:l,latest$:d,config$:p}).pipe(Object(Xa["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(jc["a"])()))})),Object(mc["a"])(1),Object(Xa["a"])((function(){return l.info("RTC: got answer",c)})),Object(B["a"])((function(e){f.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(jc["a"])()),Object(M["a"])(b))})))}function nl(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(Rs["a"])(e,"event").pipe(Object(U["a"])(Ju("m.call.invite",c,i,o)),Object(Xa["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(ft["a"])(zu(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(Oc["a"])(d),Object($["a"])((function(r){var c=su(r,2),p=su(c[0],2),f=p[0],b=p[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(nu(b),nu(y))});return m.setRemoteDescription(new RTCSessionDescription(f.getContent().offer)),Object(P["a"])(el(m,e,t,n,a),Object(I["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Hu(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(Xa["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(jc["a"])()),Object(Rs["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(mc["a"])(1))}function rl(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(P["a"])(Object(Rs["a"])(t,"close").pipe(Object(Xa["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(jc["a"])()),Object(Rs["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(pc["a"])(e.error)}))),Object(Rs["a"])(t,"open").pipe(Object(mc["a"])(1),Object(Is["a"])(c/3),Object(Xa["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(hc["a"])(Yn(t,{address:i}))),Object(Rs["a"])(t,"message").pipe(Object(Xa["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(U["a"])((function(e){return"string"===typeof e})),Object(B["a"])((function(e){return Or({text:e,message:Gu(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Ms["a"])((function(){return t.close()})))})),Object(rc["a"])(e),Object(ac["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),D["a"]})),Object(Fs["a"])(Yn(void 0,{address:i})))}}function al(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(cc["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Oc["a"])(i,c),Object(U["a"])((function(e){var t,n=su(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Se.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Se.WEBRTC])})),Object(yt["a"])((function(t){var n=su(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(M["a"])(Yn(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),p=d.startsWith(a.toLowerCase());return Object(I["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],f=new C["a"];return t=p?tl(s,a,n,u,l):nl(s,a,n,u,l),f.pipe(Object($["a"])((function(){return Hu(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(rc["a"])(Object(dc["a"])(u.httpTimeout/10)))})),Object(rc["a"])(e.pipe(Object(U["a"])(Xr.is)))).subscribe(),Object(P["a"])(t,Object(Rs["a"])(s,"event").pipe(Object(U["a"])(Ju("m.call.hangup",n.peerId,d)),Object($s["a"])(Object(pc["a"])(new Error("RTC: peer hung up"))))).pipe(rl(f,n,u,l))})).pipe(Object(Ps["a"])((function(e){return e.pipe(Object(Oc["a"])(o,c),Object($["a"])((function(e){var t,n,r=su(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?p?Object(dc["a"])(o/10):Object(M["a"])(null):D["a"]})))})))})))}var ol=function(e,t,n){return iu(t),e.pipe(Object(U["a"])(Kn.success.is),Object(gc["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return al(e,t,n)})))};function il(e,t){return dl(e)||ll(e,t)||sl(e,t)||cl()}function cl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sl(e,t){if(e){if("string"===typeof e)return ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ul(e,t):void 0}}function ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ll(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function dl(e){if(Array.isArray(e))return e}var pl=function(e,t,n){var r=n.address;return e.pipe(Object(U["a"])(jn([$n.request,$n.success])),Object(Oc["a"])(t),Object($["a"])((function(e){var t=il(e,2),n=t[0],a=t[1];return Object(ft["a"])(Object.entries(a.sent)).pipe(Object(U["a"])((function(e){var t=il(e,2),a=il(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(B["a"])((function(e){var t,n,r,a,o=il(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Na.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?xr.success({balanceProof:Zo(c.unlock[1])},s):xr.success({},s):xr.failure(new dn(qt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(U["a"])(Ye))})))};function fl(e,t,n){return Object(P["a"])(e.pipe(Object(U["a"])(n),Object(mc["a"])(1),Object(jc["a"])()),Object(M["a"])(t))}function bl(e,t){return gl(e)||vl(e,t)||ml(e,t)||yl()}function yl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ml(e,t){if(e){if("string"===typeof e)return hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hl(e,t):void 0}}function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gl(e){if(Array.isArray(e))return e}function Ol(e,t,n,r){var a=n.confirmationBlocks;return Object(ft["a"])(Object.entries(t.sent)).pipe(Object(U["a"])((function(e){var t,n,o=bl(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=bl(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Na.SENT};return Object(P["a"])(fl(e,Mr.request(void 0,o),Tn(Mr,o)),Object(M["a"])(xr.failure(new dn(qt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var kl=function(e,t,n){var r=n.config$;return e.pipe(Object(U["a"])(jn(Dn)),Object(Oc["a"])(t,r),Object(vc["a"])((function(t){var n=bl(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return Ol(e,a,o,r)})))},jl=n("2593"),wl=n.n(jl);function _l(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function El(e,t){return Sl(e)||xl(e,t)||Nl(e,t)||Tl()}function Tl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sl(e){if(Array.isArray(e))return e}function Al(e){return Pl(e)||Cl(e)||Nl(e)||Rl()}function Rl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nl(e,t){if(e){if("string"===typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Il(e,t):void 0}}function Cl(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Pl(e){if(Array.isArray(e))return Il(e)}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dl(e){return e.nonce.add(1)}function Ml(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return ci(n)}function Ll(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),D["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,p=t.payload.paths[0].path[0],b=e.channels[Ya({tokenNetwork:t.payload.tokenNetwork,partner:p})];Ke((null===b||void 0===b?void 0:b.state)===xa.open,"not open"),Ke(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(d),expiration:Object(j["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},m=ci([].concat(Al(b.own.locks),[y])),h=Zt()(e.tokens,(function(e){return e===t.payload.tokenNetwork}));i.info("Signing transfer of value",t.payload.value.toString(),"of token",h,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var v={type:Rn.LOCKED_TRANSFER,message_identifier:di(),chain_id:Object(j["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(b.id),nonce:Dl(b.own.balanceProof),transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:m,payment_identifier:t.payload.paymentId,token:h,recipient:p,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(ft["a"])(Qo(u,v,{log:i})).pipe(Object($["a"])(f.a.mark((function e(n){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Sr({message:n,fee:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Rr({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Bl(e,t,n){return Object(pt["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=El(e,2),a=r[0],o=r[1];return Ll(a,t,o,n)})),Object(ac["a"])((function(e){return Object(M["a"])(xr.failure(e,t.meta))})))}function Ul(e,t,n,r){var a,o,i=r.log,c=r.signer,s=n.meta.secrethash;Ke(s in t.sent,"unknown transfer");var u,l=t.sent[s].transfer[1],d=t.sent[s].partner,p=t.channels[Ya({tokenNetwork:l.token_network_address,partner:d})];if(Ke((null===p||void 0===p?void 0:p.state)===xa.open,"channel not open"),t.sent[s].unlock)u=Object(M["a"])(t.sent[s].unlock[1]);else{Ke((null===(o=null===(a=t.sent[s].secret)||void 0===a?void 0:a[1])||void 0===o?void 0:o.registerBlock)||l.lock.expiration.gt(t.blockNumber),"lock expired");var b=Ml(p.own,s),y={type:Rn.UNLOCK,message_identifier:di(),chain_id:l.chain_id,token_network_address:l.token_network_address,channel_identifier:l.channel_identifier,nonce:Dl(p.own.balanceProof),transferred_amount:p.own.balanceProof.transferredAmount.add(l.lock.amount),locked_amount:p.own.balanceProof.lockedAmount.sub(l.lock.amount),locksroot:b,payment_identifier:l.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};u=Object(ft["a"])(Qo(c,y,{log:i}))}return u.pipe(Object(Oc["a"])(e),Object($["a"])(f.a.mark((function e(t){var r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=El(t,2),a=r[0],o=r[1],Ke((null===(c=null===(i=o.sent[s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)||l.lock.expiration.gt(o.blockNumber),"lock expired"),Ke(!o.sent[s].channelClosed,"channel closed!"),e.next=5,Ir.success({message:a},n.meta);case 5:case"end":return e.stop()}}),e)}))))}function Fl(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return Ul(e,n,t,{log:a,signer:r})})),Object(ac["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(M["a"])(Ir.failure(e,t.meta))})))}function $l(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;Ke(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[Ya({tokenNetwork:c.token_network_address,partner:s})];if(Ke((null===u||void 0===u?void 0:u.state)===xa.open,"channel not open"),e.sent[o].lockExpired)i=Object(M["a"])(e.sent[o].lockExpired[1]);else{Ke(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),Ke(!e.sent[o].unlock,"transfer already unlocked");var l=Ml(u.own,o),d={type:Rn.LOCK_EXPIRED,message_identifier:di(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:Dl(u.own.balanceProof),transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(ft["a"])(Qo(r,d,{log:a}))}return i.pipe(Object(B["a"])((function(e){return Mr.success({message:e},t.meta)})))}function ql(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return $l(e,t,{signer:a,log:r})})),Object(ac["a"])((function(e){return Object(M["a"])(Mr.failure(e,t.meta))})))}function Hl(e,t,n,r){var a,o=n.log,i=n.signer,c=t.payload.message,s=e.channels[Ya(t.meta)];Ke((null===s||void 0===s?void 0:s.state)===xa.open&&c.channel_identifier.eq(s.id),"channel not open or wrong id"),Ke(c.expiration.gt(e.blockNumber),"WithdrawRequest expired"),Ke(c.total_withdraw.lte(s.partner.deposit.add(s.own.balanceProof.transferredAmount)),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount");var u=c.message_identifier.toString();function l(e,t){if(!t)return!1;var n=wl()(t,["token_network_address","participant","chain_id","channel_identifier","total_withdraw","expiration"]);return Vt()(e,n,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var d=r.get(u);if(l(c,d))a=Object(M["a"])(d);else{var p={type:Rn.WITHDRAW_CONFIRMATION,message_identifier:c.message_identifier,chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,participant:c.participant,total_withdraw:c.total_withdraw,nonce:Dl(s.own.balanceProof),expiration:c.expiration};a=Object(ft["a"])(Qo(i,p,{log:o})).pipe(Object(Xa["a"])((function(e){return r.put(u,e)})))}return a.pipe(Object(B["a"])((function(e){return $r.success({message:e},t.meta)})))}function Vl(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Hl(e,t,{log:o,signer:a},r)})),Object(ac["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),D["a"]})))}function Wl(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:Na.RECEIVED};return Object(pt["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=El(e,2),c=n[0],l=n[1],d=l.revealTimeout,p=l.caps,b=t.payload.message;if(s in c.received){a.warn("transfer already present",t.meta);var y=b.message_identifier;return c.received[s].partner===t.meta.address&&c.received[s].transfer[1].message_identifier.eq(y)?Object(M["a"])(Ar({message:c.received[s].transferProcessed[1]},u)):D["a"]}var m=b.token_network_address,h=t.meta.address,v=c.channels[Ya({tokenNetwork:m,partner:h})];Ke((null===v||void 0===v?void 0:v.state)===xa.open,"channel not open"),Ke(b.chain_id.eq(o.chainId),"chainId mismatch"),Ke(b.channel_identifier.eq(v.id),"channelId mismatch"),Ke(b.nonce.eq(Dl(v.partner.balanceProof)),"nonce mismatch"),Ke(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),Ke(b.locked_amount.eq(v.partner.balanceProof.lockedAmount.add(b.lock.amount)),"lockedAmount mismatch");var g=Qa(v).partnerCapacity;Ke(b.lock.amount.lte(g),"balanceProof total amount bigger than capacity"),Ke(b.recipient===r,"Received transfer isn't for us"),Ke(b.lock.expiration.sub(c.blockNumber).gt(d),"lock expires too soon");var O=ci([].concat(Al(v.partner.locks),[b.lock]));Ke(b.locksroot===O,"locksroot mismatch");var k=Zt()(c.tokens,(function(e){return e===m}));a.info("Receiving transfer of value",b.lock.amount.toString(),"of token",k,", from",b.initiator,", through partner",h);var j=Object(M["a"])(void 0);(null===p||void 0===p?void 0:p[Se.NO_RECEIVE])||b.target!==r||(j=Object(I["a"])((function(){var e={type:Rn.SECRET_REQUEST,payment_identifier:b.payment_identifier,secrethash:s,amount:b.lock.amount,expiration:b.lock.expiration,message_identifier:di()};return Qo(i,e,{log:a})})));var _=Object(I["a"])((function(){var e={type:Rn.PROCESSED,message_identifier:b.message_identifier};return Qo(i,e,{log:a})}));return Object(pt["a"])([_,j]).pipe(Object($["a"])(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=El(t,2),r=n[0],a=n[1],e.next=3,Sr({message:b,fee:w["Zero"]},u);case 3:return e.next=5,Ar({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,Kn.request(void 0,{address:b.initiator});case 8:return e.next=10,Cr({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(ac["a"])((function(e){return Object(M["a"])(xr.failure(e,u))})))}function Gl(e,t,n){var r=n.log,a=n.network,o=n.signer,i=si(t.payload.message.secret),c={secrethash:i,direction:Na.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return D["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(Ke(u===n.partner,"wrong partner"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(M["a"])(Dr({message:n.unlockProcessed[1]},c)):D["a"];var l=n.transfer[1],d=s.token_network_address;Ke(d===l.token_network_address,"wrong tokenNetwork");var p=e.channels[Ya({tokenNetwork:d,partner:u})];Ke((null===p||void 0===p?void 0:p.state)===xa.open,"channel not open"),Ke(s.chain_id.eq(a.chainId),"chainId mismatch"),Ke(s.channel_identifier.eq(p.id),"channelId mismatch"),Ke(s.nonce.eq(Dl(p.partner.balanceProof)),"nonce mismatch");var b=l.lock,y=b.amount;Ke(s.transferred_amount.eq(p.partner.balanceProof.transferredAmount.add(y)),"transferredAmount mismatch"),Ke(s.locked_amount.eq(p.partner.balanceProof.lockedAmount.sub(y)),"lockedAmount mismatch");var m=Ml(p.partner,i);Ke(s.locksroot===m,"locksroot mismatch");var h={type:Rn.PROCESSED,message_identifier:s.message_identifier};return Object(ft["a"])(Qo(o,h,{log:r})).pipe(Object($["a"])(f.a.mark((function e(t){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir.success({message:s},c);case 2:return e.next=4,Dr({message:t},c);case 4:return e.next=6,xr.success({balanceProof:Zo(s)},c);case 6:case"end":return e.stop()}}),e)}))))})),Object(ac["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(M["a"])(Ir.failure(e,c))})))}function Kl(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:Na.RECEIVED};return Object(pt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=El(e,2),l=u[0],d=u[1].confirmationBlocks;if(!(c in l.received))return D["a"];var p=l.received[c],b=t.payload.message,y=t.meta.address;if(Ke(y===p.partner,"wrong partner"),p.lockExpired)return r.warn("transfer already expired",t.meta),p.lockExpiredProcessed&&p.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(M["a"])(Lr({message:p.lockExpiredProcessed[1]},s)):D["a"];var m=p.transfer[1];Ke(m.lock.expiration.add(d).lte(l.blockNumber),"expiration block not confirmed yet"),Ke(!p.unlock,"transfer unlocked"),Ke(!(null===(i=null===(n=p.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered");var h=b.token_network_address;Ke(h===m.token_network_address,"wrong tokenNetwork");var v=l.channels[Ya({tokenNetwork:h,partner:y})];Ke((null===v||void 0===v?void 0:v.state)===xa.open,"channel not open"),Ke(b.chain_id.eq(a.chainId),"chainId mismatch"),Ke(b.channel_identifier.eq(v.id),"channelId mismatch"),Ke(b.nonce.eq(Dl(v.partner.balanceProof)),"nonce mismatch");var g=m.lock,O=g.amount;Ke(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),Ke(b.locked_amount.eq(v.partner.balanceProof.lockedAmount.sub(O)),"lockedAmount mismatch");var k=v.partner.locks.filter((function(e){return e.secrethash!==c})),j=ci(k);Ke(b.locksroot===j,"locksroot mismatch");var w={type:Rn.PROCESSED,message_identifier:b.message_identifier};return Object(ft["a"])(Qo(o,w,{log:r})).pipe(Object($["a"])(f.a.mark((function e(t){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mr.success({message:b},s);case 2:return e.next=4,Lr({message:t},s);case 4:return e.next=6,xr.failure(new dn(qt.XFER_EXPIRED,{block:m.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(ac["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(M["a"])(Mr.failure(e,s))})))}var Zl=function(e,t,n){_l(t);var r=new tu(32),a=n.latest$.pipe(sc("state"));return Object(P["a"])(e.pipe(Object(U["a"])(jn([xr.request,Ir.request,Mr.request,$r.request]))),e.pipe(Object(U["a"])(zo([st(ir),st(sr),st(ur)])))).pipe(Object(xc["a"])((function(e){return xr.request.is(e)?Bl(a,e,n):Ir.request.is(e)?Fl(a,e,n):Mr.request.is(e)?ql(a,e,n):$r.request.is(e)?Vl(a,e,n,r):e.payload.message.type===Rn.LOCKED_TRANSFER?Wl(a,e,n):e.payload.message.type===Rn.UNLOCK?Gl(a,e,n):Kl(a,e,n)})))};function Xl(e,t){return ed(e)||Jl(e,t)||Ql(e,t)||Yl()}function Yl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ql(e,t){if(e){if("string"===typeof e)return zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zl(e,t):void 0}}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ed(e){if(Array.isArray(e))return e}function td(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var nd=function(e,t){return td(e),t.pipe(Object(F["a"])(),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Xl(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Na.SENT},e.next=9,Kn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,Sr({message:s.transfer[1],fee:s.fee},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,Ir.success({message:s.unlock[1]},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Mr.success({message:s.lockExpired[1]},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},rd=function(e,t,n){td(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(ft["a"])(Object.entries(e.received))})),Object(U["a"])((function(e){var t,n,r=Xl(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(Oc["a"])(r),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Xl(t,2),r=Xl(n[0],2),a=r[0],o=r[1],i=n[1].caps,c={secrethash:a,direction:Na.RECEIVED},e.next=4,Sr({message:o.transfer[1],fee:o.fee},c);case 4:if(!o.secret||o.secretReveal){e.next=7;break}return e.next=7,Rr({secret:o.secret[1].value},c);case 7:if(!o.secretReveal){e.next=10;break}return e.next=10,Pr({message:o.secretReveal[1]},c);case 10:if((null===i||void 0===i?void 0:i[Se.NO_RECEIVE])||o.secret||!o.secretRequest){e.next=15;break}return e.next=13,Kn.request(void 0,{address:o.transfer[1].initiator});case 13:return e.next=15,Cr({message:o.secretRequest[1]},c);case 15:case"end":return e.stop()}}),e)}))))};function ad(e,t){return ud(e)||sd(e,t)||id(e,t)||od()}function od(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function id(e,t){if(e){if("string"===typeof e)return cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cd(e,t):void 0}}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ud(e){if(Array.isArray(e))return e}var ld=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(U["a"])(Sr.is),Object(U["a"])((function(e){return e.meta.direction===Na.RECEIVED&&e.payload.message.target!==r})),Object(Oc["a"])(t,a),Object(U["a"])((function(e){var t=ad(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(B["a"])((function(e){var t=ad(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return xr.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:w["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Na.SENT})})))};function dd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function pd(e,t){return hd(e)||md(e,t)||bd(e,t)||fd()}function fd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bd(e,t){if(e){if("string"===typeof e)return yd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yd(e,t):void 0}}function yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function md(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hd(e){if(Array.isArray(e))return e}var vd=function(e,t){return e.pipe(Object(U["a"])(zo(st(Jn))),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=pd(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=pd(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Ar({message:o},{secrethash:i,direction:Na.SENT});case 16:case"end":return e.stop()}}),e)}))))},gd=function(e,t){return e.pipe(Object(U["a"])(jn([Ar,Dr,Lr])),Object(U["a"])((function(e){return e.meta.direction===Na.RECEIVED})),Object(Oc["a"])(t),Object(B["a"])((function(e){var t=pd(e,2),n=t[0],r=t[1].received;return vr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},Od=function(e,t){return e.pipe(Object(U["a"])(zo(st(Jn))),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=pd(t,2),r=n[0],a=n[1],o=r.payload.message,i=Zt()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Na.SENT},e.next=8,xr.success({balanceProof:Zo(a.sent[i].unlock[1])},c);case 8:return e.next=10,Dr({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},kd=function(e,t){return e.pipe(Object(U["a"])(zo(st(Jn))),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=pd(t,2),r=n[0],a=n[1],o=r.payload.message,i=Zt()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Lr({message:o},{secrethash:i,direction:Na.SENT});case 7:case"end":return e.stop()}}),e)}))))},jd=function(e,t,n){dd(t);var r=n.log,a=n.signer,o=new tu(32);return e.pipe(Object(U["a"])(zo([st(cr),st(fr)])),Object(xc["a"])((function(e){var t=e.payload.message;return Object(I["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(M["a"])(vr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Rn.PROCESSED,message_identifier:n};return Object(ft["a"])(Qo(a,s,{log:r})).pipe(Object(Xa["a"])((function(e){return o.put(i,e)})),Object(B["a"])((function(t){return vr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},wd=n("b6ad"),_d=n.n(wd);function Ed(e,t){return Rd(e)||Ad(e,t)||xd(e,t)||Td()}function Td(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xd(e,t){if(e){if("string"===typeof e)return Sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sd(e,t):void 0}}function Sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ad(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Rd(e){if(Array.isArray(e))return e}function Nd(e,t){return _d()(e,t,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var Cd=function(e,t){return e.pipe(Object(U["a"])(zo(st(cr))),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Ed(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&Nd(o.lock,s.lock)){e.next=8;break}return e.abrupt("return");case 8:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=10;break}return e.abrupt("return");case 10:return u={secrethash:i,direction:Na.SENT},e.next=13,Br({message:o},u);case 13:return e.next=15,xr.failure(new dn(qt.XFER_REFUNDED),u);case 15:case"end":return e.stop()}}),e)}))))};function Pd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Id(e,t){return Ud(e)||Bd(e,t)||Md(e,t)||Dd()}function Dd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Md(e,t){if(e){if("string"===typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ud(e){if(Array.isArray(e))return e}function Fd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(Ps["a"])((function(e){return e.pipe(Object(Cs["a"])(t))})),Object(rc["a"])(e))}}function $d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return fl(t,e,Tn(vr,e.meta)).pipe(Fd(n,r))}var qd=function(e,t,n,r){return r.meta.direction!==Na.SENT?D["a"]:n.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=vr.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(sc("sent",o),Object(U["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return $d(c,e,s,a)})))},Hd=function(e,t,n,r){return r.meta.direction!==Na.SENT?D["a"]:t.pipe(Object(F["a"])(),Object(Oc["a"])(n),Object(yt["a"])((function(n){var a=Id(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=vr.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(sc("sent",c),Object(U["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return $d(l,e,d,i)})))},Vd=function(e,t,n,r){return r.meta.direction!==Na.SENT?D["a"]:t.pipe(Object(F["a"])(),Object(Oc["a"])(n),Object(yt["a"])((function(n){var a=Id(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(sc("sent",c),Object(U["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return $d(u,e,l,i)})))},Wd=function(e,t,n,r){return r.meta.direction!==Na.RECEIVED?D["a"]:t.pipe(Object(F["a"])(),Object(Oc["a"])(n),Object(yt["a"])((function(n){var a=Id(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(sc("received",c),Object(U["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return $d(u,e,l,i)})))},Gd=function(e,t,n,r){return r.meta.direction!==Na.RECEIVED?D["a"]:t.pipe(Object(F["a"])(),Object(Oc["a"])(n),Object(yt["a"])((function(n){var a=Id(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(sc("received",c),Object(U["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return $d(u,e,l,i)})))},Kd=function(e,t,n){Pd(t);var r=n.latest$,a=n.config$,o=r.pipe(sc("state"));return e.pipe(Object(U["a"])(jn([Sr,Ir.success,Mr.success,Cr,Pr])),Object($["a"])((function(t){return Sr.is(t)?qd(e,o,a,t):Ir.success.is(t)?Hd(e,o,a,t):Mr.success.is(t)?Vd(e,o,a,t):Cr.is(t)?Wd(e,o,a,t):Gd(e,o,a,t)})))};function Zd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xd(e,t){return ep(e)||Jd(e,t)||Qd(e,t)||Yd()}function Yd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qd(e,t){if(e){if("string"===typeof e)return zd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zd(e,t):void 0}}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ep(e){if(Array.isArray(e))return e}var tp=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(U["a"])(zo(st(er))),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,o,i,c,s;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Xd(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Cr({message:c},{secrethash:c.secrethash,direction:Na.SENT});case 10:case"end":return e.stop()}}),e)}))))},np=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),D["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,p=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),D["a"];if(i.amount.lt(p))return o.error("SecretRequest for amount too small!",i,u),Object(M["a"])(xr.failure(new dn(qt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(p)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(M["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Rn.SECRET_REVEAL,message_identifier:di(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(ft["a"])(Qo(a,b,{log:o}))}return s.pipe(Object($["a"])(f.a.mark((function e(n){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pr({message:n},t.meta);case 2:return e.next=4,vr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},rp=function(e,t,n){Zd(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(U["a"])(jn(Cr)),Object(U["a"])((function(e){return e.meta.direction===Na.SENT})),Object(xc["a"])((function(e){return o.pipe(sc("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return np(t,e,{log:r,signer:a})})))})))},ap=function(e,t){return e.pipe(Object(U["a"])(zo(tr)),Object(Oc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Xd(t,2),r=n[0],a=n[1],o=r.payload.message,i=si(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Na.SENT},e.next=7,Rr({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,Ir.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Rr({secret:o.secret},{secrethash:i,direction:Na.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},op=function(e,t,n){Zd(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(U["a"])(jn([Rr,Nr.success])),Object(U["a"])((function(e){return e.meta.direction===Na.RECEIVED})),Object(xc["a"])((function(e){return o.pipe(sc("state"),Object(F["a"])(),Object(U["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Rn.SECRET_REVEAL,message_identifier:di(),secret:e.payload.secret};return Qo(a,t,{log:r})})),Object(B["a"])((function(t){return Pr({message:t},e.meta)})),Object(ac["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),D["a"]})))})))},ip=function(e,t,n){Zd(e);var r=n.secretRegistryContract;return Pt(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(Oc["a"])(t),Object(U["a"])((function(e){var t=Xd(e,2),n=Xd(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Xd(t,2),r=Xd(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Nr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Na.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Nr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Na.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},cp=function(e){return e.pipe(Object(U["a"])(Nr.success.is),Object(U["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return xr.success({},e.meta)})))},sp=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(sc(Na.RECEIVED),Object($["a"])((function(e){return Object(ft["a"])(Object.keys(e))})),Object(Bs["a"])(),Object($["a"])((function(t){return e.pipe(Object(U["a"])(Dn.is),Object(Oc["a"])(a.pipe(Object(q["a"])("state",Na.RECEIVED,t)),r),Object(U["a"])((function(e){var t,n,r=Xd(e,3),a=r[0],o=r[1],i=r[2],c=i.caps,s=i.revealTimeout;return!(null===c||void 0===c?void 0:c[Se.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(s).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(vc["a"])((function(n){var r=Xd(n,2),a=r[1],o={secrethash:t,direction:Na.RECEIVED};return fl(e,Nr.request({secret:a.secret[1].value},o),xn(Nr,o))})),Object(rc["a"])(a.pipe(sc("state"),Object(U["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},up=function(e,t,n){Zd(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(U["a"])(Nr.request.is),Object(Oc["a"])(s),Object($["a"])((function(e){var t,n=Xd(e,2),s=n[0],u=n[1].subkey,l=Qc({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,p=zc(c,d);return Object(ft["a"])(p.functions.registerSecret(s.payload.secret)).pipe(za("registerSecret",qt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(jc["a"])(),Object(ac["a"])((function(e){return Object(M["a"])(Nr.failure(e,s.meta))})))})))},lp=function(e){return e.pipe(Object(U["a"])(zo(st(dr))),Object(U["a"])((function(e){return e.payload.message.participant===e.meta.address})),Object(B["a"])((function(e){var t=e.payload.message;return $r.request({message:t},{tokenNetwork:t.token_network_address,partner:t.participant,totalWithdraw:t.total_withdraw,expiration:t.expiration.toNumber()})})))},dp=function(e){return e.pipe(Object(U["a"])(jn($r.success)),Object(B["a"])((function(e){return vr.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},pp=n("1a2de");function fp(e,t){return vp(e)||hp(e,t)||yp(e,t)||bp()}function bp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yp(e,t){if(e){if("string"===typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mp(e,t):void 0}}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vp(e){if(Array.isArray(e))return e}var gp=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Op(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Se.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Ya({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==xa.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(xa.open,'"');var s=Qa(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var kp=R()((function(e){return gp(void 0,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function jp(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Re["t"]({message:Re["q"],network_info:Re["t"]({chain_id:Re["j"](a.chainId),token_network_registry_address:Re["j"](o.TokenNetworkRegistry.address)}),operator:Re["q"],payment_address:ot,price_info:et(32),version:Re["q"]}),s=ot.is(e)?Object(ft["a"])(r.functions.urls(e)):Object(M["a"])(e);return s.pipe(Object(Oc["a"])(i),Object($["a"])((function(e){var t=fp(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new dn(qt.PFS_EMPTY_URL);if(!ts(a))throw new dn(qt.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(qs["a"])(a+"/api/v1/info").pipe(Object(Is["a"])(o),Object($["a"])((function(e){return gp(n,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Xe,t.t1=c,t.t2=Aa,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,kp(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(B["a"])((function(e){var t=fp(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function wp(e,t){var n=t.log;return Object(ft["a"])(e).pipe(Object($["a"])((function(e){return jp(e,t).pipe(Object(ac["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),D["a"]})))}),5),Object(Ns["a"])(),Object(B["a"])((function(e){if(!e.length)throw new dn(qt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function _p(e){return xp(e)||Tp(e)||Pp(e)||Ep()}function Ep(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xp(e){if(Array.isArray(e))return Ip(e)}function Sp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ap(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Pp(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Rp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Np(e,t){return Mp(e)||Dp(e,t)||Pp(e,t)||Cp()}function Cp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pp(e,t){if(e){if("string"===typeof e)return Ip(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ip(e,t):void 0}}function Ip(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mp(e){if(Array.isArray(e))return e}var Lp=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Bp=R()((function(e){return Lp(void 0,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),Up=Re["n"](Re["t"]({error_code:Re["l"],errors:Re["q"]}));function Fp(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}var $p=function(e,t,n,r,a){return{sender:e,receiver:t,chain_id:Object(j["bigNumberify"])(n),amount:w["Zero"],one_to_n_address:r,expiration_block:Object(j["bigNumberify"])(a).add(2*Math.pow(10,5))}},qp=function(e,t){return Object.assign(Object.assign({},e),{amount:e.amount.add(t)})},Hp=function(e){return Object(j["concat"])([Ta(e.one_to_n_address,20),Ta(e.chain_id,32),Ta(Bo.IOU,32),Ta(e.sender,20),Ta(e.receiver,20),Ta(e.amount,32),Ta(e.expiration_block,32)])},Vp=function(e,t){return Object(ft["a"])(t.signMessage(Hp(e))).pipe(Object(B["a"])((function(t){return Object.assign(Object.assign({},e),{signature:t})})))},Wp=function(e,t,n){return Object(I["a"])((function(){var r=Fp(),a=Object(j["concat"])([e,t,Object(j["toUtf8Bytes"])(r)]);return Object(ft["a"])(n.signMessage(a)).pipe(Object(B["a"])((function(n){return{sender:e,receiver:t,timestamp:r,signature:n}})))}))},Gp=function(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.userDepositContract,c=n.latest$;return c.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var s,u=n.state,l=n.config.httpTimeout,d=null===(s=u.iou[t])||void 0===s?void 0:s[e.address];return(d?Object(M["a"])(d):Wp(r,e.address,a).pipe(Object($["a"])((function(n){return Object(qs["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(n).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Is["a"])(l))})),Object(Oc["a"])(c.pipe(Object(q["a"])("state"))),Object($["a"])((function(t){var n=Np(t,2),a=n[0],c=n[1].blockNumber;return Lp(void 0,void 0,void 0,f.a.mark((function t(){var n,s,u,l;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==a.status){t.next=10;break}return t.t0=$p,t.t1=r,t.t2=e.address,t.t3=o.chainId,t.next=7,Bp(i);case 7:return t.t4=t.sent,t.t5=c,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5));case 10:return t.next=12,a.text();case 12:if(n=t.sent,a.ok){t.next=15;break}throw new dn(qt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:a.status,responseText:n});case 15:if(s=Xe(Er,Aa(n)),u=s.last_iou,l=Object(j["verifyMessage"])(Hp(u),u.signature),l===r){t.next=19;break}throw new dn(qt.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:r});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))).pipe(Object(B["a"])((function(t){return qp(t,e.price)})),Object($["a"])((function(e){return Vp(e,a)})))})))},Kp=function(e,t,n){Rp(t);var r=n.log,a=n.latest$;return e.pipe(Object(U["a"])(jn(Vr.request)),Object(xc["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,p=e.meta,b=p.tokenNetwork,y=p.target;if(!Object.values(i.tokens).includes(b))throw new dn(qt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new dn(qt.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[Se.NO_RECEIVE])throw new dn(qt.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(M["a"])({paths:e.payload.paths,iou:void 0});if(!0===Op(i,c,b,y,y,e.meta.value))return Object(M["a"])({paths:[{path:[n.address,y],fee:w["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new dn(qt.PFS_DISABLED);var m=e.payload.pfs?Object(M["a"])(e.payload.pfs):u?jp(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return wp(e,n)})),Object(Xa["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(M["a"])({pfs:e,iou:void 0}):Gp(e,b,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(qs["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Ra({from:n.address,to:y,value:et(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:et(32).encode(a.amount),expiration_block:et(32).encode(a.expiration_block),chain_id:et(32).encode(a.chain_id)}):void 0})}).pipe(Object(Is["a"])(l),Object(B["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return Lp(void 0,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(B["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=Aa(n);return t.ok?{paths:Xe(kr,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:Xe(Up,a),iou:r}})))})),Object(Oc["a"])(a),Object($["a"])((function(t){var a=Np(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(ft["a"])(f.a.mark((function t(){var a,i,u,l,d,p,b,y,m,h,v,g,O;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,Gr({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,Kr(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new dn(qt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new dn(qt.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],p=new Set,b=Ap(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,h=m.path,v=m.fee,h[0]===n.address&&(h=h.slice(1)),g=h[0],!p.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!v.gt(d[0].fee)||"path: already selected a smaller fee":Op(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",h),p.add(g),t.abrupt("continue",30);case 29:d.push({path:h,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new dn(qt.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,Vr.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(ac["a"])((function(t){return Object(M["a"])(Vr.failure(t,e.meta))})))})))};function Zp(e){return e.pipe(sc("state","channels"),Object(xc["a"])((function(e){return Object(ft["a"])(Object.entries(e))})),Object(tc["a"])((function(e,t){var n=e.acc,r=Np(t,2),a=r[0],o=r[1];return n[a]===o?{acc:n}:{acc:Object.assign(Object.assign({},n),Sp({},a,o)),changed:o}}),{acc:{}}),Object(q["a"])("changed"),Object(U["a"])(Ye))}var Xp=function(e,t,n){Rp(e),Rp(t);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.latest$,s=n.config$;return Zp(c).pipe(Object(gc["a"])(Ya),Object(Oc["a"])(s),Object($["a"])((function(e){var t=Np(e,2),n=t[0],c=t[1].httpTimeout;return n.pipe(Object(Oc["a"])(s),Object(U["a"])((function(e){var t=Np(e,2),n=t[1].pfsRoom;return!!n})),Object(pp["a"])(c/2),Object(xc["a"])((function(e){var t=Np(e,2),n=t[0],c=t[1],s=c.revealTimeout,u=c.pfsRoom,l=n.tokenNetwork,d=n.partner.address;if(n.state!==xa.open)return D["a"];var p=Qa(n),f=p.ownCapacity,b=p.partnerCapacity,y={type:Rn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:l,channel_identifier:Object(j["bigNumberify"])(n.id)},updating_participant:a,other_participant:d,updating_nonce:n.own.balanceProof.nonce,other_nonce:n.partner.balanceProof.nonce,updating_capacity:f,other_capacity:b,reveal_timeout:Object(j["bigNumberify"])(s)};return Object(I["a"])((function(){return Qo(i,y,{log:r})})).pipe(Object(B["a"])((function(e){return gr({message:e},{roomName:u})})),Object(ac["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),D["a"]})))})))})))},Yp=function(e,t,n){var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return e.pipe(Object(U["a"])(Bn.is),Object(Oc["a"])(t,c),Object(U["a"])((function(e){var t=Np(e,3),n=t[2],r=n.pfsRoom,a=n.caps;return!!r&&!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])})),Object($["a"])((function(e){var t=Np(e,3),n=t[0],c=t[1],s=t[2].pfsRoom,u=c.channels[Ya(n.meta)];if((null===u||void 0===u?void 0:u.state)!==xa.open)return D["a"];var l={type:Rn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:n.meta.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(u.id)},updating_participant:a,timestamp:Fp(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:w["Zero"],flat:w["Zero"]}};return Object(ft["a"])(Qo(i,l,{log:r})).pipe(Object(B["a"])((function(e){return gr({message:e},{roomName:s})})),Object(ac["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),D["a"]})))})))},Qp=function(e,t,n){Rp(e),Rp(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(sc("pfs"),Object(yt["a"])((function(e){return""!==e?D["a"]:Pt(r,[r.filters.RegisteredService(null,null,null,null)],Object(M["a"])(a.ServiceRegistry.block_number)).pipe(Object(gc["a"])((function(e){var t=Np(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(yt["a"])((function(e){var t=Np(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return D["a"];var i=o.sub(a).lt(w["Two"].pow(31))?Object(M["a"])({service:n,valid:!1}).pipe(Object(Cs["a"])(new Date(o.toNumber()))):D["a"];return Object(P["a"])(Object(M["a"])({service:n,valid:!0}),i)})))})),Object(tc["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(_p(e),[n]):e}),[]),Object(cc["a"])(),Object(pp["a"])(1e3),Object(B["a"])((function(e){return Wr({pfsList:e})})))})))},zp=function(e,t,n){Rp(e),Rp(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(sc("state","blockNumber"),Object(vc["a"])((function(){return o.functions.balances(r)})),Object(cc["a"])((function(e,t){return t.eq(e)})),Object(B["a"])(Zr))};function Jp(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$;return function(e){var c=Np(e,2),s=c[0],u=c[1],l=u.monitoringRoom,d=u.monitoringReward;Ke(d);var p=s.partner.balanceProof,f=Ho(p.transferredAmount,p.lockedAmount,p.locksroot),b=Object(j["concat"])([Ta(s.tokenNetwork,20),Ta(r.chainId,32),Ta(Bo.BALANCE_PROOF_UPDATE,32),Ta(s.id,32),Ta(f,32),Ta(p.nonce,32),Ta(p.additionalHash,32),Ta(p.signature,65)]);return i.pipe(sc("udcBalance"),Object(U["a"])((function(e){return e.gte(d)})),Object(mc["a"])(1),Object($["a"])((function(){return a.signMessage(b)})),Object($["a"])((function(e){return Qo(a,{type:Rn.MONITOR_REQUEST,balance_proof:{chain_id:p.chainId,token_network_address:p.tokenNetworkAddress,channel_identifier:Object(j["bigNumberify"])(s.id),nonce:p.nonce,balance_hash:f,additional_hash:p.additionalHash,signature:p.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:d},{log:n})})),Object(B["a"])((function(e){return gr({message:e},{roomName:l})})),Object(ac["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),D["a"]})))}}var ef=function(e,t,n){return Rp(e),Rp(t),Zp(n.latest$).pipe(Object(gc["a"])(Ya),Object(Oc["a"])(n.config$),Object($["a"])((function(e){var t=Np(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(cc["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)})),Object(L["a"])(1),Object(Oc["a"])(n.config$),Object(U["a"])((function(e){var t,n=Np(e,2),r=n[0],a=n[1],o=a.monitoringRoom,i=a.monitoringReward;return!!o&&!!(null===(t=null===i||void 0===i?void 0:i.gt)||void 0===t?void 0:t.call(i,w["Zero"]))&&r.state===xa.open&&!!r.partner.balanceProof&&r.partner.balanceProof.transferredAmount.add(r.partner.balanceProof.lockedAmount).gt(w["Zero"])})),Object(pp["a"])(a/2),Object(yt["a"])(Jp(n)))})))};function tf(e,t){return cf(e)||of(e,t)||rf(e,t)||nf()}function nf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rf(e,t){if(e){if("string"===typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?af(e,t):void 0}}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function of(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cf(e){if(Array.isArray(e))return e}function sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uf(e,t,n){var r=n.defaultConfig;return Object(pt["a"])([Object(pt["a"])([e,t,t.pipe(sc("config"),Object(B["a"])((function(e){return Object.assign(Object.assign({},r),e)}))),lc(e),e.pipe(Object(U["a"])(Wr.is),Object(q["a"])("payload","pfsList"),Object(ec["a"])([])),e.pipe(Object(U["a"])(Yn.is),Object(tc["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),sf({},t.meta.address,t.payload)):Ga()(t.meta.address,e)}),{}),Object(ec["a"])({}))]),e.pipe(Object(U["a"])(Zr.is),Object(q["a"])("payload"),Object(ec["a"])(w["Zero"]))]).pipe(Object(B["a"])((function(e){var t=tf(e,2),n=tf(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=t[1];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:u}})))}var lf=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),df=function(e,t,n){var r=e.pipe(Object(U["a"])(jn(Xr))),a=e.pipe(Object(nc["a"])(ic()(jn(Xr)),!0)),o=t.pipe(Object(rc["a"])(r));return uf(a,o,n).subscribe(n.latest$),Object(ft["a"])(Object.values(lf)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(ac["a"])((function(e){return n.log.error("Fatal error:",e),Object(M["a"])(Xr({reason:e}))})),Object(rc["a"])(r))};function pf(e){return yf(e)||bf(e)||vf(e)||ff()}function ff(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function yf(e){if(Array.isArray(e))return gf(e)}function mf(e,t){return kf(e)||Of(e,t)||vf(e,t)||hf()}function hf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vf(e,t){if(e){if("string"===typeof e)return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gf(e,t):void 0}}function gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Of(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kf(e){if(Array.isArray(e))return e}function jf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _f(e,t,n){return t&&wf(e.prototype,t),n&&wf(e,n),e}var Ef=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Tf=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,p=this;jf(this,e),this.resolveName=t.resolveName.bind(t);var b=o.address;this.log=y.a.getLogger("raiden:".concat(b)),t.resetEventsBlock(o.blockNumber+1);var m=new N["a"](1);this.state$=m.pipe(sc("state")),this.action$=m.pipe(sc("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(sc("channels"),Object(B["a"])(Yc)),this.transfers$=Xc(this.state$),this.events$=this.action$.pipe(Object(U["a"])(jn(zr))),this.getTokenInfo=R()((function(e){return Ef(this,void 0,void 0,f.a.mark((function t(){var n,r,a,o,i,c,s;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ke(ot.is(e),"Invalid address"),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=mf(r,4),o=a[0],i=a[1],c=a[2],s=a[3],Ke(o&&null!=i,"Not a token contract"),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:m,config$:m.pipe(sc("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:b,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:K.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:R()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:R()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),main:c},this.userDepositTokenAddress=R()((function(){return Ef(p,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var h=Object(T["createLogger"])({predicate:function(){return p.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config=Object.assign(Object.assign({},i),o.config),this.deps.config$.subscribe((function(e){return p.config=e})),this.deps.config$.pipe(sc("logger")).subscribe((function(e){return p.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(_["b"])(Ji,o,Object(_["a"])(h,this.epicMiddleware))}return _f(e,[{key:"start",value:function(){var e=this;Ke(this.epicMiddleware,"Already started or stopped!"),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(df),this.epicMiddleware=void 0,this.store.dispatch(Yr({}))}},{key:"stop",value:function(){this.store.dispatch(Xr({reason:xe.STOP}))}},{key:"getBlockNumber",value:function(){return Ef(this,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(Yr(Xe(Ft,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Qc(this.deps,this.config.subkey).address,Ke(ot.is(e),"Invalid address"),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Ef(this,void 0,void 0,f.a.mark((function n(){var r;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:Qc(this.deps,this.config.subkey).address,Ke(ot.is(t)&&ot.is(e),"Invalid address"),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Ef(this,void 0,void 0,f.a.mark((function e(){var t=this;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Ef(this,void 0,void 0,f.a.mark((function t(){var n,r;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Ke(ot.is(e),"Invalid address"),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,Ke(r&&r!==w["AddressZero"],"Unknown token network"),this.store.dispatch(Mn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Ef(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u,l;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a.next=3,this.monitorToken(e);case 3:return o=a.sent,Ke(!n.subkey||this.deps.main,"Can't send tx from subkey if not set"),i=void 0===n.deposit?void 0:Xe(et(32),n.deposit),c={tokenNetwork:o,partner:t},s=Sn(Ln,c,this.action$,!1).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ln.request(Object.assign(Object.assign({},n),{deposit:i}),c)),a.next=11,s;case 11:return u=a.sent,null===r||void 0===r||r({type:we.OPENED,payload:{txHash:u}}),a.next=15,this.state$.pipe(sc("channels",Ya({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===xa.open}))).toPromise();case 15:if(null===r||void 0===r||r({type:we.CONFIRMED,payload:{txHash:u}}),!i){a.next=21;break}return a.next=19,Sn(Un,c,this.action$,!0).then((function(e){var t=e.txHash;return t}));case 19:l=a.sent,null===r||void 0===r||r({type:we.DEPOSITED,payload:{txHash:l}});case 21:return a.abrupt("return",u);case 22:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Ef(this,void 0,void 0,f.a.mark((function r(){var o,i,c,s,u;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state,i=o.tokens[e],Ke(i,"Unknown token network"),Ke(!a||this.deps.main,"Can't send tx from subkey if not set"),c=Xe(et(32),n),s={tokenNetwork:i,partner:t},u=Sn(Un,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Un.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Ef(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ke(o,"Unknown token network"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=Sn($n,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch($n.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Ef(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ke(o,"Unknown token network"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=Sn(Hn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Hn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Ef(this,void 0,void 0,f.a.mark((function t(){var n,r;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ke(ot.is(e),"Invalid address"),n={address:e},r=Sn(Kn,n,this.action$),this.store.dispatch(Kn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ef(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u,l,d,p,b=this;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ke(o,"Unknown token network"),i=Xe(et(32),n),c=r.paymentId?Xe(et(8),r.paymentId):li(),s=r.paths?Xe(jr,r.paths):void 0,u=r.pfs?Xe(wr,r.pfs):void 0,Ke(void 0===r.secret||rt.is(r.secret),"Invalid options.secret"),Ke(void 0===r.secrethash||nt.is(r.secrethash),"Invalid options.secrethash"),l=r.secret?r.secret:r.secrethash?void 0:ui(),d=r.secrethash||si(l),Ke(!l||si(l)===d,"Provided secrethash must match the sha256 hash of provided secret"),p={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(P["a"])(this.action$.pipe(Object(F["a"])(Tn(Vr,p)),Object(B["a"])((function(e){if(Vr.failure.is(e))throw e.payload;return e.payload.paths}))),Object(I["a"])((function(){return b.store.dispatch(Vr.request({paths:s,pfs:u},p)),D["a"]}))).pipe(Object($["a"])((function(e){return Object(P["a"])(b.action$.pipe(Object(U["a"])(jn([Sr,xr.failure])),Object(F["a"])((function(e){return e.meta.secrethash===d})),Object(B["a"])((function(e){if(xr.failure.is(e))throw e.payload;return d}))),Object(I["a"])((function(){return b.store.dispatch(xr.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:Na.SENT})),D["a"]})))}))).toPromise());case 14:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Ef(this,void 0,void 0,f.a.mark((function o(){var i,c;return f.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(Ke(nt.is(e),"Invalid secrethash for transfer"),i=this.state,Ke(e in i.sent,"Unknown secrethash"),c=yi(i.sent[e]),!c.completed){o.next=10;break}if(!c.success){o.next=9;break}return o.abrupt("return",null===(n=null===(t=this.state.sent[e].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 9:throw new dn(qt.XFER_ALREADY_COMPLETED,{status:c.status});case 10:return o.next=12,Sn(xr,{secrethash:e,direction:Na.SENT},this.action$);case 12:return i=this.state,o.abrupt("return",null===(a=null===(r=i.sent[e].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 14:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ef(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ke(o,"Unknown token network"),i=Xe(et(32),n),c=r.pfs?Xe(wr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Sn(Vr,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Vr.request({pfs:c},s)),a.abrupt("return",u);case 9:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Ef(this,void 0,void 0,f.a.mark((function r(){var a,o,i,c;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state.tokens[e],Ke(a,"Unknown token network"),o=Xe(et(32),n),i={tokenNetwork:a,target:t,value:o},c=Sn(Vr,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Vr.request({pfs:null},i)),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Ef(this,void 0,void 0,f.a.mark((function e(){var t=this;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ke(null!==this.config.pfs,"PFS disabled in config"),e.abrupt("return",(this.config.pfs?Object(M["a"])([this.config.pfs]):this.deps.latest$.pipe(sc("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return wp(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Ef(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e),"Invalid address"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),Ke("homestead"!==this.deps.network.name,"Minting is only allowed on test networks."),a=Qc(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=fe.connect(e,o),n.next=7,Jc(i,"mint",[Xe(et(32),t)],qt.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,es(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Ef(this,void 0,void 0,f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){var r=Object.values(t).filter((function(e){return e.expiration_block.gte(n)}));return e.push.apply(e,pf(r)),e}),new Array).reduce((function(e,t){return e.add(t.amount)}),w["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Ef(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c,s,u,l,d,p,b;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),a=Object(j["bigNumberify"])(e),Ke(a.gt(w["Zero"]),"Please deposit a positive amount.",this.log.debug),o=Qc(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,s=zc(this.deps.userDepositContract,i),n.t0=zc,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=i,u=(0,n.t0)(n.t3,n.t4),n.next=15,u.functions.balanceOf(c);case 15:return l=n.sent,Ke(l.gte(e),"Insufficient token balance (".concat(l,")."),this.log.debug),n.next=19,Jc(u,"approve",[s.address,a],qt.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 19:return d=n.sent,null===t||void 0===t||t({type:we.APPROVED,payload:{txHash:d.transactionHash}}),n.next=23,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 23:return p=n.sent,n.next=26,Jc(s,"deposit",[this.address,p.add(a)],qt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 26:return b=n.sent,null===t||void 0===t||t({type:we.DEPOSITED,payload:{txHash:b.transactionHash}}),n.next=30,es(b,this.deps);case 30:return this.log.debug('deposit tx "'.concat(b.transactionHash,'" confirmed')),null===t||void 0===t||t({type:we.CONFIRMED,payload:{txHash:b.transactionHash}}),n.abrupt("return",b.transactionHash);case 33:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Ef(this,void 0,void 0,f.a.mark((function n(){var o,i,c,s,u,l,d,p,b,y;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Ke(ot.is(e),"Invalid address",this.log.debug),Ke(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=Qc(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(j["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(j["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),Ke(d.gt(w["Zero"]),"Not enough balance for a transfer",this.log.error),p=d.lte(t)?d:Object(j["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:p,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:if(y=n.sent,y.status){n.next=26;break}throw new dn(qt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED);case 26:return n.abrupt("return",b.hash);case 27:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Ef(this,void 0,void 0,f.a.mark((function r(){var o,i,c,s,u,l,d;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address",this.log.debug),Ke(!a||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=Qc(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=zc(this.deps.getTokenContract(e),i),r.next=6,this.getTokenBalance(e,c);case 6:return u=r.sent,l=u.lte(n)?u:Object(j["bigNumberify"])(n),r.next=10,Jc(s,"transfer",[t,l],qt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 10:return d=r.sent,r.abrupt("return",d.transactionHash);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return Ef(this,void 0,void 0,f.a.mark((function i(){var c,s,u,l,d,p,b,y,m,h,v,g;return f.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new k["JsonRpcProvider"](e):e instanceof k["JsonRpcProvider"]?e:new k["Web3Provider"](e),Dt(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=Gc(s)),i.next=8,Zc(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,p=u.main,i.next=14,Va(s,r,d,n,a&&Xe(Ft,a));case 14:return b=i.sent,y=b.state,m=b.onState,h=b.onStateComplete,v=b.defaultConfig,Ke(d===y.address,'Mismatch between provided account and loaded state: "'.concat(d,'" !== "').concat(y.address,'"')),Ke(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,"Mismatch between network or registry address and loaded state"),g=new this(c,s,l,r,y,v,p),m&&g.state$.subscribe(m,h,h),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Te.sdk}},{key:"contractVersion",get:function(){return Te.contracts}}]),e}()},f45e:function(e,t,n){},ff61:function(e,t,n){}});
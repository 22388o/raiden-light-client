(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"2d6524bd","chunk-531a2bb8":"40f88b39","chunk-091f4f74":"7072d746","chunk-320b3e6a":"2606b62e","chunk-42bc8b47":"d826c96c","chunk-579e1ea3":"0d8ed848","chunk-89906324":"fe836cc8","chunk-08dab35b":"149d0c2e","chunk-5bd868d6":"218f7a0d","chunk-e8fa3e66":"09afdcbd","chunk-f675d0fe":"61ede158","chunk-778a1868":"fb597a46","chunk-7916f8ca":"39b5dbfd","chunk-28bce315":"5e55d01a","chunk-66c53ac6":"363ec855","chunk-08e9ead2":"0253b566","chunk-4d730eb5":"e0b861ee","chunk-f60d6c70":"9bcd06e6"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0a9c6d1a":1,"chunk-531a2bb8":1,"chunk-091f4f74":1,"chunk-320b3e6a":1,"chunk-42bc8b47":1,"chunk-579e1ea3":1,"chunk-89906324":1,"chunk-08dab35b":1,"chunk-5bd868d6":1,"chunk-e8fa3e66":1,"chunk-f675d0fe":1,"chunk-778a1868":1,"chunk-7916f8ca":1,"chunk-28bce315":1,"chunk-66c53ac6":1,"chunk-08e9ead2":1,"chunk-4d730eb5":1,"chunk-f60d6c70":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"284343a3","chunk-531a2bb8":"acc137f8","chunk-091f4f74":"3e5a8903","chunk-320b3e6a":"53c90c86","chunk-42bc8b47":"50c8bcda","chunk-579e1ea3":"976b6bb8","chunk-89906324":"1b9430cb","chunk-08dab35b":"78af775a","chunk-5bd868d6":"36154c83","chunk-e8fa3e66":"aeb39eb6","chunk-f675d0fe":"379309b5","chunk-778a1868":"d669c000","chunk-7916f8ca":"665ed9bd","chunk-28bce315":"36202238","chunk-66c53ac6":"2e5dc00b","chunk-08e9ead2":"4bd7fe88","chunk-4d730eb5":"d84f9e81","chunk-f60d6c70":"220ca184"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],d.parentNode.removeChild(d),n(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(){var e=function(e){u(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);return Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],e.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],e.prototype,"fullscreen",void 0),e=Object(o["b"])([Object(i["a"])({})],e),e}(),m=h,v=m,g=(n("e6c7"),n("2877")),O=Object(g["a"])(v,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=function(){var e=function(){function e(){y(this,e)}return m(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();return e.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},e.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},e}();t["a"]=v,r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","transaction_hash":"0xd206df08ae6d2107efcfae3c666456580f2d9b2a62d8f3fdcaa95c86e66ffbcc","block_number":5907112,"gas_cost":1980416,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","transaction_hash":"0x3ad7e5b3080fd8ef6018b296a8a87047b1a91536c2247161cd07ea5ff96a1141","block_number":5907113,"gas_cost":1530254,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8",1.157920892373162e+77]},"MonitoringService":{"address":"0x709282aE42C9Df6F156F8A92fC110Fed039DCdB3","transaction_hash":"0x7809b24fa2f04603dab3cc9f7a2a2c310f244dcbbb93960542b4f7eb15475142","block_number":5907114,"gas_cost":1949685,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1"]},"OneToN":{"address":"0x083a0411483b3Fb9eb9ccfb1F07003BF8f27D094","transaction_hash":"0x63d88efd315657d9b8e370a04f77b290d06909d5211248f5c05695539438c2e3","block_number":5907115,"gas_cost":1097569,"constructor_arguments":["0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe",4,"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=y();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(){var e=function(e){l(n,e);var t=d(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);return e=Object(r["b"])([a["a"]],e),e}();t["a"]=m},"15c8":function(e,t,n){},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534","transaction_hash":"0x9990a73964ef31276bb8c7351f056e626a7b224fd493cd6b1fd609dc0e3090d4","block_number":8758917,"gas_cost":2541738,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",4e+21,5,4,2851200,400000000000000000000,15811200]},"UserDeposit":{"address":"0x53Cc1decDD7d452c8844a5f383e23AD479A1f614","transaction_hash":"0x576e73843fd3ddbf8235463b0319c9fd41bf0a73c4cef961744812c90cddcb2a","block_number":8758920,"gas_cost":1897413,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",6.17283e+23]},"MonitoringService":{"address":"0x9a59AEe20caA038A01Cd2Ccc016573a03AE26a05","transaction_hash":"0xa22486c45333f8f6173cea9984fda357f4675e78f70417e2f0030b6b0b223898","block_number":8758927,"gas_cost":2507622,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534","0x53Cc1decDD7d452c8844a5f383e23AD479A1f614","0x8d7B9c6655D3E2D7e36a55434885e620349BE5Df"]},"OneToN":{"address":"0x6A3B8B754AdE680068669815DD2542592CF14f04","transaction_hash":"0x6fbcb6b033841e4a3918f3c63573e3cbb6b3eb218cf6b94cf67687a317907d5f","block_number":8758929,"gas_cost":1367516,"constructor_arguments":["0x53Cc1decDD7d452c8844a5f383e23AD479A1f614",1,"0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534"]}}}')},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){var t=w();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var k=function(){var e=function(e){h(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));return e=Object(o["b"])([Object(i["a"])({computed:f(f({},Object(c["c"])(["defaultAccount"])),Object(c["b"])(["pendingTransfers"]))})],e),e}(),_=k,E=_,T=(n("be88"),n("2877")),S=n("6544"),A=n.n(S),x=n("4ca6"),N=n("adda"),R=n("3a2f"),C=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=C.exports;A()(C,{VBadge:x["a"],VImg:N["a"],VTooltip:R["a"]})},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x7714DA9D9c577F0b89FE4774193d646F07b880c5","transaction_hash":"0x3377ccdc9624bd432a89b6e3d068fe8dd01949f2f52b4e0538843b88b9fbcdab","block_number":5907003,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1","transaction_hash":"0x84fcd1320182f5255b93609e17056fb84a0edf4752ca6841a8a271bea7981ce4","block_number":5907005,"gas_cost":4001114,"constructor_arguments":["0x7714DA9D9c577F0b89FE4774193d646F07b880c5",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x1d238cdacA8fFFD56F722B587aA010d6B438B077","transaction_hash":"0x3bdd7711721781ba977cf436d8cc77312e27b1467102927169e8aa6c3a3abdf0","block_number":2114518,"gas_cost":1980416,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","transaction_hash":"0xabb4bf75eb1946f6342c21959d6443140ab7378f33d9a5bdb1f3a039083b1214","block_number":2114520,"gas_cost":1530254,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952",1.157920892373162e+77]},"MonitoringService":{"address":"0x850C3E4914417eC41230177c2821B9514c2e2bC9","transaction_hash":"0x2cf29dea37d02049295ffa5ea9f744cff82995c0c547f79f6bdd7f27abeae0b4","block_number":2114521,"gas_cost":1949685,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x1d238cdacA8fFFD56F722B587aA010d6B438B077","0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526"]},"OneToN":{"address":"0xe4C2C47F070152c03a564C2c681C3FbD78234156","transaction_hash":"0xe5d1fa41d7b72feeaed494c42bd98860c49c396fe1961f9f2f5567a392018816","block_number":2114523,"gas_cost":1097569,"constructor_arguments":["0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A",5,"0x1d238cdacA8fFFD56F722B587aA010d6B438B077"]}}}')},5:function(e,t){},"51ce":function(e,t,n){},"553a":function(e,t,n){},"5d27":function(e,t,n){},"5fcf":function(e,t,n){"use strict";var r=n("5d27"),a=n.n(r);a.a},6:function(e,t){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(){var e=function(e){d(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"close",value:function(){}}]),n}(c["e"]);return Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],e.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],e.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],e.prototype,"close",null),e=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],e),e}(),O=g,w=O,j=(n("1c30"),n("2877")),k=n("6544"),_=n.n(k),E=n("8336"),T=n("b0af"),S=n("169a"),A=n("132d"),x=Object(j["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;_()(x,{VBtn:E["a"],VCard:T["a"],VDialog:S["a"],VIcon:A["a"]})},7:function(e,t){},7189:function(e,t,n){"use strict";var r=n("8620"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=h();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(){var e=function(e){f(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);return Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],e.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],e.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],e.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],e.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],e.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],e.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],e.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],e.prototype,"click",null),e=Object(o["b"])([Object(i["a"])({})],e),e}(),g=v,O=g,w=(n("c6c9"),n("2877")),j=n("6544"),k=n.n(j),_=n("8336"),E=n("62ad"),T=n("132d"),S=n("0fd9"),A=Object(w["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=A.exports;k()(A,{VBtn:_["a"],VCol:E["a"],VIcon:T["a"],VRow:S["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(){var e=function(e){u(n,e);var t=f(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);return e=Object(r["b"])([a["a"]],e),e}();t["a"]=h},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8620:function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return T}));var r=n("4795"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return d(e)||f(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function w(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function j(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?w(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?m(m({},e),{},{payload:w(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function k(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function _(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=j(n);i&&g.put(O,{logger:r,level:e,message:n},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(k)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return S.apply(this,arguments)}function S(){return S=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},9:function(e,t){},9040:function(e,t,n){"use strict";var r=n("15c8"),a=n.n(r);a.a},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(){var e=function(e){d(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return f(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);return Object(o["b"])([Object(i["d"])({required:!0})],e.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],e.prototype,"fullAddress",void 0),e=Object(o["b"])([Object(i["a"])({})],e),e}(),O=g,w=O,j=(n("a130"),n("2877")),k=n("6544"),_=n.n(k),E=n("3a2f"),T=Object(j["a"])(w,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;_()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf","transaction_hash":"0x59a02287485ff7ac0153022959f0bbe4a044242ba94bb53f7dedbafd4d35fb4e","block_number":7255736,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a","transaction_hash":"0x20ae67f204baca19726e040399ab2fc45fd3e8abdd16eb3d67abeca2eab31d45","block_number":7255738,"gas_cost":4001114,"constructor_arguments":["0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf",3,20,555428,1.157920892373162e+77]}}}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction failed.","CNL_OPENCHANNEL_FAILED":"Token networks openChannel transaction failed.","CNL_SETTOTALDEPOSIT_FAILED":"Token networks setTotalDeposit transaction failed.","CNL_CLOSECHANNEL_FAILED":"Token networks closeChannel transaction failed.","CNL_SETTLECHANNEL_FAILED":"Token networks settleChannel transaction failed.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction failed.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction failed.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction failed","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},af21:function(e,t,n){},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","transaction_hash":"0xc7bb55a286aa1dba66dc08a8197be50e8b4dc2658ff1867a998e292c30e5cc2c","block_number":7255768,"gas_cost":1980416,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","transaction_hash":"0x9f6a524f5ce39584637d2d60a9726e1f4137de10cd892b46852f1b903680f008","block_number":7255770,"gas_cost":1530254,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70",1.157920892373162e+77]},"MonitoringService":{"address":"0xFE94CfD16926af2EfD31C3F7F7d60D40180cA552","transaction_hash":"0xd3bcc2d4d6b7cf9c0d899cc6bdde3f9ebc88769c925d0c77fa736138e5d4e4f3","block_number":7255775,"gas_cost":1949685,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a"]},"OneToN":{"address":"0x69A69251f281eEf1926fdF7744BcE48163493E9f","transaction_hash":"0x70e3b1d71a77a85357c14f8e1e1b9ed73696f59025e93358a540a9bfbe9c8d7f","block_number":7255778,"gas_cost":1097569,"constructor_arguments":["0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF",3,"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("4795"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),f=n("750b"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("f15c"),y=n("66bc"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function _(e){var t=S();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var x=function(){var e=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);return Object(c["b"])([Object(s["d"])({required:!0})],e.prototype,"reason",void 0),e=Object(c["b"])([Object(s["a"])({})],e),e}(),N=x,R=N,C=(n("753f"),n("2877")),D=n("6544"),I=n.n(D),P=n("0798"),U=Object(C["a"])(R,h,m,!1,null,"7b92b083",null),L=U.exports;function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function W(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function G(e){var t=X();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}I()(U,{VAlert:P["a"]});var z=function(){var e=function(e){W(n,e);var t=G(n);function n(){var e;return q(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return V(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",F(F({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}},{key:"hasProvider",get:function(){return!!Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||b["a"].injectedWeb3Available()}}]),n}(s["e"]);return Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],e.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],e.prototype,"connecting",void 0),Object(c["b"])([Object(s["b"])()],e.prototype,"close",null),Object(c["b"])([Object(s["b"])()],e.prototype,"connect",null),e=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:f["a"],NoAccessMessage:L},computed:Object(u["c"])(["accessDenied"])})],e),e}(),J=z,ee=J,te=(n("9040"),n("99d9")),ne=Object(C["a"])(ee,d,p,!1,null,"0a49a460",null),re=ne.exports;I()(ne,{VCardText:te["c"],VCardTitle:te["d"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},oe=[],ie=n("152b");function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}function be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function he(e){var t=ge();return function(){var n,r=Oe(e);if(t){var a=Oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var we=function(){var e=function(e){be(n,e);var t=he(n);function n(){return fe(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ie["a"]));return Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],e.prototype,"onChange",null),e=Object(c["b"])([Object(s["a"])({computed:ue({},Object(u["b"])(["tokens"]))})],e),e}(),je=we,ke=je,_e=(n("1a2b"),n("8336")),Ee=n("62ad"),Te=n("a523"),Se=n("132d"),Ae=n("0fd9"),xe=Object(C["a"])(ke,ae,oe,!1,null,"4f16408a",null),Ne=xe.exports;function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,c,"next",e)}function c(e){Pe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function Fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function qe(e){var t=We();return function(){var n,r=Ke(e);if(t){var a=Ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}I()(xe,{VBtn:_e["a"],VCol:Ee["a"],VContainer:Te["a"],VIcon:Se["a"],VRow:Ae["a"]});var Ge=function(){var e=function(e){Fe(n,e);var t=qe(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e}return Be(n,[{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);return e=Object(c["b"])([Object(s["a"])({computed:De(De({},Object(u["c"])(["loading","accessDenied","stateBackup","settings"])),Object(u["b"])(["isConnected"])),components:{ActionButton:f["a"],ConnectDialog:re,NoTokens:Ne,NoAccessMessage:L}})],e),e}(),Ze=Ge,Ye=Ze,Xe=(n("7189"),n("adda")),Qe=Object(C["a"])(Ye,r,a,!1,null,"05942de6",null);t["a"]=Qe.exports;I()(Qe,{VCol:Ee["a"],VContainer:Te["a"],VImg:Xe["a"],VRow:Ae["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.9.0","contracts":"0.36.2"}')},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c7d9:function(e,t,n){"use strict";var r=n("553a"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6","transaction_hash":"0xf015b6c93951e645c45d4632dcd25de2869bd6613b5b59c53e2453c168c36447","block_number":2114499,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526","transaction_hash":"0xa77a53156131d50af579a3ab22e80af01eb3e40405292d78e80c8c4d238d4886","block_number":2114501,"gas_cost":4001114,"constructor_arguments":["0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("receiving-disabled-dialog",{attrs:{visible:e.showReceivingDisabled},on:{dismiss:function(t){e.showReceivingDisabled=!1}}})],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("2f62"),u=n("152b"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),!e.loading&&e.defaultAccount?r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.navigateToNotifications()}}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1):e._e(),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},f=[],d=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function _(e){var t=S();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var x=function(){var e=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"canGoBack",get:function(){var e=[d["a"].HOME,d["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(u["a"]));return e=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:m(m({},Object(s["c"])(["loading","defaultAccount"])),Object(s["b"])(["network","isConnected"]))})],e),e}(),N=x,R=N,C=(n("5fcf"),n("2877")),D=n("6544"),I=n.n(D),P=n("8336"),U=n("62ad"),L=n("adda"),M=n("0fd9"),B=n("2fa4"),F=Object(C["a"])(R,l,f,!1,null,"372c2478",null),$=F.exports;I()(F,{VBtn:P["a"],VCol:U["a"],VImg:L["a"],VRow:M["a"],VSpacer:B["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},H=[],V=n("0a08");function W(e){return W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function Y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function Q(e){var t=ee();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(){var e=function(e){Y(n,e);var t=Q(n);function n(){var e;return K(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Z(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);return e=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],e),e}(),re=ne,ae=re,oe=n("132d"),ie=n("2db4"),ce=Object(C["a"])(ae,q,H,!1,null,null,null),se=ce.exports;I()(ce,{VIcon:oe["a"],VSnackbar:ie["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},le=[];function fe(e){return fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}function me(e){var t=Oe();return function(){var n,r=we(e);if(t){var a=we(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var je=function(){var e=function(e){ye(n,e);var t=me(n);function n(){var e;return de(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return be(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);return e=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],e),e}(),ke=je,_e=ke,Ee=Object(C["a"])(_e,ue,le,!1,null,null,null),Te=Ee.exports;I()(Ee,{VBtn:P["a"],VSnackbar:ie["a"]});var Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("raiden-dialog",{staticClass:"receiving-disabled-dialog",attrs:{visible:e.visible},on:{close:e.dismiss}},[r("v-card-title",{staticClass:"receiving-disabled-dialog__title"},[e._v(" "+e._s(e.$t("receiving-disabled-dialog.title"))+" ")]),r("v-card-text",[r("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-img",{staticClass:"receiving-disabled-dialog__icon",attrs:{src:n("afb7"),height:"110px"}})],1),r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"receiving-disabled-dialog__description"},[r("span",[e._v(" "+e._s(e.$t("receiving-disabled-dialog.body"))+" ")])])])],1)],1)],1)},Ae=[],xe=n("66bc");function Ne(e){return Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),e}function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function Ue(e){var t=Be();return function(){var n,r=Fe(e);if(t){var a=Fe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Ne(t)&&"function"!==typeof t?Me(e):t}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}var $e=function(){var e=function(e){Ie(n,e);var t=Ue(n);function n(){return Re(this,n),t.apply(this,arguments)}return De(n,[{key:"dismiss",value:function(){}}]),n}(c["e"]);return Object(i["b"])([Object(c["d"])({required:!0,type:Boolean})],e.prototype,"visible",void 0),Object(i["b"])([Object(c["b"])()],e.prototype,"dismiss",null),e=Object(i["b"])([Object(c["a"])({components:{RaidenDialog:xe["a"]}})],e),e}(),qe=$e,He=qe,Ve=(n("c7d9"),n("99d9")),We=Object(C["a"])(He,Se,Ae,!1,null,"2055512c",null),Ke=We.exports;function Ge(e){return Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),e}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e){var t=ot();return function(){var n,r=it(e);if(t){var a=it(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}I()(We,{VCardText:Ve["c"],VCardTitle:Ve["d"],VCol:U["a"],VImg:L["a"],VRow:M["a"]});var ct=function(){var e=function(e){et(n,e);var t=nt(n);function n(){var e;return Qe(this,n),e=t.apply(this,arguments),e.showReceivingDisabled=!1,e}return Je(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"onCanReceiveChanged",value:function(e){this.showReceivingDisabled=!1===e}}]),n}(Object(c["c"])(u["a"]));return Object(i["b"])([Object(c["f"])("canReceive")],e.prototype,"onCanReceiveChanged",null),e=Object(i["b"])([Object(c["a"])({computed:Ye({},Object(s["b"])(["canReceive"])),components:{AppHeader:$,OfflineSnackbar:se,UpdateSnackbar:Te,ReceivingDisabledDialog:Ke}})],e),e}(),st=ct,ut=st,lt=(n("eb13"),n("7496")),ft=n("a523"),dt=n("a75b"),pt=Object(C["a"])(ut,a,o,!1,null,"45ab90b7",null),bt=pt.exports;I()(pt,{VApp:lt["a"],VContainer:ft["a"],VContent:dt["a"]});var yt=n("2fe1");yt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var ht=n("8c4f"),mt=n("bb51");r["a"].use(ht["a"]);var vt=new ht["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:d["a"].HOME,meta:{title:"Raiden dApp"},component:mt["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:d["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-579e1ea3"),n.e("chunk-89906324"),n.e("chunk-08dab35b"),n.e("chunk-5bd868d6")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:d["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-579e1ea3"),n.e("chunk-f675d0fe")]).then(n.bind(null,"146c"))}},{path:"/connect",name:d["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-7916f8ca")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:d["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-89906324"),n.e("chunk-08dab35b"),n.e("chunk-08e9ead2")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:d["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-89906324"),n.e("chunk-4d730eb5")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:d["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-579e1ea3"),n.e("chunk-e8fa3e66")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:d["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:d["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-f60d6c70").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:d["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:d["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-0a9c6d1a").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:d["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-778a1868")]).then(n.bind(null,"f18d"))}},{path:"backup",name:d["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-320b3e6a")]).then(n.bind(null,"248b"))}},{path:"raiden",name:d["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-66c53ac6")]).then(n.bind(null,"9114"))}},{path:"settings",name:d["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-42bc8b47")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:d["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-531a2bb8"),n.e("chunk-091f4f74")]).then(n.bind(null,"c917"))}},{path:"udc",name:d["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-28bce315")]).then(n.bind(null,"4c07"))}}]}]}),gt=vt,Ot=n("bfa9"),wt=n("f455"),jt=n("87a2"),kt=n("dd61"),_t=n.n(kt),Et=n("e9a8d"),Tt=n.n(Et),St=n("9380"),At=n.n(St),xt=n("b8ce"),Nt=n.n(xt),Rt=n("c5a2"),Ct=n.n(Rt),Dt=n("93c6"),It=n.n(Dt),Pt=n("63ea"),Ut=n.n(Pt),Lt=n("13ea"),Mt=n.n(Lt);function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){return Gt(e)||Kt(e,t)||Vt(e,t)||Ht()}function Ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(e,t){if(e){if("string"===typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gt(e){if(Array.isArray(e))return e}r["a"].use(s["a"]);var Zt={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:jt["a"].UNDEFINED,channels:{},tokens:{},transfers:{},presences:{},network:jt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{}};function Yt(){return Nt()(Zt)}var Xt=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},Qt=new Ot["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),zt={state:Yt(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=qt(r[n],2),o=a[0],i=a[1];o in e.tokens&&Ut()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=Ft(Ft({},e.tokens[o]),i):e.tokens=Ft(Ft({},e.tokens),{},$t({},o,i)))}},updatePresence:function(e,t){e.presences=Ft(Ft({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,Ft(Ft({},Yt()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=Ft(Ft({},e.transfers),{},$t({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return _t()(At()(Tt()(e.channels),(function(e){return!Mt()(e)})),(function(n){var r=Ct()(n,t,Object(jt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).sort((function(e,t){return Xt(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Mt()(r)&&(n=Tt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(wt["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===wt["b"].open}));return It()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},canReceive:function(e){var t;return!(null===(t=e.config.caps)||void 0===t?void 0:t[wt["a"].NO_RECEIVE])}},plugins:[Qt.plugin]},Jt=new s["a"].Store(zt),en=n("8aa9");yt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var tn=n("4795"),nn=n.n(tn),rn=n("f15c"),an=n("a3d5"),on=n("6934"),cn=n("5670"),sn=n("e95d"),un=n("7f4b"),ln=n.n(un);function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){return gn(e)||vn(e,t)||hn(e,t)||yn()}function yn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hn(e,t){if(e){if("string"===typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gn(e){if(Array.isArray(e))return e}function On(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function wn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){On(o,r,a,i,c,"next",e)}function c(e){On(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t,n){return t&&kn(e.prototype,t),n&&kn(e,n),e}var En=function(){function e(){jn(this,e)}return _n(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=wn(nn.a.mark((function e(t){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"contracts",value:function(){var e=wn(nn.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,f;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=bn(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=bn(s,2),l=u[0],f=u[1],e.abrupt("return",dn(dn({},l.contracts),f.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Tn=n("8404");function Sn(e){return Sn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function An(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}function xn(e){var t=In();return function(){var n,r=Ln(e);if(t){var a=Ln(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){return!t||"object"!==Sn(t)&&"function"!==typeof t?Rn(e):t}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e){var t="function"===typeof Map?new Map:void 0;return Cn=function(e){if(null===e||!Pn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Dn(e,arguments,Ln(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Un(n,e)},Cn(e)}function Dn(e,t,n){return Dn=In()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Un(o,n.prototype),o},Dn.apply(null,arguments)}function In(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Un(e,t){return Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Un(e,t)}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t){return Hn(e)||qn(e,t)||Kn(e,t)||$n()}function $n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hn(e){if(Array.isArray(e))return e}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Kn(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Kn(e,t){if(e){if("string"===typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Yn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zn(o,r,a,i,c,"next",e)}function c(e){Zn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zn(e,t,n){return t&&Qn(e.prototype,t),n&&Qn(e,n),e}var Jn=function(){function e(t){Xn(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return zn(e,[{key:"updateBalances",value:function(){var e=Yn(nn.a.mark((function e(){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=Yn(nn.a.mark((function e(){var t,n,r,a,o,i;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=Wn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokens",r),e.next=10,this.fetchTokenData(n);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=Yn(nn.a.mark((function e(t){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new ar(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Yn(nn.a.mark((function t(n,r){var a,o,i,c,s,u,l,f=this;return nn.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,En.fetch(a);case 5:return o=t.sent,t.next=8,rn["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,rn["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=51;break;case 18:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=20;break}throw new wt["f"](wt["c"].RDN_UNRECOGNIZED_NETWORK);case 20:return t.next=22,e.createRaiden(i,null===(s=o)||void 0===s?void 0:s.PRIVATE_KEY,n,r);case 22:return c=t.sent,this._raiden=c,t.next=26,this.getAccount();case 26:return u=t.sent,this.store.commit("account",u),t.next=30,c.userDepositTokenAddress();case 30:return this._userDepositTokenAddress=t.sent,c.events$.pipe(Object(cn["a"])((function(e){return"block/new"===e.type})),Object(sn["a"])((function(){return f.fetchTokenData(f.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(cn["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return f.store.commit("reset")})),c.config$.subscribe((function(e){return f.store.commit("updateConfig",e)})),c.events$.subscribe((function(e){"token/monitored"===e.type&&f.store.commit("updateTokens",Vn({},e.payload.token,{address:e.payload.token})),"matrix/presence/success"===e.type&&f.store.commit("updatePresence",Vn({},e.meta.address,e.payload.available))})),c.channels$.subscribe((function(e){f.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){f.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return f.raiden.stop()})),c.start(),t.t0=this.store,t.next=43,this.getBalance();case 43:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=51;break}return t.t2=this.store,t.next=49,this.getBalance(c.address);case 49:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 51:t.next=57;break;case 53:t.prev=53,t.t4=t["catch"](0),l=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?jt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?jt["a"].RDN_STATE_MIGRATION:t.t4 instanceof ir?jt["a"].INITIALIZATION_FAILED:jt["a"].NO_ACCOUNT,this.store.commit("accessDenied",l);case 57:this.store.commit("loadComplete");case 58:case"end":return t.stop()}}),t,this,[[0,53]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Yn(nn.a.mark((function e(){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=Yn(nn.a.mark((function e(){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Yn(nn.a.mark((function e(t){var n;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",an["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Yn(nn.a.mark((function e(t){var n,r,a,o,i,c,s,u;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=Fn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Yn(nn.a.mark((function e(t,n,r,a){var o,i;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.prev=3,e.next=6,i.openChannel(t,n,{deposit:r},(function(e){return e.type===wt["d"].OPENED?o(2,3):""}));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new nr(e.t0);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Yn(nn.a.mark((function e(t,n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new tr(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Yn(nn.a.mark((function e(t,n,r){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new rr(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Yn(nn.a.mark((function e(t,n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new er(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=Yn(nn.a.mark((function e(t){var n,r=this;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=Yn(nn.a.mark((function e(t){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Vn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,ln()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Yn(nn.a.mark((function e(t,n,r,a,o){var i;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 3:return i=e.sent,e.next=6,this.raiden.waitTransfer(i);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new or(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Yn(nn.a.mark((function e(t,n,r,a){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=Yn(nn.a.mark((function e(){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Yn(nn.a.mark((function e(t,n,r){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Yn(nn.a.mark((function e(t,n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Yn(nn.a.mark((function e(t,n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===wt["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Yn(nn.a.mark((function e(){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Yn(nn.a.mark((function e(t){var n,r;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Vn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=Yn(nn.a.mark((function e(){var t,n;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=Yn(nn.a.mark((function e(t){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(on["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=Yn(nn.a.mark((function e(t){var n;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(on["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=Yn(nn.a.mark((function e(t,n){var r;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=Yn(nn.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=Yn(nn.a.mark((function e(n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Tn["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,ln()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=Bn(Bn({},t),r[e]),delete r[e])})),i=function(){var e=Yn(nn.a.mark((function e(n){return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=Bn(Bn({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,ln()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"userDepositTokenAddress",get:function(){if(!this._userDepositTokenAddress)throw new Error("address empty");return this._userDepositTokenAddress}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=Yn(nn.a.mark((function e(t){var n,r,a,o,i=arguments;return nn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,En.contracts();case 6:return o=e.sent,e.next=9,wt["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.raidentransport.test001.env.raiden.network",matrixServer:"https://raidentransport.test001.env.raiden.network"},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new ir(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),er=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),tr=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),nr=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),rr=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),ar=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),or=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error)),ir=function(e){An(n,e);var t=xn(n);function n(){return Xn(this,n),t.apply(this,arguments)}return n}(Cn(Error));function cr(e,t){e.prototype.$raiden=new Jn(Jt)}var sr=n("103a"),ur=n.n(sr);function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t,n){return t&&fr(e.prototype,t),n&&fr(e,n),e}var pr=function(){function e(){lr(this,e),this.cache={}}return dr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=ur()(e);return this.cache[e]=n,n}}]),e}();function br(e,t){e.prototype.$identicon=new pr}var yr=n("a925");function hr(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(yr["a"]);var mr=new yr["a"]({locale:"en",fallbackLocale:"en",messages:hr()}),vr=(n("5363"),n("d1e7"),n("d4b8"),n("f309"));r["a"].use(vr["a"]);var gr=new vr["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Or=n("e508"),wr=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(wr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(en["b"])(),r["a"].use(cr),r["a"].use(br),r["a"].use(Or["a"]),new r["a"]({vuetify:gr,router:gt,store:Jt,i18n:mr,render:function(e){return e(bt)}}).$mount("#app")},d040:function(e,t,n){},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},eb13:function(e,t,n){"use strict";var r=n("d040"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"UDC Balance:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"button":"Mint and deposit","button-main":"Deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"transfer-title":"Make Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp. Your transfer will finish in the background."},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x08F730E5f5596CBd77C242cf1856Ed8B7f3f1D50","transaction_hash":"0x8036dca8fefdf6f62fab105b536eb4db243ebacc3f9327b404d92e8b1fb4a08d","block_number":8702339,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x8d7B9c6655D3E2D7e36a55434885e620349BE5Df","transaction_hash":"0x4158e45d5b0701ed285ad63ac4db5695da16e8267210165b590334a2fa50466c","block_number":8702347,"gas_cost":5054246,"constructor_arguments":["0x08F730E5f5596CBd77C242cf1856Ed8B7f3f1D50",1,500,555428,2]}}}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("4795"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){var e=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.INFURA_ENDPOINT.startsWith("http")?t.INFURA_ENDPOINT:"https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();return e.injectedWeb3Available=function(){return window.ethereum||window.web3},e}()},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return ly})),n.d(t,"b",(function(){return $a})),n.d(t,"a",(function(){return Ae})),n.d(t,"d",(function(){return ke})),n.d(t,"c",(function(){return nn})),n.d(t,"f",(function(){return an})),n.d(t,"g",(function(){return wt}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Nn})),n.d(r,"tokenMonitored",(function(){return Rn})),n.d(r,"channelOpen",(function(){return Cn})),n.d(r,"channelMonitor",(function(){return Dn})),n.d(r,"channelDeposit",(function(){return In})),n.d(r,"channelWithdrawn",(function(){return Pn})),n.d(r,"channelClose",(function(){return Un})),n.d(r,"channelSettleable",(function(){return Ln})),n.d(r,"channelSettle",(function(){return Mn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return $n})),n.d(a,"matrixPresence",(function(){return qn})),n.d(a,"matrixRoom",(function(){return Hn})),n.d(a,"matrixRoomLeave",(function(){return Vn})),n.d(a,"rtcChannel",(function(){return Wn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return br})),n.d(o,"messageGlobalSend",(function(){return yr})),n.d(o,"messageReceived",(function(){return hr}));var i={};n.r(i),n.d(i,"transfer",(function(){return Ar})),n.d(i,"transferSigned",(function(){return xr})),n.d(i,"transferProcessed",(function(){return Nr})),n.d(i,"transferSecret",(function(){return Rr})),n.d(i,"transferSecretRegister",(function(){return Cr})),n.d(i,"transferSecretRequest",(function(){return Dr})),n.d(i,"transferSecretReveal",(function(){return Ir})),n.d(i,"transferUnlock",(function(){return Pr})),n.d(i,"transferUnlockProcessed",(function(){return Ur})),n.d(i,"transferExpire",(function(){return Lr})),n.d(i,"transferExpireProcessed",(function(){return Mr})),n.d(i,"transferRefunded",(function(){return Br})),n.d(i,"transferClear",(function(){return Fr})),n.d(i,"withdrawReceive",(function(){return qr})),n.d(i,"withdrawExpired",(function(){return Hr}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Kr})),n.d(c,"pfsListUpdated",(function(){return Gr})),n.d(c,"iouPersist",(function(){return Zr})),n.d(c,"iouClear",(function(){return Yr})),n.d(c,"udcDeposited",(function(){return Xr}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return cu})),n.d(s,"initTokensRegistryEpic",(function(){return su})),n.d(s,"initMonitorChannelsEpic",(function(){return uu})),n.d(s,"initMonitorProviderEpic",(function(){return lu})),n.d(s,"tokenMonitoredEpic",(function(){return fu})),n.d(s,"channelOpenedEpic",(function(){return du})),n.d(s,"channelMonitoredEpic",(function(){return yu})),n.d(s,"channelOpenEpic",(function(){return hu})),n.d(s,"channelDepositEpic",(function(){return mu})),n.d(s,"channelCloseEpic",(function(){return vu})),n.d(s,"channelUpdateEpic",(function(){return gu})),n.d(s,"channelSettleEpic",(function(){return Ou})),n.d(s,"channelSettleableEpic",(function(){return wu})),n.d(s,"channelUnlockEpic",(function(){return ju})),n.d(s,"confirmationEpic",(function(){return _u}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return dl})),n.d(u,"matrixShutdownEpic",(function(){return pl})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Al})),n.d(u,"matrixPresenceUpdateEpic",(function(){return xl})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Nl})),n.d(u,"matrixUpdateCapsEpic",(function(){return Rl})),n.d(u,"matrixCreateRoomEpic",(function(){return Kl})),n.d(u,"matrixInviteEpic",(function(){return Gl})),n.d(u,"matrixHandleInvitesEpic",(function(){return Zl})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Yl})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Xl})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Ql})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return zl})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Jl})),n.d(u,"matrixMessageSendEpic",(function(){return pf})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return bf})),n.d(u,"matrixMessageReceivedEpic",(function(){return yf})),n.d(u,"deliveredEpic",(function(){return hf})),n.d(u,"rtcConnectEpic",(function(){return Ff}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return Gf})),n.d(l,"transferAutoExpireEpic",(function(){return nd})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Ad})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Ud})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Ld})),n.d(l,"transferMediateEpic",(function(){return Vd})),n.d(l,"transferProcessedReceivedEpic",(function(){return zd})),n.d(l,"transferProcessedSendEpic",(function(){return Jd})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return ep})),n.d(l,"transferExpireProcessedEpic",(function(){return tp})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return np})),n.d(l,"transferRefundedEpic",(function(){return dp})),n.d(l,"transferRetryMessageEpic",(function(){return Sp})),n.d(l,"transferSecretRequestedEpic",(function(){return Pp})),n.d(l,"transferSecretRevealEpic",(function(){return Lp})),n.d(l,"transferSecretRevealedEpic",(function(){return Mp})),n.d(l,"transferRequestUnlockEpic",(function(){return Bp})),n.d(l,"monitorSecretRegistryEpic",(function(){return Fp})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return $p})),n.d(l,"transferAutoRegisterEpic",(function(){return qp})),n.d(l,"transferSecretRegisterEpic",(function(){return Hp})),n.d(l,"withdrawSendConfirmationEpic",(function(){return Qp})),n.d(l,"autoExpireWithdrawEpic",(function(){return Jp}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return Cb})),n.d(f,"pfsCapacityUpdateEpic",(function(){return Db})),n.d(f,"pfsFeeUpdateEpic",(function(){return Ib})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return Pb})),n.d(f,"monitorUdcBalanceEpic",(function(){return Ub})),n.d(f,"monitorRequestEpic",(function(){return Mb}));var d=n("4795"),p=n.n(d),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),h=n("51b1"),m=n("aadd"),v=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),h["logger"].setLevel(y.a.levels.DEBUG);var O=Object(m["getRequest"])();Object(m["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("686e"),j=n("6934"),k=n("8404"),_=n("7508"),E=n("733d"),T=n("371e"),S=n("72f0"),A=n.n(S),x=n("e380"),N=n.n(x),R=n("4b96"),C=n("b2f7"),D=n("17f5"),I=n("a748"),P=n("9586"),U=n("1b92"),L=n("d263"),M=n("ebb6"),B=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}var G=function(){function e(){V(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}var pe=function(){function e(){le(this,e)}return de(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}var ve=function(){function e(){ye(this,e)}return me(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}var ke,_e=function(){function e(){Oe(this,e)}return je(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Te=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(ke||(ke={}));var Se,Ae,xe=Object(j["hexlify"])(Object(j["padZeros"])([],65));(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Se||(Se={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Ae||(Ae={}));var Ne=n("bef3"),Re=n("b047c"),Ce=n.n(Re),De=n("ffa9");function Ie(e){De["ThrowReporter"].report(e)}function Pe(e,t){var n=e.decode(t);return Ie(n),n.right}function Ue(e){return null!=e}var Le=new Ne["a"]("BigNumber",j["BigNumber"].isBigNumber,(function(e,t){var n,r;if(j["BigNumber"].isBigNumber(e))return Ne["r"](e);try{return Ne["r"](Object(j["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Ne["f"](e,t)}}),(function(e){return e.toString()})),Me=N()((function(e){return Ne["e"](Ne["q"],(function(t){return"string"===typeof t&&(e?Object(j["hexDataLength"])(t)===e:Object(j["isHexString"])(t))}),"HexString")})),Be=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Ne["e"](Le,(function(e){return Le.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Fe=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Ne["e"](Le,(function(e){return Le.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),$e=Me(65),qe=Me(32),He=Me(32),Ve=Me(32),We=new Ne["a"]("Address",(function(e){try{return Me(20).is(e)&&Object(j["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!Me(20).is(e))return Ne["f"](e,t);var n;try{n=Object(j["getAddress"])(e)}catch(r){return Ne["f"](e,t)}return n?Ne["r"](n):Ne["f"](e,t)}),Ne["g"]),Ke=N()((function(e){return Ne["s"]([Ne["l"],e])}));function Ge(e){return[Date.now(),e]}var Ze=N()((function(e){return Ne["h"]([e,Ne["n"](Ne["t"]({signature:$e}))])})),Ye=N()((function(e){return new Ne["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Ne["r"](t):Ne["f"](t,n)}),Ne["g"])})),Xe=n("6f0b"),Qe=n("9044"),ze=n("7738"),Je=n("d3fb"),et=n("4b59"),tt=n("d792"),nt=n("4d8c"),rt=n.n(nt),at=n("c707"),ot=n.n(at);function it(e,t){return ut(e)||st(e,t)||dt(e,t)||ct()}function ct(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ut(e){if(Array.isArray(e))return e}function lt(e){return bt(e)||pt(e)||dt(e)||ft()}function ft(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dt(e,t){if(e){if("string"===typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}function pt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function bt(e){if(Array.isArray(e))return yt(e)}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ht=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function mt(e,t,n){return Object(Qe["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function vt(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(lt(a),[o])}},o=U["a"],i=Object(D["a"])(-1);n&&(i=Object(P["a"])((function(){return r.blockNumber?Object(D["a"])(r.blockNumber):mt(r,"block").pipe(Object(F["a"])(),Object(M["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(et["a"])()),o=Object(ze["a"])(n,i).pipe(Object(F["a"])(),Object(tt["a"])((function(e){var n=it(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(Je["a"])(ot()(rt()(e),["blockNumber"]))})),Object(M["a"])(a),Object(B["a"])(Ue)));var c=i.pipe(Object(tt["a"])((function(){return Object(Je["a"])(t)})),Object($["a"])((function(e){return mt(r,e)})),Object(M["a"])(a),Object(B["a"])(Ue));return Object(I["a"])(o,c)}function gt(e){return ht(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Xe["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function Ot(e){var t=e.send;e.send=function(n,r){return ht(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function wt(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var jt,kt=Ne["n"](Ne["p"](Ne["q"],Ne["b"]));function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Et=Ne["t"]({urls:Ne["v"]([Ne["q"],Ne["c"](Ne["q"])])}),Tt=Ne["n"](Ne["h"]([Ne["t"]({matrixServerLookup:Ne["q"],revealTimeout:Ne["l"],settleTimeout:Ne["l"],httpTimeout:Ne["l"],discoveryRoom:Ne["v"]([Ne["q"],Ne["k"]]),pfsRoom:Ne["v"]([Ne["q"],Ne["k"]]),monitoringRoom:Ne["v"]([Ne["q"],Ne["k"]]),pfs:Ne["v"]([We,Ne["q"],Ne["k"]]),pfsSafetyMargin:Ne["l"],matrixExcessRooms:Ne["l"],confirmationBlocks:Ne["l"],monitoringReward:Ne["v"]([Ne["k"],Fe(32)]),logger:Ne["i"]((jt={},_t(jt,"",null),_t(jt,"trace",null),_t(jt,"debug",null),_t(jt,"info",null),_t(jt,"warn",null),_t(jt,"error",null),jt)),caps:Ne["v"]([Ne["k"],kt]),fallbackIceServers:Ne["c"](Et),rateToSvt:Ne["p"](Ne["q"],Fe(32))}),Ne["m"]({matrixServer:Ne["q"],subkey:Ne["d"]})])),St=Ne["n"](Ne["m"](Object.assign(Object.assign({},Tt.type.types["0"].props),Tt.type.types["1"].props)));function At(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(wt(r),"_discovery"),pfsRoom:"raiden_".concat(wt(r),"_path_finding"),monitoringRoom:"raiden_".concat(wt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(j["parseEther"])("5"),logger:"info",caps:(n={},_t(n,Ae.NO_DELIVERY,!0),_t(n,Ae.NO_MEDIATE,!0),_t(n,Ae.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var xt=n("f49b"),Nt=n.n(xt),Rt=n("3498"),Ct=n("6f95"),Dt=n("74c8"),It=n.n(Dt),Pt=n("a32b");function Ut(e){return Ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Lt(e){return $t(e)||Ft(e)||Bt(e)||Mt()}function Mt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bt(e,t){if(e){if("string"===typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function Ft(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $t(e){if(Array.isArray(e))return qt(e)}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),e}function Kt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}function Gt(e){var t=zt();return function(){var n,r=tn(e);if(t){var a=tn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!==Ut(t)&&"function"!==typeof t?Yt(e):t}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){var t="function"===typeof Map?new Map:void 0;return Xt=function(e){if(null===e||!Jt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Qt(e,arguments,tn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),en(n,e)},Xt(e)}function Qt(e,t,n){return Qt=zt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&en(o,n.prototype),o},Qt.apply(null,arguments)}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Jt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function en(e,t){return en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}var nn=Pt,rn=Ne["p"](Ne["q"],Ne["v"]([Ne["q"],Ne["l"],Ne["d"],Ne["k"]])),an=function(e){Kt(n,e);var t=Gt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ht(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(Yt(r),n.prototype),r}return Wt(n,[{key:"code",get:function(){var e,t=this;return null!==(e=It()(nn,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(Xt(Error));function on(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?Qt(an,Lt(t)):new an(null!==t&&void 0!==t?t:nn.RDN_ASSERT_ERROR,{condition:e})}var cn=Ne["h"]([Ne["t"]({name:Ne["q"]}),Ne["m"]({message:Ne["q"],stack:Ne["q"],details:rn})]),sn=new Ne["a"]("Error",(function(e){return"object"===Ut(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Ct["pipe"])(cn.decode(e),Object(Rt["map"])((function(e){return"details"in e?Object.assign(new an(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e){return bn(e)||pn(e)||dn(e)||fn()}function fn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dn(e,t){if(e){if("string"===typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,t):void 0}}function pn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function bn(e){if(Array.isArray(e))return yn(e)}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function mn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Ne["t"](Object.assign(Object.assign(Object.assign({type:Ne["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Ne["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function gn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:sn,c=vn(t,a,e),s=vn(n,o,e),u=vn(r,i,e,!0);return{request:c,success:s,failure:u}}function On(e){var t=function(t){return Nt()(t.meta,e,(function(e,t){return Le.is(e)&&Le.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function wn(e,t){var n=function(n){return mn([e.success,e.failure],n)&&On(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function jn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return wn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function kn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?jn(e,t):wn(e,t)),Object(M["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new an(nn.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function _n(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return on(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(ln(a.map((function(e){return un({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var En,Tn=Ne["q"],Sn=(Ne["q"],Ne["h"]([Ne["t"]({amount:Fe(32),expiration:Fe(32),secrethash:qe}),Ne["m"]({registered:Ne["j"](!0)})],"Lock")),An=Ne["t"]({chainId:Fe(32),tokenNetworkAddress:We,channelId:Fe(32),nonce:Fe(8),transferredAmount:Fe(32),lockedAmount:Fe(32),locksroot:qe,additionalHash:qe}),xn=Ne["t"]({tokenNetwork:We,partner:We}),Nn=vn("block/new",Ne["t"]({blockNumber:Ne["l"]})),Rn=vn("token/monitored",Ne["h"]([Ne["t"]({token:We,tokenNetwork:We}),Ne["m"]({fromBlock:Ne["l"]})])),Cn=gn(xn,"channel/open/request","channel/open/success","channel/open/failed",Ne["m"]({settleTimeout:Ne["l"],subkey:Ne["d"],deposit:Fe(32)}),Ne["t"]({id:Ne["l"],token:We,settleTimeout:Ne["l"],isFirstParticipant:Ne["d"],txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Dn=vn("channel/monitor",Ne["h"]([Ne["t"]({id:Ne["l"]}),Ne["m"]({fromBlock:Ne["l"]})]),xn),In=gn(xn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Ne["h"]([Ne["t"]({deposit:Fe(32)}),Ne["m"]({subkey:Ne["d"]})]),Ne["t"]({id:Ne["l"],participant:We,totalDeposit:Fe(32),txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Pn=vn("channel/withdraw/success",Ne["t"]({id:Ne["l"],participant:We,totalWithdraw:Fe(32),txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}),xn),Un=gn(xn,"channel/close/request","channel/close/success","channel/close/failure",Ne["v"]([Ne["m"]({subkey:Ne["d"]}),Ne["u"]]),Ne["t"]({id:Ne["l"],participant:We,txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Ln=vn("channel/settleable",Ne["t"]({settleableBlock:Ne["l"]}),xn),Mn=gn(xn,"channel/settle/request","channel/settle/success","channel/settle/failure",Ne["v"]([Ne["m"]({subkey:Ne["d"]}),Ne["u"]]),Ne["h"]([Ne["t"]({id:Ne["l"],txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}),Ne["m"]({locks:Ne["o"](Sn)})])),Bn=Ne["n"](Ne["t"]({userId:Ne["q"],accessToken:Ne["q"],deviceId:Ne["q"],displayName:Ne["q"]})),Fn=Ne["t"]({address:We}),$n=vn("matrix/setup",Ne["t"]({server:Ne["q"],setup:Bn})),qn=gn(Fn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Ne["h"]([Ne["t"]({userId:Ne["q"],available:Ne["d"],ts:Ne["l"]}),Ne["m"]({caps:Ne["p"](Ne["q"],Ne["b"])})])),Hn=vn("matrix/room",Ne["t"]({roomId:Ne["q"]}),Fn),Vn=vn("matrix/room/leave",Ne["t"]({roomId:Ne["q"]}),Fn),Wn=vn("rtc/channel",Ne["v"]([Ne["u"],Ye(RTCDataChannel)]),Fn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(En||(En={}));var Kn,Gn=Ne["n"](Ne["t"]({message_identifier:Fe(8)})),Zn=Ne["n"](Ne["t"]({type:Ne["j"](En.DELIVERED),delivered_message_identifier:Fe(8)})),Yn=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.PROCESSED)}),Gn])),Xn=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.SECRET_REQUEST),payment_identifier:Fe(8),secrethash:qe,amount:Fe(32),expiration:Fe(32)}),Gn])),Qn=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.SECRET_REVEAL),secret:He}),Gn])),zn=Ne["n"](Ne["h"]([Ne["t"]({chain_id:Fe(32),token_network_address:We,channel_identifier:Fe(32),nonce:Fe(8),transferred_amount:Fe(32),locked_amount:Fe(32),locksroot:qe}),Gn])),Jn=Ne["n"](Ne["t"]({route:Ne["o"](We)})),er=Ne["n"](Ne["t"]({routes:Ne["o"](Jn)})),tr=Ne["n"](Ne["h"]([Ne["t"]({payment_identifier:Fe(8),token:We,recipient:We,lock:Sn,target:We,initiator:We,metadata:er}),zn])),nr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.LOCKED_TRANSFER)}),tr])),rr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.REFUND_TRANSFER)}),tr])),ar=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.UNLOCK),payment_identifier:Fe(8),secret:He}),zn])),or=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.LOCK_EXPIRED),recipient:We,secrethash:qe}),zn])),ir=Ne["n"](Ne["t"]({chain_id:Fe(32),token_network_address:We,channel_identifier:Fe(32),participant:We,total_withdraw:Fe(32),nonce:Fe(8),expiration:Fe(32)})),cr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.WITHDRAW_REQUEST)}),ir,Gn])),sr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.WITHDRAW_CONFIRMATION)}),ir,Gn])),ur=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](En.WITHDRAW_EXPIRED)}),ir,Gn])),lr=Ne["n"](Ne["t"]({type:Ne["j"](En.PFS_CAPACITY_UPDATE),canonical_identifier:Ne["n"](Ne["t"]({chain_identifier:Fe(32),token_network_address:We,channel_identifier:Fe(32)})),updating_participant:We,other_participant:We,updating_nonce:Fe(8),other_nonce:Fe(8),updating_capacity:Fe(32),other_capacity:Fe(32),reveal_timeout:Fe(32)})),fr=Ne["n"](Ne["t"]({type:Ne["j"](En.PFS_FEE_UPDATE),canonical_identifier:Ne["n"](Ne["t"]({chain_identifier:Fe(32),token_network_address:We,channel_identifier:Fe(32)})),updating_participant:We,timestamp:Ne["q"],fee_schedule:Ne["t"]({cap_fees:Ne["d"],imbalance_penalty:Ne["v"]([Ne["k"],Ne["c"](Ne["s"]([Fe(32),Be(32)]))]),proportional:Be(32),flat:Be(32)})})),dr=Ne["n"](Ne["t"]({type:Ne["j"](En.MONITOR_REQUEST),balance_proof:Ne["t"]({chain_id:Fe(32),token_network_address:We,channel_identifier:Fe(32),nonce:Fe(8),balance_hash:qe,additional_hash:qe,signature:$e}),monitoring_service_contract_address:We,non_closing_participant:We,non_closing_signature:$e,reward_amount:Fe(32)})),pr=Ne["v"]([Zn,Yn,Xn,Qn,nr,rr,ar,or,cr,sr,ur,lr,fr,dr]),br=gn(Ne["t"]({address:We,msgId:Ne["q"]}),"message/send/request","message/send/success","message/send/failure",Ne["t"]({message:Ne["v"]([Ne["q"],Ze(pr)])}),void 0),yr=vn("message/global/send",Ne["t"]({message:Ne["v"]([Ne["q"],Ze(pr)])}),Ne["t"]({roomName:Ne["q"]})),hr=vn("message/received",Ne["h"]([Ne["t"]({text:Ne["q"],ts:Ne["l"]}),Ne["m"]({message:Ne["v"]([pr,Ze(pr)]),userId:Ne["q"],roomId:Ne["q"]})]),Ne["t"]({address:We})),mr=n("27f3"),vr=n.n(mr),gr=Ne["n"](Ne["h"]([Ne["t"]({result:Ne["c"](Ne["n"](Ne["t"]({path:Ne["o"](We),estimated_fee:Be(32)})))}),Ne["m"]({feedback_token:Ne["q"]})])),Or=Ne["c"](Ne["n"](Ne["t"]({path:Ne["o"](We),fee:Be(32)}))),wr=Ne["n"](Ne["t"]({address:We,url:Ne["q"],rtt:Ne["l"],price:Fe(32),token:We})),jr=Ne["n"](Ne["t"]({sender:We,receiver:We,amount:Fe(32),expiration_block:Fe(32),one_to_n_address:We,chain_id:Fe(32)})),kr=Ne["n"](Ne["t"]({last_iou:Ze(jr)})),_r={SENT:"sent",RECEIVED:"received"},Er=Ne["n"](Ne["h"]([Ne["t"]({transfer:Ke(Ze(nr)),fee:Be(32),partner:We}),Ne["m"]({secret:Ke(Ne["t"]({value:He,registerBlock:Ne["l"]})),transferProcessed:Ke(Ze(Yn)),refund:Ke(Ze(rr)),channelClosed:Ke(qe),secretRequest:Ke(Ze(Xn)),secretReveal:Ke(Ze(Qn)),unlock:Ke(Ze(ar)),lockExpired:Ke(Ze(or)),unlockProcessed:Ke(Ze(Yn)),lockExpiredProcessed:Ke(Ze(Yn))})])),Tr=Ne["n"](Ne["p"](Ne["q"],Er));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Kn||(Kn={}));var Sr=Ne["t"]({secrethash:qe,direction:Ne["i"](vr()(_r))}),Ar=gn(Sr,"transfer/request","transfer/success","transfer/failure",Ne["h"]([Ne["t"]({tokenNetwork:We,target:We,value:Fe(32),paths:Or,paymentId:Fe(8)}),Ne["m"]({secret:He,expiration:Ne["l"],initiator:We})]),Ne["m"]({balanceProof:Ze(An)})),xr=vn("transfer/signed",Ne["t"]({message:Ze(nr),fee:Be(32),partner:We}),Sr),Nr=vn("transfer/processed",Ne["t"]({message:Ze(Yn)}),Sr),Rr=vn("transfer/secret",Ne["t"]({secret:He}),Sr),Cr=gn(Sr,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Ne["h"]([Ne["t"]({secret:He}),Ne["m"]({subkey:Ne["d"]})]),Ne["t"]({secret:He,txHash:qe,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Dr=vn("transfer/secret/request",Ne["t"]({message:Ze(Xn)}),Sr),Ir=vn("transfer/secret/reveal",Ne["t"]({message:Ze(Qn)}),Sr),Pr=gn(Sr,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Ne["t"]({message:Ze(ar),partner:We})),Ur=vn("transfer/unlock/processed",Ne["t"]({message:Ze(Yn)}),Sr),Lr=gn(Sr,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Ne["t"]({message:Ze(or),partner:We})),Mr=vn("transfer/expire/processed",Ne["t"]({message:Ze(Yn)}),Sr),Br=vn("transfer/refunded",Ne["t"]({message:Ze(rr),partner:We}),Sr),Fr=vn("transfer/clear",void 0,Sr),$r=Ne["t"]({tokenNetwork:We,partner:We,totalWithdraw:Fe(32),expiration:Ne["l"]}),qr=gn($r,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Ne["t"]({message:Ze(cr)}),Ne["t"]({message:Ze(sr)}),Ne["t"]({message:Ze(ur)})),Hr=vn("withdraw/expired",Ne["t"]({participant:We}),$r),Vr=Ne["t"]({tokenNetwork:We,target:We,value:Fe(32)}),Wr=Ne["t"]({tokenNetwork:We,serviceAddress:We}),Kr=gn(Vr,"path/find/request","path/find/success","path/find/failure",Ne["m"]({paths:Or,pfs:Ne["v"]([wr,Ne["k"]])}),Ne["t"]({paths:Or})),Gr=vn("pfs/list/updated",Ne["t"]({pfsList:Ne["o"](We)})),Zr=vn("iou/persist",Ne["t"]({iou:Ze(jr)}),Wr),Yr=vn("iou/clear",void 0,Wr),Xr=vn("udc/deposited",Fe(32)),Qr=vn("raiden/shutdown",Ne["t"]({reason:Ne["v"]([Ne["j"](Se.STOP),Ne["j"](Se.ACCOUNT_CHANGED),Ne["j"](Se.NETWORK_CHANGED),sn])})),zr=vn("raiden/config/update",St),Jr=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:Qr,raidenConfigUpdate:zr},r),a),o),i),c),ea=[Jr.raidenShutdown,Jr.newBlock,Jr.matrixPresence.success,Jr.tokenMonitored],ta=[Cn.success,In.success,Pn,Un.success,Mn.success,Cr.success],na=Ne["v"]([Cn.success.codec,In.success.codec,Pn.codec,Un.success.codec,Mn.success.codec,Cr.success.codec]);function ra(e){return Object.assign(Object.assign({},e),{version:0})}function aa(e,t){return ua(e)||sa(e,t)||ia(e,t)||oa()}function oa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ia(e,t){if(e){if("string"===typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(e,t):void 0}}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ua(e){if(Array.isArray(e))return e}function la(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=aa(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function fa(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}function da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pa(e,t){return va(e)||ma(e,t)||ya(e,t)||ba()}function ba(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ya(e,t){if(e){if("string"===typeof e)return ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ma(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function va(e){if(Array.isArray(e))return e}var ga={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:k["HashZero"],additionalHash:k["HashZero"],signature:xe};function Oa(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=pa(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:ga,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function wa(e){for(var t,n={},r=function(){for(var t=pa(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=pa(s[c],2),l=u[0],f=u[1];Oa(f,{own:e.address,partner:l});var d=It()(e.tokens,(function(e){return e===r}));Object.assign(f,{token:d,tokenNetwork:r}),Object.assign(n,da({},"".concat(l,"@").concat(r),f))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function ja(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ka(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ka(e,t){if(e){if("string"===typeof e)return _a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(e,t):void 0}}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ea(e){var t,n=ja(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(j["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}var Ta=[ra,la,fa,wa,Ea],Sa=Ta.length-1;function Aa(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sa,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Ta[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var xa=n("948b"),Na=n("ad02");function Ra(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ca(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(j["bigNumberify"])(e)),"string"!==typeof e||Object(xa["isHexString"])(e)||(e=Object(j["toUtf8Bytes"])(e)),Object(xa["isArrayish"])(e)&&(e=Object(xa["hexlify"])(e)),Le.is(e)){if(e.lt(0))throw new an(nn.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new an(nn.DTA_NUMBER_TOO_LARGE);n=Object(xa["hexZeroPad"])(Object(xa["hexlify"])(e),t)}else{if("string"!==typeof e)throw new an(nn.DTA_UNENCODABLE_DATA);if(Object(xa["hexDataLength"])(e)!==t)throw new an(nn.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var Da=function(e){return null!=e&&e["isLosslessNumber"]};function Ia(e){return Na["parse"](e,(function(e,t){if(Ra(e),Da(t))try{return t.valueOf()}catch(n){return Object(j["bigNumberify"])(t.toString())}return t}))}function Pa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Ra(e),j["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return Na["stringify"](e,t,n)}var Ua,La=n("3b2b");function Ma(e){return Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ma(e)}function Ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fa,$a,qa=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ha=(Ua={},Ba(Ua,En.DELIVERED,12),Ba(Ua,En.PROCESSED,0),Ba(Ua,En.SECRET_REQUEST,3),Ba(Ua,En.SECRET_REVEAL,11),Ba(Ua,En.LOCKED_TRANSFER,7),Ba(Ua,En.REFUND_TRANSFER,8),Ba(Ua,En.UNLOCK,4),Ba(Ua,En.LOCK_EXPIRED,13),Ba(Ua,En.WITHDRAW_REQUEST,15),Ba(Ua,En.WITHDRAW_CONFIRMATION,16),Ba(Ua,En.WITHDRAW_EXPIRED,17),Ba(Ua,En.PFS_CAPACITY_UPDATE,-1),Ba(Ua,En.PFS_FEE_UPDATE,-1),Ba(Ua,En.MONITOR_REQUEST,-1),Ua);function Va(e){var t=e.routes.map((function(e){return Object(j["keccak256"])(j["RLP"].encode(e.route))}));return Object(j["keccak256"])(j["RLP"].encode(t))}function Wa(e,t,n){return e.isZero()&&t.isZero()&&n===k["HashZero"]?k["HashZero"]:Object(j["keccak256"])(Object(xa["concat"])([Ca(e,32),Ca(t,32),Ca(n,32)]))}function Ka(e){switch(e.type){case En.LOCKED_TRANSFER:case En.REFUND_TRANSFER:var t=Object(xa["concat"])([Ca(Ha[e.type],1),Ca(e.message_identifier,8),Ca(e.payment_identifier,8),Ca(e.lock.expiration,32),Ca(e.token,20),Ca(e.recipient,20),Ca(e.target,20),Ca(e.initiator,20),Ca(e.lock.secrethash,32),Ca(e.lock.amount,32)]);return e.type===En.LOCKED_TRANSFER&&(t=Object(xa["concat"])([t,Va(e.metadata)])),Object(j["keccak256"])(t);case En.UNLOCK:return Object(j["keccak256"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(e.message_identifier,8),Ca(e.payment_identifier,8),Ca(e.secret,32)]));case En.LOCK_EXPIRED:return Object(j["keccak256"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(e.message_identifier,8),Ca(e.recipient,20),Ca(e.secrethash,32)]))}}function Ga(e){var t;switch(e.type){case En.DELIVERED:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(0,3),Ca(e.delivered_message_identifier,8)]));case En.PROCESSED:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(0,3),Ca(e.message_identifier,8)]));case En.LOCKED_TRANSFER:case En.REFUND_TRANSFER:case En.UNLOCK:case En.LOCK_EXPIRED:var n=Ka(e),r=Wa(e.transferred_amount,e.locked_amount,e.locksroot);return Object(xa["hexlify"])(Object(xa["concat"])([Ca(e.token_network_address,20),Ca(e.chain_id,32),Ca(Fa.BALANCE_PROOF,32),Ca(e.channel_identifier,32),Ca(r,32),Ca(e.nonce,32),Ca(n,32)]));case En.SECRET_REQUEST:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(0,3),Ca(e.message_identifier,8),Ca(e.payment_identifier,8),Ca(e.secrethash,32),Ca(e.amount,32),Ca(e.expiration,32)]));case En.SECRET_REVEAL:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(0,3),Ca(e.message_identifier,8),Ca(e.secret,32)]));case En.WITHDRAW_REQUEST:case En.WITHDRAW_CONFIRMATION:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(e.token_network_address,20),Ca(e.chain_id,32),Ca(Fa.WITHDRAW,32),Ca(e.channel_identifier,32),Ca(e.participant,20),Ca(e.total_withdraw,32),Ca(e.expiration,32)]));case En.WITHDRAW_EXPIRED:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(Ha[e.type],1),Ca(0,3),Ca(e.nonce,32),Ca(e.message_identifier,8),Ca(e.token_network_address,20),Ca(e.chain_id,32),Ca(Fa.WITHDRAW,32),Ca(e.channel_identifier,32),Ca(e.participant,20),Ca(e.total_withdraw,32),Ca(e.expiration,32)]));case En.PFS_CAPACITY_UPDATE:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(e.canonical_identifier.chain_identifier,32),Ca(e.canonical_identifier.token_network_address,20),Ca(e.canonical_identifier.channel_identifier,32),Ca(e.updating_participant,20),Ca(e.other_participant,20),Ca(e.updating_nonce,8),Ca(e.other_nonce,8),Ca(e.updating_capacity,32),Ca(e.other_capacity,32),Ca(e.reveal_timeout,32)]));case En.PFS_FEE_UPDATE:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(e.canonical_identifier.chain_identifier,32),Ca(e.canonical_identifier.token_network_address,20),Ca(e.canonical_identifier.channel_identifier,32),Ca(e.updating_participant,20),Ca(e.fee_schedule.cap_fees,1),Ca(e.fee_schedule.flat,32),Ca(e.fee_schedule.proportional,32),Object(La["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Ca(e.timestamp,19)]));case En.MONITOR_REQUEST:return Object(xa["hexlify"])(Object(xa["concat"])([Ca(e.monitoring_service_contract_address,20),Ca(e.balance_proof.chain_id,32),Ca(Fa.MS_REWARD,32),Ca(e.balance_proof.token_network_address,20),Ca(e.non_closing_participant,20),Ca(e.non_closing_signature,65),Ca(e.reward_amount,32)]))}}function Za(e){return $e.is(e.signature)}function Ya(e){return Object(j["verifyMessage"])(Object(xa["arrayify"])(Ga(e)),e.signature)}function Xa(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:Ka(e),signature:e.signature}}function Qa(e){return Pa("signature"in e?Ze(pr).encode(e):pr.encode(e))}function za(e){var t=Ia(e);return on(t&&"object"===Ma(t)&&"type"in t&&Object.values(En).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Pe("signature"in t?Ze(pr):pr,t)}function Ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return qa(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Za(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(xa["arrayify"])(Ga(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function eo(e){return function(t){return hr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(Fa||(Fa={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}($a||($a={}));var to=Ne["n"](Ne["t"]({address:We,deposit:Fe(32),withdraw:Fe(32),locks:Ne["o"](Sn),balanceProof:Ze(An),withdrawRequests:Ne["o"](Ze(cr)),nextNonce:Fe(8)})),no=Ne["h"]([Ne["n"](Ne["t"]({id:Ne["l"],token:We,tokenNetwork:We,settleTimeout:Ne["l"],isFirstParticipant:Ne["d"],openBlock:Ne["l"],own:to,partner:to})),Ne["v"]([Ne["n"](Ne["t"]({state:Ne["v"]([Ne["j"]($a.open),Ne["j"]($a.closing)])})),Ne["h"]([Ne["n"](Ne["t"]({closeBlock:Ne["l"],closeParticipant:We})),Ne["v"]([Ne["n"](Ne["t"]({state:Ne["v"]([Ne["j"]($a.closed),Ne["j"]($a.settleable),Ne["j"]($a.settling)])})),Ne["n"](Ne["t"]({state:Ne["j"]($a.settled),settleBlock:Ne["l"]}))])])])]),ro=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ao=Ne["n"](Ne["t"]({address:We,version:Ne["j"](Sa),chainId:Ne["l"],registry:We,blockNumber:Ne["l"],config:St,channels:Ne["n"](Ne["p"](Tn,no)),oldChannels:Ne["n"](Ne["p"](Ne["q"],no)),tokens:Ne["n"](Ne["p"](Ne["q"],We)),transport:Ne["n"](Ne["m"]({server:Ne["q"],setup:Bn,rooms:Ne["n"](Ne["p"](Ne["q"],Ne["c"](Ne["q"])))})),sent:Tr,received:Tr,iou:Ne["n"](Ne["p"](Ne["q"],Ne["p"](Ne["q"],Ze(jr)))),pendingTxs:Ne["o"](na)}));function oo(e){return Pa(ao.encode(e),void 0,2)}function io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=Ia(e));var r=Aa(e,Sa,{log:n});try{return Pe(ao,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function co(e){var t,n=e.network,r=e.address,a=e.contractsInfo,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:r,version:Sa,chainId:n.chainId,registry:a.TokenNetworkRegistry.address,blockNumber:a.TokenNetworkRegistry.block_number,config:null!==(t=o.config)&&void 0!==t?t:{},channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[]}}var so=co({network:Object(j["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0}}}),uo=function(e){return e&&"function"===typeof e.getItem},lo=function(e,t,n,r,a){return ro(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,f,d,b,h,m,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),uo(r)?(u=r,l=void 0):uo(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),f=void 0,l&&(f=io(l,{log:i})),!u){o.next=23;break}return d="raiden_".concat(wt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(d);case 8:if(b=o.sent,!b){o.next=20;break}if(h=io(b,{log:i}),!f){o.next=19;break}if(!(f.blockNumber<h.blockNumber)){o.next=16;break}throw new an(nn.RDN_STATE_MIGRATION,{storedStateBlockNumber:h.blockNumber,providedStateBlockNumber:f.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(h.blockNumber," with newer provided state @blockNumber=").concat(f.blockNumber));case 17:o.next=20;break;case 19:f=h;case 20:m=Ce()((function(e){u.setItem(d,oo(e))}),1e3,{maxWait:5e3}),c=m,s=function(){return m.flush()};case 23:return f||(f=co({network:e,address:n,contractsInfo:t})),v=At({network:e},a),o.abrupt("return",{state:f,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},fo=n("9bf7"),po=n.n(fo);function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yo(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),bo({},o,s)))}}return r}}var ho=n("c4cc"),mo=n("2313"),vo=n("9f2d"),go=n("69dd"),Oo=n("742d");function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jo(e,t){return So(e)||To(e,t)||_o(e,t)||ko()}function ko(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _o(e,t){if(e){if("string"===typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function To(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function So(e){if(Array.isArray(e))return e}function Ao(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(go["a"])())}}function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(go["a"])(),Object($["a"])((function(e){return Object(Je["a"])(Object.entries(e))})),Object(Oo["a"])((function(t,n){var r=t.acc,a=jo(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),wo({},o,i)),changed:[o,i]}}),{acc:{}}),Object(q["a"])("changed"),Object(B["a"])(Ue))}}function No(e,t){return Do(e)||Co(e,t)||Uo(e,t)||Ro()}function Ro(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Co(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Do(e){if(Array.isArray(e))return e}function Io(e){return Mo(e)||Lo(e)||Uo(e)||Po()}function Po(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uo(e,t){if(e){if("string"===typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bo(e,t):void 0}}function Lo(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Mo(e){if(Array.isArray(e))return Bo(e)}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fo(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function $o(e){return"".concat(e.id,"#").concat(Fo(e))}function qo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function Ho(e){var t=k["Zero"];if(e.state!==$a.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,ownOnchainUnlocked:t,ownUnlocked:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t,partnerOnchainUnlocked:t,partnerUnlocked:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=qo.apply(void 0,[n].concat(Io(e.own.withdrawRequests.map((function(e){return e.total_withdraw}))))),f=qo.apply(void 0,[r].concat(Io(e.partner.withdrawRequests.map((function(e){return e.total_withdraw}))))),d=e.own.deposit.sub(l).sub(i).add(s),p=e.partner.deposit.sub(f).sub(c).add(u),b=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),y=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),h=a.add(b),m=o.add(y);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:d,ownOnchainUnlocked:b,ownUnlocked:h,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:p,partnerOnchainUnlocked:y,partnerUnlocked:m}}function Vo(e,t,n){var r=n.log;return function(n){return n.pipe(Object(ho["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(n){return Object(Je["a"])(n.wait()).pipe(Object(M["a"])((function(a){if(!a.status)throw new an(t,{transactionHash:n.hash});return r.debug("".concat(e,' tx "').concat(n.hash,'" successfuly mined!')),n.hash})))})))}}function Wo(e){return e.pipe(Object(q["a"])("channels"),xo(),Object(q["a"])(1),Object(mo["a"])($o,void 0,void 0,(function(){return new R["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=No(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(vo["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function Ko(e){return Ko="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function Go(e,t){return Xo(e)||Yo(e,t)||Jo(e,t)||Zo()}function Zo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xo(e){if(Array.isArray(e))return e}function Qo(e){return ti(e)||ei(e)||Jo(e)||zo()}function zo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jo(e,t){if(e){if("string"===typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}function ei(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ti(e){if(Array.isArray(e))return ni(e)}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var oi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ii=_n(so.blockNumber).handle(Nn,(function(e,t){ai(e);var n=t.payload;return n.blockNumber})),ci=_n(so.tokens).handle(Rn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return Object.assign(Object.assign({},e),ri({},r,a))})),si=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(mn(ta,t)){if(void 0===t.payload.confirmed)return[].concat(Qo(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},ui={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:{chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:k["HashZero"],additionalHash:k["HashZero"],signature:xe},withdrawRequests:[],nextNonce:k["One"]};function li(e,t){var n,r,a=Fo(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:$a.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},ui),{address:e.address}),partner:Object.assign(Object.assign({},ui),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},a,i))})}function fi(e,t){var n;if(!t.payload.confirmed)return e;var r=Fo(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==$a.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Pn.is(t)?["withdraw",t.payload.totalWithdraw,a[o].withdrawRequests.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].withdrawRequests],c=Go(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),ri({},o,Object.assign(Object.assign({},a[o]),(n={},ri(n,s,u),ri(n,"withdrawRequests",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},r,a))}))}function di(e,t){var n=Fo(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===$a.open)r=Object.assign(Object.assign({},r),{state:$a.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:$a.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},n,r))})}function pi(e,t){var n=Fo(t.meta),r=e.channels[n];if(!r)return e;if(Un.request.is(t)&&r.state===$a.open)r=Object.assign(Object.assign({},r),{state:$a.closing});else if(Mn.request.is(t)&&r.state===$a.settleable)r=Object.assign(Object.assign({},r),{state:$a.settling});else{if(!Ln.is(t)||r.state!==$a.closed)return e;r=Object.assign(Object.assign({},r),{state:$a.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},n,r))})}function bi(e,t){var n=Fo(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==$a.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},n,Object.assign(Object.assign({},r),{state:$a.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],oi(a,["symbol"===Ko(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),ri({},$o(r),Object.assign(Object.assign({},r),{state:$a.settled,settleBlock:t.payload.txBlock})))})}return e}function yi(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=Fo({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===_r.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ri({},a,Object.assign(Object.assign({},e.channels[a]),ri({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var hi=_n(so).handle(Cn.success,li).handle([In.success,Pn],fi).handle([Un.request,Ln,Mn.request],pi).handle(Un.success,di).handle(Mn.success,bi).handle(Cr.success,yi),mi=yo({blockNumber:ii,tokens:ci,pendingTxs:si},so),vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so,t=arguments.length>1?arguments[1]:void 0;return[mi,hi].reduce((function(e,n){return n(e,t)}),e)},gi=vi;function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e){return Ei(e)||_i(e)||ki(e)||ji()}function ji(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ki(e,t){if(e){if("string"===typeof e)return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(e,t):void 0}}function _i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ei(e){if(Array.isArray(e))return Ti(e)}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Si,Ai=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},xi=_n(so.transport).handle($n,(function(e,t){e.rooms;var n=Ai(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(Hn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Oi({},t.meta.address,[t.payload.roomId].concat(wi((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Vn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Oi({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Ni=yo({transport:xi},so),Ri=Ni;function Ci(e){return Pi(e)||Ii(e)||Mi(e)||Di()}function Di(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Pi(e){if(Array.isArray(e))return Bi(e)}function Ui(e,t){return $i(e)||Fi(e,t)||Mi(e,t)||Li()}function Li(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mi(e,t){if(e){if("string"===typeof e)return Bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bi(e,t):void 0}}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $i(e){if(Array.isArray(e))return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hi=(Si={},qi(Si,_r.SENT,"own"),qi(Si,_r.RECEIVED,"partner"),Si);function Vi(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Cr.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),qi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),qi({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:Ge({value:t.payload.secret,registerBlock:u})})))))),e}function Wi(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Fo({tokenNetwork:a,partner:o}),c=Hi[t.meta.direction],s=e.channels[i];if(xr.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==$a.open||!n.nonce.eq(s[c].nextNonce))return e;var u=xr.is(t)?[[].concat(Ci(s[c].locks),[t.payload.message.lock]),{transfer:Ge(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),qi({},Pr.success.is(t)?"unlock":"lockExpired",Ge(t.payload.message)))],l=Ui(u,2),f=l[0],d=l[1];return s=Object.assign(Object.assign({},s),qi({},c,Object.assign(Object.assign({},s[c]),{locks:f,balanceProof:Xa(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),qi({channels:Object.assign(Object.assign({},e.channels),qi({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),qi({},r,d))))}function Ki(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),qi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),qi({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:Ge(t.payload.message)}))))):e}function Gi(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),qi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),qi({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:Ge(t.payload.message)})))))}function Zi(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Nr.is(t))n="transferProcessed";else if(Ur.is(t))n="unlockProcessed";else if(Mr.is(t))n="lockExpiredProcessed";else{if(!Br.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),qi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),qi({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),qi({},n,Ge(t.payload.message)))))))}function Yi(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Ui(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),qi({},i,Object.assign(Object.assign({},c),{channelClosed:Ge(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,f=Object.entries(u);l<f.length;l++){var d=Ui(f[l],2),p=d[0],b=d[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),qi({},p,Object.assign(Object.assign({},b),{channelClosed:Ge(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Xi(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?(e=po()([t.meta.direction,n],e),e):e}function Qi(e,t){var n=t.payload.message,r=Fo(t.meta),a=n.participant===t.meta.partner!==qr.success.is(t)?"partner":"own",o=e.channels[r];if((null===o||void 0===o?void 0:o.state)!==$a.open||!n.nonce.eq(o[a].nextNonce))return e;var i=o[a].withdrawRequests;return qr.request.is(t)&&(i=[].concat(Ci(o[a].withdrawRequests),[t.payload.message])),o=Object.assign(Object.assign({},o),qi({},a,Object.assign(Object.assign({},o[a]),{withdrawRequests:i,nextNonce:o[a].nextNonce.add(1)}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},r,o))})}function zi(e,t){var n=Fo(t.meta),r=t.payload.participant===t.meta.partner?"partner":"own",a=e.channels[n];if((null===a||void 0===a?void 0:a.state)!==$a.open)return e;var o=a[r].withdrawRequests.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return a=Object.assign(Object.assign({},a),qi({},r,Object.assign(Object.assign({},a[r]),{withdrawRequests:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},n,a))})}var Ji=_n(so).handle([Rr,Cr.success],Vi).handle([xr,Pr.success,Lr.success],Wi).handle([Nr,Ur,Mr,Br],Zi).handle(Dr,Ki).handle(Ir,Gi).handle(Un.success,Yi).handle(Fr,Xi).handle([qr.request,qr.success,qr.failure],Qi).handle(Hr,zi),ec=Ji;function tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nc=_n(so.iou).handle(Zr,(function(e,t){return Object.assign(Object.assign({},e),tc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),tc({},t.meta.serviceAddress,t.payload.iou))))})).handle(Yr,(function(e,t){return po()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),rc=yo({iou:nc},so),ac=rc;function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e,t){return fc(e)||lc(e,t)||sc(e,t)||cc()}function cc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sc(e,t){if(e){if("string"===typeof e)return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uc(e,t):void 0}}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fc(e){if(Array.isArray(e))return e}var dc=_n(so).handle(zr,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=ic(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),oc({},c,s)):c in r&&(r=po()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),pc={configReducer:dc,channelsReducer:gi,transportReducer:Ri,transfersReducer:ec,servicesReducer:ac},bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so,t=arguments.length>1?arguments[1]:void 0;return Object.values(pc).reduce((function(e,n){return n(e,t)}),e)},yc=n("a744"),hc=n("8ef6"),mc=n("f59d"),vc=n("a0ac"),gc=n.n(vc),Oc=n("13ea"),wc=n.n(Oc),jc=n("63ea"),kc=n.n(jc);function _c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Sc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ec(e,t){return Nc(e)||xc(e,t)||Sc(e,t)||Tc()}function Tc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sc(e,t){if(e){if("string"===typeof e)return Ac(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ac(e,t):void 0}}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Nc(e){if(Array.isArray(e))return e}function Rc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cc=N()((function(e){return e.pipe(Object(B["a"])(qn.success.is),Object(Oo["a"])((function(e,t){return Object.assign(Object.assign({},e),Rc({},t.meta.address,t))}),{}),Object(et["a"])(),Object(yc["a"])({}))}));function Dc(e){return Object.entries(e).filter((function(e){var t=Ec(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=Ec(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Ic(e){var t;if(e){var n={};try{var r,a=_c(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Pc,Uc=n("808d"),Lc=n("5e53"),Mc=n("744c"),Bc=n("c575"),Fc=n("66aa"),$c=n("b7d7"),qc=n("6863"),Hc=n("e95d"),Vc=n("fcf1"),Wc=n("b4cc1"),Kc=n("0318"),Gc=n("b389"),Zc=n("0ca2"),Yc=n("cd9d"),Xc=n.n(Yc),Qc=n("8358"),zc=n("ddfd");function Jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function es(e,t){return rs(e)||ns(e,t)||os(e,t)||ts()}function ts(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ns(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rs(e){if(Array.isArray(e))return e}function as(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=os(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function os(e,t){if(e){if("string"===typeof e)return is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?is(e,t):void 0}}function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cs(e){var t,n=[],r=as(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Ca(a.expiration,32),Ca(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(j["keccak256"])(Object(xa["concat"])(n))}function ss(e){return Object(j["sha256"])(e)}function us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(xa["hexlify"])(Object(j["randomBytes"])(e))}function ls(){return Object(j["bigNumberify"])(Date.now())}function fs(){return Object(j["bigNumberify"])(Date.now())}function ds(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?_r.SENT:_r.RECEIVED}function ps(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(ds(e),":").concat(e.transfer[1].lock.secrethash)}var bs=new RegExp("^(".concat(Object.values(_r).join("|"),"):0x[a-z0-9]{64}$"),"i");function ys(e){on(bs.test(e),"Invalid transferKey format");var t=e.split(":"),n=es(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function hs(e){return function(t){return t[e]?t[e][0]:void 0}}var ms=(Pc={},Jc(Pc,Kn.expired,hs("lockExpiredProcessed")),Jc(Pc,Kn.unlocked,hs("unlockProcessed")),Jc(Pc,Kn.expiring,hs("lockExpired")),Jc(Pc,Kn.unlocking,hs("unlock")),Jc(Pc,Kn.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Jc(Pc,Kn.revealed,hs("secretReveal")),Jc(Pc,Kn.requested,hs("secretRequest")),Jc(Pc,Kn.closed,hs("channelClosed")),Jc(Pc,Kn.refunded,hs("refund")),Jc(Pc,Kn.received,hs("transferProcessed")),Jc(Pc,Kn.pending,hs("transfer")),Pc);function vs(e){for(var t,n,r,a,o=new Date(e.transfer[0]),i=o,c=Kn.pending,s=0,u=Object.entries(ms);s<u.length;s++){var l=es(u[s],2),f=l[0],d=l[1],p=d(e);if(void 0!==p){c=f,i=new Date(p);break}}var b=e.transfer[1],y=ds(e),h=b.lock.amount.sub(e.fee),m=e.secretRequest&&e.secretRequest[1].amount.lt(h),v=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(m||e.refund||e.lockExpired||e.channelClosed)&&void 0,g=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:ps(e),secrethash:b.lock.secrethash,direction:y,status:c,initiator:b.initiator,partner:e.partner,target:b.target,metadata:b.metadata,paymentId:b.payment_identifier,chainId:b.chain_id.toNumber(),token:b.token,tokenNetwork:b.token_network_address,channelId:b.channel_identifier,value:h,fee:e.fee,amount:b.lock.amount,expirationBlock:b.lock.expiration.toNumber(),startedAt:o,changedAt:i,success:v,completed:g}}var gs=n("a0df"),Os=n("31a7"),ws=n("c998"),js=n("ee79"),ks=n("b4cc"),_s=n("0ff6"),Es=n("4e0b2"),Ts=n("1f0b");function Ss(e,t){return Ns(e)||xs(e,t)||Ds(e,t)||As()}function As(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ns(e){if(Array.isArray(e))return e}function Rs(e){return Ps(e)||Is(e)||Ds(e)||Cs()}function Cs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ds(e,t){if(e){if("string"===typeof e)return Us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Us(e,t):void 0}}function Is(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ps(e){if(Array.isArray(e))return Us(e)}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ms=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Bs=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},Os.contracts),_s.contracts);case"ropsten":return Object.assign(Object.assign({},gs.contracts),ks.contracts);case"goerli":return Object.assign(Object.assign({},ws.contracts),Es.contracts);case"homestead":return Object.assign(Object.assign({},js.contracts),Ts.contracts);default:throw new an(nn.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Fs(e,t){var n,r;return Ms(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(wt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(j["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(j["sha256"])(c),u=new zc["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var $s=function(e,t,n){return Ms(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!Qc["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof zc["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new an(nn.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!We.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new an(nn.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!Ve.is(e)){r.next=37;break}a=new zc["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new an(nn.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Fs,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},qs=function(e){return e.pipe(Object($["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),xo(),Object(q["a"])(1),Object(M["a"])(vs))},Hs=function(e){return Object.values(e).reduce((function(e,t){var n=Ho(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),Ls({},t.token,Object.assign(Object.assign({},e[t.token]),Ls({},t.partner.address,c))))}),{})};function Vs(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Ws(e,t){return e.signer===t?e:e.connect(t)}function Ks(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Ms(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Rs(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new an(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,on(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new an(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function Gs(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Ms(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(Ao("state","blockNumber"),Object(Vc["a"])(a),Object(B["a"])((function(e){var t=Ss(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(Hc["a"])((function(e){var t=Ss(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new an(nn.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(Ue)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var Zs=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Ys(e){return zs(e)||Qs(e)||tu(e)||Xs()}function Xs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function zs(e){if(Array.isArray(e))return nu(e)}function Js(e,t){return au(e)||ru(e,t)||tu(e,t)||eu()}function eu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tu(e,t){if(e){if("string"===typeof e)return nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nu(e,t):void 0}}function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ru(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function au(e){if(Array.isArray(e))return e}function ou(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function iu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(P["a"])(e).pipe(Object(Fc["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(Uc["a"])(t):Object(Lc["a"])(e)})))})))}var cu=function(e,t,n){ou(e),ou(t);var r=n.provider;return iu((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),mt(r,"block"))})),Object(M["a"])((function(e){return Nn({blockNumber:e})})))},su=function(e,t,n){ou(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object($c["a"])(1),Object($["a"])((function(e){var t=j["defaultAbiCoder"].encode(["address"],[r]);return wc()(e.tokens)?iu((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(Je["a"])(e)})),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(Mc["a"])(iu((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Je["a"])),iu((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Je["a"]))).pipe(Object($c["a"])(1),Object(qc["a"])(Rn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(Je["a"])(Object.entries(e.tokens).map((function(e){var t=Js(e,2),n=t[0],r=t[1];return Rn({token:n,tokenNetwork:r})})))})))},uu=function(e,t){return ou(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,Dn({id:a.id},{tokenNetwork:a.tokenNetwork,partner:a.partner.address});case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)}))))},lu=function(e,t,n){ou(e),ou(t);var r=n.address,a=n.network,o=n.provider;return iu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(Bc["a"])(o.pollingInterval).pipe(Object(Hc["a"])((function(){return Object(I["a"])(e?iu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(D["a"])(Qr({reason:Se.ACCOUNT_CHANGED}))}))):U["a"],iu((function(){return gt(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(Qr({reason:Se.NETWORK_CHANGED})):U["a"]}))))})))})))},fu=function(e,t,n){ou(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(B["a"])(mn(Rn)),Object(mo["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(Hc["a"])((function(e){var t=a(e.payload.tokenNetwork);return vt(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(D["a"])(e.payload.fromBlock):void 0).pipe(Object(B["a"])((function(e){var t=Js(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(M["a"])((function(n){var a=Js(n,5),o=a[0],i=a[1],c=a[2],s=a[3],u=a[4];return Cn.success({id:o.toNumber(),token:e.payload.token,settleTimeout:s.toNumber(),isFirstParticipant:r===i,txHash:u.transactionHash,txBlock:u.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===i?c:i})})))})))})))},du=function(e){return e.pipe(Object(B["a"])(mn(Cn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return Dn({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))};function pu(e){var t=e.interface.events;return{depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function bu(e,t){var n=pu(e),r=n.depositTopic,a=n.withdrawTopic,o=n.closedTopic,i=n.settledTopic,c={tokenNetwork:e.address,partner:t};return function(e){var n,s,u=Js(e,2),l=u[0],f=u[1],d=l[l.length-1],p=null===(n=d.topics)||void 0===n?void 0:n[0],b=l[0].toNumber();switch(p){case r:var y=Js(l,3),h=y[1],m=y[2],v=h===t?"partner":"own";if(m.lte(f[v].deposit))break;s=In.success({id:b,participant:h,totalDeposit:m,txHash:d.transactionHash,txBlock:d.blockNumber,confirmed:void 0},c);break;case a:var g=Js(l,3),O=g[1],w=g[2],j=O===t?"partner":"own";if(w.lte(f[j].withdraw))break;s=Pn({id:b,participant:O,totalWithdraw:w,txHash:d.transactionHash,txBlock:d.blockNumber,confirmed:void 0},c);break;case o:if("closeBlock"in f)break;var k=Js(l,2),_=k[1];s=Un.success({id:b,participant:_,txHash:d.transactionHash,txBlock:d.blockNumber,confirmed:void 0},c);break;case i:s=Mn.success({id:b,txHash:d.transactionHash,txBlock:d.blockNumber,confirmed:void 0,locks:f.partner.locks},c);break}return s}}var yu=function(e,t,n){ou(e);var r=n.getTokenNetworkContract,a=n.latest$;return t.pipe(Wo,Object($["a"])((function(e){return e.pipe(Object(Hc["a"])((function(e){var t=e.tokenNetwork,n=e.partner.address,o=Fo(e),i=r(t),c=j["defaultAbiCoder"].encode(["uint256"],[e.id]),s={address:t,topics:[Object.values(pu(i)),[c]]};return vt(i,[s],Object(D["a"])(e.openBlock)).pipe(Object(Vc["a"])(a.pipe(Object(q["a"])("state","channels",o))),Object(M["a"])(bu(i,n)),Object(B["a"])(Ue),Object(Wc["a"])(Xc.a))})),Object(vo["a"])(e.pipe(Object(Kc["a"])(1))))})))},hu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(mn(Cn.request)),Object(Vc["a"])(t,u),Object($["a"])((function(t){var n,u,l=Js(t,3),f=l[0],d=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,h=f.meta,m=h.tokenNetwork,v=h.partner,g=null===(n=d.channels[Fo(f.meta)])||void 0===n?void 0:n.state;if(g)return Object(D["a"])(Cn.failure(new an(nn.CNL_INVALID_STATE,{state:g}),f.meta));var O=Vs({signer:a,address:o,main:i},null!==(u=f.payload.subkey)&&void 0!==u?u:y),w=O.signer,j=O.address,k=Ws(s(m),w),_=!f.payload.deposit||f.payload.deposit.isZero()?void 0:f.payload.deposit,E=It()(d.tokens,(function(e){return e===m})),T=Ws(c(E),w);return e.pipe(Object(B["a"])(Cn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===m&&e.meta.partner===v})),Object(Gc["a"])(1,void 0,(function(e){return Object(P["a"])((function(){var e;return k.functions.openChannel(o,v,null!==(e=f.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object(ho["a"])((function(e){return r.debug('sent openChannel tx "'.concat(e.hash,'" to "').concat(m,'"'))})),Object($["a"])((function(e){return _?Object(Je["a"])(T.functions.allowance(j,m)).pipe(Object($["a"])((function(t){return t.gte(_)?Object(D["a"])([e,!1]):Object(Je["a"])(T.functions.approve(m,_)).pipe(Object(ho["a"])((function(e){return r.debug('sent approve tx "'.concat(e.hash,'" to "').concat(E,'"'))})),Object(M["a"])((function(t){return[e,t]})))}))):Object(D["a"])([e])})),Object($["a"])((function(e){var t=Js(e,2),n=t[0],r=t[1];return Object(ze["a"])([Object(Je["a"])(n.wait()),r?Object(Je["a"])(r.wait()):Object(D["a"])(r)])})),Object($["a"])((function(t){var n=Js(t,2),a=n[0],i=n[1];if(!a.status)throw new an(nn.CNL_OPENCHANNEL_FAILED,Object.assign(Object.assign({},f.meta),{transactionHash:a.transactionHash}));return r.debug('openChannel tx "'.concat(a.transactionHash,'" successfuly mined!')),(void 0===i?U["a"]:Object(D["a"])(i)).pipe(Object($["a"])((function(t){if(!1!==t){if(!t.status)throw new an(nn.CNL_APPROVE_TRANSACTION_FAILED,{token:E,transactionHash:t.transactionHash});r.debug('approve tx "'.concat(t.transactionHash,'" successfuly mined!'))}return e.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.payload.id;return k.functions.setTotalDeposit(t,o,_,v)})))})),Vo("setTotalDeposit",nn.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return Object(D["a"])(In.failure(e,f.meta))})))})),Object(mc["a"])((function(e){return Object(D["a"])(Cn.failure(e,f.meta))})))})))})))},mu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(mn(In.request)),Object(Vc["a"])(t,u),Object($["a"])((function(e){var t,n=Js(e,3),u=n[0],l=n[1],f=n[2].subkey,d=u.meta,p=d.tokenNetwork,b=d.partner,y=Fo(u.meta),h=l.channels[y];if((null===h||void 0===h?void 0:h.state)!==$a.open){var m=new an(nn.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(D["a"])(In.failure(m,u.meta))}var v=Vs({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:f),g=v.signer,O=v.address,w=Ws(c(h.token),g),j=Ws(s(p),g);return Object(P["a"])((function(){return Promise.all([j.functions.getChannelParticipantInfo(h.id,o,b),w.functions.allowance(O,p)])})).pipe(Object($["a"])((function(e){var t=Js(e,2),n=t[0][0],a=t[1];return Object(P["a"])((function(){return a.gte(u.payload.deposit)?Object(D["a"])(!1):Object(Je["a"])(w.functions.approve(p,u.payload.deposit)).pipe(Vo("approve",nn.CNL_APPROVE_TRANSACTION_FAILED,{log:r}))})).pipe(Object($["a"])((function(){return j.functions.setTotalDeposit(h.id,o,u.payload.deposit.add(n),b)})),Vo("setTotalDeposit",nn.CNL_SETTOTALDEPOSIT_FAILED,{log:r}))})),Object(Zc["a"])(),Object(mc["a"])((function(e){return Object(D["a"])(In.failure(e,u.meta))})))})))},vu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(mn(Un.request)),Object(Vc["a"])(t,u),Object($["a"])((function(e){var t,n,u=Js(e,3),l=u[0],f=u[1],d=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,h=Vs({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),m=h.signer,v=Ws(s(b),m),g=f.channels[Fo(l.meta)];if((null===g||void 0===g?void 0:g.state)!==$a.open&&(null===g||void 0===g?void 0:g.state)!==$a.closing){var O=new an(nn.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(D["a"])(Un.failure(O,l.meta))}var w=g.partner.balanceProof,k=Wa(w.transferredAmount,w.lockedAmount,w.locksroot),_=w.nonce,E=w.additionalHash,T=w.signature,S=Object(j["concat"])([Ca(b,20),Ca(c.chainId,32),Ca(Fa.BALANCE_PROOF,32),Ca(g.id,32),Ca(k,32),Ca(_,32),Ca(E,32),Ca(T,65)]);return Object(Je["a"])(a.signMessage(S)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,k,_,E,T,e)})),Vo("closeChannel",nn.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return Object(D["a"])(Un.failure(e,l.meta))})))})))},gu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(mn(Un.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(B["a"])(Nn.is),Object(L["a"])(1),Object($c["a"])(1),Object(qc["a"])(t))})),Object(Vc["a"])(t,u),Object(B["a"])((function(e){var t=Js(e,2),n=t[0],r=t[1],a=r.channels[Fo(n.meta)];return(null===a||void 0===a?void 0:a.state)===$a.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=Js(e,3),n=t[0],u=t[1],l=t[2].subkey,f=n.meta,d=f.tokenNetwork,p=f.partner,b=Vs({signer:a,address:o,main:i},l),y=b.signer,h=Ws(s(d),y),m=u.channels[Fo(n.meta)],v=Wa(m.partner.balanceProof.transferredAmount,m.partner.balanceProof.lockedAmount,m.partner.balanceProof.locksroot),g=m.partner.balanceProof.nonce,O=m.partner.balanceProof.additionalHash,w=m.partner.balanceProof.signature,k=Object(j["concat"])([Ca(d,20),Ca(c.chainId,32),Ca(Fa.BALANCE_PROOF_UPDATE,32),Ca(m.id,32),Ca(v,32),Ca(g,32),Ca(O,32),Ca(w,65)]);return Object(Je["a"])(a.signMessage(k)).pipe(Object($["a"])((function(e){return h.functions.updateNonClosingBalanceProof(m.id,p,o,v,g,O,w,e)})),Vo("updateNonClosingBalanceProof",nn.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},Ou=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(mn(Mn.request)),Object(Vc["a"])(t,s),Object($["a"])((function(e){var t,n,s=Js(e,3),u=s[0],l=s[1],f=s[2].subkey,d=u.meta.tokenNetwork,p=Vs({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),b=p.signer,y=Ws(c(d),b),h=l.channels[Fo(u.meta)];if((null===h||void 0===h?void 0:h.state)!==$a.settleable&&(null===h||void 0===h?void 0:h.state)!==$a.settling){var m=new an(nn.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(D["a"])(Mn.failure(m,u.meta))}var v=h.own,g=h.partner;if(g.balanceProof.transferredAmount.add(g.balanceProof.lockedAmount).lt(v.balanceProof.transferredAmount.add(v.balanceProof.lockedAmount))){var O=[g,v];v=O[0],g=O[1]}return Object(Je["a"])(y.functions.settleChannel(h.id,v.address,v.balanceProof.transferredAmount,v.balanceProof.lockedAmount,v.balanceProof.locksroot,g.address,g.balanceProof.transferredAmount,g.balanceProof.lockedAmount,g.balanceProof.locksroot)).pipe(Vo("settleChannel",nn.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return Object(D["a"])(Mn.failure(e,u.meta))})))})))},wu=function(e,t){return e.pipe(Object(B["a"])(mn(Nn)),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Js(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===$a.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Ln({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},ju=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(mn(Mn.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Vc["a"])(t,s),Object(B["a"])((function(e){var t,n=Js(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Fo(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=Js(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,f=u.partner,d=Ws(c(l),Vs({signer:a,address:o,main:i},s).signer),p=Object(j["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Ys(e),[Ca(t.expiration,32),Ca(t.amount,32),t.secrethash])}),[]));return Object(Je["a"])(d.functions.unlock(n.payload.id,o,f,p)).pipe(Vo("unlock",nn.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function ku(e,t,n,r){return iu((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:t.blockNumber,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(B["a"])(Ue))}var _u=function(e,t,n){ou(e);var r=n.config$,a=n.provider;return Object(ze["a"])(t.pipe(Ao("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(Ao("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=Js(e,2),n=t[1];return n.length>0})),Object(Hc["a"])((function(e){var t=Js(e,3),n=t[0],r=t[1],o=t[2];return Mc["a"].apply(void 0,Ys(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return ku(e,a,n,o)}))))})))},Eu=n("47ea"),Tu=n("bee6"),Su=n("d337"),Au=n("b4d5"),xu=n("3e18"),Nu=n("d96a"),Ru=n("2527"),Cu=n("fc5d");function Du(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Iu(e,t){var n=Object(Cu["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Pu=n("6e77"),Uu=n("dc46"),Lu=n.n(Uu);function Mu(e,t){return Hu(e)||qu(e,t)||Fu(e,t)||Bu()}function Bu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fu(e,t){if(e){if("string"===typeof e)return $u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$u(e,t):void 0}}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hu(e){if(Array.isArray(e))return e}function Vu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Wu(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Ue)}var Ku=Lu()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Gu(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Ku(t))),n?Object(D["a"])(n):Object(Pu["a"])(e,"Room").pipe(Object(B["a"])(Ku(t)),Object($c["a"])(1))}function Zu(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object($c["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(Ue),Object(go["a"])(),Object(tt["a"])((function(n){return Gu(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(go["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(tt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return U["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(Pu["a"])(t,"RoomMember.membership",(function(e,t){return Vu(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object($c["a"])(1),Object($["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(qc["a"])("string"===typeof e?e:e.label),Object(Fc["a"])((function(e){return e.pipe(Object(Vc["a"])(c),Object($["a"])((function(e,t){var n=Mu(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Uc["a"])(a/u)):Object(Lc["a"])(r)})))})))})))}function Yu(e,t,n){var r=n.log;if("string"===typeof e)try{var a=za(e);if("signature"in a){var o=Ya(a);if(o!==t)throw new an(nn.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function Xu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Qu(e,t){return nl(e)||tl(e,t)||Ju(e,t)||zu()}function zu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ju(e,t){if(e){if("string"===typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,t):void 0}}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nl(e){if(Array.isArray(e))return e}var rl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},al="RAIDEN";function ol(e,t){var n=Du(t.getHomeserverUrl());return Object(Je["a"])(Wu(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new m["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),r}))})),Object(q["a"])("roomId"),Object(Eu["a"])())}function il(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function cl(e,t,n,r){return e.pipe(Object(B["a"])($n.is),Object($c["a"])(1),Object(ho["a"])((function(){n.next(t),n.complete()})),Object(Tu["a"])(1e3),Object(Vc["a"])(r),Object($["a"])((function(e){var n=Qu(e,2),r=n[1];return ol(r,t).pipe(Object($["a"])((function(e){return il(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(Zc["a"])())}function sl(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function ul(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(Ru["a"])(e+"/_matrix/client/versions").pipe(Object(Su["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(mc["a"])((function(){return Object(D["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function ll(e,t){var n=this;return Object(Ru["a"])(e).pipe(Object($["a"])((function(t){return rl(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return on(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Su["a"])(t),Object($["a"])((function(e){return sl(e)})),Object($["a"])((function(e){return ul(e,t)})),Object(Eu["a"])(),Object($["a"])((function(e){return ot()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Au["a"])((function(){return new an(nn.TRNS_NO_MATRIX_SERVERS)})))}function fl(e,t,n,r){var a=n.address,o=n.signer,i=Du(e);if(!i)throw new an(nn.TRNS_NO_SERVERNAME,{server:e});return Object(P["a"])((function(){if(t){var n=Object(m["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:n,server:e,setup:t})}var r=Object(m["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(Je["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(Je["a"])(r.login("m.login.password",{user:c,password:e,device_id:al})).pipe(Object(mc["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(Je["a"])(o.signMessage(s)).pipe(Object(M["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(Je["a"])(t.setDisplayName(a.displayName)),Object(Je["a"])(t.setAvatarUrl(r&&!wc()(r)?Dc(r):""))).pipe(Object(qc["a"])({matrix:t,server:n,setup:a}))})))}var dl=function(e,t,n){Xu(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(ze["a"])([i,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=Qu(e,2),o=n[0].state,i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,f=o.transport.server,d=o.transport.setup,p=[];c?(c===f&&p.push(Object(D["a"])({server:f,setup:d})),p.push(Object(D["a"])({server:c}))):(f&&p.push(Object(D["a"])({server:f,setup:d})),p.push(ll(s,u)));var b=function(e){return t=e,U["a"]};return Object(P["a"])((function(){return p.shift()||U["a"]})).pipe(Object(mc["a"])(b),Object(xu["a"])((function(e){var t=e.server,n=e.setup;return fl(t,n,{address:r,signer:a},l).pipe(Object(mc["a"])(b))})),Object(F["a"])(),Object(ho["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(Fc["a"])((function(e){return e.pipe(Object($["a"])((function(){return p.length?Object(D["a"])(null):Object(Lc["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(cl(e,n,o,c),Object(D["a"])($n({server:r,setup:a})),c.pipe(Ao("logger"),Object(ho["a"])((function(e){return h["logger"].setLevel(e||"silent",!1)})),Object(Zc["a"])()))})))},pl=function(e,t,n){Xu(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Nu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Zc["a"])())},bl=n("80f6"),yl=n.n(bl);function hl(e,t){return gl(e)||vl(e,t)||jl(e,t)||ml()}function ml(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gl(e){if(Array.isArray(e))return e}function Ol(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function wl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=jl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function jl(e,t){if(e){if("string"===typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kl(e,t):void 0}}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _l=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},El=["online","unavailable"],Tl=/^@(0x[0-9a-f]{40})[.:]/i;function Sl(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=wl(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Tl.exec(i.user_id),c&&Object(j["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(j["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Iu(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(Ue),Object(Eu["a"])(),Object(M["a"])((function(e){if(!e.length)throw new an(nn.TRNS_NO_VALID_USER,{address:t});return yl()(e,"last_active_ago")})))}var Al=function(e,t,n){Ol(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(mn(qn.request)),Object($["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(mo["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Vc["a"])(a.pipe(Ao("presences"))),Object(Hc["a"])((function(e){var t=hl(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):Sl(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return qn.success({userId:n,available:El.includes(t),ts:Date.now(),caps:Ic(a)},r.meta)})),Object(mc["a"])((function(e){return Object(D["a"])(qn.failure(e,r.meta))})))})))})))},xl=function(e,t,n){Ol(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(tt["a"])((function(e){return Object(Pu["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{on(null===a||void 0===a?void 0:a.presence);var o=null===(t=Tl.exec(a.userId))||void 0===t?void 0:t[1];on(o);var i=Object(j["getAddress"])(o);return on(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(Ue),Object(Vc["a"])(e.pipe(Object(B["a"])(qn.request.is),Object(Oo["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(yc["a"])(new Set))),Object(B["a"])((function(e){var t=hl(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=hl(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=El.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;on(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(j["verifyMessage"])(c,e.displayname);return on(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),qn.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Ic(e.avatar_url)},{address:n})})),Object(mc["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),U["a"]})))}))).pipe(Object(Vc["a"])(o),Object(B["a"])((function(e){var t=hl(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},Nl=function(e){return e.pipe(Object(B["a"])(Dn.is),Object(M["a"])((function(e){return qn.request(void 0,{address:e.meta.partner})})))},Rl=function(e,t,n){Ol(e),Ol(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(q["a"])("caps"),Object(go["a"])(kc.a),Object(L["a"])(1),Object($["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object($["a"])((function(e){var t=hl(e,2),n=t[0],r=t[1];return _l(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!wc()(n)?Dc(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(Zc["a"])())},Cl=n("59b7"),Dl=n("a2ef"),Il=n("2769"),Pl=n.n(Il);function Ul(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Fl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ll(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ml(e,t){return Hl(e)||ql(e,t)||Fl(e,t)||Bl()}function Bl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fl(e,t){if(e){if("string"===typeof e)return $l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$l(e,t):void 0}}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ql(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hl(e){if(Array.isArray(e))return e}var Vl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Wl(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(Pu["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object($c["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Vc["a"])(r),Object($["a"])((function(r){var a=Ml(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(Wc["a"])((function(e){return e.pipe(Object(Tu["a"])(i))})),Object(vo["a"])(Object(Pu["a"])(e,"RoomMember.membership",(function(e,t){return Ll(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var Kl=function(e,t,n){Ll(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])(mn([xr,Dn,br.request,Vn])),Object(M["a"])((function(e){var t;switch(e.type){case xr.type:e.meta.direction===_r.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===_r.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Dn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(Ue),Object(mo["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Hc["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object($c["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return Hn({roomId:n},{address:t})})),Object(mc["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},Gl=function(e,t,n){Ll(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(mn(qn.success)),Object(mo["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Vc["a"])(r),Object(tt["a"])((function(e){var t=Ml(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(go["a"])(),Object(tt["a"])((function(e){return Object(Mc["a"])(Object(D["a"])(e),e?Object(Pu["a"])(r,"RoomMember.membership",(function(e,t){return Ll(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(qc["a"])(e)):U["a"])})),Object(tt["a"])((function(e){return e?Wl(r,e,n.payload.userId,a,{log:i}):U["a"]}))):U["a"]})))})),Object(Zc["a"])())},Zl=function(e,t,n){Ll(e),Ll(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(tt["a"])((function(e){return Object(Pu["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Vc["a"])(o),Object($["a"])((function(e){var t=Ml(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Ao("presences"),Object(M["a"])((function(e){return Pl()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(Ue),Object($c["a"])(1),Object(vo["a"])(Object(Uc["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Je["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(qc["a"])(Hn({roomId:n.roomId},{address:a.meta.address})),Object(mc["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},Yl=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(mn(Hn)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Vc["a"])(t,o),Object($["a"])((function(e){var t,n,a=Ml(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Je["a"])(l.filter((function(e,t){return Ll(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return Vn({roomId:e},i.meta)})))})))},Xl=function(e,t,n){Ll(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(tt["a"])((function(e){return Object(Pu["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(Cl["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(Uc["a"])(t)})))})),Object(Vc["a"])(t,o),Object(B["a"])((function(e){var t,n=Ml(e,3),r=n[0],a=r.matrix,o=r.roomId,i=n[1].transport,c=n[2],s=a.getRoom(o);if(!s)return!1;var u=Wu(c);if(s.name&&u.some((function(e){return s.name.match("#".concat(e,":"))})))return!1;for(var l=0,f=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});l<f.length;l++){var d,p=f[l],b=Ul(p);try{for(b.s();!(d=b.n()).done;){var y=d.value;if(y===s.roomId)return!1}}catch(h){b.e(h)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=Ml(e,1),n=t[0],a=n.matrix,o=n.roomId;return Vl(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(Zc["a"])())},Ql=function(e,t,n){Ll(e);var r=n.log,a=n.matrix$;return a.pipe(Object(tt["a"])((function(e){return Object(Pu["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,d,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ml(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Ml(s[c],2),l=u[0],f=u[1],d=Ul(f),e.prev=5,d.s();case 7:if((b=d.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Vn({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),d.e(e.t0);case 20:return e.prev=20,d.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},zl=function(e,t,n){Ll(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Ao("transport","rooms"),Object(B["a"])(Ue),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Ml(r[n],2),o=a[0],i=a[1],c=Ul(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Dl["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Vc["a"])(o),Object($["a"])((function(e){var t=Ml(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Gu(i,a).pipe(Object(Su["a"])(c),Object(Zc["a"])(),Object(mc["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(Vn({roomId:a},{address:o}))})))})))},Jl=function(e,t){return e.pipe(Object(B["a"])(hr.is),Object(Vc["a"])(t),Object(B["a"])((function(e){var t,n,r=Ml(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=Ml(e,1),n=t[0];return Hn({roomId:n.payload.roomId},n.meta)})))};function ef(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nf(e,t,n){return t&&tf(e.prototype,t),n&&tf(e,n),e}var rf=function(){function e(t){ef(this,e),this.values=new Map,this.max=t}return nf(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function af(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=sf(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function of(e,t){return ff(e)||lf(e,t)||sf(e,t)||cf()}function cf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sf(e,t){if(e){if("string"===typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ff(e){if(Array.isArray(e))return e}function df(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var pf=function(e,t,n){df(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(mn(br.request)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(mo["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(xu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Qa(t.payload.message),c={body:a,msgtype:"m.text"};return Zu(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(qc["a"])(br.success(void 0,t.meta)),Object(mc["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(br.failure(e,t.meta))})))})))})))},bf=function(e,t,n){df(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(mn(yr)),Object($["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Vc["a"])(o),Object($["a"])((function(e){var t=of(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Wu(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=Du(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Gu(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Qa(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(mc["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(Zc["a"])())},yf=function(e,t,n){df(e),df(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(tt["a"])((function(e){return Object(Pu["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Vc["a"])(o),Object(B["a"])((function(e){var t,n,r=of(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Wu(s).some((function(e){return Ku("#".concat(e,":").concat(Du(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=of(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Pl()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object($c["a"])(1),Object(vo["a"])(Object(Uc["a"])(c)),Object($["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Pl()(n,["payload.userId",a.getSender()]),s=af((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,f=Yu(l,c.meta.address,{log:r}),e.next=10,hr({text:l,message:f,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},hf=function(e,t,n){df(t);var r=n.log,a=n.signer,o=n.latest$,i=new rf(32);return e.pipe(Object(B["a"])(eo([Ze(Yn),Ze(Xn),Ze(Qn)])),Object(Vc["a"])(o),Object(B["a"])((function(e){var t,n=of(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Ae.NO_DELIVERY])})),Object(xu["a"])((function(e){var t=of(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(br.request({message:c},{address:n.meta.address,msgId:t}));var s={type:En.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Je["a"])(Ja(a,s,{log:r})).pipe(Object(ho["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return br.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},mf=n("6fb6"),vf=n("de5c"),gf=n("8f41");function Of(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function wf(e,t){return _f(e)||kf(e,t)||Sf(e,t)||jf()}function jf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _f(e){if(Array.isArray(e))return e}function Ef(e){return xf(e)||Af(e)||Sf(e)||Tf()}function Tf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sf(e,t){if(e){if("string"===typeof e)return Nf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nf(e,t):void 0}}function Af(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xf(e){if(Array.isArray(e))return Nf(e)}function Nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rf=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Cf=new WeakMap;function Df(e){return Rf(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Cf.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Cf.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function If(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function Pf(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Pu["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(Cl["a"])((function(){return n})),Object(hc["a"])(Ue),Object(mf["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(ho["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return Zu(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Pu["a"])(t,"event").pipe(Object(B["a"])(If("m.call.candidates",i,o)),Object(ho["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(Je["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(mc["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(Zc["a"])())}function Uf(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,f=a.latest$,d=a.config$;return Object(Je["a"])(Df(e)).pipe(Object($["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(Ef(r),Ef(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(Pf(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object($["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Pu["a"])(e,"event").pipe(Object(B["a"])(If("m.call.answer",s,c,o))),Zu(u,e,"m.call.invite",n,{log:l,latest$:f,config$:d}).pipe(Object(ho["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Zc["a"])()))})),Object($c["a"])(1),Object(ho["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Zc["a"])()),Object(D["a"])(b))})))}function Lf(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,f=a.config$;return Object(Pu["a"])(e,"event").pipe(Object(B["a"])(If("m.call.invite",c,i,o)),Object(ho["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(Je["a"])(Df(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Vc["a"])(f),Object($["a"])((function(r){var c=wf(r,2),d=wf(c[0],2),p=d[0],b=d[1],y=c[1].fallbackIceServers,h=new RTCPeerConnection({iceServers:[].concat(Ef(b),Ef(y))});return h.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(Pf(h,e,t,n,a),Object(P["a"])((function(){return h.createAnswer()})).pipe(Object($["a"])((function(t){h.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Zu(s,e,"m.call.answer",n,{log:u,latest$:l,config$:f})})),Object(ho["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Zc["a"])()),Object(Pu["a"])(h,"datachannel").pipe(Object(q["a"])("channel")))})),Object($c["a"])(1))}function Mf(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(Pu["a"])(t,"close").pipe(Object(ho["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Zc["a"])()),Object(Pu["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(Lc["a"])(e.error)}))),Object(Pu["a"])(t,"open").pipe(Object($c["a"])(1),Object(Su["a"])(c/3),Object(ho["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(qc["a"])(Wn(t,{address:i}))),Object(Pu["a"])(t,"message").pipe(Object(ho["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return hr({text:e,message:Yu(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Nu["a"])((function(){return t.close()})))})),Object(vo["a"])(e),Object(mc["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),U["a"]})),Object(vf["a"])(Wn(void 0,{address:i})))}}function Bf(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(go["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Vc["a"])(i,c),Object(B["a"])((function(e){var t,n=wf(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Ae.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Ae.WEBRTC])})),Object(tt["a"])((function(t){var n=wf(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(Wn(void 0,i.meta));var l={log:r,latest$:o,config$:c},f=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),d=f.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:f,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],p=new C["a"];return t=d?Uf(s,a,n,u,l):Lf(s,a,n,u,l),p.pipe(Object($["a"])((function(){return Zu(i.meta.address,s,"m.call.hangup",{call_id:f,version:0},{log:r,latest$:o,config$:c}).pipe(Object(vo["a"])(Object(Uc["a"])(u.httpTimeout/10)))})),Object(vo["a"])(e.pipe(Object(B["a"])(Qr.is)))).subscribe(),Object(I["a"])(t,Object(Pu["a"])(s,"event").pipe(Object(B["a"])(If("m.call.hangup",n.peerId,f)),Object(gf["a"])(Object(Lc["a"])(new Error("RTC: peer hung up"))))).pipe(Mf(p,n,u,l))})).pipe(Object(Wc["a"])((function(e){return e.pipe(Object(Vc["a"])(o,c),Object($["a"])((function(e){var t,n,r=wf(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?d?Object(Uc["a"])(o/10):Object(D["a"])(null):U["a"]})))})))})))}var Ff=function(e,t,n){return Of(t),e.pipe(Object(B["a"])(qn.success.is),Object(mo["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return Bf(e,t,n)})))};function $f(e,t){return Kf(e)||Wf(e,t)||Hf(e,t)||qf()}function qf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hf(e,t){if(e){if("string"===typeof e)return Vf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vf(e,t):void 0}}function Vf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Kf(e){if(Array.isArray(e))return e}var Gf=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(mn([Un.request,Un.success])),Object(Vc["a"])(t),Object($["a"])((function(e){var t=$f(e,2),n=t[0],a=t[1];return Object(Je["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=$f(e,2),a=$f(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(M["a"])((function(e){var t,n,r,a,o=$f(e,2),i=o[0],c=o[1],s={secrethash:i,direction:_r.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?Ar.success({balanceProof:Xa(c.unlock[1])},s):Ar.success({},s):Ar.failure(new an(nn.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(Ue))})))};function Zf(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object($c["a"])(1),Object(Zc["a"])()),Object(D["a"])(t))}function Yf(e,t){return ed(e)||Jf(e,t)||Qf(e,t)||Xf()}function Xf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qf(e,t){if(e){if("string"===typeof e)return zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zf(e,t):void 0}}function zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ed(e){if(Array.isArray(e))return e}function td(e,t,n,r){var a=n.confirmationBlocks;return Object(Je["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=Yf(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=Yf(t,2),r=n[0],a=n[1],o={secrethash:r,direction:_r.SENT};return Object(I["a"])(Zf(e,Lr.request(void 0,o),wn(Lr,o)),Object(D["a"])(Ar.failure(new an(nn.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var nd=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(mn(Nn)),Object(Vc["a"])(t,r),Object(Hc["a"])((function(t){var n=Yf(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return td(e,a,o,r)})))};function rd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ad(e,t){return cd(e)||id(e,t)||ld(e,t)||od()}function od(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function id(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cd(e){if(Array.isArray(e))return e}function sd(e){return dd(e)||fd(e)||ld(e)||ud()}function ud(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ld(e,t){if(e){if("string"===typeof e)return pd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pd(e,t):void 0}}function fd(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function dd(e){if(Array.isArray(e))return pd(e)}function pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bd(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return on(n.length===e.locks.length-1,"invalid locks size"),n}function yd(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function hd(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),U["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,d=t.payload.paths[0].path[0],b=e.channels[Fo({tokenNetwork:t.payload.tokenNetwork,partner:d})];on((null===b||void 0===b?void 0:b.state)===$a.open,"not open"),on(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(f),expiration:Object(j["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},h=cs([].concat(sd(b.own.locks),[y]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",b.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var m={type:En.LOCKED_TRANSFER,message_identifier:fs(),chain_id:Object(j["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(b.id),nonce:b.own.nextNonce,transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:h,payment_identifier:t.payload.paymentId,token:b.token,recipient:d,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Je["a"])(Ja(u,m,{log:i})).pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xr({message:n,fee:f,partner:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Rr({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function md(e,t,n){return Object(ze["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=ad(e,2),a=r[0],o=r[1];return hd(a,t,o,n)})),Object(mc["a"])((function(e){return Object(D["a"])(Ar.failure(e,t.meta))})))}function vd(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;on(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=t.sent[i].partner,l=t.channels[Fo({tokenNetwork:s.token_network_address,partner:u})];if(on((null===l||void 0===l?void 0:l.state)===$a.open,"channel not open"),t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{on(t.sent[i].secret,"unknown secret"),on(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var f={type:En.UNLOCK,message_identifier:fs(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:l.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:cs(bd(l.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Je["a"])(Ja(o,f,{log:a}))}return c.pipe(Object(Vc["a"])(e),Object(M["a"])((function(e){var t=ad(e,2),r=t[0],a=t[1];return on(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),on(!a.sent[i].channelClosed,"channel closed!"),Pr.success({message:r,partner:u},n.meta)})))}function gd(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return vd(e,n,t,{log:a,signer:r})})),Object(mc["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(Pr.failure(e,t.meta))})))}function Od(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;on(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[Fo({tokenNetwork:c.token_network_address,partner:s})];if(on((null===u||void 0===u?void 0:u.state)===$a.open,"channel not open"),e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{on(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),on(!e.sent[o].unlock,"transfer already unlocked");var l=cs(bd(u.own,o)),f={type:En.LOCK_EXPIRED,message_identifier:fs(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:u.own.nextNonce,transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(Je["a"])(Ja(r,f,{log:a}))}return i.pipe(Object(M["a"])((function(e){return Lr.success({message:e,partner:s},t.meta)})))}function wd(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Od(e,t,{signer:a,log:r})})),Object(mc["a"])((function(e){return Object(D["a"])(Lr.failure(e,t.meta))})))}function jd(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:_r.RECEIVED};return Object(ze["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=ad(e,2),c=n[0],l=n[1],f=l.revealTimeout,d=l.caps,b=t.payload.message;if(s in c.received){a.warn("transfer already present",t.meta);var y=b.message_identifier;return c.received[s].partner===t.meta.address&&c.received[s].transfer[1].message_identifier.eq(y)?Object(D["a"])(Nr({message:c.received[s].transferProcessed[1]},u)):U["a"]}var h=b.token_network_address,m=t.meta.address,v=c.channels[Fo({tokenNetwork:h,partner:m})];on((null===v||void 0===v?void 0:v.state)===$a.open,"channel not open"),on(b.chain_id.eq(o.chainId),"chainId mismatch"),on(b.channel_identifier.eq(v.id),"channelId mismatch"),on(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=[].concat(sd(v.partner.locks),[b.lock]),O=cs(g);on(b.locksroot===O,"locksroot mismatch"),on(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),on(b.locked_amount.eq(yd(g)),"lockedAmount mismatch");var w=Ho(v).partnerCapacity;on(b.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),on(b.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",b.lock.amount.toString(),"of token",v.token,", from",b.initiator,", through partner",m);var j=Object(D["a"])(void 0);!(null===d||void 0===d?void 0:d[Ae.NO_RECEIVE])&&b.target===r&&b.lock.expiration.sub(f).gt(c.blockNumber)&&(j=Object(P["a"])((function(){var e={type:En.SECRET_REQUEST,payment_identifier:b.payment_identifier,secrethash:s,amount:b.lock.amount,expiration:b.lock.expiration,message_identifier:fs()};return Ja(i,e,{log:a})})));var _=Object(P["a"])((function(){var e={type:En.PROCESSED,message_identifier:b.message_identifier};return Ja(i,e,{log:a})}));return Object(ze["a"])([_,j]).pipe(Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=ad(t,2),r=n[0],a=n[1],e.next=3,xr({message:b,fee:k["Zero"],partner:m},u);case 3:return e.next=5,Nr({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,qn.request(void 0,{address:b.initiator});case 8:return e.next=10,Dr({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(mc["a"])((function(e){return Object(D["a"])(Ar.failure(e,u))})))}function kd(e,t,n){var r=n.log,a=n.network,o=n.signer,i=ss(t.payload.message.secret),c={secrethash:i,direction:_r.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return U["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(on(u===n.partner,"wrong partner"),on(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(D["a"])(Ur({message:n.unlockProcessed[1]},c)):U["a"];var l=n.transfer[1];on(s.token_network_address===l.token_network_address,"wrong tokenNetwork");var f=s.token_network_address,d=e.channels[Fo({tokenNetwork:f,partner:u})];on((null===d||void 0===d?void 0:d.state)===$a.open,"channel not open"),on(s.chain_id.eq(a.chainId),"chainId mismatch"),on(s.channel_identifier.eq(d.id),"channelId mismatch"),on(s.nonce.eq(d.partner.nextNonce),"nonce mismatch");var b=l.lock.amount,y=bd(d.partner,i);on(s.locksroot===cs(y),"locksroot mismatch"),on(s.transferred_amount.eq(d.partner.balanceProof.transferredAmount.add(b)),"transferredAmount mismatch"),on(s.locked_amount.eq(yd(y)),"lockedAmount mismatch");var h={type:En.PROCESSED,message_identifier:s.message_identifier};return Object(Je["a"])(Ja(o,h,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Rr({secret:s.secret},c);case 2:return e.next=4,Pr.success({message:s,partner:u},c);case 4:return e.next=6,Ur({message:t},c);case 6:return e.next=8,Ar.success({balanceProof:Xa(s)},c);case 8:case"end":return e.stop()}}),e)}))))})),Object(mc["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(Pr.failure(e,c))})))}function _d(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:_r.RECEIVED};return Object(ze["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=ad(e,2),l=u[0],f=u[1].confirmationBlocks;if(!(c in l.received))return U["a"];var d=l.received[c],b=t.payload.message,y=t.meta.address;if(on(y===d.partner,"wrong partner"),on(!d.unlock,"transfer unlocked"),d.lockExpired)return r.warn("transfer already expired",t.meta),d.lockExpiredProcessed&&d.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(D["a"])(Mr({message:d.lockExpiredProcessed[1]},s)):U["a"];var h=d.transfer[1];on(h.lock.expiration.add(f).lte(l.blockNumber),"expiration block not confirmed yet"),on(!(null===(i=null===(n=d.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered onchain"),on(b.token_network_address===h.token_network_address,"wrong tokenNetwork");var m=b.token_network_address,v=l.channels[Fo({tokenNetwork:m,partner:y})];on((null===v||void 0===v?void 0:v.state)===$a.open,"channel not open"),on(b.chain_id.eq(a.chainId),"chainId mismatch"),on(b.channel_identifier.eq(v.id),"channelId mismatch"),on(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=bd(v.partner,c);on(b.locksroot===cs(g),"locksroot mismatch"),on(b.locked_amount.eq(yd(g)),"lockedAmount mismatch"),on(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var O={type:En.PROCESSED,message_identifier:b.message_identifier};return Object(Je["a"])(Ja(o,O,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Lr.success({message:b,partner:y},s);case 2:return e.next=4,Mr({message:t},s);case 4:return e.next=6,Ar.failure(new an(nn.XFER_EXPIRED,{block:h.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(mc["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(Lr.failure(e,s))})))}function Ed(e,t,n,r){var a=n.log,o=n.signer,i=t.payload.message;on(i.participant===t.meta.address,"participant mismatch");var c=i.token_network_address,s=i.participant,u=e.channels[Fo({tokenNetwork:c,partner:s})];on((null===u||void 0===u?void 0:u.state)===$a.open,"channel not open"),on(i.chain_id.eq(e.chainId),"chainId mismatch"),on(i.channel_identifier.eq(u.id),"channelId mismatch");var l=Object(D["a"])(void 0),f="".concat($o(u),"+").concat(i.message_identifier.toString()),d=r.get(f);if(d)l=Object(D["a"])(d);else{on(i.nonce.eq(u.partner.nextNonce),"nonce mismatch");var p=Ho(u),b=p.partnerBalance,y=p.partnerLocked,h=p.partnerDeposit,m=h.add(b).sub(y);if(on(i.total_withdraw.lte(m),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount"),i.expiration.gt(e.blockNumber)){var v={type:En.WITHDRAW_CONFIRMATION,message_identifier:i.message_identifier,chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,participant:i.participant,total_withdraw:i.total_withdraw,nonce:u.own.nextNonce,expiration:i.expiration};l=Object(Je["a"])(Ja(o,v,{log:a})).pipe(Object(ho["a"])((function(e){return r.put(f,e)})))}}var g={tokenNetwork:c,partner:s,totalWithdraw:i.total_withdraw,expiration:i.expiration.toNumber()};return Object(I["a"])(Object(D["a"])(qr.request({message:i},g)),l.pipe(Object(B["a"])(Ue),Object(M["a"])((function(t){return on(i.expiration.gt(e.blockNumber),"request expired while signing"),qr.success({message:t},g)})),Object(mc["a"])((function(e){return a.warn("error while signing WithdrawConfirmation, ignoring",e),U["a"]}))))}function Td(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Ed(e,t,{log:o,signer:a},r)})),Object(mc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}function Sd(e,t,n,r){var a=n.signer,o=n.log,i=n.config$;return Object(ze["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=ad(e,2),i=n[0],c=n[1].confirmationBlocks,s=t.payload.message;on(s.participant===t.meta.address,"participant mismatch");var u,l=s.token_network_address,f=s.participant,d=i.channels[Fo({tokenNetwork:l,partner:f})];on((null===d||void 0===d?void 0:d.state)===$a.open,"channel not open"),on(s.chain_id.eq(i.chainId),"chainId mismatch"),on(s.channel_identifier.eq(d.id),"channelId mismatch");var b="".concat($o(d),"+").concat(s.message_identifier.toString()),y=r.get(b);if(y)u=Object(D["a"])(y);else{on(s.nonce.eq(d.partner.nextNonce),"nonce mismatch"),on(s.expiration.add(c).lte(i.blockNumber));var h={type:En.PROCESSED,message_identifier:s.message_identifier};u=Object(Je["a"])(Ja(a,h,{log:o})).pipe(Object(ho["a"])((function(e){return r.put(b,e)})))}var m={tokenNetwork:l,partner:f,totalWithdraw:s.total_withdraw,expiration:s.expiration.toNumber()};return u.pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qr.failure({message:s},m);case 2:return e.next=4,br.request({message:t},{address:f,msgId:t.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))})),Object(mc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}var Ad=function(e,t,n){rd(t);var r=new rf(32),a=new rf(32),o=n.latest$.pipe(Ao("state"));return Object(I["a"])(e.pipe(Object(B["a"])(mn([Ar.request,Pr.request,Lr.request]))),e.pipe(Object(B["a"])(eo([Ze(nr),Ze(ar),Ze(or),Ze(cr),Ze(ur)])))).pipe(Object(xu["a"])((function(e){var t;switch(e.type){case Ar.request.type:t=md(o,e,n);break;case Pr.request.type:t=gd(o,e,n);break;case Lr.request.type:t=wd(o,e,n);break;case hr.type:switch(e.payload.message.type){case En.LOCKED_TRANSFER:t=jd(o,e,n);break;case En.UNLOCK:t=kd(o,e,n);break;case En.LOCK_EXPIRED:t=_d(o,e,n);break;case En.WITHDRAW_REQUEST:t=Td(o,e,n,r);break;case En.WITHDRAW_EXPIRED:t=Sd(o,e,n,a);break}break}return t})))};function xd(e,t){return Id(e)||Dd(e,t)||Rd(e,t)||Nd()}function Nd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rd(e,t){if(e){if("string"===typeof e)return Cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cd(e,t):void 0}}function Cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Id(e){if(Array.isArray(e))return e}function Pd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Ud=function(e,t){return Pd(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=xd(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:_r.SENT},e.next=9,qn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,xr({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,Pr.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Lr.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Ld=function(e,t,n){Pd(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(Je["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=xd(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object($["a"])((function(e){var t=xd(e,2),n=t[0],a=t[1],o={secrethash:n,direction:_r.RECEIVED};return Object(I["a"])(Object(D["a"])(xr({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(Rr({secret:a.secret[1].value},o)):U["a"],a.secretReveal?Object(D["a"])(Ir({message:a.secretReveal[1]},o)):U["a"],!a.secret&&a.secretRequest?r.pipe(Object(q["a"])("caps",Ae.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object($c["a"])(1),Object(gf["a"])(Object(D["a"])(qn.request(void 0,{address:a.transfer[1].initiator}),Dr({message:a.secretRequest[1]},o)))):U["a"])})))};function Md(e,t){return Hd(e)||qd(e,t)||Fd(e,t)||Bd()}function Bd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fd(e,t){if(e){if("string"===typeof e)return $d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$d(e,t):void 0}}function $d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hd(e){if(Array.isArray(e))return e}var Vd=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(xr.is),Object(B["a"])((function(e){return e.meta.direction===_r.RECEIVED&&e.payload.message.target!==r})),Object(Vc["a"])(t,a),Object(B["a"])((function(e){var t=Md(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Ae.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=Md(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return Ar.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:_r.SENT})})))};function Wd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Kd(e,t){return Qd(e)||Xd(e,t)||Zd(e,t)||Gd()}function Gd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zd(e,t){if(e){if("string"===typeof e)return Yd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yd(e,t):void 0}}function Yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qd(e){if(Array.isArray(e))return e}var zd=function(e,t){return e.pipe(Object(B["a"])(eo(Ze(Yn))),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Kd(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=Kd(s[c],2),l=u[0],f=u[1],!f.transfer[1].message_identifier.eq(o.message_identifier)||f.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Nr({message:o},{secrethash:i,direction:_r.SENT});case 16:case"end":return e.stop()}}),e)}))))},Jd=function(e,t){return e.pipe(Object(B["a"])(mn([Nr,Ur,Mr])),Object(B["a"])((function(e){return e.meta.direction===_r.RECEIVED})),Object(Vc["a"])(t),Object(M["a"])((function(e){var t=Kd(e,2),n=t[0],r=t[1].received;return br.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},ep=function(e,t){return e.pipe(Object(B["a"])(eo(Ze(Yn))),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Kd(t,2),r=n[0],a=n[1],o=r.payload.message,i=It()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:_r.SENT},e.next=8,Ar.success({balanceProof:Xa(a.sent[i].unlock[1])},c);case 8:return e.next=10,Ur({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},tp=function(e,t){return e.pipe(Object(B["a"])(eo(Ze(Yn))),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Kd(t,2),r=n[0],a=n[1],o=r.payload.message,i=It()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Mr({message:o},{secrethash:i,direction:_r.SENT});case 7:case"end":return e.stop()}}),e)}))))},np=function(e,t,n){Wd(t);var r=n.log,a=n.signer,o=new rf(32);return e.pipe(Object(B["a"])(eo([Ze(rr),Ze(ur)])),Object(xu["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(br.request({message:c},{address:e.meta.address,msgId:i}));var s={type:En.PROCESSED,message_identifier:n};return Object(Je["a"])(Ja(a,s,{log:r})).pipe(Object(ho["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return br.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},rp=n("b6ad"),ap=n.n(rp);function op(e,t){return lp(e)||up(e,t)||cp(e,t)||ip()}function ip(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cp(e,t){if(e){if("string"===typeof e)return sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sp(e,t):void 0}}function sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function up(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lp(e){if(Array.isArray(e))return e}function fp(e,t){return ap()(e,t,(function(e,t){return Le.is(e)?e.eq(t):Le.is(t)?t.eq(e):void 0}))}var dp=function(e,t){return e.pipe(Object(B["a"])(eo(Ze(rr))),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=op(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&fp(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:_r.SENT},e.next=14,Br({message:o,partner:c.partner},u);case 14:return e.next=16,Ar.failure(new an(nn.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function pp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function bp(e,t){return gp(e)||vp(e,t)||hp(e,t)||yp()}function yp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hp(e,t){if(e){if("string"===typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mp(e,t):void 0}}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gp(e){if(Array.isArray(e))return e}function Op(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(Wc["a"])((function(e){return e.pipe(Object(Tu["a"])(t))})),Object(vo["a"])(e))}}function wp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Zf(t,e,wn(br,e.meta)).pipe(Op(n,r))}var jp=function(e,t,n,r){return r.meta.direction!==_r.SENT?U["a"]:n.pipe(Object(F["a"])(),Object(tt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=br.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(Ao("sent",o),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return wp(c,e,s,a)})))},kp=function(e,t,n,r){return r.meta.direction!==_r.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Vc["a"])(n),Object(tt["a"])((function(n){var a=bp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=br.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),f=t.pipe(Ao("sent",c),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return wp(l,e,f,i)})))},_p=function(e,t,n,r){return r.meta.direction!==_r.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Vc["a"])(n),Object(tt["a"])((function(n){var a=bp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=br.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(Ao("sent",c),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return wp(u,e,l,i)})))},Ep=function(e,t,n,r){return r.meta.direction!==_r.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Vc["a"])(n),Object(tt["a"])((function(n){var a=bp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=br.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(Ao("received",c),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return wp(u,e,l,i)})))},Tp=function(e,t,n,r){return r.meta.direction!==_r.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Vc["a"])(n),Object(tt["a"])((function(n){var a=bp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=br.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(Ao("received",c),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return wp(u,e,l,i)})))},Sp=function(e,t,n){pp(t);var r=n.latest$,a=n.config$,o=r.pipe(Ao("state"));return e.pipe(Object(B["a"])(mn([xr,Pr.success,Lr.success,Dr,Ir])),Object($["a"])((function(t){return xr.is(t)?jp(e,o,a,t):Pr.success.is(t)?kp(e,o,a,t):Lr.success.is(t)?_p(e,o,a,t):Dr.is(t)?Ep(e,o,a,t):Tp(e,o,a,t)})))};function Ap(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function xp(e,t){return Ip(e)||Dp(e,t)||Rp(e,t)||Np()}function Np(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rp(e,t){if(e){if("string"===typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ip(e){if(Array.isArray(e))return e}var Pp=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(eo(Ze(Xn))),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Dr({message:c},{secrethash:c.secrethash,direction:_r.SENT});case 10:case"end":return e.stop()}}),e)}))))},Up=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),U["a"];var s,u=e.sent[c].transfer[1],l=u.target,f=e.sent[c].fee,d=u.lock.amount.sub(f);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),U["a"];if(i.amount.lt(d))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])(Ar.failure(new an(nn.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(d)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:En.SECRET_REVEAL,message_identifier:fs(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Je["a"])(Ja(a,b,{log:o}))}return s.pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir({message:n},t.meta);case 2:return e.next=4,br.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Lp=function(e,t,n){Ap(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(mn(Dr)),Object(B["a"])((function(e){return e.meta.direction===_r.SENT})),Object(xu["a"])((function(e){return o.pipe(Ao("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return Up(t,e,{log:r,signer:a})})))})))},Mp=function(e,t){return e.pipe(Object(B["a"])(eo(Qn)),Object(Vc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=n[0],a=n[1],o=r.payload.message,i=ss(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:_r.SENT},e.next=7,Rr({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,Pr.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Rr({secret:o.secret},{secrethash:i,direction:_r.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},Bp=function(e,t,n){Ap(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(mn([Rr,Cr.success])),Object(B["a"])((function(e){return e.meta.direction===_r.RECEIVED})),Object(xu["a"])((function(e){return o.pipe(Ao("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:En.SECRET_REVEAL,message_identifier:fs(),secret:e.payload.secret};return Ja(a,t,{log:r})})),Object(M["a"])((function(t){return Ir({message:t},e.meta)})),Object(mc["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},Fp=function(e,t,n){Ap(e);var r=n.secretRegistryContract;return vt(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(Vc["a"])(t),Object(B["a"])((function(e){var t=xp(e,2),n=xp(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=xp(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Cr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:_r.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Cr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:_r.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},$p=function(e){return e.pipe(Object(B["a"])(Cr.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return Ar.success({},e.meta)})))},qp=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Ao(_r.RECEIVED),Object($["a"])((function(e){return Object(Je["a"])(Object.keys(e))})),Object(Dl["a"])(),Object($["a"])((function(t){return e.pipe(Object(B["a"])(Nn.is),Object(Vc["a"])(a.pipe(Object(q["a"])("state",_r.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=xp(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[Ae.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(Hc["a"])((function(n){var r=xp(n,2),a=r[1],o={secrethash:t,direction:_r.RECEIVED};return Zf(e,Cr.request({secret:a.secret[1].value},o),jn(Cr,o))})),Object(vo["a"])(a.pipe(Ao("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},Hp=function(e,t,n){Ap(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(B["a"])(Cr.request.is),Object(Vc["a"])(s),Object($["a"])((function(e){var t,n=xp(e,2),s=n[0],u=n[1].subkey,l=Vs({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),f=l.signer,d=Ws(c,f);return Object(Je["a"])(d.functions.registerSecret(s.payload.secret)).pipe(Vo("registerSecret",nn.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(Zc["a"])(),Object(mc["a"])((function(e){return Object(D["a"])(Cr.failure(e,s.meta))})))})))};function Vp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Gp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Wp(e,t){return Xp(e)||Yp(e,t)||Gp(e,t)||Kp()}function Kp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gp(e,t){if(e){if("string"===typeof e)return Zp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zp(e,t):void 0}}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xp(e){if(Array.isArray(e))return e}var Qp=function(e){return e.pipe(Object(B["a"])(mn(qr.success)),Object(M["a"])((function(e){return br.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},zp=[["partner",1],["own",2]],Jp=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Nn.is),Object(q["a"])("payload","blockNumber"),Object(Vc["a"])(t,r),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,d,b,y,h,m;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Wp(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=43;break}if(s=c[i],s.state===$a.open){e.next=6;break}return e.abrupt("continue",40);case 6:u=Vp(zp),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=32;break}f=Wp(l.value,2),d=f[0],b=f[1],y=Vp(s[d].withdrawRequests),e.prev=12,y.s();case 14:if((h=y.n()).done){e.next=22;break}if(m=h.value,!m.expiration.add(o*b).gt(r)){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,Hr({participant:s[d].address},{tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:m.expiration.toNumber(),totalWithdraw:m.total_withdraw});case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](12),y.e(e.t0);case 27:return e.prev=27,y.f(),e.finish(27);case 30:e.next=9;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](7),u.e(e.t1);case 37:return e.prev=37,u.f(),e.finish(37);case 40:i++,e.next=2;break;case 43:case"end":return e.stop()}}),e,null,[[7,34,37,40],[12,24,27,30]])}))))},eb=n("1a2de");function tb(e,t){return ib(e)||ob(e,t)||rb(e,t)||nb()}function nb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rb(e,t){if(e){if("string"===typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ab(e,t):void 0}}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ob(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ib(e){if(Array.isArray(e))return e}var cb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function sb(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Ae.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Fo({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==$a.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat($a.open,'"');var s=Ho(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var ub=N()((function(e){return cb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function lb(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Ne["t"]({message:Ne["q"],network_info:Ne["t"]({chain_id:Ne["j"](a.chainId),token_network_registry_address:Ne["j"](o.TokenNetworkRegistry.address)}),operator:Ne["q"],payment_address:We,price_info:Fe(32),version:Ne["q"]}),s=We.is(e)?Object(Je["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(Vc["a"])(i),Object($["a"])((function(e){var t=tb(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new an(nn.PFS_EMPTY_URL);if(!Zs(a))throw new an(nn.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(Ru["a"])(a+"/api/v1/info").pipe(Object(Su["a"])(o),Object($["a"])((function(e){return cb(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Pe,t.t1=c,t.t2=Ia,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,ub(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(M["a"])((function(e){var t=tb(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function fb(e,t){var n=t.log;return Object(Je["a"])(e).pipe(Object($["a"])((function(e){return lb(e,t).pipe(Object(mc["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(Eu["a"])(),Object(M["a"])((function(e){if(!e.length)throw new an(nn.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function db(e){return Object(j["concat"])([Ca(e.one_to_n_address,20),Ca(e.chain_id,32),Ca(Fa.IOU,32),Ca(e.sender,20),Ca(e.receiver,20),Ca(e.amount,32),Ca(e.expiration_block,32)])}function pb(e,t){return cb(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(db(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function bb(e){return mb(e)||hb(e)||jb(e)||yb()}function yb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function mb(e){if(Array.isArray(e))return kb(e)}function vb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=jb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function gb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ob(e,t){return Eb(e)||_b(e,t)||jb(e,t)||wb()}function wb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jb(e,t){if(e){if("string"===typeof e)return kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kb(e,t):void 0}}function kb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Eb(e){if(Array.isArray(e))return e}var Tb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Sb=N()((function(e){return Tb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),Ab=Ne["n"](Ne["t"]({error_code:Ne["l"],errors:Ne["q"]}));function xb(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Nb(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.userDepositContract,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=xb(),n=Object(j["concat"])([a,e.address,Object(j["toUtf8Bytes"])(t)]);return Object(Je["a"])(o.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Vc["a"])(u),Object($["a"])((function(n){var r=Ob(n,2),a=r[0],o=r[1].httpTimeout;return Object(Ru["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Su["a"])(o))})),Object(Vc["a"])(s.pipe(Object(q["a"])("state","blockNumber"))),Object($["a"])((function(t){var n=Ob(t,2),o=n[0],s=n[1];return Tb(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=10;break}return t.t0=a,t.t1=e.address,t.t2=Object(j["bigNumberify"])(i.chainId),t.t3=k["Zero"],t.next=7,Sb(c);case 7:return t.t4=t.sent,t.t5=Object(j["bigNumberify"])(s).add(2*Math.pow(10,5)),t.abrupt("return",{sender:t.t0,receiver:t.t1,chain_id:t.t2,amount:t.t3,one_to_n_address:t.t4,expiration_block:t.t5});case 10:return t.next=12,o.text();case 12:if(n=t.sent,o.ok){t.next=15;break}throw new an(nn.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 15:if(r=Pe(kr,Ia(n)),u=r.last_iou,l=Object(j["verifyMessage"])(db(u),u.signature),l===a){t.next=19;break}throw new an(nn.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))}function Rb(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):Nb(e,t,n)})),Object(M["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return pb(n.signer,e)})))}var Cb=function(e,t,n){gb(t);var r=n.log,a=n.latest$;return e.pipe(Object(B["a"])(mn(Kr.request)),Object(xu["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,f=s.pfsSafetyMargin,d=e.meta,b=d.tokenNetwork,y=d.target;if(!Object.values(i.tokens).includes(b))throw new an(nn.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new an(nn.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[Ae.NO_RECEIVE])throw new an(nn.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===sb(i,c,b,y,y,e.meta.value))return Object(D["a"])({paths:[{path:[n.address,y],fee:k["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new an(nn.PFS_DISABLED);var h=e.payload.pfs?Object(D["a"])(e.payload.pfs):u?lb(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return fb(e,n)})),Object(ho["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return h.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):Rb(e,b,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(Ru["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Pa({from:n.address,to:y,value:Fe(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:Fe(32).encode(a.amount),expiration_block:Fe(32).encode(a.expiration_block),chain_id:Fe(32).encode(a.chain_id)}):void 0})}).pipe(Object(Su["a"])(l),Object(M["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return Tb(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(M["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=Ia(n);return t.ok?{paths:Pe(gr,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*f)).div(1e6)}})),iou:r}:{error:Pe(Ab,a),iou:r}})))})),Object(Vc["a"])(a),Object($["a"])((function(t){var a=Ob(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(Je["a"])(p.a.mark((function t(){var a,i,u,l,f,d,b,y,h,m,v,g,O;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,Zr({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,Yr(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new an(nn.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new an(nn.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:f=[],d=new Set,b=vb(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(h=y.value,m=h.path,v=h.fee,m[0]===n.address&&(m=m.slice(1)),g=m[0],!d.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=f.length?g!==f[0].path[0]?"path: already selected another recipient":!v.gt(f[0].fee)||"path: already selected a smaller fee":sb(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",m),d.add(g),t.abrupt("continue",30);case 29:f.push({path:m,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(f.length){t.next=42;break}throw new an(nn.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,Kr.success({paths:f},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(mc["a"])((function(t){return Object(D["a"])(Kr.failure(t,e.meta))})))})))},Db=function(e,t,n){gb(e),gb(t);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.latest$,s=n.config$;return c.pipe(Object(q["a"])("state"),Wo,Object(Vc["a"])(s),Object($["a"])((function(e){var t=Ob(e,2),n=t[0],c=t[1].httpTimeout;return n.pipe(Object(Vc["a"])(s),Object(B["a"])((function(e){var t=Ob(e,2),n=t[1].pfsRoom;return!!n})),Object(eb["a"])(c/2),Object(xu["a"])((function(e){var t=Ob(e,2),n=t[0],c=t[1],s=c.revealTimeout,u=c.pfsRoom,l=n.tokenNetwork,f=n.partner.address;if(n.state!==$a.open)return U["a"];var d=Ho(n),p=d.ownCapacity,b=d.partnerCapacity,y={type:En.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:l,channel_identifier:Object(j["bigNumberify"])(n.id)},updating_participant:a,other_participant:f,updating_nonce:n.own.balanceProof.nonce,other_nonce:n.partner.balanceProof.nonce,updating_capacity:p,other_capacity:b,reveal_timeout:Object(j["bigNumberify"])(s)};return Object(P["a"])((function(){return Ja(i,y,{log:r})})).pipe(Object(M["a"])((function(e){return yr({message:e},{roomName:u})})),Object(mc["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},Ib=function(e,t,n){gb(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Wo,Object($["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Vc["a"])(c),Object(B["a"])((function(e){var t=Ob(e,2),n=t[1],r=n.pfsRoom,a=n.caps;return!!r&&!(null===a||void 0===a?void 0:a[Ae.NO_MEDIATE])})),Object($["a"])((function(e){var t=Ob(e,2),n=t[0],c=t[1].pfsRoom;if(n.state!==$a.open)return U["a"];var s={type:En.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(n.id)},updating_participant:a,timestamp:xb(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Je["a"])(Ja(i,s,{log:r})).pipe(Object(M["a"])((function(e){return yr({message:e},{roomName:c})})),Object(mc["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},Pb=function(e,t,n){gb(e),gb(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(Ao("pfs"),Object(tt["a"])((function(e){return""!==e&&void 0!==e?U["a"]:vt(r,[r.filters.RegisteredService(null,null,null,null)],Object(D["a"])(a.ServiceRegistry.block_number)).pipe(Object(mo["a"])((function(e){var t=Ob(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(tt["a"])((function(e){var t=Ob(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(Tu["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(Oo["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(bb(e),[n]):e}),[]),Object(go["a"])(),Object(eb["a"])(1e3),Object(M["a"])((function(e){return Gr({pfsList:e})})))})))},Ub=function(e,t,n){gb(e),gb(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(Ao("state","blockNumber"),Object(Hc["a"])((function(){return o.functions.effectiveBalance(r)})),Object(go["a"])((function(e,t){return t.eq(e)})),Object(M["a"])(Xr))};function Lb(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Ho(e),u=s.partnerUnlocked;return u.gt(k["Zero"])?Object(ze["a"])([i,c]).pipe(Object(B["a"])((function(t){var n,r,a=Ob(t,2),o=a[0].udcBalance,i=a[1],c=i.monitoringRoom,s=i.monitoringReward,l=i.rateToSvt;return!!c&&!!(null===(n=null===s||void 0===s?void 0:s.gt)||void 0===n?void 0:n.call(s,k["Zero"]))&&o.gte(s)&&u.mul(null!==(r=l[e.token])&&void 0!==r?r:k["Zero"]).div(k["WeiPerEther"]).gt(s)})),Object($c["a"])(1),Object($["a"])((function(i){var c=Ob(i,2),s=c[1],u=s.monitoringReward,l=s.monitoringRoom,f=e.partner.balanceProof,d=Wa(f.transferredAmount,f.lockedAmount,f.locksroot),p=Object(j["concat"])([Ca(e.tokenNetwork,20),Ca(r.chainId,32),Ca(Fa.BALANCE_PROOF_UPDATE,32),Ca(e.id,32),Ca(d,32),Ca(f.nonce,32),Ca(f.additionalHash,32),Ca(f.signature,65)]);return Object(Je["a"])(a.signMessage(p)).pipe(Object($["a"])((function(r){return Ja(a,{type:En.MONITOR_REQUEST,balance_proof:{chain_id:f.chainId,token_network_address:f.tokenNetworkAddress,channel_identifier:Object(j["bigNumberify"])(e.id),nonce:f.nonce,balance_hash:d,additional_hash:f.additionalHash,signature:f.signature},non_closing_participant:t,non_closing_signature:r,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:u},{log:n})})),Object(M["a"])((function(e){return yr({message:e},{roomName:l})})))})),Object(mc["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]}))):U["a"]}}var Mb=function(e,t,n){return gb(e),gb(t),n.latest$.pipe(Object(q["a"])("state"),Wo,Object(Vc["a"])(n.config$),Object($["a"])((function(e){var t=Ob(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(go["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(L["a"])(1),Object(eb["a"])(a/2),Object(tt["a"])(Lb(n)))})))};function Bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fb(e,t){return Wb(e)||Vb(e,t)||qb(e,t)||$b()}function $b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qb(e,t){if(e){if("string"===typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hb(e,t):void 0}}function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wb(e){if(Array.isArray(e))return e}function Kb(e,t,n){var r=t.pipe(Ao("config"));return Object(ze["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=Fb(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(Bb({},Ae.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o)&&!wc()(i.rateToSvt))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(go["a"])(kc.a))}function Gb(e,t,n){var r=n.defaultConfig,a=e.pipe(Object(B["a"])(Xr.is),Object(q["a"])("payload"),Object(yc["a"])(k["MaxUint256"])),o=Kb(r,t,a),i=Cc(e),c=e.pipe(Object(B["a"])(Gr.is),Object(q["a"])("payload","pfsList"),Object(yc["a"])([])),s=e.pipe(Object(B["a"])(Wn.is),Object(Oo["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),Bb({},t.meta.address,t.payload)):po()(t.meta.address,e)}),{}),Object(yc["a"])({}));return Object(ze["a"])([Object(ze["a"])([e,t,o,i,c,s]),Object(ze["a"])([a])]).pipe(Object(M["a"])((function(e){var t=Fb(e,2),n=Fb(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Fb(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}var Zb=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),f),Yb=function(e,t,n){var r=e.pipe(Object(B["a"])(mn(Qr))),a=e.pipe(Object(hc["a"])(gc()(mn(Qr)),!0)),o=t.pipe(Object(vo["a"])(r));return Gb(a,o,n).subscribe(n.latest$),Object(Je["a"])(Object.values(Zb)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(mc["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(Qr({reason:e}))})),Object(vo["a"])(r))};function Xb(e){return Jb(e)||zb(e)||ny(e)||Qb()}function Qb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Jb(e){if(Array.isArray(e))return ry(e)}function ey(e,t){return oy(e)||ay(e,t)||ny(e,t)||ty()}function ty(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ny(e,t){if(e){if("string"===typeof e)return ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ry(e,t):void 0}}function ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ay(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function oy(e){if(Array.isArray(e))return e}function iy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e,t,n){return t&&cy(e.prototype,t),n&&cy(e,n),e}var uy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ly=function(){function e(t,n,r,a,o,i,c){var s,u,l,f,d=this;iy(this,e),this.resolveName=t.resolveName.bind(t);var b=o.address;this.log=y.a.getLogger("raiden:".concat(b)),t.resetEventsBlock(o.blockNumber+1);var h=new R["a"](1);this.state$=h.pipe(Ao("state")),this.action$=h.pipe(Ao("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(Ao("channels"),Object(M["a"])(Hs)),this.transfers$=qs(this.state$),this.events$=this.action$.pipe(Object(B["a"])(mn(ea))),this.getTokenInfo=N()((function(e){return uy(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(A()(void 0)),n.functions.symbol().catch(A()(void 0))]);case 4:return r=t.sent,a=ey(r,4),o=a[0],i=a[1],c=a[2],s=a[3],on(o&&null!=i,nn.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:h,config$:h.pipe(Ao("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:b,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),main:c},this.userDepositTokenAddress=N()((function(){return uy(d,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var m=Object(T["createLogger"])({predicate:function(){return d.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return d.config=e})),this.config$.pipe(Ao("logger")).subscribe((function(e){return d.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(_["b"])(bc,o,Object(_["a"])(m,this.epicMiddleware)),Gb(Object(D["a"])(zr({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return d.deps.latest$.next(e)}))}return sy(e,[{key:"start",value:function(){var e=this;on(this.epicMiddleware,nn.RDN_ALREADY_STARTED,this.log.info),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(Yb),this.epicMiddleware=void 0,this.store.dispatch(zr({}))}},{key:"stop",value:function(){this.store.dispatch(Qr({reason:Se.STOP}))}},{key:"getBlockNumber",value:function(){return uy(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(zr(Pe(St,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Vs(this.deps,this.config.subkey).address,on(We.is(e),[nn.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return uy(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:Vs(this.deps,this.config.subkey).address,on(We.is(t),[nn.DTA_INVALID_ADDRESS,{address:t}],this.log.info),on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return uy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return uy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,on(r&&r!==k["AddressZero"],nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Rn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return uy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,on(!n.subkey||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),i=void 0===n.deposit?void 0:Pe(Fe(32),n.deposit),c={tokenNetwork:o,partner:t},s=kn(Cn,c,this.action$,!1).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Cn.request(Object.assign(Object.assign({},n),{deposit:i}),c)),a.next=12,s;case 12:return u=a.sent,null===r||void 0===r||r({type:ke.OPENED,payload:{txHash:u}}),a.next=16,this.state$.pipe(Ao("channels",Fo({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===$a.open}))).toPromise();case 16:if(null===r||void 0===r||r({type:ke.CONFIRMED,payload:{txHash:u}}),!i){a.next=22;break}return a.next=20,kn(In,c,this.action$,!0).then((function(e){var t=e.txHash;return t}));case 20:l=a.sent,null===r||void 0===r||r({type:ke.DEPOSITED,payload:{txHash:l}});case 22:return a.abrupt("return",u);case 23:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return uy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],on(i,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),on(!a||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),c=Pe(Fe(32),n),s={tokenNetwork:i,partner:t},u=kn(In,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(In.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return uy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],on(o,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),on(!r||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=kn(Un,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Un.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return uy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],on(o,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),on(!r||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=kn(Mn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Mn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return uy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=kn(qn,n,this.action$),this.store.dispatch(qn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return uy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,f,d,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],on(o,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Pe(Fe(32),n),c=r.paymentId?Pe(Fe(8),r.paymentId):ls(),s=r.paths?Pe(Or,r.paths):void 0,u=r.pfs?Pe(wr,r.pfs):void 0,on(void 0===r.secret||He.is(r.secret),nn.RDN_INVALID_SECRET,this.log.info),on(void 0===r.secrethash||qe.is(r.secrethash),nn.RDN_INVALID_SECRETHASH,this.log.info),l=r.secret?r.secret:r.secrethash?void 0:us(),f=r.secrethash||ss(l),on(!l||ss(l)===f,nn.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),d={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(wn(Kr,d)),Object(M["a"])((function(e){if(Kr.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return b.store.dispatch(Kr.request({paths:s,pfs:u},d)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(B["a"])(mn([xr,Ar.failure])),Object(F["a"])((function(e){return e.meta.direction===_r.SENT&&e.meta.secrethash===f})),Object(M["a"])((function(e){if(Ar.failure.is(e))throw e.payload;return ps(e.meta)}))),Object(P["a"])((function(){return b.store.dispatch(Ar.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:f,direction:_r.SENT})),U["a"]})))}))).toPromise());case 15:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return uy(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=ys(e),c=i.direction,s=i.secrethash,on(s in this.state[c],nn.RDN_UNKNOWN_TRANSFER,this.log.info),u=vs(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new an(nn.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,kn(Ar,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return uy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],on(o,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Pe(Fe(32),n),c=r.pfs?Pe(wr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=kn(Kr,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Kr.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return uy(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],on(a,nn.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=Pe(Fe(32),n),i={tokenNetwork:a,target:t,value:o},c=kn(Kr,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Kr.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return uy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return on(null!==this.config.pfs,nn.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(Ao("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return fb(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return uy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(!r||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),on(1!==this.deps.network.chainId,nn.RDN_MINT_MAINNET,this.log.info),a=Vs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=pe.connect(e,o),n.next=7,Ks(i,"mint",[Pe(Fe(32),t)],nn.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,Gs(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return uy(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ue)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(Xb(e),Xb(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return uy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,f,d,b,y,h;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return on(!r||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(j["bigNumberify"])(e),on(o.gt(k["Zero"]),nn.DTA_NON_POSITIVE_NUMBER,this.log.info),i=Vs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=Ws(this.deps.userDepositContract,c),n.t0=Ws,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return f=n.sent,on(f.gte(e),[nn.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:f.toString(),required:Object(j["bigNumberify"])(e).toString()}],this.log.info),on(!a||Object(j["bigNumberify"])(a).gte(e),[nn.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(j["bigNumberify"])(f).toString(),required:Object(j["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(d=n.sent,b=k["HashZero"],!d.lt(o)){n.next=26;break}return n.next=25,Ks(l,"approve",[u.address,null!==a&&void 0!==a?a:o],nn.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:ke.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,Ks(u,"deposit",[this.address,y.add(o)],nn.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return h=n.sent,null===t||void 0===t||t({type:ke.DEPOSITED,payload:{txHash:h.transactionHash}}),n.next=36,Gs(h,this.deps);case 36:return this.log.debug('deposit tx "'.concat(h.transactionHash,'" confirmed')),null===t||void 0===t||t({type:ke.CONFIRMED,payload:{txHash:h.transactionHash}}),n.abrupt("return",h.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return uy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,f,d,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(on(We.is(e),[nn.DTA_INVALID_ADDRESS,{to:e}],this.log.info),on(!r||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),o=Vs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(j["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(j["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,f=l.sub(s.mul(u)),on(f.gt(k["Zero"]),[nn.RDN_INSUFFICIENT_BALANCE,{transferable:f.toString()}],this.log.info),d=f.lte(t)?f:Object(j["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:d,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,on(y.status,nn.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return uy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,f;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return on(We.is(e),[nn.DTA_INVALID_ADDRESS,{token:e}],this.log.info),on(We.is(t),[nn.DTA_INVALID_ADDRESS,{to:t}],this.log.info),on(!a||this.deps.main,nn.RDN_SUBKEY_NOT_SET,this.log.info),o=Vs(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=Ws(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(j["bigNumberify"])(n),r.next=11,Ks(s,"transfer",[t,l],nn.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return f=r.sent,r.abrupt("return",f.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return uy(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,f,d,b,y,h,m,v,g;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new w["JsonRpcProvider"](e):e instanceof w["JsonRpcProvider"]?e:new w["Web3Provider"](e),Ot(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=Bs(s)),i.next=8,$s(t,c,o);case 8:return u=i.sent,l=u.signer,f=u.address,d=u.main,i.next=14,lo(s,r,f,n,a&&Pe(St,a));case 14:return b=i.sent,y=b.state,h=b.onState,m=b.onStateComplete,v=b.defaultConfig,on(f===y.address,[nn.RDN_STATE_ADDRESS_MISMATCH,{account:f,state:y.address}]),on(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,[nn.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:r.TokenNetworkRegistry.address,stateNetwork:y.chainId,stateRegistry:y.registry}]),g=new this(c,s,l,r,y,v,d),h&&g.state$.subscribe(h,m,m),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Te.sdk}},{key:"contractVersion",get:function(){return Te.contracts}}]),e}()},f45e:function(e,t,n){}});
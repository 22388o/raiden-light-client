(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0466bfdd":"2cc13a5e","chunk-308e79c1":"2f0fd193","chunk-14022d9a":"b3a821c4","chunk-4a422564":"bf3d6990","chunk-2810a456":"697d4d59","chunk-363758e3":"1ddc57df","chunk-51b0b4b8":"7b3d1a62","chunk-3a452f2e":"9a763652","chunk-492ca204":"2875ee16","chunk-4a090f88":"c6b7c2b1","chunk-87b2e3ca":"a100349b","chunk-c9c47ac8":"128f95fd","chunk-16066ff0":"272b7578","chunk-2cae6ccd":"4f9aa7e9","chunk-0bc4b99b":"73c337e7","chunk-1dfdcca3":"9b46b91f","chunk-62218639":"539342c0","chunk-16b0b981":"9e1eb69b","chunk-85036ae8":"5c7fc19a","chunk-9714f45e":"15e0c0c0","chunk-499d7469":"6d9b46dd","chunk-7ee7822e":"5a29fa50","chunk-d86182e6":"e36106cf"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0466bfdd":1,"chunk-308e79c1":1,"chunk-14022d9a":1,"chunk-4a422564":1,"chunk-2810a456":1,"chunk-363758e3":1,"chunk-51b0b4b8":1,"chunk-3a452f2e":1,"chunk-492ca204":1,"chunk-4a090f88":1,"chunk-87b2e3ca":1,"chunk-c9c47ac8":1,"chunk-16066ff0":1,"chunk-2cae6ccd":1,"chunk-0bc4b99b":1,"chunk-1dfdcca3":1,"chunk-62218639":1,"chunk-16b0b981":1,"chunk-85036ae8":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0466bfdd":"f0caf6ea","chunk-308e79c1":"f614b2ae","chunk-14022d9a":"7bcf6af2","chunk-4a422564":"1157883c","chunk-2810a456":"1eaab978","chunk-363758e3":"c3faef5b","chunk-51b0b4b8":"cc3b308c","chunk-3a452f2e":"3e1f23dd","chunk-492ca204":"1747eb60","chunk-4a090f88":"ca535ea5","chunk-87b2e3ca":"e711201e","chunk-c9c47ac8":"a9f4933e","chunk-16066ff0":"d57f34d1","chunk-2cae6ccd":"284343a3","chunk-0bc4b99b":"4c0bc679","chunk-1dfdcca3":"2f2d8b85","chunk-62218639":"8b191d91","chunk-16b0b981":"96bf5c72","chunk-85036ae8":"76d4519e","chunk-9714f45e":"31d6cfe0","chunk-499d7469":"31d6cfe0","chunk-7ee7822e":"31d6cfe0","chunk-d86182e6":"31d6cfe0"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01b2":function(e,t,n){},"08cb":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("e921"),i=n("8509");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],h.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],h.prototype,"fullscreen",void 0),h=Object(o["a"])([Object(i["a"])({})],h);var m=h,v=m,g=(n("71a0"),n("3c13")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("4f30"),a=n("a3d5"),o=n("230b"),i=n.n(o),c=n("5287"),s=n.n(c);function u(e,t){return b(e)||d(e,t)||p(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v=function(){function e(){y(this,e)}return m(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("e921"),a=n("8509"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=y();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var m=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t,n){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{token:e,target:t},query:{amount:n}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"165c":function(e,t,n){"use strict";var r=n("a12e"),a=n.n(r);a.a},"1a83":function(e,t,n){"use strict";var r=n("08cb"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("3795"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1f7b":function(e,t,n){"use strict";var r=n("d6a1"),a=n.n(r);a.a},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("e921"),i=n("8509"),c=n("2b7f"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=h(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:p({},Object(c["e"])(["defaultAccount"]))})],w);var _=w,k=_,j=(n("1a83"),n("3c13")),E=n("5961"),T=n.n(E),x=n("1885"),S=Object(j["a"])(k,r,a,!1,null,"18cb3a6d",null);t["a"]=S.exports;T()(S,{VImg:x["a"]})},2642:function(e,t,n){},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},3219:function(e,t,n){},3369:function(e,t,n){},3795:function(e,t,n){},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},5956:function(e,t,n){},6:function(e,t){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("e921"),i=n("0a08"),c=n("8509");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return p(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("3c13")),k=n("5961"),j=n.n(k),E=n("b2b2"),T=n("2567"),x=n("99a1"),S=n("8b2c"),A=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=A.exports;j()(A,{VBtn:E["a"],VCard:T["a"],VDialog:x["a"],VIcon:S["a"]})},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("01b2"),a=n.n(r);a.a},"72ec":function(e,t,n){"use strict";var r=n("b8c3"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("e921"),i=n("8509");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=h();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){p(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("8652"),n("3c13")),_=n("5961"),k=n.n(_),j=n("b2b2"),E=n("8216"),T=n("8b2c"),x=n("e3a9"),S=Object(w["a"])(O,r,a,!1,null,"bff458d8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:x["a"]})},"753f":function(e,t,n){"use strict";var r=n("2642"),a=n.n(r);a.a},"756c":function(e,t,n){e.exports=n.p+"img/notification_block.ad9b07ff.svg"},"77fd":function(e,t,n){"use strict";var r=n("e921"),a=n("8509");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var h=function(e){u(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8152:function(e,t,n){"use strict";var r=n("deba"),a=n.n(r);a.a},8652:function(e,t,n){"use strict";var r=n("cf79"),a=n.n(r);a.a},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8a87":function(e,t,n){"use strict";var r=n("3369"),a=n.n(r);a.a},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return B}));var r=n("4bf2"),a=n.n(r),o=n("6f91"),i=n.n(o),c=n("174f");function s(e){return p(e)||l(e)||m(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return v(e)}function f(e,t){return y(e)||b(e,t)||m(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function h(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function m(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function x(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function S(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?x(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?_(_({},e),{},{payload:x(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function A(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return D.apply(this,arguments)}function D(){return D=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var R=/^raiden:(0x[0-9a-f]{40})$/i;function C(e){return P.apply(this,arguments)}function P(){return P=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function I(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return C(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=S(n);i&&j.put(E,_({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,_({logger:r,level:e,message:n.map(A)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var M=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function U(e){var t,n=h(M);try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,p,f,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,p=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,f=new Date(n.key).toISOString(),d=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(f).concat(d).concat(b," [").concat(s,"] \t=> ").concat(p,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=U(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("e921"),i=n("8509"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=m();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return p(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("72ec"),n("3c13")),k=n("5961"),j=n.n(k),E=n("468d"),T=Object(_["a"])(w,r,a,!1,null,"4eb33862",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a12e:function(e,t,n){},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_TOO_EXPENSIVE":"Pathfinding Service price higher than pfsMaxFee.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_DEPOSIT_OUTDATED":"The UDC contains a target balance different than requested deposit","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("49c0");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},b8c3:function(e,t,n){},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.11.1","contracts":"0.37.1"}')},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("4f30"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("transition",{attrs:{name:"slide"}},[n("router-view",{attrs:{name:"notifications"}})],1),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-snackbar")],1)},o=[],i=n("e921"),c=n("8509"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("div",{staticClass:"app-header__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da")}})],1):e._e()],1),r("div",{staticClass:"app-header__title"},[r("span",{staticClass:"app-header__title__route"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__title__network"},[e._v(" "+e._s(e.network)+" ")])]),r("div",{staticClass:"app-header__icons"},[e.showTitleOnly?e._e():r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1),e.isDisclaimerRoute?e._e():r("header-identicon",{staticClass:"app-header__icons__identicon",nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)])},l=[],p=n("2b7f"),f=n("80bf"),d=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=x();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=Object(p["a"])("notifications"),N=A.mapState,D=A.mapMutations,R=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===f["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:d["a"],AddressDisplay:b["a"]},computed:m(m(m({},Object(p["e"])(["defaultAccount"])),N(["newNotifications"])),Object(p["c"])(["network","isConnected"])),methods:m({},D(["notificationsViewed"]))})],R);var C=R,P=C,I=(n("8a87"),n("3c13")),L=n("5961"),M=n.n(L),U=n("48cd"),B=n("b2b2"),F=n("1885"),W=Object(I["a"])(P,u,l,!1,null,"a4037e3a",null),$=W.exports;M()(W,{VBadge:U["a"],VBtn:B["a"],VImg:F["a"]});var H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},V=[],q=n("0a08");function K(e){return K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function Y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Q(e,t)}function z(e){var t=te();return function(){var n,r=ne(e);if(t){var a=ne(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}var re=function(e){Y(n,e);var t=z(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return X(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);re=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],re);var ae=re,oe=ae,ie=n("8b2c"),ce=n("1f0a"),se=Object(I["a"])(oe,H,V,!1,null,null,null),ue=se.exports;M()(se,{VIcon:ie["a"],VSnackbar:ce["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function fe(e){return fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function he(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e){var t=we();return function(){var n,r=_e(e);if(t){var a=_e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}var ke=function(e){he(n,e);var t=ve(n);function n(){var e;return de(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return ye(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);ke=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:q["a"]}})],ke);var je=ke,Ee=je,Te=Object(I["a"])(Ee,le,pe,!1,null,null,null),xe=Te.exports;M()(Te,{VBtn:B["a"],VSnackbar:ce["a"]});var Se,Ae,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,app:"",rounded:"","max-width":"550px",color:"primary"},on:{input:function(t){return e.setNotificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{icon:"",left:""},on:{click:function(t){return e.dismiss()}}},"v-btn",n,!1),[r("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"2"}},[r("img",{attrs:{src:n("756c")}})]),r("v-col",{staticClass:"notification-area__title"},[r("span",[e._v(" "+e._s(e.notification.title)+" ")])])],1)],1)},De=[];function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function Be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fe(e,t)}function We(e){var t=Ve();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Se||(Se={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(Ae||(Ae={}));var Ke={id:-1,title:"",description:"",icon:"",display:!1,duration:5e3,importance:Se.LOW,context:Ae.NONE,received:new Date},Ge=function(e){Be(n,e);var t=We(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.notification=Ke,e}return Ue(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ke}},{key:"dismiss",value:function(){this.setNotificationShown(this.notification.id),this.notification=Pe(Pe({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Ge.prototype,"onQueueChange",null),Ge=Object(i["a"])([Object(c["a"])({computed:Pe({},Object(p["c"])("notifications",["notificationQueue"])),methods:Pe({},Object(p["d"])("notifications",["setNotificationShown"]))})],Ge);var Ze=Ge,Xe=Ze,Ye=(n("165c"),n("8216")),Qe=n("e3a9"),ze=Object(I["a"])(Xe,Ne,De,!1,null,"1d4a3af2",null),Je=ze.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}M()(ze,{VBtn:B["a"],VCol:Ye["a"],VIcon:ie["a"],VRow:Qe["a"],VSnackbar:ce["a"]});var pt=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));pt=Object(i["a"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:ue,UpdateSnackbar:xe,NotificationSnackbar:Je}})],pt);var ft=pt,dt=ft,bt=(n("1f7b"),n("b37f")),yt=n("5c28"),ht=n("bd9a"),mt=Object(I["a"])(dt,a,o,!1,null,"670b9005",null),vt=mt.exports;M()(mt,{VApp:bt["a"],VContainer:yt["a"],VMain:ht["a"]});var gt=n("0684");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("39c9");function wt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_t(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function _t(e,t){if(e){if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n){var r,a=wt(this.children);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o(e);if(null===i)return void n();if(void 0!==i)return void n(i)}}catch(c){a.e(c)}finally{a.f()}n({})}var Et=n("fe00"),Tt=n("f455"),xt=n("87a2"),St=n("a308"),At=n.n(St),Nt=n("473d"),Dt=n.n(Nt),Rt=n("035e"),Ct=n.n(Rt),Pt=n("95e4"),It=n.n(Pt),Lt=n("d328"),Mt=n.n(Lt),Ut=n("31ec"),Bt=n.n(Ut),Ft=n("e590"),Wt=n.n(Ft),$t=n("12aa"),Ht=n.n($t);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){return Qt(e)||Yt(e)||Xt(e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Yt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qt(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e){var t=Object.values(e).map((function(e){return e.id}));return Math.max.apply(Math,Gt(t).concat([0]))+1}var en={notificationDelete:function(e,t){var n=qt({},e.notifications);delete n[t],e.notifications=n},notificationsViewed:function(e){e.newNotifications=!1},notificationAddOrReplace:function(e,t){var n,r,a,o,i,c=e.notifications,s=Object.values(c).filter((function(e){var n=e.txHash;return n&&n===t.txHash})),u=null!==(n=null===(r=s[0])||void 0===r?void 0:r.id)&&void 0!==n?n:Jt(c),l=!(null===(a=s[0])||void 0===a?void 0:a.id),p=qt(qt({},t),{},{id:u,received:new Date,display:l,context:null!==(o=t.context)&&void 0!==o?o:Ae.NONE,duration:null!==(i=t.duration)&&void 0!==i?i:5e3});e.notifications=qt(qt({},c),{},Kt({},p.id,p)),e.newNotifications=!0},setNotificationShown:function(e,t){e.notifications[t].display=!1},clear:function(e){e.notifications=[]}};function tn(e){return on(e)||an(e)||rn(e)||nn()}function nn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rn(e,t){if(e){if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function an(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function on(e){if(Array.isArray(e))return cn(e)}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sn={notifications:function(e){return Object.values(e.notifications).sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications,n=Object.values(t).map((function(e){return e.id}));return Math.max.apply(Math,tn(n).concat([0]))+1},notificationQueue:function(e){return Object.values(e.notifications).filter((function(e){return e.importance===Se.HIGH&&!0===e.display}))}},un=function(){return{notifications:{},newNotifications:!1}},ln=un(),pn=ln,fn={namespaced:!0,mutations:en,state:pn,getters:sn};function dn(e){return hn(e)||yn(e)||_n(e)||bn()}function bn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function hn(e){if(Array.isArray(e))return kn(e)}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){return En(e)||jn(e,t)||_n(e,t)||wn()}function wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _n(e,t){if(e){if("string"===typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function En(e){if(Array.isArray(e))return e}r["a"].use(p["b"]);var Tn={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:xt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:xt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function xn(){return It()(Tn)}var Sn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},An=new Et["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Nn=new Et["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),Dn={state:xn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=On(r[n],2),o=a[0],i=a[1];o in e.tokens&&Wt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=vn(vn({},e.tokens[o]),i):e.tokens=vn(vn({},e.tokens),{},gn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=dn(t)},updatePresence:function(e,t){e.presences=vn(vn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted,r=e.stateBackup;Object.assign(e,vn(vn({},xn()),{},{settings:t,disclaimerAccepted:n,stateBackup:r}))},updateTransfers:function(e,t){e.transfers=vn(vn({},e.transfers),{},gn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return At()(Ct()(Dt()(e.channels),(function(e){return!Ht()(e)})),(function(n){var r=Mt()(n,t,Object(xt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Sn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Ht()(r)&&(n=Dt()(r)),n}},openChannels:function(e){return Object.keys(e.channels).length>0},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Tt["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Tt["b"].open}));return Bt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){return Object.values(e.transfers).find((function(e){return e.paymentId.eq(t)}))}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[An.plugin,Nn.plugin],modules:{notifications:fn}},Rn=new p["b"].Store(Dn);function Cn(e){var t=Rn.state.disclaimerAccepted,n=e.name===f["a"].DISCLAIMER;return t||n?!t&&n?null:t&&n?{name:f["a"].HOME}:void 0:{name:f["a"].DISCLAIMER,query:{redirectTo:e.fullPath}}}var Pn=[f["a"].ACCOUNT_ROOT,f["a"].ACCOUNT_BACKUP,f["a"].ACCOUNT_RAIDEN,f["a"].ACCOUNT_SETTINGS,f["a"].ACCOUNT_WITHDRAWAL,f["a"].ACCOUNT_UDC];function In(e){var t,n=Rn.getters.isConnected,r=Pn.includes(null!==(t=e.name)&&void 0!==t?t:""),a=e.name===f["a"].HOME;if(!r)return n||a?!n&&a?null:n&&a?{name:f["a"].TRANSFER}:void 0:{name:f["a"].HOME,query:{redirectTo:e.fullPath}}}function Ln(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-16066ff0").then(n.bind(null,"c284"))}),r()}function Mn(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-2cae6ccd").then(n.bind(null,"47f5"))}),r()}var Un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("div",{staticClass:"disclaimer"},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1),n("action-button",{attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},Bn=[],Fn=n("750b");function Wn(e){return Wn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}function qn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kn(e,t)}function Gn(e){var t=Yn();return function(){var n,r=Qn(e);if(t){var a=Qn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zn(this,n)}}function Zn(e,t){return!t||"object"!==Wn(t)&&"function"!==typeof t?Xn(e):t}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}var zn=function(e){qn(n,e);var t=Gn(n);function n(){var e;return $n(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return Vn(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].HOME}}}]),n}(c["e"]);zn=Object(i["a"])([Object(c["a"])({components:{ActionButton:Fn["a"]}})],zn);var Jn=zn,er=Jn,tr=(n("8152"),n("222a")),nr=Object(I["a"])(er,Un,Bn,!1,null,"9fc2819a",null),rr=nr.exports;M()(nr,{VCheckbox:tr["a"],VContainer:yt["a"]});var ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)},or=[],ir=n("4bf2"),cr=n.n(ir),sr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},ur=[],lr=n("66bc"),pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},fr=[];function dr(e){return dr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),e}function mr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function gr(e){var t=_r();return function(){var n,r=kr(e);if(t){var a=kr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(e,t){return!t||"object"!==dr(t)&&"function"!==typeof t?wr(e):t}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}var jr=function(e){mr(n,e);var t=gr(n);function n(){return br(this,n),t.apply(this,arguments)}return hr(n,[{key:"networkUnsupported",get:function(){return this.reason===xt["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===xt["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===xt["a"].RDN_STATE_MIGRATION}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0})],jr.prototype,"reason",void 0),jr=Object(i["a"])([Object(c["a"])({})],jr);var Er=jr,Tr=Er,xr=(n("753f"),n("1ed8")),Sr=Object(I["a"])(Tr,pr,fr,!1,null,"7b92b083",null),Ar=Sr.exports;function Nr(e){return Nr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){Cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Ir(e.prototype,t),n&&Ir(e,n),e}function Mr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}function Ur(e,t){return Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ur(e,t)}function Br(e){var t=$r();return function(){var n,r=Hr(e);if(t){var a=Hr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fr(this,n)}}function Fr(e,t){return!t||"object"!==Nr(t)&&"function"!==typeof t?Wr(e):t}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Hr(e){return Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hr(e)}M()(Sr,{VAlert:xr["a"]});var Vr=function(e){Mr(n,e);var t=Br(n);function n(){var e;return Pr(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return Lr(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",Rr(Rr({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0,type:Boolean,default:!1})],Vr.prototype,"visible",void 0),Object(i["a"])([Object(c["d"])({default:!1,required:!0,type:Boolean})],Vr.prototype,"connecting",void 0),Object(i["a"])([Object(c["d"])({required:!0})],Vr.prototype,"hasProvider",void 0),Object(i["a"])([Object(c["b"])()],Vr.prototype,"close",null),Object(i["a"])([Object(c["b"])()],Vr.prototype,"connect",null),Vr=Object(i["a"])([Object(c["a"])({components:{RaidenDialog:lr["a"],ActionButton:Fn["a"],NoAccessMessage:Ar},computed:Object(p["e"])(["accessDenied"])})],Vr);var qr=Vr,Kr=qr,Gr=(n("e4b6"),n("5af4")),Zr=Object(I["a"])(Kr,sr,ur,!1,null,"469a86df",null),Xr=Zr.exports;function Yr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yr(o,r,a,i,c,"next",e)}function c(e){Yr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),e}M()(Zr,{VCardText:Gr["b"],VCardTitle:Gr["c"]});var ta=function(){function e(){zr(this,e)}return ea(e,null,[{key:"provider",value:function(){var e=Qr(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,!t){e.next=5;break}n=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 5:if("undefined"===typeof window.ethereum){e.next=12;break}return window.ethereum.autoRefreshOnNetworkChange=!1,e.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:n=window.ethereum,e.next=13;break;case 12:window.web3&&(n=window.web3.currentProvider);case 13:return n&&n.isMetaMask&&n.on("chainChanged",(function(){return window.location.replace(window.location.origin)})),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return la(e)||ua(e,t)||ca(e,t)||ia()}function ia(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ca(e,t){if(e){if("string"===typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sa(e,t):void 0}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ua(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function la(e){if(Array.isArray(e))return e}function pa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function fa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){pa(o,r,a,i,c,"next",e)}function c(e){pa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return t&&ba(e.prototype,t),n&&ba(e,n),e}ta.injectedWeb3Available=function(){return window.ethereum||window.web3};var ha=function(){function e(){da(this,e)}return ya(e,null,[{key:"contracts",value:function(){var e=fa(cr.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,p;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=oa(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=oa(s,2),l=u[0],p=u[1],e.abrupt("return",ra(ra({},l.contracts),p.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=fa(cr.a.mark((function e(){var t,n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function ma(e){return ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function _a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){wa(o,r,a,i,c,"next",e)}function c(e){wa(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t&&ja(e.prototype,t),n&&ja(e,n),e}function Ta(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function xa(e,t){return xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xa(e,t)}function Sa(e){var t=Da();return function(){var n,r=Ra(e);if(t){var a=Ra(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Aa(this,n)}}function Aa(e,t){return!t||"object"!==ma(t)&&"function"!==typeof t?Na(e):t}function Na(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ra(e)}var Ca=function(e){Ta(n,e);var t=Sa(n);function n(){var e;return ka(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Ea(n,[{key:"created",value:function(){var e=_a(cr.a.mark((function e(){var t;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ta.injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,ha.configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=_a(cr.a.mark((function e(){var t,n,r,a;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,a=this.stateBackup,this.$store.commit("reset"),this.$store.commit("accessDenied",xt["a"].UNDEFINED),e.next=11,this.$raiden.connect(a,!!n||void 0);case 11:this.connecting=!1,this.accessDenied||(this.connectDialog=!1,this.$router.push(this.navigationTarget));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].TRANSFER}}}]),n}(c["e"]);Ca=Object(i["a"])([Object(c["a"])({computed:ga(ga({},Object(p["e"])(["loading","accessDenied","stateBackup","settings"])),Object(p["c"])(["isConnected","tokens"])),components:{ActionButton:Fn["a"],ConnectDialog:Xr,NoAccessMessage:Ar}})],Ca);var Pa=Ca,Ia=Pa,La=(n("fe3a"),Object(I["a"])(Ia,ar,or,!1,null,"54406a52",null)),Ma=La.exports;M()(La,{VCol:Ye["a"],VContainer:yt["a"],VImg:F["a"],VRow:Qe["a"]});var Ua=[{path:"/",name:f["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:rr},{path:"*",redirect:"/"},{path:"/home",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Ma},{path:"/transfer/:token?",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-308e79c1"),n.e("chunk-14022d9a"),n.e("chunk-4a422564"),n.e("chunk-2810a456")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-308e79c1"),n.e("chunk-4a422564"),n.e("chunk-51b0b4b8")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-87b2e3ca")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-308e79c1"),n.e("chunk-14022d9a"),n.e("chunk-1dfdcca3"),n.e("chunk-62218639")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-308e79c1"),n.e("chunk-1dfdcca3"),n.e("chunk-16b0b981")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-308e79c1"),n.e("chunk-363758e3")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:Ln},{path:"/account",beforeEnter:Mn,children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-4a090f88")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-3a452f2e")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-308e79c1"),n.e("chunk-85036ae8")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-492ca204")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-0466bfdd"),n.e("chunk-c9c47ac8")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-308e79c1"),n.e("chunk-0bc4b99b")]).then(n.bind(null,"4c07"))}}]}];r["a"].use(Ot["a"]);var Ba=new Ot["a"]({base:"/staging/",mode:"hash",routes:Ua});Ba.beforeEach(jt.bind({children:[Cn,In]}));var Fa=Ba,Wa=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var $a=n("a3d5"),Ha=n("49c0"),Va=n("22ee"),qa=n("70de"),Ka=n("a8c1"),Ga=n.n(Ka),Za=n("89d8"),Xa=n("bb25");function Ya(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Xa["a"]);var Qa=new Xa["a"]({locale:"en",fallbackLocale:"en",messages:Ya()}),za=n("2dfa"),Ja=n.n(za);function eo(e){return eo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}function no(e){var t=co();return function(){var n,r=lo(e);if(t){var a=lo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(e,t){return!t||"object"!==eo(t)&&"function"!==typeof t?ao(e):t}function ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e){var t="function"===typeof Map?new Map:void 0;return oo=function(e){if(null===e||!so(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return io(e,arguments,lo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),uo(n,e)},oo(e)}function io(e,t,n){return io=co()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&uo(o,n.prototype),o},io.apply(null,arguments)}function co(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function so(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function uo(e,t){return uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uo(e,t)}function lo(e){return lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lo(e)}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t){return mo(e)||ho(e,t)||Oo(e,t)||yo()}function yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ho(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mo(e){if(Array.isArray(e))return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function go(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Oo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Oo(e,t){if(e){if("string"===typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ko(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_o(o,r,a,i,c,"next",e)}function c(e){_o(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t,n){return t&&Eo(e.prototype,t),n&&Eo(e,n),e}var xo=function(){function e(t){jo(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return To(e,[{key:"updateBalances",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=go(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new So(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=ko(cr.a.mark((function t(n,r){var a,o,i,c,s,u=this;return cr.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ha.configuration();case 3:return o=t.sent,t.next=6,ta.provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=50;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Tt["f"](Tt["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=29,this.monitorPreSetTokens();case 29:return a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(Va["a"])((function(e){return"block/new"===e.type})),Object(qa["a"])((function(){return u.fetchTokenData(Ja()(u.store.getters.tokens.map((function(e){return e.address})).concat(u._userDepositTokenAddress)))}))).subscribe(),a.events$.pipe(Object(Va["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),!(null===(n=t.caps)||void 0===n?void 0:n[Tt["a"].NO_RECEIVE])){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",vo({},t.payload.token,{address:t.payload.token})),e.next=46;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",vo({},t.meta.address,t.payload.available)),e.next=46;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=46;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=46;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=46;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner);case 31:e.next=46;break;case 33:if("channel/settle/failure"!==t.type){e.next=38;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner);case 36:e.next=46;break;case 38:if("channel/open/success"!==t.type){e.next=43;break}return e.next=41,u.notifyChannelOpenSuccess(t.payload.txBlock,t.payload.txHash,t.payload.confirmed,t.meta.partner);case 41:e.next=46;break;case 43:if("channel/open/failed"!==t.type){e.next=46;break}return e.next=46,u.notifyChannelOpenFailed(t.payload.message);case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=42,this.getBalance();case 42:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=50;break}return t.t2=this.store,t.next=48,this.getBalance(a.address);case 48:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 50:t.next=56;break;case 52:t.prev=52,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?xt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?xt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Ao?xt["a"].INITIALIZATION_FAILED:xt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 56:this.store.commit("loadComplete");case 57:case"end":return t.stop()}}),t,this,[[0,52]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:Qa.t("receiving-disabled-dialog.title"),description:Qa.t("receiving-disabled-dialog.body"),importance:Se.HIGH,context:Ae.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=go(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=ko(cr.a.mark((function e(t,n,r){var a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=$a["a"].toUnits(n,i),s="string"===typeof t?Qa.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Qa.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.failure.title"),description:u,context:Ae.ERROR,importance:Se.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=ko(cr.a.mark((function e(t,n){var r,a,o,i,c;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=$a["a"].toUnits(t,o),c=$a["a"].toUnits(n,o),e.next=6,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.withdrawal.success.title"),description:Qa.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:Ae.INFO,importance:Se.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=$a["a"].toUnits(r,c),e.next=5,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.ms-balance-proof.title"),description:Qa.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:Ae.INFO,importance:Se.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Qa.t("notifications.settlement.success.description",{partner:t}),e.next=3,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.success.title"),description:n,icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.settlement.failure.title"),description:Qa.t("notifications.settlement.failure.description",{partner:t}),icon:Qa.t("notifications.settlement.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenSuccess",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i,c,s;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=void 0!==(null===(o=this.store.state)||void 0===o||null===(i=o.config)||void 0===i?void 0:i.confirmationBlocks)?t+this.store.state.config.confirmationBlocks:0,s=Qa.t("notifications.channel-open.success.description",{partner:a}),e.next=4,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.success.title"),description:s,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH,txConfirmationBlock:c,txHash:n,txConfirmed:r});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelOpenFailed",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.commit("notifications/notificationAddOrReplace",{title:Qa.t("notifications.channel-open.failure.title"),description:t,icon:Qa.t("notifications.channel-open.icon"),context:Ae.NONE,importance:Se.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",$a["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=ko(cr.a.mark((function e(t){var n,r,a,o,i,c,s,u;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=bo(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){var o,i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Tt["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=ko(cr.a.mark((function e(t){var n,r=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",vo({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Ga()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a,o){var i;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=ko(cr.a.mark((function e(t,n,r,a){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=ko(cr.a.mark((function e(t,n,r){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=ko(cr.a.mark((function e(t,n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Tt["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=ko(cr.a.mark((function e(t){var n,r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",vo({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=ko(cr.a.mark((function e(){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._raiden.stop(),e.abrupt("return",this._raiden.dumpDatabase());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Ha["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Ha["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=ko(cr.a.mark((function e(t,n){var r;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=ko(cr.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=ko(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Za["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,Ga()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=fo(fo({},t),r[e]),delete r[e])})),i=function(){var e=ko(cr.a.mark((function e(n){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=fo(fo({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,Ga()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=ko(cr.a.mark((function e(t){return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=ko(cr.a.mark((function e(t){var n;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=ko(cr.a.mark((function e(t){var n,r,a,o,i=arguments;return cr.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ha.contracts();case 6:return o=e.sent,e.next=9,Tt["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Ao(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),So=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error)),Ao=function(e){to(n,e);var t=no(n);function n(){return jo(this,n),t.apply(this,arguments)}return n}(oo(Error));function No(e,t){e.prototype.$raiden=new xo(Rn)}var Do=n("5ffb"),Ro=n.n(Do);function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t,n){return t&&Po(e.prototype,t),n&&Po(e,n),e}var Lo=function(){function e(){Co(this,e),this.cache={}}return Io(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Ro()(e);return this.cache[e]=n,n}}]),e}();function Mo(e,t){e.prototype.$identicon=new Lo}n("643f"),n("b4fc"),n("bd89");var Uo=n("4a1f");r["a"].use(Uo["a"]);var Bo=new Uo["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Fo=n("a24d"),Wo=(n("6a4f"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Wo["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Wa["b"])(),r["a"].use(No),r["a"].use(Mo),r["a"].use(Fo["a"]),new r["a"]({vuetify:Bo,router:Fa,store:Rn,i18n:Qa,render:function(e){return e(vt)}}).$mount("#app")},cf79:function(e,t,n){},d6a1:function(e,t,n){},deba:function(e,t,n){},e4b6:function(e,t,n){"use strict";var r=n("3219"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I have read, understood and hereby accept the above disclaimer and privacy warning","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","block-count-progress":"Blocks remaining: ","settlement":{"icon":"notification_settle","success":{"title":"Channel Settlement","description":"Channel with {partner} was settled."},"failure":{"title":"Channel Settlement","description":"Channel settlement with {partner} failed."}},"channel-open":{"icon":"notification_channels","success":{"title":"Channel Open","description":"Open channel with {partner}.","block-count-success":"Channel successfully opened"},"failure":{"title":"Channel Open Failure"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State and Connect","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"transfer-menus":{"change-token-title":"Change Token","deposit-button":"Deposit","channel-button":"Channels","no-channels":"No open channels"},"transfer-inputs":{"title":"Transfer"},"no-channels-dialog":{"title":"No connected tokens and open channels","button":"Connect new token"},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return ng})),n.d(t,"b",(function(){return Jr})),n.d(t,"a",(function(){return Pe})),n.d(t,"d",(function(){return Ae})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return yt})),n.d(t,"g",(function(){return dn}));var r={};n.r(r),n.d(r,"messageSend",(function(){return Hr})),n.d(r,"messageGlobalSend",(function(){return Vr})),n.d(r,"messageReceived",(function(){return qr}));var a={};n.r(a),n.d(a,"newBlock",(function(){return La})),n.d(a,"tokenMonitored",(function(){return Ma})),n.d(a,"channelOpen",(function(){return Ua})),n.d(a,"channelMonitored",(function(){return Ba})),n.d(a,"channelDeposit",(function(){return Fa})),n.d(a,"channelWithdrawn",(function(){return Wa})),n.d(a,"channelClose",(function(){return $a})),n.d(a,"channelSettleable",(function(){return Ha})),n.d(a,"channelSettle",(function(){return Va}));var o={};n.r(o),n.d(o,"matrixSetup",(function(){return Ga})),n.d(o,"matrixPresence",(function(){return Za})),n.d(o,"matrixRoom",(function(){return Xa})),n.d(o,"matrixRoomLeave",(function(){return Ya})),n.d(o,"rtcChannel",(function(){return Qa}));var i={};n.r(i),n.d(i,"transfer",(function(){return ao})),n.d(i,"transferSigned",(function(){return oo})),n.d(i,"transferProcessed",(function(){return io})),n.d(i,"transferSecret",(function(){return co})),n.d(i,"transferSecretRegister",(function(){return so})),n.d(i,"transferSecretRequest",(function(){return uo})),n.d(i,"transferSecretReveal",(function(){return lo})),n.d(i,"transferUnlock",(function(){return po})),n.d(i,"transferUnlockProcessed",(function(){return fo})),n.d(i,"transferExpire",(function(){return bo})),n.d(i,"transferExpireProcessed",(function(){return yo})),n.d(i,"transferClear",(function(){return ho})),n.d(i,"transferLoad",(function(){return mo})),n.d(i,"withdraw",(function(){return go})),n.d(i,"withdrawMessage",(function(){return Oo})),n.d(i,"withdrawExpire",(function(){return wo})),n.d(i,"withdrawCompleted",(function(){return _o}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Eo})),n.d(c,"pfsListUpdated",(function(){return To})),n.d(c,"iouPersist",(function(){return xo})),n.d(c,"iouClear",(function(){return So})),n.d(c,"udcDeposit",(function(){return Ao})),n.d(c,"udcWithdraw",(function(){return Do})),n.d(c,"udcWithdrawn",(function(){return Ro})),n.d(c,"msBalanceProofSent",(function(){return Co}));var s={};n.r(s),n.d(s,"dbShutdownEpic",(function(){return Pu}));var u={};n.r(u),n.d(u,"initNewBlockEpic",(function(){return ff})),n.d(u,"initTokensRegistryEpic",(function(){return df})),n.d(u,"initMonitorProviderEpic",(function(){return bf})),n.d(u,"channelEventsEpic",(function(){return gf})),n.d(u,"channelMonitoredEpic",(function(){return Of})),n.d(u,"channelOpenEpic",(function(){return wf})),n.d(u,"channelDepositEpic",(function(){return kf})),n.d(u,"channelCloseEpic",(function(){return jf})),n.d(u,"channelUpdateEpic",(function(){return Ef})),n.d(u,"channelAutoSettleEpic",(function(){return Tf})),n.d(u,"channelSettleEpic",(function(){return xf})),n.d(u,"channelSettleableEpic",(function(){return Sf})),n.d(u,"channelUnlockEpic",(function(){return Af})),n.d(u,"confirmationEpic",(function(){return Df}));var l={};n.r(l),n.d(l,"initMatrixEpic",(function(){return gd})),n.d(l,"matrixShutdownEpic",(function(){return Od})),n.d(l,"matrixMonitorPresenceEpic",(function(){return Bd})),n.d(l,"matrixPresenceUpdateEpic",(function(){return Fd})),n.d(l,"matrixMonitorChannelPresenceEpic",(function(){return Wd})),n.d(l,"matrixUpdateCapsEpic",(function(){return $d})),n.d(l,"matrixCreateRoomEpic",(function(){return rb})),n.d(l,"matrixInviteEpic",(function(){return ab})),n.d(l,"matrixHandleInvitesEpic",(function(){return ob})),n.d(l,"matrixLeaveExcessRoomsEpic",(function(){return ib})),n.d(l,"matrixLeaveUnknownRoomsEpic",(function(){return cb})),n.d(l,"matrixCleanLeftRoomsEpic",(function(){return sb})),n.d(l,"matrixCleanMissingRoomsEpic",(function(){return ub})),n.d(l,"matrixMessageReceivedUpdateRoomEpic",(function(){return lb})),n.d(l,"matrixMessageSendEpic",(function(){return kb})),n.d(l,"matrixMessageGlobalSendEpic",(function(){return jb})),n.d(l,"matrixMessageReceivedEpic",(function(){return Eb})),n.d(l,"deliveredEpic",(function(){return Tb})),n.d(l,"rtcConnectEpic",(function(){return Qb}));var p={};n.r(p),n.d(p,"transferAutoExpireEpic",(function(){return uy})),n.d(p,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Uy})),n.d(p,"initQueuePendingEnvelopeMessagesEpic",(function(){return Gy})),n.d(p,"initQueuePendingReceivedEpic",(function(){return Zy})),n.d(p,"transferClearCompletedEpic",(function(){return Yy})),n.d(p,"transferMediateEpic",(function(){return oh})),n.d(p,"transferProcessedReceivedEpic",(function(){return fh})),n.d(p,"transferProcessedSendEpic",(function(){return dh})),n.d(p,"transferRetryMessageEpic",(function(){return Oh})),n.d(p,"transferSecretRequestedEpic",(function(){return Ah})),n.d(p,"transferSecretRevealEpic",(function(){return Dh})),n.d(p,"transferSecretRevealedEpic",(function(){return Rh})),n.d(p,"transferRequestUnlockEpic",(function(){return Ch})),n.d(p,"monitorSecretRegistryEpic",(function(){return Ph})),n.d(p,"transferSuccessOnSecretRegisteredEpic",(function(){return Ih})),n.d(p,"transferAutoRegisterEpic",(function(){return Lh})),n.d(p,"transferSecretRegisterEpic",(function(){return Mh})),n.d(p,"initWithdrawMessagesEpic",(function(){return Kh})),n.d(p,"withdrawSendRequestMessageEpic",(function(){return Gh})),n.d(p,"withdrawSendTxEpic",(function(){return Zh})),n.d(p,"withdrawMessageProcessedEpic",(function(){return Xh})),n.d(p,"autoWithdrawExpireEpic",(function(){return Yh})),n.d(p,"withdrawSendExpireMessageEpic",(function(){return Qh}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return Bm})),n.d(f,"pfsCapacityUpdateEpic",(function(){return Fm})),n.d(f,"pfsFeeUpdateEpic",(function(){return Wm})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return $m})),n.d(f,"monitorUdcBalanceEpic",(function(){return Hm})),n.d(f,"udcDepositEpic",(function(){return qm})),n.d(f,"monitorRequestEpic",(function(){return Gm})),n.d(f,"udcWithdrawRequestEpic",(function(){return Zm})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return Xm})),n.d(f,"udcWithdrawPlannedEpic",(function(){return Ym})),n.d(f,"msMonitorNewBPEpic",(function(){return Qm}));var d=n("4bf2"),b=n.n(d),y=(n("9c20"),n("856a"),n("8e94"),n("6f91")),h=n.n(y),m=n("5e51"),v=n("832b"),g=n("9d0e"),O=h.a.methodFactory;Object.assign(h.a,{methodFactory:O}),m["logger"].setLevel(h.a.levels.DEBUG);var w=Object(v["getRequest"])();Object(v["request"])((function(e,t){var n=w(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7")),Object.assign(g,{createNewMatrixCall:function(){return null}});var _=n("6fd9"),k=n("49c0"),j=n("89d8"),E=n("45c3"),T=n("2b19"),x=n("ae32"),S=n("ee80"),A=n.n(S),N=n("e68d"),D=n.n(N),R=n("9c86"),C=n("d0e7"),P=n("6c90"),I=n("76fd"),L=n("2430"),M=n("4f19"),U=n("c49b"),B=n("b2be"),F=n("22ee"),W=n("6d46"),$=n("391b"),H=n("55da"),V=n("751e");function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}var Z=function(){function e(){q(this,e)}return G(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,X,t)}}]),e}(),X=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}var J=function(){function e(){Y(this,e)}return z(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,ee,t)}}]),e}(),ee=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant1_settlement",type:"tuple"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant2_settlement",type:"tuple"}],name:"settleChannel2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}var ae=function(){function e(){te(this,e)}return re(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,oe,t)}}]),e}(),oe=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}var ue=function(){function e(){ie(this,e)}return se(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,le,t)}}]),e}(),le=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}var be=function(){function e(){pe(this,e)}return de(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,ye,t)}}]),e}(),ye=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ge=function(){function e(){he(this,e)}return ve(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Oe,t)}}]),e}(),Oe=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}var je=function(){function e(){we(this,e)}return ke(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}var Ae,Ne=function(){function e(){Te(this,e)}return Se(e,null,[{key:"connect",value:function(e,t){return new V["Contract"](e,De,t)}}]),e}(),De=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Re=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Ae||(Ae={}));var Ce,Pe,Ie=Object(k["hexlify"])(Object(k["padZeros"])([],65)),Le=Object(k["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ce||(Ce={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Pe||(Pe={}));var Me=n("dec3"),Ue=n("5dec"),Be=n("3b38"),Fe=n("efef"),We=n("5b3b"),$e=n.n(We),He=n("a32b");function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e){return ze(e)||Qe(e)||Ye(e)||Xe()}function Xe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){if(e){if("string"===typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function Qe(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ze(e){if(Array.isArray(e))return Je(e)}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}function at(e){var t=ut();return function(){var n,r=ft(e);if(t){var a=ft(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?it(e):t}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){var t="function"===typeof Map?new Map:void 0;return ct=function(e){if(null===e||!lt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return st(e,arguments,ft(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pt(n,e)},ct(e)}function st(e,t,n){return st=ut()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&pt(o,n.prototype),o},st.apply(null,arguments)}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}function ft(e){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ft(e)}var dt=He,bt=Me["r"](Me["s"],Me["x"]([Me["s"],Me["n"],Me["e"],Me["m"]])),yt=function(e){rt(n,e);var t=at(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return et(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(it(r),n.prototype),r}return nt(n,[{key:"code",get:function(){var e,t=this;return null!==(e=$e()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ct(Error));function ht(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?st(yt,Ze(t)):new yt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var mt=Me["j"]([Me["v"]({name:Me["s"]}),Me["o"]({message:Me["s"],stack:Me["s"],details:bt})]),vt=new Me["b"]("Error",(function(e){return"object"===Ge(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Fe["pipe"])(mt.decode(e),Object(Be["map"])((function(e){return"details"in e?Object.assign(new yt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return qe({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function gt(e,t){if(null==e)return{};var n,r,a=Ot(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ot(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){Ue["ThrowReporter"].report(e)}function Et(e,t,n,r){try{var a=e.decode(t);return jt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new yt(n):o}}function Tt(e){return null!=e}var xt=new Me["b"]("BigNumber",k["BigNumber"].isBigNumber,(function(e,t){try{return Me["t"](Object(k["bigNumberify"])(e))}catch(n){return Me["h"](e,t)}}),(function(e){return e.toString()})),St=D()((function(e){return Me["f"](Me["s"],(function(t){return"string"===typeof t&&(e?Object(k["hexDataLength"])(t)===e:Object(k["isHexString"])(t))}),"HexString")})),At=D()((function(e){var t=e?j["Zero"].sub(j["Two"].pow(8*e-1)):void 0,n=e?j["Two"].pow(8*e-1):void 0;return Me["f"](xt,(function(e){return xt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Nt=D()((function(e){var t=e?j["Zero"]:void 0,n=e?j["Two"].pow(8*e):void 0;return Me["f"](xt,(function(e){return xt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),Dt=St(65),Rt=St(32),Ct=St(32),Pt=St(32);function It(e){try{return Object(k["getAddress"])(e)===e}catch(t){return!1}}var Lt=new Me["a"]("Address",It,(function(e,t){try{return Me["t"](Object(k["getAddress"])(e))}catch(n){return Me["h"](e,t)}}),Me["i"],St(20),It),Mt=D()((function(e){return Me["j"]([e,Me["p"](Me["v"]({ts:Me["n"]}))])}));function Ut(e){return _t(_t({},e),{},{ts:Date.now()})}function Bt(e){e.ts;var t=gt(e,["ts"]);return t}var Ft=D()((function(e){return Me["j"]([e,Me["p"](Me["v"]({signature:Dt}))])})),Wt=D()((function(e){return new Me["b"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Me["t"](t):Me["h"](t,n)}),Me["i"])}));function $t(e){return e[e.length-1]}function Ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.lt(t)?t:e}))}var Vt=n("55af"),qt=n("f04c"),Kt=n("aee4"),Gt=n("141b"),Zt=n("70de"),Xt=n("bce1");function Yt(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yt(o,r,a,i,c,"next",e)}function c(e){Yt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function zt(e){return nn(e)||tn(e)||en(e)||Jt()}function Jt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function en(e,t){if(e){if("string"===typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}function tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function nn(e){if(Array.isArray(e))return rn(e)}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(qt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(L["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),sn(e,"block")})).pipe(Object(Gt["a"])(Math.ceil(e.pollingInterval/10)),Object(Zt["a"])((function(n){return Object(L["a"])((function(){return e.getLogs(on(on({},t),{},{fromBlock:i[0],toBlock:n}))})).pipe(Object($["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(zt(e.map((function(e){return e.blockNumber})).filter(Tt).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Kt["a"])(e)})),Object(Xt["a"])((function(){return M["a"]})))})))}function un(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=on(on(on({},t),n),{},{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(zt(r),[a])}};return void 0!==t?n(t):n}function ln(e){return pn.apply(this,arguments)}function pn(){return pn=Qt(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Vt["getNetwork"],e.t1=parseInt,e.next=4,t.send("net_version",[]);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function fn(e){var t=e.send;e.send=function(){var n=Qt(b.a.mark((function n(r,a){return b.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("eth_sign"!==r){n.next=2;break}return n.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch((function(n){if(n instanceof Error&&(n.message.includes("The method personal_sign does not exist")||n.message.includes("Method personal_sign not supported")))return e.send=t,e.send(r,a);throw n})));case 2:return n.abrupt("return",t.apply(this,[r,a]));case 3:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()}function dn(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var bn,yn=Me["p"](Me["r"](Me["s"],Me["c"]));function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=Me["v"]({urls:Me["x"]([Me["s"],Me["d"](Me["s"])])}),On=Me["p"](Me["j"]([Me["v"]({matrixServerLookup:Me["s"],revealTimeout:Me["n"],settleTimeout:Me["n"],httpTimeout:Me["n"],discoveryRoom:Me["x"]([Me["s"],Me["m"]]),pfsRoom:Me["x"]([Me["s"],Me["m"]]),monitoringRoom:Me["x"]([Me["s"],Me["m"]]),pfs:Me["x"]([Lt,Me["s"],Me["m"]]),pfsSafetyMargin:Me["n"],pfsMaxPaths:Me["n"],pfsMaxFee:Nt(32),pfsIouTimeout:Me["n"],matrixExcessRooms:Me["n"],confirmationBlocks:Me["n"],monitoringReward:Me["x"]([Me["m"],Nt(32)]),logger:Me["k"]((bn={},vn(bn,"",null),vn(bn,"trace",null),vn(bn,"debug",null),vn(bn,"info",null),vn(bn,"warn",null),vn(bn,"error",null),bn)),caps:Me["x"]([Me["m"],yn]),fallbackIceServers:Me["d"](gn),rateToSvt:Me["r"](Me["s"],Nt(32)),pollingInterval:Me["n"],minimumAllowance:Nt(32),autoSettle:Me["e"]}),Me["o"]({matrixServer:Me["s"],subkey:Me["e"]})])),wn=Me["p"](Me["g"](Me["o"](mn(mn({},On.type.types["0"].props),On.type.types["1"].props))));function _n(e,t){var n,r=e.network;return mn({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(dn(r),"_discovery"),pfsRoom:"raiden_".concat(dn(r),"_path_finding"),monitoringRoom:"raiden_".concat(dn(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,pfsMaxPaths:3,pfsMaxFee:Object(k["parseEther"])("0.05"),pfsIouTimeout:2e5,confirmationBlocks:5,monitoringReward:Object(k["parseEther"])("5"),logger:"info",caps:(n={},vn(n,Pe.NO_DELIVERY,!0),vn(n,Pe.NO_MEDIATE,!0),vn(n,Pe.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3,minimumAllowance:j["MaxUint256"],autoSettle:!1},t)}var kn,jn=Me["s"],En=(Me["s"],Me["j"]([Me["v"]({amount:Nt(32),expiration:Nt(32),secrethash:Rt}),Me["o"]({registered:Me["l"](!0)})],"Lock")),Tn=Me["p"](Me["v"]({chainId:Nt(32),tokenNetworkAddress:Lt,channelId:Nt(32),nonce:Nt(8),transferredAmount:Nt(32),lockedAmount:Nt(32),locksroot:Rt,additionalHash:Rt})),xn=Tn,Sn={chainId:j["Zero"],tokenNetworkAddress:j["AddressZero"],channelId:j["Zero"],nonce:j["Zero"],transferredAmount:j["Zero"],lockedAmount:j["Zero"],locksroot:Le,additionalHash:j["HashZero"],signature:Ie};(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(kn||(kn={}));var An=Me["p"](Me["v"]({message_identifier:Nt(8)})),Nn=Me["p"](Me["v"]({type:Me["l"](kn.DELIVERED),delivered_message_identifier:Nt(8)})),Dn=Nn,Rn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.PROCESSED)}),An])),Cn=Rn,Pn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.SECRET_REQUEST),payment_identifier:Nt(8),secrethash:Rt,amount:Nt(32),expiration:Nt(32)}),An])),In=Pn,Ln=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.SECRET_REVEAL),secret:Ct}),An])),Mn=Ln,Un=Me["p"](Me["j"]([Me["v"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),nonce:Nt(8),transferred_amount:Nt(32),locked_amount:Nt(32),locksroot:Rt}),An])),Bn=Me["p"](Me["v"]({route:Me["q"](Lt)})),Fn=Bn,Wn=Me["p"](Me["v"]({routes:Me["q"](Fn)})),$n=Wn,Hn=Me["p"](Me["j"]([Me["v"]({payment_identifier:Nt(8),token:Lt,recipient:Lt,lock:En,target:Lt,initiator:Lt,metadata:$n}),Un])),Vn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.LOCKED_TRANSFER)}),Hn])),qn=Vn,Kn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.UNLOCK),payment_identifier:Nt(8),secret:Ct}),Un])),Gn=Kn,Zn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.LOCK_EXPIRED),recipient:Lt,secrethash:Rt}),Un])),Xn=Zn,Yn=Me["p"](Me["v"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),participant:Lt,total_withdraw:Nt(32),nonce:Nt(8),expiration:Nt(32)})),Qn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.WITHDRAW_REQUEST)}),Yn,An])),zn=Qn,Jn=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.WITHDRAW_CONFIRMATION)}),Yn,An])),er=Jn,tr=Me["p"](Me["j"]([Me["v"]({type:Me["l"](kn.WITHDRAW_EXPIRED)}),Yn,An])),nr=tr,rr=Me["p"](Me["v"]({type:Me["l"](kn.PFS_CAPACITY_UPDATE),canonical_identifier:Me["p"](Me["v"]({chain_identifier:Nt(32),token_network_address:Lt,channel_identifier:Nt(32)})),updating_participant:Lt,other_participant:Lt,updating_nonce:Nt(8),other_nonce:Nt(8),updating_capacity:Nt(32),other_capacity:Nt(32),reveal_timeout:Nt(32)})),ar=rr,or=Me["p"](Me["v"]({type:Me["l"](kn.PFS_FEE_UPDATE),canonical_identifier:Me["p"](Me["v"]({chain_identifier:Nt(32),token_network_address:Lt,channel_identifier:Nt(32)})),updating_participant:Lt,timestamp:Me["s"],fee_schedule:Me["v"]({cap_fees:Me["e"],imbalance_penalty:Me["x"]([Me["m"],Me["d"](Me["u"]([Nt(32),At(32)]))]),proportional:At(32),flat:At(32)})})),ir=or,cr=Me["p"](Me["v"]({type:Me["l"](kn.MONITOR_REQUEST),balance_proof:Me["v"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),nonce:Nt(8),balance_hash:Rt,additional_hash:Rt,signature:Dt}),monitoring_service_contract_address:Lt,non_closing_participant:Lt,non_closing_signature:Dt,reward_amount:Nt(32)})),sr=cr,ur=[Dn,Cn,In,Mn,qn,Gn,Xn,zn,er,nr,ar,ir,sr],lr=ur,pr=Me["x"](lr),fr=n("bb5f"),dr=n("deeb"),br=n("6e0b"),yr=n.n(br);function hr(e,t){var n;if("boolean"===typeof e?e=e?j["One"]:j["Zero"]:"number"===typeof e&&(e=Object(k["bigNumberify"])(e)),"string"!==typeof e||Object(fr["isHexString"])(e)||(e=Object(k["toUtf8Bytes"])(e)),Object(fr["isArrayish"])(e)&&(e=Object(fr["hexlify"])(e)),xt.is(e)){if(e.lt(0))throw new yt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(j["Two"].pow(8*t)))throw new yt(dt.DTA_NUMBER_TOO_LARGE);n=Object(fr["hexZeroPad"])(Object(fr["hexlify"])(e),t)}else{if("string"!==typeof e)throw new yt(dt.DTA_UNENCODABLE_DATA);if(Object(fr["hexDataLength"])(e)!==t)throw new yt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var mr=yr()({storeAsString:!0}),vr=mr.parse,gr=mr.stringify,Or=n("731d"),wr=n.n(Or);function _r(e){return Tr(e)||Er(e)||jr(e)||kr()}function kr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jr(e,t){if(e){if("string"===typeof e)return xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xr(e,t):void 0}}function Er(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Tr(e){if(Array.isArray(e))return xr(e)}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ar(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Sr(o,r,a,i,c,"next",e)}function c(e){Sr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Pr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Me["v"](Dr(Dr(Dr({type:Me["l"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Me["l"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Dr({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Dr(Dr(Dr({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Ir(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Me["c"],c=Pr(t,a,e),s=Pr(n,o,e),u=Pr(r,i,e,!0);return{request:c,success:s,failure:u}}function Lr(e){var t=function(t){return wr()(t.meta,e,(function(e,t){return xt.is(e)&&xt.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Mr(e,t){var n=function(n){return Cr([e.success,e.failure],n)&&Lr(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Ur(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Mr(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Br(e,t,n){return Fr.apply(this,arguments)}function Fr(){return Fr=Ar(b.a.mark((function e(t,n,r){var a,o=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",r.pipe(Object(W["a"])(a?Ur(t,n):Mr(t,n)),Object(B["a"])((function(e){var n;if(t.failure.is(e))throw e.payload;if(!1===(null===(n=e.payload)||void 0===n?void 0:n.confirmed))throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:e.payload.txHash});return e.payload}))).toPromise());case 2:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Wr(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return ht(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(_r(a.map((function(e){return Rr({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var $r,Hr=Ir(Me["v"]({address:Lt,msgId:Me["s"]}),"message/send/request","message/send/success","message/send/failure",Me["v"]({message:Me["x"]([Me["s"],Ft(pr)])}),Me["x"]([Me["w"],Me["v"]({via:Me["s"]})])),Vr=Pr("message/global/send",Me["v"]({message:Me["x"]([Me["s"],Ft(pr)])}),Me["v"]({roomName:Me["s"]})),qr=Pr("message/received",Me["j"]([Me["v"]({text:Me["s"],ts:Me["n"]}),Me["o"]({message:Me["x"]([pr,Ft(pr)]),userId:Me["s"],roomId:Me["s"]})]),Me["v"]({address:Lt}));function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){Qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Xr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zr(o,r,a,i,c,"next",e)}function c(e){Zr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Yr(e){return Yr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr,Jr,ea=($r={},Qr($r,kn.DELIVERED,12),Qr($r,kn.PROCESSED,0),Qr($r,kn.SECRET_REQUEST,3),Qr($r,kn.SECRET_REVEAL,11),Qr($r,kn.LOCKED_TRANSFER,7),Qr($r,kn.UNLOCK,4),Qr($r,kn.LOCK_EXPIRED,13),Qr($r,kn.WITHDRAW_REQUEST,15),Qr($r,kn.WITHDRAW_CONFIRMATION,16),Qr($r,kn.WITHDRAW_EXPIRED,17),Qr($r,kn.PFS_CAPACITY_UPDATE,-1),Qr($r,kn.PFS_FEE_UPDATE,-1),Qr($r,kn.MONITOR_REQUEST,-1),$r);function ta(e){var t=e.routes.map((function(e){return Object(k["keccak256"])(k["RLP"].encode(e.route))}));return Object(k["keccak256"])(k["RLP"].encode(t))}function na(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===j["HashZero"]||r===Le)?j["HashZero"]:Object(k["keccak256"])(Object(fr["concat"])([hr(t,32),hr(n,32),hr(r,32)]))}function ra(e){switch(e.type){case kn.LOCKED_TRANSFER:var t=Object(fr["concat"])([hr(ea[e.type],1),hr(e.message_identifier,8),hr(e.payment_identifier,8),hr(e.lock.expiration,32),hr(e.token,20),hr(e.recipient,20),hr(e.target,20),hr(e.initiator,20),hr(e.lock.secrethash,32),hr(e.lock.amount,32)]);return e.type===kn.LOCKED_TRANSFER&&(t=Object(fr["concat"])([t,ta(e.metadata)])),Object(k["keccak256"])(t);case kn.UNLOCK:return Object(k["keccak256"])(Object(fr["concat"])([hr(ea[e.type],1),hr(e.message_identifier,8),hr(e.payment_identifier,8),hr(e.secret,32)]));case kn.LOCK_EXPIRED:return Object(k["keccak256"])(Object(fr["concat"])([hr(ea[e.type],1),hr(e.message_identifier,8),hr(e.recipient,20),hr(e.secrethash,32)]))}}function aa(e){var t;switch(e.type){case kn.DELIVERED:return Object(fr["hexlify"])(Object(fr["concat"])([hr(ea[e.type],1),hr(0,3),hr(e.delivered_message_identifier,8)]));case kn.PROCESSED:return Object(fr["hexlify"])(Object(fr["concat"])([hr(ea[e.type],1),hr(0,3),hr(e.message_identifier,8)]));case kn.LOCKED_TRANSFER:case kn.UNLOCK:case kn.LOCK_EXPIRED:var n=ra(e),r=na({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(fr["hexlify"])(Object(fr["concat"])([hr(e.token_network_address,20),hr(e.chain_id,32),hr(zr.BALANCE_PROOF,32),hr(e.channel_identifier,32),hr(r,32),hr(e.nonce,32),hr(n,32)]));case kn.SECRET_REQUEST:return Object(fr["hexlify"])(Object(fr["concat"])([hr(ea[e.type],1),hr(0,3),hr(e.message_identifier,8),hr(e.payment_identifier,8),hr(e.secrethash,32),hr(e.amount,32),hr(e.expiration,32)]));case kn.SECRET_REVEAL:return Object(fr["hexlify"])(Object(fr["concat"])([hr(ea[e.type],1),hr(0,3),hr(e.message_identifier,8),hr(e.secret,32)]));case kn.WITHDRAW_REQUEST:case kn.WITHDRAW_CONFIRMATION:return Object(fr["hexlify"])(Object(fr["concat"])([hr(e.token_network_address,20),hr(e.chain_id,32),hr(zr.WITHDRAW,32),hr(e.channel_identifier,32),hr(e.participant,20),hr(e.total_withdraw,32),hr(e.expiration,32)]));case kn.WITHDRAW_EXPIRED:return Object(fr["hexlify"])(Object(fr["concat"])([hr(ea[e.type],1),hr(0,3),hr(e.nonce,32),hr(e.message_identifier,8),hr(e.token_network_address,20),hr(e.chain_id,32),hr(zr.WITHDRAW,32),hr(e.channel_identifier,32),hr(e.participant,20),hr(e.total_withdraw,32),hr(e.expiration,32)]));case kn.PFS_CAPACITY_UPDATE:return Object(fr["hexlify"])(Object(fr["concat"])([hr(e.canonical_identifier.chain_identifier,32),hr(e.canonical_identifier.token_network_address,20),hr(e.canonical_identifier.channel_identifier,32),hr(e.updating_participant,20),hr(e.other_participant,20),hr(e.updating_nonce,8),hr(e.other_nonce,8),hr(e.updating_capacity,32),hr(e.other_capacity,32),hr(e.reveal_timeout,32)]));case kn.PFS_FEE_UPDATE:return Object(fr["hexlify"])(Object(fr["concat"])([hr(e.canonical_identifier.chain_identifier,32),hr(e.canonical_identifier.token_network_address,20),hr(e.canonical_identifier.channel_identifier,32),hr(e.updating_participant,20),hr(e.fee_schedule.cap_fees,1),hr(e.fee_schedule.flat,32),hr(e.fee_schedule.proportional,32),Object(dr["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),hr(e.timestamp,19)]));case kn.MONITOR_REQUEST:return Object(fr["hexlify"])(Object(fr["concat"])([hr(e.monitoring_service_contract_address,20),hr(e.balance_proof.chain_id,32),hr(zr.MS_REWARD,32),hr(e.balance_proof.token_network_address,20),hr(e.non_closing_participant,20),hr(e.non_closing_signature,65),hr(e.reward_amount,32)]))}}function oa(e){return Dt.is(e.signature)}function ia(e){return Object(k["verifyMessage"])(Object(fr["arrayify"])(aa(e)),e.signature)}function ca(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:ra(e),signature:e.signature}}function sa(e){return gr("signature"in e?Ft(pr).encode(e):pr.encode(e))}function ua(e){var t=vr(e);return ht(t&&"object"===Yr(t)&&"type"in t&&Object.values(kn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Et("signature"in t?Ft(pr):pr,t)}function la(e,t){return pa.apply(this,arguments)}function pa(){return pa=Xr(b.a.mark((function e(t,n){var r,a,o,i=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{log:h.a},a=r.log,!oa(n)){e.next=3;break}return e.abrupt("return",n);case 3:return a.debug('Signing message "'.concat(n.type,'"'),n),e.next=6,t.signMessage(Object(fr["arrayify"])(aa(n)));case 6:return o=e.sent,e.abrupt("return",Gr(Gr({},n),{},{signature:o}));case 8:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function fa(e){return function(t){return qr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(zr||(zr={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(Jr||(Jr={}));var da,ba=Me["p"](Me["v"]({address:Lt,deposit:Nt(32),withdraw:Nt(32),locks:Me["q"](En),balanceProof:Ft(xn),pendingWithdraws:Me["q"](Me["x"]([Ft(zn),Ft(er),Ft(nr)])),nextNonce:Nt(8)}),"ChannelEnd"),ya=ba,ha=Me["j"]([Me["p"](Me["v"]({_id:Me["s"],id:Me["n"],token:Lt,tokenNetwork:Lt,settleTimeout:Me["n"],isFirstParticipant:Me["e"],openBlock:Me["n"],own:ya,partner:ya}),"Channel"),Me["x"]([Me["p"](Me["v"]({state:Me["x"]([Me["l"](Jr.open),Me["l"](Jr.closing)])}),"state[open|closing]"),Me["j"]([Me["p"](Me["v"]({closeBlock:Me["n"],closeParticipant:Lt}),"ChannelClosed"),Me["x"]([Me["p"](Me["v"]({state:Me["x"]([Me["l"](Jr.closed),Me["l"](Jr.settleable),Me["l"](Jr.settling)])}),"state[closed|settleable|settling]"),Me["p"](Me["v"]({state:Me["l"](Jr.settled),settleBlock:Me["n"]}),"state[settled]")])])])]),ma=n("4d63"),va=n.n(ma),ga={SENT:"sent",RECEIVED:"received"},Oa=Me["k"](va()(ga)),wa=Me["p"](Me["j"]([Me["v"]({_id:Me["s"],channel:Me["s"],direction:Oa,secrethash:Rt,expiration:Me["n"],transfer:Mt(Ft(qn)),fee:At(32),partner:Lt,cleared:Me["n"]},"TransferStateBase"),Me["o"]({secret:Ct,secretRegistered:Mt(Me["v"]({txHash:Rt,txBlock:Me["n"]})),transferProcessed:Mt(Ft(Cn)),channelClosed:Mt(Me["v"]({txHash:Rt,txBlock:Me["n"]})),channelSettled:Mt(Me["v"]({txHash:Rt,txBlock:Me["n"]})),secretRequest:Mt(Ft(In)),secretReveal:Mt(Ft(Mn)),unlock:Mt(Ft(Gn)),expired:Mt(Ft(Xn)),unlockProcessed:Mt(Ft(Cn)),expiredProcessed:Mt(Ft(Cn))},"TransferStateOpts")])),_a=wa;(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(da||(da={}));var ka=n("bf69"),ja=n.n(ka);function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sa(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Ta(Ta({},r),{},xa({},o,s)))}}return r}}var Aa=n("bc8e"),Na=n.n(Aa),Da=n("50fc"),Ra=n.n(Da),Ca=n("d328"),Pa=n.n(Ca),Ia=Me["v"]({tokenNetwork:Lt,partner:Lt}),La=Pr("block/new",Me["v"]({blockNumber:Me["n"]})),Ma=Pr("token/monitored",Me["j"]([Me["v"]({token:Lt,tokenNetwork:Lt}),Me["o"]({fromBlock:Me["n"],toBlock:Me["n"]})])),Ua=Ir(Ia,"channel/open/request","channel/open/success","channel/open/failed",Me["o"]({settleTimeout:Me["n"],subkey:Me["e"],deposit:Nt(32)}),Me["v"]({id:Me["n"],token:Lt,settleTimeout:Me["n"],isFirstParticipant:Me["e"],txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})),Ba=Pr("channel/monitored",Me["v"]({id:Me["n"]}),Ia),Fa=Ir(Ia,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Me["j"]([Me["v"]({deposit:Nt(32)}),Me["o"]({subkey:Me["e"],waitOpen:Me["l"](!0)})]),Me["v"]({id:Me["n"],participant:Lt,totalDeposit:Nt(32),txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})),Wa=Pr("channel/withdraw/success",Me["v"]({id:Me["n"],participant:Lt,totalWithdraw:Nt(32),txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])}),Ia),$a=Ir(Ia,"channel/close/request","channel/close/success","channel/close/failure",Me["x"]([Me["o"]({subkey:Me["e"]}),Me["w"]]),Me["v"]({id:Me["n"],participant:Lt,txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})),Ha=Pr("channel/settleable",Me["v"]({settleableBlock:Me["n"]}),Ia),Va=Ir(Ia,"channel/settle/request","channel/settle/success","channel/settle/failure",Me["x"]([Me["o"]({subkey:Me["e"]}),Me["w"]]),Me["j"]([Me["v"]({id:Me["n"],txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])}),Me["o"]({locks:Me["q"](En)})])),qa=Me["p"](Me["v"]({userId:Me["s"],accessToken:Me["s"],deviceId:Me["s"],displayName:Me["s"]})),Ka=Me["v"]({address:Lt}),Ga=Pr("matrix/setup",Me["v"]({server:Me["s"],setup:qa})),Za=Ir(Ka,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Me["j"]([Me["v"]({userId:Me["s"],available:Me["e"],ts:Me["n"]}),Me["o"]({caps:Me["r"](Me["s"],Me["c"])})])),Xa=Pr("matrix/room",Me["v"]({roomId:Me["s"]}),Ka),Ya=Pr("matrix/room/leave",Me["v"]({roomId:Me["s"]}),Ka),Qa=Pr("rtc/channel",Me["x"]([Me["w"],Wt(RTCDataChannel)]),Ka),za=Me["p"](Me["j"]([Me["v"]({result:Me["d"](Me["p"](Me["v"]({path:Me["q"](Lt),estimated_fee:At(32)})))}),Me["o"]({feedback_token:Me["s"]})])),Ja=Me["d"](Me["p"](Me["v"]({path:Me["q"](Lt),fee:At(32)}))),eo=Me["p"](Me["v"]({address:Lt,url:Me["s"],rtt:Me["n"],price:Nt(32),token:Lt})),to=Me["p"](Me["v"]({sender:Lt,receiver:Lt,amount:Nt(32),expiration_block:Nt(32),one_to_n_address:Lt,chain_id:Nt(32)})),no=Me["p"](Me["v"]({last_iou:Ft(to)})),ro=Me["v"]({secrethash:Rt,direction:Oa}),ao=Ir(ro,"transfer/request","transfer/success","transfer/failure",Me["j"]([Me["v"]({tokenNetwork:Lt,target:Lt,value:Nt(32),paths:Ja,paymentId:Nt(8)}),Me["o"]({secret:Ct,expiration:Me["n"],initiator:Lt})]),Me["o"]({balanceProof:Ft(xn)})),oo=Pr("transfer/signed",Me["v"]({message:Ft(qn),fee:At(32),partner:Lt}),ro),io=Pr("transfer/processed",Me["v"]({message:Ft(Cn)}),ro),co=Pr("transfer/secret",Me["v"]({secret:Ct}),ro),so=Ir(ro,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Me["j"]([Me["v"]({secret:Ct}),Me["o"]({subkey:Me["e"]})]),Me["v"]({secret:Ct,txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})),uo=Pr("transfer/secret/request",Me["v"]({message:Ft(In)}),ro),lo=Pr("transfer/secret/reveal",Me["v"]({message:Ft(Mn)}),ro),po=Ir(ro,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Me["v"]({message:Ft(Gn),partner:Lt})),fo=Pr("transfer/unlock/processed",Me["v"]({message:Ft(Cn)}),ro),bo=Ir(ro,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Me["v"]({message:Ft(Xn),partner:Lt})),yo=Pr("transfer/expire/processed",Me["v"]({message:Ft(Cn)}),ro),ho=Pr("transfer/clear",Me["w"],ro),mo=Pr("transfer/load",_a,ro),vo=Me["v"]({direction:Oa,tokenNetwork:Lt,partner:Lt,totalWithdraw:Nt(32),expiration:Me["n"]}),go=Ir(vo,"withdraw/request","withdraw/success","withdraw/failure",Me["w"],Me["v"]({txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})),Oo=Ir(vo,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Me["v"]({message:Ft(zn)}),Me["v"]({message:Ft(er)})),wo=Ir(vo,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Me["w"],Me["v"]({message:Ft(nr)})),_o=Pr("withdraw/completed",Me["w"],vo),ko=Me["v"]({tokenNetwork:Lt,target:Lt,value:Nt(32)}),jo=Me["v"]({tokenNetwork:Lt,serviceAddress:Lt}),Eo=Ir(ko,"path/find/request","path/find/success","path/find/failure",Me["o"]({paths:Ja,pfs:Me["x"]([eo,Me["m"]])}),Me["v"]({paths:Ja})),To=Pr("pfs/list/updated",Me["v"]({pfsList:Me["q"](Lt)})),xo=Pr("iou/persist",Me["v"]({iou:Ft(to)}),jo),So=Pr("iou/clear",void 0,jo),Ao=Ir(Me["v"]({totalDeposit:Nt(32)}),"udc/deposit/request","udc/deposit/success","udc/deposit/failure",Me["j"]([Me["v"]({deposit:Nt(32)}),Me["o"]({subkey:Me["e"]})]),Me["x"]([Me["w"],Me["v"]({txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})])),No=Me["v"]({amount:Nt(32)}),Do=Ir(No,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Me["w"],Me["j"]([Me["v"]({block:Me["n"]}),Me["o"]({txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])})])),Ro=Pr("udc/withdrawn",Me["v"]({withdrawal:Nt(32),txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])}),No),Co=Pr("ms/balanceProof/sent",Me["v"]({tokenNetwork:Lt,partner:Lt,id:Me["n"],reward:Nt(32),nonce:Nt(8),monitoringService:Lt,txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])}));function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach((function(t){Lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mo=Pr("raiden/shutdown",Me["v"]({reason:Me["x"]([Me["l"](Ce.STOP),Me["l"](Ce.ACCOUNT_CHANGED),Me["l"](Ce.NETWORK_CHANGED),vt])})),Uo=Pr("raiden/config/update",wn),Bo=Io(Io(Io(Io(Io({raidenShutdown:Mo,raidenConfigUpdate:Uo},a),o),r),i),c),Fo=[Bo.raidenShutdown,Bo.newBlock,Bo.matrixPresence.success,Bo.tokenMonitored,Bo.udcWithdrawn,Bo.udcWithdraw.failure,Bo.msBalanceProofSent,Bo.channelSettle.success,Bo.channelSettle.failure,Bo.channelOpen.success,Bo.channelOpen.failure],Wo=Pa()(Bo,(function(e,t){return Io(Io({},e),"type"in t?Lo({},t.type,t):Na()(t,Ra()("type")))}),{}),$o=Me["p"](Me["v"]({type:Me["s"],payload:Me["p"](Me["v"]({txHash:Rt,txBlock:Me["n"],confirmed:Me["x"]([Me["w"],Me["e"]])}))})),Ho=new Me["b"]("ConfirmableAction",$o.is,(function(e,t){return Be["either"].chain($o.validate(e,t),(function(e){var n=e.type;return n in Wo?Wo[n].codec.validate(e,t):Me["h"](e,t)}))}),(function(e){return Wo[e.type].codec.encode(e)}));function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=Me["p"](Me["v"]({address:Lt,chainId:Me["n"],registry:Lt,blockNumber:Me["n"],config:wn,channels:Me["p"](Me["r"](jn,ha)),oldChannels:Me["p"](Me["r"](Me["s"],ha)),tokens:Me["p"](Me["r"](Me["s"],Lt)),transport:Me["p"](Me["o"]({server:Me["s"],setup:qa,rooms:Me["p"](Me["r"](Me["s"],Me["d"](Me["s"])))})),transfers:Me["p"](Me["r"](Me["s"],_a)),iou:Me["p"](Me["r"](Me["s"],Me["r"](Me["s"],Ft(to)))),pendingTxs:Me["q"](Ho)}),"RaidenState"),Zo=Go;function Xo(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qo({address:n,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},transfers:{},iou:{},pendingTxs:[],config:{}},a)}var Yo=Xo({network:Object(k["getNetwork"])("unspecified"),address:j["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:j["AddressZero"],block_number:0},ServiceRegistry:{address:j["AddressZero"],block_number:0},UserDeposit:{address:j["AddressZero"],block_number:0},SecretRegistry:{address:j["AddressZero"],block_number:0},MonitoringService:{address:j["AddressZero"],block_number:0},OneToN:{address:j["AddressZero"],block_number:0}}}),Qo=n("ef71"),zo=n("6663"),Jo=n("0b05"),ei=n("6e76"),ti=n("f644"),ni=n("0c45"),ri=n("0b5d"),ai=n("6b75"),oi=n("bbd6"),ii=n("97f3"),ci=n("8c2f"),si=n("56a1"),ui=n("6825");function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){fi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function di(e,t){return vi(e)||mi(e,t)||yi(e,t)||bi()}function bi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yi(e,t){if(e){if("string"===typeof e)return hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hi(e,t):void 0}}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vi(e){if(Array.isArray(e))return e}var gi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(H["a"].apply(void 0,t),Object(oi["a"])())}};function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(oi["a"])(),Object($["a"])((function(e){return Object(ai["a"])(e)})),Object(ii["a"])((function(t,n){var r=t.acc,a=di(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:pi(pi({},r),{},fi({},o,i)),changed:[o,i]}}),{acc:{}}),Object(H["a"])("changed"),Object(F["a"])(Tt))}}function wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(ci["a"])((function(e){return e.pipe(Object(B["a"])((function(){if("number"===typeof t)return t;var e=t.next();return e.done?-1:e.value})),Object(si["a"])((function(e){return e>=0})),Object(ui["a"])((function(e){return Object(Qo["a"])(e)})))})),Object(ni["a"])(e))}}function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(L["a"])(e).pipe(Object(ei["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return n(e,r)?Object(zo["a"])(e):Object(Qo["a"])(t)})))})))}function ki(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.pipe(Object(B["a"])((function(e){return t?!e:!!e})),Object(oi["a"])());return function(e){return e.pipe(Object(ni["a"])(n.pipe(Object(F["a"])((function(e){return!e})))),Object(ci["a"])((function(){return n.pipe(Object(F["a"])((function(e){return e})))})))}}function ji(e,t){return xi(e)||Ti(e,t)||Ri(e,t)||Ei()}function Ei(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ti(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xi(e){if(Array.isArray(e))return e}function Si(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ai(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Si(o,r,a,i,c,"next",e)}function c(e){Si(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ni(e){return Pi(e)||Ci(e)||Ri(e)||Di()}function Di(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ri(e,t){if(e){if("string"===typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ii(e,t):void 0}}function Ci(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Pi(e){if(Array.isArray(e))return Ii(e)}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Li(e){var t=e.tokenNetwork,n=e.partner,r="string"===typeof n?n:n.address;return"".concat(t,"@").concat(r)}function Mi(e){return"_id"in e&&e._id?e._id:"".concat(Li(e),"#").concat(e.id.toString().padStart(9,"0"))}function Ui(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),p=s.sub(c),f=c.sub(s),d=Ht.apply(void 0,[t].concat(Ni(e.own.pendingWithdraws.filter((function(e){return e.type===kn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Ht.apply(void 0,[n].concat(Ni(e.partner.pendingWithdraws.filter((function(e){return e.type===kn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(d).sub(u).add(p),h=e.partner.deposit.sub(b).sub(l).add(f),m=e.own.deposit.add(p).sub(u),v=m.sub(t),g=e.partner.deposit.add(f).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:p,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:f,partnerCapacity:h,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:m,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Bi(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Jo["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])(function(){var e=Ai(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.wait();case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(B["a"])((function(n){var a,o,i,c=ji(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new yt(t,{status:null!==(a=u.status)&&void 0!==a?a:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var Fi=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],Wi=["always failing transaction","execution failed due to an exception","transaction failed"];function $i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:h.a},a=r.log;return function(r){return r.pipe(Object(ei["a"])((function(r){return r.pipe(Object($["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t,n;return null===(n=null===(t=r.message)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,e)}))?Object(Qo["a"])(e):Object(zo["a"])(r)})))})))}}function Hi(e){return e.pipe(Object(H["a"])("channels"),Oi(),Object(H["a"])(1),Object(ti["a"])(Mi,void 0,void 0,(function(){return new R["a"](1)})),Object(B["a"])((function(t){var n=t.key.split("#"),r=ji(n,2),a=r[0],o=r[1],i=+o;return t.pipe(Object(ni["a"])(e.pipe(Object(F["a"])((function(e){var t,n=e.channels;return(null===(t=n[a])||void 0===t?void 0:t.id)!==i})))))})))}function Vi(e,t,n){var r=ji(e,3),a=r[0],o=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dt.RDN_APPROVE_TRANSACTION_FAILED,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:h.a,minimumAllowance:j["Zero"]},u=s.log,l=s.minimumAllowance;if(ht(a.gte(i),[dt.RDN_INSUFFICIENT_BALANCE,{current:a.toString(),required:i.toString()}]),o.gte(i))return Object(P["a"])(!0);var p=Object(P["a"])(!0);return o.isZero()||(p=Object(L["a"])((function(){return t.functions.approve(n,0)})).pipe(Bi("approve",c,{log:u}),Object(ri["a"])(!0))),p.pipe(Object($["a"])((function(){return t.functions.approve(n,Ht(l,i))})),Bi("approve",c,{log:u}),Object(H["a"])(1))}function qi(e){return qi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qi(e)}function Ki(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=rc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Gi(e,t){if(null==e)return{};var n,r,a=Zi(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zi(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Xi(e){var t=Yi(e,"string");return"symbol"===qi(t)?t:String(t)}function Yi(e,t){if("object"!==qi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Qi(e,t){return ec(e)||Ji(e,t)||rc(e,t)||zi()}function zi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ji(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ec(e){if(Array.isArray(e))return e}function tc(e){return oc(e)||ac(e)||rc(e)||nc()}function nc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rc(e,t){if(e){if("string"===typeof e)return ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ic(e,t):void 0}}function ac(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function oc(e){if(Array.isArray(e))return ic(e)}function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var pc=Wr(Yo.blockNumber).handle(La,(function(e,t){lc(e);var n=t.payload;return n.blockNumber})),fc=Wr(Yo.tokens).handle(Ma,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:sc(sc({},e),{},uc({},r,a))}));function dc(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Ho.is(t)){if(void 0===t.payload.confirmed)return[].concat(tc(dc(e,t)),[t]);var n=dc(e,t);return n.length!==e.length?n:e}return e},yc={address:j["AddressZero"],deposit:j["Zero"],withdraw:j["Zero"],locks:[],balanceProof:Sn,pendingWithdraws:[],nextNonce:j["One"]};function hc(e,t){var n,r,a=Li(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={_id:Mi(sc(sc({},t.meta),{},{id:t.payload.id})),id:t.payload.id,state:Jr.open,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:sc(sc({},yc),{},{address:e.address}),partner:sc(sc({},yc),{},{address:t.meta.partner})};return sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},a,i))})}function mc(e,t){var n;if(!t.payload.confirmed)return e;var r=Li(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==Jr.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Wa.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=Qi(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=sc(sc({},a),{},uc({},o,sc(sc({},a[o]),{},(n={},uc(n,s,u),uc(n,"pendingWithdraws",l),n)))),sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},r,a))}))}function vc(e,t){var n=Li(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===Jr.open)r=sc(sc({},r),{},{state:Jr.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=sc(sc({},r),{},{state:Jr.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},n,r))})}function gc(e,t){var n=Li(t.meta),r=e.channels[n];if(!r)return e;if($a.request.is(t)&&r.state===Jr.open)r=sc(sc({},r),{},{state:Jr.closing});else if(Va.request.is(t)&&r.state===Jr.settleable)r=sc(sc({},r),{},{state:Jr.settling});else{if(!Ha.is(t)||r.state!==Jr.closed)return e;r=sc(sc({},r),{},{state:Jr.settleable})}return sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},n,r))})}function Oc(e,t){var n=Li(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==Jr.settling)return sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},n,sc(sc({},r),{},{state:Jr.settling})))});if(t.payload.confirmed){var a=e.channels,o=(a[n],Gi(a,[n].map(Xi)));return sc(sc({},e),{},{channels:o,oldChannels:sc(sc({},e.oldChannels),{},uc({},Mi(r),sc(sc({},r),{},{state:Jr.settled,settleBlock:t.payload.txBlock})))})}return e}function wc(e,t,n){var r=!1,a=e.map((function(e){return e.secrethash!==t||e.registered||e.expiration.lte(n)?e:(r=!0,sc(sc({},e),{},{registered:!0}))}));return r?a:e}function _c(e,t){if(!t.payload.confirmed)return e;var n,r=t.meta.direction===ga.SENT?"own":"partner",a=tc(Object.keys(e.channels)),o=Ki(a);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=e.channels[i],s=wc(c[r].locks,t.meta.secrethash,t.payload.txBlock);s!==c[r].locks&&(e=sc(sc({},e),{},{channels:sc(sc({},e.channels),{},uc({},i,sc(sc({},c),{},uc({},r,sc(sc({},c[r]),{},{locks:s})))))}))}}catch(u){o.e(u)}finally{o.f()}return e}var kc=Wr(Yo).handle(Ua.success,hc).handle([Fa.success,Wa],mc).handle([$a.request,Ha,Va.request],gc).handle($a.success,vc).handle(Va.success,Oc).handle(so.success,_c),jc=Sa({blockNumber:pc,tokens:fc,pendingTxs:bc},Yo),Ec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo,t=arguments.length>1?arguments[1]:void 0;return[jc,kc].reduce((function(e,n){return n(e,t)}),e)},Tc=Ec;function xc(e){return Dc(e)||Nc(e)||Ac(e)||Sc()}function Sc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ac(e,t){if(e){if("string"===typeof e)return Rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rc(e,t):void 0}}function Nc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Dc(e){if(Array.isArray(e))return Rc(e)}function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(n),!0).forEach((function(t){Ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lc(e,t){if(null==e)return{};var n,r,a=Mc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Uc,Bc=Wr(Yo.transport).handle(Ga,(function(e,t){e.rooms;var n=Lc(e,["rooms"]);return Pc(Pc({},e.server!==t.payload.server?n:e),t.payload)})).handle(Xa,(function(e,t){var n,r;return Pc(Pc({},e),{},{rooms:Pc(Pc({},e.rooms),{},Ic({},t.meta.address,[t.payload.roomId].concat(xc((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Ya,(function(e,t){var n,r;return Pc(Pc({},e),{},{rooms:Pc(Pc({},e.rooms),{},Ic({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Fc=Sa({transport:Bc},Yo),Wc=Fc,$c=n("cfd5"),Hc=n.n($c);function Vc(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function qc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Vc(o,r,a,i,c,"next",e)}function c(e){Vc(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Kc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gc(e,t){return Yc(e)||Xc(e,t)||zc(e,t)||Zc()}function Zc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yc(e){if(Array.isArray(e))return e}function Qc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function zc(e,t){if(e){if("string"===typeof e)return Jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jc(e,t):void 0}}function Jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e){var t,n=[],r=Qc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(hr(a.expiration,32),hr(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(k["keccak256"])(Object(fr["concat"])(n))}function ts(e){return Object(k["sha256"])(e)}function ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(fr["hexlify"])(Object(k["randomBytes"])(e))}function rs(){return Object(k["bigNumberify"])(Date.now())}function as(){return Object(k["bigNumberify"])(Date.now())}function os(e){return"_id"in e?e._id:"".concat(e.direction,":").concat(e.secrethash)}var is=new RegExp("^(".concat(Object.values(ga).join("|"),"):(0x[a-f0-9]{64})$"),"i");function cs(e){var t=e.match(is);ht(t,"Invalid transferKey format");var n=Gc(t,3),r=n[1],a=n[2];return{direction:r,secrethash:a}}var ss,us,ls=(Uc={},Kc(Uc,da.expired,(function(e){var t;return null===(t=e.expiredProcessed)||void 0===t?void 0:t.ts})),Kc(Uc,da.unlocked,(function(e){var t;return null===(t=e.unlockProcessed)||void 0===t?void 0:t.ts})),Kc(Uc,da.expiring,(function(e){var t;return null===(t=e.expired)||void 0===t?void 0:t.ts})),Kc(Uc,da.unlocking,(function(e){var t;return null===(t=e.unlock)||void 0===t?void 0:t.ts})),Kc(Uc,da.registered,(function(e){var t;return null===(t=e.secretRegistered)||void 0===t?void 0:t.ts})),Kc(Uc,da.revealed,(function(e){var t;return null===(t=e.secretReveal)||void 0===t?void 0:t.ts})),Kc(Uc,da.requested,(function(e){var t;return null===(t=e.secretRequest)||void 0===t?void 0:t.ts})),Kc(Uc,da.closed,(function(e){var t;return null===(t=e.channelClosed)||void 0===t?void 0:t.ts})),Kc(Uc,da.received,(function(e){var t;return null===(t=e.transferProcessed)||void 0===t?void 0:t.ts})),Kc(Uc,da.pending,(function(e){return e.transfer.ts})),Uc);function ps(e){for(var t=0,n=Object.entries(ls);t<n.length;t++){var r=Gc(n[t],2),a=r[0],o=r[1],i=o(e);if(void 0!==i)return a}return da.pending}function fs(e){return!!(e.unlockProcessed||e.expiredProcessed||e.secretRegistered||e.channelSettled)}function ds(e){var t=ps(e),n=new Date(e.transfer.ts),r=new Date(ls[t](e)),a=e.transfer,o=e.direction,i=a.lock.amount.sub(e.fee),c=e.secretRequest&&e.secretRequest.amount.lt(i),s=!!(e.secretReveal||e.unlock||e.secretRegistered)||!(c||e.expired||e.channelClosed)&&void 0,u=fs(e);return{key:os(e),secrethash:a.lock.secrethash,direction:o,status:t,initiator:a.initiator,partner:e.partner,target:a.target,metadata:a.metadata,paymentId:a.payment_identifier,chainId:a.chain_id.toNumber(),token:a.token,tokenNetwork:a.token_network_address,channelId:a.channel_identifier,value:i,fee:e.fee,amount:a.lock.amount,expirationBlock:a.lock.expiration.toNumber(),startedAt:n,changedAt:r,success:s,completed:u,secret:e.secret}}function bs(e,t,n,r){return r===j["HashZero"]?Object(P["a"])(Sn):Object(L["a"])((function(){return e.find({selector:{channel:Mi(t),direction:n}})})).pipe(Object($["a"])((function(e){var t=e.docs;return Object(Kt["a"])(t)})),Object($["a"])((function(e){var t=Et(_a,e);return Object(Kt["a"])([t.transfer,t.unlock,t.expired])})),Object(F["a"])(Tt),Object(B["a"])(ca),Object(W["a"])((function(e){return na(e)===r})))}function ys(e,t,n){return hs.apply(this,arguments)}function hs(){return hs=qc(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof r&&(r=os(r)),"address"in t){e.next=5;break}return e.next=4,t.pipe(Object(W["a"])()).toPromise();case 4:t=e.sent;case 5:if(!(r in t.transfers)){e.next=7;break}return e.abrupt("return",t.transfers[r]);case 7:return e.t0=Et,e.t1=_a,e.next=11,n.get(r);case 11:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 13:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ms(e){return ms="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(e)}function vs(e,t){if(null==e)return{};var n,r,a=gs(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function gs(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Os(e){var t=ws(e,"string");return"symbol"===ms(t)?t:String(t)}function ws(e,t){if("object"!==ms(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ms(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _s(e){return Ts(e)||Es(e)||js(e)||ks()}function ks(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function js(e,t){if(e){if("string"===typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(e,t):void 0}}function Es(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ts(e){if(Array.isArray(e))return xs(e)}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach((function(t){Ns(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ds=(ss={},Ns(ss,ga.SENT,"own"),Ns(ss,ga.RECEIVED,"partner"),ss);function Rs(e,t){var n,r=os(t.meta);if(!(r in e.transfers))return e;var a=e.transfers[r];return a.secret||(e=As(As({},e),{},{transfers:As(As({},e.transfers),{},Ns({},r,As(As({},a),{},{secret:t.payload.secret})))})),so.success.is(t)&&t.payload.confirmed&&t.payload.txBlock!==(null===(n=a.secretRegistered)||void 0===n?void 0:n.txBlock)&&t.payload.txBlock<a.expiration&&(e=As(As({},e),{},{transfers:As(As({},e.transfers),{},Ns({},r,As(As({},a),{},{secretRegistered:Ut(Hc()(["txHash","txBlock"],t.payload))})))})),e}function Cs(e,t){var n,r,a=t.payload.message,o=t.meta.secrethash,i=os(t.meta),c=a.token_network_address,s=t.payload.partner,u=Li({tokenNetwork:c,partner:s}),l=Ds[t.meta.direction],p=e.channels[u],f=i in e.transfers,d=po.success.is(t)?"unlock":"expired";if(oo.is(t)&&f||!oo.is(t)&&(!f||d in e.transfers[i])||(null===p||void 0===p?void 0:p.state)!==Jr.open||!a.nonce.eq(p[l].nextNonce))return e;switch(t.type){case oo.type:n=[].concat(_s(p[l].locks),[t.payload.message.lock]),r=As(As({_id:i,channel:Mi(p)},t.meta),{},{transfer:Ut(t.payload.message),fee:t.payload.fee,expiration:t.payload.message.lock.expiration.toNumber(),partner:s,cleared:0});break;case po.success.type:case bo.success.type:n=p[l].locks.filter((function(e){return e.secrethash!==o})),r=As(Ns({},d,Ut(t.payload.message)),e.transfers[i]);break}return p=As(As({},p),{},Ns({},l,As(As({},p[l]),{},{locks:n,balanceProof:ca(a),nextNonce:p[l].nextNonce.add(1)}))),As(As({},e),{},{channels:As(As({},e.channels),{},Ns({},u,p)),transfers:As(As({},e.transfers),{},Ns({},i,r))})}var Ps=(us={},Ns(us,uo.type,"secretRequest"),Ns(us,lo.type,"secretReveal"),Ns(us,io.type,"transferProcessed"),Ns(us,fo.type,"unlockProcessed"),Ns(us,yo.type,"expiredProcessed"),us);function Is(e,t){var n=os(t.meta),r=Ps[t.type];return!(n in e.transfers)||!uo.is(t)&&r in e.transfers[n]||(e=As(As({},e),{},{transfers:As(As({},e.transfers),{},Ns({},n,As(As({},e.transfers[n]),{},Ns({},r,Ut(t.payload.message)))))})),e}function Ls(e,t){var n=os(t.meta);if(n in e.transfers){var r=e.transfers,a=(r[n],vs(r,[n].map(Os)));e=As(As({},e),{},{transfers:a})}return e}function Ms(e,t){var n=os(t.meta);return n in e.transfers||(e=As(As({},e),{},{transfers:As(As({},e.transfers),{},Ns({},n,As(As({},t.payload),{},{cleared:0})))})),e}function Us(e,t){if(!t.payload.confirmed)return e;for(var n=$a.success.is(t)?"channelClosed":"channelSettled",r=Mi(As({id:t.payload.id},t.meta)),a=0,o=Object.values(e.transfers);a<o.length;a++){var i=o[a];i.channel===r&&(e=As(As({},e),{},{transfers:As(As({},e.transfers),{},Ns({},os(i),As(As({},i),{},Ns({},n,Ut(Hc()(["txHash","txBlock"],t.payload))))))}))}return e}function Bs(e,t){var n=t.payload.message,r=Li(t.meta),a=e.channels[r],o=t.meta.direction===ga.RECEIVED!==Oo.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==Jr.open||!n.nonce.eq(a[o].nextNonce))return e;a=As(As({},a),{},Ns({},o,As(As({},a[o]),{},{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===ga.RECEIVED?"partner":"own",c=[].concat(_s(a[i].pendingWithdraws),[t.payload.message]);return a=As(As({},a),{},Ns({},i,As(As({},a[i]),{},{pendingWithdraws:c}))),As(As({},e),{},{channels:As(As({},e.channels),{},Ns({},r,a))})}function Fs(e,t){var n=Li(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==Jr.open)return e;var a=t.meta.direction===ga.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=As(As({},r),{},Ns({},a,As(As({},r[a]),{},{pendingWithdraws:o}))),As(As({},e),{},{channels:As(As({},e.channels),{},Ns({},n,r))})}var Ws=Wr(Yo).handle([co,so.success],Rs).handle([oo,po.success,bo.success],Cs).handle([io,fo,yo,uo,lo],Is).handle(ho,Ls).handle(mo,Ms).handle([$a.success,Va.success],Us).handle([Oo.request,Oo.success,wo.success],Bs).handle(_o,Fs),$s=Ws;function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ks=Wr(Yo.iou).handle(xo,(function(e,t){return Vs(Vs({},e),{},qs({},t.meta.tokenNetwork,Vs(Vs({},e[t.meta.tokenNetwork]),{},qs({},t.meta.serviceAddress,t.payload.iou))))})).handle(So,(function(e,t){return ja()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),Gs=Sa({iou:Ks},Yo),Zs=Gs;function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){Qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e,t){return ru(e)||nu(e,t)||eu(e,t)||Js()}function Js(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eu(e,t){if(e){if("string"===typeof e)return tu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tu(e,t):void 0}}function tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ru(e){if(Array.isArray(e))return e}var au=Wr(Yo).handle(Uo,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=zs(o[a],2),c=i[0],s=i[1];void 0!==s?r=Ys(Ys({},r),{},Qs({},c,s)):c in r&&(r=ja()(c,r))}return r===e.config?e:Ys(Ys({},e),{},{config:r})})),ou={configReducer:au,channelsReducer:Tc,transportReducer:Wc,transfersReducer:$s,servicesReducer:Zs},iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yo,t=arguments.length>1?arguments[1]:void 0;return Object.values(ou).reduce((function(e,n){return n(e,t)}),e)},cu=n("3121"),su=n("3d27"),uu=n("c578"),lu=n("0a13"),pu=n.n(lu),fu=n("e590"),du=n.n(fu),bu=n("7924");function yu(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=vu(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function hu(e,t){return wu(e)||Ou(e,t)||vu(e,t)||mu()}function mu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vu(e,t){if(e){if("string"===typeof e)return gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gu(e,t):void 0}}function gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ou(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wu(e){if(Array.isArray(e))return e}function _u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_u(Object(n),!0).forEach((function(t){ju(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eu=D()((function(e){return e.pipe(Object(F["a"])(Za.success.is),Object(ii["a"])((function(e,t){return ku(ku({},e),{},ju({},t.meta.address,t))}),{}),Object(bu["a"])(),Object(uu["a"])({}))}));function Tu(e){return Object.entries(e).filter((function(e){var t=hu(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=hu(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function xu(e){var t;if(e){var n={};try{var r,a=yu(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Su=n("ad3b"),Au=n("3e9b");function Nu(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Du(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Nu(o,r,a,i,c,"next",e)}function c(e){Nu(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ru(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Cu,Pu=function(e,t,n){Ru(t);var r=n.db;return e.pipe(Object(Su["a"])(),Object(Au["a"])(Du(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.busy$.pipe(Object(W["a"])((function(e){return!e}))).toPromise();case 2:return r.busy$.next(!0),e.prev=3,e.next=6,r.close();case 6:return e.prev=6,r.busy$.next(!1),r.busy$.complete(),e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[3,,6,10]])})))))},Iu=n("79ce"),Lu=n("17b7"),Mu=n("961b"),Uu=n("97cb"),Bu=n("9f7c"),Fu=n("739b"),Wu=n("5974"),$u=n("793a"),Hu=n("5278"),Vu=n.n(Hu),qu=n("12aa"),Ku=n.n(qu),Gu=n("7954"),Zu=n("5c41"),Xu=n("a0df"),Yu=n("31a7"),Qu=n("c998"),zu=n("ee79"),Ju=n("b4cc"),el=n("0ff6"),tl=n("4e0b"),nl=n("1f0b"),rl=n("4e67"),al=n("3c27"),ol=n("7bdd"),il=n.n(ol),cl=n("6738"),sl=n("7bcb");function ul(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ll(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ul(o,r,a,i,c,"next",e)}function c(e){ul(o,r,a,i,c,"throw",e)}i(void 0)}))}}function pl(){return fl.apply(this,arguments)}function fl(){return fl=ll(b.a.mark((function e(){var t,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Cu){e.next=2;break}return e.abrupt("return",Cu);case 2:if(!("JEST_WORKER_ID"in Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}))){e.next=11;break}return e.next=5,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-7ee7822e")]).then(n.bind(null,"0267"));case 5:r=e.sent,a=r.default,cl["a"].plugin(a),Cu="memory",e.next=26;break;case 11:if(!(null===(t=globalThis.location)||void 0===t?void 0:t.href)){e.next=20;break}return e.next=14,n.e("chunk-d86182e6").then(n.bind(null,"1f4b"));case 14:o=e.sent,i=o.default,cl["a"].plugin(i),Cu="indexeddb",e.next=26;break;case 20:return e.next=22,Promise.all([n.e("chunk-9714f45e"),n.e("chunk-499d7469")]).then(n.bind(null,"55ec"));case 22:c=e.sent,s=c.default,cl["a"].plugin(s),Cu="leveldb";case 26:return e.abrupt("return",Cu);case 27:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}var dl={},bl=dl;function yl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}var hl=b.a.mark(dp);function ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(n),!0).forEach((function(t){gl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ol(e,t){return El(e)||jl(e,t)||_l(e,t)||wl()}function wl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _l(e,t){if(e){if("string"===typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kl(e,t):void 0}}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function El(e){if(Array.isArray(e))return e}function Tl(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function xl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tl(o,r,a,i,c,"next",e)}function c(e){Tl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Sl(e){return function(){return new Al(e.apply(this,arguments))}}function Al(e){var t,n;function r(e,r){return new Promise((function(o,i){var c={key:e,arg:r,resolve:o,reject:i,next:null};n?n=n.next=c:(t=n=c,a(e,r))}))}function a(t,n){try{var r=e[t](n),i=r.value,c=i instanceof Dl;Promise.resolve(c?i.wrapped:i).then((function(e){c?a("return"===t?"return":"next",e):o(r.done?"return":"normal",e)}),(function(e){a("throw",e)}))}catch(s){o("throw",s)}}function o(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1});break}t=t.next,t?a(t.key,t.arg):n=null}this._invoke=r,"function"!==typeof e.return&&(this.return=void 0)}function Nl(e){return new Dl(e)}function Dl(e){this.wrapped=e}function Rl(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator],null!=t))return t.call(e);if(Symbol.iterator&&(t=e[Symbol.iterator],null!=t))return t.call(e)}throw new TypeError("Object is not async iterable")}function Cl(e,t){var n={},r=!1;function a(n,a){return r=!0,a=new Promise((function(t){t(e[n](a))})),{done:!1,value:t(a)}}return"function"===typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return r?(r=!1,e):a("next",e)},"function"===typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return a("throw",e)}),"function"===typeof e.return&&(n.return=function(e){return r?(r=!1,e):a("return",e)}),n}"function"===typeof Symbol&&Symbol.asyncIterator&&(Al.prototype[Symbol.asyncIterator]=function(){return this}),Al.prototype.next=function(e){return this._invoke("next",e)},Al.prototype.throw=function(e){return this._invoke("throw",e)},Al.prototype.return=function(e){return this._invoke("return",e)},cl["a"].plugin(sl["a"]);var Pl="state.",Il="channels.";function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r=e+"￰";return t?{startkey:r,endkey:n,descending:t}:{startkey:n,endkey:r}}function Ml(e){return Ul.apply(this,arguments)}function Ul(){return Ul=xl(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Set,e.next=3,t.allDocs({startkey:"a",endkey:"z￰"});case 3:return r=e.sent,r.rows.forEach((function(e){var t=e.id;return n.add(t)})),a=new rl["a"](!1),e.abrupt("return",Object.assign(t,{storageKeys:n,busy$:a}));case 7:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function Bl(e){return Fl.apply(this,arguments)}function Fl(){return Fl=xl(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),e.next=3,n.info();case 3:if(r=e.sent,0!==r.doc_count||0!=r.update_seq){e.next=8;break}return e.next=7,n.destroy();case 7:return e.abrupt("return");case 8:return e.abrupt("return",Ml(n));case 9:case"end":return e.stop()}}),e,this)}))),Fl.apply(this,arguments)}function Wl(e){return $l.apply(this,arguments)}function $l(){return $l=xl(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this(t),n.setMaxListeners(30),e.next=4,Promise.all([n.createIndex({index:{name:"byCleared",fields:["cleared","direction"]}}),n.createIndex({index:{name:"byPartner",fields:["direction","partner"]}}),n.createIndex({index:{name:"bySecrethash",fields:["secrethash"]}}),n.createIndex({index:{name:"byChannel",fields:["channel"]}})]);case 4:return e.abrupt("return",Ml(n));case 5:case"end":return e.stop()}}),e,this)}))),$l.apply(this,arguments)}function Hl(e,t){return Object(L["a"])((function(){var n=e.changes(t);return Object(I["a"])(Object(al["a"])(n,"change"),Object(al["a"])(n,"error").pipe(Object($["a"])((function(e){return Object(zo["a"])(e)})))).pipe(Object(H["a"])(0),Object(ni["a"])(Object(al["a"])(n,"complete")),Object(Au["a"])((function(){return n.cancel()})))}))}function Vl(e){return ql.apply(this,arguments)}function ql(){return ql=xl(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O,w;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.constructor.__defaults.log,a={channels:{},oldChannels:{},transfers:{}},e.next=4,t.allDocs(vl(vl({},Ll(Pl)),{},{include_docs:!0}));case 4:o=e.sent,i=yl(o.rows);try{for(i.s();!(c=i.n()).done;)s=c.value,u=s.id,l=s.doc,a[u.substr(Pl.length)]=l.value}catch(b){i.e(b)}finally{i.f()}return e.next=9,t.allDocs(vl(vl({},Ll(Il)),{},{include_docs:!0}));case 9:p=e.sent,f=yl(p.rows);try{for(f.s();!(d=f.n()).done;)y=d.value,h=y.id,m=y.doc,"settleBlock"in m?a.oldChannels[h]=vl(vl({},m),{},{_id:h.substr(Il.length)}):a.channels[Li(m)]=vl(vl({},m),{},{_id:h.substr(Il.length)})}catch(b){f.e(b)}finally{f.f()}return e.next=14,t.find({selector:{cleared:0,direction:{$exists:!0}}});case 14:v=e.sent,v.warning&&(null===(n=null===r||void 0===r?void 0:r.warn)||void 0===n||n.call(r,v.warning,"getRaidenState")),g=yl(v.docs);try{for(g.s();!(O=g.n()).done;)w=O.value,a.transfers[w._id]=w}catch(b){g.e(b)}finally{g.f()}if(!("address"in a)){e.next=20;break}return e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}function Kl(e,t){return Gl.apply(this,arguments)}function Gl(){return Gl=xl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],a=0,o=Object.entries(n);a<o.length;a++)if(i=Ol(o[a],2),c=i[0],s=i[1],"channels"===c||"oldChannels"===c)for(u=0,l=Object.values(s);u<l.length;u++)p=l[u],r.push(vl(vl({},p),{},{_id:Il+p._id}));else if("transfers"===c)for(f=0,d=Object.values(s);f<d.length;f++)y=d[f],r.push(y);else r.push({_id:Pl+c,value:s});return e.next=4,t.bulkDocs(r);case 4:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}function Zl(e){return Object.keys(e).map((function(e){return+e})).sort()}function Xl(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bl;return null!==(e=$t(Zl(t)))&&void 0!==e?e:0}function Yl(e){return+e.name.match(/_(\d+)$/)[1]}function Ql(){return zl.apply(this,arguments)}function zl(){return zl=xl(b.a.mark((function e(){var t,n=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{log:h.a},t.log||(t.log=h.a),t.adapter){e.next=6;break}return e.next=5,pl();case 5:t.adapter=e.sent;case 6:return e.abrupt("return",cl["a"].defaults(t));case 7:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function Jl(e){return ep.apply(this,arguments)}function ep(){return ep=xl(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m,v=this,g=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:bl,r=g.length>2&&void 0!==g[2]&&g[2],i=this.__defaults.log,c=Zl(n),s=0,l=c.length-1;case 6:if(!(l>=0)){e.next=18;break}return p=c[l],e.next=10,Bl.call(this,"".concat(t,"_").concat(p));case 10:if(f=e.sent,!f){e.next=15;break}return s=p,u=f,e.abrupt("break",18);case 15:--l,e.next=6;break;case 18:if(u){e.next=22;break}return e.next=21,Bl.call(this,"".concat(t,"_").concat(s));case 21:u=e.sent;case 22:if(u){e.next=27;break}return s=Xl(n),e.next=26,Wl.call(this,"".concat(t,"_").concat(s));case 26:u=e.sent;case 27:d=yl(c),e.prev=28,h=b.a.mark((function e(){var c,l,p;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=y.value,!(c<=s)){e.next=3;break}return e.abrupt("return","continue");case 3:return e.next=5,Wl.call(v,"".concat(t,"_").concat(c));case 5:return l=e.sent,e.prev=6,p=/^[a-z]/i,e.next=10,Hl(u,{since:0,include_docs:!0,filter:function(e){var t=e._id;return p.test(t)}}).pipe(Object($u["a"])((function(e){return Object(L["a"])((function(){return n[c](e.doc,u)})).pipe(Object($["a"])((function(e){return Object(Kt["a"])(e)})),Object($u["a"])(function(){var e=xl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"_rev"in t&&delete t["_rev"],e.abrupt("return",l.put(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}))).toPromise();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e["catch"](6),null===(a=null===i||void 0===i?void 0:i.error)||void 0===a||a.call(i,"Error migrating db",{from:s,to:c},e.t0),l.destroy(),e.t0;case 17:if(null===(o=null===i||void 0===i?void 0:i.info)||void 0===o||o.call(i,"Migrated db",{name:t,from:s,to:c}),!r){e.next=23;break}return e.next=21,u.destroy();case 21:e.next=25;break;case 23:return e.next=25,u.close();case 25:s=c,u=l;case 27:case"end":return e.stop()}}),e,null,[[6,12]])})),d.s();case 31:if((y=d.n()).done){e.next=38;break}return e.delegateYield(h(),"t0",33);case 33:if(m=e.t0,"continue"!==m){e.next=36;break}return e.abrupt("continue",36);case 36:e.next=31;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](28),d.e(e.t1);case 43:return e.prev=43,d.f(),e.finish(43);case 46:return ht(Yl(u)===Xl(n),"Not latest version"),e.abrupt("return",u);case 48:case"end":return e.stop()}}),e,this,[[28,40,43,46]])}))),ep.apply(this,arguments)}function tp(e){return np.apply(this,arguments)}function np(){return np=xl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Yl(t),e.next=3,t.get(Pl+"chainId");case 3:return e.t1=e.sent.value,e.next=6,t.get(Pl+"registry");case 6:return e.t2=e.sent.value,e.next=9,t.get(Pl+"address");case 9:return e.t3=e.sent.value,e.next=12,t.get(Pl+"blockNumber");case 12:return e.t4=e.sent.value,e.abrupt("return",{_id:"_meta",version:e.t0,network:e.t1,registry:e.t2,address:e.t3,blockNumber:e.t4});case 14:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e){return"function"===typeof e[Symbol.asyncIterator]}function ap(e,t){return op.apply(this,arguments)}function op(){return op=xl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y,h,m,v,g,O,w=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:bl,a=w.length>3&&void 0!==w[3]&&w[3],i=this.__defaults.log,c=rp(t)?t[Symbol.asyncIterator]():t[Symbol.iterator](),e.next=6,c.next();case 6:s=e.sent,ht(!s.done&&"_meta"===s.value._id,'first yielded value must be "_meta"'),u=s.value,l=Xl(r);case 10:if(!(l>=u.version)){e.next=28;break}return p="".concat(n,"_").concat(l),e.next=14,Bl.call(this,p);case 14:if(f=e.sent,f){e.next=17;break}return e.abrupt("continue",25);case 17:return e.next=19,tp(f);case 19:return d=e.sent,ht(u.version>=l&&u.blockNumber>d.blockNumber,dt.RDN_STATE_MIGRATION),ht(u.address===d.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{expected:d.address,received:u.address}],null===i||void 0===i?void 0:i.error),ht(u.registry===d.registry&&u.network===d.network,[dt.RDN_STATE_NETWORK_MISMATCH,{expectedRegistry:d.registry,receivedRegistry:u.registry,expectedNetwork:d.network,receivedNetwork:u.network}],null===i||void 0===i?void 0:i.error),e.next=25,f.destroy();case 25:--l,e.next=10;break;case 28:return y="".concat(n,"_").concat(u.version),e.next=31,Wl.call(this,y);case 31:return h=e.sent,e.next=34,c.next();case 34:m=e.sent;case 35:if(m.done){e.next=45;break}return v=m.value,"_rev"in v&&delete v["_rev"],e.next=40,Promise.all([c.next(),h.put(v)]);case 40:g=e.sent,O=Ol(g,1),m=O[0],e.next=35;break;case 45:return null===(o=null===i||void 0===i?void 0:i.warn)||void 0===o||o.call(i,"Replaced/loaded database",{name:n,meta:u}),e.next=48,h.close();case 48:return e.next=50,Jl.call(this,n,r,a);case 50:return e.abrupt("return",e.sent);case 51:case"end":return e.stop()}}),e,this)}))),op.apply(this,arguments)}function ip(e){return e?e.slice(0,-1)+String.fromCharCode(e.slice(-1).charCodeAt(0)+1):""}function cp(e){return sp.apply(this,arguments)}function sp(){return sp=Sl(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.batch,a=void 0===r?10:r,i=t.changes({since:"now",live:!0}),i.on("change",(function(e){var t=e.id;return o=t})),e.prev=3,e.next=6,tp(t);case 6:c="a";case 7:return e.next=10,Nl(t.allDocs({startkey:c,endkey:"￰",limit:a,include_docs:!0}));case 10:return s=e.sent,e.delegateYield(Cl(Rl(s.rows.map((function(e){var t=e.doc;return il()(["_rev"],t)}))),Nl),"t0",12);case 12:if(ht(!o,["Database changed while dumping",{key:o}]),u=$t(s.rows),!u){e.next=18;break}c=ip(u.id),e.next=19;break;case 18:return e.abrupt("break",21);case 19:e.next=7;break;case 21:return e.prev=21,i.cancel(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,,21,24]])}))),sp.apply(this,arguments)}function up(e){return lp.apply(this,arguments)}function lp(){return lp=xl(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Wl.call(t.constructor,t.name));case 1:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function pp(e,t){return fp.apply(this,arguments)}function fp(){return fp=xl(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d,y,h,m;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.constructor.__defaults.log,c=!1,s=10;case 3:if(!(s>0)){e.next=56;break}e.prev=4,u=[],l=!0,p=!1,e.prev=8,d=Rl(cp(t,n));case 10:return e.next=12,d.next();case 12:return y=e.sent,l=y.done,e.next=16,y.value;case 16:if(h=e.sent,l){e.next=23;break}m=h,u.push(m);case 20:l=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](8),p=!0,f=e.t0;case 29:if(e.prev=29,e.prev=30,l||null==d.return){e.next=34;break}return e.next=34,d.return();case 34:if(e.prev=34,!p){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(29);case 39:if(!c){e.next=42;break}return e.next=42,t.close();case 42:return e.abrupt("return",u);case 45:if(e.prev=45,e.t1=e["catch"](4),!(null===(a=null===(r=e.t1.message)||void 0===r?void 0:r.includes)||void 0===a?void 0:a.call(r,"database is closed"))){e.next=52;break}return c=!0,e.next=51,up(t);case 51:t=e.sent;case 52:null===(o=null===i||void 0===i?void 0:i.warn)||void 0===o||o.call(i,"Restarting dump because",e.t1);case 53:--s,e.next=3;break;case 56:throw new Error("Could not dump database");case 57:case"end":return e.stop()}}),e,null,[[4,45],[8,25,29,39],[30,,34,38]])}))),fp.apply(this,arguments)}function dp(e){var t,n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(b){while(1)switch(b.prev=b.next){case 0:return n={_id:"_meta",version:0,network:e.chainId,registry:e.registry,address:e.address,blockNumber:e.blockNumber},b.next=3,n;case 3:r=0,a=Object.entries(e);case 4:if(!(r<a.length)){b.next=33;break}if(o=Ol(a[r],2),i=o[0],c=o[1],"channels"!==i&&"oldChannels"!==i){b.next=17;break}s=0,u=Object.values(c);case 8:if(!(s<u.length)){b.next=15;break}return l=u[s],b.next=12,vl({_id:Il+Mi(l)},l);case 12:s++,b.next=8;break;case 15:b.next=30;break;case 17:if("sent"!==i&&"received"!==i){b.next=28;break}p=0,f=Object.values(c);case 19:if(!(p<f.length)){b.next=26;break}return d=f[p],b.next=23,vl(vl(vl(vl(vl({_id:"".concat(i,":").concat(d.transfer.lock.secrethash),direction:i,secrethash:d.transfer.lock.secrethash,expiration:Object(k["bigNumberify"])(d.transfer.lock.expiration).toNumber(),channel:"".concat(d.transfer.token_network_address,"@").concat(d.partner,"#").concat(Object(k["bigNumberify"])(d.transfer.channel_identifier).toString().padStart(9,"0")),cleared:0},(null===(t=d.secret)||void 0===t?void 0:t.registerBlock)?{secretRegistered:{txHash:j["HashZero"],txBlock:d.secret.registerBlock,ts:1}}:{}),d),d.secret?{secret:d.secret.value}:{}),d.lockExpired?{expired:d.lockExpired}:{}),d.channelClosed?{channelSettled:d.channelClosed}:{});case 23:p++,b.next=19;break;case 26:b.next=30;break;case 28:return b.next=30,{_id:Pl+i,value:c};case 30:r++,b.next=4;break;case 33:case"end":return b.stop()}}),hl)}function bp(e,t){if(null==e)return{};var n,r,a=yp(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yp(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function hp(e,t){return gp(e)||vp(e,t)||_p(e,t)||mp()}function mp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gp(e){if(Array.isArray(e))return e}function Op(e){return jp(e)||kp(e)||_p(e)||wp()}function wp(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _p(e,t){if(e){if("string"===typeof e)return Ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ep(e,t):void 0}}function kp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function jp(e){if(Array.isArray(e))return Ep(e)}function Ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function xp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tp(o,r,a,i,c,"next",e)}function c(e){Tp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(n),!0).forEach((function(t){Np(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dp=function(e){switch(e.name){case"rinkeby":return Ap(Ap({},Yu.contracts),el.contracts);case"ropsten":return Ap(Ap({},Xu.contracts),Ju.contracts);case"goerli":return Ap(Ap({},Qu.contracts),tl.contracts);case"homestead":return Ap(Ap({},zu.contracts),nl.contracts);default:throw new yt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Rp(e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=xp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==(a=null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===r?void 0:r.origin)&&void 0!==a?a:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(dn(t).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),e.next=4,n.signMessage(Object(k["toUtf8Bytes"])(i));case 4:return c=e.sent,s=Object(k["sha256"])(c),u=new Zu["Wallet"](s,n.provider),e.abrupt("return",{signer:u,address:u.address});case 8:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}var Pp=function(){var e=xp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Gu["Signer"].isSigner(t)){e.next=15;break}if(t.provider!==n){e.next=5;break}a=t,e.next=10;break;case 5:if(!(t instanceof Zu["Wallet"])){e.next=9;break}a=t.connect(n),e.next=10;break;case 9:throw new yt(dt.RDN_SIGNER_NOT_CONNECTED,{account:t.toString(),provider:n.toString()});case 10:return e.next=12,a.getAddress();case 12:o=e.sent,e.next=38;break;case 15:if("number"!==typeof t){e.next=22;break}return a=n.getSigner(t),e.next=19,a.getAddress();case 19:o=e.sent,e.next=38;break;case 22:if(!Lt.is(t)){e.next=32;break}return e.next=25,n.listAccounts();case 25:if(c=e.sent,c.includes(t)){e.next=28;break}throw new yt(dt.RDN_ACCOUNT_NOT_FOUND,{account:t,accounts:JSON.stringify(c)});case 28:a=n.getSigner(t),o=t,e.next=38;break;case 32:if(!Pt.is(t)){e.next=37;break}a=new Zu["Wallet"](t,n),o=a.address,e.next=38;break;case 37:throw new yt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!r){e.next=50;break}return i={signer:a,address:o},e.t0=Rp,e.next=43,n.getNetwork();case 43:return e.t1=e.sent,e.t2=i.signer,e.next=47,(0,e.t0)(e.t1,e.t2);case 47:s=e.sent,a=s.signer,o=s.address;case 50:return e.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ip(e,t){return Object(I["a"])(Hl(t,{since:0,include_docs:!0,selector:{direction:{$in:Object.values(ga)}}}).pipe(Object(H["a"])("doc"),Object(F["a"])(Tt),Object(B["a"])((function(e){return Et(_a,e)}))),e.pipe(gi("transfers"),Oi(),Object(H["a"])(1))).pipe(Object(B["a"])(ds))}var Lp=function(e){return Object.values(e).reduce((function(e,t){var n=Ui(t),r=Ap({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Ap(Ap({},e),{},Np({},t.token,Ap(Ap({},e[t.token]),{},Np({},t.partner.address,r))))}),{})};function Mp(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Up(e,t){return e.signer===t?e:e.connect(t)}function Bp(e,t,n,r){return Fp.apply(this,arguments)}function Fp(){return Fp=xp(b.a.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:{log:h.a},i=o.log,e.prev=1,e.next=4,(s=t.functions)[n].apply(s,Op(r));case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),i.error("Error sending ".concat(n," tx"),e.t0),new yt(a,{error:e.t0.message});case 11:return i.debug("sent ".concat(n,' tx "').concat(c.hash,'" to "').concat(t.address,'"')),e.prev=12,e.next=15,c.wait();case 15:u=e.sent,ht(u.status,"tx status: ".concat(u.status)),e.next=23;break;case 19:throw e.prev=19,e.t1=e["catch"](12),i.error("Error mining ".concat(n," tx"),e.t1),new yt(a,{transactionHash:c.hash});case 23:return i.debug("".concat(n,' tx "').concat(c.hash,'" successfuly mined!')),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])}))),Fp.apply(this,arguments)}function Wp(e,t,n){return $p.apply(this,arguments)}function $p(){return $p=xp(b.a.mark((function e(t,n,r){var a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.latest$,o=n.config$,i=n.provider,c=t.blockNumber,s=t.transactionHash,e.abrupt("return",a.pipe(gi("state","blockNumber"),Object(Uu["a"])(o),Object(F["a"])((function(e){var t=hp(e,2),n=t[0],a=t[1].confirmationBlocks;return c+(null!==r&&void 0!==r?r:a)<=n})),Object(Zt["a"])((function(e){var t=hp(e,2),n=t[0],a=t[1].confirmationBlocks;return Object(L["a"])((function(){return i.getTransactionReceipt(s)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==r&&void 0!==r?r:a))return e.blockNumber;if(c+2*(null!==r&&void 0!==r?r:a)<n)throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:s})})))})),Object(W["a"])(Tt)).toPromise());case 4:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}var Hp=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Vp(e,t){return qp.apply(this,arguments)}function qp(){return qp=xp(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=ge.connect(n,t),e.next=3,r.msc_address();case 3:return a=e.sent,o=Ne.connect(a,t),e.next=7,o.token_network_registry();case 7:return i=e.sent,c=Z.connect(i,t),e.next=11,c.secret_registry_address();case 11:return s=e.sent,e.next=14,o.service_registry();case 14:return u=e.sent,e.next=17,t.getLogs(Ap(Ap({},c.filters.TokenNetworkCreated(null,null)),{},{fromBlock:1,toBlock:"latest"}));case 17:return l=e.sent,p=l.map((function(e){return e.blockNumber})).filter(Tt),f=p.length?Math.min.apply(Math,Op(p)):0,e.next=22,r.one_to_n_address();case 22:return d=e.sent,e.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:f},ServiceRegistry:{address:u,block_number:f},UserDeposit:{address:n,block_number:f},SecretRegistry:{address:s,block_number:f},MonitoringService:{address:a,block_number:f},OneToN:{address:d,block_number:f}});case 24:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Kp(e){return Gp.apply(this,arguments)}function Gp(){return Gp=xp(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.pipe(Object(H["a"])("udcBalance"),Object(W["a"])((function(e){return!!e&&e.lt(j["MaxUint256"])}))).toPromise());case 1:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Zp(e,t){var n,r,a,o=t.address,i=t.network,c=t.contractsInfo,s=e[0];ht("_meta"===(null===s||void 0===s?void 0:s._id),dt.RDN_STATE_MIGRATION),ht(s.address===o,dt.RDN_STATE_ADDRESS_MISMATCH),ht(s.registry===c.TokenNetworkRegistry.address,dt.RDN_STATE_NETWORK_MISMATCH),ht(s.network===i.chainId,dt.RDN_STATE_NETWORK_MISMATCH),ht((null===(n=e.find((function(e){return"state.address"===e._id})))||void 0===n?void 0:n.value)===o,dt.RDN_STATE_ADDRESS_MISMATCH),ht((null===(r=e.find((function(e){return"state.chainId"===e._id})))||void 0===r?void 0:r.value)===i.chainId,dt.RDN_STATE_NETWORK_MISMATCH),ht((null===(a=e.find((function(e){return"state.registry"===e._id})))||void 0===a?void 0:a.value)===c.TokenNetworkRegistry.address,dt.RDN_STATE_NETWORK_MISMATCH)}function Xp(e){return Yp.apply(this,arguments)}function Yp(){return Yp=xp(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.address,r=t.network,a=t.contractsInfo,o=t.log,i=m.length>1&&void 0!==m[1]?m[1]:{},s=["raiden",dn(r),a.TokenNetworkRegistry.address,n].join("_"),l=!1,p=i.state,f=i.storage,i.state,d=bp(i,["storage","state"]),p){e.next=11;break}return e.next=9,null===(c=null===f||void 0===f?void 0:f.getItem)||void 0===c?void 0:c.call(f,s);case 9:p=e.sent,p&&(l=!0);case 11:return e.next=13,Ql(Ap({log:o},d));case 13:if(y=e.sent,!p){e.next=24;break}return"string"===typeof p&&(p=vr(p)),Array.isArray(p)||(p=Array.from(dp(p))),Zp(p,{address:n,network:r,contractsInfo:a}),e.next=20,ap.call(y,p,s);case 20:u=e.sent,l&&(null===i||void 0===i||i.storage.removeItem(s)),e.next=27;break;case 24:return e.next=26,Jl.call(y,s);case 26:u=e.sent;case 27:return e.next=29,Vl(u);case 29:if(h=e.sent,h){e.next=36;break}return h=Xo({network:r,address:n,contractsInfo:a}),e.next=34,Kl(u,h);case 34:e.next=37;break;case 36:h=Et(Zo,h);case 37:return e.abrupt("return",{db:u,state:h});case 38:case"end":return e.stop()}}),e)}))),Yp.apply(this,arguments)}function Qp(e){return ef(e)||Jp(e)||rf(e)||zp()}function zp(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ef(e){if(Array.isArray(e))return af(e)}function tf(e,t){return cf(e)||of(e,t)||rf(e,t)||nf()}function nf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rf(e,t){if(e){if("string"===typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?af(e,t):void 0}}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function of(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cf(e){if(Array.isArray(e))return e}function sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(n),!0).forEach((function(t){lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var ff=function(e,t,n){pf(e),pf(t);var r=n.provider;return _i((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(P["a"])(e),sn(r,"block"))})),Object(B["a"])((function(e){return La({blockNumber:e})})))},df=function(e,t,n){pf(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Mu["a"])(1),Object(F["a"])((function(e){return Ku()(e.tokens)})),Object($["a"])((function(){return _i((function(){return a.getLogs(uf(uf({},o.filters.TokenNetworkCreated(null,null)),{},{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object($["a"])(Kt["a"]),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(F["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var t=e.log,n=e.parsed,o=k["defaultAbiCoder"].encode(["address"],[r]);return Object(Iu["a"])(_i((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Kt["a"])),_i((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Kt["a"]))).pipe(Object(Mu["a"])(1),Object(ri["a"])(Ma({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},bf=function(e,t,n){pf(e),pf(t);var r=n.address,a=n.network,o=n.provider;return _i((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(Lu["a"])(o.pollingInterval).pipe(Object(Zt["a"])((function(){return Object(I["a"])(e?_i((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?M["a"]:Object(P["a"])(Mo({reason:Ce.ACCOUNT_CHANGED}))}))):M["a"],_i((function(){return ln(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(P["a"])(Mo({reason:Ce.NETWORK_CHANGED})):M["a"]}))))})))})))};function yf(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function hf(e,t){var n=tf(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=yf(s),l=u.openTopic,p=u.depositTopic,f=u.withdrawTopic,d=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Uu["a"])(i),Object(B["a"])((function(e){var t,n,i=tf(e,2),c=i[0],s=i[1],u=s.state,y=s.config,h=c[0].toNumber(),m=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===h})),v=$t(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,_=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var k=tf(c,4),j=k[1],E=k[2],T=k[3];if((o===j||o===E)&&(!m||h>m.id)){var x=o==j?E:j;n=Ua.success({id:h,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:x})}break;case p:var S=tf(c,3),A=S[1],N=S[2];(null===m||void 0===m?void 0:m.id)===h&&N.gt(m[A===m.partner.address?"partner":"own"].deposit)&&(n=Fa.success({id:h,participant:A,totalDeposit:N,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address}));break;case f:var D=tf(c,3),R=D[1],C=D[2];(null===m||void 0===m?void 0:m.id)===h&&C.gt(m[R===m.partner.address?"partner":"own"].withdraw)&&(n=Wa({id:h,participant:R,totalWithdraw:C,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address}));break;case d:if((null===m||void 0===m?void 0:m.id)===h&&!("closeBlock"in m)){var P=tf(c,2),I=P[1];n=$a.success({id:h,participant:I,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:m.partner.address})}break;case b:(null===m||void 0===m?void 0:m.id)===h&&(n=Va.success({id:h,txHash:O,txBlock:w,confirmed:_,locks:m.partner.locks},{tokenNetwork:a,partner:m.partner.address}));break}return n})),Object(F["a"])(Tt))}}function mf(e,t,n){var r=tf(e,2),a=r[0],o=r[1],i=tf(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,p=n.latest$,f=n.getTokenNetworkContract,d=f(s),b=yf(d),y=b.openTopic;return _i((function(){return Promise.all([l.getLogs(uf(uf({},d.filters.ChannelOpened(null,u,null,null)),{},{fromBlock:a,toBlock:o})),l.getLogs(uf(uf({},d.filters.ChannelOpened(null,null,u,null)),{},{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Uu["a"])(p),Object($["a"])((function(e){var t=tf(e,2),n=tf(t[0],2),r=n[0],i=n[1],c=t[1].state,p=r.concat(i).map(un(d)).filter(Tt).filter((function(e){var t=tf(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Li({tokenNetwork:s,partner:o});return!(Mi({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),f=[].concat(Qp(p),Qp(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=tf(e,1),n=t[0];return k["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===f.length?M["a"]:_i((function(){return l.getLogs({address:s,topics:[Object.values(yf(d)).filter((function(e){return e!==y})),f],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object($["a"])((function(e){var t=e.map(un(d)).filter(Tt),n=[].concat(Qp(p),Qp(t));return Object(Kt["a"])(Vu()(n,[function(e){return $t(e).blockNumber},function(e){return $t(e).transactionIndex}]))})))})),hf([c,s],n))}function vf(e,t,n){var r=tf(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(yf(u))]};return s.pipe(Object(W["a"])(),Object($["a"])((function(t){var n=t.confirmationBlocks;return sn(i,l,void 0,n,e)})),Object(B["a"])(un(u)),Object(F["a"])(Tt),hf([a,o],n))}var gf=function(e,t,n){return e.pipe(Object(F["a"])(La.is),Object(H["a"])("payload","blockNumber"),Object(Bu["a"])(1,void 0,(function(e){return t.pipe(Object(H["a"])("tokens"),Oi(),Object(Uu["a"])(t),Object($["a"])((function(t){var r=tf(t,2),a=tf(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new C["a"];return e.pipe(Object(W["a"])(),Object($["a"])((function(e){return Object(I["a"])(Object(P["a"])(Ma({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),mf([s,e],[o,i],n).pipe(Object(Au["a"])((function(){return u.next(!0),u.complete()}))),vf(e+1,[o,i],n).pipe(Object(Fu["a"])((function(){return u}))))})))})))})))},Of=function(e,t){return pf(e),t.pipe(Hi,Object($["a"])((function(e){return e.pipe(Object(W["a"])(),Object(B["a"])((function(e){return Ba({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},wf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(F["a"])(Cr(Ua.request)),Object(Uu["a"])(t,u),Object($["a"])((function(t){var n,u,l,p,f=tf(t,3),d=f[0],b=f[1],y=f[2],h=y.settleTimeout,m=y.subkey,v=d.meta,g=v.tokenNetwork,O=v.partner,w=null===(n=b.channels[Li(d.meta)])||void 0===n?void 0:n.state;if(w)return Object(P["a"])(Ua.failure(new yt(dt.CNL_INVALID_STATE,{state:w}),d.meta));var _=Mp({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:m),k=_.signer,j=Up(s(g),k),E=M["a"];return(null===(p=null===(l=d.payload.deposit)||void 0===l?void 0:l.gt)||void 0===p?void 0:p.call(l,0))&&(E=Object(P["a"])(Fa.request({deposit:d.payload.deposit,subkey:d.payload.subkey,waitOpen:!0},d.meta))),Object(Iu["a"])(E,Object(L["a"])((function(){var e;return j.functions.openChannel(o,O,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:h)})).pipe(Bi("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),$i(c.pollingInterval,void 0,Fi.concat(Wi),{log:r}),Object(ni["a"])(e.pipe(Object(F["a"])(Ua.success.is),Object(F["a"])((function(e){return e.meta.tokenNetwork===g&&e.meta.partner===O})))),Object(Su["a"])(),Object(Xt["a"])((function(e){return Object(P["a"])(Ua.failure(e,d.meta))}))))})))};function _f(e,t,n,r,a){var o=tf(e,2),i=o[0],c=o[1],s=tf(t,3),u=s[0],l=s[1],p=s[2],f=a.log,d=a.config$;return(null===n||void 0===n?void 0:n.gt(j["Zero"]))?Object(L["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(Uu["a"])(d),Object($["a"])((function(e){var t=tf(e,2),r=tf(t[0],2),a=r[0],o=r[1],s=t[1].minimumAllowance;return Vi([a,o,n],i,c.address,dt.CNL_APPROVE_TRANSACTION_FAILED,{log:f,minimumAllowance:s})})),Object(Wu["a"])(r),Object(Mu["a"])(1),Object($["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,p).then((function(t){var n=t[0];return[e,n]}))})),Object($["a"])((function(e){var t=tf(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),p)})),Bi("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:f}),$i(c.provider.pollingInterval,void 0,Fi.concat(Wi),{log:f}),Object(Su["a"])()):M["a"]}var kf=function(e,t,n){pf(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(F["a"])(Cr(Fa.request)),Object(ti["a"])((function(e){return e.meta.tokenNetwork})),Object($["a"])((function(t){return t.pipe(Object($u["a"])((function(t){return Object(cu["a"])([l,u]).pipe(Object(W["a"])(),Object($["a"])((function(n){var p,f,d=tf(n,2),b=d[0].state,y=d[1].subkey,h=t.meta,m=h.tokenNetwork,v=h.partner,g=$e()(b.tokens,(function(e){return e===m})),O=b.channels[Li(t.meta)];if(g&&!O&&t.payload.waitOpen)f=Object(I["a"])(e.pipe(Object(F["a"])(Ua.failure.is),Object(F["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(Wu["a"])(Object(zo["a"])(new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object(H["a"])("state","channels",Li(t.meta)),Object(F["a"])(Tt)));else{if((null===O||void 0===O?void 0:O.state)!==Jr.open)throw new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND);f=Object(P["a"])(O)}var w=Mp({signer:a,address:o,main:i},null!==(p=t.payload.subkey)&&void 0!==p?p:y),_=w.signer,k=w.address,j=Up(c(g),_),E=Up(s(m),_);return f.pipe(Object(H["a"])("id"),Object(Bu["a"])(1,void 0,(function(e){return _f([j,E],[k,o,v],t.payload.deposit,e,{log:r,config$:u})})))})),Object(Xt["a"])((function(e){return Object(P["a"])(Fa.failure(e,t.meta))})))})))})))},jf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(F["a"])(Cr($a.request)),Object(Uu["a"])(t,l),Object($["a"])((function(e){var t,n,l=tf(e,3),p=l[0],f=l[1],d=l[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=Mp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Up(u(y),v),O=f.channels[Li(p.meta)];if((null===O||void 0===O?void 0:O.state)!==Jr.open&&(null===O||void 0===O?void 0:O.state)!==Jr.closing){var w=new yt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,p.meta);return Object(P["a"])($a.failure(w,p.meta))}var _=O.partner.balanceProof,j=na(_),E=_.nonce,T=_.additionalHash,x=_.signature,S=Object(k["concat"])([hr(y,20),hr(s.chainId,32),hr(zr.BALANCE_PROOF,32),hr(O.id,32),hr(j,32),hr(E,32),hr(T,32),hr(x,65)]);return Object(Kt["a"])(a.signMessage(S)).pipe(Object($["a"])((function(e){return Object(L["a"])((function(){return g.functions.closeChannel(O.id,h,o,j,E,T,x,e)})).pipe(Bi("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Su["a"])(),Object(Xt["a"])((function(e){return Object(P["a"])($a.failure(e,p.meta))})))})))},Ef=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(F["a"])(Cr($a.success)),Object(F["a"])((function(e){return!!e.payload.confirmed})),Object(Fu["a"])((function(){return e.pipe(Object(F["a"])(La.is))})),Object(Uu["a"])(t,l),Object(F["a"])((function(e){var t=tf(e,2),n=t[0],r=t[1],a=r.channels[Li(n.meta)];return(null===a||void 0===a?void 0:a.state)===Jr.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(j["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=tf(e,3),n=t[0],l=t[1],p=t[2].subkey,f=n.meta,d=f.tokenNetwork,b=f.partner,y=Mp({signer:a,address:o,main:i},p),h=y.signer,m=Up(u(d),h),v=l.channels[Li(n.meta)],g=na(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,_=v.partner.balanceProof.signature,j=Object(k["concat"])([hr(d,20),hr(s.chainId,32),hr(zr.BALANCE_PROOF_UPDATE,32),hr(v.id,32),hr(g,32),hr(O,32),hr(w,32),hr(_,65)]);return Object(Kt["a"])(a.signMessage(j)).pipe(Object($["a"])((function(e){return Object(L["a"])((function(){return m.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,_,e)})).pipe(Bi("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Su["a"])(),Object(Xt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),M["a"]})))})))},Tf=function(e,t,n){pf(e);var r=n.config$;return t.pipe(Hi,Object($["a"])((function(e){return e.pipe(Object(F["a"])((function(e){return e.state===Jr.settleable})),Object(Mu["a"])(1),Object(Uu["a"])(r),Object(Fu["a"])((function(e){var n=tf(e,2),r=n[0],a=n[1].confirmationBlocks,o=r.closeBlock+r.settleTimeout+Math.round(a*(1+Math.random()));return t.pipe(Object(H["a"])("blockNumber"),Object(F["a"])((function(e){return o<=e})),Object(Mu["a"])(1))})),Object(Uu["a"])(t),Object(F["a"])((function(e){var t,n=tf(e,2),r=tf(n[0],1),a=r[0],o=n[1];return(null===(t=o.channels[Li(a)])||void 0===t?void 0:t.state)===Jr.settleable})),Object(B["a"])((function(e){var t=tf(e,1),n=tf(t[0],1),r=n[0];return Va.request(void 0,{tokenNetwork:r.tokenNetwork,partner:r.partner.address})})))})),ki(r.pipe(Object(H["a"])("autoSettle"))))},xf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$,l=n.db;return e.pipe(Object(F["a"])(Cr(Va.request)),Object(Uu["a"])(t,u),Object($["a"])((function(e){var t,n,u=tf(e,3),p=u[0],f=u[1],d=u[2].subkey,b=p.meta,y=b.tokenNetwork,h=b.partner,m=Mp({signer:a,address:o,main:i},null!==(n=null===(t=p.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=m.signer,g=Up(s(y),v),O=f.channels[Li(p.meta)];if((null===O||void 0===O?void 0:O.state)!==Jr.settleable&&(null===O||void 0===O?void 0:O.state)!==Jr.settling){var w=new yt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,p.meta);return Object(P["a"])(Va.failure(w,p.meta))}return Object(Kt["a"])(Promise.all([g.functions.getChannelParticipantInfo(O.id,o,h),g.functions.getChannelParticipantInfo(O.id,h,o)])).pipe(Object($["a"])((function(e){var t,n,a=tf(e,2),i=a[0][3],s=a[1][3];return t=i===na(O.own.balanceProof)?Object(P["a"])(O.own.balanceProof):bs(l,O,ga.SENT,i).pipe(Object(Xt["a"])((function(){return Object(zo["a"])(new yt(dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:i}))}))),n=s===na(O.partner.balanceProof)?Object(P["a"])(O.partner.balanceProof):bs(l,O,ga.RECEIVED,s).pipe(Object(Xt["a"])((function(){return Object(zo["a"])(new yt(dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,partnerBalanceHash:s}))}))),Object(cu["a"])([t,n]).pipe(Object(B["a"])((function(e){var t=tf(e,2),n=t[0],r=t[1];return r.transferredAmount.add(r.lockedAmount).lt(n.transferredAmount.add(n.lockedAmount))?[[h,r],[o,n]]:[[o,n],[h,r]]})),Object($["a"])((function(e){var t=tf(e,2),n=t[0],a=t[1];return Object(L["a"])((function(){return g.functions.settleChannel(O.id,n[0],n[1].transferredAmount,n[1].lockedAmount,n[1].locksroot,a[0],a[1].transferredAmount,a[1].lockedAmount,a[1].locksroot)})).pipe(Bi("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}))})))})),Object(Su["a"])(),Object(Xt["a"])((function(e){return Object(P["a"])(Va.failure(e,p.meta))})))})))},Sf=function(e,t){return e.pipe(Object(F["a"])(Cr(La)),Object(Uu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=tf(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===Jr.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Ha({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Af=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(F["a"])(Cr(Va.success)),Object(F["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Uu["a"])(t,u),Object(F["a"])((function(e){var t,n=tf(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Li(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=tf(e,3),n=t[0],u=t[2].subkey,l=n.meta,p=l.tokenNetwork,f=l.partner,d=Up(s(p),Mp({signer:a,address:o,main:i},u).signer),b=Object(k["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Qp(e),[hr(t.expiration,32),hr(t.amount,32),t.secrethash])}),[]));return Object(L["a"])((function(){return d.functions.unlock(n.payload.id,o,f,b)})).pipe(Bi("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}),Object(Su["a"])(),Object(Xt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),M["a"]})))})))};function Nf(e,t,n,r){return _i((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?uf(uf({},e),{},{payload:uf(uf({},e.payload),{},{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?uf(uf({},e),{},{payload:uf(uf({},e.payload),{},{confirmed:!1})}):void 0})),Object(F["a"])(Tt))}var Df=function(e,t,n){pf(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(cu["a"])([t.pipe(gi("blockNumber")),t.pipe(Object(H["a"])("pendingTxs")),r.pipe(gi("confirmationBlocks"))]).pipe(Object(F["a"])((function(e){var t=tf(e,2),n=t[1];return n.length>0})),Object(Zt["a"])((function(e){var t=tf(e,3),n=t[0],r=t[1],i=t[2];return Object(Kt["a"])(r).pipe(Object(F["a"])((function(e){return e.payload.txBlock+i<n})),Object($u["a"])((function(e){return Nf(e,a,n,i).pipe(Object(ni["a"])(o.pipe(Object(F["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))},Rf=n("9849"),Cf=n("67fa"),Pf=n("3bb9"),If=n("84d1"),Lf=n("2705"),Mf=n("4d9a");function Uf(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Bf(e,t){var n=Object(Mf["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Ff=n("a51e"),Wf=n.n(Ff);function $f(e,t){return Gf(e)||Kf(e,t)||Vf(e,t)||Hf()}function Hf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vf(e,t){if(e){if("string"===typeof e)return qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qf(e,t):void 0}}function qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gf(e){if(Array.isArray(e))return e}function Zf(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Xf(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zf(o,r,a,i,c,"next",e)}function c(e){Zf(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Yf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Qf(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Tt)}var zf=Wf()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Jf(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(zf(t))),n?Object(P["a"])(n):Object(al["a"])(e,"Room").pipe(Object(F["a"])(zf(t)),Object(Mu["a"])(1))}function ed(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(F["a"])((function(t){var n=t.presences;return e in n})),Object(Mu["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(P["a"])(a[e]):i.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(F["a"])(Tt),Object(oi["a"])(),Object(ui["a"])((function(n){return Jf(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(H["a"])("presences",e),Object(B["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(oi["a"])(),Object(B["a"])((function(e){return{room:t,userId:e}})))})),Object(ui["a"])((function(e){var n=e.room,r=e.userId;if(!r)return M["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(P["a"])(a):Object(al["a"])(t,"RoomMember.membership",(function(e,t){return Yf(e),t})).pipe(Object(F["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(H["a"])("roomId"))})))})),Object(Mu["a"])(1),Object($["a"])((function(e){return Object(L["a"])(Xf(b.a.mark((function a(){return b.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return","string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body));case 1:case"end":return a.stop()}}),a)})))).pipe(Object(ri["a"])("string"===typeof e?e:e.label),Object(ei["a"])((function(e){return e.pipe(Object(Uu["a"])(c),Object($["a"])((function(e,t){var n=$f(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Qo["a"])(a)):Object(zo["a"])(r)})))})))})))}function td(e,t,n){var r=n.log;if("string"===typeof e)try{var a=ua(e);if("signature"in a){var o=ia(a);if(o!==t)throw new yt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function nd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function rd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ad(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){rd(o,r,a,i,c,"next",e)}function c(e){rd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function od(e,t){return ld(e)||ud(e,t)||cd(e,t)||id()}function id(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cd(e,t){if(e){if("string"===typeof e)return sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sd(e,t):void 0}}function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ud(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ld(e){if(Array.isArray(e))return e}var pd="RAIDEN";function fd(e,t){var n=Uf(t.getHomeserverUrl());return Object(Kt["a"])(Qf(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new v["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(H["a"])("roomId"),Object(Rf["a"])())}function dd(e,t){return Object(L["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function bd(e,t,n,r){return e.pipe(Object(F["a"])(Ga.is),Object(Mu["a"])(1),Object(Jo["a"])((function(){n.next(t),n.complete()})),Object(Cf["a"])(1e3),Object(Uu["a"])(r),Object($["a"])((function(e){var n=od(e,2),r=n[1];return fd(r,t).pipe(Object($["a"])((function(e){return dd(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(Su["a"])())}function yd(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function hd(e,t){return e.includes("://")||(e="https://"+e),Object(L["a"])((function(){var n=Date.now();return Object(Lf["a"])(e+"/_matrix/client/versions").pipe(Object(Pf["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Xt["a"])((function(){return Object(P["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function md(e,t){return Object(Lf["a"])(e).pipe(Object($["a"])(function(){var t=ad(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ht(n.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(n.status)),t.abrupt("return",n.text());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(Pf["a"])(t),Object($["a"])((function(e){return yd(e)})),Object($["a"])((function(e){return hd(e,t)})),Object(Rf["a"])(),Object($["a"])((function(e){return Vu()(e,["rtt"])})),Object(F["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(If["a"])((function(){return new yt(dt.TRNS_NO_MATRIX_SERVERS)})))}function vd(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=Uf(e);if(!c)throw new yt(dt.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(W["a"])(),Object($["a"])((function(n){var i=n.pollingInterval;if(t){var s=Object(v["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(P["a"])({matrix:s,server:e,setup:t})}var u=Object(v["createClient"])({baseUrl:e}),l=a.toLowerCase(),p="@".concat(l,":").concat(c);return Object(Kt["a"])(o.signMessage(c)).pipe(Object($["a"])((function(e){return _i((function(){return u.login("m.login.password",{user:l,password:e,device_id:pd})}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object(Xt["a"])((function(t){return u.register(l,e).catch((function(){throw t}))})))})),Object($["a"])((function(t){var n=t.access_token,r=t.device_id;return u.deviceId=r,u._http.opts.accessToken=n,u.credentials={userId:p},Object(Kt["a"])(o.signMessage(p)).pipe(Object(B["a"])((function(t){return{matrix:u,server:e,setup:{userId:p,accessToken:n,deviceId:r,displayName:t}}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(_i((function(){return t.setDisplayName(a.displayName)}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),_i((function(){return t.setAvatarUrl(r&&!Ku()(r)?Tu(r):"")}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))).pipe(Object(ri["a"])({matrix:t,server:n,setup:a}))})))})))}var gd=function(e,t,n){nd(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(cu["a"])([i,c]).pipe(Object(W["a"])(),Object($["a"])((function(e){var t,n=od(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,p=i.caps,f=o.transport.server,d=o.transport.setup,b=[];s?(s===f&&b.push(Object(P["a"])({server:f,setup:d})),b.push(Object(P["a"])({server:s}))):(f&&b.push(Object(P["a"])({server:f,setup:d})),b.push(md(u,l)));var y=function(e){return t=e,M["a"]};return Object(L["a"])((function(){return b.shift()||M["a"]})).pipe(Object(Xt["a"])(y),Object($u["a"])((function(e){var t=e.server,n=e.setup;return vd(t,n,{address:r,signer:a,config$:c},p).pipe(Object(Xt["a"])(y))})),Object(W["a"])(),Object(Jo["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(ei["a"])((function(e){return e.pipe(Object($["a"])((function(){return b.length?Object(P["a"])(null):Object(zo["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(bd(e,n,o,c),Object(P["a"])(Ga({server:r,setup:a})),c.pipe(gi("logger"),Object(Jo["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Su["a"])()))})))},Od=function(e,t,n){nd(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Au["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Su["a"])())},wd=n("e98d"),_d=n.n(wd);function kd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function jd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kd(o,r,a,i,c,"next",e)}function c(e){kd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ed(e,t){return Sd(e)||xd(e,t)||Pd(e,t)||Td()}function Td(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sd(e){if(Array.isArray(e))return e}function Ad(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(n),!0).forEach((function(t){Rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Pd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Pd(e,t){if(e){if("string"===typeof e)return Id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Id(e,t):void 0}}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ld=["online","unavailable"],Md=/^@(0x[0-9a-f]{40})[.:]/i;function Ud(e,t,n){var r=n.log;return Object(L["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(b.a.mark((function e(n){var r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Cd(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Md.exec(i.user_id),c&&Object(k["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(k["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Bf(e,t.user_id).then((function(e){return Dd(Dd({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(F["a"])(Tt),Object(Rf["a"])(),Object(B["a"])((function(e){if(!e.length)throw new yt(dt.TRNS_NO_VALID_USER,{address:t});return _d()(e,"last_active_ago")})))}var Bd=function(e,t,n){Ad(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(F["a"])(Cr(Za.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ti["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Uu["a"])(a.pipe(gi("presences"))),Object(Zt["a"])((function(e){var t=Ed(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(P["a"])(i[r.meta.address]):Ud(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Za.success({userId:n,available:Ld.includes(t),ts:Date.now(),caps:xu(a)},r.meta)})),Object(Xt["a"])((function(e){return Object(P["a"])(Za.failure(e,r.meta))})))})))})))},Fd=function(e,t,n){Ad(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(ui["a"])((function(e){return Object(al["a"])(e,"event").pipe(Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(F["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(B["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{ht(null===a||void 0===a?void 0:a.presence);var o=null===(t=Md.exec(a.userId))||void 0===t?void 0:t[1];ht(o);var i=Object(k["getAddress"])(o);return ht(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(F["a"])(Tt),Object(Uu["a"])(e.pipe(Object(F["a"])(Za.request.is),Object(ii["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(uu["a"])(new Set))),Object(F["a"])((function(e){var t=Ed(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=Ed(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=Ld.includes(s);return Object(L["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(B["a"])((function(e){var t;ht(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(k["verifyMessage"])(c,e.displayname);return ht(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Za.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:xu(e.avatar_url)},{address:n})})),Object(Xt["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),M["a"]})))}))).pipe(Object(Uu["a"])(o),Object(F["a"])((function(e){var t=Ed(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(H["a"])(0))},Wd=function(e){return e.pipe(Object(F["a"])(Ba.is),Object(B["a"])((function(e){return Za.request(void 0,{address:e.meta.partner})})))},$d=function(e,t,n){Ad(e),Ad(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(H["a"])("caps"),Object(oi["a"])(du.a),Object(U["a"])(1),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return[e,t]})))})),Object($["a"])(function(){var e=jd(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Ed(t,2),r=n[0],a=n[1],e.abrupt("return",a.setAvatarUrl(r&&!Ku()(r)?Tu(r):"").catch((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Su["a"])())},Hd=n("4914"),Vd=n("1df9"),qd=n.n(Vd);function Kd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Gd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Kd(o,r,a,i,c,"next",e)}function c(e){Kd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Zd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Xd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Yd(e,t){return tb(e)||eb(e,t)||zd(e,t)||Qd()}function Qd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zd(e,t){if(e){if("string"===typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function tb(e){if(Array.isArray(e))return e}function nb(e,t,n,r,a){var o=a.log;return Object(L["a"])((function(){var n=e.getRoom(t);return n?Object(P["a"])(n):Object(al["a"])(e,"Room").pipe(Object(F["a"])((function(e){return e.roomId===t})),Object(Mu["a"])(1))})).pipe(Object(F["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Uu["a"])(r),Object($["a"])((function(r){var a=Yd(r,2),i=a[1].httpTimeout;return Object(L["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(ci["a"])((function(e){return e.pipe(Object(Cf["a"])(i))})),Object(ni["a"])(Object(al["a"])(e,"RoomMember.membership",(function(e,t){return Xd(e),t})).pipe(Object(F["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var rb=function(e,t,n){Xd(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(F["a"])(Cr([oo,Ba,Hr.request,Ya])),Object(B["a"])((function(e){var t;switch(e.type){case oo.type:e.meta.direction===ga.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===ga.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Ba.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(F["a"])(Tt),Object(ti["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(Zt["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(F["a"])((function(e){var n=e.presences;return t in n})),Object(Mu["a"])(1),Object(F["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(B["a"])((function(e){var n=e.room_id;return Xa({roomId:n},{address:t})})),Object(Xt["a"])((function(e){return a.error("Error creating room, ignoring",e),M["a"]})))})))})))},ab=function(e,t,n){Xd(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(F["a"])(Cr(Za.success)),Object(ti["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Uu["a"])(r),Object(ui["a"])((function(e){var t=Yd(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(B["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(oi["a"])(),Object(ui["a"])((function(e){return Object(Iu["a"])(Object(P["a"])(e),e?Object(al["a"])(r,"RoomMember.membership",(function(e,t){return Xd(e),t})).pipe(Object(F["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(ri["a"])(e)):M["a"])})),Object(ui["a"])((function(e){return e?nb(r,e,n.payload.userId,a,{log:i}):M["a"]}))):M["a"]})))})),Object(Su["a"])())},ob=function(e,t,n){Xd(e),Xd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(ui["a"])((function(e){return Object(al["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(F["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Uu["a"])(o),Object($["a"])((function(e){var t=Yd(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(gi("presences"),Object(B["a"])((function(e){return qd()(e,(function(e){return e.payload.userId===s}))})),Object(F["a"])(Tt),Object(Mu["a"])(1),Object(ni["a"])(Object(Qo["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Kt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(ri["a"])(Xa({roomId:n.roomId},{address:a.meta.address})),Object(Xt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),M["a"]})))})))},ib=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(F["a"])(Cr(Xa)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Uu["a"])(t,o),Object($["a"])((function(e){var t,n,a=Yd(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Kt["a"])(l.filter((function(e,t){return Xd(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return Ya({roomId:e},i.meta)})))})))},cb=function(e,t,n){Xd(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(ui["a"])((function(e){return Object(al["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,room:t}})))})),Object(Fu["a"])((function(){return o.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(Qo["a"])(t)})))})),Object(Uu["a"])(t,o),Object(F["a"])((function(e){var t,n=Yd(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=Uf(a.getHomeserverUrl());if(Qf(c).some((function(e){return zf("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var p,f=l[u],d=Zd(f);try{for(d.s();!(p=d.n()).done;){var b=p.value;if(b===o.roomId)return!1}}catch(y){d.e(y)}finally{d.f()}}return!0})),Object($["a"])(function(){var e=Gd(b.a.mark((function e(t){var n,a,o,i;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Yd(t,1),a=n[0],o=a.matrix,i=a.room,r.warn("Unknown room in matrix, leaving",i.roomId),e.abrupt("return",o.leave(i.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(Su["a"])())},sb=function(e,t,n){Xd(e);var r=n.log,a=n.matrix$;return a.pipe(Object(ui["a"])((function(e){return Object(al["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(F["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Uu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Yd(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Yd(s[c],2),l=u[0],p=u[1],f=Zd(p),e.prev=5,f.s();case 7:if((d=f.n()).done){e.next=15;break}if(y=d.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Ya({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},ub=function(e,t,n){Xd(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(gi("transport","rooms"),Object(F["a"])(Tt),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Yd(r[n],2),o=a[0],i=a[1],c=Zd(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Hd["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Uu["a"])(o),Object($["a"])((function(e){var t=Yd(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Jf(i,a).pipe(Object(Pf["a"])(c),Object(Su["a"])(),Object(Xt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(P["a"])(Ya({roomId:a},{address:o}))})))})))},lb=function(e,t){return e.pipe(Object(F["a"])(qr.is),Object(Uu["a"])(t),Object(F["a"])((function(e){var t,n,r=Yd(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=Yd(e,1),n=t[0];return Xa({roomId:n.payload.roomId},n.meta)})))};function pb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function db(e,t,n){return t&&fb(e.prototype,t),n&&fb(e,n),e}var bb=function(){function e(t){pb(this,e),this.values=new Map,this.max=t}return db(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function yb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=vb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function hb(e,t){return wb(e)||Ob(e,t)||vb(e,t)||mb()}function mb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vb(e,t){if(e){if("string"===typeof e)return gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gb(e,t):void 0}}function gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ob(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wb(e){if(Array.isArray(e))return e}function _b(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var kb=function(e,t,n){_b(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(F["a"])(Cr(Hr.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ti["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object($u["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:sa(t.payload.message),c={body:a,msgtype:"m.text"};return ed(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(B["a"])((function(e){return Hr.success({via:e},t.meta)})),Object(Xt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(P["a"])(Hr.failure(e,t.meta))})))})))})))},jb=function(e,t,n){_b(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(F["a"])(Cr(Vr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Uu["a"])(o),Object($["a"])((function(e){var t=hb(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Qf(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),M["a"];var s=Uf(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Jf(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:sa(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Xt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),M["a"]})))})),Object(Su["a"])())},Eb=function(e,t,n){_b(e),_b(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(ui["a"])((function(e){return Object(al["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Uu["a"])(o),Object(F["a"])((function(e){var t,n,r=hb(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Qf(s).some((function(e){return zf("#".concat(e,":").concat(Uf(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=hb(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(F["a"])((function(e){var t,n,r=e.presences,i=e.state,c=qd()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Mu["a"])(1),Object(ni["a"])(Object(Qo["a"])(c)),Object($["a"])(b.a.mark((function e(t){var n,i,c,s,u,l,p;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=qd()(n,["payload.userId",a.getSender()]),s=yb((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,p=td(l,c.meta.address,{log:r}),e.next=10,qr({text:l,message:p,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Tb=function(e,t,n){_b(t);var r=n.log,a=n.signer,o=n.latest$,i=new bb(32);return e.pipe(Object(F["a"])(fa([Ft(Cn),Ft(In),Ft(Mn)])),Object(Uu["a"])(o),Object(F["a"])((function(e){var t,n=hb(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Pe.NO_DELIVERY])})),Object($u["a"])((function(e){var t=hb(e,1),n=t[0],o=n.payload.message;return Object(L["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(P["a"])(Hr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:kn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Kt["a"])(la(a,s,{log:r})).pipe(Object(Jo["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return Hr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},xb=n("e11c"),Sb=n("1e67");function Ab(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Nb(e,t){return Cb(e)||Rb(e,t)||Lb(e,t)||Db()}function Db(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Cb(e){if(Array.isArray(e))return e}function Pb(e){return Ub(e)||Mb(e)||Lb(e)||Ib()}function Ib(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lb(e,t){if(e){if("string"===typeof e)return Bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bb(e,t):void 0}}function Mb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ub(e){if(Array.isArray(e))return Bb(e)}function Bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fb(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Wb(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Fb(o,r,a,i,c,"next",e)}function c(e){Fb(o,r,a,i,c,"throw",e)}i(void 0)}))}}var $b=new WeakMap;function Hb(e){return Vb.apply(this,arguments)}function Vb(){return Vb=Wb(b.a.mark((function e(t){var n,r,a,o;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=$b.get(t),!(n&&Date.now()<n[0])){e.next=3;break}return e.abrupt("return",n[1]);case 3:return e.next=5,t.turnServer();case 5:return r=e.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),$b.set(t,[a,o]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function qb(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function Kb(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(al["a"])(e,"icecandidate").pipe(Object(H["a"])("candidate"),Object(Fu["a"])((function(){return n})),Object(si["a"])(Tt),Object(xb["a"])(10),Object(F["a"])((function(e){return e.length>0})),Object(Jo["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return ed(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(al["a"])(t,"event").pipe(Object(F["a"])(qb("m.call.candidates",i,o)),Object(Jo["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(Kt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(L["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Xt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),M["a"]})))})))).pipe(Object(Su["a"])())}function Gb(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,p=a.latest$,f=a.config$;return Object(Kt["a"])(Hb(e)).pipe(Object($["a"])((function(r){var d=new RTCPeerConnection({iceServers:[].concat(Pb(r),Pb(i))}),b=d.createDataChannel(c,{ordered:!1});return Object(I["a"])(Kb(d,e,t,n,a),Object(L["a"])((function(){return d.createOffer()})).pipe(Object($["a"])((function(t){d.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(al["a"])(e,"event").pipe(Object(F["a"])(qb("m.call.answer",s,c,o))),ed(u,e,"m.call.invite",n,{log:l,latest$:p,config$:f}).pipe(Object(Jo["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Su["a"])()))})),Object(Mu["a"])(1),Object(Jo["a"])((function(){return l.info("RTC: got answer",c)})),Object(B["a"])((function(e){d.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Su["a"])()),Object(P["a"])(b))})))}function Zb(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,p=a.config$;return Object(al["a"])(e,"event").pipe(Object(F["a"])(qb("m.call.invite",c,i,o)),Object(Jo["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(Kt["a"])(Hb(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(Uu["a"])(p),Object($["a"])((function(r){var c=Nb(r,2),f=Nb(c[0],2),d=f[0],b=f[1],y=c[1].fallbackIceServers,h=new RTCPeerConnection({iceServers:[].concat(Pb(b),Pb(y))});return h.setRemoteDescription(new RTCSessionDescription(d.getContent().offer)),Object(I["a"])(Kb(h,e,t,n,a),Object(L["a"])((function(){return h.createAnswer()})).pipe(Object($["a"])((function(t){h.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return ed(s,e,"m.call.answer",n,{log:u,latest$:l,config$:p})})),Object(Jo["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Su["a"])()),Object(al["a"])(h,"datachannel").pipe(Object(H["a"])("channel")))})),Object(Mu["a"])(1))}function Xb(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(al["a"])(t,"close").pipe(Object(Jo["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Su["a"])()),Object(al["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(zo["a"])(e.error)}))),Object(al["a"])(t,"open").pipe(Object(Mu["a"])(1),Object(Pf["a"])(c/3),Object(Jo["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(ri["a"])(Qa(t,{address:i}))),Object(al["a"])(t,"message").pipe(Object(Jo["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(H["a"])("data"),Object(F["a"])((function(e){return"string"===typeof e})),Object(B["a"])((function(e){return qr({text:e,message:td(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Au["a"])((function(){return t.close()})))})),Object(ni["a"])(e),Object(Xt["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),M["a"]})),Object(Sb["a"])(Qa(void 0,{address:i})))}}function Yb(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(oi["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Uu["a"])(i,c),Object(F["a"])((function(e){var t,n=Nb(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Pe.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Pe.WEBRTC])})),Object(ui["a"])((function(t){var n=Nb(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(P["a"])(Qa(void 0,i.meta));var l={log:r,latest$:o,config$:c},p=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=p.startsWith(a.toLowerCase());return Object(L["a"])((function(){var t,n={callId:p,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],d=new C["a"];return t=f?Gb(s,a,n,u,l):Zb(s,a,n,u,l),d.pipe(Object($["a"])((function(){return ed(i.meta.address,s,"m.call.hangup",{call_id:p,version:0},{log:r,latest$:o,config$:c}).pipe(Object(ni["a"])(Object(Qo["a"])(u.httpTimeout/10)))})),Object(ni["a"])(e.pipe(Object(F["a"])(Mo.is)))).subscribe(),Object(I["a"])(t,Object(al["a"])(s,"event").pipe(Object(F["a"])(qb("m.call.hangup",n.peerId,p)),Object(Wu["a"])(Object(zo["a"])(new Error("RTC: peer hung up"))))).pipe(Xb(d,n,u,l))})).pipe(Object(ci["a"])((function(e){return e.pipe(Object(Uu["a"])(o,c),Object($["a"])((function(e){var t,n,r=Nb(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(Qo["a"])(o/10):Object(P["a"])(null):M["a"]})))})))})))}var Qb=function(e,t,n){return Ab(t),e.pipe(Object(F["a"])(Za.success.is),Object(ti["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return Yb(e,t,n)})))},zb=b.a.mark(Jb);function Jb(){var e,t,n,r,a=arguments;return b.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e3,t=a.length>1&&void 0!==a[1]?a[1]:6e4,n=a.length>2&&void 0!==a[2]?a[2]:1.4,r=e;case 4:return o.next=7,r;case 7:r=Math.min(t,Math.ceil(r*n)),o.next=4;break;case 10:case"end":return o.stop()}}),zb)}function ey(e,t,n){return Object(I["a"])(e.pipe(Object(F["a"])(n),Object(Mu["a"])(1),Object(Su["a"])()),Object(P["a"])(t))}function ty(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return ey(t,e,Mr(Hr,e.meta)).pipe(wi(n,r))}function ny(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}function ry(e,t){return sy(e)||cy(e,t)||oy(e,t)||ay()}function ay(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oy(e,t){if(e){if("string"===typeof e)return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iy(e,t):void 0}}function iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sy(e){if(Array.isArray(e))return e}var uy=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(La.is),Object(H["a"])("payload","blockNumber"),Object(Uu["a"])(t,r),Object(Zt["a"])((function(t){var n=ry(t,3),r=n[0],a=n[1].transfers,o=n[2].confirmationBlocks;return Object(Kt["a"])(Object.values(a).filter((function(e){return e.direction===ga.SENT&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed&&e.expiration<=r-2*o}))).pipe(Object($["a"])((function(t){var n={secrethash:t.transfer.lock.secrethash,direction:ga.SENT};return Object(I["a"])(ey(e,bo.request(void 0,n),Mr(bo,n)),Object(P["a"])(ao.failure(new yt(dt.XFER_EXPIRED,{block:t.transfer.lock.expiration.toString()}),n)))})))})))};function ly(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function py(e,t){return by(e)||dy(e,t)||my(e,t)||fy()}function fy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function by(e){if(Array.isArray(e))return e}function yy(e){return gy(e)||vy(e)||my(e)||hy()}function hy(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function my(e,t){if(e){if("string"===typeof e)return Oy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oy(e,t):void 0}}function vy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gy(e){if(Array.isArray(e))return Oy(e)}function Oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wy(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return ht(n.length===e.locks.length-1,"invalid locks size"),n}function _y(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),j["Zero"])}function ky(e,t,n){var r=e.channels[Li(t)];return ht((null===r||void 0===r?void 0:r.state)===Jr.open,"channel not open"),n&&(ht(n.chain_id.eq(e.chainId),"chainId mismatch"),ht(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function jy(e,t,n,r){var a,o=n.revealTimeout,i=n.confirmationBlocks,c=r.log,s=r.address,u=r.network,l=r.signer,p={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,d=t.payload.paths[0].path[0],y=t.payload.tokenNetwork,h=ky(e,{tokenNetwork:y,partner:d});ht(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o+i,"expiration too soon");var m={amount:t.payload.value.add(f),expiration:Object(k["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},v=es([].concat(yy(h.own.locks),[m]));c.info("Signing transfer of value",t.payload.value.toString(),"of token",h.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var g={type:kn.LOCKED_TRANSFER,message_identifier:as(),chain_id:Object(k["bigNumberify"])(u.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(k["bigNumberify"])(h.id),nonce:h.own.nextNonce,transferred_amount:h.own.balanceProof.transferredAmount,locked_amount:h.own.balanceProof.lockedAmount.add(m.amount),locksroot:v,payment_identifier:t.payload.paymentId,token:h.token,recipient:d,lock:m,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:s,metadata:p};return Object(Kt["a"])(la(l,g,{log:c})).pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oo({message:n,fee:f,partner:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,co({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Ey(e,t,n){return Object(cu["a"])([e,n.config$]).pipe(Object(W["a"])(),Object($["a"])((function(e){var r=py(e,2),a=r[0],o=r[1];return n.db.storageKeys.has(os(t.meta))?(n.log.warn("transfer already present",t.meta),M["a"]):jy(a,t,o,n)})),Object(Xt["a"])((function(e){return Object(P["a"])(ao.failure(e,t.meta))})))}function Ty(e,t,n,r,a){var o,i=a.log,c=a.signer,s=n.meta.secrethash,u=r.transfer,l=u.token_network_address,p=r.partner,f=ky(t,{tokenNetwork:l,partner:p});if(r.unlock)o=Object(P["a"])(r.unlock);else{ht(r.secret,"unknown secret"),ht(f.own.locks.find((function(e){return e.secrethash===s})),"transfer already unlocked or expired"),ht(r.secretRegistered||r.expiration>t.blockNumber,"lock expired");var d={type:kn.UNLOCK,message_identifier:as(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(u.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(u.lock.amount),locksroot:es(wy(f.own,s)),payment_identifier:u.payment_identifier,secret:r.secret};o=Object(Kt["a"])(la(c,d,{log:i}))}return o.pipe(Object(Uu["a"])(e),Object(B["a"])((function(e){var t=py(e,2),r=t[0],a=t[1],o=a.transfers[os(n.meta)],i=ky(a,{tokenNetwork:l,partner:p});return ht(o.expiration>a.blockNumber||o.secretRegistered||i.own.locks.find((function(e){return e.secrethash===s&&e.registered})),"lock expired"),po.success({message:r,partner:p},n.meta)})))}function xy(e,t,n){var r=n.signer,a=n.log,o=n.db;return Object(L["a"])((function(){return ys(e,o,t.meta)})).pipe(Object(Uu["a"])(e),Object($["a"])((function(n){var o=py(n,2),i=o[0],c=o[1];return Ty(e,c,t,i,{log:a,signer:r})})),Object(Xt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(P["a"])(po.failure(e,t.meta))})))}function Sy(e,t,n,r){var a,o=r.signer,i=r.log,c=t.meta.secrethash,s=n.transfer,u=s.token_network_address,l=n.partner,p=ky(e,{tokenNetwork:u,partner:l});if(n.expired)a=Object(P["a"])(n.expired);else{ht(s.lock.expiration.lt(e.blockNumber),"lock not yet expired"),ht(p.own.locks.find((function(e){return e.secrethash===c}))&&!n.unlock,"transfer already unlocked or expired");var f=es(wy(p.own,c)),d={type:kn.LOCK_EXPIRED,message_identifier:as(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:p.own.nextNonce,transferred_amount:p.own.balanceProof.transferredAmount,locked_amount:p.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:f,recipient:l,secrethash:c};a=Object(Kt["a"])(la(o,d,{log:i}))}return a.pipe(Object(B["a"])((function(e){return bo.success({message:e,partner:l},t.meta)})))}function Ay(e,t,n){var r=n.log,a=n.signer,o=n.db;return Object(L["a"])((function(){return ys(e,o,t.meta)})).pipe(Object(Uu["a"])(e),Object($["a"])((function(e){var n=py(e,2),o=n[0],i=n[1];return Sy(i,t,o,{signer:a,log:r})})),Object(Xt["a"])((function(e){return Object(P["a"])(bo.failure(e,t.meta))})))}function Ny(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=n.db,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:ga.RECEIVED};return Object(cu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=py(e,2),i=n[0],l=n[1],p=l.revealTimeout,f=l.caps,d=t.payload.message;if(c.storageKeys.has(os(u))){a.warn("transfer already present",u);var y=d.message_identifier,h=i.transfers[os(u)];return(null===h||void 0===h?void 0:h.transferProcessed)&&h.partner===t.meta.address&&y.eq(h.transfer.message_identifier)?Object(P["a"])(io({message:Bt(h.transferProcessed)},u)):M["a"]}var m=d.token_network_address,v=t.meta.address,g=ky(i,{tokenNetwork:m,partner:v},d);ht(d.nonce.eq(g.partner.nextNonce),["nonce mismatch",{expected:g.partner.nextNonce.toNumber(),received:d.nonce.toNumber()}]);var O=[].concat(yy(g.partner.locks),[d.lock]),w=es(O);ht(d.locksroot===w,"locksroot mismatch"),ht(d.transferred_amount.eq(g.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),ht(d.locked_amount.eq(_y(O)),"lockedAmount mismatch");var _=Ui(g),k=_.partnerCapacity;ht(d.lock.amount.lte(k),"balanceProof total amount bigger than capacity"),ht(d.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",d.lock.amount.toString(),"of token",g.token,", from",d.initiator,", through partner",v);var E=Object(P["a"])(void 0);!(null===f||void 0===f?void 0:f[Pe.NO_RECEIVE])&&d.target===r&&d.lock.expiration.sub(p).gt(i.blockNumber)&&(E=Object(L["a"])((function(){var e={type:kn.SECRET_REQUEST,payment_identifier:d.payment_identifier,secrethash:s,amount:d.lock.amount,expiration:d.lock.expiration,message_identifier:as()};return la(o,e,{log:a})})));var T=Object(L["a"])((function(){var e={type:kn.PROCESSED,message_identifier:d.message_identifier};return la(o,e,{log:a})}));return Object(cu["a"])([T,E]).pipe(Object($["a"])(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=py(t,2),r=n[0],a=n[1],e.next=3,oo({message:d,fee:j["Zero"],partner:v},u);case 3:return e.next=5,io({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,Za.request(void 0,{address:d.initiator});case 8:return e.next=10,uo({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(P["a"])(ao.failure(e,u))})))}function Dy(e,t,n){var r=n.log,a=n.signer,o=n.db,i=ts(t.payload.message.secret),c={secrethash:i,direction:ga.RECEIVED};return Object(L["a"])((function(){return ys(e,o,c)})).pipe(Object(Uu["a"])(e),Object($["a"])((function(e){var n=py(e,2),o=n[0],s=n[1];ht(o,"unknown transfer");var u=t.payload.message,l=t.meta.address;if(ht(l===o.partner,"wrong partner"),ht(!o.expired,"already expired"),o.unlock)return r.warn("transfer already unlocked",t.meta),o.unlockProcessed&&u.message_identifier.eq(o.unlockProcessed.message_identifier)?Object(P["a"])(fo({message:Bt(o.unlockProcessed)},c)):M["a"];var p=o.transfer;ht(u.token_network_address===p.token_network_address,"wrong tokenNetwork");var f=u.token_network_address,d=ky(s,{tokenNetwork:f,partner:l},u);ht(u.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:u.nonce.toNumber()}]);var y=p.lock.amount,h=wy(d.partner,i);ht(u.locksroot===es(h),"locksroot mismatch"),ht(u.transferred_amount.eq(d.partner.balanceProof.transferredAmount.add(y)),"transferredAmount mismatch"),ht(u.locked_amount.eq(_y(h)),"lockedAmount mismatch");var m={type:kn.PROCESSED,message_identifier:u.message_identifier};return Object(Kt["a"])(la(a,m,{log:r})).pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.secret){e.next=3;break}return e.next=3,co({secret:u.secret},c);case 3:return e.next=5,po.success({message:u,partner:l},c);case 5:return e.next=7,fo({message:t},c);case 7:return e.next=9,ao.success({balanceProof:ca(u)},c);case 9:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(P["a"])(po.failure(e,c))})))}function Ry(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=n.db,c=t.payload.message.secrethash,s={secrethash:c,direction:ga.RECEIVED};return Object(L["a"])((function(){return ys(e,i,s)})).pipe(Object(Uu["a"])(e,o),Object($["a"])((function(e){var n=py(e,3),o=n[0],i=n[1],u=n[2].confirmationBlocks,l=t.payload.message,p=t.meta.address;if(ht(p===o.partner,"wrong partner"),ht(!o.unlock,"transfer unlocked"),o.expired)return r.warn("transfer already expired",t.meta),o.expiredProcessed&&l.message_identifier.eq(o.expiredProcessed.message_identifier)?Object(P["a"])(yo({message:Bt(o.expiredProcessed)},s)):M["a"];var f=o.transfer;ht(f.lock.expiration.add(u).lte(i.blockNumber),"expiration block not confirmed yet"),ht(!o.secretRegistered,"secret registered onchain"),ht(l.token_network_address===f.token_network_address,"wrong tokenNetwork");var d=l.token_network_address,y=ky(i,{tokenNetwork:d,partner:p},l);ht(l.nonce.eq(y.partner.nextNonce),["nonce mismatch",{expected:y.partner.nextNonce.toNumber(),received:l.nonce.toNumber()}]);var h=wy(y.partner,c);ht(l.locksroot===es(h),"locksroot mismatch"),ht(l.locked_amount.eq(_y(h)),"lockedAmount mismatch"),ht(l.transferred_amount.eq(y.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var m={type:kn.PROCESSED,message_identifier:l.message_identifier};return Object(Kt["a"])(la(a,m,{log:r})).pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bo.success({message:l,partner:p},s);case 2:return e.next=4,yo({message:t},s);case 4:return e.next=6,ao.failure(new yt(dt.XFER_EXPIRED,{block:f.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(P["a"])(bo.failure(e,s))})))}function Cy(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==ga.SENT?M["a"]:Object(cu["a"])([e,c,s]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n,c,s=py(e,3),u=s[0],l=s[1].revealTimeout,p=s[2].presences,f=ky(u,t.meta);if(f.own.pendingWithdraws.some(ny(kn.WITHDRAW_REQUEST,t.meta)))return M["a"];ht(null===(c=null===(n=p[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,dt.CNL_WITHDRAW_PARTNER_OFFLINE),ht(t.meta.expiration>=u.blockNumber+l,dt.CNL_WITHDRAW_EXPIRES_SOON),ht(t.meta.totalWithdraw.gt(f.own.withdraw),dt.CNL_WITHDRAW_AMOUNT_TOO_LOW),ht(t.meta.totalWithdraw.lte(Ui(f).ownTotalWithdrawable),dt.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var d={type:kn.WITHDRAW_REQUEST,message_identifier:as(),chain_id:Object(k["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(k["bigNumberify"])(f.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:f.own.nextNonce,expiration:Object(k["bigNumberify"])(t.meta.expiration)};return Object(Kt["a"])(la(o,d,{log:r})).pipe(Object(B["a"])((function(e){return Oo.request({message:e},t.meta)})))})),Object(Xt["a"])((function(e){return Object(P["a"])(go.failure(e,t.meta))})))}function Py(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:ga.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(W["a"])(),Object(B["a"])((function(e){return ky(e,{tokenNetwork:o,partner:i},a),ht(a.participant===r,"participant mismatch"),Oo.success({message:a},c)})),Object(Xt["a"])((function(e){return Object(P["a"])(Oo.failure(e,c))})))}function Iy(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==ga.SENT?M["a"]:Object(cu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=py(e,2),i=n[0],c=n[1].confirmationBlocks,s=ky(i,t.meta);ht(!s.own.pendingWithdraws.some(ny(kn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(ny(kn.WITHDRAW_REQUEST,t.meta));ht(u,"no matching WithdrawRequest found, maybe already confirmed"),ht(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:kn.WITHDRAW_EXPIRED,message_identifier:as(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Kt["a"])(la(o,l,{log:r})).pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.success({message:n},t.meta);case 2:return e.next=4,go.failure(new yt(dt.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(P["a"])(wo.failure(e,t.meta))})))}function Ly(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:ga.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(W["a"])(),Object($["a"])((function(e){ht(o.participant===t.meta.address,"participant mismatch");var n,u=ky(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(ny(kn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(P["a"])(l);else{ht(o.nonce.eq(u.partner.nextNonce),["nonce mismatch",{expected:u.partner.nextNonce.toNumber(),received:o.nonce.toNumber()}]),ht(o.total_withdraw.lte(Ui(u).partnerTotalWithdrawable),"invalid total_withdraw");var p={type:kn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Kt["a"])(la(r,p,{log:a}))}return n.pipe(Object($["a"])(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oo.request({message:o},s);case 2:return e.next=4,Oo.success({message:n},s);case 4:return e.next=6,Hr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(P["a"])(Oo.failure(e,s))})))}function My(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:ga.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(cu["a"])([e,i]).pipe(Object(W["a"])(),Object($["a"])((function(e){var n=py(e,2),i=n[0],p=n[1].confirmationBlocks;ht(u===t.meta.address,"participant mismatch");var f,d=ky(i,{tokenNetwork:s,partner:u},c),y="".concat(Mi(d),"+").concat(c.message_identifier.toString()),h=r.get(y);if(h)f=Object(P["a"])(h);else{ht(c.nonce.eq(d.partner.nextNonce),["nonce mismatch",{expected:d.partner.nextNonce.toNumber(),received:c.nonce.toNumber()}]),ht(i.blockNumber>=l.expiration+p,"expire block not confirmed yet");var m={type:kn.PROCESSED,message_identifier:c.message_identifier};f=Object(Kt["a"])(la(a,m,{log:o})).pipe(Object(Jo["a"])((function(e){return r.put(y,e)})))}return f.pipe(Object($["a"])(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wo.success({message:c},l);case 2:return e.next=4,_o(void 0,l);case 4:return e.next=6,Hr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(P["a"])(wo.failure(e,l))})))}var Uy=function(e,t,n){ly(t);var r=new bb(32),a=n.latest$.pipe(gi("state"));return Object(I["a"])(e.pipe(Object(F["a"])(Cr([ao.request,po.request,bo.request,go.request,wo.request]))),e.pipe(Object(F["a"])(fa([Ft(qn),Ft(Gn),Ft(Xn),Ft(zn),Ft(er),Ft(nr)])))).pipe(Object($u["a"])((function(e){var t;switch(e.type){case ao.request.type:t=Ey(a,e,n);break;case po.request.type:t=xy(a,e,n);break;case bo.request.type:t=Ay(a,e,n);break;case go.request.type:t=Cy(a,e,n);break;case wo.request.type:t=Iy(a,e,n);break;case qr.type:switch(e.payload.message.type){case kn.LOCKED_TRANSFER:t=Ny(a,e,n);break;case kn.UNLOCK:t=Dy(a,e,n);break;case kn.LOCK_EXPIRED:t=Ry(a,e,n);break;case kn.WITHDRAW_REQUEST:t=Ly(a,e,n);break;case kn.WITHDRAW_CONFIRMATION:t=Py(a,e,n);break;case kn.WITHDRAW_EXPIRED:t=My(a,e,n,r);break}break}return t})))},By=n("c8ea");function Fy(e,t){return qy(e)||Vy(e,t)||$y(e,t)||Wy()}function Wy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $y(e,t){if(e){if("string"===typeof e)return Hy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hy(e,t):void 0}}function Hy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qy(e){if(Array.isArray(e))return e}function Ky(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Gy=function(e,t){return Ky(e),t.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.transfers;return Object(Kt["a"])(Object.values(t).filter((function(e){return e.direction===ga.SENT&&!e.unlockProcessed&&!e.expiredProcessed&&!e.secretRegistered&&!e.channelClosed})))})),Object($["a"])(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={secrethash:t.transfer.lock.secrethash,direction:ga.SENT},e.next=3,Za.request(void 0,{address:t.transfer.target});case 3:if(t.transferProcessed){e.next=6;break}return e.next=6,oo({message:Bt(t.transfer),fee:t.fee,partner:t.partner},n);case 6:if(!t.unlock){e.next=9;break}return e.next=9,po.success({message:Bt(t.unlock),partner:t.partner},n);case 9:if(!t.expired){e.next=12;break}return e.next=12,bo.success({message:Bt(t.expired),partner:t.partner},n);case 12:case"end":return e.stop()}}),e)}))))},Zy=function(e,t,n){Ky(e);var r=n.config$;return t.pipe(Object(W["a"])(),Object($["a"])((function(e){var t=e.transfers;return Object(Kt["a"])(Object.values(t).filter((function(e){return e.direction===ga.RECEIVED&&!e.unlock&&!e.expired&&!e.secretRegistered&&!e.channelClosed})))})),Object($["a"])((function(e){var t=e.transfer.lock.secrethash,n={secrethash:t,direction:ga.RECEIVED};return Object(I["a"])(Object(P["a"])(oo({message:Bt(e.transfer),fee:e.fee,partner:e.partner},n)),e.secret&&!e.secretReveal?Object(P["a"])(co({secret:e.secret},n)):M["a"],e.secretReveal?Object(P["a"])(lo({message:Bt(e.secretReveal)},n)):M["a"],!e.secret&&e.secretRequest?r.pipe(Object(H["a"])("caps",Pe.NO_RECEIVE),Object(F["a"])((function(e){return!e})),Object(Mu["a"])(1),Object(Wu["a"])(Object(P["a"])(Za.request(void 0,{address:e.transfer.initiator}),uo({message:Bt(e.secretRequest)},n)))):M["a"])})))};function Xy(e){var t,n;return"meta"in e&&(null===(t=e.meta)||void 0===t?void 0:t.secrethash)&&(null===(n=e.meta)||void 0===n?void 0:n.direction)}var Yy=function(e,t,n){var r=n.config$;return t.pipe(gi("transfers"),Oi(),Object(ti["a"])((function(e){var t=Fy(e,1),n=t[0];return n}),By["a"],(function(e){return t.pipe(Object(F["a"])((function(t){var n=t.transfers;return!(e.key in n)})))})),Object(Uu["a"])(r),Object($["a"])((function(n){var r=Fy(n,2),a=r[0],o=r[1].httpTimeout;return a.pipe(Object(F["a"])((function(e){var t=Fy(e,2),n=t[1];return!!(n.unlockProcessed||n.expiredProcessed||n.channelSettled)})),Object(Mu["a"])(1),Object($["a"])((function(t){var n=Fy(t,2),r=n[1];return e.pipe(Object(F["a"])(Xy),Object(F["a"])((function(e){return os(e.meta)===a.key})),Object(uu["a"])({meta:Hc()(["secrethash","direction"],r)}))})),Object(Gt["a"])(3*o),Object(B["a"])((function(e){var t=e.meta;return ho(void 0,t)})),Object(ni["a"])(t.pipe(Object(F["a"])((function(e){var t=e.transfers;return!(a.key in t)})))))})))};function Qy(e,t){return nh(e)||th(e,t)||Jy(e,t)||zy()}function zy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jy(e,t){if(e){if("string"===typeof e)return eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eh(e,t):void 0}}function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function th(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nh(e){if(Array.isArray(e))return e}function rh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ah(e,t,n){var r=n.caps,a=!(null===r||void 0===r?void 0:r[Pe.NO_MEDIATE]),o=e.meta.direction===ga.RECEIVED&&e.payload.message.target!==t;return a&&o}var oh=function(e,t,n){rh(t);var r=n.address,a=n.config$;return e.pipe(Object(F["a"])(oo.is),Object(Uu["a"])(a),Object(F["a"])((function(e){var t=Qy(e,2),n=t[0],a=t[1];return ah(n,r,a)})),Object(B["a"])((function(e){var t=Qy(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return ao.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:j["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:ga.SENT})})))};function ih(e,t){return ph(e)||lh(e,t)||sh(e,t)||ch()}function ch(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sh(e,t){if(e){if("string"===typeof e)return uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uh(e,t):void 0}}function uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ph(e){if(Array.isArray(e))return e}var fh=function(e,t){return e.pipe(Object(F["a"])(fa(Ft(Cn))),Object(Uu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=ih(t,2),r=n[0],a=n[1].transfers,u=0,l=Object.values(a);case 2:if(!(u<l.length)){e.next=25;break}if(p=l[u],p.direction===ga.SENT&&p.partner===r.meta.address){e.next=6;break}return e.abrupt("continue",22);case 6:if(f={secrethash:p.secrethash,direction:ga.SENT},!r.payload.message.message_identifier.eq(p.transfer.message_identifier)){e.next=12;break}return e.next=10,io({message:r.payload.message},f);case 10:e.next=22;break;case 12:if(!r.payload.message.message_identifier.eq(null!==(i=null===(o=p.unlock)||void 0===o?void 0:o.message_identifier)&&void 0!==i?i:-1)){e.next=19;break}return e.next=15,ao.success({balanceProof:ca(p.unlock)},f);case 15:return e.next=17,fo({message:r.payload.message},f);case 17:e.next=22;break;case 19:if(!r.payload.message.message_identifier.eq(null!==(s=null===(c=p.expired)||void 0===c?void 0:c.message_identifier)&&void 0!==s?s:-1)){e.next=22;break}return e.next=22,yo({message:r.payload.message},f);case 22:u++,e.next=2;break;case 25:case"end":return e.stop()}}),e)}))))},dh=function(e,t,n){var r=n.db;return e.pipe(Object(F["a"])(Cr([io,fo,yo])),Object(F["a"])((function(e){return e.meta.direction===ga.RECEIVED})),Object(Uu["a"])(t),Object($["a"])((function(e){var t=ih(e,2),n=t[0],a=t[1];return ys(a,r,n.meta).then((function(e){return[n,e]}))})),Object(B["a"])((function(e){var t=ih(e,2),n=t[0],r=t[1];return Hr.request({message:n.payload.message},{address:r.partner,msgId:n.payload.message.message_identifier.toString()})})))};function bh(e,t){return gh(e)||vh(e,t)||hh(e,t)||yh()}function yh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hh(e,t){if(e){if("string"===typeof e)return mh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mh(e,t):void 0}}function mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function gh(e){if(Array.isArray(e))return e}var Oh=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Cr([oo,po.success,bo.success,uo,lo])),Object(Uu["a"])(t,r),Object($["a"])((function(n){var r,a,o=bh(n,3),i=o[0],c=o[1],s=o[2],u=s.pollingInterval,l=s.httpTimeout,p=s.revealTimeout,f=c.transfers[os(i.meta)],d=t.pipe(gi("transfers",os(i.meta)));switch(i.type){case oo.type:i.meta.direction===ga.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.expiredProcessed||e.channelClosed)}))));break;case po.success.type:i.meta.direction===ga.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)}))));break;case bo.success.type:i.meta.direction===ga.SENT&&(r=i.payload.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.expiredProcessed&&!e.channelClosed)}))));break;case uo.type:i.meta.direction===ga.RECEIVED&&f&&(r=f.transfer.initiator,a=Object(cu["a"])([t,d]).pipe(Object(F["a"])((function(e){var t=bh(e,2),n=t[0].blockNumber,r=t[1];return!(!r.secretReveal&&!r.channelClosed)||n>r.expiration-p}))));break;case lo.type:i.meta.direction===ga.RECEIVED&&f&&(r=f.partner,a=d.pipe(Object(F["a"])((function(e){return!(!e.unlock&&!e.channelClosed)}))));break}return r&&a?ty(Hr.request({message:i.payload.message},{address:r,msgId:i.payload.message.message_identifier.toString()}),e,a,Jb(u,2*l)):M["a"]})))};function wh(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Eh(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function _h(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function kh(e,t){return Sh(e)||xh(e,t)||Eh(e,t)||jh()}function jh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eh(e,t){if(e){if("string"===typeof e)return Th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Th(e,t):void 0}}function Th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sh(e){if(Array.isArray(e))return e}var Ah=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(F["a"])(fa(Ft(In))),Object(Uu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,o,i,c,s,u;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=kh(t,2),o=n[0],i=n[1],c=o.payload.message,s=os({secrethash:c.secrethash,direction:ga.SENT}),s in i.transfers){e.next=5;break}return e.abrupt("return");case 5:if(u=i.transfers[s].transfer,u.initiator===r&&u.target===o.meta.address&&u.payment_identifier.eq(c.payment_identifier)){e.next=9;break}return a.warn("Invalid SecretRequest for transfer",c,u),e.abrupt("return");case 9:return e.next=11,uo({message:c},{secrethash:c.secrethash,direction:ga.SENT});case 11:case"end":return e.stop()}}),e)}))))},Nh=function(e,t){var n=t.signer,r=t.log,a=t.latest$,o=e.payload.message;return a.pipe(Object(W["a"])(),Object($["a"])((function(t){var a=t.state,i=a.transfers[os(e.meta)];ht(i.secret,"SecretRequest for unknown secret");var c,s=i.transfer,u=s.target,l=i.fee,p=s.lock.amount.sub(l);if(ht(o.expiration.lte(s.lock.expiration)&&o.expiration.gt(a.blockNumber),"SecretRequest for expired transfer"),ht(o.amount.gte(p),"SecretRequest for amount too small!"),o.amount.eq(p)||r.info("Accepted SecretRequest for amount different than sent",o,s),i.secretReveal)c=Object(P["a"])(i.secretReveal);else{var f={type:kn.SECRET_REVEAL,message_identifier:as(),secret:i.secret};c=Object(Kt["a"])(la(n,f,{log:r}))}return c.pipe(Object($["a"])(b.a.mark((function t(n){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lo({message:n},e.meta);case 2:return t.next=4,Hr.request({message:n},{address:u,msgId:n.message_identifier.toString()});case 4:case"end":return t.stop()}}),t)}))))})),Object(Xt["a"])((function(t){return r.error("Invalid SecretRequest",t),Object(P["a"])(ao.failure(new yt(dt.XFER_INVALID_SECRETREQUEST),e.meta))})))},Dh=function(e,t,n){return _h(t),e.pipe(Object(F["a"])(Cr(uo)),Object(F["a"])((function(e){return e.meta.direction===ga.SENT})),Object($u["a"])((function(e){return Nh(e,n)})))},Rh=function(e,t){return e.pipe(Object(F["a"])(fa(Mn)),Object(Uu["a"])(t),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=kh(t,2),r=n[0],a=n[1],o=ts(r.payload.message.secret),i=Object.values(ga).map((function(e){return a.transfers[os({secrethash:o,direction:e})]})).filter(Tt),c=r.payload.message,s=wh(i.filter((function(e){return e.direction===ga.SENT}))),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=17;break}return l=u.value,p={secrethash:o,direction:ga.SENT},e.next=12,co({secret:c.secret},p);case 12:if(r.meta.address!==l.partner||l.channelClosed){e.next=15;break}return e.next=15,po.request(void 0,p);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:f=wh(i.filter((function(e){return e.direction===ga.RECEIVED}))),e.prev=26,f.s();case 28:if((d=f.n()).done){e.next=34;break}return d.value,e.next=32,co({secret:c.secret},{secrethash:o,direction:ga.RECEIVED});case 32:e.next=28;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e["catch"](26),f.e(e.t1);case 39:return e.prev=39,f.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[5,19,22,25],[26,36,39,42]])}))))},Ch=function(e,t,n){_h(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(F["a"])(Cr([co,so.success])),Object(F["a"])((function(e){return e.meta.direction===ga.RECEIVED})),Object(F["a"])((function(e){return co.is(e)||!!e.payload.confirmed})),Object($u["a"])((function(e){return o.pipe(gi("state"),Object(W["a"])(),Object(F["a"])((function(t){var n=t.transfers;return os(e.meta)in n})),Object($["a"])((function(t){var n,o=t.transfers,i=null===(n=o[os(e.meta)])||void 0===n?void 0:n.secretReveal;if(i)return Object(P["a"])(Bt(i));var c={type:kn.SECRET_REVEAL,message_identifier:as(),secret:e.payload.secret};return la(a,c,{log:r})})),Object(B["a"])((function(t){return lo({message:t},e.meta)})),Object(Xt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),M["a"]})))})))},Ph=function(e,t,n){_h(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(gi("confirmationBlocks"),Object(ui["a"])((function(e){return sn(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(B["a"])(un(a)),Object(F["a"])(Tt),Object(Uu["a"])(t,o),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=kh(t,3),r=kh(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.transfers,u=c.blockNumber,l=n[2].confirmationBlocks,p=0,f=Object.values(ga);case 2:if(!(p<f.length)){e.next=12;break}if(d=f[p],y=os({secrethash:a,direction:d}),y in s){e.next=7;break}return e.abrupt("continue",9);case 7:return e.next=9,so.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+l<=u?i.blockNumber<s[y].expiration:void 0},{secrethash:a,direction:d});case 9:p++,e.next=2;break;case 12:case"end":return e.stop()}}),e)}))))},Ih=function(e){return e.pipe(Object(F["a"])(so.success.is),Object(F["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return ao.success({},e.meta)})))},Lh=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Object(Uu["a"])(r),Object($["a"])((function(e){var t=kh(e,2),n=t[0],r=n.blockNumber,a=n.transfers,o=t[1].revealTimeout;return Object(Kt["a"])(Object.values(a).filter((function(e){return e.direction===ga.RECEIVED&&!e.unlock&&!e.expired&&!!e.secret&&!e.secretRegistered&&e.expiration>r&&e.expiration<=r+o})))})),Object(ti["a"])((function(e){return e._id}),By["a"],(function(e){return a.pipe(Object(H["a"])("state"),Object(F["a"])((function(t){var n=t.blockNumber,r=t.transfers;return!!(r[e.key].expiration<n||r[e.key].unlock||r[e.key].secretRegistered)})))})),Object($["a"])((function(t){return t.pipe(Object(Zt["a"])((function(t){var n={secrethash:t.secrethash,direction:ga.RECEIVED};return ey(e,so.request({secret:t.secret},n),Ur(so,n))})),Object(ni["a"])(t.pipe(Object(Su["a"])(),Object(Sb["a"])(1))))})),ki(r.pipe(Object(H["a"])("caps",Pe.NO_RECEIVE)),!0))},Mh=function(e,t,n){_h(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(F["a"])(so.request.is),Object(Uu["a"])(u),Object($["a"])((function(e){var t,n=kh(e,2),u=n[0],l=n[1].subkey,p=Mp({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),f=p.signer,d=Up(s,f);return Object(L["a"])((function(){return d.functions.registerSecret(u.payload.secret)})).pipe(Bi("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}),Object(Su["a"])(),Object(Xt["a"])((function(e){return Object(P["a"])(so.failure(e,u.meta))})))})))};function Uh(e,t){return Wh(e)||Fh(e,t)||Hh(e,t)||Bh()}function Bh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wh(e){if(Array.isArray(e))return e}function $h(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Hh(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Hh(e,t){if(e){if("string"===typeof e)return Vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vh(e,t):void 0}}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Kh=function(e,t){return qh(e),t.pipe(Object(W["a"])(),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===Jr.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=$h(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==kn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(ny(kn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,Oo.request({message:c},{direction:ga.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==kn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,wo.success({message:c},{direction:ga.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},Gh=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(Oo.request.is),Object(F["a"])((function(e){return e.meta.direction===ga.SENT})),Object(Uu["a"])(r),Object($["a"])((function(n){var r=Uh(n,2),a=r[0],o=r[1],i=o.pollingInterval,c=o.httpTimeout,s=a.payload.message,u=Hr.request({message:s},{address:a.meta.partner,msgId:s.message_identifier.toString()}),l=t.pipe(Object(F["a"])((function(e){var t=e.channels[Li(a.meta)];return(null===t||void 0===t?void 0:t.state)!==Jr.open||t.own.pendingWithdraws.some(ny(kn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(ny(kn.WITHDRAW_REQUEST,a.meta))})));return ty(u,e,l,Jb(i,2*c))})))},Zh=function(e,t,n){qh(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(F["a"])(Oo.success.is),Object(F["a"])((function(e){return e.meta.direction===ga.SENT})),Object($u["a"])((function(e){return u.pipe(Object(W["a"])(),Object($["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,p=u.revealTimeout;ht(e.meta.expiration>=n.blockNumber+p,dt.CNL_WITHDRAW_EXPIRES_SOON);var f=n.channels[Li(e.meta)];ht((null===f||void 0===f?void 0:f.state)===Jr.open,"channel not open"),ht(e.meta.totalWithdraw.gt(f.own.withdraw),"withdraw already performed");var d=f.own.pendingWithdraws.find(ny(kn.WITHDRAW_REQUEST,e.payload.message));ht(d,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=Mp({signer:a,address:r,main:o},l),h=y.signer,m=Up(s(b),h);return Object(L["a"])((function(){return m.functions.setTotalWithdraw(f.id,r,e.meta.totalWithdraw,e.meta.expiration,d.signature,e.payload.message.signature)})).pipe(Bi("setTotalWithdraw",dt.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),$i(i.pollingInterval,void 0,void 0,{log:c}))})),Object(B["a"])((function(t){var n=Uh(t,2),r=n[1];return go.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Xt["a"])((function(t){return Object(P["a"])(go.failure(t,e.meta))})))})))},Xh=function(e,t,n){qh(t);var r=n.signer,a=n.log,o=n.latest$,i=new bb(32);return e.pipe(Object(F["a"])(Cr([Oo.request,Oo.success])),Object(F["a"])((function(e){return e.meta.direction===ga.RECEIVED!==Oo.success.is(e)})),Object($u["a"])((function(e){return o.pipe(Object(W["a"])(),Object(F["a"])((function(t){var n,r=t.presences;return e.meta.partner in r&&!(null===(n=r[e.meta.partner].payload.caps)||void 0===n?void 0:n[Pe.NO_DELIVERY])})),Object($["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(P["a"])(c);else{var s={type:kn.PROCESSED,message_identifier:n.message_identifier};t=Object(Kt["a"])(la(r,s,{log:a})).pipe(Object(Jo["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(B["a"])((function(t){return Hr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(Xt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),M["a"]})))})))},Yh=function(e,t,n){var r=n.config$;return e.pipe(Object(F["a"])(La.is),Object(H["a"])("payload","blockNumber"),Object(Uu["a"])(t,r),Object($["a"])(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Uh(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===Jr.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(ny(kn.WITHDRAW_REQUEST)),l=$h(u),e.prev=8,l.s();case 10:if((p=l.n()).done){e.next=20;break}if(f=p.value,!f.expiration.add(2*o).gte(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(ny(kn.WITHDRAW_EXPIRED,f))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,wo.request(void 0,{direction:ga.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:f.expiration.toNumber(),totalWithdraw:f.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},Qh=function(e,t,n){qh(t);var r=n.config$;return e.pipe(Object(F["a"])(wo.success.is),Object(F["a"])((function(e){return e.meta.direction===ga.SENT})),Object(Uu["a"])(r),Object($["a"])((function(t){var n=Uh(t,2),r=n[0],a=n[1],o=a.pollingInterval,i=a.httpTimeout,c=r.payload.message,s=Hr.request({message:c},{address:r.meta.partner,msgId:c.message_identifier.toString()}),u=e.pipe(Object(F["a"])(fa(Ft(Cn))),Object(F["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(c.message_identifier)})),Object(ri["a"])(_o(void 0,r.meta)),Object(Mu["a"])(1),Object(bu["a"])());return Object(I["a"])(ty(s,e,u,Jb(o,2*i)),u)})))},zh=n("754b"),Jh=n("e30d");function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rm(e,t){return sm(e)||cm(e,t)||om(e,t)||am()}function am(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function om(e,t){if(e){if("string"===typeof e)return im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?im(e,t):void 0}}function im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sm(e){if(Array.isArray(e))return e}function um(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function lm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){um(o,r,a,i,c,"next",e)}function c(e){um(o,r,a,i,c,"throw",e)}i(void 0)}))}}function pm(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Pe.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Li({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==Jr.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(Jr.open,'"');var s=Ui(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var fm=D()(function(){var e=lm(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functions.token());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function dm(e,t){var n=t.serviceRegistryContract,r=t.network,a=t.contractsInfo,o=t.config$,i=Me["v"]({message:Me["s"],network_info:Me["v"]({chain_id:Me["l"](r.chainId),token_network_registry_address:Me["l"](a.TokenNetworkRegistry.address)}),operator:Me["s"],payment_address:Lt,price_info:Nt(32),version:Me["s"]}),c=Lt.is(e)?Object(Kt["a"])(n.functions.urls(e)):Object(P["a"])(e);return c.pipe(Object(Uu["a"])(o),Object($["a"])((function(e){var t=rm(e,2),r=t[0],a=t[1],o=a.httpTimeout,c=a.pfsMaxFee;if(!r)throw new yt(dt.PFS_EMPTY_URL);if(!Hp(r))throw new yt(dt.PFS_INVALID_URL,{url:r});r.startsWith("https://")||r.startsWith("http://")||(r="https://".concat(r));var s=Date.now();return Object(Lf["a"])(r+"/api/v1/info").pipe(Object(Pf["a"])(o),Object($["a"])(function(){var e=lm(b.a.mark((function e(t){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Et,e.t1=i,e.t2=vr,e.next=5,t.text();case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,e.t0)(e.t1,e.t4),e.next=10,fm(n);case 10:return e.t6=e.sent,e.abrupt("return",[e.t5,e.t6]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(B["a"])((function(e){var t=rm(e,2),n=t[0],a=t[1];return ht(n.price_info.lte(c),[dt.PFS_TOO_EXPENSIVE,{price:n.price_info.toString()}]),{address:n.payment_address,url:r,rtt:Date.now()-s,price:n.price_info,token:a}})))})))}function bm(e,t){var n=t.log;return Object(Kt["a"])(e).pipe(Object($["a"])((function(e){return dm(e,t).pipe(Object(Xt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),M["a"]})))}),5),Object(Rf["a"])(),Object(B["a"])((function(e){if(!e.length)throw new yt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function ym(e){return Object(k["concat"])([hr(e.one_to_n_address,20),hr(e.chain_id,32),hr(zr.IOU,32),hr(e.sender,20),hr(e.receiver,20),hr(e.amount,32),hr(e.expiration_block,32)])}function hm(e,t){return mm.apply(this,arguments)}function mm(){return mm=lm(b.a.mark((function e(t,n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.signMessage(ym(n)).then((function(e){return tm(tm({},n),{},{signature:e})})));case 1:case"end":return e.stop()}}),e)}))),mm.apply(this,arguments)}function vm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Dm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function gm(e){return _m(e)||wm(e)||Dm(e)||Om()}function Om(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wm(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _m(e){if(Array.isArray(e))return Rm(e)}function km(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jm(Object(n),!0).forEach((function(t){Tm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Sm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xm(o,r,a,i,c,"next",e)}function c(e){xm(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Am(e,t){return Pm(e)||Cm(e,t)||Dm(e,t)||Nm()}function Nm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dm(e,t){if(e){if("string"===typeof e)return Rm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rm(e,t):void 0}}function Rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pm(e){if(Array.isArray(e))return e}var Im=Me["p"](Me["v"]({error_code:Me["n"],errors:Me["s"]}));function Lm(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Mm(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.contractsInfo,c=n.latest$,s=n.config$;return Object(L["a"])((function(){var t=Lm(),n=Object(k["concat"])([r,e.address,Object(k["toUtf8Bytes"])(t)]);return Object(Kt["a"])(a.signMessage(n)).pipe(Object(B["a"])((function(n){return{sender:r,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Uu["a"])(s),Object($["a"])((function(n){var r=Am(n,2),a=r[0],o=r[1].httpTimeout;return Object(Lf["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Pf["a"])(o))})),Object(Uu["a"])(c.pipe(Object(H["a"])("state","blockNumber")),s),Object($["a"])(function(){var t=Sm(b.a.mark((function t(n){var a,c,s,u,l,p,f,d;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=Am(n,3),c=a[0],s=a[1],u=a[2].pfsIouTimeout,404!==c.status){t.next=3;break}return t.abrupt("return",{sender:r,receiver:e.address,chain_id:Object(k["bigNumberify"])(o.chainId),amount:j["Zero"],one_to_n_address:i.OneToN.address,expiration_block:Object(k["bigNumberify"])(s).add(u)});case 3:return t.next=5,c.text();case 5:if(l=t.sent,c.ok){t.next=8;break}throw new yt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:c.status,responseText:l});case 8:if(p=Et(no,vr(l)),f=p.last_iou,d=Object(k["verifyMessage"])(ym(f),f.signature),d===r){t.next=12;break}throw new yt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:d,address:r});case 12:return t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}function Um(e,t,n){return n.latest$.pipe(Object(W["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(P["a"])(i):Mm(e,t,n)})),Object(B["a"])((function(t){return Em(Em({},t),{},{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return hm(n.signer,e)})))}var Bm=function(e,t,n){return km(t),e.pipe(Object(F["a"])(Cr(Eo.request)),Object($u["a"])((function(t){return n.latest$.pipe(Object(W["a"])(),Object($["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=M["a"],o=Object(P["a"])(r)):(a=Object(P["a"])(Za.request(void 0,{address:i})),o=zm(e,n,i)),Object(I["a"])(o.pipe(Object($["a"])((function(e){return Jm(t,n,e)})),Object(Uu["a"])(n.latest$),Object($["a"])((function(e){var r=Am(e,2),a=r[0],o=r[1];return ev(t,n,a,o)})),Object(Xt["a"])((function(e){return Object(P["a"])(Eo.failure(e,t.meta))}))),a)})))})))},Fm=function(e,t,n){km(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Hi,Object($["a"])((function(e){return e.pipe(Object(zh["a"])(),Object(Uu["a"])(c),Object(F["a"])((function(e){var t=Am(e,2),n=Am(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===Jr.open&&!!a})),Object(Jh["a"])((function(e){var t=Am(e,2),n=Am(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(Qo["a"])(o):Object(P["a"])(1)})),Object(ui["a"])((function(e){var t=Am(e,2),n=Am(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,p=c.tokenNetwork,f=c.partner.address,d=Ui(c),b=d.ownCapacity,y=d.partnerCapacity,h={type:kn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(k["bigNumberify"])(o.chainId),token_network_address:p,channel_identifier:Object(k["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(k["bigNumberify"])(u)};return Object(L["a"])((function(){return la(i,h,{log:r})})).pipe(Object(B["a"])((function(e){return Vr({message:e},{roomName:l})})),Object(Xt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),M["a"]})))})))})))},Wm=function(e,t,n){km(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Hi,Object($["a"])((function(e){return e.pipe(Object(W["a"])())})),Object(Uu["a"])(c),Object(F["a"])((function(e){var t=Am(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===Jr.open&&!!a&&!(null===o||void 0===o?void 0:o[Pe.NO_MEDIATE])})),Object($["a"])((function(e){var t=Am(e,2),n=t[0],c=t[1].pfsRoom,s={type:kn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(k["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(k["bigNumberify"])(n.id)},updating_participant:a,timestamp:Lm(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:j["Zero"],flat:j["Zero"]}};return Object(Kt["a"])(la(i,s,{log:r})).pipe(Object(B["a"])((function(e){return Vr({message:e},{roomName:c})})),Object(Xt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),M["a"]})))})))},$m=function(e,t,n){km(e),km(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(cu["a"])([i.pipe(gi("pfs")),i.pipe(gi("confirmationBlocks"))]).pipe(Object(ui["a"])((function(e){var t=Am(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?M["a"]:sn(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Uu["a"])(c),Object(F["a"])((function(e){var t=Am(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object(H["a"])(0),Object(B["a"])(un(a)),Object(F["a"])(Tt)).pipe(Object(ti["a"])((function(e){var t=Am(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(ui["a"])((function(e){var t=Am(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return M["a"];var i=o.sub(a).lt(j["Two"].pow(31))?Object(P["a"])({service:n,valid:!1}).pipe(Object(Cf["a"])(new Date(o.toNumber()))):M["a"];return Object(I["a"])(Object(P["a"])({service:n,valid:!0}),i)})))})),Object(ii["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(gm(e),[n]):e}),[]),Object(oi["a"])(),Object(Gt["a"])(1e3),Object(B["a"])((function(e){return To({pfsList:e})})))})))},Hm=function(e,t,n){km(e),km(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(gi("state","blockNumber"),Object(Zt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(Uu["a"])(a),Object(F["a"])((function(e){var t=Am(e,2),n=t[0],r=t[1].udcBalance;return!r.eq(n)})),Object(B["a"])((function(e){var t=Am(e,1),n=t[0];return Ao.success(void 0,{totalDeposit:n})})))};function Vm(e,t,n,r,a){var o=Am(e,2),i=o[0],c=o[1],s=Am(t,2),u=s[0],l=s[1],p=Am(n,2),f=p[0],d=p[1],b=r.pollingInterval,y=r.minimumAllowance,h=a.log;return Object(L["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address),c.functions.effectiveBalance(l)])})).pipe(Object($["a"])((function(e){var t=Am(e,3),n=t[0],r=t[1],a=t[2];return ht(a.add(f).eq(d),[dt.UDC_DEPOSIT_OUTDATED,{requested:d.toString(),current:a.toString()}]),Vi([n,r,f],i,c.address,dt.RDN_APPROVE_TRANSACTION_FAILED,{log:h,minimumAllowance:y})})),Object($["a"])((function(){return c.functions.deposit(l,d)})),Bi("deposit",dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:h}),$i(b,void 0,void 0,{log:h}))}var qm=function(e,t,n){km(t);var r=n.userDepositContract,a=n.getTokenContract,o=n.address,i=n.log,c=n.signer,s=n.main,u=n.config$,l=r.functions.token();return e.pipe(Object(F["a"])(Ao.request.is),Object($u["a"])((function(e){return Object(L["a"])((function(){return l})).pipe(Object(Uu["a"])(u),Object($["a"])((function(t){var n,u=Am(t,2),l=u[0],p=u[1],f=Mp({signer:c,address:o,main:s},null!==(n=e.payload.subkey)&&void 0!==n?n:p.subkey),d=f.signer,b=f.address,y=Up(a(l),d),h=Up(r,d);return Vm([y,h],[b,o],[e.payload.deposit,e.meta.totalDeposit],p,{log:i})})),Object(B["a"])((function(t){var n=Am(t,2),r=n[1];return Ao.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Xt["a"])((function(t){return Object(P["a"])(Ao.failure(t,e.meta))})))})))};function Km(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Am(e,2),u=s[1],l=Ui(u),p=l.partnerUnlocked;return p.isZero()?M["a"]:Object(cu["a"])([i,c]).pipe(Object(F["a"])((function(e){var t,n,r=Am(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,j["Zero"]))&&a.gte(c)&&p.mul(null!==(n=s[u.token])&&void 0!==n?n:j["MaxUint256"]).div(j["WeiPerEther"]).gt(c)})),Object(Mu["a"])(1),Object($["a"])((function(e){var i=Am(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,p=u.partner.balanceProof,f=na(p),d=Object(k["concat"])([hr(u.tokenNetwork,20),hr(r.chainId,32),hr(zr.BALANCE_PROOF_UPDATE,32),hr(u.id,32),hr(f,32),hr(p.nonce,32),hr(p.additionalHash,32),hr(p.signature,65)]);return Object(Kt["a"])(a.signMessage(d)).pipe(Object($["a"])((function(e){return la(a,{type:kn.MONITOR_REQUEST,balance_proof:{chain_id:p.chainId,token_network_address:p.tokenNetworkAddress,channel_identifier:Object(k["bigNumberify"])(u.id),nonce:p.nonce,balance_hash:f,additional_hash:p.additionalHash,signature:p.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(B["a"])((function(e){return Vr({message:e},{roomName:l})})))})),Object(Xt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),M["a"]})))}}var Gm=function(e,t,n){return km(e),km(t),n.latest$.pipe(Object(H["a"])("state"),Hi,Object(Uu["a"])(n.config$),Object($["a"])((function(e){var t=Am(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(oi["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(zh["a"])(),Object(Jh["a"])((function(e){var t=Am(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(Qo["a"])(a):Object(P["a"])(1)})),Object(ui["a"])(Km(n)))})))},Zm=function(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(F["a"])(Do.request.is),Object($["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object($u["a"])((function(e){var n=Am(e,2),s=n[0],u=n[1],l=Up(r,i),p=s.meta.amount;return Object(L["a"])((function(){return ht(p.gt(j["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:p.toString()}]),ht(u.sub(p).gte(j["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:p.toString()}]),l.functions.planWithdraw(p)})).pipe(Bi("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),$i(c.pollingInterval,void 0,void 0,{log:o}),Object($["a"])((function(e){var n=Am(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(gi("blockNumber"),Object(Zt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(W["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Do.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object(Xt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(P["a"])(Do.failure(e,s.meta))})))})))},Xm=function(e,t,n){km(e),km(t);var r=n.userDepositContract,a=n.address;return Object(L["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(F["a"])((function(e){return e.withdraw_block.gt(j["Zero"])})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Do.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},Ym=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(F["a"])(Do.success.is),Object(F["a"])((function(e){return!0===e.payload.confirmed})),Object($["a"])((function(e){return t.pipe(Object(H["a"])("blockNumber"),Object(W["a"])((function(t){return e.payload.block<t})),Object(ri["a"])(e))})),Object($["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object($u["a"])((function(e){var n=Am(e,2),s=n[0],u=n[1],l=Up(a,i);return Object(L["a"])((function(){return ht(u.gt(j["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(Bi("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),$i(c.pollingInterval,void 0,void 0,{log:r}),Object($u["a"])((function(e){var n=Am(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(gi("blockNumber"),Object(Zt["a"])((function(){return l.functions.balances(o)})),Object(W["a"])((function(e){return e.lt(u)})),Object(B["a"])((function(e){return Ro({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object(Xt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(P["a"])(Do.failure(e,s.meta))})))})))},Qm=function(e,t,n){km(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(gi("confirmationBlocks"),Object(ui["a"])((function(e){return sn(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(B["a"])(un(a)),Object(F["a"])(Tt),Object(F["a"])((function(e){var t=Am(e,6),n=t[5];return n===o})),Object(Uu["a"])(t,i),Object(B["a"])((function(e){var t=Am(e,3),n=Am(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,p=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),f=s.blockNumber;if(p&&f)return Co({tokenNetwork:r,partner:p.partner.address,id:p.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:f,confirmed:f+l<=u.blockNumber||void 0})})),Object(F["a"])(Tt))};function zm(e,t,n){return e.pipe(Object(F["a"])(Mr(Za,{address:n})),Object(Mu["a"])(1),Object($["a"])((function(e){if(Za.success.is(e))return t.latest$.pipe(Object(W["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function Jm(e,t,n){var r=n.state,a=n.presences,o=n.config;tv(e,r,a);var i=e.meta,c=i.tokenNetwork,s=i.target,u=i.value;if(e.payload.paths)return Object(P["a"])({paths:e.payload.paths,iou:void 0});if(!0===pm(r,a,c,s,s,u))return Object(P["a"])({paths:[{path:[t.address,e.meta.target],fee:j["Zero"]}],iou:void 0});if(nv(e,o))throw new yt(dt.PFS_DISABLED);return rv(e,t)}function ev(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Kt["a"])(b.a.mark((function s(){var u;return b.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!uv(n)){s.next=6;break}return s.next=4,xo({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,So(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!pv(c)){s.next=13;break}throw new yt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new yt(dt.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=av(e,t,r,i),!u.length){s.next=20;break}return s.next=18,Eo.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new yt(dt.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function tv(e,t,n){var r,a=e.meta,o=a.tokenNetwork,i=a.target,c=a.value;ht(Object.values(t.tokens).includes(o),[dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:o}]),ht(n[i].payload.available,[dt.PFS_TARGET_OFFLINE,{target:i}]),ht(!(null===(r=n[i].payload.caps)||void 0===r?void 0:r[Pe.NO_RECEIVE]),[dt.PFS_TARGET_NO_RECEIVE,{target:i}]),ht(Object.values(t.channels).some((function(e){return!0===pm(t,n,o,e.partner.address,i,c)})),dt.PFS_NO_ROUTES_BETWEEN_NODES)}function nv(e,t){var n=t.pfs,r=null===e.payload.pfs,a=!e.payload.pfs&&null===n;return r||a}function rv(e,t){var n=e.meta,r=n.tokenNetwork,a=n.target,o=n.value;return t.config$.pipe(Object(W["a"])(),Object($["a"])((function(n){return ov(e.payload.pfs,n.pfs,t).pipe(Object($["a"])((function(e){return iv(e,r,t)})),Object($["a"])((function(e){var i=e.pfs,c=e.iou;return cv(i,c,r,t.address,a,o,n)})),Object(B["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return sv(t,r,a,n)})))})))}function av(e,t,n,r){var a=t.address,o=t.log,i=n.state,c=n.presences,s=[],u=new Set;if(r){var l,p=vm(r);try{for(p.s();!(l=p.n()).done;){var f=l.value,d=f.path,b=f.fee,y=lv(d,a),h=y[0],m=!1,v="";if(!u.has(h)){if(0===s.length){var g=e.meta,O=g.tokenNetwork,w=g.target,_=g.value,k=pm(i,c,O,h,w,_);m=!0===k,v="string"===typeof k?k:""}else h!==s[0].path[0]?v="path: already selected another recipient":b.gt(s[0].fee)?v="path: already selected a smaller fee":m=!0;m?s.push({path:y,fee:b}):(o.warn("Invalidated received route. Reason:",v,"Route:",y),u.add(h))}}}catch(j){p.e(j)}finally{p.f()}}return s}function ov(e,t,n){if(e)return Object(P["a"])(e);if(t)return dm(t,n);var r=n.log,a=n.latest$;return a.pipe(Object(H["a"])("pfsList"),Object(W["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return bm(e,n)})),Object(Jo["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(H["a"])(0))}function iv(e,t,n){return e.price.isZero()?Object(P["a"])({pfs:e,iou:void 0}):Um(e,t,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))}function cv(e,t,n,r,a,o,i){var c=i.httpTimeout,s=i.pfsMaxPaths,u=gr({from:r,to:a,value:Nt(32).encode(o),max_paths:s,iou:t?Em(Em({},t),{},{amount:Nt(32).encode(t.amount),expiration_block:Nt(32).encode(t.expiration_block),chain_id:Nt(32).encode(t.chain_id)}):void 0});return Object(Lf["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:u}).pipe(Object(Pf["a"])(c),Object($["a"])(function(){var e=Sm(b.a.mark((function e(n){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.text();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",{pfsResponse:e.t0,responseText:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function sv(e,t,n,r){var a=r.pfsSafetyMargin,o=r.pfsMaxPaths,i=vr(t);if(e.ok){var c=Et(za,i).result.filter((function(e,t){return t<o})),s=c.map((function(e){var t=e.path,n=e.estimated_fee,r=n.mul(Math.round(1e6*a)).div(1e6);return{path:t,fee:r}}));return{paths:s,iou:n}}var u=Et(Im,i);return{iou:n,error:u}}function uv(e){var t=e.paths,n=e.error;return void 0!==t||pv(n)}function lv(e,t){return e[0]===t?e.slice(1):e}function pv(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(n),!0).forEach((function(t){bv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yv(e,t){return Ov(e)||gv(e,t)||mv(e,t)||hv()}function hv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mv(e,t){if(e){if("string"===typeof e)return vv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vv(e,t):void 0}}function vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ov(e){if(Array.isArray(e))return e}function wv(e,t,n){var r=t.pipe(gi("config"));return Object(cu["a"])([r,n]).pipe(Object(B["a"])((function(t){var n,r=yv(t,2),a=r[0],o=r[1],i=dv(dv({},e),a),c=null===a.caps?a.caps:dv(bv({},Pe.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return dv(dv({},i),{},{caps:c})})),Object(oi["a"])(du.a))}function _v(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(F["a"])(Ao.success.is),Object(H["a"])("meta","totalDeposit"),Object(uu["a"])(j["MaxUint256"])),c=wv(r,t,i),s=Eu(e),u=e.pipe(Object(F["a"])(To.is),Object(H["a"])("payload","pfsList"),Object(uu["a"])([])),l=e.pipe(Object(F["a"])(Qa.is),Object(ii["a"])((function(e,t){return t.payload?dv(dv({},e),{},bv({},t.meta.address,t.payload)):ja()(t.meta.address,e)}),{}),Object(uu["a"])({}));return Object(su["a"])((function(){var e=c.pipe(gi("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(gi("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(cu["a"])([Object(cu["a"])([e,t,c,s,u,l]),Object(cu["a"])([i])]).pipe(Object(B["a"])((function(e){var t=yv(e,2),n=yv(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=yv(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var kv=dv(dv(dv(dv(dv({},s),u),l),p),f),jv=function(e,t,n){var r=e.pipe(Object(F["a"])(Cr(Mo))),a=e.pipe(Object(si["a"])(pu()(Cr(Mo)),!0)),o=t.pipe(Object(ni["a"])(r));return Object(su["a"])((function(){return _v(a,o,n).subscribe(n.latest$)}),(function(){return Object(Kt["a"])(Object.values(kv)).pipe(Object($["a"])((function(e){return e(a,o,n).pipe(Object(Xt["a"])((function(t){return n.log.error("Epic error",e,t),Object(zo["a"])(t)})))})),Object(Xt["a"])((function(e){return Object(P["a"])(Mo({reason:e}))})),Object(ni["a"])(r))}))};function Ev(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Dv(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Tv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tv(Object(n),!0).forEach((function(t){Sv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Av(e,t){return Pv(e)||Cv(e,t)||Dv(e,t)||Nv()}function Nv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dv(e,t){if(e){if("string"===typeof e)return Rv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rv(e,t):void 0}}function Rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pv(e){if(Array.isArray(e))return e}function Iv(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Lv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Iv(o,r,a,i,c,"next",e)}function c(e){Iv(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Mv(e){var t=e.constructor.__defaults.log,n={},r=function(){var t=Lv(b.a.mark((function t(){var r;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=b.a.mark((function t(){var r,a,o,i,c,s,u,l;return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,n={},a=Object.keys(r),t.next=5,e.allDocs({keys:a});case 5:return o=t.sent,i=function(e){var t,n=o.rows.find((function(t){return t.id===e}));return(null===(t=null===n||void 0===n?void 0:n.value)||void 0===t?void 0:t.deleted)?{_rev:n.value.rev,deleted:!1}:n&&!("error"in n)?{_rev:n.value.rev}:void 0},t.next=9,e.bulkDocs(Object.entries(r).map((function(e){var t=Av(e,2),n=t[0],r=t[1];return xv(xv({},r),{},{_id:n},i(n))})));case 9:c=t.sent,s=Ev(c);try{for(s.s();!(u=s.n()).done;)l=u.value,"error"in l&&l.error&&l.id&&!(l.id in n)&&(n[l.id]=r[l.id])}catch(p){s.e(p)}finally{s.f()}case 12:case"end":return t.stop()}}),t)}));case 1:if(Ku()(n)){t.next=5;break}return t.delegateYield(r(),"t0",3);case 3:t.next=1;break;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(a){return function(o){return function(i){var c=a.getState(),s=o(i),u=a.getState();if(u===c)return s;for(var l in u){var p=l;if(u[p]!==c[p])if("channels"===p||"oldChannels"===p){for(var f in u[p])if(u[p][f]!==c[p][f]){var d="channels.".concat(u[p][f]._id);e.storageKeys.add(d),n[d]=u[p][f]}}else if("transfers"===p){for(var b in u.transfers)u.transfers[b]!==c.transfers[b]&&(e.storageKeys.add(b),n[b]=u.transfers[b]);for(var y in c.transfers)y in u.transfers||(n[y]=xv(xv({},c.transfers[y]),{},{cleared:Date.now()}))}else{var h="state.".concat(p);e.storageKeys.add(h),n[h]={value:u[p]}}}return e.busy$.value||(e.busy$.next(!0),r().catch((function(e){var n;return null===(n=null===t||void 0===t?void 0:t.warn)||void 0===n?void 0:n.call(t,"Persister saveDatabase error",e)})).finally((function(){return e.busy$.next(!1)}))),s}}}}function Uv(e){return Wv(e)||Fv(e)||Gv(e)||Bv()}function Bv(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fv(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Wv(e){if(Array.isArray(e))return Zv(e)}function $v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$v(Object(n),!0).forEach((function(t){Vv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qv(e,t){return Yv(e)||Xv(e,t)||Gv(e,t)||Kv()}function Kv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gv(e,t){if(e){if("string"===typeof e)return Zv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zv(e,t):void 0}}function Zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yv(e){if(Array.isArray(e))return e}function Qv(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function zv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qv(o,r,a,i,c,"next",e)}function c(e){Qv(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Jv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tg(e,t,n){return t&&eg(e.prototype,t),n&&eg(e,n),e}var ng=function(){function e(t,n,r,a,o,i){var c,s,u,l,p,f=this,d=o.db,y=o.state,m=o.config;Jv(this,e);var v=y.address;this.resolveName=t.resolveName.bind(t),this.log=h.a.getLogger("raiden:".concat(v));var g=_n({network:n},m&&Et(wn,m));t.resetEventsBlock(y.blockNumber+1);var O=new R["a"](1);this.state$=O.pipe(gi("state")),this.action$=O.pipe(gi("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(gi("channels"),Object(B["a"])(Lp)),this.transfers$=Ip(this.state$,d),this.events$=this.action$.pipe(Object(F["a"])(Cr(Fo))),this.getTokenInfo=D()(function(){var e=zv(b.a.mark((function e(t){var n,r,a,o,i,c,s;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.deps.getTokenContract(t),e.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(A()(void 0)),n.functions.symbol().catch(A()(void 0))]);case 4:return r=e.sent,a=qv(r,4),o=a[0],i=a[1],c=a[2],s=a[3],ht(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),e.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),this.deps={latest$:O,config$:O.pipe(gi("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:v,log:this.log,defaultConfig:g,contractsInfo:a,registryContract:Z.connect(a.TokenNetworkRegistry.address,null!==(c=null===i||void 0===i?void 0:i.signer)&&void 0!==c?c:r),getTokenNetworkContract:D()((function(e){var t;return J.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),getTokenContract:D()((function(e){var t;return ae.connect(e,null!==(t=null===i||void 0===i?void 0:i.signer)&&void 0!==t?t:r)})),serviceRegistryContract:ue.connect(a.ServiceRegistry.address,null!==(s=null===i||void 0===i?void 0:i.signer)&&void 0!==s?s:r),userDepositContract:ge.connect(a.UserDeposit.address,null!==(u=null===i||void 0===i?void 0:i.signer)&&void 0!==u?u:r),secretRegistryContract:je.connect(a.SecretRegistry.address,null!==(l=null===i||void 0===i?void 0:i.signer)&&void 0!==l?l:r),monitoringServiceContract:Ne.connect(a.MonitoringService.address,null!==(p=null===i||void 0===i?void 0:i.signer)&&void 0!==p?p:r),main:i,db:d},this.userDepositTokenAddress=D()(zv(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var w=Object(x["createLogger"])({predicate:function(){return f.log.getLevel()<=h.a.levels.INFO},logger:this.log,level:{prevState:!1,action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return f.config=e})),this.epicMiddleware=Object(T["a"])({dependencies:this.deps});var _=Mv(d);this.store=Object(E["b"])(iu,y,Object(E["a"])(w,this.epicMiddleware,_)),_v(Object(P["a"])(Uo({})),Object(P["a"])(this.store.getState()),this.deps).subscribe((function(e){return f.deps.latest$.next(e)}))}return tg(e,[{key:"start",value:function(){var t=this;ht(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:this.deps.network,"raiden-ts":e.version,"raiden-contracts":e.contractVersion});var n={complete:function(){return t.epicMiddleware=null}};this.deps.latest$.subscribe(n),this.epicMiddleware.run(jv),this.epicMiddleware=void 0,this.store.dispatch(Uo({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch(Mo({reason:Ce.STOP}))}},{key:"getBlockNumber",value:function(){var e=zv(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfig",value:function(e){this.store.dispatch(Uo(Et(wn,e)))}},{key:"dumpDatabase",value:function(){var e=zv(b.a.mark((function e(){return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===this.started){e.next=3;break}return e.next=3,this.deps.db.busy$.toPromise();case 3:return e.abrupt("return",pp(this.deps.db));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Mp(this.deps,this.config.subkey).address,ht(Lt.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(){var e=zv(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null!==n&&void 0!==n?n:Mp(this.deps,this.config.subkey).address,ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{address:n}],this.log.info),ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),r=this.deps.getTokenContract(t),e.abrupt("return",r.functions.balanceOf(n));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTokenList",value:function(){var e=zv(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Hv(Hv({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{},{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=zv(b.a.mark((function e(t){var n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.state.tokens[t],!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.deps.registryContract.token_to_token_networks(t);case 6:return n=e.sent,ht(n&&n!==j["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Ma({token:t,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=d.length>3?d[3]:void 0,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),e.next=6,this.monitorToken(t);case 6:return o=e.sent,ht(!r.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=r.settleTimeout?Et(Nt(4),r.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=r.deposit?Et(Nt(32),r.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:n},u=Br(Ua,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Br(Fa,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Ua.request(Hv(Hv({},r),{},{settleTimeout:i,deposit:c}),s)),e.next=16,u;case 16:return p=e.sent,null===a||void 0===a||a({type:Ae.OPENED,payload:{txHash:p}}),e.next=20,this.state$.pipe(gi("channels",Li({tokenNetwork:o,partner:n}),"state"),Object(W["a"])((function(e){return e===Jr.open}))).toPromise();case 20:if(null===a||void 0===a||a({type:Ae.CONFIRMED,payload:{txHash:p}}),!l){e.next=26;break}return e.next=24,l;case 24:f=e.sent,null===a||void 0===a||a({type:Ae.DEPOSITED,payload:{txHash:f}});case 26:return e.abrupt("return",p);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositChannel",value:function(){var e=zv(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:{},o=a.subkey,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),i=this.state,c=i.tokens[t],ht(c,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),ht(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),s=Et(Nt(32),r,dt.DTA_INVALID_DEPOSIT,this.log.info),u={tokenNetwork:c,partner:n},l=Br(Fa,u,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Fa.request({deposit:s,subkey:o},u)),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],ht(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),ht(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Br($a,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch($a.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],ht(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),ht(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Br(Va,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Va.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=zv(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),n={address:t},r=Br(Za,n,this.action$),this.store.dispatch(Za.request(void 0,n)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=zv(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d,y=this,h=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],ht(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Et(Nt(32),r,dt.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==a.paymentId?Et(Nt(8),a.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):rs(),s=a.paths?Et(Ja,a.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=a.pfs?Et(eo,a.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,l=a.lockTimeout?this.state.blockNumber+a.lockTimeout:void 0,ht(void 0===a.secret||Ct.is(a.secret),dt.RDN_INVALID_SECRET,this.log.info),ht(void 0===a.secrethash||Rt.is(a.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),p=a.secret?a.secret:a.secrethash?void 0:ns(),f=a.secrethash||ts(p),ht(!p||ts(p)===f,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),d={tokenNetwork:o,target:n,value:i},e.abrupt("return",Object(I["a"])(this.action$.pipe(Object(W["a"])(Mr(Eo,d)),Object(B["a"])((function(e){if(Eo.failure.is(e))throw e.payload;return e.payload.paths}))),Object(L["a"])((function(){return y.store.dispatch(Eo.request({paths:s,pfs:u},d)),M["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(y.action$.pipe(Object(F["a"])(Cr([oo,ao.failure])),Object(W["a"])((function(e){return e.meta.direction===ga.SENT&&e.meta.secrethash===f})),Object(B["a"])((function(e){if(ao.failure.is(e))throw e.payload;return os(e.meta)}))),Object(L["a"])((function(){return y.store.dispatch(ao.request({tokenNetwork:o,target:n,value:i,paths:e,paymentId:c,secret:p,expiration:l},{secrethash:f,direction:ga.SENT})),M["a"]})))}))).toPromise());case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"waitTransfer",value:function(){var e=zv(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=cs(t),i=o.direction,c=o.secrethash,s=this.state.transfers[t],s){e.next=14;break}return e.prev=3,e.t0=Et,e.t1=_a,e.next=8,this.deps.db.get(t);case 8:e.t2=e.sent,s=(0,e.t0)(e.t1,e.t2),e.next=14;break;case 12:e.prev=12,e.t3=e["catch"](3);case 14:if(ht(s,dt.RDN_UNKNOWN_TRANSFER,this.log.info),u=ds(s),!u.completed){e.next=22;break}if(!u.success){e.next=21;break}return e.abrupt("return",u);case 21:throw new yt(dt.XFER_ALREADY_COMPLETED,{status:u.status});case 22:return e.next=24,Br(ao,{secrethash:c,direction:i},this.action$);case 24:return e.next=26,this.state$.pipe(Object(H["a"])("transfers",t),Object(W["a"])((function(e){return!!e.unlockProcessed}))).toPromise();case 26:return l=e.sent,this.log.info("Transfer successful",{key:t,partner:l.partner,initiator:l.transfer.initiator,target:l.transfer.target,fee:l.fee.toString(),lockAmount:l.transfer.lock.amount.toString(),targetReceived:null===(a=null===(r=null===(n=l.secretRequest)||void 0===n?void 0:n.amount)||void 0===r?void 0:r.toString)||void 0===a?void 0:a.call(r),transferTime:l.unlockProcessed.ts-l.transfer.ts}),e.abrupt("return",ds(l));case 29:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=zv(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],ht(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Et(Nt(32),r),c=a.pfs?Et(eo,a.pfs):void 0,s={tokenNetwork:o,target:n,value:i},u=Br(Eo,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Eo.request({pfs:c},s)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=zv(b.a.mark((function e(t,n,r){var a,o,i,c;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),a=this.state.tokens[t],ht(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=Et(Nt(32),r),i={tokenNetwork:a,target:n,value:o},c=Br(Eo,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Eo.request({pfs:null},i)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"findPFS",value:function(){var e=zv(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ht(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(P["a"])([this.config.pfs]):this.deps.latest$.pipe(gi("pfsList"),Object(W["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return bm(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=r.subkey,o=r.to,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),ht(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),i=Mp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,u=be.connect(t,c),l=null!==o&&void 0!==o?o:s,ht(Lt.is(l),[dt.DTA_INVALID_ADDRESS,{beneficiary:l}],this.log.info),p=Et(Nt(32),n,dt.DTA_INVALID_AMOUNT),e.next=11,Bp(u,"mintFor",[p,l],dt.RDN_MINT_FAILED,{log:this.log});case 11:return f=e.sent,e.next=14,Wp(f,this.deps,1);case 14:return e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=zv(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Kp(this.deps.latest$);case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(Uv(e),Uv(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),j["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},a=r.subkey,ht(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Et(Nt(32),t,dt.DTA_INVALID_DEPOSIT,this.log.info),ht(o.gt(j["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),e.next=6,Kp(this.deps.latest$);case 6:return i=e.sent,c={totalDeposit:i.add(o)},s=Br(Ao,c,this.action$).then((function(e){return null===e||void 0===e?void 0:e.txHash})),this.store.dispatch(Ao.request({deposit:o,subkey:a},c)),e.next=12,s;case 12:return u=e.sent,null===n||void 0===n||n({type:Ae.DEPOSITED,payload:{txHash:u}}),l=Br(Ao,c,this.action$,!0).then((function(e){return e.txHash})),e.next=17,l;case 17:return u=e.sent,null===n||void 0===n||n({type:Ae.CONFIRMED,payload:{txHash:u}}),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transferOnchainBalance",value:function(){var e=zv(b.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,p,f,d,y,h,m=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:j["MaxUint256"],r=m.length>2&&void 0!==m[2]?m[2]:{},a=r.subkey,o=r.gasPrice,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),ht(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=Mp(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,!o){e.next=9;break}e.t0=Object(k["bigNumberify"])(o),e.next=12;break;case 9:return e.next=11,this.deps.provider.getGasPrice();case 11:e.t0=e.sent;case 12:return u=e.t0,l=Object(k["bigNumberify"])(21e3),e.next=16,this.getBalance(s);case 16:return p=e.sent,f=p.sub(u.mul(l)),ht(f.gt(j["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:f.toString()}],this.log.info),d=f.lte(n)?f:Object(k["bigNumberify"])(n),e.next=22,c.sendTransaction({to:t,value:d,gasPrice:u,gasLimit:l});case 22:return y=e.sent,e.next=25,y.wait();case 25:return h=e.sent,ht(h.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),e.abrupt("return",y.hash);case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnchainTokens",value:function(){var e=zv(b.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,p,f,d=arguments;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:j["MaxUint256"],a=d.length>3&&void 0!==d[3]?d[3]:{},o=a.subkey,ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{to:n}],this.log.info),ht(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=Mp(this.deps,null!==o&&void 0!==o?o:this.config.subkey),c=i.signer,s=i.address,u=Up(this.deps.getTokenContract(t),c),e.next=9,this.getTokenBalance(t,s);case 9:return l=e.sent,p=l.lte(r)?l:Object(k["bigNumberify"])(r),e.next=13,Bp(u,"transfer",[n,p],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 13:return f=e.sent,e.abrupt("return",f.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=zv(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={amount:Et(Nt(32),t,dt.DTA_INVALID_AMOUNT,this.log.error)},r=Br(Do,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Do.request(void 0,n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"withdrawChannel",value:function(){var e=zv(b.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,p,f,d;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ht(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),ht(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),a=this.state.tokens[t],ht(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[Li({tokenNetwork:a,partner:n})],ht((null===o||void 0===o?void 0:o.state)===Jr.open,dt.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Ui(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=Et(Nt(32),null!==r&&void 0!==r?r:c,dt.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),p=this.state.blockNumber+2*this.config.revealTimeout,f={direction:ga.SENT,tokenNetwork:a,partner:n,totalWithdraw:l,expiration:p},d=Br(go,f,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(go.request(void 0,f)),e.abrupt("return",d);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(){var e=zv(b.a.mark((function e(t,n,r,a,o,i){var c,s,u,l,p,f,d,y,m,v;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="string"===typeof t?new _["JsonRpcProvider"](t):t instanceof _["JsonRpcProvider"]?t:new _["Web3Provider"](t),fn(c),e.next=4,c.getNetwork();case 4:if(s=e.sent,a){e.next=9;break}u=Dp(s),e.next=17;break;case 9:if("string"!==typeof a){e.next=16;break}return ht(Lt.is(a),[dt.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:a}]),e.next=13,Vp(c,a);case 13:u=e.sent,e.next=17;break;case 16:u=a;case 17:return e.next=19,Pp(n,c,i);case 19:return l=e.sent,p=l.signer,f=l.address,d=l.main,e.next=25,Xp({network:s,contractsInfo:u,address:f,log:h.a.getLogger("raiden:".concat(f))},r);case 25:return y=e.sent,m=y.state,v=y.db,ht(f===m.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:f,state:m.address}]),ht(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),e.abrupt("return",new this(c,s,p,u,{db:v,state:m,config:o},d));case 31:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"version",get:function(){return Re.sdk}},{key:"contractVersion",get:function(){return Re.contracts}}]),e}()},fe3a:function(e,t,n){"use strict";var r=n("5956"),a=n.n(r);a.a}});
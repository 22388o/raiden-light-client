(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-15f0b7af":"e2945db7","chunk-0ad86ad4":"1525837e","chunk-67b172b3":"3cfbb5ad","chunk-73a2659e":"d527e161","chunk-895be7da":"c7504a3a","chunk-4bb1700b":"95ab6fc1","chunk-7809f08f":"48f3ea9b","chunk-bebefaa6":"a8121004","chunk-1503d996":"906a982e","chunk-6d35f4f8":"25f10cda","chunk-5dcb669a":"1a369186","chunk-36b5fef4":"ef779db1","chunk-d03713e2":"28382d95","chunk-f9c339fe":"277bd0f5"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-15f0b7af":1,"chunk-0ad86ad4":1,"chunk-67b172b3":1,"chunk-73a2659e":1,"chunk-895be7da":1,"chunk-4bb1700b":1,"chunk-7809f08f":1,"chunk-bebefaa6":1,"chunk-1503d996":1,"chunk-6d35f4f8":1,"chunk-5dcb669a":1,"chunk-36b5fef4":1,"chunk-d03713e2":1,"chunk-f9c339fe":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-15f0b7af":"1d5a726d","chunk-0ad86ad4":"85781be9","chunk-67b172b3":"53c90c86","chunk-73a2659e":"90ce0cc7","chunk-895be7da":"b86104e5","chunk-4bb1700b":"f86be718","chunk-7809f08f":"ff672ff1","chunk-bebefaa6":"1b781117","chunk-1503d996":"711c53d5","chunk-6d35f4f8":"18890724","chunk-5dcb669a":"0727a159","chunk-36b5fef4":"90c578bf","chunk-d03713e2":"a811d323","chunk-f9c339fe":"370906c3"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){return function(){var t,n=y(e);if(b()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)}}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["b"])([Object(i["a"])({})],m);var v=m,h=v,g=(n("e6c7"),n("2877")),O=Object(g["a"])(h,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||f(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var h=function(){function e(){y(this,e)}return v(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(e,t){var n=a["a"].toUnits(e,t||18),r=parseFloat(n);if(0===r)return"0.0";if(r<1e-6)return"<0.000001";var o=i()(n,"."),c=u(o,2),s=c[0],l=c[1];if(l&&l.length>6){var d=l.substring(0,6);return"≈".concat(s,".").concat(d)}return n}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();h.toUnits=function(e,t){return a["a"].toUnits(e,t||18)},r["a"].filter("truncate",h.truncate),r["a"].filter("decimals",h.decimals),r["a"].filter("upper",h.upper),r["a"].filter("displayFormat",h.displayFormat),r["a"].filter("capitalizeFirst",h.capitalizeFirst),r["a"].filter("toUnits",h.toUnits)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","transaction_hash":"0xd206df08ae6d2107efcfae3c666456580f2d9b2a62d8f3fdcaa95c86e66ffbcc","block_number":5907112,"gas_cost":1980416,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","transaction_hash":"0x3ad7e5b3080fd8ef6018b296a8a87047b1a91536c2247161cd07ea5ff96a1141","block_number":5907113,"gas_cost":1530254,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8",1.157920892373162e+77]},"MonitoringService":{"address":"0x709282aE42C9Df6F156F8A92fC110Fed039DCdB3","transaction_hash":"0x7809b24fa2f04603dab3cc9f7a2a2c310f244dcbbb93960542b4f7eb15475142","block_number":5907114,"gas_cost":1949685,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1"]},"OneToN":{"address":"0x083a0411483b3Fb9eb9ccfb1F07003BF8f27D094","transaction_hash":"0x63d88efd315657d9b8e370a04f77b290d06909d5211248f5c05695539438c2e3","block_number":5907115,"gas_cost":1097569,"constructor_arguments":["0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe",4,"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){return function(){var t,n=m(e);if(y()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)}}function f(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){l(n,e);var t=p(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"onGeneralBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);v=Object(r["b"])([a["a"]],v),t["a"]=v},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){return function(){var t,n=j(e);if(k()){var r=j(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var w=function(e){m(n,e);var t=h(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));w=Object(o["b"])([Object(i["a"])({computed:d({},Object(c["c"])(["defaultAccount"]),{},Object(c["b"])(["pendingTransfers"]))})],w);var _=w,E=_,T=(n("be88"),n("2877")),x=n("6544"),S=n.n(x),A=n("4ca6"),R=n("adda"),N=n("3a2f"),C=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=C.exports;S()(C,{VBadge:A["a"],VImg:R["a"],VTooltip:N["a"]})},3:function(e,t){},"316d":function(e,t,n){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x7714DA9D9c577F0b89FE4774193d646F07b880c5","transaction_hash":"0x3377ccdc9624bd432a89b6e3d068fe8dd01949f2f52b4e0538843b88b9fbcdab","block_number":5907003,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1","transaction_hash":"0x84fcd1320182f5255b93609e17056fb84a0edf4752ca6841a8a271bea7981ce4","block_number":5907005,"gas_cost":4001114,"constructor_arguments":["0x7714DA9D9c577F0b89FE4774193d646F07b880c5",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},"48e0":function(e,t,n){"use strict";var r=n("316d"),a=n.n(r);a.a},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x1d238cdacA8fFFD56F722B587aA010d6B438B077","transaction_hash":"0x3bdd7711721781ba977cf436d8cc77312e27b1467102927169e8aa6c3a3abdf0","block_number":2114518,"gas_cost":1980416,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","transaction_hash":"0xabb4bf75eb1946f6342c21959d6443140ab7378f33d9a5bdb1f3a039083b1214","block_number":2114520,"gas_cost":1530254,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952",1.157920892373162e+77]},"MonitoringService":{"address":"0x850C3E4914417eC41230177c2821B9514c2e2bC9","transaction_hash":"0x2cf29dea37d02049295ffa5ea9f744cff82995c0c547f79f6bdd7f27abeae0b4","block_number":2114521,"gas_cost":1949685,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x1d238cdacA8fFFD56F722B587aA010d6B438B077","0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526"]},"OneToN":{"address":"0xe4C2C47F070152c03a564C2c681C3FbD78234156","transaction_hash":"0xe5d1fa41d7b72feeaed494c42bd98860c49c396fe1961f9f2f5567a392018816","block_number":2114523,"gas_cost":1097569,"constructor_arguments":["0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A",5,"0x1d238cdacA8fFFD56F722B587aA010d6B438B077"]}}}')},"51ce":function(e,t,n){},6554:function(e,t,n){"use strict";var r=n("ff61"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function b(e){return function(){var t,n=h(e);if(v()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var g=function(e){p(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,k=O,j=(n("1c30"),n("2877")),w=n("6544"),_=n.n(w),E=n("8336"),T=n("b0af"),x=n("169a"),S=n("132d"),A=Object(j["a"])(k,r,a,!1,null,"188eebce",null);t["a"]=A.exports;_()(A,{VBtn:E["a"],VCard:T["a"],VDialog:x["a"],VIcon:S["a"]})},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){return function(){var t,n=v(e);if(m()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var h=function(e){d(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],h.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],h.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],h.prototype,"click",null),h=Object(o["b"])([Object(i["a"])({})],h);var g=h,O=g,k=(n("c6c9"),n("2877")),j=n("6544"),w=n.n(j),_=n("8336"),E=n("62ad"),T=n("132d"),x=n("0fd9"),S=Object(k["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=S.exports;w()(S,{VBtn:_["a"],VCol:E["a"],VIcon:T["a"],VRow:x["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){return function(){var t,n=y(e);if(b()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)}}function p(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["b"])([a["a"]],m),t["a"]=m},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return T}));var r=n("a34a"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return p(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function p(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function k(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function j(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?k(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?v({},e,{payload:k(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function w(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function _(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=j(n);i&&g.put(O,{logger:r,level:e,message:n},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(w)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return x.apply(this,arguments)}function x(){return x=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function b(e){return function(){var t,n=h(e);if(v()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var g=function(e){p(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["b"])([Object(i["a"])({})],g);var O=g,k=O,j=(n("a130"),n("2877")),w=n("6544"),_=n.n(w),E=n("3a2f"),T=Object(j["a"])(k,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;_()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf","transaction_hash":"0x59a02287485ff7ac0153022959f0bbe4a044242ba94bb53f7dedbafd4d35fb4e","block_number":7255736,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a","transaction_hash":"0x20ae67f204baca19726e040399ab2fc45fd3e8abdd16eb3d67abeca2eab31d45","block_number":7255738,"gas_cost":4001114,"constructor_arguments":["0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf",3,20,555428,1.157920892373162e+77]}}}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){return Object(r["formatUnits"])(e,t)}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e,t)}}]),e}()},af21:function(e,t,n){},b397:function(e,t,n){"use strict";var r=n("ebf0"),a=n.n(r);a.a},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","transaction_hash":"0xc7bb55a286aa1dba66dc08a8197be50e8b4dc2658ff1867a998e292c30e5cc2c","block_number":7255768,"gas_cost":1980416,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","transaction_hash":"0x9f6a524f5ce39584637d2d60a9726e1f4137de10cd892b46852f1b903680f008","block_number":7255770,"gas_cost":1530254,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70",1.157920892373162e+77]},"MonitoringService":{"address":"0xFE94CfD16926af2EfD31C3F7F7d60D40180cA552","transaction_hash":"0xd3bcc2d4d6b7cf9c0d899cc6bdde3f9ebc88769c925d0c77fa736138e5d4e4f3","block_number":7255775,"gas_cost":1949685,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a"]},"OneToN":{"address":"0x69A69251f281eEf1926fdF7744BcE48163493E9f","transaction_hash":"0x70e3b1d71a77a85357c14f8e1e1b9ed73696f59025e93358a540a9bfbe9c8d7f","block_number":7255778,"gas_cost":1097569,"constructor_arguments":["0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF",3,"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])])],1)],1),r("action-button",{attrs:{enabled:"",text:e.$t("home.connect-button"),sticky:""},on:{click:function(t){e.connectDialog=!0}}}),r("connect-dialog",{attrs:{connecting:e.connecting,"connecting-subkey":e.connectingSubkey,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("a34a"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),d=n("750b"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.connect-title"))+" ")]),e.injectedProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.web3-provider"),enabled:!e.connecting&&!e.connectingSubkey,loading:e.connecting},on:{click:function(t){return e.connect(e.stateBackup)}}})],1),n("div",{staticClass:"text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.connect-dialog.divider"))+" ")]),e.connectingSubkey?n("div",{staticClass:"connect__raiden-account-spinner text-center"},[n("v-progress-circular",{attrs:{size:30,width:1,indeterminate:""}})],1):n("i18n",{staticClass:"connect__raiden-account text-center font-weight-light",attrs:{path:"home.connect-dialog.raiden-account.description",tag:"div"}},[e.connecting?n("span",[e._v(" "+e._s(e.$t("home.connect-dialog.raiden-account.link-name"))+" ")]):n("a",{on:{click:function(t){return e.connect(e.stateBackup,!0)}}},[e._v(" "+e._s(e.$t("home.connect-dialog.raiden-account.link-name"))+" ")])])],1):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.injectedProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},f=[],b=n("f15c"),y=n("66bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},v=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){return function(){var t,n=S(e);if(x()){var r=S(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)}}function E(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0})],A.prototype,"reason",void 0),A=Object(c["b"])([Object(s["a"])({})],A);var R=A,N=R,C=(n("753f"),n("2877")),P=n("6544"),I=n.n(P),D=n("0798"),M=Object(C["a"])(N,m,v,!1,null,"7b92b083",null),L=M.exports;function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H(e,t)}function V(e){return function(){var t,n=K(e);if(Z()){var r=K(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return W(this,t)}}function W(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}I()(M,{VAlert:D["a"]});var X=function(e){q(n,e);var t=V(n);function n(){var e;return B(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return $(n,[{key:"close",value:function(){}},{key:"connect",value:function(e,t){return{uploadedState:e,subkey:t}}},{key:"injectedProvider",get:function(){return b["a"].injectedWeb3Available()}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],X.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],X.prototype,"connecting",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],X.prototype,"connectingSubkey",void 0),Object(c["b"])([Object(s["b"])()],X.prototype,"close",null),Object(c["b"])([Object(s["b"])()],X.prototype,"connect",null),X=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:d["a"],NoAccessMessage:L},computed:Object(u["c"])(["stateBackup","accessDenied"])})],X);var Y=X,Q=Y,z=(n("ee20"),n("99d9")),J=n("490a"),ee=Object(C["a"])(Q,p,f,!1,null,"4996046c",null),te=ee.exports;I()(ee,{VCardText:z["b"],VCardTitle:z["c"],VProgressCircular:J["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},re=[],ae=n("152b");function oe(e){return oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}function be(e){return function(){var t,n=he(e);if(ve()){var r=he(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return ye(this,t)}}function ye(e,t){return!t||"object"!==oe(t)&&"function"!==typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var ge=function(e){pe(n,e);var t=be(n);function n(){return ue(this,n),t.apply(this,arguments)}return de(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ae["a"]));Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],ge.prototype,"onChange",null),ge=Object(c["b"])([Object(s["a"])({computed:ce({},Object(u["b"])(["tokens"]))})],ge);var Oe=ge,ke=Oe,je=(n("1a2b"),n("8336")),we=n("62ad"),_e=n("a523"),Ee=n("132d"),Te=n("0fd9"),xe=Object(C["a"])(ke,ne,re,!1,null,"4f16408a",null),Se=xe.exports;function Ae(e){return Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,c,"next",e)}function c(e){Pe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function Ue(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function Fe(e){return function(){var t,n=Ve(e);if(He()){var r=Ve(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return $e(this,t)}}function $e(e,t){return!t||"object"!==Ae(t)&&"function"!==typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}I()(xe,{VBtn:je["a"],VCol:we["a"],VContainer:_e["a"],VIcon:Ee["a"],VRow:Te["a"]});var We=function(e){Ue(n,e);var t=Fe(n);function n(){var e;return De(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.connectingSubkey=!1,e}return Le(n,[{key:"connect",value:function(){var e=Ie(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.uploadedState,r=t.subkey,r?this.connectingSubkey=!0:this.connecting=!0,this.$store.commit("reset"),e.next=6,this.$raiden.connect(n,r);case 6:this.connectingSubkey=!1,this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);We=Object(c["b"])([Object(s["a"])({computed:Ne({},Object(u["c"])(["loading","accessDenied"]),{},Object(u["b"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:te,NoTokens:Se}})],We);var Ge=We,Ze=Ge,Ke=(n("b397"),n("adda")),Xe=Object(C["a"])(Ze,r,a,!1,null,"6dfe7e7e",null);t["a"]=Xe.exports;I()(Xe,{VCol:we["a"],VContainer:_e["a"],VImg:Ke["a"],VRow:Te["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.6.0","contracts":"0.36.2"}')},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6","transaction_hash":"0xf015b6c93951e645c45d4632dcd25de2869bd6613b5b59c53e2453c168c36447","block_number":2114499,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526","transaction_hash":"0xa77a53156131d50af579a3ab22e80af01eb3e40405292d78e80c8c4d238d4886","block_number":2114501,"gas_cost":4001114,"constructor_arguments":["0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar")],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},l=[],d=n("2f62"),p=n("80bf"),f=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){return function(){var t,n=S(e);if(x()){var r=S(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return E(this,t)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"canGoBack",get:function(){var e=[p["a"].HOME,p["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(s["a"]));A=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:f["a"],AddressDisplay:b["a"]},computed:v({},Object(d["c"])(["loading","defaultAccount"]),{},Object(d["b"])(["network","isConnected"]))})],A);var R=A,N=R,C=(n("48e0"),n("2877")),P=n("6544"),I=n.n(P),D=n("8336"),M=n("62ad"),L=n("adda"),U=n("0fd9"),B=n("2fa4"),F=Object(C["a"])(N,u,l,!1,null,"22e36b17",null),$=F.exports;I()(F,{VBtn:D["a"],VCol:M["a"],VImg:L["a"],VRow:U["a"],VSpacer:B["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},H=[],V=n("0a08");function W(e){return W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function X(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){return function(){var t,n=te(e);if(ee()){var r=te(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return z(this,t)}}function z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(e){X(n,e);var t=Q(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return K(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);ne=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],ne);var re=ne,ae=re,oe=n("132d"),ie=n("2db4"),ce=Object(C["a"])(ae,q,H,!1,null,null,null),se=ce.exports;I()(ce,{VIcon:oe["a"],VSnackbar:ie["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},le=[];function de(e){return de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function ve(e){return function(){var t,n=ke(e);if(Oe()){var r=ke(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return he(this,t)}}function he(e,t){return!t||"object"!==de(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var je=function(e){ye(n,e);var t=ve(n);function n(){var e;return pe(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return be(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);je=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],je);var we=je,_e=we,Ee=Object(C["a"])(_e,ue,le,!1,null,null,null),Te=Ee.exports;function xe(e){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ne(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function Pe(e){return function(){var t,n=Le(e);if(Me()){var r=Le(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ie(this,t)}}function Ie(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}I()(Ee,{VBtn:D["a"],VSnackbar:ie["a"]});var Ue=function(e){Ne(n,e);var t=Pe(n);function n(){return Se(this,n),t.apply(this,arguments)}return Re(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));Ue=Object(i["b"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:se,UpdateSnackbar:Te}})],Ue);var Be=Ue,Fe=Be,$e=(n("6554"),n("7496")),qe=n("a523"),He=n("a75b"),Ve=Object(C["a"])(Fe,a,o,!1,null,"3bcb8e58",null),We=Ve.exports;I()(Ve,{VApp:$e["a"],VContainer:qe["a"],VContent:He["a"]});var Ge=n("2fe1");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ze=n("8c4f"),Ke=n("bb51");r["a"].use(Ze["a"]);var Xe=new Ze["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:p["a"].HOME,meta:{title:"Raiden dApp"},component:Ke["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:p["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-bebefaa6"),n.e("chunk-1503d996"),n.e("chunk-6d35f4f8")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:p["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-4bb1700b")]).then(n.bind(null,"146c"))}},{path:"/connect",name:p["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-0ad86ad4")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:p["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-bebefaa6"),n.e("chunk-1503d996"),n.e("chunk-5dcb669a")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:p["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-bebefaa6"),n.e("chunk-36b5fef4")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:p["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-15f0b7af"),n.e("chunk-7809f08f")]).then(n.bind(null,"3a90"))}},{path:"/account",name:p["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-f9c339fe").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:p["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-73a2659e")]).then(n.bind(null,"f18d"))}},{path:"backup",name:p["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-67b172b3")]).then(n.bind(null,"248b"))}},{path:"raiden",name:p["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-d03713e2")]).then(n.bind(null,"9114"))}}]}]}),Ye=Xe,Qe=n("f455"),ze=n("87a2"),Je=n("dd61"),et=n.n(Je),tt=n("e9a8d"),nt=n.n(tt),rt=n("9380"),at=n.n(rt),ot=n("b8ce"),it=n.n(ot),ct=n("c5a2"),st=n.n(ct),ut=n("93c6"),lt=n.n(ut),dt=n("63ea"),pt=n.n(dt),ft=n("13ea"),bt=n.n(ft);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){return wt(e)||jt(e,t)||Ot(e,t)||gt()}function gt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(e,t){if(e){if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wt(e){if(Array.isArray(e))return e}r["a"].use(d["a"]);var _t={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:ze["a"].UNDEFINED,channels:{},tokens:{},transfers:{},presences:{},network:ze["b"],stateBackup:""};function Et(){return it()(_t)}var Tt=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},xt={state:Et(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=ht(r[n],2),o=a[0],i=a[1];o in e.tokens&&pt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=mt({},e.tokens[o],{},i):e.tokens=mt({},e.tokens,vt({},o,i)))}},updatePresence:function(e,t){e.presences=mt({},e.presences,{},t)},network:function(e,t){e.network=t},reset:function(e){Object.assign(e,Et())},updateTransfers:function(e,t){e.transfers=mt({},e.transfers,vt({},t.secrethash,t))},backupState:function(e,t){e.stateBackup=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return et()(at()(nt()(e.channels),(function(e){return!bt()(e)})),(function(n){var r=st()(n,t,Object(ze["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).sort((function(e,t){return Tt(e,t)?e.balance<t.balance?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!bt()(r)&&(n=nt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Qe["a"].open}));return lt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance}}},St=new d["a"].Store(xt),At=n("8aa9");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Rt=n("a34a"),Nt=n.n(Rt),Ct=n("f15c"),Pt=n("a3d5"),It=n("6934"),Dt=n("5670"),Mt=n("e95d"),Lt=n("7f4b"),Ut=n.n(Lt);function Bt(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bt(o,r,a,i,c,"next",e)}function c(e){Bt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}var Vt=function(){function e(){$t(this,e)}return Ht(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Ft(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}]),e}();function Wt(e){return Wt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Gt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}function Zt(e){return function(){var t,n=tn(e);if(zt()){var r=tn(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Kt(this,t)}}function Kt(e,t){return!t||"object"!==Wt(t)&&"function"!==typeof t?Xt(e):t}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yt(e){var t="function"===typeof Map?new Map:void 0;return Yt=function(e){if(null===e||!Jt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Qt(e,arguments,tn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),en(n,e)},Yt(e)}function Qt(e,t,n){return Qt=zt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&en(o,n.prototype),o},Qt.apply(null,arguments)}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Jt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function en(e,t){return en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){return on(e)||an(e,t)||un(e,t)||rn()}function rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function an(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function on(e){if(Array.isArray(e))return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=un(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function un(e,t){if(e){if("string"===typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function pn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dn(o,r,a,i,c,"next",e)}function c(e){dn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),e}var mn=function(){function e(t){fn(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return yn(e,[{key:"updateBalances",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=pn(Nt.a.mark((function e(){var t,n,r,a,o,i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=sn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokens",r),e.next=10,this.fetchTokenData(n);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new kn(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=pn(Nt.a.mark((function t(n,r){var a,o,i,c,s,u,l=this;return Nt.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,Vt.fetch(a);case 5:return o=t.sent,t.next=8,Ct["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,Ct["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=54;break;case 18:if(!o){t.next=24;break}return t.next=21,e.createRaiden(i,o.PRIVATE_KEY,n,r);case 21:c=t.sent,t.next=27;break;case 24:return t.next=26,e.createRaiden(i,void 0,n,r);case 26:c=t.sent;case 27:return this._raiden=c,t.next=30,this.getAccount();case 30:return s=t.sent,this.store.commit("account",s),t.next=34,c.userDepositTokenAddress();case 34:return this._userDepositTokenAddress=t.sent,c.events$.pipe(Object(Dt["a"])((function(e){return"newBlock"===e.type})),Object(Mt["a"])((function(){return l.fetchTokenData(l.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(Dt["a"])((function(e){return"raidenShutdown"===e.type}))).subscribe((function(){return l.store.commit("reset")})),c.events$.subscribe((function(e){"tokenMonitored"===e.type&&l.store.commit("updateTokens",cn({},e.payload.token,{address:e.payload.token})),"matrix/presence/success"===e.type&&l.store.commit("updatePresence",cn({},e.meta.address,e.payload.available))})),c.channels$.subscribe((function(e){l.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){e.initiator===s&&l.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return l.raiden.stop()})),c.start(),t.t0=this.store,t.next=46,this.getBalance();case 46:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=54;break}return t.t2=this.store,t.next=52,this.getBalance(c.address);case 52:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 54:t.next=60;break;case 56:t.prev=56,t.t4=t["catch"](0),u=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?ze["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?ze["a"].RDN_STATE_MIGRATION:t.t4 instanceof wn?ze["a"].INITIALIZATION_FAILED:ze["a"].NO_ACCOUNT,this.store.commit("accessDenied",u);case 60:this.store.commit("loadComplete");case 61:case"end":return t.stop()}}),t,this,[[0,56]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=pn(Nt.a.mark((function e(t){var n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",Pt["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=nn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a){var o,i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.prev=3,e.next=6,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Qe["b"].OPENED?o(2,3):""}));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new gn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new hn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=pn(Nt.a.mark((function e(t,n,r){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new On(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new vn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r=this;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",cn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Ut()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a,o){var i;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 3:return i=e.sent,e.next=6,this.raiden.waitTransfer(i);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new jn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=pn(Nt.a.mark((function e(t,n,r,a){var o;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=pn(Nt.a.mark((function e(){var t;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=pn(Nt.a.mark((function e(t,n,r){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=pn(Nt.a.mark((function e(t,n){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Qe["b"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=pn(Nt.a.mark((function e(){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",cn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=pn(Nt.a.mark((function e(){var t,n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=pn(Nt.a.mark((function e(t){return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(It["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=pn(Nt.a.mark((function e(t){var n;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(It["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"userDepositTokenAddress",get:function(){if(!this._userDepositTokenAddress)throw new Error("address empty");return this._userDepositTokenAddress}}],[{key:"createRaiden",value:function(){var e=pn(Nt.a.mark((function e(t){var n,r,a,o=arguments;return Nt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,e.prev=3,e.next=6,Qe["c"].create(t,n,{storage:window.localStorage,state:r},void 0,{pfsSafetyMargin:1.1,pfs:"https://pfs.raidentransport.test001.env.raiden.network",matrixServer:"https://raidentransport.test001.env.raiden.network"},a);case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e["catch"](3),new wn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),vn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),hn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),gn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),On=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),kn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),jn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error)),wn=function(e){Gt(n,e);var t=Zt(n);function n(){return fn(this,n),t.apply(this,arguments)}return n}(Yt(Error));function _n(e,t){e.prototype.$raiden=new mn(St)}var En=n("103a"),Tn=n.n(En);function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),e}var Rn=function(){function e(){xn(this,e),this.cache={}}return An(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Tn()(e);return this.cache[e]=n,n}}]),e}();function Nn(e,t){e.prototype.$identicon=new Rn}var Cn=n("a925");function Pn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Cn["a"]);var In=new Cn["a"]({locale:"en",fallbackLocale:"en",messages:Pn()}),Dn=(n("5363"),n("f309"));r["a"].use(Dn["a"]);var Mn=new Dn["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87"}}}}),Ln=n("e508"),Un=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Un["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(At["b"])(),r["a"].use(_n),r["a"].use(Nn),r["a"].use(Ln["a"]),new r["a"]({vuetify:Mn,router:Ye,store:St,i18n:In,render:function(e){return e(We)}}).$mount("#app")},e056:function(e,t,n){},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},ebf0:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"connect-title":"Connect","divider":"-OR-","web3-provider":"Use Web3 Provider","raiden-account":{"description":"Connect to Web3 and re-generate a {0}","link-name":"dedicated Raiden account."},"no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"}}},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Enter an address or ENS name..."},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Please enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Please enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Please enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"mint-deposit-dialog":{"button":"Mint and deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Specify amount...","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is to low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp. Your transfer will finish in the background."},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occured","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}}}')},ee20:function(e,t,n){"use strict";var r=n("e056"),a=n.n(r);a.a},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("a34a"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"c",(function(){return Nf})),n.d(t,"a",(function(){return ka})),n.d(t,"b",(function(){return we}));var r={};n.r(r),n.d(r,"newBlock",(function(){return In})),n.d(r,"tokenMonitored",(function(){return Dn})),n.d(r,"channelOpen",(function(){return Mn})),n.d(r,"channelMonitor",(function(){return Ln})),n.d(r,"channelDeposit",(function(){return Un})),n.d(r,"channelWithdrawn",(function(){return Bn})),n.d(r,"channelClose",(function(){return Fn})),n.d(r,"channelSettleable",(function(){return $n})),n.d(r,"channelSettle",(function(){return qn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return Wn})),n.d(a,"matrixPresence",(function(){return Gn})),n.d(a,"matrixRoom",(function(){return Zn})),n.d(a,"matrixRoomLeave",(function(){return Kn})),n.d(a,"rtcChannel",(function(){return Xn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return vr})),n.d(o,"messageGlobalSend",(function(){return hr})),n.d(o,"messageReceived",(function(){return gr}));var i={};n.r(i),n.d(i,"transfer",(function(){return Tr})),n.d(i,"transferSigned",(function(){return xr})),n.d(i,"transferProcessed",(function(){return Sr})),n.d(i,"transferSecret",(function(){return Ar})),n.d(i,"transferSecretRegister",(function(){return Rr})),n.d(i,"transferSecretRequest",(function(){return Nr})),n.d(i,"transferSecretReveal",(function(){return Cr})),n.d(i,"transferUnlock",(function(){return Pr})),n.d(i,"transferUnlockProcessed",(function(){return Ir})),n.d(i,"transferExpire",(function(){return Dr})),n.d(i,"transferExpireProcessed",(function(){return Mr})),n.d(i,"transferRefunded",(function(){return Lr})),n.d(i,"transferClear",(function(){return Ur})),n.d(i,"withdrawReceive",(function(){return Fr}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Hr})),n.d(c,"pfsListUpdated",(function(){return Vr})),n.d(c,"iouPersist",(function(){return Wr})),n.d(c,"iouClear",(function(){return Gr})),n.d(c,"udcDeposited",(function(){return Zr}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return vs})),n.d(s,"initTokensRegistryEpic",(function(){return hs})),n.d(s,"initMonitorChannelsEpic",(function(){return gs})),n.d(s,"initMonitorProviderEpic",(function(){return Os})),n.d(s,"tokenMonitoredEpic",(function(){return ks})),n.d(s,"channelOpenedEpic",(function(){return js})),n.d(s,"channelMonitoredEpic",(function(){return ws})),n.d(s,"channelOpenEpic",(function(){return _s})),n.d(s,"channelDepositEpic",(function(){return Es})),n.d(s,"channelCloseEpic",(function(){return Ts})),n.d(s,"channelUpdateEpic",(function(){return xs})),n.d(s,"channelSettleEpic",(function(){return Ss})),n.d(s,"channelSettleableEpic",(function(){return As})),n.d(s,"channelUnlockEpic",(function(){return Rs})),n.d(s,"confirmationEpic",(function(){return Cs}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Du})),n.d(u,"matrixShutdownEpic",(function(){return Mu})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Lu})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Uu})),n.d(u,"matrixCreateRoomEpic",(function(){return Bu})),n.d(u,"matrixInviteEpic",(function(){return Fu})),n.d(u,"matrixHandleInvitesEpic",(function(){return $u})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return qu})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Hu})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Vu})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Wu})),n.d(u,"matrixMessageSendEpic",(function(){return Zu})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return Ku})),n.d(u,"matrixMessageReceivedEpic",(function(){return Yu})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Qu})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return zu})),n.d(u,"deliveredEpic",(function(){return Ju})),n.d(u,"rtcConnectEpic",(function(){return sl}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return yl})),n.d(l,"transferAutoExpireEpic",(function(){return _l})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Ql})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return od})),n.d(l,"initQueuePendingReceivedEpic",(function(){return id})),n.d(l,"transferMediateEpic",(function(){return fd})),n.d(l,"transferProcessedReceivedEpic",(function(){return kd})),n.d(l,"transferProcessedSendEpic",(function(){return jd})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return wd})),n.d(l,"transferExpireProcessedEpic",(function(){return _d})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return Ed})),n.d(l,"transferRefundedEpic",(function(){return Dd})),n.d(l,"transferRetryMessageEpic",(function(){return Yd})),n.d(l,"transferSecretRequestedEpic",(function(){return ap})),n.d(l,"transferSecretRevealEpic",(function(){return ip})),n.d(l,"transferSecretRevealedEpic",(function(){return cp})),n.d(l,"transferRequestUnlockEpic",(function(){return sp})),n.d(l,"monitorSecretRegistryEpic",(function(){return up})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return lp})),n.d(l,"transferAutoRegisterEpic",(function(){return dp})),n.d(l,"transferSecretRegisterEpic",(function(){return pp})),n.d(l,"withdrawRequestReceivedEpic",(function(){return fp})),n.d(l,"withdrawSendConfirmationEpic",(function(){return bp}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return Yp})),n.d(d,"pfsCapacityUpdateEpic",(function(){return ef})),n.d(d,"pfsFeeUpdateEpic",(function(){return tf})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return nf})),n.d(d,"monitorUdcBalanceEpic",(function(){return rf})),n.d(d,"monitorRequestEpic",(function(){return of}));var p=n("a34a"),f=n.n(p),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),m=n("51b1"),v=n("aadd"),h=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(v["getRequest"])();Object(v["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(h,{createNewMatrixCall:function(){return null}});var k=n("686e"),j=n("6934"),w=n("8404"),_=n("7508"),E=n("733d"),T=n("371e"),x=n("72f0"),S=n.n(x),A=n("e380"),R=n.n(A),N=n("4b96"),C=n("b2f7"),P=n("a748"),I=n("9586"),D=n("1b92"),M=n("17f5"),L=n("d263"),U=n("ebb6"),B=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}var Z=function(){function e(){V(this,e)}return G(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,K,t)}}]),e}(),K=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}var z=function(){function e(){X(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var fe=function(){function e(){le(this,e)}return pe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var he=function(){function e(){ye(this,e)}return ve(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),e}var we,_e=function(){function e(){Oe(this,e)}return je(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Te=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(we||(we={}));var xe,Se,Ae=Object(j["padZeros"])([],65);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(xe||(xe={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Se||(Se={}));var Re=n("bef3"),Ne=n("b047c"),Ce=n.n(Ne),Pe=n("ffa9");function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function Le(e){return function(){var t,n=We(e);if(qe()){var r=We(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ue(this,t)}}function Ue(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Be(e):t}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){var t="function"===typeof Map?new Map:void 0;return Fe=function(e){if(null===e||!He(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $e(e,arguments,We(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ve(n,e)},Fe(e)}function $e(e,t,n){return $e=qe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Ve(o,n.prototype),o},$e.apply(null,arguments)}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var Ge=function(e){Me(n,e);var t=Le(n);function n(){return De(this,n),t.apply(this,arguments)}return n}(Fe(Error));function Ze(e,t,n){if(!e)throw null===n||void 0===n||n("AssertionError",e,t),new Ge(null!==t&&void 0!==t?t:"AssertionError")}function Ke(e){Pe["ThrowReporter"].report(e)}function Xe(e,t){var n=e.decode(t);return Ke(n),n.right}function Ye(e){return null!=e}var Qe=new Re["a"]("BigNumber",j["BigNumber"].isBigNumber,(function(e,t){var n,r;if(j["BigNumber"].isBigNumber(e))return Re["r"](e);try{return Re["r"](Object(j["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Re["f"](e,t)}}),(function(e){return e.toString()})),ze=R()((function(e){return Re["e"](Re["q"],(function(t){return"string"===typeof t&&(e?Object(j["hexDataLength"])(t)===e:Object(j["isHexString"])(t))}),"HexString")})),Je=R()((function(e){var t=e?w["Zero"].sub(w["Two"].pow(8*e-1)):void 0,n=e?w["Two"].pow(8*e-1):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),et=R()((function(e){var t=e?w["Zero"]:void 0,n=e?w["Two"].pow(8*e):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),tt=ze(65),nt=ze(32),rt=ze(32),at=ze(32),ot=new Re["a"]("Address",(function(e){try{return ze(20).is(e)&&Object(j["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!ze(20).is(e))return Re["f"](e,t);var n;try{n=Object(j["getAddress"])(e)}catch(r){return Re["f"](e,t)}return n?Re["r"](n):Re["f"](e,t)}),Re["g"]),it=R()((function(e){return Re["s"]([Re["l"],e])}));function ct(e){return[Date.now(),e]}var st=R()((function(e){return Re["h"]([e,Re["n"](Re["t"]({signature:tt}))])})),ut=R()((function(e){return new Re["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Re["r"](t):Re["f"](t,n)}),Re["g"])})),lt=n("6f0b"),dt=n("9044"),pt=n("7738"),ft=n("d3fb"),bt=n("4b59"),yt=n("d792"),mt=n("4d8c"),vt=n.n(mt),ht=n("c707"),gt=n.n(ht);function Ot(e,t){return wt(e)||jt(e,t)||Tt(e,t)||kt()}function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wt(e){if(Array.isArray(e))return e}function _t(e){return St(e)||xt(e)||Tt(e)||Et()}function Et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(e,t){if(e){if("string"===typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}function xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function St(e){if(Array.isArray(e))return At(e)}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rt,Nt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Ct(e,t,n){return Object(dt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function Pt(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(_t(a),[o])}},o=D["a"],i=Object(M["a"])(-1);n&&(i=Object(I["a"])((function(){return r.blockNumber?Object(M["a"])(r.blockNumber):Ct(r,"block").pipe(Object(F["a"])(),Object(U["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(bt["a"])()),o=Object(pt["a"])(n,i).pipe(Object(F["a"])(),Object(yt["a"])((function(e){var n=Ot(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(ft["a"])(gt()(vt()(e),["blockNumber"]))})),Object(U["a"])(a),Object(B["a"])(Ye)));var c=i.pipe(Object(yt["a"])((function(){return Object(ft["a"])(t)})),Object($["a"])((function(e){return Ct(r,e)})),Object(U["a"])(a),Object(B["a"])(Ye));return Object(P["a"])(o,c)}function It(e){return Nt(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=lt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function Dt(e){var t=e.send;e.send=function(n,r){return Nt(this,void 0,void 0,f.a.mark((function a(){return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function Mt(e){return"unknown"!==e.name?e.name:e.chainId.toString()}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ut=Re["t"]({urls:Re["v"]([Re["q"],Re["c"](Re["q"])])}),Bt=Re["n"](Re["h"]([Re["t"]({matrixServerLookup:Re["q"],revealTimeout:Re["l"],settleTimeout:Re["l"],httpTimeout:Re["l"],discoveryRoom:Re["v"]([Re["q"],Re["k"]]),pfsRoom:Re["v"]([Re["q"],Re["k"]]),monitoringRoom:Re["v"]([Re["q"],Re["k"]]),pfs:Re["v"]([ot,Re["q"],Re["k"]]),pfsSafetyMargin:Re["l"],matrixExcessRooms:Re["l"],confirmationBlocks:Re["l"],monitoringReward:Re["v"]([Re["k"],et(32)]),logger:Re["i"]((Rt={},Lt(Rt,"",null),Lt(Rt,"trace",null),Lt(Rt,"debug",null),Lt(Rt,"info",null),Lt(Rt,"warn",null),Lt(Rt,"error",null),Rt)),caps:Re["n"](Re["p"](Re["q"],Re["b"])),fallbackIceServers:Re["c"](Ut)}),Re["m"]({matrixServer:Re["q"],subkey:Re["d"]})])),Ft=Re["n"](Re["m"](Object.assign(Object.assign({},Bt.type.types["0"].props),Bt.type.types["1"].props)));function $t(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(Mt(r),"_discovery"),pfsRoom:"raiden_".concat(Mt(r),"_path_finding"),monitoringRoom:"raiden_".concat(Mt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:null,logger:"info",caps:(n={},Lt(n,Se.NO_DELIVERY,!0),Lt(n,Se.NO_RECEIVE,!0),Lt(n,Se.NO_MEDIATE,!0),Lt(n,Se.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}]},t)}var qt,Ht=n("f49b"),Vt=n.n(Ht),Wt=n("3498"),Gt=n("6f95"),Zt=n("74c8"),Kt=n.n(Zt);function Xt(e){return Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t,n){return t&&Qt(e.prototype,t),n&&Qt(e,n),e}function Jt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}function en(e){return function(){var t,n=un(e);if(on()){var r=un(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return tn(this,t)}}function tn(e,t){return!t||"object"!==Xt(t)&&"function"!==typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){var t="function"===typeof Map?new Map:void 0;return rn=function(e){if(null===e||!cn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return an(e,arguments,un(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),sn(n,e)},rn(e)}function an(e,t,n){return an=on()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&sn(o,n.prototype),o},an.apply(null,arguments)}function on(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function sn(e,t){return sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sn(e,t)}function un(e){return un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},un(e)}(function(e){e["PFS_EMPTY_URL"]="A registered Pathfinding Service returned an empty service URL.",e["PFS_INVALID_URL"]="A registered Pathfinding Service returned an invalid service URL.",e["PFS_INVALID_INFO"]="Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.",e["PFS_NO_ROUTES_FOUND"]="No valid routes found.",e["PFS_ERROR_RESPONSE"]="Pathfinding Service request returned an error",e["PFS_DISABLED"]="Pathfinding Service is disabled and no direct route is available.",e["PFS_UNKNOWN_TOKEN_NETWORK"]="No open channels on this token network.",e["PFS_TARGET_OFFLINE"]="The requested target is offline.",e["PFS_TARGET_NO_RECEIVE"]="The requested target doesn't receive transfers.",e["PFS_LAST_IOU_REQUEST_FAILED"]="The request for the last IOU has failed.",e["PFS_IOU_SIGNATURE_MISMATCH"]="The signature of the last IOU did not match.",e["PFS_NO_ROUTES_BETWEEN_NODES"]="No route between nodes found.",e["CNL_INVALID_STATE"]="Invalid channel state.",e["CNL_TOKEN_NOT_FOUND"]="Could not find token for token network.",e["CNL_NO_OPEN_CHANNEL_FOUND"]="No open channel has been found.",e["CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND"]="No open or closing channel has been found.",e["CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND"]="No settleable or settling channel has been found.",e["CNL_APPROVE_TRANSACTION_FAILED"]="Token approve transaction failed.",e["CNL_OPENCHANNEL_FAILED"]="Token networks openChannel transaction failed.",e["CNL_SETTOTALDEPOSIT_FAILED"]="Token networks setTotalDeposit transaction failed.",e["CNL_CLOSECHANNEL_FAILED"]="Token networks closeChannel transaction failed.",e["CNL_SETTLECHANNEL_FAILED"]="Token networks settleChannel transaction failed.",e["CNL_UPDATE_NONCLOSING_BP_FAILED"]="updateNonClosingBalanceProof transaction failed.",e["CNL_ONCHAIN_UNLOCK_FAILED"]="on-chain unlock transaction failed.",e["XFER_EXPIRED"]="Transfer expired.",e["XFER_CHANNEL_CLOSED_PREMATURELY"]="Channel was closed before secret got reveiled or transfer unlocked.",e["XFER_REFUNDED"]="Transfer has been refunded.",e["XFER_INVALID_SECRETREQUEST"]="Invalid SecretRequest received",e["XFER_ALREADY_COMPLETED"]="Not waiting for transfer, it's already completed.",e["XFER_REGISTERSECRET_TX_FAILED"]="SecretRegistry.registerSecret transaction failed",e["TRNS_NO_MATRIX_SERVERS"]="Could not contact any Matrix servers.",e["TRNS_NO_VALID_USER"]="Could not find a user with a valid signature.",e["TRNS_NO_SERVERNAME"]="Could not get server name from Matrix server.",e["TRNS_MESSAGE_SIGNATURE_MISMATCH"]="Unable to decode message due to signature mismatch.",e["RDN_GENERAL_ERROR"]="An unknown error occured.",e["RDN_MINT_FAILED"]="Failed to mint tokens.",e["RDN_APPROVE_TRANSACTION_FAILED"]="Approve transaction has failed.",e["RDN_DEPOSIT_TRANSACTION_FAILED"]="Deposit transaction has failed.",e["RDN_TRANSFER_ONCHAIN_BALANCE_FAILED"]="Failed to transfer on-chain balance.",e["RDN_TRANSFER_ONCHAIN_TOKENS_FAILED"]="Failed to transfer on-chain tokens.",e["RDN_UNRECOGNIZED_NETWORK"]="No deploy info provided nor recognized network.",e["RDN_SIGNER_NOT_CONNECTED"]="The signing account is not connected to the provider.",e["RDN_ACCOUNT_NOT_FOUND"]="Account not found in provider.",e["RDN_STRING_ACCOUNT_INVALID"]="String account must be either a 0x-encoded address or private key.",e["RDN_TRANSACTION_REORG"]="Transaction has been mined but got removed by a reorg.",e["RDN_STATE_MIGRATION"]="Could not replace stored state with older, provided state.",e["DTA_NEGATIVE_NUMBER"]="Encountered negative number while encoding to HEX string.",e["DTA_NUMBER_TOO_LARGE"]="Encountered a number that is too large to be encoded.",e["DTA_ARRAY_LENGTH_DIFFRENCE"]="Expected length of HEX string differs from integer array input.",e["DTA_UNENCODABLE_DATA"]="Passed data is not a HEX string nor integer array."})(qt||(qt={}));var ln=Re["p"](Re["q"],Re["v"]([Re["q"],Re["l"],Re["d"],Re["k"]])),dn=function(e){Jt(n,e);var t=en(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yt(this,n),r=t.call(this,null!==e&&void 0!==e?e:qt.RDN_GENERAL_ERROR),r.details=a,r.name="RaidenError",r._code=void 0,Object.setPrototypeOf(nn(r),n.prototype),r}return zt(n,[{key:"code",get:function(){var e,t=this;return void 0===this._code&&(this._code=null!==(e=Kt()(qt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"),this._code}}]),n}(rn(Error)),pn=Re["h"]([Re["t"]({name:Re["q"]}),Re["m"]({message:Re["q"],stack:Re["q"],details:ln})]),fn=new Re["a"]("Error",(function(e){return"object"===Xt(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Gt["pipe"])(pn.decode(e),Object(Wt["map"])((function(e){return"details"in e?Object.assign(new dn(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){return gn(e)||hn(e)||vn(e)||mn()}function mn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vn(e,t){if(e){if("string"===typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function hn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gn(e){if(Array.isArray(e))return On(e)}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function jn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function wn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Re["t"](Object.assign(Object.assign(Object.assign({type:Re["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Re["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r};return Object.assign((function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)}),{codec:c,type:r,is:s},void 0!==i?{error:i}:null)}function _n(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:fn,c=wn(t,a,e),s=wn(n,o,e),u=wn(r,i,e,!0);return{request:c,success:s,failure:u}}function En(e){var t=function(t){return Vt()(t.meta,e,(function(e,t){return Qe.is(e)&&Qe.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Tn(e,t){var n=function(n){return jn([e.success,e.failure],n)&&En(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function xn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Tn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return kn(this,void 0,void 0,f.a.mark((function a(){return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?xn(e,t):Tn(e,t)),Object(U["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new dn(qt.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function An(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return Ze(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(yn(a.map((function(e){return bn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Rn,Nn=Re["t"]({amount:et(32),expiration:et(32),secrethash:nt},"Lock"),Cn=Re["t"]({chainId:et(32),tokenNetworkAddress:ot,channelId:et(32),nonce:et(8),transferredAmount:et(32),lockedAmount:et(32),locksroot:nt,messageHash:nt,signature:tt,sender:ot}),Pn=Re["t"]({tokenNetwork:ot,partner:ot}),In=wn("newBlock",Re["t"]({blockNumber:Re["l"]})),Dn=wn("tokenMonitored",Re["h"]([Re["t"]({token:ot,tokenNetwork:ot}),Re["m"]({fromBlock:Re["l"]})])),Mn=_n(Pn,"channel/open/request","channel/open/success","channel/open/failed",Re["m"]({settleTimeout:Re["l"],subkey:Re["d"],deposit:et(32)}),Re["t"]({id:Re["l"],settleTimeout:Re["l"],isFirstParticipant:Re["d"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Ln=wn("channel/monitor",Re["h"]([Re["t"]({id:Re["l"]}),Re["m"]({fromBlock:Re["l"]})]),Pn),Un=_n(Pn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Re["h"]([Re["t"]({deposit:et(32)}),Re["m"]({subkey:Re["d"]})]),Re["t"]({id:Re["l"],participant:ot,totalDeposit:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Bn=wn("channel/withdraw/success",Re["t"]({id:Re["l"],participant:ot,totalWithdraw:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),Pn),Fn=_n(Pn,"channel/close/request","channel/close/success","channel/close/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["t"]({id:Re["l"],participant:ot,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),$n=wn("channel/settleable",Re["t"]({settleableBlock:Re["l"]}),Pn),qn=_n(Pn,"channel/settle/request","channel/settle/success","channel/settle/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["h"]([Re["t"]({id:Re["l"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),Re["m"]({locks:Re["o"](Nn)})])),Hn=Re["n"](Re["t"]({userId:Re["q"],accessToken:Re["q"],deviceId:Re["q"],displayName:Re["q"]})),Vn=Re["t"]({address:ot}),Wn=wn("matrixSetup",Re["t"]({server:Re["q"],setup:Hn})),Gn=_n(Vn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Re["h"]([Re["t"]({userId:Re["q"],available:Re["d"],ts:Re["l"]}),Re["m"]({caps:Re["p"](Re["q"],Re["b"])})])),Zn=wn("matrixRoom",Re["t"]({roomId:Re["q"]}),Vn),Kn=wn("matrixRoomLeave",Re["t"]({roomId:Re["q"]}),Vn),Xn=wn("rtcChannel",Re["v"]([Re["u"],ut(RTCDataChannel)]),Vn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Rn||(Rn={}));var Yn=Re["n"](Re["t"]({message_identifier:et(8)})),Qn=Re["n"](Re["t"]({type:Re["j"](Rn.DELIVERED),delivered_message_identifier:et(8)})),zn=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.PROCESSED)}),Yn])),Jn=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.SECRET_REQUEST),payment_identifier:et(8),secrethash:nt,amount:et(32),expiration:et(32)}),Yn])),er=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.SECRET_REVEAL),secret:rt}),Yn])),tr=Re["n"](Re["h"]([Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),transferred_amount:et(32),locked_amount:et(32),locksroot:nt}),Yn])),nr=Re["n"](Re["t"]({route:Re["o"](ot)})),rr=Re["n"](Re["t"]({routes:Re["o"](nr)})),ar=Re["n"](Re["h"]([Re["t"]({payment_identifier:et(8),token:ot,recipient:ot,lock:Nn,target:ot,initiator:ot,metadata:rr}),tr])),or=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.LOCKED_TRANSFER)}),ar])),ir=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.REFUND_TRANSFER)}),ar])),cr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.UNLOCK),payment_identifier:et(8),secret:rt}),tr])),sr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.LOCK_EXPIRED),recipient:ot,secrethash:nt}),tr])),ur=Re["n"](Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),participant:ot,total_withdraw:et(32),nonce:et(8),expiration:et(32)})),lr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_REQUEST)}),ur,Yn])),dr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_CONFIRMATION)}),ur,Yn])),pr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Rn.WITHDRAW_EXPIRED)}),ur,Yn])),fr=Re["n"](Re["t"]({type:Re["j"](Rn.PFS_CAPACITY_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,other_participant:ot,updating_nonce:et(8),other_nonce:et(8),updating_capacity:et(32),other_capacity:et(32),reveal_timeout:et(32)})),br=Re["n"](Re["t"]({type:Re["j"](Rn.PFS_FEE_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,timestamp:Re["q"],fee_schedule:Re["t"]({cap_fees:Re["d"],imbalance_penalty:Re["v"]([Re["k"],Re["c"](Re["s"]([et(32),Je(32)]))]),proportional:Je(32),flat:Je(32)})})),yr=Re["n"](Re["t"]({type:Re["j"](Rn.MONITOR_REQUEST),balance_proof:Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),balance_hash:nt,additional_hash:nt,signature:tt}),monitoring_service_contract_address:ot,non_closing_participant:ot,non_closing_signature:tt,reward_amount:et(32)})),mr=Re["v"]([Qn,zn,Jn,er,or,ir,cr,sr,lr,dr,pr,fr,br,yr]),vr=_n(Re["t"]({address:ot,msgId:Re["q"]}),"message/send/request","message/send/success","message/send/failure",Re["t"]({message:Re["v"]([Re["q"],st(mr)])}),void 0),hr=wn("messageGlobalSend",Re["t"]({message:Re["v"]([Re["q"],st(mr)])}),Re["t"]({roomName:Re["q"]})),gr=wn("messageReceived",Re["h"]([Re["t"]({text:Re["q"],ts:Re["l"]}),Re["m"]({message:Re["v"]([mr,st(mr)]),userId:Re["q"],roomId:Re["q"]})]),Re["t"]({address:ot})),Or=Re["n"](Re["h"]([Re["t"]({result:Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),estimated_fee:Je(32)})))}),Re["m"]({feedback_token:Re["q"]})])),kr=Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),fee:Je(32)}))),jr=Re["n"](Re["t"]({address:ot,url:Re["q"],rtt:Re["l"],price:et(32),token:ot})),wr=Re["n"](Re["t"]({sender:ot,receiver:ot,amount:et(32),expiration_block:et(32),one_to_n_address:ot,chain_id:et(32)})),_r=Re["n"](Re["t"]({last_iou:st(wr)})),Er=Re["t"]({secrethash:nt,direction:Re["i"]({sent:null,received:null})}),Tr=_n(Er,"transfer/request","transfer/success","transfer/failure",Re["h"]([Re["t"]({tokenNetwork:ot,target:ot,value:et(32),paths:kr,paymentId:et(8)}),Re["m"]({secret:rt,expiration:Re["l"],initiator:ot})]),Re["m"]({balanceProof:Cn})),xr=wn("transferSigned",Re["t"]({message:st(or),fee:Je(32)}),Er),Sr=wn("transferProcessed",Re["t"]({message:st(zn)}),Er),Ar=wn("transferSecret",Re["t"]({secret:rt}),Er),Rr=_n(Er,"transferSecret/register/request","transferSecret/register/success","transferSecret/register/failure",Re["h"]([Re["t"]({secret:rt}),Re["m"]({subkey:Re["d"]})]),Re["t"]({secret:rt,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Nr=wn("transferSecretRequest",Re["t"]({message:st(Jn)}),Er),Cr=wn("transferSecretReveal",Re["t"]({message:st(er)}),Er),Pr=_n(Er,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Re["t"]({message:st(cr)})),Ir=wn("transferUnlockProcessed",Re["t"]({message:st(zn)}),Er),Dr=_n(Er,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Re["t"]({message:st(sr)})),Mr=wn("transferExpireProcessed",Re["t"]({message:st(zn)}),Er),Lr=wn("transferRefunded",Re["t"]({message:st(ir)}),Er),Ur=wn("transferClear",void 0,Er),Br=Re["t"]({tokenNetwork:ot,partner:ot,totalWithdraw:et(32),expiration:Re["l"]}),Fr=_n(Br,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Re["t"]({message:st(lr)}),Re["t"]({message:st(dr)})),$r=Re["t"]({tokenNetwork:ot,target:ot,value:et(32)}),qr=Re["t"]({tokenNetwork:ot,serviceAddress:ot}),Hr=_n($r,"path/find/request","path/find/success","path/find/failure",Re["m"]({paths:kr,pfs:Re["v"]([jr,Re["k"]])}),Re["t"]({paths:kr})),Vr=wn("pfsListUpdated",Re["t"]({pfsList:Re["o"](ot)})),Wr=wn("iouPersist",Re["t"]({iou:st(wr)}),qr),Gr=wn("iouClear",void 0,qr),Zr=wn("udcDeposited",et(32)),Kr=wn("raidenShutdown",Re["t"]({reason:Re["v"]([Re["j"](xe.STOP),Re["j"](xe.ACCOUNT_CHANGED),Re["j"](xe.NETWORK_CHANGED),fn])})),Xr=wn("raidenConfigUpdate",Ft),Yr=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:Kr,raidenConfigUpdate:Xr},r),a),o),i),c),Qr=[Yr.raidenShutdown,Yr.newBlock,Yr.matrixPresence.success,Yr.tokenMonitored],zr=[Mn.success,Un.success,Bn,Fn.success,qn.success,Rr.success],Jr=Re["v"]([Mn.success.codec,Un.success.codec,Bn.codec,Fn.success.codec,qn.success.codec,Rr.success.codec]);function ea(e){return Object.assign(Object.assign({},e),{version:0})}function ta(e,t){return ia(e)||oa(e,t)||ra(e,t)||na()}function na(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ra(e,t){if(e){if("string"===typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ia(e){if(Array.isArray(e))return e}function ca(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=ta(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function sa(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}function ua(e,t){return ba(e)||fa(e,t)||da(e,t)||la()}function la(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function da(e,t){if(e){if("string"===typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pa(e,t):void 0}}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ba(e){if(Array.isArray(e))return e}var ya={0:ea,1:ca,2:sa};function ma(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=0;o<=t;o++)Ze(o in ya,"missing migration for ".concat(o));for(var i=0,c=Object.entries(ya);i<c.length;i++){var s=ua(c[i],2),u=s[0],l=s[1],d=+u;if((null!==(n=null===e||void 0===e?void 0:e.version)&&void 0!==n?n:-1)===d-1&&!(d>t))try{e=Object.assign(l(e),{version:d})}catch(p){throw a.error("Error migrating state from version ".concat(d-1," to ").concat(d),e,p),p}}return e}var va=n("948b"),ha=n("ad02");function ga(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Oa(e,t){var n;if("boolean"===typeof e?e=e?w["One"]:w["Zero"]:"number"===typeof e&&(e=Object(j["bigNumberify"])(e)),"string"!==typeof e||Object(va["isHexString"])(e)||(e=Object(j["toUtf8Bytes"])(e)),Object(va["isArrayish"])(e)&&(e=Object(va["hexlify"])(e)),Qe.is(e)){if(e.lt(0))throw new dn(qt.DTA_NEGATIVE_NUMBER);if(e.gte(w["Two"].pow(8*t)))throw new dn(qt.DTA_NUMBER_TOO_LARGE);n=Object(va["hexZeroPad"])(Object(va["hexlify"])(e),t)}else{if("string"!==typeof e)throw new dn(qt.DTA_UNENCODABLE_DATA);if(Object(va["hexDataLength"])(e)!==t)throw new dn(qt.DTA_ARRAY_LENGTH_DIFFRENCE);n=e}return n}var ka,ja=function(e){return null!=e&&e["isLosslessNumber"]};function wa(e){return ha["parse"](e,(function(e,t){if(ga(e),ja(t))try{return t.valueOf()}catch(n){return Object(j["bigNumberify"])(t.toString())}return t}))}function _a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return ga(e),j["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return ha["stringify"](e,t,n)}(function(e){e["opening"]="opening",e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})(ka||(ka={}));var Ea,Ta=Re["n"](Re["h"]([Re["t"]({deposit:et(32)}),Re["m"]({locks:Re["o"](Nn),balanceProof:Cn,withdraw:et(32)})])),xa=Re["h"]([Re["n"](Re["t"]({own:Ta,partner:Ta})),Re["v"]([Re["n"](Re["t"]({state:Re["j"](ka.opening)})),Re["n"](Re["t"]({state:Re["v"]([Re["j"](ka.open),Re["j"](ka.closing)]),id:Re["l"],settleTimeout:Re["l"],openBlock:Re["l"],isFirstParticipant:Re["d"]})),Re["n"](Re["t"]({state:Re["v"]([Re["j"](ka.closed),Re["j"](ka.settleable),Re["j"](ka.settling)]),id:Re["l"],settleTimeout:Re["l"],openBlock:Re["l"],isFirstParticipant:Re["d"],closeBlock:Re["l"],closeParticipant:ot}))])]);(function(e){e["SENT"]="sent",e["RECEIVED"]="received"})(Ea||(Ea={}));var Sa,Aa=Re["n"](Re["h"]([Re["t"]({transfer:it(st(or)),fee:Je(32),partner:ot}),Re["m"]({secret:it(Re["t"]({value:rt,registerBlock:Re["l"]})),transferProcessed:it(st(zn)),refund:it(st(ir)),channelClosed:it(nt),secretRequest:it(st(Jn)),secretReveal:it(st(er)),unlock:it(st(cr)),lockExpired:it(st(sr)),unlockProcessed:it(st(zn)),lockExpiredProcessed:it(st(zn))})])),Ra=Re["n"](Re["p"](Re["q"],Aa));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Sa||(Sa={}));var Na=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ca=2,Pa=Re["n"](Re["t"]({address:ot,version:Re["j"](Ca),chainId:Re["l"],registry:ot,blockNumber:Re["l"],config:Ft,channels:Re["n"](Re["p"](Re["q"],Re["n"](Re["p"](Re["q"],xa)))),tokens:Re["n"](Re["p"](Re["q"],ot)),transport:Re["n"](Re["m"]({matrix:Re["n"](Re["h"]([Re["t"]({server:Re["q"]}),Re["m"]({setup:Hn,rooms:Re["n"](Re["p"](Re["q"],Re["c"](Re["q"])))})]))})),sent:Ra,received:Ra,path:Re["t"]({iou:Re["n"](Re["p"](Re["q"],Re["p"](Re["q"],st(wr))))}),pendingTxs:Re["o"](Jr)}));function Ia(e){return _a(Pa.encode(e),void 0,2)}function Da(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=wa(e));var r=ma(e,Ca,{log:n});try{return Xe(Pa,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r),a}}function Ma(e){var t,n=e.network,r=e.address,a=e.contractsInfo,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:r,version:Ca,chainId:n.chainId,registry:a.TokenNetworkRegistry.address,blockNumber:a.TokenNetworkRegistry.block_number,config:null!==(t=o.config)&&void 0!==t?t:{},channels:{},tokens:{},transport:{},sent:{},received:{},path:{iou:{}},pendingTxs:[]}}var La=Ma({network:Object(j["getNetwork"])("unspecified"),address:w["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:w["AddressZero"],block_number:0},ServiceRegistry:{address:w["AddressZero"],block_number:0},UserDeposit:{address:w["AddressZero"],block_number:0},SecretRegistry:{address:w["AddressZero"],block_number:0},MonitoringService:{address:w["AddressZero"],block_number:0}}}),Ua=function(e){return e&&"function"===typeof e.getItem},Ba=function(e,t,n,r,a){return Na(void 0,void 0,void 0,f.a.mark((function o(){var i,c,s,u,l,d,p,b,m,v,h;return f.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Ua(r)?(u=r,l=void 0):Ua(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=Da(l,{log:i})),!u){o.next=23;break}return p="raiden_".concat(Mt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(p);case 8:if(b=o.sent,!b){o.next=20;break}if(m=Da(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new dn(qt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:v=Ce()((function(e){u.setItem(p,Ia(e))}),1e3,{maxWait:5e3}),c=v,s=function(){return v.flush()};case 23:return d||(d=Ma({network:e,address:n,contractsInfo:t})),h=$t({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:h});case 26:case"end":return o.stop()}}),o)})))},Fa=n("9bf7"),$a=n.n(Fa),qa=n("76e3"),Ha=n.n(qa),Va=n("9aca"),Wa=n.n(Va),Ga=n("0cdc"),Za=n.n(Ga);function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xa(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),Ka({},o,s)))}}return r}}function Ya(e){return eo(e)||Ja(e)||za(e)||Qa()}function Qa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function za(e,t){if(e){if("string"===typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?to(e,t):void 0}}function Ja(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function eo(e){if(Array.isArray(e))return to(e)}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ro(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var ao=An(La.blockNumber).handle(In,(function(e,t){ro(e);var n=t.payload;return n.blockNumber})),oo=An(La.tokens).handle(Dn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return Object.assign(Object.assign({},e),no({},r,a))}));function io(e,t){var n=[t.meta.tokenNetwork,t.meta.partner];if(Ha()(n,e))return e;var r={state:ka.opening,own:{deposit:w["Zero"]},partner:{deposit:w["Zero"]}};return Wa()(n,r,e)}function co(e,t){var n=[t.meta.tokenNetwork,t.meta.partner];if(Za()(0,[].concat(n,["openBlock"]),e)>=t.payload.txBlock||!t.payload.confirmed)return e;var r={state:ka.open,own:{deposit:w["Zero"]},partner:{deposit:w["Zero"]},id:t.payload.id,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock};return Wa()(n,r,e)}function so(e,t){var n=[t.meta.tokenNetwork,t.meta.partner];return Ha()([].concat(n,["state"]),e)!==ka.opening?e:$a()(n,e)}function uo(e,t){if(!t.payload.confirmed)return e;var n=[t.meta.tokenNetwork,t.meta.partner],r=Ha()(n,e);if(!r||r.state!==ka.open||r.id!==t.payload.id)return e;var a=Bn.is(t)?"withdraw":"deposit",o=Bn.is(t)?t.payload.totalWithdraw:t.payload.totalDeposit,i=t.payload.participant===t.meta.partner,c=i?"partner":"own",s=i?r.partner:r.own;return r=Object.assign(Object.assign({},r),no({},c,Object.assign(Object.assign({},s),no({},a,o)))),Wa()(n,r,e)}function lo(e,t){var n=[t.meta.tokenNetwork,t.meta.partner],r=Ha()(n,e);if(!r||r.state!==ka.open&&r.state!==ka.closing||r.id!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===ka.open)r=Object.assign(Object.assign({},r),{state:ka.closing});else{if(!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:ka.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Wa()(n,r,e)}function po(e,t){var n=[t.meta.tokenNetwork,t.meta.partner],r=Ha()(n,e);if(!r)return e;if(Fn.request.is(t)&&r.state===ka.open)r=Object.assign(Object.assign({},r),{state:ka.closing});else if(qn.request.is(t)&&r.state===ka.settleable)r=Object.assign(Object.assign({},r),{state:ka.settling});else{if(!$n.is(t)||r.state!==ka.closed)return e;r=Object.assign(Object.assign({},r),{state:ka.settleable})}return Wa()(n,r,e)}function fo(e,t){var n=[t.meta.tokenNetwork,t.meta.partner],r=Ha()(n,e);return r&&r.state!==ka.opening&&r.state!==ka.open&&r.state!==ka.closing&&r.id===t.payload.id?void 0===t.payload.confirmed&&r.state!==ka.settling?Wa()(n,Object.assign(Object.assign({},r),{state:ka.settling}),e):t.payload.confirmed?$a()(n,e):e:e}var bo=An(La.channels).handle(Mn.request,io).handle(Mn.success,co).handle(Mn.failure,so).handle([Un.success,Bn],uo).handle([Fn.request,$n,qn.request],po).handle(Fn.success,lo).handle(qn.success,fo),yo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:La.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(jn(zr,t)){if(void 0===t.payload.confirmed)return[].concat(Ya(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},mo=Xa({blockNumber:ao,tokens:oo,channels:bo,pendingTxs:yo},La),vo=mo,ho=n("2890"),go=n.n(ho);function Oo(e){return _o(e)||wo(e)||jo(e)||ko()}function ko(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jo(e,t){if(e){if("string"===typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function wo(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _o(e){if(Array.isArray(e))return Eo(e)}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var To,xo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},So=An(La.transport).handle(Wn,(function(e,t){var n,r=Object.assign({},e.matrix),a=(r.rooms,xo(r,["rooms"]));return Object.assign(Object.assign({},e),{matrix:Object.assign(Object.assign({},(null===(n=e.matrix)||void 0===n?void 0:n.server)!==t.payload.server?a:e.matrix),t.payload)})})).handle(Zn,(function(e,t){var n=["matrix","rooms",t.meta.address];return Wa()(n,[t.payload.roomId].concat(Oo(Za()([],n,e).filter((function(e){return e!==t.payload.roomId})))),e)})).handle(Kn,(function(e,t){var n=["matrix","rooms",t.meta.address];return e=Wa()(n,Za()([],n,e).filter((function(e){return e!==t.payload.roomId})),e),go()(Ha()(n,e))&&(e=$a()(n,e)),e})),Ao=Xa({transport:So},La),Ro=Ao,No=n("3b2b");function Co(e){return Co="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Io,Do,Mo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Lo=(To={},Po(To,Rn.DELIVERED,12),Po(To,Rn.PROCESSED,0),Po(To,Rn.SECRET_REQUEST,3),Po(To,Rn.SECRET_REVEAL,11),Po(To,Rn.LOCKED_TRANSFER,7),Po(To,Rn.REFUND_TRANSFER,8),Po(To,Rn.UNLOCK,4),Po(To,Rn.LOCK_EXPIRED,13),Po(To,Rn.WITHDRAW_REQUEST,15),Po(To,Rn.WITHDRAW_CONFIRMATION,16),Po(To,Rn.WITHDRAW_EXPIRED,17),Po(To,Rn.PFS_CAPACITY_UPDATE,-1),Po(To,Rn.PFS_FEE_UPDATE,-1),Po(To,Rn.MONITOR_REQUEST,-1),To);function Uo(e){var t=e.routes.map((function(e){return Object(j["keccak256"])(j["RLP"].encode(e.route))}));return Object(j["keccak256"])(j["RLP"].encode(t))}function Bo(e,t,n){return e.isZero()&&t.isZero()&&n===w["HashZero"]?w["HashZero"]:Object(j["keccak256"])(Object(va["concat"])([Oa(e,32),Oa(t,32),Oa(n,32)]))}function Fo(e){switch(e.type){case Rn.LOCKED_TRANSFER:case Rn.REFUND_TRANSFER:var t=Object(va["concat"])([Oa(Lo[e.type],1),Oa(e.message_identifier,8),Oa(e.payment_identifier,8),Oa(e.lock.expiration,32),Oa(e.token,20),Oa(e.recipient,20),Oa(e.target,20),Oa(e.initiator,20),Oa(e.lock.secrethash,32),Oa(e.lock.amount,32)]);return e.type===Rn.LOCKED_TRANSFER&&(t=Object(va["concat"])([t,Uo(e.metadata)])),Object(j["keccak256"])(t);case Rn.UNLOCK:return Object(j["keccak256"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(e.message_identifier,8),Oa(e.payment_identifier,8),Oa(e.secret,32)]));case Rn.LOCK_EXPIRED:return Object(j["keccak256"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(e.message_identifier,8),Oa(e.recipient,20),Oa(e.secrethash,32)]))}}function $o(e){var t;switch(e.type){case Rn.DELIVERED:return Object(va["hexlify"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(0,3),Oa(e.delivered_message_identifier,8)]));case Rn.PROCESSED:return Object(va["hexlify"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(0,3),Oa(e.message_identifier,8)]));case Rn.LOCKED_TRANSFER:case Rn.REFUND_TRANSFER:case Rn.UNLOCK:case Rn.LOCK_EXPIRED:var n=Fo(e),r=Bo(e.transferred_amount,e.locked_amount,e.locksroot);return Object(va["hexlify"])(Object(va["concat"])([Oa(e.token_network_address,20),Oa(e.chain_id,32),Oa(Io.BALANCE_PROOF,32),Oa(e.channel_identifier,32),Oa(r,32),Oa(e.nonce,32),Oa(n,32)]));case Rn.SECRET_REQUEST:return Object(va["hexlify"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(0,3),Oa(e.message_identifier,8),Oa(e.payment_identifier,8),Oa(e.secrethash,32),Oa(e.amount,32),Oa(e.expiration,32)]));case Rn.SECRET_REVEAL:return Object(va["hexlify"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(0,3),Oa(e.message_identifier,8),Oa(e.secret,32)]));case Rn.WITHDRAW_REQUEST:case Rn.WITHDRAW_CONFIRMATION:return Object(va["hexlify"])(Object(va["concat"])([Oa(e.token_network_address,20),Oa(e.chain_id,32),Oa(Io.WITHDRAW,32),Oa(e.channel_identifier,32),Oa(e.participant,20),Oa(e.total_withdraw,32),Oa(e.expiration,32)]));case Rn.WITHDRAW_EXPIRED:return Object(va["hexlify"])(Object(va["concat"])([Oa(Lo[e.type],1),Oa(0,3),Oa(e.nonce,32),Oa(e.message_identifier,8),Oa(e.token_network_address,20),Oa(e.chain_id,32),Oa(Io.WITHDRAW,32),Oa(e.channel_identifier,32),Oa(e.participant,20),Oa(e.total_withdraw,32),Oa(e.expiration,32)]));case Rn.PFS_CAPACITY_UPDATE:return Object(va["hexlify"])(Object(va["concat"])([Oa(e.canonical_identifier.chain_identifier,32),Oa(e.canonical_identifier.token_network_address,20),Oa(e.canonical_identifier.channel_identifier,32),Oa(e.updating_participant,20),Oa(e.other_participant,20),Oa(e.updating_nonce,8),Oa(e.other_nonce,8),Oa(e.updating_capacity,32),Oa(e.other_capacity,32),Oa(e.reveal_timeout,32)]));case Rn.PFS_FEE_UPDATE:return Object(va["hexlify"])(Object(va["concat"])([Oa(e.canonical_identifier.chain_identifier,32),Oa(e.canonical_identifier.token_network_address,20),Oa(e.canonical_identifier.channel_identifier,32),Oa(e.updating_participant,20),Oa(e.fee_schedule.cap_fees,1),Oa(e.fee_schedule.flat,32),Oa(e.fee_schedule.proportional,32),Object(No["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Oa(e.timestamp,19)]));case Rn.MONITOR_REQUEST:return Object(va["hexlify"])(Object(va["concat"])([Oa(e.monitoring_service_contract_address,20),Oa(e.balance_proof.chain_id,32),Oa(Io.MS_REWARD,32),Oa(e.balance_proof.token_network_address,20),Oa(e.non_closing_participant,20),Oa(e.non_closing_signature,65),Oa(e.reward_amount,32)]))}}function qo(e){return tt.is(e.signature)}function Ho(e){return Object(j["verifyMessage"])(Object(va["arrayify"])($o(e)),e.signature)}function Vo(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,messageHash:Fo(e),signature:e.signature,sender:Ho(e)}}function Wo(e){return _a("signature"in e?st(mr).encode(e):mr.encode(e))}function Go(e){var t=wa(e);return Ze(t&&"object"===Co(t)&&"type"in t&&Object.values(Rn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Xe("signature"in t?st(mr):mr,t)}function Zo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return Mo(this,void 0,void 0,f.a.mark((function n(){var a;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!qo(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(va["arrayify"])($o(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function Ko(e){return function(t){return gr.is(t)&&(Array.isArray(e)?Re["v"](e).is(t.payload.message):e.is(t.payload.message))}}function Xo(e,t){return zo(e)||Qo(e,t)||ti(e,t)||Yo()}function Yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zo(e){if(Array.isArray(e))return e}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=ti(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function ti(e,t){if(e){if("string"===typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e){var t,n=[],r=ei(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Oa(a.expiration,32),Oa(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(j["keccak256"])(Object(va["concat"])(n))}function ai(e){return Object(j["sha256"])(e)}function oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(va["hexlify"])(Object(j["randomBytes"])(e))}function ii(){return Object(j["bigNumberify"])(Date.now())}function ci(){return Object(j["bigNumberify"])(Date.now())}function si(e){return function(t){return t[e]?t[e][0]:void 0}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(Io||(Io={}));var ui,li=(Do={},Jo(Do,Sa.expired,si("lockExpiredProcessed")),Jo(Do,Sa.unlocked,si("unlockProcessed")),Jo(Do,Sa.expiring,si("lockExpired")),Jo(Do,Sa.unlocking,si("unlock")),Jo(Do,Sa.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Jo(Do,Sa.revealed,si("secretReveal")),Jo(Do,Sa.requested,si("secretRequest")),Jo(Do,Sa.closed,si("channelClosed")),Jo(Do,Sa.refunded,si("refund")),Jo(Do,Sa.received,si("transferProcessed")),Jo(Do,Sa.pending,si("transfer")),Do);function di(e){for(var t,n,r,a,o=new Date(e.transfer[0]),i=o,c=Sa.pending,s=0,u=Object.entries(li);s<u.length;s++){var l=Xo(u[s],2),d=l[0],p=l[1],f=p(e);if(void 0!==f){c=d,i=new Date(f);break}}var b=e.transfer[1],y=b.lock.amount.sub(e.fee),m=e.secretRequest&&e.secretRequest[1].amount.lt(y),v=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(m||e.refund||e.lockExpired||e.channelClosed)&&void 0,h=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{secrethash:b.lock.secrethash,direction:"sent",status:c,initiator:b.initiator,partner:b.recipient,target:b.target,metadata:b.metadata,paymentId:b.payment_identifier,chainId:b.chain_id.toNumber(),token:b.token,tokenNetwork:b.token_network_address,channelId:b.channel_identifier,value:y,fee:e.fee,amount:b.lock.amount,expirationBlock:b.lock.expiration.toNumber(),startedAt:o,changedAt:i,success:v,completed:h}}function pi(e,t){return yi(e)||bi(e,t)||hi(e,t)||fi()}function fi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function yi(e){if(Array.isArray(e))return e}function mi(e){return Oi(e)||gi(e)||hi(e)||vi()}function vi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hi(e,t){if(e){if("string"===typeof e)return ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}function gi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Oi(e){if(Array.isArray(e))return ki(e)}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wi=(ui={},ji(ui,Ea.SENT,"own"),ji(ui,Ea.RECEIVED,"partner"),ui);function _i(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Rr.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),ji({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),ji({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:ct({value:t.payload.secret,registerBlock:u})})))))),e}function Ei(e,t){var n,r,a,o=t.payload.message,i=o.lock,c=i.secrethash,s=t.meta.direction===Ea.SENT?o.recipient:Ho(o),u=wi[t.meta.direction];if(c in e[t.meta.direction])return e;var l=["channels",o.token_network_address,s],d=Ha()(l,e);if(!d)return e;var p=[].concat(mi(null!==(n=d[u].locks)&&void 0!==n?n:[]),[i]),f=ri(p);if(o.locksroot!==f||!o.nonce.eq((d[u].balanceProof?d[u].balanceProof.nonce:w["Zero"]).add(1))||!o.transferred_amount.eq(d[u].balanceProof?d[u].balanceProof.transferredAmount:w["Zero"])||!o.locked_amount.eq((null!==(a=null===(r=d[u].balanceProof)||void 0===r?void 0:r.lockedAmount)&&void 0!==a?a:w["Zero"]).add(i.amount)))return e;d=Object.assign(Object.assign({},d),ji({},u,Object.assign(Object.assign({},d[u]),{locks:p,balanceProof:Vo(o)})));var b={transfer:ct(o),fee:t.payload.fee,partner:s};return e=Wa()(l,d,e),e=Wa()([t.meta.direction,c],b,e),e}function Ti(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),ji({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),ji({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:ct(t.payload.message)}))))):e}function xi(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),ji({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),ji({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:ct(t.payload.message)})))))}function Si(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=wi[t.meta.direction],c=a.lock,s=["channels",a.token_network_address,o],u=Ha()(s,e);if(!u||!u[i].locks||!u[i].balanceProof)return e;var l=u[i].locks.filter((function(e){return e.secrethash!==r})),d=ri(l);if(n.locksroot!==d||!u[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(u[i].balanceProof.transferredAmount.add(c.amount))||!n.locked_amount.eq(u[i].balanceProof.lockedAmount.sub(c.amount)))return e;u=Object.assign(Object.assign({},u),ji({},i,Object.assign(Object.assign({},u[i]),{locks:l,balanceProof:Vo(n)})));var p=Object.assign(Object.assign({},e[t.meta.direction][r]),{unlock:ct(n)});return e=Wa()(s,u,e),e=Wa()([t.meta.direction,r],p,e),e}function Ai(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock||e[t.meta.direction][r].lockExpired)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=wi[t.meta.direction],c=a.lock,s=["channels",a.token_network_address,o],u=Ha()(s,e);if(!u||!u[i].locks||!u[i].balanceProof)return e;var l=u[i].locks.filter((function(e){return e.secrethash!==r})),d=ri(l);if(n.locksroot!==d||!u[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(u[i].balanceProof.transferredAmount)||!n.locked_amount.eq(u[i].balanceProof.lockedAmount.sub(c.amount)))return e;u=Object.assign(Object.assign({},u),ji({},i,Object.assign(Object.assign({},u[i]),{locks:l,balanceProof:Vo(n)})));var p=Object.assign(Object.assign({},e[t.meta.direction][r]),{lockExpired:ct(n)});return e=Wa()(s,u,e),e=Wa()([t.meta.direction,r],p,e),e}function Ri(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Sr.is(t))n="transferProcessed";else if(Ir.is(t))n="unlockProcessed";else if(Mr.is(t))n="lockExpiredProcessed";else{if(!Lr.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),ji({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),ji({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),ji({},n,ct(t.payload.message)))))))}function Ni(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=pi(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),ji({},i,Object.assign(Object.assign({},c),{channelClosed:ct(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var p=pi(d[l],2),f=p[0],b=p[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),ji({},f,Object.assign(Object.assign({},b),{channelClosed:ct(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Ci(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?(e=$a()([t.meta.direction,n],e),e):e}function Pi(e,t){var n=t.payload.message,r=["channels",t.meta.tokenNetwork,t.meta.partner],a=Ha()(r,e);if(!a||a.state!==ka.open)return e;var o=a.own.balanceProof||{chainId:n.chain_id,tokenNetworkAddress:t.meta.tokenNetwork,channelId:n.channel_identifier,nonce:w["Zero"],transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"],messageHash:w["HashZero"],signature:Object(j["hexlify"])(Ae),sender:e.address};return n.nonce.eq(o.nonce.add(1))&&n.expiration.gt(e.blockNumber)&&(a=Object.assign(Object.assign({},a),{own:Object.assign(Object.assign({},a.own),{balanceProof:Object.assign(Object.assign({},o),{nonce:n.nonce})})}),e=Wa()(r,a,e)),e}var Ii=An(La).handle([Ar,Rr.success],_i).handle(xr,Ei).handle([Sr,Ir,Mr,Lr],Ri).handle(Nr,Ti).handle(Cr,xi).handle(Pr.success,Si).handle(Dr.success,Ai).handle(Fn.success,Ni).handle(Ur,Ci).handle(Fr.success,Pi),Di=Ii,Mi=An(La.path).handle(Wr,(function(e,t){var n=["iou",t.meta.tokenNetwork,t.meta.serviceAddress];return Wa()(n,t.payload.iou,e)})).handle(Gr,(function(e,t){var n=["iou",t.meta.tokenNetwork,t.meta.serviceAddress];return $a()(n,e)})),Li=Xa({path:Mi},La),Ui=Li;function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e,t){return Wi(e)||Vi(e,t)||qi(e,t)||$i()}function $i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qi(e,t){if(e){if("string"===typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wi(e){if(Array.isArray(e))return e}var Gi=An(La).handle(Xr,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=Fi(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),Bi({},c,s)):c in r&&(r=$a()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),Zi={configReducer:Gi,channelsReducer:vo,transportReducer:Ro,transfersReducer:Di,servicesReducer:Ui},Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:La,t=arguments.length>1?arguments[1]:void 0;return Object.values(Zi).reduce((function(e,n){return n(e,t)}),e)},Xi=n("a744"),Yi=n("742d"),Qi=n("8ef6"),zi=n("9f2d"),Ji=n("f59d"),ec=n("a0ac"),tc=n.n(ec),nc=n("69dd");function rc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(nc["a"])())}}function ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oc=R()((function(e){return e.pipe(Object(B["a"])(Gn.success.is),Object(Yi["a"])((function(e,t){return Object.assign(Object.assign({},e),ac({},t.meta.address,t))}),{}),Object(bt["a"])(),Object(Xi["a"])({}))})),ic=n("808d"),cc=n("5e53"),sc=n("744c"),uc=n("c575"),lc=n("66aa"),dc=n("b7d7"),pc=n("6863"),fc=n("e95d"),bc=n("2313"),yc=n("fcf1"),mc=n("b389"),vc=n("c4cc"),hc=n("0ca2"),gc=n("13ea"),Oc=n.n(gc),kc=n("8358"),jc=n("ddfd"),wc=n("3e18"),_c=n("2593"),Ec=n.n(_c),Tc=n("50ca"),xc=n.n(Tc);function Sc(e){var t,n,r,a,o,i,c,s,u,l,d=w["Zero"];if(e.state!==ka.open)return{ownDeposit:d,ownWithdraw:d,ownTransferred:d,ownLocked:d,ownBalance:d,ownCapacity:d,partnerDeposit:d,partnerWithdraw:d,partnerTransferred:d,partnerLocked:d,partnerBalance:d,partnerCapacity:d};var p=null!==(t=e.own.withdraw)&&void 0!==t?t:d,f=null!==(n=e.partner.withdraw)&&void 0!==n?n:d,b=null!==(a=null===(r=e.own.balanceProof)||void 0===r?void 0:r.transferredAmount)&&void 0!==a?a:d,y=null!==(i=null===(o=e.partner.balanceProof)||void 0===o?void 0:o.transferredAmount)&&void 0!==i?i:d,m=null!==(s=null===(c=e.own.balanceProof)||void 0===c?void 0:c.lockedAmount)&&void 0!==s?s:d,v=null!==(l=null===(u=e.partner.balanceProof)||void 0===u?void 0:u.lockedAmount)&&void 0!==l?l:d,h=y.sub(b),g=b.sub(y),O=e.own.deposit.sub(p).sub(m).add(h),k=e.partner.deposit.sub(f).sub(v).add(g);return{ownDeposit:e.own.deposit,ownWithdraw:p,ownTransferred:b,ownLocked:m,ownBalance:h,ownCapacity:O,partnerDeposit:e.partner.deposit,partnerWithdraw:f,partnerTransferred:y,partnerLocked:v,partnerBalance:g,partnerCapacity:k}}function Ac(e,t,n){var r=n.log;return function(n){return n.pipe(Object(vc["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(n){return Object(ft["a"])(n.wait()).pipe(Object(U["a"])((function(a){if(!a.status)throw new dn(t,{transactionHash:n.hash});return r.debug("".concat(e,' tx "').concat(n.hash,'" successfuly mined!')),n.hash})))})))}}var Rc=n("a0df"),Nc=n("31a7"),Cc=n("c998"),Pc=n("b4cc"),Ic=n("0ff6"),Dc=n("4e0b2");function Mc(e){return Bc(e)||Uc(e)||Hc(e)||Lc()}function Lc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Bc(e){if(Array.isArray(e))return Vc(e)}function Fc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $c(e,t){return Gc(e)||Wc(e,t)||Hc(e,t)||qc()}function qc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hc(e,t){if(e){if("string"===typeof e)return Vc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vc(e,t):void 0}}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gc(e){if(Array.isArray(e))return e}var Zc=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Kc=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},Nc.contracts),Ic.contracts);case"ropsten":return Object.assign(Object.assign({},Rc.contracts),Pc.contracts);case"goerli":return Object.assign(Object.assign({},Cc.contracts),Dc.contracts);default:throw new dn(qt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Xc(e,t){var n,r;return Zc(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(Mt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(j["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(j["sha256"])(c),u=new jc["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Yc=function(e,t,n){return Zc(void 0,void 0,void 0,f.a.mark((function r(){var a,o,i,c,s;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!kc["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof jc["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new dn(qt.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!ot.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new dn(qt.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!at.is(e)){r.next=37;break}a=new jc["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new dn(qt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Xc,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Qc=function(e){return e.pipe(rc("sent"),Object(wc["a"])((function(e){return Object(ft["a"])(Object.entries(e))})),Object(Yi["a"])((function(e,t){var n=e.acc,r=$c(t,2),a=r[0],o=r[1];return n[a]===o?{acc:n}:{acc:Object.assign(Object.assign({},n),Fc({},a,o)),changed:o}}),{acc:{}}),Object(q["a"])("changed"),Object(B["a"])(Ye),Object(U["a"])(di))},zc=function(e,t,n){return xc()(e,(function(e,r,a){var o=Sc(r),i=o.ownDeposit,c=o.partnerDeposit,s=o.ownBalance,u=o.ownCapacity;e[a]=Object.assign(Object.assign({state:r.state},Ec()(r,["id","settleTimeout","openBlock","closeBlock"])),{token:t,tokenNetwork:n,partner:a,ownDeposit:i,partnerDeposit:c,balance:s,capacity:u})}))},Jc=function(e){return xc()(e.channels,(function(t,n,r){var a=Kt()(e.tokens,(function(e){return e===r}));a&&(t[a]=zc(n,a,r))}))};function es(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function ts(e,t){return e.signer===t?e:e.connect(t)}function ns(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Zc(this,void 0,void 0,f.a.mark((function a(){var i,c,s;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Mc(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new dn(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,Ze(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new dn(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function rs(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Zc(this,void 0,void 0,f.a.mark((function t(){var i,c;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(rc("state","blockNumber"),Object(yc["a"])(a),Object(B["a"])((function(e){var t=$c(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(fc["a"])((function(e){var t=$c(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(I["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(U["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new dn(qt.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(Ye)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var as=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function os(e){return ss(e)||cs(e)||ds(e)||is()}function is(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ss(e){if(Array.isArray(e))return ps(e)}function us(e,t){return bs(e)||fs(e,t)||ds(e,t)||ls()}function ls(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ds(e,t){if(e){if("string"===typeof e)return ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ps(e,t):void 0}}function ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bs(e){if(Array.isArray(e))return e}function ys(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ms(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(I["a"])(e).pipe(Object(lc["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(ic["a"])(t):Object(cc["a"])(e)})))})))}var vs=function(e,t,n){ys(e),ys(t);var r=n.provider;return ms((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(P["a"])(Object(M["a"])(e),Ct(r,"block"))})),Object(U["a"])((function(e){return In({blockNumber:e})})))},hs=function(e,t,n){ys(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(dc["a"])(1),Object($["a"])((function(e){var t=j["defaultAbiCoder"].encode(["address"],[r]);return Oc()(e.tokens)?ms((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(ft["a"])(e)})),Object(U["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(sc["a"])(ms((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(ft["a"])),ms((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(ft["a"]))).pipe(Object(dc["a"])(1),Object(pc["a"])(Dn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(ft["a"])(Object.entries(e.tokens).map((function(e){var t=us(e,2),n=t[0],r=t[1];return Dn({token:n,tokenNetwork:r})})))})))},gs=function(e,t){return ys(e),t.pipe(Object(F["a"])(),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t.channels);case 1:if(!(n<r.length)){e.next=16;break}a=us(r[n],2),o=a[0],i=a[1],c=0,s=Object.entries(i);case 4:if(!(c<s.length)){e.next=13;break}if(u=us(s[c],2),l=u[0],d=u[1],d.state!==ka.opening){e.next=8;break}return e.abrupt("continue",10);case 8:return e.next=10,Ln({id:d.id},{tokenNetwork:o,partner:l});case 10:c++,e.next=4;break;case 13:n++,e.next=1;break;case 16:case"end":return e.stop()}}),e)}))))},Os=function(e,t,n){ys(e),ys(t);var r=n.address,a=n.network,o=n.provider;return ms((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(U["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(uc["a"])(o.pollingInterval).pipe(Object(fc["a"])((function(){return Object(P["a"])(e?ms((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?D["a"]:Object(M["a"])(Kr({reason:xe.ACCOUNT_CHANGED}))}))):D["a"],ms((function(){return It(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(M["a"])(Kr({reason:xe.NETWORK_CHANGED})):D["a"]}))))})))})))},ks=function(e,t,n){ys(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(B["a"])(jn(Dn)),Object(bc["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(fc["a"])((function(e){var t=a(e.payload.tokenNetwork);return Pt(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(M["a"])(e.payload.fromBlock):void 0).pipe(Object(B["a"])((function(e){var t=us(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(U["a"])((function(e){var n=us(e,5),a=n[0],o=n[1],i=n[2],c=n[3],s=n[4];return Mn.success({id:a.toNumber(),settleTimeout:c.toNumber(),isFirstParticipant:r===o,txHash:s.transactionHash,txBlock:s.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===o?i:o})})))})))})))},js=function(e){return e.pipe(Object(B["a"])(jn(Mn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(U["a"])((function(e){return Ln({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))},ws=function(e,t,n){var r=n.getTokenNetworkContract;return e.pipe(Object(B["a"])(jn(Ln)),Object(bc["a"])((function(e){return"".concat(e.payload.id,"#").concat(e.meta.partner,"@").concat(e.meta.tokenNetwork)})),Object($["a"])((function(e){return e.pipe(Object(fc["a"])((function(e){var n=e.meta,a=n.tokenNetwork,o=n.partner,i=r(a),c=i.filters.ChannelNewDeposit(e.payload.id,null,null),s=i.filters.ChannelWithdraw(e.payload.id,null,null),u=i.filters.ChannelClosed(e.payload.id,null,null,null),l=i.filters.ChannelSettled(e.payload.id,null,null,null,null),d={address:i.address,topics:[[c.topics[0],s.topics[0],u.topics[0],l.topics[0]],[l.topics[1]]]};function p(e,t){var n=t[t.length-1];if(!n||!n.topics||!e.topics)return!1;var r=e.topics[0];return Array.isArray(r)?r.includes(n.topics[0]):r===n.topics[0]}return Pt(i,[d],e.payload.fromBlock?Object(M["a"])(e.payload.fromBlock):void 0).pipe(Object(yc["a"])(t.pipe(Object(q["a"])("channels"),Object(Xi["a"])({}))),Object(U["a"])((function(t){var n,r,i,d=us(t,2),f=d[0],b=d[1];if(p(c,f)){var y=us(f,4),m=y[0],v=y[1],h=y[2],g=y[3];return Un.success({id:m.toNumber(),participant:v,totalDeposit:h,txHash:g.transactionHash,txBlock:g.blockNumber,confirmed:void 0},e.meta)}if(p(s,f)){var O=us(f,4),k=O[0],j=O[1],w=O[2],_=O[3];return Bn({id:k.toNumber(),participant:j,totalWithdraw:w,txHash:_.transactionHash,txBlock:_.blockNumber,confirmed:void 0},e.meta)}if(p(u,f)){var E=us(f,5),T=E[0],x=E[1],S=E[4];return Fn.success({id:T.toNumber(),participant:x,txHash:S.transactionHash,txBlock:S.blockNumber,confirmed:void 0},e.meta)}if(p(l,f)){var A=us(f,6),R=A[0],N=A[5];return qn.success({id:R.toNumber(),txHash:N.transactionHash,txBlock:N.blockNumber,confirmed:void 0,locks:null===(i=null===(r=null===(n=b[a])||void 0===n?void 0:n[o])||void 0===r?void 0:r.partner)||void 0===i?void 0:i.locks},e.meta)}})),Object(B["a"])(Ye),Object(Qi["a"])(tc()(qn.success.is),!0))})))})))},_s=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(jn(Mn.request)),Object(yc["a"])(t,u),Object($["a"])((function(t){var n,u,l,d=us(t,3),p=d[0],f=d[1],b=d[2],y=b.settleTimeout,m=b.subkey,v=p.meta,h=v.tokenNetwork,g=v.partner,O=null===(u=null===(n=f.channels[h])||void 0===n?void 0:n[g])||void 0===u?void 0:u.state;if(O!==ka.opening)return Object(M["a"])(Mn.failure(new dn(qt.CNL_INVALID_STATE,{state:O}),p.meta));var k=es({signer:a,address:o,main:i},null!==(l=p.payload.subkey)&&void 0!==l?l:m),j=k.signer,w=ts(s(h),j),_=!p.payload.deposit||p.payload.deposit.isZero()?void 0:p.payload.deposit,E=Kt()(f.tokens,(function(e){return e===h})),T=ts(c(E),j);return e.pipe(Object(B["a"])(Mn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===g})),Object(mc["a"])(1,void 0,(function(e){return Object(I["a"])((function(){var e;return w.functions.openChannel(o,g,null!==(e=p.payload.settleTimeout)&&void 0!==e?e:y)})).pipe(Object($["a"])((function(e){return _?Object(ft["a"])(T.functions.approve(h,_)).pipe(Object(U["a"])((function(t){return[e,t]}))):Object(M["a"])([e])})),Object(vc["a"])((function(e){var t=us(e,1),n=t[0];return r.debug('sent openChannel tx "'.concat(n.hash,'" to "').concat(h,'"'))})),Object(vc["a"])((function(e){var t=us(e,2),n=t[1];return n?r.debug('sent approve tx "'.concat(n.hash,'" to "').concat(E,'"')):0})),Object($["a"])((function(e){var t=us(e,2),n=t[0],r=t[1];return Object(pt["a"])([Object(ft["a"])(n.wait()).pipe(Object(U["a"])((function(e){return{tx:n,receipt:e}}))),r?Object(ft["a"])(r.wait()).pipe(Object(U["a"])((function(e){return{tx:r,receipt:e}}))):Object(M["a"])(void 0)])})),Object($["a"])((function(t){var n=us(t,2),a=n[0],i=n[1];if(!a.receipt.status)throw new dn(qt.CNL_OPENCHANNEL_FAILED,Object.assign(Object.assign({},p.meta),{transactionHash:a.tx.hash}));return r.debug('openChannel tx "'.concat(a.tx.hash,'" successfuly mined!')),(i?Object(M["a"])(i):D["a"]).pipe(Object($["a"])((function(t){var n=t.tx,a=t.receipt;if(!a.status)throw new dn(qt.CNL_APPROVE_TRANSACTION_FAILED,{token:E,transactionHash:n.hash});return r.debug('approve tx "'.concat(n.hash,'" successfuly mined!')),e.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.payload.id;return w.functions.setTotalDeposit(t,o,_,g)})))})),Ac("setTotalDeposit",qt.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return Object(M["a"])(Un.failure(e,p.meta))})))})),Object(Ji["a"])((function(e){return Object(M["a"])(Mn.failure(e,p.meta))})))})))})))},Es=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(jn(Un.request)),Object(yc["a"])(t,u),Object($["a"])((function(e){var n,u=us(e,3),l=u[0],d=u[1],p=u[2].subkey,f=l.meta,b=f.tokenNetwork,y=f.partner,m=Kt()(d.tokens,(function(e){return e===b}));if(!m){var v=new dn(qt.CNL_TOKEN_NOT_FOUND,l.meta);return Object(M["a"])(Un.failure(v,l.meta))}var h=es({signer:a,address:o,main:i},null!==(n=l.payload.subkey)&&void 0!==n?n:p),g=h.signer,O=ts(c(m),g),k=ts(s(b),g),j=d.channels[b][y];if((null===j||void 0===j?void 0:j.state)!==ka.open){var w=new dn(qt.CNL_NO_OPEN_CHANNEL_FOUND,l.meta);return Object(M["a"])(Un.failure(w,l.meta))}return Object(ft["a"])(O.functions.approve(b,l.payload.deposit)).pipe(Ac("approve",qt.CNL_APPROVE_TRANSACTION_FAILED,{log:r}),Object(yc["a"])(t),Object($["a"])((function(e){var t=us(e,2),n=t[1];return k.functions.setTotalDeposit(j.id,o,n.channels[b][y].own.deposit.add(l.payload.deposit),y)})),Ac("setTotalDeposit",qt.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return Object(M["a"])(Un.failure(e,l.meta))})))})))},Ts=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(jn(Fn.request)),Object(yc["a"])(t,u),Object($["a"])((function(e){var t,n,u,l=us(e,3),d=l[0],p=l[1],f=l[2].subkey,b=d.meta,y=b.tokenNetwork,m=b.partner,v=es({signer:a,address:o,main:i},null!==(n=null===(t=d.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=v.signer,g=ts(s(y),h),O=null===(u=p.channels[y])||void 0===u?void 0:u[m];if((null===O||void 0===O?void 0:O.state)!==ka.open&&(null===O||void 0===O?void 0:O.state)!==ka.closing){var k=new dn(qt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,d.meta);return Object(M["a"])(Fn.failure(k,d.meta))}var _=w["HashZero"],E=w["Zero"],T=w["HashZero"],x=Object(j["hexlify"])(Ae);O.partner.balanceProof&&(_=Bo(O.partner.balanceProof.transferredAmount,O.partner.balanceProof.lockedAmount,O.partner.balanceProof.locksroot),E=O.partner.balanceProof.nonce,T=O.partner.balanceProof.messageHash,x=O.partner.balanceProof.signature);var S=Object(j["concat"])([Oa(y,20),Oa(c.chainId,32),Oa(Io.BALANCE_PROOF,32),Oa(O.id,32),Oa(_,32),Oa(E,32),Oa(T,32),Oa(x,65)]);return Object(ft["a"])(a.signMessage(S)).pipe(Object($["a"])((function(e){return g.functions.closeChannel(O.id,m,o,_,E,T,x,e)})),Ac("closeChannel",qt.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return Object(M["a"])(Fn.failure(e,d.meta))})))})))},xs=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(jn(Fn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(B["a"])(In.is),Object(L["a"])(1),Object(dc["a"])(1),Object(pc["a"])(t))})),Object(yc["a"])(t,u),Object(B["a"])((function(e){var t,n=us(e,2),r=n[0],a=n[1],i=null===(t=a.channels[r.meta.tokenNetwork])||void 0===t?void 0:t[r.meta.partner];return(null===i||void 0===i?void 0:i.state)===ka.closed&&i.id===r.payload.id&&!!i.partner.balanceProof&&i.closeParticipant!==o})),Object($["a"])((function(e){var t=us(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,p=d.tokenNetwork,f=d.partner,b=es({signer:a,address:o,main:i},l),y=b.signer,m=ts(s(p),y),v=u.channels[p][f];Ze((null===v||void 0===v?void 0:v.state)===ka.closed),Ze(v.partner.balanceProof);var h=Bo(v.partner.balanceProof.transferredAmount,v.partner.balanceProof.lockedAmount,v.partner.balanceProof.locksroot),g=v.partner.balanceProof.nonce,O=v.partner.balanceProof.messageHash,k=v.partner.balanceProof.signature,w=Object(j["concat"])([Oa(p,20),Oa(c.chainId,32),Oa(Io.BALANCE_PROOF_UPDATE,32),Oa(v.id,32),Oa(h,32),Oa(g,32),Oa(O,32),Oa(k,65)]);return Object(ft["a"])(a.signMessage(w)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(v.id,f,o,h,g,O,k,e)})),Ac("updateNonClosingBalanceProof",qt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),D["a"]})))})))},Ss=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(jn(qn.request)),Object(yc["a"])(t,s),Object($["a"])((function(e){var t,n,s,u=us(e,3),l=u[0],d=u[1],p=u[2].subkey,f=l.meta,b=f.tokenNetwork,y=f.partner,m=es({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:p),v=m.signer,h=ts(c(b),v),g=null===(s=d.channels[b])||void 0===s?void 0:s[y];if((null===g||void 0===g?void 0:g.state)!==ka.settleable&&(null===g||void 0===g?void 0:g.state)!==ka.settling){var O=new dn(qt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,l.meta);return Object(M["a"])(qn.failure(O,l.meta))}var k={transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"]},j=Object.assign(Object.assign({address:y},k),g.partner.balanceProof),_=Object.assign(Object.assign({address:o},k),g.own.balanceProof);if(_.transferredAmount.add(_.lockedAmount).lt(j.transferredAmount.add(j.lockedAmount))){var E=[_,j];j=E[0],_=E[1]}return Object(ft["a"])(h.functions.settleChannel(g.id,j.address,j.transferredAmount,j.lockedAmount,j.locksroot,_.address,_.transferredAmount,_.lockedAmount,_.locksroot)).pipe(Ac("settleChannel",qt.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return Object(M["a"])(qn.failure(e,l.meta))})))})))},As=function(e,t){return e.pipe(Object(B["a"])(jn(In)),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=us(t,2),r=n[0].payload.blockNumber,a=n[1],e.t0=f.a.keys(a.channels);case 2:if((e.t1=e.t0()).done){e.next=15;break}o=e.t1.value,e.t2=f.a.keys(a.channels[o]);case 5:if((e.t3=e.t2()).done){e.next=13;break}if(i=e.t3.value,c=a.channels[o][i],!(c.state===ka.closed&&c.settleTimeout&&c.closeBlock&&r>c.closeBlock+c.settleTimeout)){e.next=11;break}return e.next=11,$n({settleableBlock:r},{tokenNetwork:o,partner:i});case 11:e.next=5;break;case 13:e.next=2;break;case 15:case"end":return e.stop()}}),e)}))))},Rs=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(jn(qn.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(yc["a"])(t,s),Object(B["a"])((function(e){var t,n=us(e,2),r=n[0],a=n[1],o=null===(t=a.channels[r.meta.tokenNetwork])||void 0===t?void 0:t[r.meta.partner];return!o||!("id"in o)||o.id!==r.payload.id})),Object($["a"])((function(e){var t=us(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,p=ts(c(l),es({signer:a,address:o,main:i},s).signer),f=Object(j["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(os(e),[Oa(t.expiration,32),Oa(t.amount,32),t.secrethash])}),[]));return Object(ft["a"])(p.functions.unlock(n.payload.id,o,d,f)).pipe(Ac("unlock",qt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),D["a"]})))})))};function Ns(e,t,n,r){return ms((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(U["a"])((function(t){return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:t.blockNumber,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(B["a"])(Ye))}var Cs=function(e,t,n){ys(e);var r=n.config$,a=n.provider;return Object(pt["a"])(t.pipe(rc("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(rc("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=us(e,2),n=t[1];return n.length>0})),Object(fc["a"])((function(e){var t=us(e,3),n=t[0],r=t[1],o=t[2];return sc["a"].apply(void 0,os(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return Ns(e,a,n,o)}))))})))},Ps=n("6e77"),Is=n("47ea"),Ds=n("bee6"),Ms=n("b4cc1"),Ls=n("d337"),Us=n("b4d5"),Bs=n("d96a"),Fs=n("59b7"),$s=n("a2ef"),qs=n("6fb6"),Hs=n("de5c"),Vs=n("8f41"),Ws=n("2527"),Gs=n("2769"),Zs=n.n(Gs),Ks=n("80f6"),Xs=n.n(Ks),Ys=n("dc46"),Qs=n.n(Ys),zs=n("fc5d");function Js(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function eu(e,t){var n=Object(zs["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}function tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ru(e,t,n){return t&&nu(e.prototype,t),n&&nu(e,n),e}var au=function(){function e(t){tu(this,e),this.values=new Map,this.max=t}return ru(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function ou(e){return su(e)||cu(e)||fu(e)||iu()}function iu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function su(e){if(Array.isArray(e))return bu(e)}function uu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function lu(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=fu(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function du(e,t){return mu(e)||yu(e,t)||fu(e,t)||pu()}function pu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fu(e,t){if(e){if("string"===typeof e)return bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bu(e,t):void 0}}function bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mu(e){if(Array.isArray(e))return e}var vu=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},hu=["online","unavailable"],gu=/^@(0x[0-9a-f]{40})[.:]/i,Ou="RAIDEN";function ku(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Ye)}var ju=Qs()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function wu(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(ju(t))),n?Object(M["a"])(n):Object(Ps["a"])(e,"Room").pipe(Object(B["a"])(ju(t)),Object(dc["a"])(1))}function _u(e,t){var n=Js(t.getHomeserverUrl());return Object(ft["a"])(ku(e)).pipe(Object(U["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new v["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),r}))})),Object(q["a"])("roomId"),Object(Is["a"])())}function Eu(e,t){return Object(I["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function Tu(e,t,n,r){return e.pipe(Object(B["a"])(Wn.is),Object(dc["a"])(1),Object(vc["a"])((function(){n.next(t),n.complete()})),Object(Ds["a"])(1e3),Object(yc["a"])(r),Object($["a"])((function(e){var n=du(e,2),r=n[1];return _u(r,t).pipe(Object($["a"])((function(e){return Eu(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(hc["a"])())}function xu(e,t,n){var r=n.log;return Object(I["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(f.a.mark((function e(n){var r,a,o,i,c,s;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=lu(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=gu.exec(i.user_id),c&&Object(j["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(j["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return eu(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(Ye),Object(Is["a"])(),Object(U["a"])((function(e){if(!e.length)throw new dn(qt.TRNS_NO_VALID_USER,{address:t});return Xs()(e,"last_active_ago")})))}function Su(e){var t;if(e){var n={};try{var r,a=lu(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}function Au(e){return Object.entries(e).filter((function(e){var t=du(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=du(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Ru(e,t,n,r,a){var o=a.log;return Object(I["a"])((function(){var n=e.getRoom(t);return n?Object(M["a"])(n):Object(Ps["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(dc["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(yc["a"])(r),Object($["a"])((function(r){var a=du(r,2),i=a[1].httpTimeout;return Object(I["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(Ms["a"])((function(e){return e.pipe(Object(Ds["a"])(i))})),Object(zi["a"])(Object(Ps["a"])(e,"RoomMember.membership",(function(e,t){return uu(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}function Nu(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Cu(e,t){return e.includes("://")||(e="https://"+e),Object(I["a"])((function(){var n=Date.now();return Object(Ws["a"])(e+"/_matrix/client/versions").pipe(Object(Ls["a"])(t),Object(U["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Ji["a"])((function(){return Object(M["a"])(NaN)})),Object(U["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Pu(e,t){var n=this;return Object(Ws["a"])(e).pipe(Object($["a"])((function(t){return vu(n,void 0,void 0,f.a.mark((function n(){return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ze(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Ls["a"])(t),Object($["a"])((function(e){return Nu(e)})),Object($["a"])((function(e){return Cu(e,t)})),Object(Is["a"])(),Object($["a"])((function(e){return gt()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Us["a"])((function(){return new dn(qt.TRNS_NO_MATRIX_SERVERS)})))}function Iu(e,t,n,r){var a=n.address,o=n.signer,i=Js(e);if(!i)throw new dn(qt.TRNS_NO_SERVERNAME,{server:e});return Object(I["a"])((function(){if(t){var n=Object(v["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(M["a"])({matrix:n,server:e,setup:t})}var r=Object(v["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(ft["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(ft["a"])(r.login("m.login.password",{user:c,password:e,device_id:Ou})).pipe(Object(Ji["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(ft["a"])(o.signMessage(s)).pipe(Object(U["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(P["a"])(Object(ft["a"])(t.setDisplayName(a.displayName)),Object(ft["a"])(t.setPresence({presence:"online",status_msg:""})),r?Object(ft["a"])(t.setAvatarUrl(Au(r))):D["a"]).pipe(Object(pc["a"])({matrix:t,server:n,setup:a}))})))}var Du=function(e,t,n){uu(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(pt["a"])([i.pipe(Object(q["a"])("state")),c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n,o,i=du(e,2),c=i[0],s=i[1],u=s.matrixServer,l=s.matrixServerLookup,d=s.httpTimeout,p=s.caps,f=null===(t=c.transport.matrix)||void 0===t?void 0:t.server,b=null===(n=c.transport.matrix)||void 0===n?void 0:n.setup,y=[];u?u===f?y.push(Object(M["a"])({server:f,setup:b})):y.push(Object(M["a"])({server:u})):(f&&y.push(Object(M["a"])({server:f,setup:b})),y.push(Pu(l,d)));var m=function(e){return o=e,D["a"]};return Object(I["a"])((function(){return y.shift()||D["a"]})).pipe(Object(Ji["a"])(m),Object(wc["a"])((function(e){var t=e.server,n=e.setup;return Iu(t,n,{address:r,signer:a},p).pipe(Object(Ji["a"])(m))})),Object(F["a"])(),Object(vc["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(lc["a"])((function(e){return e.pipe(Object($["a"])((function(){return y.length?Object(M["a"])(null):Object(cc["a"])(o)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(P["a"])(Tu(e,n,o,c),Object(M["a"])(Wn({server:r,setup:a})),c.pipe(rc("logger"),Object(vc["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(hc["a"])()))})))},Mu=function(e,t,n){uu(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Bs["a"])((function(){t.setPresence({presence:"offline",status_msg:""}).catch((function(){})),t.stopClient()})))})),Object(hc["a"])())},Lu=function(e,t,n){uu(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(jn(Gn.request)),Object($["a"])((function(e){return r.pipe(Object(U["a"])((function(t){return{action:e,matrix:t}})))})),Object(bc["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(yc["a"])(a.pipe(rc("presences"))),Object(fc["a"])((function(e){var t=du(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(M["a"])(i[r.meta.address]):xu(a,r.meta.address,{log:o}).pipe(Object(U["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Gn.success({userId:n,available:hu.includes(t),ts:Date.now(),caps:Su(a)},r.meta)})),Object(Ji["a"])((function(e){return Object(M["a"])(Gn.failure(e,r.meta))})))})))})))},Uu=function(e,t,n){uu(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Ps["a"])(e,"event").pipe(Object(U["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(U["a"])((function(e){var t=e.event,n=e.matrix,r=n.getUser(t.getSender());if(r&&r.presence){var a=gu.exec(r.userId),o=a&&a[1];if(o){var i=Object(j["getAddress"])(o);if(i)return{matrix:n,user:r,address:i}}}})),Object(B["a"])(Ye),Object(yc["a"])(e.pipe(Object(B["a"])(jn(Gn.request)),Object(Yi["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(Xi["a"])(new Set)),o.pipe(rc("presences"))),Object(B["a"])((function(e){var t=du(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=du(e,3),n=t[0],a=n.matrix,o=n.user,i=n.address,c=t[2],s=o.userId,u=o.presence,l=hu.includes(u);if(i in c&&c[i].payload.userId===s&&c[i].payload.available===l)return D["a"];var d=tt.is(o.displayName)?Object(M["a"])({displayname:o.displayName,avatar_url:o.avatarUrl}):Object(I["a"])((function(){return a.getProfileInfo(s)}));return d.pipe(Object(U["a"])((function(e){var t;Ze(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(j["verifyMessage"])(s,e.displayname);return Ze(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Gn.success({userId:s,available:l,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Su(e.avatar_url)},{address:n})})),Object(Ji["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),D["a"]})))}))).pipe(Object(yc["a"])(o),Object(B["a"])((function(e){var t=du(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},Bu=function(e,t,n){uu(t);var r=n.log,a=n.matrix$,o=n.latest$;return e.pipe(Object(B["a"])(jn([xr,Ln,vr.request,Kn])),Object(U["a"])((function(e){return jn(xr,e)?e.payload.message.target:jn(Ln,e)?e.meta.partner:e.meta.address})),Object(bc["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return a.pipe(Object(U["a"])((function(t){return{address:e,matrix:t}})))})),Object(fc["a"])((function(e){var t=e.address,n=e.matrix;return o.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(dc["a"])(1),Object(B["a"])((function(e){var n,r,a,o=e.state;return!(null===(a=null===(r=null===(n=o.transport.matrix)||void 0===n?void 0:n.rooms)||void 0===r?void 0:r[t])||void 0===a?void 0:a[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(U["a"])((function(e){var n=e.room_id;return Zn({roomId:n},{address:t})})),Object(Ji["a"])((function(e){return r.error("Error creating room, ignoring",e),D["a"]})))})))})))},Fu=function(e,t,n){uu(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(jn(Gn.success)),Object(bc["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(yc["a"])(r),Object(yt["a"])((function(e){var t=du(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(U["a"])((function(e){var t,r,a,o=e.state;return null===(a=null===(r=null===(t=o.transport.matrix)||void 0===t?void 0:t.rooms)||void 0===r?void 0:r[n.meta.address])||void 0===a?void 0:a[0]})),Object(nc["a"])(),Object(yt["a"])((function(e){return Object(sc["a"])(Object(M["a"])(e),e?Object(Ps["a"])(r,"RoomMember.membership",(function(e,t){return uu(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(pc["a"])(e)):D["a"])})),Object(yt["a"])((function(e){return e?Ru(r,e,n.payload.userId,a,{log:i}):D["a"]}))):D["a"]})))})),Object(hc["a"])())},$u=function(e,t,n){uu(e),uu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Ps["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(yc["a"])(o),Object($["a"])((function(e){var t=du(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(rc("presences"),Object(U["a"])((function(e){return Zs()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(Ye),Object(dc["a"])(1),Object(zi["a"])(Object(ic["a"])(c)));return u.pipe(Object(U["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(ft["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(pc["a"])(Zn({roomId:n.roomId},{address:a.meta.address})),Object(Ji["a"])((function(e){return r.error("Error joining invited room, ignoring",e),D["a"]})))})))},qu=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(jn(Zn)),Object($["a"])((function(e){return a.pipe(Object(U["a"])((function(t){return{action:e,matrix:t}})))})),Object(yc["a"])(t,o),Object($["a"])((function(e){var t,n,a,o=du(e,3),i=o[0],c=i.action,s=i.matrix,u=o[1],l=o[2].matrixExcessRooms,d=null!==(a=null===(n=null===(t=u.transport.matrix)||void 0===t?void 0:t.rooms)||void 0===n?void 0:n[c.meta.address])&&void 0!==a?a:[];return Object(ft["a"])(d.filter((function(e,t){return uu(e),t>=l}))).pipe(Object($["a"])((function(e){return s.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(U["a"])((function(e){return Kn({roomId:e},c.meta)})))})))},Hu=function(e,t,n){uu(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(yt["a"])((function(e){return Object(Ps["a"])(e,"Room").pipe(Object(U["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(Fs["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(ic["a"])(t)})))})),Object(yc["a"])(t,o),Object(B["a"])((function(e){var t,n,r=du(e,3),a=r[0],o=a.matrix,i=a.roomId,c=r[1],s=r[2],u=o.getRoom(i);if(!u)return!1;var l=ku(s);if(u.name&&l.some((function(e){return u.name.match("#".concat(e,":"))})))return!1;var d=null!==(n=null===(t=c.transport.matrix)||void 0===t?void 0:t.rooms)&&void 0!==n?n:{};for(var p in d){var f,b=lu(d[p]);try{for(b.s();!(f=b.n()).done;){var y=f.value;if(y===u.roomId)return!1}}catch(m){b.e(m)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=du(e,1),n=t[0],a=n.matrix,o=n.roomId;return vu(void 0,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(hc["a"])())},Vu=function(e,t,n){uu(e);var r=n.log,a=n.matrix$;return a.pipe(Object(yt["a"])((function(e){return Object(Ps["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,p;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=du(t,2),a=n[0].room,o=n[1],s=null!==(c=null===(i=o.transport.matrix)||void 0===i?void 0:i.rooms)&&void 0!==c?c:{},e.t0=f.a.keys(s);case 3:if((e.t1=e.t0()).done){e.next=26;break}u=e.t1.value,l=lu(s[u]),e.prev=6,l.s();case 8:if((d=l.n()).done){e.next=16;break}if(p=d.value,p!==a.roomId){e.next=14;break}return r.warn("Left event for peer room detected, forgetting",u,p),e.next=14,Kn({roomId:p},{address:u});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t2=e["catch"](6),l.e(e.t2);case 21:return e.prev=21,l.f(),e.finish(21);case 24:e.next=3;break;case 26:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))))},Wu=function(e,t,n){uu(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(rc("transport","matrix"),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=null!==(n=null===t||void 0===t?void 0:t.rooms)&&void 0!==n?n:{},e.t0=f.a.keys(r);case 2:if((e.t1=e.t0()).done){e.next=23;break}a=e.t1.value,o=lu(r[a]),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,{roomId:c,address:a};case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e["catch"](5),o.e(e.t2);case 18:return e.prev=18,o.f(),e.finish(18);case 21:e.next=2;break;case 23:case"end":return e.stop()}}),e,null,[[5,15,18,21]])}))),Object($s["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(U["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(yc["a"])(o),Object($["a"])((function(e){var t=du(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return wu(i,a).pipe(Object(Ls["a"])(c),Object(hc["a"])(),Object(Ji["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(M["a"])(Kn({roomId:a},{address:o}))})))})))};function Gu(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(dc["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(M["a"])(a[e]):i.pipe(Object(U["a"])((function(t){var n,r,a,o=t.state;return null===(a=null===(r=null===(n=o.transport.matrix)||void 0===n?void 0:n.rooms)||void 0===r?void 0:r[e])||void 0===a?void 0:a[0]})),Object(B["a"])(Ye),Object(nc["a"])(),Object(yt["a"])((function(n){return wu(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(U["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(nc["a"])(),Object(U["a"])((function(e){return{room:t,userId:e}})))})),Object(yt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return D["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(M["a"])(a):Object(Ps["a"])(t,"RoomMember.membership",(function(e,t){return uu(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(dc["a"])(1),Object($["a"])((function(e){return Object(I["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(pc["a"])("string"===typeof e?e:e.label),Object(lc["a"])((function(e){return e.pipe(Object(yc["a"])(c),Object($["a"])((function(e,t){var n=du(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(ic["a"])(a/u)):Object(cc["a"])(r)})))})))})))}var Zu=function(e,t,n){uu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(jn(vr.request)),Object($["a"])((function(e){return a.pipe(Object(U["a"])((function(t){return{action:e,matrix:t}})))})),Object(bc["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(wc["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Wo(t.payload.message),c={body:a,msgtype:"m.text"};return Gu(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(pc["a"])(vr.success(void 0,t.meta)),Object(Ji["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(M["a"])(vr.failure(e,t.meta))})))})))})))},Ku=function(e,t,n){uu(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(jn(hr)),Object($["a"])((function(e){return a.pipe(Object(U["a"])((function(t){return{action:e,matrix:t}})))})),Object(yc["a"])(o),Object($["a"])((function(e){var t=du(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=ku(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),D["a"];var s=Js(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return wu(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Wo(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Ji["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),D["a"]})))})),Object(hc["a"])())};function Xu(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Go(e);if("signature"in a){var o=Ho(a);if(o!==t)throw new dn(qt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}var Yu=function(e,t,n){uu(e),uu(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Ps["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(yc["a"])(o),Object(B["a"])((function(e){var t,n,r=du(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!ku(s).some((function(e){return ju("#".concat(e,":").concat(Js(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=du(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r,i=e.presences,c=e.state,s=Zs()(i,["payload.userId",a.getSender()]);if(!s)return!1;var u=null!==(r=null===(n=null===(t=c.transport.matrix)||void 0===t?void 0:t.rooms)||void 0===n?void 0:n[s.meta.address])&&void 0!==r?r:[];return!!u.includes(o.roomId)})),Object(dc["a"])(1),Object(zi["a"])(Object(ic["a"])(c)),Object($["a"])(f.a.mark((function e(t){var n,i,c,s,u,l,d;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Zs()(n,["payload.userId",a.getSender()]),s=lu((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=Xu(l,c.meta.address,{log:r}),e.next=10,gr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Qu=function(e,t){return e.pipe(Object(B["a"])(gr.is),Object(yc["a"])(t),Object(B["a"])((function(e){var t,n,r,a=du(e,2),o=a[0],i=a[1],c=null!==(r=null===(n=null===(t=i.transport.matrix)||void 0===t?void 0:t.rooms)||void 0===n?void 0:n[o.meta.address])&&void 0!==r?r:[];return!!o.payload.roomId&&c.includes(o.payload.roomId)&&c[0]!==o.payload.roomId})),Object(U["a"])((function(e){var t=du(e,1),n=t[0];return Zn({roomId:n.payload.roomId},n.meta)})))},zu=function(e){return e.pipe(Object(B["a"])(jn(Ln)),Object(U["a"])((function(e){return Gn.request(void 0,{address:e.meta.partner})})))},Ju=function(e,t,n){uu(t);var r=n.log,a=n.signer,o=n.latest$,i=new au(32);return e.pipe(Object(B["a"])(Ko([st(zn),st(Jn),st(er)])),Object(yc["a"])(o),Object(B["a"])((function(e){var t,n=du(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Se.NO_DELIVERY])})),Object(wc["a"])((function(e){var t=du(e,1),n=t[0],o=n.payload.message;return Object(I["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(M["a"])(vr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Rn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(ft["a"])(Zo(a,s,{log:r})).pipe(Object(vc["a"])((function(e){return i.put(t,e)})),Object(U["a"])((function(e){return vr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},el=new WeakMap;function tl(e){return vu(this,void 0,void 0,f.a.mark((function t(){var n,r,a,o;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=el.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),el.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function nl(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function rl(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(P["a"])(Object(Ps["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(Fs["a"])((function(){return n})),Object(Qi["a"])(Ye),Object(qs["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(vc["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return Gu(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Ps["a"])(t,"event").pipe(Object(B["a"])(nl("m.call.candidates",i,o)),Object(vc["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(ft["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(I["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Ji["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),D["a"]})))})))).pipe(Object(hc["a"])())}function al(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,p=a.config$;return Object(ft["a"])(tl(e)).pipe(Object($["a"])((function(r){var f=new RTCPeerConnection({iceServers:[].concat(ou(r),ou(i))}),b=f.createDataChannel(c,{ordered:!1});return Object(P["a"])(rl(f,e,t,n,a),Object(I["a"])((function(){return f.createOffer()})).pipe(Object($["a"])((function(t){f.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(P["a"])(Object(Ps["a"])(e,"event").pipe(Object(B["a"])(nl("m.call.answer",s,c,o))),Gu(u,e,"m.call.invite",n,{log:l,latest$:d,config$:p}).pipe(Object(vc["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(hc["a"])()))})),Object(dc["a"])(1),Object(vc["a"])((function(){return l.info("RTC: got answer",c)})),Object(U["a"])((function(e){f.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(hc["a"])()),Object(M["a"])(b))})))}function ol(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(Ps["a"])(e,"event").pipe(Object(B["a"])(nl("m.call.invite",c,i,o)),Object(vc["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(ft["a"])(tl(e)).pipe(Object(U["a"])((function(e){return[t,e]})))})),Object(yc["a"])(d),Object($["a"])((function(r){var c=du(r,2),p=du(c[0],2),f=p[0],b=p[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(ou(b),ou(y))});return m.setRemoteDescription(new RTCSessionDescription(f.getContent().offer)),Object(P["a"])(rl(m,e,t,n,a),Object(I["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Gu(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(vc["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(hc["a"])()),Object(Ps["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(dc["a"])(1))}function il(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(P["a"])(Object(Ps["a"])(t,"close").pipe(Object(vc["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(hc["a"])()),Object(Ps["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(cc["a"])(e.error)}))),Object(Ps["a"])(t,"open").pipe(Object(dc["a"])(1),Object(Ls["a"])(c/3),Object(vc["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(pc["a"])(Xn(t,{address:i}))),Object(Ps["a"])(t,"message").pipe(Object(vc["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(U["a"])((function(e){return gr({text:e,message:Xu(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Bs["a"])((function(){return t.close()})))})),Object(zi["a"])(e),Object(Ji["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),D["a"]})),Object(Hs["a"])(Xn(void 0,{address:i})))}}function cl(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(nc["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(yc["a"])(i,c),Object(B["a"])((function(e){var t,n=du(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Se.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Se.WEBRTC])})),Object(yt["a"])((function(t){var n=du(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(M["a"])(Xn(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),p=d.startsWith(a.toLowerCase());return Object(I["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],f=new C["a"];return t=p?al(s,a,n,u,l):ol(s,a,n,u,l),f.pipe(Object($["a"])((function(){return Gu(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(zi["a"])(Object(ic["a"])(u.httpTimeout/10)))})),Object(zi["a"])(e.pipe(Object(B["a"])(Kr.is)))).subscribe(),Object(P["a"])(t,Object(Ps["a"])(s,"event").pipe(Object(B["a"])(nl("m.call.hangup",n.peerId,d)),Object(Vs["a"])(Object(cc["a"])(new Error("RTC: peer hung up"))))).pipe(il(f,n,u,l))})).pipe(Object(Ms["a"])((function(e){return e.pipe(Object(yc["a"])(o,c),Object($["a"])((function(e){var t,n,r=du(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?p?Object(ic["a"])(o/10):Object(M["a"])(null):D["a"]})))})))})))}var sl=function(e,t,n){return uu(t),e.pipe(Object(B["a"])(Gn.success.is),Object(bc["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return cl(e,t,n)})))};function ul(e,t){return bl(e)||fl(e,t)||dl(e,t)||ll()}function ll(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dl(e,t){if(e){if("string"===typeof e)return pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pl(e,t):void 0}}function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bl(e){if(Array.isArray(e))return e}var yl=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(jn([Fn.request,Fn.success])),Object(yc["a"])(t),Object($["a"])((function(e){var t=ul(e,2),n=t[0],a=t[1];return Object(ft["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=ul(e,2),a=ul(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(U["a"])((function(e){var t,n,r,a,o=ul(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Ea.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?Tr.success({balanceProof:Vo(c.unlock[1])},s):Tr.success({},s):Tr.failure(new dn(qt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(Ye))})))};function ml(e,t,n){return Object(P["a"])(e.pipe(Object(B["a"])(n),Object(dc["a"])(1),Object(hc["a"])()),Object(M["a"])(t))}function vl(e,t){return jl(e)||kl(e,t)||gl(e,t)||hl()}function hl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gl(e,t){if(e){if("string"===typeof e)return Ol(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ol(e,t):void 0}}function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function jl(e){if(Array.isArray(e))return e}function wl(e,t,n,r){var a=n.confirmationBlocks;return Object(ft["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=vl(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=vl(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Ea.SENT};return Object(P["a"])(ml(e,Dr.request(void 0,o),Tn(Dr,o)),Object(M["a"])(Tr.failure(new dn(qt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var _l=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(jn(In)),Object(yc["a"])(t,r),Object(fc["a"])((function(t){var n=vl(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return wl(e,a,o,r)})))},El=n("9b02"),Tl=n.n(El);function xl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Sl(e,t){return Nl(e)||Rl(e,t)||Il(e,t)||Al()}function Al(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Nl(e){if(Array.isArray(e))return e}function Cl(e){return Ml(e)||Dl(e)||Il(e)||Pl()}function Pl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Il(e,t){if(e){if("string"===typeof e)return Ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ll(e,t):void 0}}function Dl(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ml(e){if(Array.isArray(e))return Ll(e)}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ul(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.nonce)&&void 0!==t?t:w["Zero"]).add(1)}function Bl(e,t){var n,r=(null!==(n=e.own.locks)&&void 0!==n?n:[]).filter((function(e){return e.secrethash!==t}));return ri(r)}function Fl(e,t,n,r){var a,o,i,c,s,u,l=n.revealTimeout,d=r.log,p=r.address,b=r.network,y=r.signer;if(t.meta.secrethash in e.sent)return d.warn("transfer already present",t.meta),D["a"];var m={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},v=t.payload.paths[0].fee,h=t.payload.paths[0].path[0],g=e.channels[t.payload.tokenNetwork][h];Ze((null===g||void 0===g?void 0:g.state)===ka.open,"not open"),Ze(!t.payload.expiration||t.payload.expiration>=e.blockNumber+l,"expiration too soon");var O={amount:t.payload.value.add(v),expiration:Object(j["bigNumberify"])(t.payload.expiration||e.blockNumber+2*l),secrethash:t.meta.secrethash},k=[].concat(Cl(null!==(a=g.own.locks)&&void 0!==a?a:[]),[O]),_=ri(k),E=Kt()(e.tokens,(function(e){return e===t.payload.tokenNetwork}));d.info("Signing transfer of value",t.payload.value.toString(),"of token",E,", to",t.payload.target,", through routes",t.payload.paths,", paying",v.toString(),"in fees.");var T={type:Rn.LOCKED_TRANSFER,message_identifier:ci(),chain_id:Object(j["bigNumberify"])(b.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(g.id),nonce:Ul(g.own.balanceProof),transferred_amount:null!==(i=null===(o=g.own.balanceProof)||void 0===o?void 0:o.transferredAmount)&&void 0!==i?i:w["Zero"],locked_amount:(null!==(s=null===(c=g.own.balanceProof)||void 0===c?void 0:c.lockedAmount)&&void 0!==s?s:w["Zero"]).add(O.amount),locksroot:_,payment_identifier:t.payload.paymentId,token:E,recipient:h,lock:O,target:t.payload.target,initiator:null!==(u=t.payload.initiator)&&void 0!==u?u:p,metadata:m};return Object(ft["a"])(Zo(y,T,{log:d})).pipe(Object($["a"])(f.a.mark((function e(n){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xr({message:n,fee:v},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Ar({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function $l(e,t,n){return Object(pt["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=Sl(e,2),a=r[0],o=r[1];return Fl(a,t,o,n)})),Object(Ji["a"])((function(e){return Object(M["a"])(Tr.failure(e,t.meta))})))}function ql(e,t,n,r){var a,o,i=r.log,c=r.signer,s=n.meta.secrethash;Ze(s in t.sent,"unknown transfer");var u,l=t.sent[s].transfer[1],d=Tl()(t.channels,[l.token_network_address,l.recipient]);if(Ze((null===d||void 0===d?void 0:d.state)===ka.open&&d.own.balanceProof,"channel gone, not open or no balanceProof"),t.sent[s].unlock)u=Object(M["a"])(t.sent[s].unlock[1]);else{Ze((null===(o=null===(a=t.sent[s].secret)||void 0===a?void 0:a[1])||void 0===o?void 0:o.registerBlock)||l.lock.expiration.gt(t.blockNumber),"lock expired");var p=Bl(d,s),b={type:Rn.UNLOCK,message_identifier:ci(),chain_id:l.chain_id,token_network_address:l.token_network_address,channel_identifier:l.channel_identifier,nonce:Ul(d.own.balanceProof),transferred_amount:d.own.balanceProof.transferredAmount.add(l.lock.amount),locked_amount:d.own.balanceProof.lockedAmount.sub(l.lock.amount),locksroot:p,payment_identifier:l.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};u=Object(ft["a"])(Zo(c,b,{log:i}))}return u.pipe(Object(yc["a"])(e),Object($["a"])(f.a.mark((function e(t){var r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Sl(t,2),a=r[0],o=r[1],Ze((null===(c=null===(i=o.sent[s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)||l.lock.expiration.gt(o.blockNumber),"lock expired"),Ze(!o.sent[s].channelClosed,"channel closed!"),e.next=5,Pr.success({message:a},n.meta);case 5:case"end":return e.stop()}}),e)}))))}function Hl(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return ql(e,n,t,{log:a,signer:r})})),Object(Ji["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(M["a"])(Pr.failure(e,t.meta))})))}function Vl(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;Ze(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=Tl()(e.channels,[c.token_network_address,c.recipient]);if(Ze((null===s||void 0===s?void 0:s.state)===ka.open&&s.own.balanceProof,"channel gone, not open or no balanceProof"),e.sent[o].lockExpired)i=Object(M["a"])(e.sent[o].lockExpired[1]);else{Ze(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),Ze(!e.sent[o].unlock,"transfer already unlocked");var u=Bl(s,o),l={type:Rn.LOCK_EXPIRED,message_identifier:ci(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:Ul(s.own.balanceProof),transferred_amount:s.own.balanceProof.transferredAmount,locked_amount:s.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:u,recipient:c.recipient,secrethash:o};i=Object(ft["a"])(Zo(r,l,{log:a}))}return i.pipe(Object(U["a"])((function(e){return Dr.success({message:e},t.meta)})))}function Wl(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Vl(e,t,{signer:a,log:r})})),Object(Ji["a"])((function(e){return Object(M["a"])(Dr.failure(e,t.meta))})))}function Gl(e,t,n,r){var a,o,i,c=n.log,s=n.signer,u=t.payload.message,l=Tl()(e.channels,[t.meta.tokenNetwork,t.meta.partner]);Ze(l&&l.state===ka.open&&u.channel_identifier.eq(l.id),"channel gone or not open"),Ze(u.expiration.gt(e.blockNumber),"WithdrawRequest expired"),Ze(u.total_withdraw.lte(l.partner.deposit.add(null!==(o=null===(a=l.own.balanceProof)||void 0===a?void 0:a.transferredAmount)&&void 0!==o?o:w["Zero"])),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount");var d=u.message_identifier.toString();function p(e,t){if(!t)return!1;var n=Ec()(t,["token_network_address","participant","chain_id","channel_identifier","total_withdraw","expiration"]);return Vt()(e,n,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var f=r.get(d);if(p(u,f))i=Object(M["a"])(f);else{var b={type:Rn.WITHDRAW_CONFIRMATION,message_identifier:u.message_identifier,chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:u.participant,total_withdraw:u.total_withdraw,nonce:Ul(l.own.balanceProof),expiration:u.expiration};i=Object(ft["a"])(Zo(s,b,{log:c})).pipe(Object(vc["a"])((function(e){return r.put(d,e)})))}return i.pipe(Object(U["a"])((function(e){return Fr.success({message:e},t.meta)})))}function Zl(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Gl(e,t,{log:o,signer:a},r)})),Object(Ji["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),D["a"]})))}function Kl(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:Ea.RECEIVED};return Object(pt["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,c,l,d,p,b,y=Sl(e,2),m=y[0],v=y[1],h=v.revealTimeout,g=v.caps,O=t.payload.message;if(s in m.received){a.warn("transfer already present",t.meta);var k=O.message_identifier;return m.received[s].partner===t.meta.address&&m.received[s].transfer[1].message_identifier.eq(k)?Object(M["a"])(Sr({message:m.received[s].transferProcessed[1]},u)):D["a"]}var j=O.token_network_address,_=t.meta.address,E=null===(n=m.channels[j])||void 0===n?void 0:n[_];Ze((null===E||void 0===E?void 0:E.state)===ka.open,"channel not found or not open"),Ze(O.chain_id.eq(o.chainId),"chainId mismatch"),Ze(O.channel_identifier.eq(E.id),"channelId mismatch"),Ze(O.nonce.eq(Ul(E.partner.balanceProof)),"nonce mismatch"),Ze(O.transferred_amount.eq(null!==(l=null===(c=E.partner.balanceProof)||void 0===c?void 0:c.transferredAmount)&&void 0!==l?l:w["Zero"]),"transferredAmount mismatch"),Ze(O.locked_amount.eq((null!==(p=null===(d=E.partner.balanceProof)||void 0===d?void 0:d.lockedAmount)&&void 0!==p?p:w["Zero"]).add(O.lock.amount)),"lockedAmount mismatch");var T=Sc(E).partnerCapacity;Ze(O.lock.amount.lte(T),"balanceProof total amount bigger than capacity"),Ze(O.recipient===r,"Received transfer isn't for us"),Ze(O.lock.expiration.sub(m.blockNumber).gt(h),"lock expires too soon");var x=[].concat(Cl(null!==(b=E.partner.locks)&&void 0!==b?b:[]),[O.lock]),S=ri(x);Ze(O.locksroot===S,"locksroot mismatch");var A=Kt()(m.tokens,(function(e){return e===j}));a.info("Receiving transfer of value",O.lock.amount.toString(),"of token",A,", from",O.initiator,", through partner",_);var R=Object(M["a"])(void 0);(null===g||void 0===g?void 0:g[Se.NO_RECEIVE])||O.target!==r||(R=Object(I["a"])((function(){var e={type:Rn.SECRET_REQUEST,payment_identifier:O.payment_identifier,secrethash:s,amount:O.lock.amount,expiration:O.lock.expiration,message_identifier:ci()};return Zo(i,e,{log:a})})));var N=Object(I["a"])((function(){var e={type:Rn.PROCESSED,message_identifier:O.message_identifier};return Zo(i,e,{log:a})}));return Object(pt["a"])([N,R]).pipe(Object($["a"])(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Sl(t,2),r=n[0],a=n[1],e.next=3,xr({message:O,fee:w["Zero"]},u);case 3:return e.next=5,Sr({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,Gn.request(void 0,{address:O.initiator});case 8:return e.next=10,Nr({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(Ji["a"])((function(e){return Object(M["a"])(Tr.failure(e,u))})))}function Xl(e,t,n){var r=n.log,a=n.network,o=n.signer,i=ai(t.payload.message.secret),c={secrethash:i,direction:Ea.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){var n;if(!(i in e.received))return D["a"];var s=e.received[i],u=t.payload.message,l=t.meta.address;if(Ze(l===s.partner,"wrong partner"),s.unlock)return r.warn("transfer already unlocked",t.meta),s.unlockProcessed&&s.unlockProcessed[1].message_identifier.eq(u.message_identifier)?Object(M["a"])(Ir({message:s.unlockProcessed[1]},c)):D["a"];var d=s.transfer[1],p=u.token_network_address;Ze(p===d.token_network_address,"wrong tokenNetwork");var b=null===(n=e.channels[p])||void 0===n?void 0:n[l];Ze((null===b||void 0===b?void 0:b.state)===ka.open&&b.partner.balanceProof&&b.partner.locks,"channel not found or not open"),Ze(u.chain_id.eq(a.chainId),"chainId mismatch"),Ze(u.channel_identifier.eq(b.id),"channelId mismatch"),Ze(u.nonce.eq(Ul(b.partner.balanceProof)),"nonce mismatch");var y=d.lock,m=y.amount;Ze(u.transferred_amount.eq(b.partner.balanceProof.transferredAmount.add(m)),"transferredAmount mismatch"),Ze(u.locked_amount.eq(b.partner.balanceProof.lockedAmount.sub(m)),"lockedAmount mismatch");var v=b.partner.locks.filter((function(e){return e.secrethash!==i})),h=ri(v);Ze(u.locksroot===h,"locksroot mismatch");var g={type:Rn.PROCESSED,message_identifier:u.message_identifier};return Object(ft["a"])(Zo(o,g,{log:r})).pipe(Object($["a"])(f.a.mark((function e(t){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pr.success({message:u},c);case 2:return e.next=4,Ir({message:t},c);case 4:return e.next=6,Tr.success({balanceProof:Vo(u)},c);case 6:case"end":return e.stop()}}),e)}))))})),Object(Ji["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(M["a"])(Pr.failure(e,c))})))}function Yl(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:Ea.RECEIVED};return Object(pt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u,l=Sl(e,2),d=l[0],p=l[1].confirmationBlocks;if(!(c in d.received))return D["a"];var b=d.received[c],y=t.payload.message,m=t.meta.address;if(Ze(m===b.partner,"wrong partner"),b.lockExpired)return r.warn("transfer already expired",t.meta),b.lockExpiredProcessed&&b.lockExpiredProcessed[1].message_identifier.eq(y.message_identifier)?Object(M["a"])(Mr({message:b.lockExpiredProcessed[1]},s)):D["a"];var v=b.transfer[1];Ze(v.lock.expiration.add(p).lte(d.blockNumber),"expiration block not confirmed yet"),Ze(!b.unlock,"transfer unlocked"),Ze(!(null===(i=null===(n=b.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered");var h=y.token_network_address;Ze(h===v.token_network_address,"wrong tokenNetwork");var g=null===(u=d.channels[h])||void 0===u?void 0:u[m];Ze((null===g||void 0===g?void 0:g.state)===ka.open&&g.partner.balanceProof&&g.partner.locks,"channel not found or not open"),Ze(y.chain_id.eq(a.chainId),"chainId mismatch"),Ze(y.channel_identifier.eq(g.id),"channelId mismatch"),Ze(y.nonce.eq(Ul(g.partner.balanceProof)),"nonce mismatch");var O=v.lock,k=O.amount;Ze(y.transferred_amount.eq(g.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),Ze(y.locked_amount.eq(g.partner.balanceProof.lockedAmount.sub(k)),"lockedAmount mismatch");var j=g.partner.locks.filter((function(e){return e.secrethash!==c})),w=ri(j);Ze(y.locksroot===w,"locksroot mismatch");var _={type:Rn.PROCESSED,message_identifier:y.message_identifier};return Object(ft["a"])(Zo(o,_,{log:r})).pipe(Object($["a"])(f.a.mark((function e(t){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Dr.success({message:y},s);case 2:return e.next=4,Mr({message:t},s);case 4:return e.next=6,Tr.failure(new dn(qt.XFER_EXPIRED,{block:v.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Ji["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(M["a"])(Dr.failure(e,s))})))}var Ql=function(e,t,n){xl(t);var r=new au(32),a=n.latest$.pipe(rc("state"));return Object(P["a"])(e.pipe(Object(B["a"])(jn([Tr.request,Pr.request,Dr.request,Fr.request]))),e.pipe(Object(B["a"])(Ko([st(or),st(cr),st(sr)])))).pipe(Object(wc["a"])((function(e){return Tr.request.is(e)?$l(a,e,n):Pr.request.is(e)?Hl(a,e,n):Dr.request.is(e)?Wl(a,e,n):Fr.request.is(e)?Zl(a,e,n,r):e.payload.message.type===Rn.LOCKED_TRANSFER?Kl(a,e,n):e.payload.message.type===Rn.UNLOCK?Xl(a,e,n):Yl(a,e,n)})))};function zl(e,t){return rd(e)||nd(e,t)||ed(e,t)||Jl()}function Jl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ed(e,t){if(e){if("string"===typeof e)return td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(e,t):void 0}}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rd(e){if(Array.isArray(e))return e}function ad(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var od=function(e,t){return ad(e),t.pipe(Object(F["a"])(),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=zl(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Ea.SENT},e.next=9,Gn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,xr({message:s.transfer[1],fee:s.fee},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,Pr.success({message:s.unlock[1]},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Dr.success({message:s.lockExpired[1]},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},id=function(e,t,n){ad(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(ft["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=zl(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(yc["a"])(r),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=zl(t,2),r=zl(n[0],2),a=r[0],o=r[1],i=n[1].caps,c={secrethash:a,direction:Ea.RECEIVED},e.next=4,xr({message:o.transfer[1],fee:o.fee},c);case 4:if(!o.secret||o.secretReveal){e.next=7;break}return e.next=7,Ar({secret:o.secret[1].value},c);case 7:if(!o.secretReveal){e.next=10;break}return e.next=10,Cr({message:o.secretReveal[1]},c);case 10:if((null===i||void 0===i?void 0:i[Se.NO_RECEIVE])||o.secret||!o.secretRequest){e.next=15;break}return e.next=13,Gn.request(void 0,{address:o.transfer[1].initiator});case 13:return e.next=15,Nr({message:o.secretRequest[1]},c);case 15:case"end":return e.stop()}}),e)}))))};function cd(e,t){return pd(e)||dd(e,t)||ud(e,t)||sd()}function sd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ud(e,t){if(e){if("string"===typeof e)return ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ld(e,t):void 0}}function ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pd(e){if(Array.isArray(e))return e}var fd=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(xr.is),Object(B["a"])((function(e){return e.meta.direction===Ea.RECEIVED&&e.payload.message.target!==r})),Object(yc["a"])(t,a),Object(B["a"])((function(e){var t=cd(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(U["a"])((function(e){var t=cd(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return Tr.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:w["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Ea.SENT})})))};function bd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function yd(e,t){return Od(e)||gd(e,t)||vd(e,t)||md()}function md(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vd(e,t){if(e){if("string"===typeof e)return hd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hd(e,t):void 0}}function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Od(e){if(Array.isArray(e))return e}var kd=function(e,t){return e.pipe(Object(B["a"])(Ko(st(zn))),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=yd(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=yd(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Sr({message:o},{secrethash:i,direction:Ea.SENT});case 16:case"end":return e.stop()}}),e)}))))},jd=function(e,t){return e.pipe(Object(B["a"])(jn([Sr,Ir,Mr])),Object(B["a"])((function(e){return e.meta.direction===Ea.RECEIVED})),Object(yc["a"])(t),Object(U["a"])((function(e){var t=yd(e,2),n=t[0],r=t[1].received;return vr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},wd=function(e,t){return e.pipe(Object(B["a"])(Ko(st(zn))),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=yd(t,2),r=n[0],a=n[1],o=r.payload.message,i=Kt()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Ea.SENT},e.next=8,Tr.success({balanceProof:Vo(a.sent[i].unlock[1])},c);case 8:return e.next=10,Ir({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},_d=function(e,t){return e.pipe(Object(B["a"])(Ko(st(zn))),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=yd(t,2),r=n[0],a=n[1],o=r.payload.message,i=Kt()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Mr({message:o},{secrethash:i,direction:Ea.SENT});case 7:case"end":return e.stop()}}),e)}))))},Ed=function(e,t,n){bd(t);var r=n.log,a=n.signer,o=new au(32);return e.pipe(Object(B["a"])(Ko([st(ir),st(pr)])),Object(wc["a"])((function(e){var t=e.payload.message;return Object(I["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(M["a"])(vr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Rn.PROCESSED,message_identifier:n};return Object(ft["a"])(Zo(a,s,{log:r})).pipe(Object(vc["a"])((function(e){return o.put(i,e)})),Object(U["a"])((function(t){return vr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},Td=n("b6ad"),xd=n.n(Td);function Sd(e,t){return Pd(e)||Cd(e,t)||Rd(e,t)||Ad()}function Ad(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rd(e,t){if(e){if("string"===typeof e)return Nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nd(e,t):void 0}}function Nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pd(e){if(Array.isArray(e))return e}function Id(e,t){return xd()(e,t,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var Dd=function(e,t){return e.pipe(Object(B["a"])(Ko(st(ir))),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Sd(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&Id(o.lock,s.lock)){e.next=8;break}return e.abrupt("return");case 8:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=10;break}return e.abrupt("return");case 10:return u={secrethash:i,direction:Ea.SENT},e.next=13,Lr({message:o},u);case 13:return e.next=15,Tr.failure(new dn(qt.XFER_REFUNDED),u);case 15:case"end":return e.stop()}}),e)}))))};function Md(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ld(e,t){return qd(e)||$d(e,t)||Bd(e,t)||Ud()}function Ud(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bd(e,t){if(e){if("string"===typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fd(e,t):void 0}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qd(e){if(Array.isArray(e))return e}function Hd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(Ms["a"])((function(e){return e.pipe(Object(Ds["a"])(t))})),Object(zi["a"])(e))}}function Vd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return ml(t,e,Tn(vr,e.meta)).pipe(Hd(n,r))}var Wd=function(e,t,n,r){return r.meta.direction!==Ea.SENT?D["a"]:n.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=vr.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(rc("sent",o),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Vd(c,e,s,a)})))},Gd=function(e,t,n,r){return r.meta.direction!==Ea.SENT?D["a"]:t.pipe(Object(F["a"])(),Object(yc["a"])(n),Object(yt["a"])((function(n){var a=Ld(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=vr.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(rc("sent",c),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Vd(l,e,d,i)})))},Zd=function(e,t,n,r){return r.meta.direction!==Ea.SENT?D["a"]:t.pipe(Object(F["a"])(),Object(yc["a"])(n),Object(yt["a"])((function(n){var a=Ld(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(rc("sent",c),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Vd(u,e,l,i)})))},Kd=function(e,t,n,r){return r.meta.direction!==Ea.RECEIVED?D["a"]:t.pipe(Object(F["a"])(),Object(yc["a"])(n),Object(yt["a"])((function(n){var a=Ld(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(rc("received",c),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Vd(u,e,l,i)})))},Xd=function(e,t,n,r){return r.meta.direction!==Ea.RECEIVED?D["a"]:t.pipe(Object(F["a"])(),Object(yc["a"])(n),Object(yt["a"])((function(n){var a=Ld(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=vr.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(rc("received",c),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Vd(u,e,l,i)})))},Yd=function(e,t,n){Md(t);var r=n.latest$,a=n.config$,o=r.pipe(rc("state"));return e.pipe(Object(B["a"])(jn([xr,Pr.success,Dr.success,Nr,Cr])),Object($["a"])((function(t){return xr.is(t)?Wd(e,o,a,t):Pr.success.is(t)?Gd(e,o,a,t):Dr.success.is(t)?Zd(e,o,a,t):Nr.is(t)?Kd(e,o,a,t):Xd(e,o,a,t)})))};function Qd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function zd(e,t){return rp(e)||np(e,t)||ep(e,t)||Jd()}function Jd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ep(e,t){if(e){if("string"===typeof e)return tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tp(e,t):void 0}}function tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function np(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rp(e){if(Array.isArray(e))return e}var ap=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(Ko(st(Jn))),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,o,i,c,s;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=zd(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Nr({message:c},{secrethash:c.secrethash,direction:Ea.SENT});case 10:case"end":return e.stop()}}),e)}))))},op=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),D["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,p=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),D["a"];if(i.amount.lt(p))return o.error("SecretRequest for amount too small!",i,u),Object(M["a"])(Tr.failure(new dn(qt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(p)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(M["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Rn.SECRET_REVEAL,message_identifier:ci(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(ft["a"])(Zo(a,b,{log:o}))}return s.pipe(Object($["a"])(f.a.mark((function e(n){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Cr({message:n},t.meta);case 2:return e.next=4,vr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},ip=function(e,t,n){Qd(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(jn(Nr)),Object(B["a"])((function(e){return e.meta.direction===Ea.SENT})),Object(wc["a"])((function(e){return o.pipe(rc("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return op(t,e,{log:r,signer:a})})))})))},cp=function(e,t){return e.pipe(Object(B["a"])(Ko(er)),Object(yc["a"])(t),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=zd(t,2),r=n[0],a=n[1],o=r.payload.message,i=ai(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Ea.SENT},e.next=7,Ar({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,Pr.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Ar({secret:o.secret},{secrethash:i,direction:Ea.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},sp=function(e,t,n){Qd(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(jn([Ar,Rr.success])),Object(B["a"])((function(e){return e.meta.direction===Ea.RECEIVED})),Object(wc["a"])((function(e){return o.pipe(rc("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Rn.SECRET_REVEAL,message_identifier:ci(),secret:e.payload.secret};return Zo(a,t,{log:r})})),Object(U["a"])((function(t){return Cr({message:t},e.meta)})),Object(Ji["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),D["a"]})))})))},up=function(e,t,n){Qd(e);var r=n.secretRegistryContract;return Pt(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(yc["a"])(t),Object(B["a"])((function(e){var t=zd(e,2),n=zd(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(f.a.mark((function e(t){var n,r,a,o,i,c,s,u;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=zd(t,2),r=zd(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Rr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Ea.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Rr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Ea.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},lp=function(e){return e.pipe(Object(B["a"])(Rr.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(U["a"])((function(e){return Tr.success({},e.meta)})))},dp=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(rc(Ea.RECEIVED),Object($["a"])((function(e){return Object(ft["a"])(Object.keys(e))})),Object($s["a"])(),Object($["a"])((function(t){return e.pipe(Object(B["a"])(In.is),Object(yc["a"])(a.pipe(Object(q["a"])("state",Ea.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=zd(e,3),a=r[0],o=r[1],i=r[2],c=i.caps,s=i.revealTimeout;return!(null===c||void 0===c?void 0:c[Se.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(s).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(fc["a"])((function(n){var r=zd(n,2),a=r[1],o={secrethash:t,direction:Ea.RECEIVED};return ml(e,Rr.request({secret:a.secret[1].value},o),xn(Rr,o))})),Object(zi["a"])(a.pipe(rc("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},pp=function(e,t,n){Qd(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(B["a"])(Rr.request.is),Object(yc["a"])(s),Object($["a"])((function(e){var t,n=zd(e,2),s=n[0],u=n[1].subkey,l=es({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,p=ts(c,d);return Object(ft["a"])(p.functions.registerSecret(s.payload.secret)).pipe(Ac("registerSecret",qt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(hc["a"])(),Object(Ji["a"])((function(e){return Object(M["a"])(Rr.failure(e,s.meta))})))})))},fp=function(e){return e.pipe(Object(B["a"])(Ko(st(lr))),Object(B["a"])((function(e){return e.payload.message.participant===e.meta.address})),Object(U["a"])((function(e){var t=e.payload.message;return Fr.request({message:t},{tokenNetwork:t.token_network_address,partner:t.participant,totalWithdraw:t.total_withdraw,expiration:t.expiration.toNumber()})})))},bp=function(e){return e.pipe(Object(B["a"])(jn(Fr.success)),Object(U["a"])((function(e){return vr.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},yp=n("1a2de");function mp(e,t){return kp(e)||Op(e,t)||hp(e,t)||vp()}function vp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hp(e,t){if(e){if("string"===typeof e)return gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gp(e,t):void 0}}function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Op(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kp(e){if(Array.isArray(e))return e}var jp=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function wp(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Se.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");if(!(r in e.channels[n]))return"path: there's no direct channel with partner \"".concat(r,'"');var c=e.channels[n][r];if(c.state!==ka.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(ka.open,'"');var s=Sc(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var _p=R()((function(e){return jp(void 0,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function Ep(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Re["t"]({message:Re["q"],network_info:Re["t"]({chain_id:Re["j"](a.chainId),token_network_registry_address:Re["j"](o.TokenNetworkRegistry.address)}),operator:Re["q"],payment_address:ot,price_info:et(32),version:Re["q"]}),s=ot.is(e)?Object(ft["a"])(r.functions.urls(e)):Object(M["a"])(e);return s.pipe(Object(yc["a"])(i),Object($["a"])((function(e){var t=mp(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new dn(qt.PFS_EMPTY_URL);if(!as(a))throw new dn(qt.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(Ws["a"])(a+"/api/v1/info").pipe(Object(Ls["a"])(o),Object($["a"])((function(e){return jp(n,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Xe,t.t1=c,t.t2=wa,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,_p(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(U["a"])((function(e){var t=mp(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function Tp(e,t){var n=t.log;return Object(ft["a"])(e).pipe(Object($["a"])((function(e){return Ep(e,t).pipe(Object(Ji["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),D["a"]})))}),5),Object(Is["a"])(),Object(U["a"])((function(e){if(!e.length)throw new dn(qt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e){return Np(e)||Rp(e)||Mp(e)||Ap()}function Ap(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Np(e){if(Array.isArray(e))return Lp(e)}function Cp(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Mp(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Pp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ip(e,t){return Bp(e)||Up(e,t)||Mp(e,t)||Dp()}function Dp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mp(e,t){if(e){if("string"===typeof e)return Lp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lp(e,t):void 0}}function Lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Bp(e){if(Array.isArray(e))return e}var Fp=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},$p=R()((function(e){return Fp(void 0,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),qp=Re["n"](Re["t"]({error_code:Re["l"],errors:Re["q"]}));function Hp(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}var Vp=function(e,t,n,r,a){return{sender:e,receiver:t,chain_id:Object(j["bigNumberify"])(n),amount:w["Zero"],one_to_n_address:r,expiration_block:Object(j["bigNumberify"])(a).add(2*Math.pow(10,5))}},Wp=function(e,t){return Object.assign(Object.assign({},e),{amount:e.amount.add(t)})},Gp=function(e){return Object(j["concat"])([Oa(e.one_to_n_address,20),Oa(e.chain_id,32),Oa(Io.IOU,32),Oa(e.sender,20),Oa(e.receiver,20),Oa(e.amount,32),Oa(e.expiration_block,32)])},Zp=function(e,t){return Object(ft["a"])(t.signMessage(Gp(e))).pipe(Object(U["a"])((function(t){return Object.assign(Object.assign({},e),{signature:t})})))},Kp=function(e,t,n){return Object(I["a"])((function(){var r=Hp(),a=Object(j["concat"])([e,t,Object(j["toUtf8Bytes"])(r)]);return Object(ft["a"])(n.signMessage(a)).pipe(Object(U["a"])((function(n){return{sender:e,receiver:t,timestamp:r,signature:n}})))}))},Xp=function(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.userDepositContract,c=n.latest$;return c.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var s,u=n.state,l=n.config.httpTimeout,d=null===(s=u.path.iou[t])||void 0===s?void 0:s[e.address];return(d?Object(M["a"])(d):Kp(r,e.address,a).pipe(Object($["a"])((function(n){return Object(Ws["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(n).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Ls["a"])(l))})),Object(yc["a"])(c.pipe(Object(q["a"])("state"))),Object($["a"])((function(t){var n=Ip(t,2),a=n[0],c=n[1].blockNumber;return Fp(void 0,void 0,void 0,f.a.mark((function t(){var n,s,u,l;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==a.status){t.next=10;break}return t.t0=Vp,t.t1=r,t.t2=e.address,t.t3=o.chainId,t.next=7,$p(i);case 7:return t.t4=t.sent,t.t5=c,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5));case 10:return t.next=12,a.text();case 12:if(n=t.sent,a.ok){t.next=15;break}throw new dn(qt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:a.status,responseText:n});case 15:if(s=Xe(_r,wa(n)),u=s.last_iou,l=Object(j["verifyMessage"])(Gp(u),u.signature),l===r){t.next=19;break}throw new dn(qt.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:r});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))).pipe(Object(U["a"])((function(t){return Wp(t,e.price)})),Object($["a"])((function(e){return Zp(e,a)})))})))},Yp=function(e,t,n){Pp(t);var r=n.log,a=n.latest$;return e.pipe(Object(B["a"])(jn(Hr.request)),Object(wc["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,p=e.meta,b=p.tokenNetwork,y=p.target;if(!(b in i.channels))throw new dn(qt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new dn(qt.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[Se.NO_RECEIVE])throw new dn(qt.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(M["a"])({paths:e.payload.paths,iou:void 0});if(!0===wp(i,c,b,y,y,e.meta.value))return Object(M["a"])({paths:[{path:[n.address,y],fee:w["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new dn(qt.PFS_DISABLED);var m=e.payload.pfs?Object(M["a"])(e.payload.pfs):u?Ep(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return Tp(e,n)})),Object(vc["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(M["a"])({pfs:e,iou:void 0}):Xp(e,b,n).pipe(Object(U["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(Ws["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:_a({from:n.address,to:y,value:et(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:et(32).encode(a.amount),expiration_block:et(32).encode(a.expiration_block),chain_id:et(32).encode(a.chain_id)}):void 0})}).pipe(Object(Ls["a"])(l),Object(U["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return Fp(void 0,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(U["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=wa(n);return t.ok?{paths:Xe(Or,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:Xe(qp,a),iou:r}})))})),Object(yc["a"])(a),Object($["a"])((function(t){var a=Ip(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(ft["a"])(f.a.mark((function t(){var a,i,u,l,d,p,b,y,m,v,h,g,O;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,Wr({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,Gr(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new dn(qt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new dn(qt.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],p=new Set,b=Cp(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,v=m.path,h=m.fee,v[0]===n.address&&(v=v.slice(1)),g=v[0],!p.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!h.gt(d[0].fee)||"path: already selected a smaller fee":wp(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(h)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",v),p.add(g),t.abrupt("continue",30);case 29:d.push({path:v,fee:h});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new dn(qt.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,Hr.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(Ji["a"])((function(t){return Object(M["a"])(Hr.failure(t,e.meta))})))})))};function Qp(e){return Object.entries(e).map((function(e){var t=Ip(e,2),n=t[0],r=t[1];return Object.entries(r).map((function(e){var t=Ip(e,2),r=t[0],a=t[1];return["".concat(r,"@").concat(n),a]}))})).reduce((function(e,t){return[].concat(Sp(e),Sp(t))}),[])}function zp(e){var t=e.split("@"),n=Ip(t,2),r=n[0],a=n[1];return{key:e,tokenNetwork:a,partnerAddr:r}}function Jp(e){return e.pipe(rc("state","channels"),Object(wc["a"])((function(e){return Object(ft["a"])(Qp(e))})),Object(Yi["a"])((function(e,t){var n=e.acc,r=Ip(t,2),a=r[0],o=r[1];return n[a]===o?{acc:n}:{acc:Object.assign(Object.assign({},n),xp({},a,o)),changed:Object.assign(Object.assign({},o),zp(a))}}),{acc:{}}),Object(q["a"])("changed"),Object(B["a"])(Ye))}var ef=function(e,t,n){Pp(e),Pp(t);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.latest$,s=n.config$;return Jp(c).pipe(Object(bc["a"])((function(e){var t=e.key;return t})),Object(yc["a"])(s),Object($["a"])((function(e){var t=Ip(e,2),n=t[0],c=t[1].httpTimeout;return n.pipe(Object(yc["a"])(s),Object(B["a"])((function(e){var t=Ip(e,2),n=t[1].pfsRoom;return!!n})),Object(yp["a"])(c/2),Object(wc["a"])((function(e){var t,n,c,s,u=Ip(e,2),l=u[0],d=u[1],p=d.revealTimeout,f=d.pfsRoom,b=l.tokenNetwork,y=l.partnerAddr;if(l.state!==ka.open)return D["a"];var m=Sc(l),v=m.ownCapacity,h=m.partnerCapacity,g={type:Rn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:b,channel_identifier:Object(j["bigNumberify"])(l.id)},updating_participant:a,other_participant:y,updating_nonce:null!==(n=null===(t=l.own.balanceProof)||void 0===t?void 0:t.nonce)&&void 0!==n?n:w["Zero"],other_nonce:null!==(s=null===(c=l.partner.balanceProof)||void 0===c?void 0:c.nonce)&&void 0!==s?s:w["Zero"],updating_capacity:v,other_capacity:h,reveal_timeout:Object(j["bigNumberify"])(p)};return Object(I["a"])((function(){return Zo(i,g,{log:r})})).pipe(Object(U["a"])((function(e){return hr({message:e},{roomName:f})})),Object(Ji["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),D["a"]})))})))})))},tf=function(e,t,n){var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return e.pipe(Object(B["a"])(Ln.is),Object(yc["a"])(t,c),Object(B["a"])((function(e){var t=Ip(e,3),n=t[2],r=n.pfsRoom,a=n.caps;return!!r&&!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])})),Object($["a"])((function(e){var t,n=Ip(e,3),c=n[0],s=n[1],u=n[2].pfsRoom,l=null===(t=s.channels[c.meta.tokenNetwork])||void 0===t?void 0:t[c.meta.partner];if((null===l||void 0===l?void 0:l.state)!==ka.open)return D["a"];var d={type:Rn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:c.meta.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(l.id)},updating_participant:a,timestamp:Hp(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:w["Zero"],flat:w["Zero"]}};return Object(ft["a"])(Zo(i,d,{log:r})).pipe(Object(U["a"])((function(e){return hr({message:e},{roomName:u})})),Object(Ji["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),D["a"]})))})))},nf=function(e,t,n){Pp(e),Pp(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(rc("pfs"),Object(yt["a"])((function(e){return""!==e?D["a"]:Pt(r,[r.filters.RegisteredService(null,null,null,null)],Object(M["a"])(a.ServiceRegistry.block_number)).pipe(Object(bc["a"])((function(e){var t=Ip(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(yt["a"])((function(e){var t=Ip(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return D["a"];var i=o.sub(a).lt(w["Two"].pow(31))?Object(M["a"])({service:n,valid:!1}).pipe(Object(Ds["a"])(new Date(o.toNumber()))):D["a"];return Object(P["a"])(Object(M["a"])({service:n,valid:!0}),i)})))})),Object(Yi["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(Sp(e),[n]):e}),[]),Object(nc["a"])(),Object(yp["a"])(1e3),Object(U["a"])((function(e){return Vr({pfsList:e})})))})))},rf=function(e,t,n){Pp(e),Pp(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(rc("state","blockNumber"),Object(fc["a"])((function(){return o.functions.balances(r)})),Object(nc["a"])((function(e,t){return t.eq(e)})),Object(U["a"])(Zr))};function af(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$;return function(e){var c=Ip(e,2),s=c[0],u=c[1],l=u.monitoringRoom,d=u.monitoringReward;Ze(s.state===ka.open&&s.partner.balanceProof&&d);var p=s.partner.balanceProof,f=Bo(p.transferredAmount,p.lockedAmount,p.locksroot),b=Object(j["concat"])([Oa(s.tokenNetwork,20),Oa(r.chainId,32),Oa(Io.BALANCE_PROOF_UPDATE,32),Oa(s.id,32),Oa(f,32),Oa(p.nonce,32),Oa(p.messageHash,32),Oa(p.signature,65)]);return i.pipe(rc("udcBalance"),Object(B["a"])((function(e){return e.gte(d)})),Object(dc["a"])(1),Object($["a"])((function(){return a.signMessage(b)})),Object($["a"])((function(e){return Zo(a,{type:Rn.MONITOR_REQUEST,balance_proof:{chain_id:p.chainId,token_network_address:p.tokenNetworkAddress,channel_identifier:Object(j["bigNumberify"])(s.id),nonce:p.nonce,balance_hash:f,additional_hash:p.messageHash,signature:p.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:d},{log:n})})),Object(U["a"])((function(e){return hr({message:e},{roomName:l})})),Object(Ji["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),D["a"]})))}}var of=function(e,t,n){return Pp(e),Pp(t),Jp(n.latest$).pipe(Object(bc["a"])((function(e){var t=e.key;return t})),Object(yc["a"])(n.config$),Object($["a"])((function(e){var t=Ip(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(nc["a"])((function(e,t){var n,r,a,o,i,c,s,u,l,d;return!1!==(null===(a=null===(r=null===(n=t.partner.balanceProof)||void 0===n?void 0:n.transferredAmount)||void 0===r?void 0:r.eq)||void 0===a?void 0:a.call(r,null!==(i=null===(o=e.partner.balanceProof)||void 0===o?void 0:o.transferredAmount)&&void 0!==i?i:w["Zero"]))&&!1!==(null===(u=null===(s=null===(c=t.partner.balanceProof)||void 0===c?void 0:c.lockedAmount)||void 0===s?void 0:s.eq)||void 0===u?void 0:u.call(s,null!==(d=null===(l=e.partner.balanceProof)||void 0===l?void 0:l.lockedAmount)&&void 0!==d?d:w["Zero"]))})),Object(L["a"])(1),Object(yc["a"])(n.config$),Object(B["a"])((function(e){var t,n=Ip(e,2),r=n[0],a=n[1],o=a.monitoringRoom,i=a.monitoringReward;return!!o&&!!(null===(t=null===i||void 0===i?void 0:i.gt)||void 0===t?void 0:t.call(i,w["Zero"]))&&r.state===ka.open&&!!r.partner.balanceProof&&r.partner.balanceProof.transferredAmount.add(r.partner.balanceProof.lockedAmount).gt(w["Zero"])})),Object(yp["a"])(a/2),Object(yt["a"])(af(n)))})))};function cf(e,t){return pf(e)||df(e,t)||uf(e,t)||sf()}function sf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uf(e,t){if(e){if("string"===typeof e)return lf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lf(e,t):void 0}}function lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function df(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pf(e){if(Array.isArray(e))return e}function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bf(e,t,n){var r=n.defaultConfig;return Object(pt["a"])([Object(pt["a"])([e,t,t.pipe(rc("config"),Object(U["a"])((function(e){return Object.assign(Object.assign({},r),e)}))),oc(e),e.pipe(Object(B["a"])(Vr.is),Object(q["a"])("payload","pfsList"),Object(Xi["a"])([])),e.pipe(Object(B["a"])(Xn.is),Object(Yi["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),ff({},t.meta.address,t.payload)):$a()(t.meta.address,e)}),{}),Object(Xi["a"])({}))]),e.pipe(Object(B["a"])(Zr.is),Object(q["a"])("payload"),Object(Xi["a"])(w["Zero"]))]).pipe(Object(U["a"])((function(e){var t=cf(e,2),n=cf(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=t[1];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:u}})))}var yf=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),mf=function(e,t,n){var r=e.pipe(Object(B["a"])(jn(Kr))),a=e.pipe(Object(Qi["a"])(tc()(jn(Kr)),!0)),o=t.pipe(Object(zi["a"])(r));return bf(a,o,n).subscribe(n.latest$),Object(ft["a"])(Object.values(yf)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(Ji["a"])((function(e){return n.log.error("Fatal error:",e),Object(M["a"])(Kr({reason:e}))})),Object(zi["a"])(r))};function vf(e){return Of(e)||gf(e)||wf(e)||hf()}function hf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Of(e){if(Array.isArray(e))return _f(e)}function kf(e,t){return Tf(e)||Ef(e,t)||wf(e,t)||jf()}function jf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wf(e,t){if(e){if("string"===typeof e)return _f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_f(e,t):void 0}}function _f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ef(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Tf(e){if(Array.isArray(e))return e}function xf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Af(e,t,n){return t&&Sf(e.prototype,t),n&&Sf(e,n),e}var Rf=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Nf=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,p=this;xf(this,e),this.resolveName=t.resolveName.bind(t);var b=o.address;this.log=y.a.getLogger("raiden:".concat(b)),t.resetEventsBlock(o.blockNumber+1);var m=new N["a"](1);this.state$=m.pipe(rc("state")),this.action$=m.pipe(rc("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(Object(U["a"])((function(e){return Jc(e)}))),this.transfers$=Qc(this.state$),this.events$=this.action$.pipe(Object(B["a"])(jn(Qr))),this.getTokenInfo=R()((function(e){return Rf(this,void 0,void 0,f.a.mark((function t(){var n,r,a,o,i,c,s;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ze(ot.is(e),"Invalid address"),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=kf(r,4),o=a[0],i=a[1],c=a[2],s=a[3],Ze(o&&null!=i,"Not a token contract"),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:m,config$:m.pipe(rc("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:b,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:Z.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:R()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:R()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:he.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),main:c},this.userDepositTokenAddress=R()((function(){return Rf(p,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var v=Object(T["createLogger"])({predicate:function(){return p.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config=Object.assign(Object.assign({},i),o.config),this.deps.config$.subscribe((function(e){return p.config=e})),this.deps.config$.pipe(rc("logger")).subscribe((function(e){return p.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(_["b"])(Ki,o,Object(_["a"])(v,this.epicMiddleware))}return Af(e,[{key:"start",value:function(){var e=this;Ze(this.epicMiddleware,"Already started or stopped!"),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(mf),this.epicMiddleware=void 0,this.store.dispatch(Xr({}))}},{key:"stop",value:function(){this.store.dispatch(Kr({reason:xe.STOP}))}},{key:"getBlockNumber",value:function(){return Rf(this,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(Xr(Xe(Ft,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:es(this.deps,this.config.subkey).address,Ze(ot.is(e),"Invalid address"),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Rf(this,void 0,void 0,f.a.mark((function n(){var r;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:es(this.deps,this.config.subkey).address,Ze(ot.is(t)&&ot.is(e),"Invalid address"),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Rf(this,void 0,void 0,f.a.mark((function e(){var t=this;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Rf(this,void 0,void 0,f.a.mark((function t(){var n,r;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Ze(ot.is(e),"Invalid address"),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,Ze(r&&r!==w["AddressZero"],"Unknown token network"),this.store.dispatch(Dn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Rf(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u,l;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),a.next=3,this.monitorToken(e);case 3:return o=a.sent,Ze(!n.subkey||this.deps.main,"Can't send tx from subkey if not set"),i=void 0===n.deposit?void 0:Xe(et(32),n.deposit),c={tokenNetwork:o,partner:t},s=Sn(Mn,c,this.action$,!1).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Mn.request(Object.assign(Object.assign({},n),{deposit:i}),c)),a.next=11,s;case 11:return u=a.sent,null===r||void 0===r||r({type:we.OPENED,payload:{txHash:u}}),a.next=15,this.state$.pipe(rc("channels",o,t,"state"),Object(F["a"])((function(e){return e===ka.open}))).toPromise();case 15:if(null===r||void 0===r||r({type:we.CONFIRMED,payload:{txHash:u}}),!i){a.next=21;break}return a.next=19,Sn(Un,c,this.action$,!0).then((function(e){var t=e.txHash;return t}));case 19:l=a.sent,null===r||void 0===r||r({type:we.DEPOSITED,payload:{txHash:l}});case 21:return a.abrupt("return",u);case 22:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Rf(this,void 0,void 0,f.a.mark((function r(){var o,i,c,s,u;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state,i=o.tokens[e],Ze(i,"Unknown token network"),Ze(!a||this.deps.main,"Can't send tx from subkey if not set"),c=Xe(et(32),n),s={tokenNetwork:i,partner:t},u=Sn(Un,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Un.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Rf(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ze(o,"Unknown token network"),Ze(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=Sn(Fn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Fn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Rf(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ze(o,"Unknown token network"),Ze(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=Sn(qn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(qn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Rf(this,void 0,void 0,f.a.mark((function t(){var n,r;return f.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ze(ot.is(e),"Invalid address"),n={address:e},r=Sn(Gn,n,this.action$),this.store.dispatch(Gn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Rf(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u,l,d,p,b=this;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ze(o,"Unknown token network"),i=Xe(et(32),n),c=r.paymentId?Xe(et(8),r.paymentId):ii(),s=r.paths?Xe(kr,r.paths):void 0,u=r.pfs?Xe(jr,r.pfs):void 0,Ze(void 0===r.secret||rt.is(r.secret),"Invalid options.secret"),Ze(void 0===r.secrethash||nt.is(r.secrethash),"Invalid options.secrethash"),l=r.secret?r.secret:r.secrethash?void 0:oi(),d=r.secrethash||ai(l),Ze(!l||ai(l)===d,"Provided secrethash must match the sha256 hash of provided secret"),p={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(P["a"])(this.action$.pipe(Object(F["a"])(Tn(Hr,p)),Object(U["a"])((function(e){if(Hr.failure.is(e))throw e.payload;return e.payload.paths}))),Object(I["a"])((function(){return b.store.dispatch(Hr.request({paths:s,pfs:u},p)),D["a"]}))).pipe(Object($["a"])((function(e){return Object(P["a"])(b.action$.pipe(Object(B["a"])(jn([xr,Tr.failure])),Object(F["a"])((function(e){return e.meta.secrethash===d})),Object(U["a"])((function(e){if(Tr.failure.is(e))throw e.payload;return d}))),Object(I["a"])((function(){return b.store.dispatch(Tr.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:Ea.SENT})),D["a"]})))}))).toPromise());case 14:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Rf(this,void 0,void 0,f.a.mark((function o(){var i,c;return f.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(Ze(nt.is(e),"Invalid secrethash for transfer"),i=this.state,Ze(e in i.sent,"Unknown secrethash"),c=di(i.sent[e]),!c.completed){o.next=10;break}if(!c.success){o.next=9;break}return o.abrupt("return",null===(n=null===(t=this.state.sent[e].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 9:throw new dn(qt.XFER_ALREADY_COMPLETED,{status:c.status});case 10:return o.next=12,Sn(Tr,{secrethash:e,direction:Ea.SENT},this.action$);case 12:return i=this.state,o.abrupt("return",null===(a=null===(r=i.sent[e].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 14:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Rf(this,void 0,void 0,f.a.mark((function a(){var o,i,c,s,u;return f.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ze(o,"Unknown token network"),i=Xe(et(32),n),c=r.pfs?Xe(jr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Sn(Hr,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Hr.request({pfs:c},s)),a.abrupt("return",u);case 9:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Rf(this,void 0,void 0,f.a.mark((function r(){var a,o,i,c;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state.tokens[e],Ze(a,"Unknown token network"),o=Xe(et(32),n),i={tokenNetwork:a,target:t,value:o},c=Sn(Hr,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Hr.request({pfs:null},i)),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Rf(this,void 0,void 0,f.a.mark((function e(){var t=this;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ze(null!==this.config.pfs,"PFS disabled in config"),e.abrupt("return",(this.config.pfs?Object(M["a"])([this.config.pfs]):this.deps.latest$.pipe(rc("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return Tp(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Rf(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ze(ot.is(e),"Invalid address"),Ze(!r||this.deps.main,"Can't send tx from subkey if not set"),Ze("homestead"!==this.deps.network.name,"Minting is only allowed on test networks."),a=es(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=fe.connect(e,o),n.next=7,ns(i,"mint",[Xe(et(32),t)],qt.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,rs(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Rf(this,void 0,void 0,f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.path.iou).reduce((function(e,t){var r=Object.values(t).filter((function(e){return e.expiration_block.gte(n)}));return e.push.apply(e,vf(r)),e}),new Array).reduce((function(e,t){return e.add(t.amount)}),w["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Rf(this,void 0,void 0,f.a.mark((function n(){var a,o,i,c,s,u,l,d,p,b;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ze(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),a=Object(j["bigNumberify"])(e),Ze(a.gt(w["Zero"]),"Please deposit a positive amount.",this.log.debug),o=es(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,s=ts(this.deps.userDepositContract,i),n.t0=ts,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=i,u=(0,n.t0)(n.t3,n.t4),n.next=15,u.functions.balanceOf(c);case 15:return l=n.sent,Ze(l.gte(e),"Insufficient token balance (".concat(l,")."),this.log.debug),n.next=19,ns(u,"approve",[s.address,a],qt.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 19:return d=n.sent,null===t||void 0===t||t({type:we.APPROVED,payload:{txHash:d.transactionHash}}),n.next=23,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 23:return p=n.sent,n.next=26,ns(s,"deposit",[this.address,p.add(a)],qt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 26:return b=n.sent,null===t||void 0===t||t({type:we.DEPOSITED,payload:{txHash:b.transactionHash}}),n.next=30,rs(b,this.deps);case 30:return this.log.debug('deposit tx "'.concat(b.transactionHash,'" confirmed')),null===t||void 0===t||t({type:we.CONFIRMED,payload:{txHash:b.transactionHash}}),n.abrupt("return",b.transactionHash);case 33:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Rf(this,void 0,void 0,f.a.mark((function n(){var o,i,c,s,u,l,d,p,b,y;return f.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Ze(ot.is(e),"Invalid address",this.log.debug),Ze(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=es(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(j["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(j["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),Ze(d.gt(w["Zero"]),"Not enough balance for a transfer",this.log.error),p=d.lte(t)?d:Object(j["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:p,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:if(y=n.sent,y.status){n.next=26;break}throw new dn(qt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED);case 26:return n.abrupt("return",b.hash);case 27:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Rf(this,void 0,void 0,f.a.mark((function r(){var o,i,c,s,u,l,d;return f.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ze(ot.is(e)&&ot.is(t),"Invalid address",this.log.debug),Ze(!a||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=es(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=ts(this.deps.getTokenContract(e),i),r.next=6,this.getTokenBalance(e,c);case 6:return u=r.sent,l=u.lte(n)?u:Object(j["bigNumberify"])(n),r.next=10,ns(s,"transfer",[t,l],qt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 10:return d=r.sent,r.abrupt("return",d.transactionHash);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return Rf(this,void 0,void 0,f.a.mark((function i(){var c,s,u,l,d,p,b,y,m,v,h,g;return f.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new k["JsonRpcProvider"](e):e instanceof k["JsonRpcProvider"]?e:new k["Web3Provider"](e),Dt(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=Kc(s)),i.next=8,Yc(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,p=u.main,i.next=14,Ba(s,r,d,n,a&&Xe(Ft,a));case 14:return b=i.sent,y=b.state,m=b.onState,v=b.onStateComplete,h=b.defaultConfig,Ze(d===y.address,'Mismatch between provided account and loaded state: "'.concat(d,'" !== "').concat(y.address,'"')),Ze(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,"Mismatch between network or registry address and loaded state"),g=new this(c,s,l,r,y,h,p),m&&g.state$.subscribe(m,v,v),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Te.sdk}},{key:"contractVersion",get:function(){return Te.contracts}}]),e}()},f45e:function(e,t,n){},ff61:function(e,t,n){}});
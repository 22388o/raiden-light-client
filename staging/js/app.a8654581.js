(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-15f0b7af":"22823f45","chunk-42bc8b47":"a651cb6e","chunk-5aa157c6":"b3177a12","chunk-67b172b3":"4324fad0","chunk-7916f8ca":"73ec5ce6","chunk-795f4e24":"f57f5346","chunk-895be7da":"e57cd428","chunk-6a8b17ac":"6185d8b7","chunk-7c07f9a4":"b8ac1b3b","chunk-08dab35b":"0187e4f3","chunk-508c3623":"8cb17361","chunk-9596d7b8":"8c9ec38d","chunk-25fdc0d3":"1bde6291","chunk-45939c11":"68fec074","chunk-4d730eb5":"964275db","chunk-d2121fc2":"649504f0"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-15f0b7af":1,"chunk-42bc8b47":1,"chunk-5aa157c6":1,"chunk-67b172b3":1,"chunk-7916f8ca":1,"chunk-795f4e24":1,"chunk-895be7da":1,"chunk-6a8b17ac":1,"chunk-7c07f9a4":1,"chunk-08dab35b":1,"chunk-508c3623":1,"chunk-9596d7b8":1,"chunk-25fdc0d3":1,"chunk-45939c11":1,"chunk-4d730eb5":1,"chunk-d2121fc2":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-15f0b7af":"1d5a726d","chunk-42bc8b47":"50c8bcda","chunk-5aa157c6":"796be383","chunk-67b172b3":"53c90c86","chunk-7916f8ca":"665ed9bd","chunk-795f4e24":"3e5a8903","chunk-895be7da":"7f5fbf66","chunk-6a8b17ac":"2e6a0e49","chunk-7c07f9a4":"cf48c70b","chunk-08dab35b":"78af775a","chunk-508c3623":"972f7492","chunk-9596d7b8":"9e129671","chunk-25fdc0d3":"8d1d0b4a","chunk-45939c11":"d1a04ae7","chunk-4d730eb5":"d84f9e81","chunk-d2121fc2":"f4e6a22c"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["b"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("e6c7"),n("2877")),O=Object(g["a"])(v,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","transaction_hash":"0xd206df08ae6d2107efcfae3c666456580f2d9b2a62d8f3fdcaa95c86e66ffbcc","block_number":5907112,"gas_cost":1980416,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","transaction_hash":"0x3ad7e5b3080fd8ef6018b296a8a87047b1a91536c2247161cd07ea5ff96a1141","block_number":5907113,"gas_cost":1530254,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8",1.157920892373162e+77]},"MonitoringService":{"address":"0x709282aE42C9Df6F156F8A92fC110Fed039DCdB3","transaction_hash":"0x7809b24fa2f04603dab3cc9f7a2a2c310f244dcbbb93960542b4f7eb15475142","block_number":5907114,"gas_cost":1949685,"constructor_arguments":["0xec3BD5D6CE7c29b434ec77a638c0F4E6441225e8","0x6a922ADB133502d9Bf55aa9897580C1be159a8b2","0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe","0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1"]},"OneToN":{"address":"0x083a0411483b3Fb9eb9ccfb1F07003BF8f27D094","transaction_hash":"0x63d88efd315657d9b8e370a04f77b290d06909d5211248f5c05695539438c2e3","block_number":5907115,"gas_cost":1097569,"constructor_arguments":["0x7a6afd06Ef28dA0479cfd47CbCF68B9E4fd6fFbe",4,"0x6a922ADB133502d9Bf55aa9897580C1be159a8b2"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"onGeneralBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["b"])([a["a"]],h),t["a"]=h},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534","transaction_hash":"0x9990a73964ef31276bb8c7351f056e626a7b224fd493cd6b1fd609dc0e3090d4","block_number":8758917,"gas_cost":2541738,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",4e+21,5,4,2851200,400000000000000000000,15811200]},"UserDeposit":{"address":"0x53Cc1decDD7d452c8844a5f383e23AD479A1f614","transaction_hash":"0x576e73843fd3ddbf8235463b0319c9fd41bf0a73c4cef961744812c90cddcb2a","block_number":8758920,"gas_cost":1897413,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",6.17283e+23]},"MonitoringService":{"address":"0x9a59AEe20caA038A01Cd2Ccc016573a03AE26a05","transaction_hash":"0xa22486c45333f8f6173cea9984fda357f4675e78f70417e2f0030b6b0b223898","block_number":8758927,"gas_cost":2507622,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534","0x53Cc1decDD7d452c8844a5f383e23AD479A1f614","0x8d7B9c6655D3E2D7e36a55434885e620349BE5Df"]},"OneToN":{"address":"0x6A3B8B754AdE680068669815DD2542592CF14f04","transaction_hash":"0x6fbcb6b033841e4a3918f3c63573e3cbb6b3eb218cf6b94cf67687a317907d5f","block_number":8758929,"gas_cost":1367516,"constructor_arguments":["0x53Cc1decDD7d452c8844a5f383e23AD479A1f614",1,"0x22d1e5D713f37238BfA15eEbb2366dA08a9d9534"]}}}')},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=k();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var w=function(e){m(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));w=Object(o["b"])([Object(i["a"])({computed:d(d({},Object(c["c"])(["defaultAccount"])),Object(c["b"])(["pendingTransfers"]))})],w);var _=w,E=_,T=(n("be88"),n("2877")),S=n("6544"),x=n.n(S),A=n("4ca6"),R=n("adda"),C=n("3a2f"),N=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=N.exports;x()(N,{VBadge:A["a"],VImg:R["a"],VTooltip:C["a"]})},3:function(e,t){},"316d":function(e,t,n){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x7714DA9D9c577F0b89FE4774193d646F07b880c5","transaction_hash":"0x3377ccdc9624bd432a89b6e3d068fe8dd01949f2f52b4e0538843b88b9fbcdab","block_number":5907003,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9B5ef38daA6Cb7f9914cd4635504B63BB410e0F1","transaction_hash":"0x84fcd1320182f5255b93609e17056fb84a0edf4752ca6841a8a271bea7981ce4","block_number":5907005,"gas_cost":4001114,"constructor_arguments":["0x7714DA9D9c577F0b89FE4774193d646F07b880c5",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},"48e0":function(e,t,n){"use strict";var r=n("316d"),a=n.n(r);a.a},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x1d238cdacA8fFFD56F722B587aA010d6B438B077","transaction_hash":"0x3bdd7711721781ba977cf436d8cc77312e27b1467102927169e8aa6c3a3abdf0","block_number":2114518,"gas_cost":1980416,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","transaction_hash":"0xabb4bf75eb1946f6342c21959d6443140ab7378f33d9a5bdb1f3a039083b1214","block_number":2114520,"gas_cost":1530254,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952",1.157920892373162e+77]},"MonitoringService":{"address":"0x850C3E4914417eC41230177c2821B9514c2e2bC9","transaction_hash":"0x2cf29dea37d02049295ffa5ea9f744cff82995c0c547f79f6bdd7f27abeae0b4","block_number":2114521,"gas_cost":1949685,"constructor_arguments":["0x4074fD4d460d0c31cbEdC3f59B2D98626D063952","0x1d238cdacA8fFFD56F722B587aA010d6B438B077","0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A","0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526"]},"OneToN":{"address":"0xe4C2C47F070152c03a564C2c681C3FbD78234156","transaction_hash":"0xe5d1fa41d7b72feeaed494c42bd98860c49c396fe1961f9f2f5567a392018816","block_number":2114523,"gas_cost":1097569,"constructor_arguments":["0xDd9282Ad0A36052af41c85863F8C51eEbDC68E0A",5,"0x1d238cdacA8fFFD56F722B587aA010d6B438B077"]}}}')},5:function(e,t){},"51ce":function(e,t,n){},6:function(e,t){},6554:function(e,t,n){"use strict";var r=n("ff61"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,k=O,j=(n("1c30"),n("2877")),w=n("6544"),_=n.n(w),E=n("8336"),T=n("b0af"),S=n("169a"),x=n("132d"),A=Object(j["a"])(k,r,a,!1,null,"188eebce",null);t["a"]=A.exports;_()(A,{VBtn:E["a"],VCard:T["a"],VDialog:S["a"],VIcon:x["a"]})},7:function(e,t){},7189:function(e,t,n){"use strict";var r=n("8620"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["b"])([Object(i["a"])({})],v);var g=v,O=g,k=(n("c6c9"),n("2877")),j=n("6544"),w=n.n(j),_=n("8336"),E=n("62ad"),T=n("132d"),S=n("0fd9"),x=Object(k["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=x.exports;w()(x,{VBtn:_["a"],VCol:E["a"],VIcon:T["a"],VRow:S["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["b"])([a["a"]],m),t["a"]=m},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal"}(r||(r={}))},8620:function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return T}));var r=n("a34a"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return f(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function k(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function j(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?k(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:k(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function w(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function _(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=j(n);i&&g.put(O,{logger:r,level:e,message:n},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(w)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return S.apply(this,arguments)}function S(){return S=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},9:function(e,t){},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["b"])([Object(i["a"])({})],g);var O=g,k=O,j=(n("a130"),n("2877")),w=n("6544"),_=n.n(w),E=n("3a2f"),T=Object(j["a"])(k,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;_()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf","transaction_hash":"0x59a02287485ff7ac0153022959f0bbe4a044242ba94bb53f7dedbafd4d35fb4e","block_number":7255736,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a","transaction_hash":"0x20ae67f204baca19726e040399ab2fc45fd3e8abdd16eb3d67abeca2eab31d45","block_number":7255738,"gas_cost":4001114,"constructor_arguments":["0xC1b67a7e53511e59B96B35472c3eB1c1f84C2baf",3,20,555428,1.157920892373162e+77]}}}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},a8ba:function(e,t,n){"use strict";var r=n("c505"),a=n.n(r);a.a},af21:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","transaction_hash":"0xc7bb55a286aa1dba66dc08a8197be50e8b4dc2658ff1867a998e292c30e5cc2c","block_number":7255768,"gas_cost":1980416,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","transaction_hash":"0x9f6a524f5ce39584637d2d60a9726e1f4137de10cd892b46852f1b903680f008","block_number":7255770,"gas_cost":1530254,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70",1.157920892373162e+77]},"MonitoringService":{"address":"0xFE94CfD16926af2EfD31C3F7F7d60D40180cA552","transaction_hash":"0xd3bcc2d4d6b7cf9c0d899cc6bdde3f9ebc88769c925d0c77fa736138e5d4e4f3","block_number":7255775,"gas_cost":1949685,"constructor_arguments":["0x83e827B34e85F6f9019296299d0c13d9BE2B9D70","0x8b6358D7bD07dF6a0454383249975C5575a2C4c0","0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF","0x3DE1B1E10Ae71C3E3b793e545A047d1B4FAB587a"]},"OneToN":{"address":"0x69A69251f281eEf1926fdF7744BcE48163493E9f","transaction_hash":"0x70e3b1d71a77a85357c14f8e1e1b9ed73696f59025e93358a540a9bfbe9c8d7f","block_number":7255778,"gas_cost":1097569,"constructor_arguments":["0x87Dd0D812161Dc6D210254c7e7B81E3aD3FfD4EF",3,"0x8b6358D7bD07dF6a0454383249975C5575a2C4c0"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("a34a"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),d=n("750b"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.injectedProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.injectedProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("f15c"),y=n("66bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},h=[];function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){var t=S();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0})],A.prototype,"reason",void 0),A=Object(c["b"])([Object(s["a"])({})],A);var R=A,C=R,N=(n("753f"),n("2877")),P=n("6544"),I=n.n(P),D=n("0798"),U=Object(N["a"])(C,m,h,!1,null,"7b92b083",null),M=U.exports;function B(e){return B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function W(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function K(e){var t=Y();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}I()(U,{VAlert:D["a"]});var z=function(e){W(n,e);var t=K(n);function n(){var e;return q(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return V(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",F(F({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}},{key:"injectedProvider",get:function(){return b["a"].injectedWeb3Available()}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],z.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],z.prototype,"connecting",void 0),Object(c["b"])([Object(s["b"])()],z.prototype,"close",null),Object(c["b"])([Object(s["b"])()],z.prototype,"connect",null),z=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:d["a"],NoAccessMessage:M},computed:Object(u["c"])(["accessDenied"])})],z);var J=z,ee=J,te=(n("a8ba"),n("99d9")),ne=Object(N["a"])(ee,f,p,!1,null,"bd1c6854",null),re=ne.exports;I()(ne,{VCardText:te["b"],VCardTitle:te["c"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},oe=[],ie=n("152b");function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e){var t=ge();return function(){var n,r=Oe(e);if(t){var a=Oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var ke=function(e){be(n,e);var t=me(n);function n(){return de(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ie["a"]));Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],ke.prototype,"onChange",null),ke=Object(c["b"])([Object(s["a"])({computed:ue({},Object(u["b"])(["tokens"]))})],ke);var je=ke,we=je,_e=(n("1a2b"),n("8336")),Ee=n("62ad"),Te=n("a523"),Se=n("132d"),xe=n("0fd9"),Ae=Object(N["a"])(we,ae,oe,!1,null,"4f16408a",null),Re=Ae.exports;function Ce(e){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){De(o,r,a,i,c,"next",e)}function c(e){De(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function Fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function qe(e){var t=We();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}I()(Ae,{VBtn:_e["a"],VCol:Ee["a"],VContainer:Te["a"],VIcon:Se["a"],VRow:xe["a"]});var Ke=function(e){Fe(n,e);var t=qe(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e}return Le(n,[{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ke=Object(c["b"])([Object(s["a"])({computed:Pe(Pe({},Object(u["c"])(["loading","accessDenied","stateBackup","settings"])),Object(u["b"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:re,NoTokens:Re,NoAccessMessage:M}})],Ke);var Ze=Ke,Xe=Ze,Ye=(n("7189"),n("adda")),Qe=Object(N["a"])(Xe,r,a,!1,null,"05942de6",null);t["a"]=Qe.exports;I()(Qe,{VCol:Ee["a"],VContainer:Te["a"],VImg:Ye["a"],VRow:xe["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.8.0","contracts":"0.36.2"}')},c505:function(e,t,n){},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6","transaction_hash":"0xf015b6c93951e645c45d4632dcd25de2869bd6613b5b59c53e2453c168c36447","block_number":2114499,"gas_cost":247082,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x9b0c8C8C75904CEf5B7a8dbF59c3459Ea85c6526","transaction_hash":"0xa77a53156131d50af579a3ab22e80af01eb3e40405292d78e80c8c4d238d4886","block_number":2114501,"gas_cost":4001114,"constructor_arguments":["0xfe26Dc87Fd7Ed01AC3429d7913738e2fae018BB6",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar")],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},l=[],d=n("2f62"),f=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){var t=S();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var A=function(e){j(n,e);var t=_(n);function n(){return g(this,n),t.apply(this,arguments)}return k(n,[{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(s["a"]));A=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h({},Object(d["c"])(["loading","defaultAccount"])),Object(d["b"])(["network","isConnected"]))})],A);var R=A,C=R,N=(n("48e0"),n("2877")),P=n("6544"),I=n.n(P),D=n("8336"),U=n("62ad"),M=n("adda"),B=n("0fd9"),L=n("2fa4"),F=Object(N["a"])(C,u,l,!1,null,"22e36b17",null),$=F.exports;I()(F,{VBtn:D["a"],VCol:U["a"],VImg:M["a"],VRow:B["a"],VSpacer:L["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},H=[],V=n("0a08");function W(e){return W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function X(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){var t=ee();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(e){X(n,e);var t=Q(n);function n(){var e;return G(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Z(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);ne=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],ne);var re=ne,ae=re,oe=n("132d"),ie=n("2db4"),ce=Object(N["a"])(ae,q,H,!1,null,null,null),se=ce.exports;I()(ce,{VIcon:oe["a"],VSnackbar:ie["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},le=[];function de(e){return de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function he(e){var t=Oe();return function(){var n,r=ke(e);if(t){var a=ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==de(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var je=function(e){ye(n,e);var t=he(n);function n(){var e;return fe(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return be(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);je=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],je);var we=je,_e=we,Ee=Object(N["a"])(_e,ue,le,!1,null,null,null),Te=Ee.exports;function Se(e){return Se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}function Ne(e,t){return Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ne(e,t)}function Pe(e){var t=Ue();return function(){var n,r=Me(e);if(t){var a=Me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){return!t||"object"!==Se(t)&&"function"!==typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}I()(Ee,{VBtn:D["a"],VSnackbar:ie["a"]});var Be=function(e){Ce(n,e);var t=Pe(n);function n(){return xe(this,n),t.apply(this,arguments)}return Re(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));Be=Object(i["b"])([Object(c["a"])({components:{AppHeader:$,OfflineSnackbar:se,UpdateSnackbar:Te}})],Be);var Le=Be,Fe=Le,$e=(n("6554"),n("7496")),qe=n("a523"),He=n("a75b"),Ve=Object(N["a"])(Fe,a,o,!1,null,"3bcb8e58",null),We=Ve.exports;I()(Ve,{VApp:$e["a"],VContainer:qe["a"],VContent:He["a"]});var Ge=n("2fe1");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ke=n("8c4f"),Ze=n("bb51");r["a"].use(Ke["a"]);var Xe=new Ke["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Ze["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-895be7da"),n.e("chunk-7c07f9a4"),n.e("chunk-08dab35b"),n.e("chunk-508c3623")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-895be7da"),n.e("chunk-9596d7b8")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-7916f8ca")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-7c07f9a4"),n.e("chunk-08dab35b"),n.e("chunk-45939c11")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-7c07f9a4"),n.e("chunk-4d730eb5")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-895be7da"),n.e("chunk-6a8b17ac")]).then(n.bind(null,"3a90"))}},{path:"/account",name:f["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-25fdc0d3").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-5aa157c6")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-67b172b3")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-895be7da"),n.e("chunk-d2121fc2")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-42bc8b47")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-15f0b7af"),n.e("chunk-795f4e24")]).then(n.bind(null,"c917"))}}]}]}),Ye=Xe,Qe=n("bfa9"),ze=n("f455"),Je=n("87a2"),et=n("dd61"),tt=n.n(et),nt=n("e9a8d"),rt=n.n(nt),at=n("9380"),ot=n.n(at),it=n("b8ce"),ct=n.n(it),st=n("c5a2"),ut=n.n(st),lt=n("93c6"),dt=n.n(lt),ft=n("63ea"),pt=n.n(ft),bt=n("13ea"),yt=n.n(bt);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){return _t(e)||wt(e,t)||kt(e,t)||Ot()}function Ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kt(e,t){if(e){if("string"===typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _t(e){if(Array.isArray(e))return e}r["a"].use(d["a"]);var Et={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:Je["a"].UNDEFINED,channels:{},tokens:{},transfers:{},presences:{},network:Je["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0}};function Tt(){return ct()(Et)}var St=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},xt=new Qe["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),At={state:Tt(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=gt(r[n],2),o=a[0],i=a[1];o in e.tokens&&pt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=ht(ht({},e.tokens[o]),i):e.tokens=ht(ht({},e.tokens),{},vt({},o,i)))}},updatePresence:function(e,t){e.presences=ht(ht({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,ht(ht({},Tt()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=ht(ht({},e.transfers),{},vt({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return tt()(ot()(rt()(e.channels),(function(e){return!yt()(e)})),(function(n){var r=ut()(n,t,Object(Je["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).sort((function(e,t){return St(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!yt()(r)&&(n=rt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===ze["a"].open}));return dt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance}},plugins:[xt.plugin]},Rt=new d["a"].Store(At),Ct=n("8aa9");Ge["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Nt=n("a34a"),Pt=n.n(Nt),It=n("f15c"),Dt=n("a3d5"),Ut=n("6934"),Mt=n("5670"),Bt=n("e95d"),Lt=n("7f4b"),Ft=n.n(Lt);function $t(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$t(o,r,a,i,c,"next",e)}function c(e){$t(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),e}var Gt=function(){function e(){Ht(this,e)}return Wt(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=qt(Pt.a.mark((function e(t){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}]),e}(),Kt=n("8404");function Zt(e){return Zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function Xt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}function Yt(e){var t=tn();return function(){var n,r=an(e);if(t){var a=an(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){return!t||"object"!==Zt(t)&&"function"!==typeof t?zt(e):t}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){var t="function"===typeof Map?new Map:void 0;return Jt=function(e){if(null===e||!nn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return en(e,arguments,an(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),rn(n,e)},Jt(e)}function en(e,t,n){return en=tn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&rn(o,n.prototype),o},en.apply(null,arguments)}function tn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function rn(e,t){return rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rn(e,t)}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t){return dn(e)||ln(e,t)||bn(e,t)||un()}function un(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ln(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function dn(e){if(Array.isArray(e))return e}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=bn(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function bn(e,t){if(e){if("string"===typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,t):void 0}}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function hn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){mn(o,r,a,i,c,"next",e)}function c(e){mn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t,n){return t&&gn(e.prototype,t),n&&gn(e,n),e}var kn=function(){function e(t){vn(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return On(e,[{key:"updateBalances",value:function(){var e=hn(Pt.a.mark((function e(){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=hn(Pt.a.mark((function e(){var t,n,r,a,o,i;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=pn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokens",r),e.next=10,this.fetchTokenData(n);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=hn(Pt.a.mark((function e(t){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Tn(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=hn(Pt.a.mark((function t(n,r){var a,o,i,c,s,u,l=this;return Pt.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,Gt.fetch(a);case 5:return o=t.sent,t.next=8,It["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,It["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=56;break;case 18:if(!o){t.next=24;break}return t.next=21,e.createRaiden(i,o.PRIVATE_KEY,n,r);case 21:c=t.sent,t.next=29;break;case 24:if(!("networkVersion"in i)||"1"!==i.networkVersion){t.next=26;break}throw new ze["e"](ze["b"].RDN_UNRECOGNIZED_NETWORK);case 26:return t.next=28,e.createRaiden(i,void 0,n,r);case 28:c=t.sent;case 29:return this._raiden=c,t.next=32,this.getAccount();case 32:return s=t.sent,this.store.commit("account",s),t.next=36,c.userDepositTokenAddress();case 36:return this._userDepositTokenAddress=t.sent,c.events$.pipe(Object(Mt["a"])((function(e){return"newBlock"===e.type})),Object(Bt["a"])((function(){return l.fetchTokenData(l.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(Mt["a"])((function(e){return"raidenShutdown"===e.type}))).subscribe((function(){return l.store.commit("reset")})),c.events$.subscribe((function(e){"tokenMonitored"===e.type&&l.store.commit("updateTokens",fn({},e.payload.token,{address:e.payload.token})),"matrix/presence/success"===e.type&&l.store.commit("updatePresence",fn({},e.meta.address,e.payload.available))})),c.channels$.subscribe((function(e){l.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){l.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return l.raiden.stop()})),c.start(),t.t0=this.store,t.next=48,this.getBalance();case 48:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=56;break}return t.t2=this.store,t.next=54,this.getBalance(c.address);case 54:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 56:t.next=62;break;case 58:t.prev=58,t.t4=t["catch"](0),u=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?Je["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?Je["a"].RDN_STATE_MIGRATION:t.t4 instanceof xn?Je["a"].INITIALIZATION_FAILED:Je["a"].NO_ACCOUNT,this.store.commit("accessDenied",u);case 62:this.store.commit("loadComplete");case 63:case"end":return t.stop()}}),t,this,[[0,58]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=hn(Pt.a.mark((function e(){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=hn(Pt.a.mark((function e(){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=hn(Pt.a.mark((function e(t){var n;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",Dt["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=hn(Pt.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=sn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=hn(Pt.a.mark((function e(t,n,r,a){var o,i;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.prev=3,e.next=6,i.openChannel(t,n,{deposit:r},(function(e){return e.type===ze["c"].OPENED?o(2,3):""}));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new _n(e.t0);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=hn(Pt.a.mark((function e(t,n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new wn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=hn(Pt.a.mark((function e(t,n,r){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new En(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=hn(Pt.a.mark((function e(t,n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new jn(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=hn(Pt.a.mark((function e(t){var n,r=this;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=hn(Pt.a.mark((function e(t){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",fn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,Ft()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=hn(Pt.a.mark((function e(t,n,r,a,o){var i;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 3:return i=e.sent,e.next=6,this.raiden.waitTransfer(i);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new Sn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=hn(Pt.a.mark((function e(t,n,r,a){var o;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=hn(Pt.a.mark((function e(){var t;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=hn(Pt.a.mark((function e(t,n,r){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=hn(Pt.a.mark((function e(t,n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=hn(Pt.a.mark((function e(t,n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===ze["c"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=hn(Pt.a.mark((function e(){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=hn(Pt.a.mark((function e(t){var n,r;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",fn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=hn(Pt.a.mark((function e(){var t,n;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=hn(Pt.a.mark((function e(t){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Ut["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=hn(Pt.a.mark((function e(t){var n;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Ut["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=hn(Pt.a.mark((function e(t,n){var r;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=hn(Pt.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=hn(Pt.a.mark((function e(n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Kt["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,Ft()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=cn(cn({},t),r[e]),delete r[e])})),i=function(){var e=hn(Pt.a.mark((function e(n){return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=cn(cn({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,Ft()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"userDepositTokenAddress",get:function(){if(!this._userDepositTokenAddress)throw new Error("address empty");return this._userDepositTokenAddress}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=hn(Pt.a.mark((function e(t){var n,r,a,o=arguments;return Pt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,e.prev=3,e.next=6,ze["d"].create(t,n,{storage:window.localStorage,state:r},void 0,{pfsSafetyMargin:1.1,pfs:"https://pfs.raidentransport.test001.env.raiden.network",matrixServer:"https://raidentransport.test001.env.raiden.network",monitoringReward:Object(Ut["parseUnits"])("5",18)},a);case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e["catch"](3),new xn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),jn=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),wn=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),_n=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),En=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),Tn=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),Sn=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error)),xn=function(e){Xt(n,e);var t=Yt(n);function n(){return vn(this,n),t.apply(this,arguments)}return n}(Jt(Error));function An(e,t){e.prototype.$raiden=new kn(Rt)}var Rn=n("103a"),Cn=n.n(Rn);function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t,n){return t&&Pn(e.prototype,t),n&&Pn(e,n),e}var Dn=function(){function e(){Nn(this,e),this.cache={}}return In(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Cn()(e);return this.cache[e]=n,n}}]),e}();function Un(e,t){e.prototype.$identicon=new Dn}var Mn=n("a925");function Bn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Mn["a"]);var Ln=new Mn["a"]({locale:"en",fallbackLocale:"en",messages:Bn()}),Fn=(n("5363"),n("d1e7"),n("d4b8"),n("f309"));r["a"].use(Fn["a"]);var $n=new Fn["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),qn=n("e508"),Hn=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.raidentransport.test001.env.raiden.network",VUE_APP_TRANSPORT:"https://raidentransport.test001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Hn["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Ct["b"])(),r["a"].use(An),r["a"].use(Un),r["a"].use(qn["a"]),new r["a"]({vuetify:$n,router:Ye,store:Rt,i18n:Ln,render:function(e){return e(We)}}).$mount("#app")},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"mint-deposit-dialog":{"button":"Mint and deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"transfer-title":"Make Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp. Your transfer will finish in the background."},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occured","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x08F730E5f5596CBd77C242cf1856Ed8B7f3f1D50","transaction_hash":"0x8036dca8fefdf6f62fab105b536eb4db243ebacc3f9327b404d92e8b1fb4a08d","block_number":8702339,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x8d7B9c6655D3E2D7e36a55434885e620349BE5Df","transaction_hash":"0x4158e45d5b0701ed285ad63ac4db5695da16e8267210165b590334a2fa50466c","block_number":8702347,"gas_cost":5054246,"constructor_arguments":["0x08F730E5f5596CBd77C242cf1856Ed8B7f3f1D50",1,500,555428,2]}}}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("a34a"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"d",(function(){return ny})),n.d(t,"a",(function(){return Ia})),n.d(t,"c",(function(){return we})),n.d(t,"b",(function(){return Ht})),n.d(t,"e",(function(){return fn}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Un})),n.d(r,"tokenMonitored",(function(){return Mn})),n.d(r,"channelOpen",(function(){return Bn})),n.d(r,"channelMonitor",(function(){return Ln})),n.d(r,"channelDeposit",(function(){return Fn})),n.d(r,"channelWithdrawn",(function(){return $n})),n.d(r,"channelClose",(function(){return qn})),n.d(r,"channelSettleable",(function(){return Hn})),n.d(r,"channelSettle",(function(){return Vn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return Kn})),n.d(a,"matrixPresence",(function(){return Zn})),n.d(a,"matrixRoom",(function(){return Xn})),n.d(a,"matrixRoomLeave",(function(){return Yn})),n.d(a,"rtcChannel",(function(){return Qn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Or})),n.d(o,"messageGlobalSend",(function(){return kr})),n.d(o,"messageReceived",(function(){return jr}));var i={};n.r(i),n.d(i,"transfer",(function(){return Ir})),n.d(i,"transferSigned",(function(){return Dr})),n.d(i,"transferProcessed",(function(){return Ur})),n.d(i,"transferSecret",(function(){return Mr})),n.d(i,"transferSecretRegister",(function(){return Br})),n.d(i,"transferSecretRequest",(function(){return Lr})),n.d(i,"transferSecretReveal",(function(){return Fr})),n.d(i,"transferUnlock",(function(){return $r})),n.d(i,"transferUnlockProcessed",(function(){return qr})),n.d(i,"transferExpire",(function(){return Hr})),n.d(i,"transferExpireProcessed",(function(){return Vr})),n.d(i,"transferRefunded",(function(){return Wr})),n.d(i,"transferClear",(function(){return Gr})),n.d(i,"withdrawReceive",(function(){return Zr}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Qr})),n.d(c,"pfsListUpdated",(function(){return zr})),n.d(c,"iouPersist",(function(){return Jr})),n.d(c,"iouClear",(function(){return ea})),n.d(c,"udcDeposited",(function(){return ta}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return ou})),n.d(s,"initTokensRegistryEpic",(function(){return iu})),n.d(s,"initMonitorChannelsEpic",(function(){return cu})),n.d(s,"initMonitorProviderEpic",(function(){return su})),n.d(s,"tokenMonitoredEpic",(function(){return uu})),n.d(s,"channelOpenedEpic",(function(){return lu})),n.d(s,"channelMonitoredEpic",(function(){return pu})),n.d(s,"channelOpenEpic",(function(){return bu})),n.d(s,"channelDepositEpic",(function(){return yu})),n.d(s,"channelCloseEpic",(function(){return mu})),n.d(s,"channelUpdateEpic",(function(){return hu})),n.d(s,"channelSettleEpic",(function(){return vu})),n.d(s,"channelSettleableEpic",(function(){return gu})),n.d(s,"channelUnlockEpic",(function(){return Ou})),n.d(s,"confirmationEpic",(function(){return ju}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return ll})),n.d(u,"matrixShutdownEpic",(function(){return dl})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Tl})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Sl})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return xl})),n.d(u,"matrixUpdateCapsEpic",(function(){return Al})),n.d(u,"matrixCreateRoomEpic",(function(){return Vl})),n.d(u,"matrixInviteEpic",(function(){return Wl})),n.d(u,"matrixHandleInvitesEpic",(function(){return Gl})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Kl})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Zl})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Xl})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Yl})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Ql})),n.d(u,"matrixMessageSendEpic",(function(){return ld})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return dd})),n.d(u,"matrixMessageReceivedEpic",(function(){return fd})),n.d(u,"deliveredEpic",(function(){return pd})),n.d(u,"rtcConnectEpic",(function(){return Md}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return Vd})),n.d(l,"transferAutoExpireEpic",(function(){return Jd})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Sf})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Df})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Uf})),n.d(l,"transferMediateEpic",(function(){return Hf})),n.d(l,"transferProcessedReceivedEpic",(function(){return Qf})),n.d(l,"transferProcessedSendEpic",(function(){return zf})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return Jf})),n.d(l,"transferExpireProcessedEpic",(function(){return ep})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return tp})),n.d(l,"transferRefundedEpic",(function(){return dp})),n.d(l,"transferRetryMessageEpic",(function(){return Tp})),n.d(l,"transferSecretRequestedEpic",(function(){return Ip})),n.d(l,"transferSecretRevealEpic",(function(){return Up})),n.d(l,"transferSecretRevealedEpic",(function(){return Mp})),n.d(l,"transferRequestUnlockEpic",(function(){return Bp})),n.d(l,"monitorSecretRegistryEpic",(function(){return Lp})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return Fp})),n.d(l,"transferAutoRegisterEpic",(function(){return $p})),n.d(l,"transferSecretRegisterEpic",(function(){return qp})),n.d(l,"withdrawRequestReceivedEpic",(function(){return Hp})),n.d(l,"withdrawSendConfirmationEpic",(function(){return Vp}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return Eb})),n.d(d,"pfsCapacityUpdateEpic",(function(){return Tb})),n.d(d,"pfsFeeUpdateEpic",(function(){return Sb})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return xb})),n.d(d,"monitorUdcBalanceEpic",(function(){return Ab})),n.d(d,"monitorRequestEpic",(function(){return Cb}));var f=n("a34a"),p=n.n(f),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),m=n("51b1"),h=n("aadd"),v=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(v,{createNewMatrixCall:function(){return null}});var k=n("686e"),j=n("6934"),w=n("8404"),_=n("7508"),E=n("733d"),T=n("371e"),S=n("72f0"),x=n.n(S),A=n("e380"),R=n.n(A),C=n("4b96"),N=n("b2f7"),P=n("17f5"),I=n("a748"),D=n("9586"),U=n("1b92"),M=n("d263"),B=n("ebb6"),L=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}var K=function(){function e(){V(this,e)}return G(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}var z=function(){function e(){X(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var pe=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),e}var we,_e=function(){function e(){Oe(this,e)}return je(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Te=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(we||(we={}));var Se,xe,Ae=Object(j["hexlify"])(Object(j["padZeros"])([],65));(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Se||(Se={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(xe||(xe={}));var Re=n("bef3"),Ce=n("b047c"),Ne=n.n(Ce),Pe=n("ffa9");function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function Me(e){var t=qe();return function(){var n,r=We(e);if(t){var a=We(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Le(e):t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e){var t="function"===typeof Map?new Map:void 0;return Fe=function(e){if(null===e||!He(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $e(e,arguments,We(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ve(n,e)},Fe(e)}function $e(e,t,n){return $e=qe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Ve(o,n.prototype),o},$e.apply(null,arguments)}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var Ge=function(e){Ue(n,e);var t=Me(n);function n(){return De(this,n),t.apply(this,arguments)}return n}(Fe(Error));function Ke(e,t,n){if(!e)throw null===n||void 0===n||n("AssertionError",e,t),new Ge(null!==t&&void 0!==t?t:"AssertionError")}function Ze(e){Pe["ThrowReporter"].report(e)}function Xe(e,t){var n=e.decode(t);return Ze(n),n.right}function Ye(e){return null!=e}var Qe=new Re["a"]("BigNumber",j["BigNumber"].isBigNumber,(function(e,t){var n,r;if(j["BigNumber"].isBigNumber(e))return Re["r"](e);try{return Re["r"](Object(j["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Re["f"](e,t)}}),(function(e){return e.toString()})),ze=R()((function(e){return Re["e"](Re["q"],(function(t){return"string"===typeof t&&(e?Object(j["hexDataLength"])(t)===e:Object(j["isHexString"])(t))}),"HexString")})),Je=R()((function(e){var t=e?w["Zero"].sub(w["Two"].pow(8*e-1)):void 0,n=e?w["Two"].pow(8*e-1):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),et=R()((function(e){var t=e?w["Zero"]:void 0,n=e?w["Two"].pow(8*e):void 0;return Re["e"](Qe,(function(e){return Qe.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),tt=ze(65),nt=ze(32),rt=ze(32),at=ze(32),ot=new Re["a"]("Address",(function(e){try{return ze(20).is(e)&&Object(j["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!ze(20).is(e))return Re["f"](e,t);var n;try{n=Object(j["getAddress"])(e)}catch(r){return Re["f"](e,t)}return n?Re["r"](n):Re["f"](e,t)}),Re["g"]),it=R()((function(e){return Re["s"]([Re["l"],e])}));function ct(e){return[Date.now(),e]}var st=R()((function(e){return Re["h"]([e,Re["n"](Re["t"]({signature:tt}))])})),ut=R()((function(e){return new Re["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Re["r"](t):Re["f"](t,n)}),Re["g"])})),lt=n("6f0b"),dt=n("9044"),ft=n("7738"),pt=n("d3fb"),bt=n("4b59"),yt=n("d792"),mt=n("4d8c"),ht=n.n(mt),vt=n("c707"),gt=n.n(vt);function Ot(e,t){return wt(e)||jt(e,t)||Tt(e,t)||kt()}function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wt(e){if(Array.isArray(e))return e}function _t(e){return xt(e)||St(e)||Tt(e)||Et()}function Et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(e,t){if(e){if("string"===typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}function St(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xt(e){if(Array.isArray(e))return At(e)}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Ct(e,t,n){return Object(dt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function Nt(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(_t(a),[o])}},o=U["a"],i=Object(P["a"])(-1);n&&(i=Object(D["a"])((function(){return r.blockNumber?Object(P["a"])(r.blockNumber):Ct(r,"block").pipe(Object(F["a"])(),Object(B["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(bt["a"])()),o=Object(ft["a"])(n,i).pipe(Object(F["a"])(),Object(yt["a"])((function(e){var n=Ot(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(pt["a"])(gt()(ht()(e),["blockNumber"]))})),Object(B["a"])(a),Object(L["a"])(Ye)));var c=i.pipe(Object(yt["a"])((function(){return Object(pt["a"])(t)})),Object($["a"])((function(e){return Ct(r,e)})),Object(B["a"])(a),Object(L["a"])(Ye));return Object(I["a"])(o,c)}function Pt(e){return Rt(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=lt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function It(e){var t=e.send;e.send=function(n,r){return Rt(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function Dt(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var Ut,Mt=Re["n"](Re["p"](Re["q"],Re["b"]));function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt=Re["t"]({urls:Re["v"]([Re["q"],Re["c"](Re["q"])])}),Ft=Re["n"](Re["h"]([Re["t"]({matrixServerLookup:Re["q"],revealTimeout:Re["l"],settleTimeout:Re["l"],httpTimeout:Re["l"],discoveryRoom:Re["v"]([Re["q"],Re["k"]]),pfsRoom:Re["v"]([Re["q"],Re["k"]]),monitoringRoom:Re["v"]([Re["q"],Re["k"]]),pfs:Re["v"]([ot,Re["q"],Re["k"]]),pfsSafetyMargin:Re["l"],matrixExcessRooms:Re["l"],confirmationBlocks:Re["l"],monitoringReward:Re["v"]([Re["k"],et(32)]),logger:Re["i"]((Ut={},Bt(Ut,"",null),Bt(Ut,"trace",null),Bt(Ut,"debug",null),Bt(Ut,"info",null),Bt(Ut,"warn",null),Bt(Ut,"error",null),Ut)),caps:Re["v"]([Re["k"],Mt]),fallbackIceServers:Re["c"](Lt),rateToSvt:Re["p"](Re["q"],et(32))}),Re["m"]({matrixServer:Re["q"],subkey:Re["d"]})])),$t=Re["n"](Re["m"](Object.assign(Object.assign({},Ft.type.types["0"].props),Ft.type.types["1"].props)));function qt(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(Dt(r),"_discovery"),pfsRoom:"raiden_".concat(Dt(r),"_path_finding"),monitoringRoom:"raiden_".concat(Dt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(j["parseEther"])("5"),logger:"info",caps:(n={},Bt(n,xe.NO_DELIVERY,!0),Bt(n,xe.NO_MEDIATE,!0),Bt(n,xe.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var Ht,Vt=n("f49b"),Wt=n.n(Vt),Gt=n("3498"),Kt=n("6f95"),Zt=n("74c8"),Xt=n.n(Zt);function Yt(e){return Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}function en(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&un(e,t)}function tn(e){var t=cn();return function(){var n,r=ln(e);if(t){var a=ln(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return nn(this,n)}}function nn(e,t){return!t||"object"!==Yt(t)&&"function"!==typeof t?rn(e):t}function rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){var t="function"===typeof Map?new Map:void 0;return an=function(e){if(null===e||!sn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return on(e,arguments,ln(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),un(n,e)},an(e)}function on(e,t,n){return on=cn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&un(o,n.prototype),o},on.apply(null,arguments)}function cn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function sn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function un(e,t){return un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},un(e,t)}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}(function(e){e["PFS_EMPTY_URL"]="A registered Pathfinding Service returned an empty service URL.",e["PFS_INVALID_URL"]="A registered Pathfinding Service returned an invalid service URL.",e["PFS_INVALID_INFO"]="Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.",e["PFS_NO_ROUTES_FOUND"]="No valid routes found.",e["PFS_ERROR_RESPONSE"]="Pathfinding Service request returned an error",e["PFS_DISABLED"]="Pathfinding Service is disabled and no direct route is available.",e["PFS_UNKNOWN_TOKEN_NETWORK"]="No open channels on this token network.",e["PFS_TARGET_OFFLINE"]="The requested target is offline.",e["PFS_TARGET_NO_RECEIVE"]="The requested target doesn't receive transfers.",e["PFS_LAST_IOU_REQUEST_FAILED"]="The request for the last IOU has failed.",e["PFS_IOU_SIGNATURE_MISMATCH"]="The signature of the last IOU did not match.",e["PFS_NO_ROUTES_BETWEEN_NODES"]="No route between nodes found.",e["CNL_INVALID_STATE"]="Invalid channel state.",e["CNL_NO_OPEN_CHANNEL_FOUND"]="No open channel has been found.",e["CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND"]="No open or closing channel has been found.",e["CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND"]="No settleable or settling channel has been found.",e["CNL_APPROVE_TRANSACTION_FAILED"]="Token approve transaction failed.",e["CNL_OPENCHANNEL_FAILED"]="Token networks openChannel transaction failed.",e["CNL_SETTOTALDEPOSIT_FAILED"]="Token networks setTotalDeposit transaction failed.",e["CNL_CLOSECHANNEL_FAILED"]="Token networks closeChannel transaction failed.",e["CNL_SETTLECHANNEL_FAILED"]="Token networks settleChannel transaction failed.",e["CNL_UPDATE_NONCLOSING_BP_FAILED"]="updateNonClosingBalanceProof transaction failed.",e["CNL_ONCHAIN_UNLOCK_FAILED"]="on-chain unlock transaction failed.",e["XFER_EXPIRED"]="Transfer expired.",e["XFER_CHANNEL_CLOSED_PREMATURELY"]="Channel was closed before secret got reveiled or transfer unlocked.",e["XFER_REFUNDED"]="Transfer has been refunded.",e["XFER_INVALID_SECRETREQUEST"]="Invalid SecretRequest received",e["XFER_ALREADY_COMPLETED"]="Not waiting for transfer, it's already completed.",e["XFER_REGISTERSECRET_TX_FAILED"]="SecretRegistry.registerSecret transaction failed",e["TRNS_NO_MATRIX_SERVERS"]="Could not contact any Matrix servers.",e["TRNS_NO_VALID_USER"]="Could not find a user with a valid signature.",e["TRNS_NO_SERVERNAME"]="Could not get server name from Matrix server.",e["TRNS_MESSAGE_SIGNATURE_MISMATCH"]="Unable to decode message due to signature mismatch.",e["RDN_GENERAL_ERROR"]="An unknown error occured.",e["RDN_MINT_FAILED"]="Failed to mint tokens.",e["RDN_APPROVE_TRANSACTION_FAILED"]="Approve transaction has failed.",e["RDN_DEPOSIT_TRANSACTION_FAILED"]="Deposit transaction has failed.",e["RDN_TRANSFER_ONCHAIN_BALANCE_FAILED"]="Failed to transfer on-chain balance.",e["RDN_TRANSFER_ONCHAIN_TOKENS_FAILED"]="Failed to transfer on-chain tokens.",e["RDN_UNRECOGNIZED_NETWORK"]="No deploy info provided nor recognized network.",e["RDN_SIGNER_NOT_CONNECTED"]="The signing account is not connected to the provider.",e["RDN_ACCOUNT_NOT_FOUND"]="Account not found in provider.",e["RDN_STRING_ACCOUNT_INVALID"]="String account must be either a 0x-encoded address or private key.",e["RDN_TRANSACTION_REORG"]="Transaction has been mined but got removed by a reorg.",e["RDN_STATE_MIGRATION"]="Could not replace stored state with older, provided state.",e["DTA_NEGATIVE_NUMBER"]="Encountered negative number while encoding to HEX string.",e["DTA_NUMBER_TOO_LARGE"]="Encountered a number that is too large to be encoded.",e["DTA_ARRAY_LENGTH_DIFFRENCE"]="Expected length of HEX string differs from integer array input.",e["DTA_UNENCODABLE_DATA"]="Passed data is not a HEX string nor integer array."})(Ht||(Ht={}));var dn=Re["p"](Re["q"],Re["v"]([Re["q"],Re["l"],Re["d"],Re["k"]])),fn=function(e){en(n,e);var t=tn(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qt(this,n),r=t.call(this,null!==e&&void 0!==e?e:Ht.RDN_GENERAL_ERROR),r.details=a,r.name="RaidenError",r._code=void 0,Object.setPrototypeOf(rn(r),n.prototype),r}return Jt(n,[{key:"code",get:function(){var e,t=this;return void 0===this._code&&(this._code=null!==(e=Xt()(Ht,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"),this._code}}]),n}(an(Error)),pn=Re["h"]([Re["t"]({name:Re["q"]}),Re["m"]({message:Re["q"],stack:Re["q"],details:dn})]),bn=new Re["a"]("Error",(function(e){return"object"===Yt(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Kt["pipe"])(pn.decode(e),Object(Gt["map"])((function(e){return"details"in e?Object.assign(new fn(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mn(e){return On(e)||gn(e)||vn(e)||hn()}function hn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vn(e,t){if(e){if("string"===typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function gn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function On(e){if(Array.isArray(e))return kn(e)}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function wn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function _n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Re["t"](Object.assign(Object.assign(Object.assign({type:Re["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Re["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function En(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:bn,c=_n(t,a,e),s=_n(n,o,e),u=_n(r,i,e,!0);return{request:c,success:s,failure:u}}function Tn(e){var t=function(t){return Wt()(t.meta,e,(function(e,t){return Qe.is(e)&&Qe.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Sn(e,t){var n=function(n){return wn([e.success,e.failure],n)&&Tn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function xn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Sn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function An(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?xn(e,t):Sn(e,t)),Object(B["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new fn(Ht.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function Rn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return Ke(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(mn(a.map((function(e){return yn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Cn,Nn=Re["q"],Pn=(Re["q"],Re["h"]([Re["t"]({amount:et(32),expiration:et(32),secrethash:nt}),Re["m"]({registered:Re["j"](!0)})],"Lock")),In=Re["t"]({chainId:et(32),tokenNetworkAddress:ot,channelId:et(32),nonce:et(8),transferredAmount:et(32),lockedAmount:et(32),locksroot:nt,additionalHash:nt}),Dn=Re["t"]({tokenNetwork:ot,partner:ot}),Un=_n("newBlock",Re["t"]({blockNumber:Re["l"]})),Mn=_n("tokenMonitored",Re["h"]([Re["t"]({token:ot,tokenNetwork:ot}),Re["m"]({fromBlock:Re["l"]})])),Bn=En(Dn,"channel/open/request","channel/open/success","channel/open/failed",Re["m"]({settleTimeout:Re["l"],subkey:Re["d"],deposit:et(32)}),Re["t"]({id:Re["l"],token:ot,settleTimeout:Re["l"],isFirstParticipant:Re["d"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Ln=_n("channel/monitor",Re["h"]([Re["t"]({id:Re["l"]}),Re["m"]({fromBlock:Re["l"]})]),Dn),Fn=En(Dn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Re["h"]([Re["t"]({deposit:et(32)}),Re["m"]({subkey:Re["d"]})]),Re["t"]({id:Re["l"],participant:ot,totalDeposit:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),$n=_n("channel/withdraw/success",Re["t"]({id:Re["l"],participant:ot,totalWithdraw:et(32),txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),Dn),qn=En(Dn,"channel/close/request","channel/close/success","channel/close/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["t"]({id:Re["l"],participant:ot,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Hn=_n("channel/settleable",Re["t"]({settleableBlock:Re["l"]}),Dn),Vn=En(Dn,"channel/settle/request","channel/settle/success","channel/settle/failure",Re["v"]([Re["m"]({subkey:Re["d"]}),Re["u"]]),Re["h"]([Re["t"]({id:Re["l"],txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])}),Re["m"]({locks:Re["o"](Pn)})])),Wn=Re["n"](Re["t"]({userId:Re["q"],accessToken:Re["q"],deviceId:Re["q"],displayName:Re["q"]})),Gn=Re["t"]({address:ot}),Kn=_n("matrixSetup",Re["t"]({server:Re["q"],setup:Wn})),Zn=En(Gn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Re["h"]([Re["t"]({userId:Re["q"],available:Re["d"],ts:Re["l"]}),Re["m"]({caps:Re["p"](Re["q"],Re["b"])})])),Xn=_n("matrixRoom",Re["t"]({roomId:Re["q"]}),Gn),Yn=_n("matrixRoomLeave",Re["t"]({roomId:Re["q"]}),Gn),Qn=_n("rtcChannel",Re["v"]([Re["u"],ut(RTCDataChannel)]),Gn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Cn||(Cn={}));var zn,Jn=Re["n"](Re["t"]({message_identifier:et(8)})),er=Re["n"](Re["t"]({type:Re["j"](Cn.DELIVERED),delivered_message_identifier:et(8)})),tr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.PROCESSED)}),Jn])),nr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.SECRET_REQUEST),payment_identifier:et(8),secrethash:nt,amount:et(32),expiration:et(32)}),Jn])),rr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.SECRET_REVEAL),secret:rt}),Jn])),ar=Re["n"](Re["h"]([Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),transferred_amount:et(32),locked_amount:et(32),locksroot:nt}),Jn])),or=Re["n"](Re["t"]({route:Re["o"](ot)})),ir=Re["n"](Re["t"]({routes:Re["o"](or)})),cr=Re["n"](Re["h"]([Re["t"]({payment_identifier:et(8),token:ot,recipient:ot,lock:Pn,target:ot,initiator:ot,metadata:ir}),ar])),sr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.LOCKED_TRANSFER)}),cr])),ur=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.REFUND_TRANSFER)}),cr])),lr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.UNLOCK),payment_identifier:et(8),secret:rt}),ar])),dr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.LOCK_EXPIRED),recipient:ot,secrethash:nt}),ar])),fr=Re["n"](Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),participant:ot,total_withdraw:et(32),nonce:et(8),expiration:et(32)})),pr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.WITHDRAW_REQUEST)}),fr,Jn])),br=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.WITHDRAW_CONFIRMATION)}),fr,Jn])),yr=Re["n"](Re["h"]([Re["t"]({type:Re["j"](Cn.WITHDRAW_EXPIRED)}),fr,Jn])),mr=Re["n"](Re["t"]({type:Re["j"](Cn.PFS_CAPACITY_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,other_participant:ot,updating_nonce:et(8),other_nonce:et(8),updating_capacity:et(32),other_capacity:et(32),reveal_timeout:et(32)})),hr=Re["n"](Re["t"]({type:Re["j"](Cn.PFS_FEE_UPDATE),canonical_identifier:Re["n"](Re["t"]({chain_identifier:et(32),token_network_address:ot,channel_identifier:et(32)})),updating_participant:ot,timestamp:Re["q"],fee_schedule:Re["t"]({cap_fees:Re["d"],imbalance_penalty:Re["v"]([Re["k"],Re["c"](Re["s"]([et(32),Je(32)]))]),proportional:Je(32),flat:Je(32)})})),vr=Re["n"](Re["t"]({type:Re["j"](Cn.MONITOR_REQUEST),balance_proof:Re["t"]({chain_id:et(32),token_network_address:ot,channel_identifier:et(32),nonce:et(8),balance_hash:nt,additional_hash:nt,signature:tt}),monitoring_service_contract_address:ot,non_closing_participant:ot,non_closing_signature:tt,reward_amount:et(32)})),gr=Re["v"]([er,tr,nr,rr,sr,ur,lr,dr,pr,br,yr,mr,hr,vr]),Or=En(Re["t"]({address:ot,msgId:Re["q"]}),"message/send/request","message/send/success","message/send/failure",Re["t"]({message:Re["v"]([Re["q"],st(gr)])}),void 0),kr=_n("messageGlobalSend",Re["t"]({message:Re["v"]([Re["q"],st(gr)])}),Re["t"]({roomName:Re["q"]})),jr=_n("messageReceived",Re["h"]([Re["t"]({text:Re["q"],ts:Re["l"]}),Re["m"]({message:Re["v"]([gr,st(gr)]),userId:Re["q"],roomId:Re["q"]})]),Re["t"]({address:ot})),wr=n("27f3"),_r=n.n(wr),Er=Re["n"](Re["h"]([Re["t"]({result:Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),estimated_fee:Je(32)})))}),Re["m"]({feedback_token:Re["q"]})])),Tr=Re["c"](Re["n"](Re["t"]({path:Re["o"](ot),fee:Je(32)}))),Sr=Re["n"](Re["t"]({address:ot,url:Re["q"],rtt:Re["l"],price:et(32),token:ot})),xr=Re["n"](Re["t"]({sender:ot,receiver:ot,amount:et(32),expiration_block:et(32),one_to_n_address:ot,chain_id:et(32)})),Ar=Re["n"](Re["t"]({last_iou:st(xr)})),Rr={SENT:"sent",RECEIVED:"received"},Cr=Re["n"](Re["h"]([Re["t"]({transfer:it(st(sr)),fee:Je(32),partner:ot}),Re["m"]({secret:it(Re["t"]({value:rt,registerBlock:Re["l"]})),transferProcessed:it(st(tr)),refund:it(st(ur)),channelClosed:it(nt),secretRequest:it(st(nr)),secretReveal:it(st(rr)),unlock:it(st(lr)),lockExpired:it(st(dr)),unlockProcessed:it(st(tr)),lockExpiredProcessed:it(st(tr))})])),Nr=Re["n"](Re["p"](Re["q"],Cr));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(zn||(zn={}));var Pr=Re["t"]({secrethash:nt,direction:Re["i"](_r()(Rr))}),Ir=En(Pr,"transfer/request","transfer/success","transfer/failure",Re["h"]([Re["t"]({tokenNetwork:ot,target:ot,value:et(32),paths:Tr,paymentId:et(8)}),Re["m"]({secret:rt,expiration:Re["l"],initiator:ot})]),Re["m"]({balanceProof:st(In)})),Dr=_n("transferSigned",Re["t"]({message:st(sr),fee:Je(32)}),Pr),Ur=_n("transferProcessed",Re["t"]({message:st(tr)}),Pr),Mr=_n("transferSecret",Re["t"]({secret:rt}),Pr),Br=En(Pr,"transferSecret/register/request","transferSecret/register/success","transferSecret/register/failure",Re["h"]([Re["t"]({secret:rt}),Re["m"]({subkey:Re["d"]})]),Re["t"]({secret:rt,txHash:nt,txBlock:Re["l"],confirmed:Re["v"]([Re["u"],Re["d"]])})),Lr=_n("transferSecretRequest",Re["t"]({message:st(nr)}),Pr),Fr=_n("transferSecretReveal",Re["t"]({message:st(rr)}),Pr),$r=En(Pr,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Re["t"]({message:st(lr)})),qr=_n("transferUnlockProcessed",Re["t"]({message:st(tr)}),Pr),Hr=En(Pr,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Re["t"]({message:st(dr)})),Vr=_n("transferExpireProcessed",Re["t"]({message:st(tr)}),Pr),Wr=_n("transferRefunded",Re["t"]({message:st(ur)}),Pr),Gr=_n("transferClear",void 0,Pr),Kr=Re["t"]({tokenNetwork:ot,partner:ot,totalWithdraw:et(32),expiration:Re["l"]}),Zr=En(Kr,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Re["t"]({message:st(pr)}),Re["t"]({message:st(br)})),Xr=Re["t"]({tokenNetwork:ot,target:ot,value:et(32)}),Yr=Re["t"]({tokenNetwork:ot,serviceAddress:ot}),Qr=En(Xr,"path/find/request","path/find/success","path/find/failure",Re["m"]({paths:Tr,pfs:Re["v"]([Sr,Re["k"]])}),Re["t"]({paths:Tr})),zr=_n("pfsListUpdated",Re["t"]({pfsList:Re["o"](ot)})),Jr=_n("iouPersist",Re["t"]({iou:st(xr)}),Yr),ea=_n("iouClear",void 0,Yr),ta=_n("udcDeposited",et(32)),na=_n("raidenShutdown",Re["t"]({reason:Re["v"]([Re["j"](Se.STOP),Re["j"](Se.ACCOUNT_CHANGED),Re["j"](Se.NETWORK_CHANGED),bn])})),ra=_n("raidenConfigUpdate",$t),aa=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:na,raidenConfigUpdate:ra},r),a),o),i),c),oa=[aa.raidenShutdown,aa.newBlock,aa.matrixPresence.success,aa.tokenMonitored],ia=[Bn.success,Fn.success,$n,qn.success,Vn.success,Br.success],ca=Re["v"]([Bn.success.codec,Fn.success.codec,$n.codec,qn.success.codec,Vn.success.codec,Br.success.codec]);function sa(e){return Object.assign(Object.assign({},e),{version:0})}function ua(e,t){return ba(e)||pa(e,t)||da(e,t)||la()}function la(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function da(e,t){if(e){if("string"===typeof e)return fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fa(e,t):void 0}}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ba(e){if(Array.isArray(e))return e}function ya(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=ua(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function ma(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function va(e,t){return wa(e)||ja(e,t)||Oa(e,t)||ga()}function ga(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oa(e,t){if(e){if("string"===typeof e)return ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ka(e,t):void 0}}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wa(e){if(Array.isArray(e))return e}var _a={chainId:w["Zero"],tokenNetworkAddress:w["AddressZero"],channelId:w["Zero"],nonce:w["Zero"],transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"],additionalHash:w["HashZero"],signature:Ae};function Ea(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=va(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:_a,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:w["Zero"]})}}function Ta(e){for(var t,n={},r=function(){for(var t=va(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=va(s[c],2),l=u[0],d=u[1];Ea(d,{own:e.address,partner:l});var f=Xt()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:f,tokenNetwork:r}),Object.assign(n,ha({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}var Sa=[sa,ya,ma,Ta],xa=Sa.length-1;function Aa(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xa,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Sa[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var Ra=n("948b"),Ca=n("ad02");function Na(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Pa(e,t){var n;if("boolean"===typeof e?e=e?w["One"]:w["Zero"]:"number"===typeof e&&(e=Object(j["bigNumberify"])(e)),"string"!==typeof e||Object(Ra["isHexString"])(e)||(e=Object(j["toUtf8Bytes"])(e)),Object(Ra["isArrayish"])(e)&&(e=Object(Ra["hexlify"])(e)),Qe.is(e)){if(e.lt(0))throw new fn(Ht.DTA_NEGATIVE_NUMBER);if(e.gte(w["Two"].pow(8*t)))throw new fn(Ht.DTA_NUMBER_TOO_LARGE);n=Object(Ra["hexZeroPad"])(Object(Ra["hexlify"])(e),t)}else{if("string"!==typeof e)throw new fn(Ht.DTA_UNENCODABLE_DATA);if(Object(Ra["hexDataLength"])(e)!==t)throw new fn(Ht.DTA_ARRAY_LENGTH_DIFFRENCE);n=e}return n}var Ia,Da=function(e){return null!=e&&e["isLosslessNumber"]};function Ua(e){return Ca["parse"](e,(function(e,t){if(Na(e),Da(t))try{return t.valueOf()}catch(n){return Object(j["bigNumberify"])(t.toString())}return t}))}function Ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Na(e),j["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return Ca["stringify"](e,t,n)}(function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})(Ia||(Ia={}));var Ba=Re["n"](Re["t"]({address:ot,deposit:et(32),withdraw:et(32),locks:Re["o"](Pn),balanceProof:st(In)})),La=Re["h"]([Re["n"](Re["t"]({id:Re["l"],token:ot,tokenNetwork:ot,settleTimeout:Re["l"],isFirstParticipant:Re["d"],openBlock:Re["l"],own:Ba,partner:Ba})),Re["v"]([Re["n"](Re["t"]({state:Re["v"]([Re["j"](Ia.open),Re["j"](Ia.closing)])})),Re["h"]([Re["n"](Re["t"]({closeBlock:Re["l"],closeParticipant:ot})),Re["v"]([Re["n"](Re["t"]({state:Re["v"]([Re["j"](Ia.closed),Re["j"](Ia.settleable),Re["j"](Ia.settling)])})),Re["n"](Re["t"]({state:Re["j"](Ia.settled),settleBlock:Re["l"]}))])])])]),Fa=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},$a=Re["n"](Re["t"]({address:ot,version:Re["j"](xa),chainId:Re["l"],registry:ot,blockNumber:Re["l"],config:$t,channels:Re["n"](Re["p"](Nn,La)),oldChannels:Re["n"](Re["p"](Re["q"],La)),tokens:Re["n"](Re["p"](Re["q"],ot)),transport:Re["n"](Re["m"]({server:Re["q"],setup:Wn,rooms:Re["n"](Re["p"](Re["q"],Re["c"](Re["q"])))})),sent:Nr,received:Nr,iou:Re["n"](Re["p"](Re["q"],Re["p"](Re["q"],st(xr)))),pendingTxs:Re["o"](ca)}));function qa(e){return Ma($a.encode(e),void 0,2)}function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=Ua(e));var r=Aa(e,xa,{log:n});try{return Xe($a,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r),a}}function Va(e){var t,n=e.network,r=e.address,a=e.contractsInfo,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:r,version:xa,chainId:n.chainId,registry:a.TokenNetworkRegistry.address,blockNumber:a.TokenNetworkRegistry.block_number,config:null!==(t=o.config)&&void 0!==t?t:{},channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[]}}var Wa=Va({network:Object(j["getNetwork"])("unspecified"),address:w["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:w["AddressZero"],block_number:0},ServiceRegistry:{address:w["AddressZero"],block_number:0},UserDeposit:{address:w["AddressZero"],block_number:0},SecretRegistry:{address:w["AddressZero"],block_number:0},MonitoringService:{address:w["AddressZero"],block_number:0}}}),Ga=function(e){return e&&"function"===typeof e.getItem},Ka=function(e,t,n,r,a){return Fa(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,d,f,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Ga(r)?(u=r,l=void 0):Ga(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=Ha(l,{log:i})),!u){o.next=23;break}return f="raiden_".concat(Dt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(f);case 8:if(b=o.sent,!b){o.next=20;break}if(m=Ha(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new fn(Ht.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Ne()((function(e){u.setItem(f,qa(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=Va({network:e,address:n,contractsInfo:t})),v=qt({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},Za=n("9bf7"),Xa=n.n(Za);function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),Ya({},o,s)))}}return r}}var za=n("c4cc"),Ja=n("2313"),eo=n("9f2d"),to=n("69dd"),no=n("742d");function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t){return uo(e)||so(e,t)||io(e,t)||oo()}function oo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function io(e,t){if(e){if("string"===typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?co(e,t):void 0}}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function so(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function uo(e){if(Array.isArray(e))return e}function lo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(to["a"])())}}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(to["a"])(),Object($["a"])((function(e){return Object(pt["a"])(Object.entries(e))})),Object(no["a"])((function(t,n){var r=t.acc,a=ao(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),ro({},o,i)),changed:[o,i]}}),{acc:{}}),Object(q["a"])("changed"),Object(L["a"])(Ye))}}function po(e,t){return vo(e)||ho(e,t)||yo(e,t)||bo()}function bo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yo(e,t){if(e){if("string"===typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(e,t):void 0}}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ho(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vo(e){if(Array.isArray(e))return e}function go(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Oo(e){return"".concat(e.id,"#").concat(go(e))}function ko(e){var t=w["Zero"];if(e.state!==Ia.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,ownOnchainUnlocked:t,ownUnlocked:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t,partnerOnchainUnlocked:t,partnerUnlocked:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=e.own.deposit.sub(n).sub(i).add(s),d=e.partner.deposit.sub(r).sub(c).add(u),f=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),w["Zero"]),p=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),w["Zero"]),b=a.add(f),y=o.add(p);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:l,ownOnchainUnlocked:f,ownUnlocked:b,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:d,partnerOnchainUnlocked:p,partnerUnlocked:y}}function jo(e,t,n){var r=n.log;return function(n){return n.pipe(Object(za["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(n){return Object(pt["a"])(n.wait()).pipe(Object(B["a"])((function(a){if(!a.status)throw new fn(t,{transactionHash:n.hash});return r.debug("".concat(e,' tx "').concat(n.hash,'" successfuly mined!')),n.hash})))})))}}function wo(e){return e.pipe(Object(q["a"])("channels"),fo(),Object(q["a"])(1),Object(Ja["a"])(Oo,void 0,void 0,(function(){return new C["a"](1)})),Object(B["a"])((function(t){var n=t.key.split("#"),r=po(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(eo["a"])(e.pipe(Object(L["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function _o(e){return _o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(e)}function Eo(e,t){return xo(e)||So(e,t)||Co(e,t)||To()}function To(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function So(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xo(e){if(Array.isArray(e))return e}function Ao(e){return Po(e)||No(e)||Co(e)||Ro()}function Ro(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Co(e,t){if(e){if("string"===typeof e)return Io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Io(e,t):void 0}}function No(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Po(e){if(Array.isArray(e))return Io(e)}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uo(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Mo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Bo=Rn(Wa.blockNumber).handle(Un,(function(e,t){Uo(e);var n=t.payload;return n.blockNumber})),Lo=Rn(Wa.tokens).handle(Mn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return Object.assign(Object.assign({},e),Do({},r,a))})),Fo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(wn(ia,t)){if(void 0===t.payload.confirmed)return[].concat(Ao(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},$o={address:w["AddressZero"],deposit:w["Zero"],withdraw:w["Zero"],locks:[],balanceProof:{chainId:w["Zero"],tokenNetworkAddress:w["AddressZero"],channelId:w["Zero"],nonce:w["Zero"],transferredAmount:w["Zero"],lockedAmount:w["Zero"],locksroot:w["HashZero"],additionalHash:w["HashZero"],signature:Ae}};function qo(e,t){var n,r,a=go(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:Ia.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},$o),{address:e.address}),partner:Object.assign(Object.assign({},$o),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},a,i))})}function Ho(e,t){if(!t.payload.confirmed)return e;var n=go(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==Ia.open||r.id!==t.payload.id)return e;var a=$n.is(t)?["withdraw",t.payload.totalWithdraw]:["deposit",t.payload.totalDeposit],o=Eo(a,2),i=o[0],c=o[1],s=t.payload.participant===r.partner.address?"partner":"own";return c.lte(r[s][i])?e:(r=Object.assign(Object.assign({},r),Do({},s,Object.assign(Object.assign({},r[s]),Do({},i,c)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},n,r))}))}function Vo(e,t){var n=go(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===Ia.open)r=Object.assign(Object.assign({},r),{state:Ia.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:Ia.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},n,r))})}function Wo(e,t){var n=go(t.meta),r=e.channels[n];if(!r)return e;if(qn.request.is(t)&&r.state===Ia.open)r=Object.assign(Object.assign({},r),{state:Ia.closing});else if(Vn.request.is(t)&&r.state===Ia.settleable)r=Object.assign(Object.assign({},r),{state:Ia.settling});else{if(!Hn.is(t)||r.state!==Ia.closed)return e;r=Object.assign(Object.assign({},r),{state:Ia.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},n,r))})}function Go(e,t){var n=go(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==Ia.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},n,Object.assign(Object.assign({},r),{state:Ia.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],Mo(a,["symbol"===_o(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),Do({},Oo(r),Object.assign(Object.assign({},r),{state:Ia.settled,settleBlock:t.payload.txBlock})))})}return e}function Ko(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=go({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===Rr.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Do({},a,Object.assign(Object.assign({},e.channels[a]),Do({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var Zo=Rn(Wa).handle(Bn.success,qo).handle([Fn.success,$n],Ho).handle([qn.request,Hn,Vn.request],Wo).handle(qn.success,Vo).handle(Vn.success,Go).handle(Br.success,Ko),Xo=Qa({blockNumber:Bo,tokens:Lo,pendingTxs:Fo},Wa),Yo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;return[Xo,Zo].reduce((function(e,n){return n(e,t)}),e)},Qo=Yo;function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jo(e){return ri(e)||ni(e)||ti(e)||ei()}function ei(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ti(e,t){if(e){if("string"===typeof e)return ai(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ai(e,t):void 0}}function ni(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ri(e){if(Array.isArray(e))return ai(e)}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oi,ii=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ci=Rn(Wa.transport).handle(Kn,(function(e,t){e.rooms;var n=ii(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(Xn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),zo({},t.meta.address,[t.payload.roomId].concat(Jo((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Yn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),zo({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),si=Qa({transport:ci},Wa),ui=si,li=n("3b2b");function di(e){return di="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pi,bi,yi=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},mi=(oi={},fi(oi,Cn.DELIVERED,12),fi(oi,Cn.PROCESSED,0),fi(oi,Cn.SECRET_REQUEST,3),fi(oi,Cn.SECRET_REVEAL,11),fi(oi,Cn.LOCKED_TRANSFER,7),fi(oi,Cn.REFUND_TRANSFER,8),fi(oi,Cn.UNLOCK,4),fi(oi,Cn.LOCK_EXPIRED,13),fi(oi,Cn.WITHDRAW_REQUEST,15),fi(oi,Cn.WITHDRAW_CONFIRMATION,16),fi(oi,Cn.WITHDRAW_EXPIRED,17),fi(oi,Cn.PFS_CAPACITY_UPDATE,-1),fi(oi,Cn.PFS_FEE_UPDATE,-1),fi(oi,Cn.MONITOR_REQUEST,-1),oi);function hi(e){var t=e.routes.map((function(e){return Object(j["keccak256"])(j["RLP"].encode(e.route))}));return Object(j["keccak256"])(j["RLP"].encode(t))}function vi(e,t,n){return e.isZero()&&t.isZero()&&n===w["HashZero"]?w["HashZero"]:Object(j["keccak256"])(Object(Ra["concat"])([Pa(e,32),Pa(t,32),Pa(n,32)]))}function gi(e){switch(e.type){case Cn.LOCKED_TRANSFER:case Cn.REFUND_TRANSFER:var t=Object(Ra["concat"])([Pa(mi[e.type],1),Pa(e.message_identifier,8),Pa(e.payment_identifier,8),Pa(e.lock.expiration,32),Pa(e.token,20),Pa(e.recipient,20),Pa(e.target,20),Pa(e.initiator,20),Pa(e.lock.secrethash,32),Pa(e.lock.amount,32)]);return e.type===Cn.LOCKED_TRANSFER&&(t=Object(Ra["concat"])([t,hi(e.metadata)])),Object(j["keccak256"])(t);case Cn.UNLOCK:return Object(j["keccak256"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(e.message_identifier,8),Pa(e.payment_identifier,8),Pa(e.secret,32)]));case Cn.LOCK_EXPIRED:return Object(j["keccak256"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(e.message_identifier,8),Pa(e.recipient,20),Pa(e.secrethash,32)]))}}function Oi(e){var t;switch(e.type){case Cn.DELIVERED:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(0,3),Pa(e.delivered_message_identifier,8)]));case Cn.PROCESSED:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(0,3),Pa(e.message_identifier,8)]));case Cn.LOCKED_TRANSFER:case Cn.REFUND_TRANSFER:case Cn.UNLOCK:case Cn.LOCK_EXPIRED:var n=gi(e),r=vi(e.transferred_amount,e.locked_amount,e.locksroot);return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(e.token_network_address,20),Pa(e.chain_id,32),Pa(pi.BALANCE_PROOF,32),Pa(e.channel_identifier,32),Pa(r,32),Pa(e.nonce,32),Pa(n,32)]));case Cn.SECRET_REQUEST:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(0,3),Pa(e.message_identifier,8),Pa(e.payment_identifier,8),Pa(e.secrethash,32),Pa(e.amount,32),Pa(e.expiration,32)]));case Cn.SECRET_REVEAL:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(0,3),Pa(e.message_identifier,8),Pa(e.secret,32)]));case Cn.WITHDRAW_REQUEST:case Cn.WITHDRAW_CONFIRMATION:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(e.token_network_address,20),Pa(e.chain_id,32),Pa(pi.WITHDRAW,32),Pa(e.channel_identifier,32),Pa(e.participant,20),Pa(e.total_withdraw,32),Pa(e.expiration,32)]));case Cn.WITHDRAW_EXPIRED:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(mi[e.type],1),Pa(0,3),Pa(e.nonce,32),Pa(e.message_identifier,8),Pa(e.token_network_address,20),Pa(e.chain_id,32),Pa(pi.WITHDRAW,32),Pa(e.channel_identifier,32),Pa(e.participant,20),Pa(e.total_withdraw,32),Pa(e.expiration,32)]));case Cn.PFS_CAPACITY_UPDATE:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(e.canonical_identifier.chain_identifier,32),Pa(e.canonical_identifier.token_network_address,20),Pa(e.canonical_identifier.channel_identifier,32),Pa(e.updating_participant,20),Pa(e.other_participant,20),Pa(e.updating_nonce,8),Pa(e.other_nonce,8),Pa(e.updating_capacity,32),Pa(e.other_capacity,32),Pa(e.reveal_timeout,32)]));case Cn.PFS_FEE_UPDATE:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(e.canonical_identifier.chain_identifier,32),Pa(e.canonical_identifier.token_network_address,20),Pa(e.canonical_identifier.channel_identifier,32),Pa(e.updating_participant,20),Pa(e.fee_schedule.cap_fees,1),Pa(e.fee_schedule.flat,32),Pa(e.fee_schedule.proportional,32),Object(li["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Pa(e.timestamp,19)]));case Cn.MONITOR_REQUEST:return Object(Ra["hexlify"])(Object(Ra["concat"])([Pa(e.monitoring_service_contract_address,20),Pa(e.balance_proof.chain_id,32),Pa(pi.MS_REWARD,32),Pa(e.balance_proof.token_network_address,20),Pa(e.non_closing_participant,20),Pa(e.non_closing_signature,65),Pa(e.reward_amount,32)]))}}function ki(e){return tt.is(e.signature)}function ji(e){return Object(j["verifyMessage"])(Object(Ra["arrayify"])(Oi(e)),e.signature)}function wi(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:gi(e),signature:e.signature}}function _i(e){return Ma("signature"in e?st(gr).encode(e):gr.encode(e))}function Ei(e){var t=Ua(e);return Ke(t&&"object"===di(t)&&"type"in t&&Object.values(Cn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Xe("signature"in t?st(gr):gr,t)}function Ti(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return yi(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!ki(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(Ra["arrayify"])(Oi(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function Si(e){return function(t){return jr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e,t){return Ni(e)||Ci(e,t)||Ii(e,t)||Ri()}function Ri(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ci(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ni(e){if(Array.isArray(e))return e}function Pi(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Ii(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Ii(e,t){if(e){if("string"===typeof e)return Di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(e,t):void 0}}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ui(e){var t,n=[],r=Pi(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Pa(a.expiration,32),Pa(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(j["keccak256"])(Object(Ra["concat"])(n))}function Mi(e){return Object(j["sha256"])(e)}function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(Ra["hexlify"])(Object(j["randomBytes"])(e))}function Li(){return Object(j["bigNumberify"])(Date.now())}function Fi(){return Object(j["bigNumberify"])(Date.now())}function $i(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?Rr.SENT:Rr.RECEIVED}function qi(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat($i(e),":").concat(e.transfer[1].lock.secrethash)}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(pi||(pi={}));var Hi=new RegExp("^(".concat(Object.values(Rr).join("|"),"):0x[a-z0-9]{64}$"),"i");function Vi(e){Ke(Hi.test(e),"Invalid transferKey format");var t=e.split(":"),n=Ai(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function Wi(e){return function(t){return t[e]?t[e][0]:void 0}}var Gi,Ki=(bi={},xi(bi,zn.expired,Wi("lockExpiredProcessed")),xi(bi,zn.unlocked,Wi("unlockProcessed")),xi(bi,zn.expiring,Wi("lockExpired")),xi(bi,zn.unlocking,Wi("unlock")),xi(bi,zn.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),xi(bi,zn.revealed,Wi("secretReveal")),xi(bi,zn.requested,Wi("secretRequest")),xi(bi,zn.closed,Wi("channelClosed")),xi(bi,zn.refunded,Wi("refund")),xi(bi,zn.received,Wi("transferProcessed")),xi(bi,zn.pending,Wi("transfer")),bi);function Zi(e){for(var t,n,r,a,o=new Date(e.transfer[0]),i=o,c=zn.pending,s=0,u=Object.entries(Ki);s<u.length;s++){var l=Ai(u[s],2),d=l[0],f=l[1],p=f(e);if(void 0!==p){c=d,i=new Date(p);break}}var b=e.transfer[1],y=$i(e),m=b.lock.amount.sub(e.fee),h=e.secretRequest&&e.secretRequest[1].amount.lt(m),v=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(h||e.refund||e.lockExpired||e.channelClosed)&&void 0,g=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:qi(e),secrethash:b.lock.secrethash,direction:y,status:c,initiator:b.initiator,partner:e.partner,target:b.target,metadata:b.metadata,paymentId:b.payment_identifier,chainId:b.chain_id.toNumber(),token:b.token,tokenNetwork:b.token_network_address,channelId:b.channel_identifier,value:m,fee:e.fee,amount:b.lock.amount,expirationBlock:b.lock.expiration.toNumber(),startedAt:o,changedAt:i,success:v,completed:g}}function Xi(e,t){return zi(e)||Qi(e,t)||tc(e,t)||Yi()}function Yi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zi(e){if(Array.isArray(e))return e}function Ji(e){return rc(e)||nc(e)||tc(e)||ec()}function ec(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tc(e,t){if(e){if("string"===typeof e)return ac(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ac(e,t):void 0}}function nc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function rc(e){if(Array.isArray(e))return ac(e)}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ic=(Gi={},oc(Gi,Rr.SENT,"own"),oc(Gi,Rr.RECEIVED,"partner"),Gi);function cc(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Br.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:ct({value:t.payload.secret,registerBlock:u})})))))),e}function sc(e,t){var n=t.payload.message,r=n.lock,a=r.secrethash,o=t.meta.direction===Rr.SENT?n.recipient:ji(n),i=ic[t.meta.direction];if(a in e[t.meta.direction])return e;var c=go({tokenNetwork:n.token_network_address,partner:o}),s=e.channels[c];if(!s)return e;var u=s[i].balanceProof,l=[].concat(Ji(s[i].locks),[r]),d=Ui(l);if(n.locksroot!==d||!n.nonce.eq(u.nonce.add(1))||!n.transferred_amount.eq(u.transferredAmount)||!n.locked_amount.eq(u.lockedAmount.add(r.amount)))return e;s=Object.assign(Object.assign({},s),oc({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:wi(n)})));var f={transfer:ct(n),fee:t.payload.fee,partner:o};return Object.assign(Object.assign({},e),oc({channels:Object.assign(Object.assign({},e.channels),oc({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},a,f))))}function uc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:ct(t.payload.message)}))))):e}function lc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:ct(t.payload.message)})))))}function dc(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=ic[t.meta.direction],c=go({tokenNetwork:a.token_network_address,partner:o}),s=e.channels[c],u=a.lock;if(!s||!s[i].locks.length)return e;var l=s[i].locks.filter((function(e){return e.secrethash!==r})),d=Ui(l);if(n.locksroot!==d||!s[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(s[i].balanceProof.transferredAmount.add(u.amount))||!n.locked_amount.eq(s[i].balanceProof.lockedAmount.sub(u.amount)))return e;s=Object.assign(Object.assign({},s),oc({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:wi(n)})));var f=Object.assign(Object.assign({},e[t.meta.direction][r]),{unlock:ct(n)});return Object.assign(Object.assign({},e),oc({channels:Object.assign(Object.assign({},e.channels),oc({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},r,f))))}function fc(e,t){var n=t.payload.message,r=t.meta.secrethash;if(!(r in e[t.meta.direction])||e[t.meta.direction][r].unlock||e[t.meta.direction][r].lockExpired)return e;var a=e[t.meta.direction][r].transfer[1],o=e[t.meta.direction][r].partner,i=ic[t.meta.direction],c=go({tokenNetwork:a.token_network_address,partner:o}),s=e.channels[c],u=a.lock;if(!s||!s[i].locks.length)return e;var l=s[i].locks.filter((function(e){return e.secrethash!==r})),d=Ui(l);if(n.locksroot!==d||!s[i].balanceProof.nonce.add(1).eq(n.nonce)||!n.transferred_amount.eq(s[i].balanceProof.transferredAmount)||!n.locked_amount.eq(s[i].balanceProof.lockedAmount.sub(u.amount)))return e;s=Object.assign(Object.assign({},s),oc({},i,Object.assign(Object.assign({},s[i]),{locks:l,balanceProof:wi(n)})));var f=Object.assign(Object.assign({},e[t.meta.direction][r]),{lockExpired:ct(n)});return Object.assign(Object.assign({},e),oc({channels:Object.assign(Object.assign({},e.channels),oc({},c,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},r,f))))}function pc(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Ur.is(t))n="transferProcessed";else if(qr.is(t))n="unlockProcessed";else if(Vr.is(t))n="lockExpiredProcessed";else{if(!Wr.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),oc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),oc({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),oc({},n,ct(t.payload.message)))))))}function bc(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Xi(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),oc({},i,Object.assign(Object.assign({},c),{channelClosed:ct(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var f=Xi(d[l],2),p=f[0],b=f[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),oc({},p,Object.assign(Object.assign({},b),{channelClosed:ct(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function yc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?(e=Xa()([t.meta.direction,n],e),e):e}function mc(e,t){var n=t.payload.message,r=go(t.meta),a=e.channels[r];if(!a||a.state!==Ia.open)return e;var o=a.own.balanceProof;return n.nonce.eq(o.nonce.add(1))&&n.expiration.gt(e.blockNumber)&&(a=Object.assign(Object.assign({},a),{own:Object.assign(Object.assign({},a.own),{balanceProof:Object.assign(Object.assign({},o),{nonce:n.nonce})})}),e=Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),oc({},r,a))})),e}var hc=Rn(Wa).handle([Mr,Br.success],cc).handle(Dr,sc).handle([Ur,qr,Vr,Wr],pc).handle(Lr,uc).handle(Fr,lc).handle($r.success,dc).handle(Hr.success,fc).handle(qn.success,bc).handle(Gr,yc).handle(Zr.success,mc),vc=hc;function gc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oc=Rn(Wa.iou).handle(Jr,(function(e,t){return Object.assign(Object.assign({},e),gc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),gc({},t.meta.serviceAddress,t.payload.iou))))})).handle(ea,(function(e,t){return Xa()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),kc=Qa({iou:Oc},Wa),jc=kc;function wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _c(e,t){return Ac(e)||xc(e,t)||Tc(e,t)||Ec()}function Ec(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tc(e,t){if(e){if("string"===typeof e)return Sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sc(e,t):void 0}}function Sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ac(e){if(Array.isArray(e))return e}var Rc=Rn(Wa).handle(ra,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=_c(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),wc({},c,s)):c in r&&(r=Xa()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),Cc={configReducer:Rc,channelsReducer:Qo,transportReducer:ui,transfersReducer:vc,servicesReducer:jc},Nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;return Object.values(Cc).reduce((function(e,n){return n(e,t)}),e)},Pc=n("a744"),Ic=n("8ef6"),Dc=n("f59d"),Uc=n("a0ac"),Mc=n.n(Uc),Bc=n("13ea"),Lc=n.n(Bc),Fc=n("63ea"),$c=n.n(Fc);function qc(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Wc(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Hc(e,t){return Zc(e)||Kc(e,t)||Wc(e,t)||Vc()}function Vc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wc(e,t){if(e){if("string"===typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gc(e,t):void 0}}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zc(e){if(Array.isArray(e))return e}function Xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yc=R()((function(e){return e.pipe(Object(L["a"])(Zn.success.is),Object(no["a"])((function(e,t){return Object.assign(Object.assign({},e),Xc({},t.meta.address,t))}),{}),Object(bt["a"])(),Object(Pc["a"])({}))}));function Qc(e){return Object.entries(e).filter((function(e){var t=Hc(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=Hc(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function zc(e){var t;if(e){var n={};try{var r,a=qc(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}function Jc(e,t){return Object(ft["a"])([e,t]).pipe(Object(B["a"])((function(e){var t=Hc(e,2),n=t[0],r=n.caps,a=n.monitoringReward,o=n.rateToSvt,i=t[1];return Object.assign(Xc({},xe.NO_RECEIVE,!((null===a||void 0===a?void 0:a.gt(0))&&a.lte(i)&&!Lc()(o))),r)})),Object(to["a"])($c.a))}var es=n("808d"),ts=n("5e53"),ns=n("744c"),rs=n("c575"),as=n("66aa"),os=n("b7d7"),is=n("6863"),cs=n("e95d"),ss=n("fcf1"),us=n("b4cc1"),ls=n("0318"),ds=n("b389"),fs=n("0ca2"),ps=n("cd9d"),bs=n.n(ps),ys=n("8358"),ms=n("ddfd"),hs=n("a0df"),vs=n("31a7"),gs=n("c998"),Os=n("ee79"),ks=n("b4cc"),js=n("0ff6"),ws=n("4e0b2"),_s=n("1f0b");function Es(e,t){return xs(e)||Ss(e,t)||Cs(e,t)||Ts()}function Ts(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ss(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xs(e){if(Array.isArray(e))return e}function As(e){return Ps(e)||Ns(e)||Cs(e)||Rs()}function Rs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cs(e,t){if(e){if("string"===typeof e)return Is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Is(e,t):void 0}}function Ns(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ps(e){if(Array.isArray(e))return Is(e)}function Is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Us=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ms=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},vs.contracts),js.contracts);case"ropsten":return Object.assign(Object.assign({},hs.contracts),ks.contracts);case"goerli":return Object.assign(Object.assign({},gs.contracts),ws.contracts);case"homestead":return Object.assign(Object.assign({},Os.contracts),_s.contracts);default:throw new fn(Ht.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Bs(e,t){var n,r;return Us(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(Dt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(j["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(j["sha256"])(c),u=new ms["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Ls=function(e,t,n){return Us(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!ys["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof ms["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new fn(Ht.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!ot.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new fn(Ht.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!at.is(e)){r.next=37;break}a=new ms["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new fn(Ht.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Bs,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Fs=function(e){return e.pipe(Object($["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),fo(),Object(q["a"])(1),Object(B["a"])(Zi))},$s=function(e){return Object.values(e).reduce((function(e,t){var n=ko(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),Ds({},t.token,Object.assign(Object.assign({},e[t.token]),Ds({},t.partner.address,c))))}),{})};function qs(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Hs(e,t){return e.signer===t?e:e.connect(t)}function Vs(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Us(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,As(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new fn(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,Ke(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new fn(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function Ws(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Us(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(lo("state","blockNumber"),Object(ss["a"])(a),Object(L["a"])((function(e){var t=Es(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(cs["a"])((function(e){var t=Es(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(D["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new fn(Ht.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(Ye)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var Gs=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Ks(e){return Ys(e)||Xs(e)||Js(e)||Zs()}function Zs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ys(e){if(Array.isArray(e))return eu(e)}function Qs(e,t){return nu(e)||tu(e,t)||Js(e,t)||zs()}function zs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Js(e,t){if(e){if("string"===typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,t):void 0}}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nu(e){if(Array.isArray(e))return e}function ru(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function au(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(D["a"])(e).pipe(Object(as["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(es["a"])(t):Object(ts["a"])(e)})))})))}var ou=function(e,t,n){ru(e),ru(t);var r=n.provider;return au((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(P["a"])(e),Ct(r,"block"))})),Object(B["a"])((function(e){return Un({blockNumber:e})})))},iu=function(e,t,n){ru(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(os["a"])(1),Object($["a"])((function(e){var t=j["defaultAbiCoder"].encode(["address"],[r]);return Lc()(e.tokens)?au((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(pt["a"])(e)})),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(L["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(ns["a"])(au((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(pt["a"])),au((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(pt["a"]))).pipe(Object(os["a"])(1),Object(is["a"])(Mn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(pt["a"])(Object.entries(e.tokens).map((function(e){var t=Qs(e,2),n=t[0],r=t[1];return Mn({token:n,tokenNetwork:r})})))})))},cu=function(e,t){return ru(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,Ln({id:a.id},{tokenNetwork:a.tokenNetwork,partner:a.partner.address});case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)}))))},su=function(e,t,n){ru(e),ru(t);var r=n.address,a=n.network,o=n.provider;return au((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(rs["a"])(o.pollingInterval).pipe(Object(cs["a"])((function(){return Object(I["a"])(e?au((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(P["a"])(na({reason:Se.ACCOUNT_CHANGED}))}))):U["a"],au((function(){return Pt(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(P["a"])(na({reason:Se.NETWORK_CHANGED})):U["a"]}))))})))})))},uu=function(e,t,n){ru(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(L["a"])(wn(Mn)),Object(Ja["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(cs["a"])((function(e){var t=a(e.payload.tokenNetwork);return Nt(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(P["a"])(e.payload.fromBlock):void 0).pipe(Object(L["a"])((function(e){var t=Qs(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(B["a"])((function(n){var a=Qs(n,5),o=a[0],i=a[1],c=a[2],s=a[3],u=a[4];return Bn.success({id:o.toNumber(),token:e.payload.token,settleTimeout:s.toNumber(),isFirstParticipant:r===i,txHash:u.transactionHash,txBlock:u.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===i?c:i})})))})))})))},lu=function(e){return e.pipe(Object(L["a"])(wn(Bn.success)),Object(L["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return Ln({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))};function du(e){var t=e.interface.events;return{depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function fu(e,t){var n=du(e),r=n.depositTopic,a=n.withdrawTopic,o=n.closedTopic,i=n.settledTopic,c={tokenNetwork:e.address,partner:t};return function(e){var n,s,u=Qs(e,2),l=u[0],d=u[1],f=l[l.length-1],p=null===(n=f.topics)||void 0===n?void 0:n[0],b=l[0].toNumber();switch(p){case r:var y=Qs(l,3),m=y[1],h=y[2],v=m===t?"partner":"own";if(h.lte(d[v].deposit))break;s=Fn.success({id:b,participant:m,totalDeposit:h,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case a:var g=Qs(l,3),O=g[1],k=g[2],j=O===t?"partner":"own";if(k.lte(d[j].withdraw))break;s=$n({id:b,participant:O,totalWithdraw:k,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case o:if("closeBlock"in d)break;var w=Qs(l,2),_=w[1];s=qn.success({id:b,participant:_,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case i:s=Vn.success({id:b,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0,locks:d.partner.locks},c);break}return s}}var pu=function(e,t,n){ru(e);var r=n.getTokenNetworkContract,a=n.latest$;return t.pipe(wo,Object($["a"])((function(e){return e.pipe(Object(cs["a"])((function(e){var t=e.tokenNetwork,n=e.partner.address,o=go(e),i=r(t),c=j["defaultAbiCoder"].encode(["uint256"],[e.id]),s={address:t,topics:[Object.values(du(i)),[c]]};return Nt(i,[s],Object(P["a"])(e.openBlock)).pipe(Object(ss["a"])(a.pipe(Object(q["a"])("state","channels",o))),Object(B["a"])(fu(i,n)),Object(L["a"])(Ye),Object(us["a"])(bs.a))})),Object(eo["a"])(e.pipe(Object(ls["a"])(1))))})))},bu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(L["a"])(wn(Bn.request)),Object(ss["a"])(t,u),Object($["a"])((function(t){var n,u,l=Qs(t,3),d=l[0],f=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,m=d.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=f.channels[go(d.meta)])||void 0===n?void 0:n.state;if(g)return Object(P["a"])(Bn.failure(new fn(Ht.CNL_INVALID_STATE,{state:g}),d.meta));var O=qs({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:y),k=O.signer,j=Hs(s(h),k),w=!d.payload.deposit||d.payload.deposit.isZero()?void 0:d.payload.deposit,_=Xt()(f.tokens,(function(e){return e===h})),E=Hs(c(_),k);return e.pipe(Object(L["a"])(Bn.success.is),Object(L["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(ds["a"])(1,void 0,(function(e){return Object(D["a"])((function(){var e;return j.functions.openChannel(o,v,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object($["a"])((function(e){return w?Object(pt["a"])(E.functions.approve(h,w)).pipe(Object(B["a"])((function(t){return[e,t]}))):Object(P["a"])([e])})),Object(za["a"])((function(e){var t=Qs(e,1),n=t[0];return r.debug('sent openChannel tx "'.concat(n.hash,'" to "').concat(h,'"'))})),Object(za["a"])((function(e){var t=Qs(e,2),n=t[1];return n?r.debug('sent approve tx "'.concat(n.hash,'" to "').concat(_,'"')):0})),Object($["a"])((function(e){var t=Qs(e,2),n=t[0],r=t[1];return Object(ft["a"])([Object(pt["a"])(n.wait()).pipe(Object(B["a"])((function(e){return{tx:n,receipt:e}}))),r?Object(pt["a"])(r.wait()).pipe(Object(B["a"])((function(e){return{tx:r,receipt:e}}))):Object(P["a"])(void 0)])})),Object($["a"])((function(t){var n=Qs(t,2),a=n[0],i=n[1];if(!a.receipt.status)throw new fn(Ht.CNL_OPENCHANNEL_FAILED,Object.assign(Object.assign({},d.meta),{transactionHash:a.tx.hash}));return r.debug('openChannel tx "'.concat(a.tx.hash,'" successfuly mined!')),(i?Object(P["a"])(i):U["a"]).pipe(Object($["a"])((function(t){var n=t.tx,a=t.receipt;if(!a.status)throw new fn(Ht.CNL_APPROVE_TRANSACTION_FAILED,{token:_,transactionHash:n.hash});return r.debug('approve tx "'.concat(n.hash,'" successfuly mined!')),e.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.payload.id;return j.functions.setTotalDeposit(t,o,w,v)})))})),jo("setTotalDeposit",Ht.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return Object(P["a"])(Fn.failure(e,d.meta))})))})),Object(Dc["a"])((function(e){return Object(P["a"])(Bn.failure(e,d.meta))})))})))})))},yu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(L["a"])(wn(Fn.request)),Object(ss["a"])(t,u),Object($["a"])((function(e){var t,n=Qs(e,3),u=n[0],l=n[1],d=n[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=go(u.meta),m=l.channels[y];if((null===m||void 0===m?void 0:m.state)!==Ia.open){var h=new fn(Ht.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(P["a"])(Fn.failure(h,u.meta))}var v=qs({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:d),g=v.signer,O=Hs(c(m.token),g),k=Hs(s(p),g);return Object(D["a"])((function(){return k.functions.getChannelParticipantInfo(m.id,o,b)})).pipe(Object($["a"])((function(e){var t=e[0];return Object(pt["a"])(O.functions.approve(p,u.payload.deposit.add(t))).pipe(jo("approve",Ht.CNL_APPROVE_TRANSACTION_FAILED,{log:r}),Object($["a"])((function(){return k.functions.setTotalDeposit(m.id,o,u.payload.deposit.add(t),b)})),jo("setTotalDeposit",Ht.CNL_SETTOTALDEPOSIT_FAILED,{log:r}))})),Object(fs["a"])(),Object(Dc["a"])((function(e){return Object(P["a"])(Fn.failure(e,u.meta))})))})))},mu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(L["a"])(wn(qn.request)),Object(ss["a"])(t,u),Object($["a"])((function(e){var t,n,u=Qs(e,3),l=u[0],d=u[1],f=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=qs({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=m.signer,v=Hs(s(b),h),g=d.channels[go(l.meta)];if((null===g||void 0===g?void 0:g.state)!==Ia.open&&(null===g||void 0===g?void 0:g.state)!==Ia.closing){var O=new fn(Ht.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(P["a"])(qn.failure(O,l.meta))}var k=g.partner.balanceProof,w=vi(k.transferredAmount,k.lockedAmount,k.locksroot),_=k.nonce,E=k.additionalHash,T=k.signature,S=Object(j["concat"])([Pa(b,20),Pa(c.chainId,32),Pa(pi.BALANCE_PROOF,32),Pa(g.id,32),Pa(w,32),Pa(_,32),Pa(E,32),Pa(T,65)]);return Object(pt["a"])(a.signMessage(S)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,w,_,E,T,e)})),jo("closeChannel",Ht.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return Object(P["a"])(qn.failure(e,l.meta))})))})))},hu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(L["a"])(wn(qn.success)),Object(L["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(L["a"])(Un.is),Object(M["a"])(1),Object(os["a"])(1),Object(is["a"])(t))})),Object(ss["a"])(t,u),Object(L["a"])((function(e){var t=Qs(e,2),n=t[0],r=t[1],a=r.channels[go(n.meta)];return(null===a||void 0===a?void 0:a.state)===Ia.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(w["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=Qs(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,f=d.tokenNetwork,p=d.partner,b=qs({signer:a,address:o,main:i},l),y=b.signer,m=Hs(s(f),y),h=u.channels[go(n.meta)],v=vi(h.partner.balanceProof.transferredAmount,h.partner.balanceProof.lockedAmount,h.partner.balanceProof.locksroot),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,k=h.partner.balanceProof.signature,w=Object(j["concat"])([Pa(f,20),Pa(c.chainId,32),Pa(pi.BALANCE_PROOF_UPDATE,32),Pa(h.id,32),Pa(v,32),Pa(g,32),Pa(O,32),Pa(k,65)]);return Object(pt["a"])(a.signMessage(w)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,p,o,v,g,O,k,e)})),jo("updateNonClosingBalanceProof",Ht.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},vu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(L["a"])(wn(Vn.request)),Object(ss["a"])(t,s),Object($["a"])((function(e){var t,n,s=Qs(e,3),u=s[0],l=s[1],d=s[2].subkey,f=u.meta.tokenNetwork,p=qs({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),b=p.signer,y=Hs(c(f),b),m=l.channels[go(u.meta)];if((null===m||void 0===m?void 0:m.state)!==Ia.settleable&&(null===m||void 0===m?void 0:m.state)!==Ia.settling){var h=new fn(Ht.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(P["a"])(Vn.failure(h,u.meta))}var v=m.own,g=m.partner;if(g.balanceProof.transferredAmount.add(g.balanceProof.lockedAmount).lt(v.balanceProof.transferredAmount.add(v.balanceProof.lockedAmount))){var O=[g,v];v=O[0],g=O[1]}return Object(pt["a"])(y.functions.settleChannel(m.id,v.address,v.balanceProof.transferredAmount,v.balanceProof.lockedAmount,v.balanceProof.locksroot,g.address,g.balanceProof.transferredAmount,g.balanceProof.lockedAmount,g.balanceProof.locksroot)).pipe(jo("settleChannel",Ht.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return Object(P["a"])(Vn.failure(e,u.meta))})))})))},gu=function(e,t){return e.pipe(Object(L["a"])(wn(Un)),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Qs(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===Ia.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Hn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Ou=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(L["a"])(wn(Vn.success)),Object(L["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(ss["a"])(t,s),Object(L["a"])((function(e){var t,n=Qs(e,2),r=n[0],a=n[1];return(null===(t=a.channels[go(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=Qs(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,f=Hs(c(l),qs({signer:a,address:o,main:i},s).signer),p=Object(j["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Ks(e),[Pa(t.expiration,32),Pa(t.amount,32),t.secrethash])}),[]));return Object(pt["a"])(f.functions.unlock(n.payload.id,o,d,p)).pipe(jo("unlock",Ht.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function ku(e,t,n,r){return au((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:t.blockNumber,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(L["a"])(Ye))}var ju=function(e,t,n){ru(e);var r=n.config$,a=n.provider;return Object(ft["a"])(t.pipe(lo("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(lo("confirmationBlocks"))).pipe(Object(L["a"])((function(e){var t=Qs(e,2),n=t[1];return n.length>0})),Object(cs["a"])((function(e){var t=Qs(e,3),n=t[0],r=t[1],o=t[2];return ns["a"].apply(void 0,Ks(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return ku(e,a,n,o)}))))})))},wu=n("47ea"),_u=n("bee6"),Eu=n("d337"),Tu=n("b4d5"),Su=n("3e18"),xu=n("d96a"),Au=n("2527"),Ru=n("fc5d");function Cu(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Nu(e,t){var n=Object(Ru["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Pu=n("6e77"),Iu=n("dc46"),Du=n.n(Iu);function Uu(e,t){return $u(e)||Fu(e,t)||Bu(e,t)||Mu()}function Mu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bu(e,t){if(e){if("string"===typeof e)return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lu(e,t):void 0}}function Lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $u(e){if(Array.isArray(e))return e}function qu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Hu(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Ye)}var Vu=Du()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Wu(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Vu(t))),n?Object(P["a"])(n):Object(Pu["a"])(e,"Room").pipe(Object(L["a"])(Vu(t)),Object(os["a"])(1))}function Gu(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(L["a"])((function(t){var n=t.presences;return e in n})),Object(os["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(P["a"])(a[e]):i.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(L["a"])(Ye),Object(to["a"])(),Object(yt["a"])((function(n){return Wu(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(B["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(to["a"])(),Object(B["a"])((function(e){return{room:t,userId:e}})))})),Object(yt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return U["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(P["a"])(a):Object(Pu["a"])(t,"RoomMember.membership",(function(e,t){return qu(e),t})).pipe(Object(L["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(os["a"])(1),Object($["a"])((function(e){return Object(D["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(is["a"])("string"===typeof e?e:e.label),Object(as["a"])((function(e){return e.pipe(Object(ss["a"])(c),Object($["a"])((function(e,t){var n=Uu(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(es["a"])(a/u)):Object(ts["a"])(r)})))})))})))}function Ku(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Ei(e);if("signature"in a){var o=ji(a);if(o!==t)throw new fn(Ht.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function Zu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xu(e,t){return el(e)||Ju(e,t)||Qu(e,t)||Yu()}function Yu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qu(e,t){if(e){if("string"===typeof e)return zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zu(e,t):void 0}}function zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ju(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function el(e){if(Array.isArray(e))return e}var tl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},nl="RAIDEN";function rl(e,t){var n=Cu(t.getHomeserverUrl());return Object(pt["a"])(Hu(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),r}))})),Object(q["a"])("roomId"),Object(wu["a"])())}function al(e,t){return Object(D["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function ol(e,t,n,r){return e.pipe(Object(L["a"])(Kn.is),Object(os["a"])(1),Object(za["a"])((function(){n.next(t),n.complete()})),Object(_u["a"])(1e3),Object(ss["a"])(r),Object($["a"])((function(e){var n=Xu(e,2),r=n[1];return rl(r,t).pipe(Object($["a"])((function(e){return al(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(fs["a"])())}function il(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function cl(e,t){return e.includes("://")||(e="https://"+e),Object(D["a"])((function(){var n=Date.now();return Object(Au["a"])(e+"/_matrix/client/versions").pipe(Object(Eu["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Dc["a"])((function(){return Object(P["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function sl(e,t){var n=this;return Object(Au["a"])(e).pipe(Object($["a"])((function(t){return tl(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Eu["a"])(t),Object($["a"])((function(e){return il(e)})),Object($["a"])((function(e){return cl(e,t)})),Object(wu["a"])(),Object($["a"])((function(e){return gt()(e,["rtt"])})),Object(L["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Tu["a"])((function(){return new fn(Ht.TRNS_NO_MATRIX_SERVERS)})))}function ul(e,t,n,r){var a=n.address,o=n.signer,i=Cu(e);if(!i)throw new fn(Ht.TRNS_NO_SERVERNAME,{server:e});return Object(D["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(P["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(pt["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(pt["a"])(r.login("m.login.password",{user:c,password:e,device_id:nl})).pipe(Object(Dc["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(pt["a"])(o.signMessage(s)).pipe(Object(B["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(pt["a"])(t.setDisplayName(a.displayName)),Object(pt["a"])(t.setAvatarUrl(r&&!Lc()(r)?Qc(r):""))).pipe(Object(is["a"])({matrix:t,server:n,setup:a}))})))}var ll=function(e,t,n){Zu(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(ft["a"])([i,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=Xu(e,2),o=n[0],i=o.state,c=o.caps,s=n[1],u=s.matrixServer,l=s.matrixServerLookup,d=s.httpTimeout,f=i.transport.server,p=i.transport.setup,b=[];u?(u===f&&b.push(Object(P["a"])({server:f,setup:p})),b.push(Object(P["a"])({server:u}))):(f&&b.push(Object(P["a"])({server:f,setup:p})),b.push(sl(l,d)));var y=function(e){return t=e,U["a"]};return Object(D["a"])((function(){return b.shift()||U["a"]})).pipe(Object(Dc["a"])(y),Object(Su["a"])((function(e){var t=e.server,n=e.setup;return ul(t,n,{address:r,signer:a},c).pipe(Object(Dc["a"])(y))})),Object(F["a"])(),Object(za["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(as["a"])((function(e){return e.pipe(Object($["a"])((function(){return b.length?Object(P["a"])(null):Object(ts["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(ol(e,n,o,c),Object(P["a"])(Kn({server:r,setup:a})),c.pipe(lo("logger"),Object(za["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(fs["a"])()))})))},dl=function(e,t,n){Zu(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(xu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(fs["a"])())},fl=n("80f6"),pl=n.n(fl);function bl(e,t){return hl(e)||ml(e,t)||Ol(e,t)||yl()}function yl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ml(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hl(e){if(Array.isArray(e))return e}function vl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function gl(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Ol(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Ol(e,t){if(e){if("string"===typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kl(e,t):void 0}}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},wl=["online","unavailable"],_l=/^@(0x[0-9a-f]{40})[.:]/i;function El(e,t,n){var r=n.log;return Object(D["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=gl(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=_l.exec(i.user_id),c&&Object(j["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(j["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Nu(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(L["a"])(Ye),Object(wu["a"])(),Object(B["a"])((function(e){if(!e.length)throw new fn(Ht.TRNS_NO_VALID_USER,{address:t});return pl()(e,"last_active_ago")})))}var Tl=function(e,t,n){vl(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(L["a"])(wn(Zn.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ja["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(ss["a"])(a.pipe(lo("presences"))),Object(cs["a"])((function(e){var t=bl(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(P["a"])(i[r.meta.address]):El(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Zn.success({userId:n,available:wl.includes(t),ts:Date.now(),caps:zc(a)},r.meta)})),Object(Dc["a"])((function(e){return Object(P["a"])(Zn.failure(e,r.meta))})))})))})))},Sl=function(e,t,n){vl(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Pu["a"])(e,"event").pipe(Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(L["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(B["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{Ke(null===a||void 0===a?void 0:a.presence);var o=null===(t=_l.exec(a.userId))||void 0===t?void 0:t[1];Ke(o);var i=Object(j["getAddress"])(o);return Ke(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(L["a"])(Ye),Object(ss["a"])(e.pipe(Object(L["a"])(Zn.request.is),Object(no["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(Pc["a"])(new Set))),Object(L["a"])((function(e){var t=bl(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=bl(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=wl.includes(s);return Object(D["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(B["a"])((function(e){var t;Ke(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(j["verifyMessage"])(c,e.displayname);return Ke(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Zn.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:zc(e.avatar_url)},{address:n})})),Object(Dc["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),U["a"]})))}))).pipe(Object(ss["a"])(o),Object(L["a"])((function(e){var t=bl(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},xl=function(e){return e.pipe(Object(L["a"])(Ln.is),Object(B["a"])((function(e){return Zn.request(void 0,{address:e.meta.partner})})))},Al=function(e,t,n){vl(e),vl(t);var r=n.matrix$,a=n.latest$;return a.pipe(lo("caps"),Object(M["a"])(1),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return[e,t]})))})),Object($["a"])((function(e){var t=bl(e,2),n=t[0],r=t[1];return jl(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!Lc()(n)?Qc(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(fs["a"])())},Rl=n("59b7"),Cl=n("a2ef"),Nl=n("2769"),Pl=n.n(Nl);function Il(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Bl(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function Dl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ul(e,t){return $l(e)||Fl(e,t)||Bl(e,t)||Ml()}function Ml(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bl(e,t){if(e){if("string"===typeof e)return Ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ll(e,t):void 0}}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $l(e){if(Array.isArray(e))return e}var ql=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Hl(e,t,n,r,a){var o=a.log;return Object(D["a"])((function(){var n=e.getRoom(t);return n?Object(P["a"])(n):Object(Pu["a"])(e,"Room").pipe(Object(L["a"])((function(e){return e.roomId===t})),Object(os["a"])(1))})).pipe(Object(L["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(ss["a"])(r),Object($["a"])((function(r){var a=Ul(r,2),i=a[1].httpTimeout;return Object(D["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(us["a"])((function(e){return e.pipe(Object(_u["a"])(i))})),Object(eo["a"])(Object(Pu["a"])(e,"RoomMember.membership",(function(e,t){return Dl(e),t})).pipe(Object(L["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var Vl=function(e,t,n){Dl(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(L["a"])(wn([Dr,Ln,Or.request,Yn])),Object(B["a"])((function(e){var t;switch(e.type){case Dr.type:e.meta.direction===Rr.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===Rr.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Ln.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(L["a"])(Ye),Object(Ja["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(cs["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(L["a"])((function(e){var n=e.presences;return t in n})),Object(os["a"])(1),Object(L["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(B["a"])((function(e){var n=e.room_id;return Xn({roomId:n},{address:t})})),Object(Dc["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},Wl=function(e,t,n){Dl(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(L["a"])(wn(Zn.success)),Object(Ja["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(ss["a"])(r),Object(yt["a"])((function(e){var t=Ul(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(B["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(to["a"])(),Object(yt["a"])((function(e){return Object(ns["a"])(Object(P["a"])(e),e?Object(Pu["a"])(r,"RoomMember.membership",(function(e,t){return Dl(e),t})).pipe(Object(L["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(is["a"])(e)):U["a"])})),Object(yt["a"])((function(e){return e?Hl(r,e,n.payload.userId,a,{log:i}):U["a"]}))):U["a"]})))})),Object(fs["a"])())},Gl=function(e,t,n){Dl(e),Dl(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Pu["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(L["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(ss["a"])(o),Object($["a"])((function(e){var t=Ul(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(lo("presences"),Object(B["a"])((function(e){return Pl()(e,(function(e){return e.payload.userId===s}))})),Object(L["a"])(Ye),Object(os["a"])(1),Object(eo["a"])(Object(es["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(pt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(is["a"])(Xn({roomId:n.roomId},{address:a.meta.address})),Object(Dc["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},Kl=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(L["a"])(wn(Xn)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ss["a"])(t,o),Object($["a"])((function(e){var t,n,a=Ul(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(pt["a"])(l.filter((function(e,t){return Dl(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return Yn({roomId:e},i.meta)})))})))},Zl=function(e,t,n){Dl(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(yt["a"])((function(e){return Object(Pu["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(Rl["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(es["a"])(t)})))})),Object(ss["a"])(t,o),Object(L["a"])((function(e){var t,n=Ul(e,3),r=n[0],a=r.matrix,o=r.roomId,i=n[1].transport,c=n[2],s=a.getRoom(o);if(!s)return!1;var u=Hu(c);if(s.name&&u.some((function(e){return s.name.match("#".concat(e,":"))})))return!1;for(var l=0,d=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});l<d.length;l++){var f,p=d[l],b=Il(p);try{for(b.s();!(f=b.n()).done;){var y=f.value;if(y===s.roomId)return!1}}catch(m){b.e(m)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=Ul(e,1),n=t[0],a=n.matrix,o=n.roomId;return ql(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(fs["a"])())},Xl=function(e,t,n){Dl(e);var r=n.log,a=n.matrix$;return a.pipe(Object(yt["a"])((function(e){return Object(Pu["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(L["a"])((function(e){var t=e.membership;return"leave"===t})),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ul(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Ul(s[c],2),l=u[0],d=u[1],f=Il(d),e.prev=5,f.s();case 7:if((b=f.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Yn({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Yl=function(e,t,n){Dl(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(lo("transport","rooms"),Object(L["a"])(Ye),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Ul(r[n],2),o=a[0],i=a[1],c=Il(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Cl["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(ss["a"])(o),Object($["a"])((function(e){var t=Ul(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Wu(i,a).pipe(Object(Eu["a"])(c),Object(fs["a"])(),Object(Dc["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(P["a"])(Yn({roomId:a},{address:o}))})))})))},Ql=function(e,t){return e.pipe(Object(L["a"])(jr.is),Object(ss["a"])(t),Object(L["a"])((function(e){var t,n,r=Ul(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=Ul(e,1),n=t[0];return Xn({roomId:n.payload.roomId},n.meta)})))};function zl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ed(e,t,n){return t&&Jl(e.prototype,t),n&&Jl(e,n),e}var td=function(){function e(t){zl(this,e),this.values=new Map,this.max=t}return ed(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function nd(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=od(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function rd(e,t){return sd(e)||cd(e,t)||od(e,t)||ad()}function ad(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function od(e,t){if(e){if("string"===typeof e)return id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(e,t):void 0}}function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sd(e){if(Array.isArray(e))return e}function ud(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var ld=function(e,t,n){ud(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(L["a"])(wn(Or.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ja["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Su["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:_i(t.payload.message),c={body:a,msgtype:"m.text"};return Gu(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(is["a"])(Or.success(void 0,t.meta)),Object(Dc["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(P["a"])(Or.failure(e,t.meta))})))})))})))},dd=function(e,t,n){ud(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(L["a"])(wn(kr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ss["a"])(o),Object($["a"])((function(e){var t=rd(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Hu(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=Cu(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Wu(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:_i(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Dc["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(fs["a"])())},fd=function(e,t,n){ud(e),ud(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(yt["a"])((function(e){return Object(Pu["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(ss["a"])(o),Object(L["a"])((function(e){var t,n,r=rd(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Hu(s).some((function(e){return Vu("#".concat(e,":").concat(Cu(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=rd(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(L["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Pl()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(os["a"])(1),Object(eo["a"])(Object(es["a"])(c)),Object($["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Pl()(n,["payload.userId",a.getSender()]),s=nd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=Ku(l,c.meta.address,{log:r}),e.next=10,jr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},pd=function(e,t,n){ud(t);var r=n.log,a=n.signer,o=n.latest$,i=new td(32);return e.pipe(Object(L["a"])(Si([st(tr),st(nr),st(rr)])),Object(ss["a"])(o),Object(L["a"])((function(e){var t,n=rd(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[xe.NO_DELIVERY])})),Object(Su["a"])((function(e){var t=rd(e,1),n=t[0],o=n.payload.message;return Object(D["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(P["a"])(Or.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Cn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(pt["a"])(Ti(a,s,{log:r})).pipe(Object(za["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return Or.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},bd=n("6fb6"),yd=n("de5c"),md=n("8f41");function hd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function vd(e,t){return kd(e)||Od(e,t)||_d(e,t)||gd()}function gd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Od(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kd(e){if(Array.isArray(e))return e}function jd(e){return Td(e)||Ed(e)||_d(e)||wd()}function wd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _d(e,t){if(e){if("string"===typeof e)return Sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sd(e,t):void 0}}function Ed(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Td(e){if(Array.isArray(e))return Sd(e)}function Sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ad=new WeakMap;function Rd(e){return xd(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Ad.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Ad.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Cd(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function Nd(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Pu["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(Rl["a"])((function(){return n})),Object(Ic["a"])(Ye),Object(bd["a"])(10),Object(L["a"])((function(e){return e.length>0})),Object(za["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return Gu(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Pu["a"])(t,"event").pipe(Object(L["a"])(Cd("m.call.candidates",i,o)),Object(za["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(pt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(D["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Dc["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(fs["a"])())}function Pd(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,f=a.config$;return Object(pt["a"])(Rd(e)).pipe(Object($["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(jd(r),jd(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(Nd(p,e,t,n,a),Object(D["a"])((function(){return p.createOffer()})).pipe(Object($["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Pu["a"])(e,"event").pipe(Object(L["a"])(Cd("m.call.answer",s,c,o))),Gu(u,e,"m.call.invite",n,{log:l,latest$:d,config$:f}).pipe(Object(za["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(fs["a"])()))})),Object(os["a"])(1),Object(za["a"])((function(){return l.info("RTC: got answer",c)})),Object(B["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(fs["a"])()),Object(P["a"])(b))})))}function Id(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(Pu["a"])(e,"event").pipe(Object(L["a"])(Cd("m.call.invite",c,i,o)),Object(za["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(pt["a"])(Rd(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(ss["a"])(d),Object($["a"])((function(r){var c=vd(r,2),f=vd(c[0],2),p=f[0],b=f[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(jd(b),jd(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(Nd(m,e,t,n,a),Object(D["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Gu(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(za["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(fs["a"])()),Object(Pu["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(os["a"])(1))}function Dd(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(Pu["a"])(t,"close").pipe(Object(za["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(fs["a"])()),Object(Pu["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(ts["a"])(e.error)}))),Object(Pu["a"])(t,"open").pipe(Object(os["a"])(1),Object(Eu["a"])(c/3),Object(za["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(is["a"])(Qn(t,{address:i}))),Object(Pu["a"])(t,"message").pipe(Object(za["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(L["a"])((function(e){return"string"===typeof e})),Object(B["a"])((function(e){return jr({text:e,message:Ku(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(xu["a"])((function(){return t.close()})))})),Object(eo["a"])(e),Object(Dc["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),U["a"]})),Object(yd["a"])(Qn(void 0,{address:i})))}}function Ud(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(to["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(ss["a"])(i,c,o),Object(L["a"])((function(e){var t,n=vd(e,4),r=n[0],a=n[3].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[xe.WEBRTC])&&!!a[xe.WEBRTC]})),Object(yt["a"])((function(t){var n=vd(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(P["a"])(Qn(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=d.startsWith(a.toLowerCase());return Object(D["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new N["a"],p=new N["a"];return t=f?Pd(s,a,n,u,l):Id(s,a,n,u,l),p.pipe(Object($["a"])((function(){return Gu(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(eo["a"])(Object(es["a"])(u.httpTimeout/10)))})),Object(eo["a"])(e.pipe(Object(L["a"])(na.is)))).subscribe(),Object(I["a"])(t,Object(Pu["a"])(s,"event").pipe(Object(L["a"])(Cd("m.call.hangup",n.peerId,d)),Object(md["a"])(Object(ts["a"])(new Error("RTC: peer hung up"))))).pipe(Dd(p,n,u,l))})).pipe(Object(us["a"])((function(e){return e.pipe(Object(ss["a"])(o,c),Object($["a"])((function(e){var t,n,r=vd(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(es["a"])(o/10):Object(P["a"])(null):U["a"]})))})))})))}var Md=function(e,t,n){return hd(t),e.pipe(Object(L["a"])(Zn.success.is),Object(Ja["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return Ud(e,t,n)})))};function Bd(e,t){return Hd(e)||qd(e,t)||Fd(e,t)||Ld()}function Ld(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fd(e,t){if(e){if("string"===typeof e)return $d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$d(e,t):void 0}}function $d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hd(e){if(Array.isArray(e))return e}var Vd=function(e,t,n){var r=n.address;return e.pipe(Object(L["a"])(wn([qn.request,qn.success])),Object(ss["a"])(t),Object($["a"])((function(e){var t=Bd(e,2),n=t[0],a=t[1];return Object(pt["a"])(Object.entries(a.sent)).pipe(Object(L["a"])((function(e){var t=Bd(e,2),a=Bd(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(B["a"])((function(e){var t,n,r,a,o=Bd(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Rr.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?Ir.success({balanceProof:wi(c.unlock[1])},s):Ir.success({},s):Ir.failure(new fn(Ht.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(L["a"])(Ye))})))};function Wd(e,t,n){return Object(I["a"])(e.pipe(Object(L["a"])(n),Object(os["a"])(1),Object(fs["a"])()),Object(P["a"])(t))}function Gd(e,t){return Qd(e)||Yd(e,t)||Zd(e,t)||Kd()}function Kd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zd(e,t){if(e){if("string"===typeof e)return Xd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xd(e,t):void 0}}function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qd(e){if(Array.isArray(e))return e}function zd(e,t,n,r){var a=n.confirmationBlocks;return Object(pt["a"])(Object.entries(t.sent)).pipe(Object(L["a"])((function(e){var t,n,o=Gd(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=Gd(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Rr.SENT};return Object(I["a"])(Wd(e,Hr.request(void 0,o),Sn(Hr,o)),Object(P["a"])(Ir.failure(new fn(Ht.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var Jd=function(e,t,n){var r=n.config$;return e.pipe(Object(L["a"])(wn(Un)),Object(ss["a"])(t,r),Object(cs["a"])((function(t){var n=Gd(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return zd(e,a,o,r)})))},ef=n("2593"),tf=n.n(ef);function nf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function rf(e,t){return cf(e)||of(e,t)||lf(e,t)||af()}function af(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function of(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cf(e){if(Array.isArray(e))return e}function sf(e){return ff(e)||df(e)||lf(e)||uf()}function uf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lf(e,t){if(e){if("string"===typeof e)return pf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pf(e,t):void 0}}function df(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ff(e){if(Array.isArray(e))return pf(e)}function pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bf(e){return e.nonce.add(1)}function yf(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return Ui(n)}function mf(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),U["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,f=t.payload.paths[0].path[0],b=e.channels[go({tokenNetwork:t.payload.tokenNetwork,partner:f})];Ke((null===b||void 0===b?void 0:b.state)===Ia.open,"not open"),Ke(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(d),expiration:Object(j["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},m=Ui([].concat(sf(b.own.locks),[y]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",b.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var h={type:Cn.LOCKED_TRANSFER,message_identifier:Fi(),chain_id:Object(j["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(b.id),nonce:bf(b.own.balanceProof),transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:m,payment_identifier:t.payload.paymentId,token:b.token,recipient:f,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(pt["a"])(Ti(u,h,{log:i})).pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Dr({message:n,fee:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Mr({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function hf(e,t,n){return Object(ft["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=rf(e,2),a=r[0],o=r[1];return mf(a,t,o,n)})),Object(Dc["a"])((function(e){return Object(P["a"])(Ir.failure(e,t.meta))})))}function vf(e,t,n,r){var a,o,i=r.log,c=r.signer,s=n.meta.secrethash;Ke(s in t.sent,"unknown transfer");var u,l=t.sent[s].transfer[1],d=t.sent[s].partner,f=t.channels[go({tokenNetwork:l.token_network_address,partner:d})];if(Ke((null===f||void 0===f?void 0:f.state)===Ia.open,"channel not open"),t.sent[s].unlock)u=Object(P["a"])(t.sent[s].unlock[1]);else{Ke((null===(o=null===(a=t.sent[s].secret)||void 0===a?void 0:a[1])||void 0===o?void 0:o.registerBlock)||l.lock.expiration.gt(t.blockNumber),"lock expired");var b=yf(f.own,s),y={type:Cn.UNLOCK,message_identifier:Fi(),chain_id:l.chain_id,token_network_address:l.token_network_address,channel_identifier:l.channel_identifier,nonce:bf(f.own.balanceProof),transferred_amount:f.own.balanceProof.transferredAmount.add(l.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(l.lock.amount),locksroot:b,payment_identifier:l.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};u=Object(pt["a"])(Ti(c,y,{log:i}))}return u.pipe(Object(ss["a"])(e),Object($["a"])(p.a.mark((function e(t){var r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=rf(t,2),a=r[0],o=r[1],Ke((null===(c=null===(i=o.sent[s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)||l.lock.expiration.gt(o.blockNumber),"lock expired"),Ke(!o.sent[s].channelClosed,"channel closed!"),e.next=5,$r.success({message:a},n.meta);case 5:case"end":return e.stop()}}),e)}))))}function gf(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return vf(e,n,t,{log:a,signer:r})})),Object(Dc["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(P["a"])($r.failure(e,t.meta))})))}function Of(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;Ke(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[go({tokenNetwork:c.token_network_address,partner:s})];if(Ke((null===u||void 0===u?void 0:u.state)===Ia.open,"channel not open"),e.sent[o].lockExpired)i=Object(P["a"])(e.sent[o].lockExpired[1]);else{Ke(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),Ke(!e.sent[o].unlock,"transfer already unlocked");var l=yf(u.own,o),d={type:Cn.LOCK_EXPIRED,message_identifier:Fi(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:bf(u.own.balanceProof),transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(pt["a"])(Ti(r,d,{log:a}))}return i.pipe(Object(B["a"])((function(e){return Hr.success({message:e},t.meta)})))}function kf(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Of(e,t,{signer:a,log:r})})),Object(Dc["a"])((function(e){return Object(P["a"])(Hr.failure(e,t.meta))})))}function jf(e,t,n,r){var a,o=n.log,i=n.signer,c=t.payload.message,s=e.channels[go(t.meta)];Ke((null===s||void 0===s?void 0:s.state)===Ia.open&&c.channel_identifier.eq(s.id),"channel not open or wrong id"),Ke(c.expiration.gt(e.blockNumber),"WithdrawRequest expired"),Ke(c.total_withdraw.lte(s.partner.deposit.add(s.own.balanceProof.transferredAmount)),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount");var u=c.message_identifier.toString();function l(e,t){if(!t)return!1;var n=tf()(t,["token_network_address","participant","chain_id","channel_identifier","total_withdraw","expiration"]);return Wt()(e,n,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var d=r.get(u);if(l(c,d))a=Object(P["a"])(d);else{var f={type:Cn.WITHDRAW_CONFIRMATION,message_identifier:c.message_identifier,chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,participant:c.participant,total_withdraw:c.total_withdraw,nonce:bf(s.own.balanceProof),expiration:c.expiration};a=Object(pt["a"])(Ti(i,f,{log:o})).pipe(Object(za["a"])((function(e){return r.put(u,e)})))}return a.pipe(Object(B["a"])((function(e){return Zr.success({message:e},t.meta)})))}function wf(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return jf(e,t,{log:o,signer:a},r)})),Object(Dc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}function _f(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=n.latest$,u=t.payload.message.lock.secrethash,l={secrethash:u,direction:Rr.RECEIVED};return Object(ft["a"])([e,c,s]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=rf(e,3),c=n[0],s=n[1].revealTimeout,d=n[2].caps,f=t.payload.message;if(u in c.received){a.warn("transfer already present",t.meta);var b=f.message_identifier;return c.received[u].partner===t.meta.address&&c.received[u].transfer[1].message_identifier.eq(b)?Object(P["a"])(Ur({message:c.received[u].transferProcessed[1]},l)):U["a"]}var y=f.token_network_address,m=t.meta.address,h=c.channels[go({tokenNetwork:y,partner:m})];Ke((null===h||void 0===h?void 0:h.state)===Ia.open,"channel not open"),Ke(f.chain_id.eq(o.chainId),"chainId mismatch"),Ke(f.channel_identifier.eq(h.id),"channelId mismatch"),Ke(f.nonce.eq(bf(h.partner.balanceProof)),"nonce mismatch"),Ke(f.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),Ke(f.locked_amount.eq(h.partner.balanceProof.lockedAmount.add(f.lock.amount)),"lockedAmount mismatch");var v=ko(h).partnerCapacity;Ke(f.lock.amount.lte(v),"balanceProof total amount bigger than capacity"),Ke(f.recipient===r,"Received transfer isn't for us"),Ke(f.lock.expiration.sub(c.blockNumber).gt(s),"lock expires too soon");var g=Ui([].concat(sf(h.partner.locks),[f.lock]));Ke(f.locksroot===g,"locksroot mismatch"),a.info("Receiving transfer of value",f.lock.amount.toString(),"of token",h.token,", from",f.initiator,", through partner",m);var O=Object(P["a"])(void 0);d[xe.NO_RECEIVE]||f.target!==r||(O=Object(D["a"])((function(){var e={type:Cn.SECRET_REQUEST,payment_identifier:f.payment_identifier,secrethash:u,amount:f.lock.amount,expiration:f.lock.expiration,message_identifier:Fi()};return Ti(i,e,{log:a})})));var k=Object(D["a"])((function(){var e={type:Cn.PROCESSED,message_identifier:f.message_identifier};return Ti(i,e,{log:a})}));return Object(ft["a"])([k,O]).pipe(Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=rf(t,2),r=n[0],a=n[1],e.next=3,Dr({message:f,fee:w["Zero"]},l);case 3:return e.next=5,Ur({message:r},l);case 5:if(!a){e.next=10;break}return e.next=8,Zn.request(void 0,{address:f.initiator});case 8:return e.next=10,Lr({message:a},l);case 10:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return Object(P["a"])(Ir.failure(e,l))})))}function Ef(e,t,n){var r=n.log,a=n.network,o=n.signer,i=Mi(t.payload.message.secret),c={secrethash:i,direction:Rr.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return U["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(Ke(u===n.partner,"wrong partner"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(P["a"])(qr({message:n.unlockProcessed[1]},c)):U["a"];var l=n.transfer[1],d=s.token_network_address;Ke(d===l.token_network_address,"wrong tokenNetwork");var f=e.channels[go({tokenNetwork:d,partner:u})];Ke((null===f||void 0===f?void 0:f.state)===Ia.open,"channel not open"),Ke(s.chain_id.eq(a.chainId),"chainId mismatch"),Ke(s.channel_identifier.eq(f.id),"channelId mismatch"),Ke(s.nonce.eq(bf(f.partner.balanceProof)),"nonce mismatch");var b=l.lock,y=b.amount;Ke(s.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(y)),"transferredAmount mismatch"),Ke(s.locked_amount.eq(f.partner.balanceProof.lockedAmount.sub(y)),"lockedAmount mismatch");var m=yf(f.partner,i);Ke(s.locksroot===m,"locksroot mismatch");var h={type:Cn.PROCESSED,message_identifier:s.message_identifier};return Object(pt["a"])(Ti(o,h,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$r.success({message:s},c);case 2:return e.next=4,qr({message:t},c);case 4:return e.next=6,Ir.success({balanceProof:wi(s)},c);case 6:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(P["a"])($r.failure(e,c))})))}function Tf(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:Rr.RECEIVED};return Object(ft["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=rf(e,2),l=u[0],d=u[1].confirmationBlocks;if(!(c in l.received))return U["a"];var f=l.received[c],b=t.payload.message,y=t.meta.address;if(Ke(y===f.partner,"wrong partner"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(P["a"])(Vr({message:f.lockExpiredProcessed[1]},s)):U["a"];var m=f.transfer[1];Ke(m.lock.expiration.add(d).lte(l.blockNumber),"expiration block not confirmed yet"),Ke(!f.unlock,"transfer unlocked"),Ke(!(null===(i=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered");var h=b.token_network_address;Ke(h===m.token_network_address,"wrong tokenNetwork");var v=l.channels[go({tokenNetwork:h,partner:y})];Ke((null===v||void 0===v?void 0:v.state)===Ia.open,"channel not open"),Ke(b.chain_id.eq(a.chainId),"chainId mismatch"),Ke(b.channel_identifier.eq(v.id),"channelId mismatch"),Ke(b.nonce.eq(bf(v.partner.balanceProof)),"nonce mismatch");var g=m.lock,O=g.amount;Ke(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),Ke(b.locked_amount.eq(v.partner.balanceProof.lockedAmount.sub(O)),"lockedAmount mismatch");var k=v.partner.locks.filter((function(e){return e.secrethash!==c})),j=Ui(k);Ke(b.locksroot===j,"locksroot mismatch");var w={type:Cn.PROCESSED,message_identifier:b.message_identifier};return Object(pt["a"])(Ti(o,w,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Hr.success({message:b},s);case 2:return e.next=4,Vr({message:t},s);case 4:return e.next=6,Ir.failure(new fn(Ht.XFER_EXPIRED,{block:m.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Dc["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(P["a"])(Hr.failure(e,s))})))}var Sf=function(e,t,n){nf(t);var r=new td(32),a=n.latest$.pipe(lo("state"));return Object(I["a"])(e.pipe(Object(L["a"])(wn([Ir.request,$r.request,Hr.request,Zr.request]))),e.pipe(Object(L["a"])(Si([st(sr),st(lr),st(dr)])))).pipe(Object(Su["a"])((function(e){return Ir.request.is(e)?hf(a,e,n):$r.request.is(e)?gf(a,e,n):Hr.request.is(e)?kf(a,e,n):Zr.request.is(e)?wf(a,e,n,r):e.payload.message.type===Cn.LOCKED_TRANSFER?_f(a,e,n):e.payload.message.type===Cn.UNLOCK?Ef(a,e,n):Tf(a,e,n)})))};function xf(e,t){return Pf(e)||Nf(e,t)||Rf(e,t)||Af()}function Af(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rf(e,t){if(e){if("string"===typeof e)return Cf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cf(e,t):void 0}}function Cf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pf(e){if(Array.isArray(e))return e}function If(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Df=function(e,t){return If(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=xf(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Rr.SENT},e.next=9,Zn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,Dr({message:s.transfer[1],fee:s.fee},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,$r.success({message:s.unlock[1]},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Hr.success({message:s.lockExpired[1]},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Uf=function(e,t,n){If(e);var r=n.latest$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(pt["a"])(Object.entries(e.received))})),Object(L["a"])((function(e){var t,n,r=xf(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(ss["a"])(r),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=xf(t,2),r=xf(n[0],2),a=r[0],o=r[1],i=n[1].caps,c={secrethash:a,direction:Rr.RECEIVED},e.next=4,Dr({message:o.transfer[1],fee:o.fee},c);case 4:if(!o.secret||o.secretReveal){e.next=7;break}return e.next=7,Mr({secret:o.secret[1].value},c);case 7:if(!o.secretReveal){e.next=10;break}return e.next=10,Fr({message:o.secretReveal[1]},c);case 10:if(i[xe.NO_RECEIVE]||o.secret||!o.secretRequest){e.next=15;break}return e.next=13,Zn.request(void 0,{address:o.transfer[1].initiator});case 13:return e.next=15,Lr({message:o.secretRequest[1]},c);case 15:case"end":return e.stop()}}),e)}))))};function Mf(e,t){return qf(e)||$f(e,t)||Lf(e,t)||Bf()}function Bf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lf(e,t){if(e){if("string"===typeof e)return Ff(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ff(e,t):void 0}}function Ff(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qf(e){if(Array.isArray(e))return e}var Hf=function(e,t,n){var r=n.address,a=n.latest$;return e.pipe(Object(L["a"])(Dr.is),Object(L["a"])((function(e){return e.meta.direction===Rr.RECEIVED&&e.payload.message.target!==r})),Object(ss["a"])(t,a),Object(L["a"])((function(e){var t=Mf(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!a[xe.NO_MEDIATE]&&!(n.meta.secrethash in r)})),Object(B["a"])((function(e){var t=Mf(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return Ir.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:w["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Rr.SENT})})))};function Vf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Wf(e,t){return Yf(e)||Xf(e,t)||Kf(e,t)||Gf()}function Gf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kf(e,t){if(e){if("string"===typeof e)return Zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zf(e,t):void 0}}function Zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yf(e){if(Array.isArray(e))return e}var Qf=function(e,t){return e.pipe(Object(L["a"])(Si(st(tr))),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Wf(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=Wf(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Ur({message:o},{secrethash:i,direction:Rr.SENT});case 16:case"end":return e.stop()}}),e)}))))},zf=function(e,t){return e.pipe(Object(L["a"])(wn([Ur,qr,Vr])),Object(L["a"])((function(e){return e.meta.direction===Rr.RECEIVED})),Object(ss["a"])(t),Object(B["a"])((function(e){var t=Wf(e,2),n=t[0],r=t[1].received;return Or.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},Jf=function(e,t){return e.pipe(Object(L["a"])(Si(st(tr))),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Wf(t,2),r=n[0],a=n[1],o=r.payload.message,i=Xt()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Rr.SENT},e.next=8,Ir.success({balanceProof:wi(a.sent[i].unlock[1])},c);case 8:return e.next=10,qr({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},ep=function(e,t){return e.pipe(Object(L["a"])(Si(st(tr))),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Wf(t,2),r=n[0],a=n[1],o=r.payload.message,i=Xt()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Vr({message:o},{secrethash:i,direction:Rr.SENT});case 7:case"end":return e.stop()}}),e)}))))},tp=function(e,t,n){Vf(t);var r=n.log,a=n.signer,o=new td(32);return e.pipe(Object(L["a"])(Si([st(ur),st(yr)])),Object(Su["a"])((function(e){var t=e.payload.message;return Object(D["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(P["a"])(Or.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Cn.PROCESSED,message_identifier:n};return Object(pt["a"])(Ti(a,s,{log:r})).pipe(Object(za["a"])((function(e){return o.put(i,e)})),Object(B["a"])((function(t){return Or.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},np=n("b6ad"),rp=n.n(np);function ap(e,t){return up(e)||sp(e,t)||ip(e,t)||op()}function op(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ip(e,t){if(e){if("string"===typeof e)return cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cp(e,t):void 0}}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function up(e){if(Array.isArray(e))return e}function lp(e,t){return rp()(e,t,(function(e,t){return Qe.is(e)?e.eq(t):Qe.is(t)?t.eq(e):void 0}))}var dp=function(e,t){return e.pipe(Object(L["a"])(Si(st(ur))),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=ap(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&lp(o.lock,s.lock)){e.next=8;break}return e.abrupt("return");case 8:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=10;break}return e.abrupt("return");case 10:return u={secrethash:i,direction:Rr.SENT},e.next=13,Wr({message:o},u);case 13:return e.next=15,Ir.failure(new fn(Ht.XFER_REFUNDED),u);case 15:case"end":return e.stop()}}),e)}))))};function fp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function pp(e,t){return vp(e)||hp(e,t)||yp(e,t)||bp()}function bp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yp(e,t){if(e){if("string"===typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mp(e,t):void 0}}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vp(e){if(Array.isArray(e))return e}function gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(us["a"])((function(e){return e.pipe(Object(_u["a"])(t))})),Object(eo["a"])(e))}}function Op(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Wd(t,e,Sn(Or,e.meta)).pipe(gp(n,r))}var kp=function(e,t,n,r){return r.meta.direction!==Rr.SENT?U["a"]:n.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=Or.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(lo("sent",o),Object(L["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Op(c,e,s,a)})))},jp=function(e,t,n,r){return r.meta.direction!==Rr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(ss["a"])(n),Object(yt["a"])((function(n){var a=pp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=Or.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(lo("sent",c),Object(L["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Op(l,e,d,i)})))},wp=function(e,t,n,r){return r.meta.direction!==Rr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(ss["a"])(n),Object(yt["a"])((function(n){var a=pp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Or.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(lo("sent",c),Object(L["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Op(u,e,l,i)})))},_p=function(e,t,n,r){return r.meta.direction!==Rr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(ss["a"])(n),Object(yt["a"])((function(n){var a=pp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Or.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(lo("received",c),Object(L["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Op(u,e,l,i)})))},Ep=function(e,t,n,r){return r.meta.direction!==Rr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(ss["a"])(n),Object(yt["a"])((function(n){var a=pp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Or.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(lo("received",c),Object(L["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Op(u,e,l,i)})))},Tp=function(e,t,n){fp(t);var r=n.latest$,a=n.config$,o=r.pipe(lo("state"));return e.pipe(Object(L["a"])(wn([Dr,$r.success,Hr.success,Lr,Fr])),Object($["a"])((function(t){return Dr.is(t)?kp(e,o,a,t):$r.success.is(t)?jp(e,o,a,t):Hr.success.is(t)?wp(e,o,a,t):Lr.is(t)?_p(e,o,a,t):Ep(e,o,a,t)})))};function Sp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function xp(e,t){return Pp(e)||Np(e,t)||Rp(e,t)||Ap()}function Ap(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rp(e,t){if(e){if("string"===typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Np(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pp(e){if(Array.isArray(e))return e}var Ip=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(L["a"])(Si(st(nr))),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Lr({message:c},{secrethash:c.secrethash,direction:Rr.SENT});case 10:case"end":return e.stop()}}),e)}))))},Dp=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),U["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,f=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),U["a"];if(i.amount.lt(f))return o.error("SecretRequest for amount too small!",i,u),Object(P["a"])(Ir.failure(new fn(Ht.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(f)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(P["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Cn.SECRET_REVEAL,message_identifier:Fi(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(pt["a"])(Ti(a,b,{log:o}))}return s.pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Fr({message:n},t.meta);case 2:return e.next=4,Or.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Up=function(e,t,n){Sp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(L["a"])(wn(Lr)),Object(L["a"])((function(e){return e.meta.direction===Rr.SENT})),Object(Su["a"])((function(e){return o.pipe(lo("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return Dp(t,e,{log:r,signer:a})})))})))},Mp=function(e,t){return e.pipe(Object(L["a"])(Si(rr)),Object(ss["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=n[0],a=n[1],o=r.payload.message,i=Mi(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Rr.SENT},e.next=7,Mr({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,$r.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Mr({secret:o.secret},{secrethash:i,direction:Rr.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},Bp=function(e,t,n){Sp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(L["a"])(wn([Mr,Br.success])),Object(L["a"])((function(e){return e.meta.direction===Rr.RECEIVED})),Object(Su["a"])((function(e){return o.pipe(lo("state"),Object(F["a"])(),Object(L["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Cn.SECRET_REVEAL,message_identifier:Fi(),secret:e.payload.secret};return Ti(a,t,{log:r})})),Object(B["a"])((function(t){return Fr({message:t},e.meta)})),Object(Dc["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},Lp=function(e,t,n){Sp(e);var r=n.secretRegistryContract;return Nt(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(ss["a"])(t),Object(L["a"])((function(e){var t=xp(e,2),n=xp(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=xp(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Br.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Rr.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Br.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Rr.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},Fp=function(e){return e.pipe(Object(L["a"])(Br.success.is),Object(L["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return Ir.success({},e.meta)})))},$p=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(lo(Rr.RECEIVED),Object($["a"])((function(e){return Object(pt["a"])(Object.keys(e))})),Object(Cl["a"])(),Object($["a"])((function(t){return e.pipe(Object(L["a"])(Un.is),Object(ss["a"])(a.pipe(Object(q["a"])("state",Rr.RECEIVED,t)),r,a),Object(L["a"])((function(e){var t,n,r=xp(e,4),a=r[0],o=r[1],i=r[2].revealTimeout,c=r[3].caps;return!c[xe.NO_RECEIVE]&&!!o.secret&&o.transfer[1].lock.expiration.sub(i).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(cs["a"])((function(n){var r=xp(n,2),a=r[1],o={secrethash:t,direction:Rr.RECEIVED};return Wd(e,Br.request({secret:a.secret[1].value},o),xn(Br,o))})),Object(eo["a"])(a.pipe(lo("state"),Object(L["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},qp=function(e,t,n){Sp(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(L["a"])(Br.request.is),Object(ss["a"])(s),Object($["a"])((function(e){var t,n=xp(e,2),s=n[0],u=n[1].subkey,l=qs({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,f=Hs(c,d);return Object(pt["a"])(f.functions.registerSecret(s.payload.secret)).pipe(jo("registerSecret",Ht.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(fs["a"])(),Object(Dc["a"])((function(e){return Object(P["a"])(Br.failure(e,s.meta))})))})))},Hp=function(e){return e.pipe(Object(L["a"])(Si(st(pr))),Object(L["a"])((function(e){return e.payload.message.participant===e.meta.address})),Object(B["a"])((function(e){var t=e.payload.message;return Zr.request({message:t},{tokenNetwork:t.token_network_address,partner:t.participant,totalWithdraw:t.total_withdraw,expiration:t.expiration.toNumber()})})))},Vp=function(e){return e.pipe(Object(L["a"])(wn(Zr.success)),Object(B["a"])((function(e){return Or.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},Wp=n("1a2de");function Gp(e,t){return Qp(e)||Yp(e,t)||Zp(e,t)||Kp()}function Kp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zp(e,t){if(e){if("string"===typeof e)return Xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xp(e,t):void 0}}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qp(e){if(Array.isArray(e))return e}var zp=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Jp(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[xe.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[go({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==Ia.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(Ia.open,'"');var s=ko(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var eb=R()((function(e){return zp(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function tb(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Re["t"]({message:Re["q"],network_info:Re["t"]({chain_id:Re["j"](a.chainId),token_network_registry_address:Re["j"](o.TokenNetworkRegistry.address)}),operator:Re["q"],payment_address:ot,price_info:et(32),version:Re["q"]}),s=ot.is(e)?Object(pt["a"])(r.functions.urls(e)):Object(P["a"])(e);return s.pipe(Object(ss["a"])(i),Object($["a"])((function(e){var t=Gp(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new fn(Ht.PFS_EMPTY_URL);if(!Gs(a))throw new fn(Ht.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(Au["a"])(a+"/api/v1/info").pipe(Object(Eu["a"])(o),Object($["a"])((function(e){return zp(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Xe,t.t1=c,t.t2=Ua,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,eb(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(B["a"])((function(e){var t=Gp(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function nb(e,t){var n=t.log;return Object(pt["a"])(e).pipe(Object($["a"])((function(e){return tb(e,t).pipe(Object(Dc["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(wu["a"])(),Object(B["a"])((function(e){if(!e.length)throw new fn(Ht.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function rb(e){return ib(e)||ob(e)||db(e)||ab()}function ab(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ob(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ib(e){if(Array.isArray(e))return fb(e)}function cb(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=db(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function sb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ub(e,t){return bb(e)||pb(e,t)||db(e,t)||lb()}function lb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function db(e,t){if(e){if("string"===typeof e)return fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fb(e,t):void 0}}function fb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bb(e){if(Array.isArray(e))return e}var yb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},mb=R()((function(e){return yb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),hb=Re["n"](Re["t"]({error_code:Re["l"],errors:Re["q"]}));function vb(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}var gb=function(e,t,n,r,a){return{sender:e,receiver:t,chain_id:Object(j["bigNumberify"])(n),amount:w["Zero"],one_to_n_address:r,expiration_block:Object(j["bigNumberify"])(a).add(2*Math.pow(10,5))}},Ob=function(e,t){return Object.assign(Object.assign({},e),{amount:e.amount.add(t)})},kb=function(e){return Object(j["concat"])([Pa(e.one_to_n_address,20),Pa(e.chain_id,32),Pa(pi.IOU,32),Pa(e.sender,20),Pa(e.receiver,20),Pa(e.amount,32),Pa(e.expiration_block,32)])},jb=function(e,t){return Object(pt["a"])(t.signMessage(kb(e))).pipe(Object(B["a"])((function(t){return Object.assign(Object.assign({},e),{signature:t})})))},wb=function(e,t,n){return Object(D["a"])((function(){var r=vb(),a=Object(j["concat"])([e,t,Object(j["toUtf8Bytes"])(r)]);return Object(pt["a"])(n.signMessage(a)).pipe(Object(B["a"])((function(n){return{sender:e,receiver:t,timestamp:r,signature:n}})))}))},_b=function(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.userDepositContract,c=n.latest$;return c.pipe(Object(F["a"])(),Object(yt["a"])((function(n){var s,u=n.state,l=n.config.httpTimeout,d=null===(s=u.iou[t])||void 0===s?void 0:s[e.address];return(d?Object(P["a"])(d):wb(r,e.address,a).pipe(Object($["a"])((function(n){return Object(Au["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(n).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Eu["a"])(l))})),Object(ss["a"])(c.pipe(Object(q["a"])("state"))),Object($["a"])((function(t){var n=ub(t,2),a=n[0],c=n[1].blockNumber;return yb(void 0,void 0,void 0,p.a.mark((function t(){var n,s,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==a.status){t.next=10;break}return t.t0=gb,t.t1=r,t.t2=e.address,t.t3=o.chainId,t.next=7,mb(i);case 7:return t.t4=t.sent,t.t5=c,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5));case 10:return t.next=12,a.text();case 12:if(n=t.sent,a.ok){t.next=15;break}throw new fn(Ht.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:a.status,responseText:n});case 15:if(s=Xe(Ar,Ua(n)),u=s.last_iou,l=Object(j["verifyMessage"])(kb(u),u.signature),l===r){t.next=19;break}throw new fn(Ht.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:r});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))).pipe(Object(B["a"])((function(t){return Ob(t,e.price)})),Object($["a"])((function(e){return jb(e,a)})))})))},Eb=function(e,t,n){sb(t);var r=n.log,a=n.latest$;return e.pipe(Object(L["a"])(wn(Qr.request)),Object(Su["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,f=e.meta,b=f.tokenNetwork,y=f.target;if(!Object.values(i.tokens).includes(b))throw new fn(Ht.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new fn(Ht.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[xe.NO_RECEIVE])throw new fn(Ht.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(P["a"])({paths:e.payload.paths,iou:void 0});if(!0===Jp(i,c,b,y,y,e.meta.value))return Object(P["a"])({paths:[{path:[n.address,y],fee:w["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new fn(Ht.PFS_DISABLED);var m=e.payload.pfs?Object(P["a"])(e.payload.pfs):u?tb(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return nb(e,n)})),Object(za["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(P["a"])({pfs:e,iou:void 0}):_b(e,b,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(Au["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Ma({from:n.address,to:y,value:et(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:et(32).encode(a.amount),expiration_block:et(32).encode(a.expiration_block),chain_id:et(32).encode(a.chain_id)}):void 0})}).pipe(Object(Eu["a"])(l),Object(B["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return yb(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(B["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=Ua(n);return t.ok?{paths:Xe(Er,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:Xe(hb,a),iou:r}})))})),Object(ss["a"])(a),Object($["a"])((function(t){var a=ub(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(pt["a"])(p.a.mark((function t(){var a,i,u,l,d,f,b,y,m,h,v,g,O;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,Jr({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,ea(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new fn(Ht.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new fn(Ht.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],f=new Set,b=cb(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,h=m.path,v=m.fee,h[0]===n.address&&(h=h.slice(1)),g=h[0],!f.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!v.gt(d[0].fee)||"path: already selected a smaller fee":Jp(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",h),f.add(g),t.abrupt("continue",30);case 29:d.push({path:h,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new fn(Ht.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,Qr.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(Dc["a"])((function(t){return Object(P["a"])(Qr.failure(t,e.meta))})))})))},Tb=function(e,t,n){sb(e),sb(t);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.latest$,s=n.config$;return c.pipe(Object(q["a"])("state"),wo,Object(ss["a"])(s),Object($["a"])((function(e){var t=ub(e,2),n=t[0],c=t[1].httpTimeout;return n.pipe(Object(ss["a"])(s),Object(L["a"])((function(e){var t=ub(e,2),n=t[1].pfsRoom;return!!n})),Object(Wp["a"])(c/2),Object(Su["a"])((function(e){var t=ub(e,2),n=t[0],c=t[1],s=c.revealTimeout,u=c.pfsRoom,l=n.tokenNetwork,d=n.partner.address;if(n.state!==Ia.open)return U["a"];var f=ko(n),p=f.ownCapacity,b=f.partnerCapacity,y={type:Cn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:l,channel_identifier:Object(j["bigNumberify"])(n.id)},updating_participant:a,other_participant:d,updating_nonce:n.own.balanceProof.nonce,other_nonce:n.partner.balanceProof.nonce,updating_capacity:p,other_capacity:b,reveal_timeout:Object(j["bigNumberify"])(s)};return Object(D["a"])((function(){return Ti(i,y,{log:r})})).pipe(Object(B["a"])((function(e){return kr({message:e},{roomName:u})})),Object(Dc["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},Sb=function(e,t,n){sb(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$,s=n.latest$;return t.pipe(wo,Object($["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(ss["a"])(c,s),Object(L["a"])((function(e){var t=ub(e,3),n=t[1].pfsRoom,r=t[2].caps;return!!n&&!r[xe.NO_MEDIATE]})),Object($["a"])((function(e){var t=ub(e,2),n=t[0],c=t[1].pfsRoom;if(n.state!==Ia.open)return U["a"];var s={type:Cn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(j["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(j["bigNumberify"])(n.id)},updating_participant:a,timestamp:vb(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:w["Zero"],flat:w["Zero"]}};return Object(pt["a"])(Ti(i,s,{log:r})).pipe(Object(B["a"])((function(e){return kr({message:e},{roomName:c})})),Object(Dc["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},xb=function(e,t,n){sb(e),sb(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(lo("pfs"),Object(yt["a"])((function(e){return""!==e?U["a"]:Nt(r,[r.filters.RegisteredService(null,null,null,null)],Object(P["a"])(a.ServiceRegistry.block_number)).pipe(Object(Ja["a"])((function(e){var t=ub(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(yt["a"])((function(e){var t=ub(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(w["Two"].pow(31))?Object(P["a"])({service:n,valid:!1}).pipe(Object(_u["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(P["a"])({service:n,valid:!0}),i)})))})),Object(no["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(rb(e),[n]):e}),[]),Object(to["a"])(),Object(Wp["a"])(1e3),Object(B["a"])((function(e){return zr({pfsList:e})})))})))},Ab=function(e,t,n){sb(e),sb(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(lo("state","blockNumber"),Object(cs["a"])((function(){return o.functions.balances(r)})),Object(to["a"])((function(e,t){return t.eq(e)})),Object(B["a"])(ta))};function Rb(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=ko(e),u=s.partnerUnlocked;return u.gt(w["Zero"])?Object(ft["a"])([i,c]).pipe(Object(L["a"])((function(t){var n,r,a=ub(t,2),o=a[0].udcBalance,i=a[1],c=i.monitoringRoom,s=i.monitoringReward,l=i.rateToSvt;return!!c&&!!(null===(n=null===s||void 0===s?void 0:s.gt)||void 0===n?void 0:n.call(s,w["Zero"]))&&o.gte(s)&&u.mul(null!==(r=l[e.token])&&void 0!==r?r:w["Zero"]).div(w["WeiPerEther"]).gt(s)})),Object(os["a"])(1),Object($["a"])((function(i){var c=ub(i,2),s=c[1],u=s.monitoringReward,l=s.monitoringRoom,d=e.partner.balanceProof,f=vi(d.transferredAmount,d.lockedAmount,d.locksroot),p=Object(j["concat"])([Pa(e.tokenNetwork,20),Pa(r.chainId,32),Pa(pi.BALANCE_PROOF_UPDATE,32),Pa(e.id,32),Pa(f,32),Pa(d.nonce,32),Pa(d.additionalHash,32),Pa(d.signature,65)]);return Object(pt["a"])(a.signMessage(p)).pipe(Object($["a"])((function(r){return Ti(a,{type:Cn.MONITOR_REQUEST,balance_proof:{chain_id:d.chainId,token_network_address:d.tokenNetworkAddress,channel_identifier:Object(j["bigNumberify"])(e.id),nonce:d.nonce,balance_hash:f,additional_hash:d.additionalHash,signature:d.signature},non_closing_participant:t,non_closing_signature:r,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:u},{log:n})})),Object(B["a"])((function(e){return kr({message:e},{roomName:l})})))})),Object(Dc["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]}))):U["a"]}}var Cb=function(e,t,n){return sb(e),sb(t),n.latest$.pipe(Object(q["a"])("state"),wo,Object(ss["a"])(n.config$),Object($["a"])((function(e){var t=ub(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(to["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(M["a"])(1),Object(Wp["a"])(a/2),Object(yt["a"])(Rb(n)))})))};function Nb(e,t){return Mb(e)||Ub(e,t)||Ib(e,t)||Pb()}function Pb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ib(e,t){if(e){if("string"===typeof e)return Db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Db(e,t):void 0}}function Db(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ub(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mb(e){if(Array.isArray(e))return e}function Bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lb(e,t,n){var r=n.defaultConfig,a=t.pipe(lo("config"),Object(B["a"])((function(e){return Object.assign(Object.assign({},r),e)}))),o=Yc(e),i=e.pipe(Object(L["a"])(zr.is),Object(q["a"])("payload","pfsList"),Object(Pc["a"])([])),c=e.pipe(Object(L["a"])(Qn.is),Object(no["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),Bb({},t.meta.address,t.payload)):Xa()(t.meta.address,e)}),{}),Object(Pc["a"])({})),s=e.pipe(Object(L["a"])(ta.is),Object(q["a"])("payload"),Object(Pc["a"])(w["Zero"])),u=Jc(a,s);return Object(ft["a"])([Object(ft["a"])([e,t,a,o,i,c]),Object(ft["a"])([s,u])]).pipe(Object(B["a"])((function(e){var t=Nb(e,2),n=Nb(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Nb(t[1],2),l=u[0],d=u[1];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l,caps:d}})))}var Fb=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),$b=function(e,t,n){var r=e.pipe(Object(L["a"])(wn(na))),a=e.pipe(Object(Ic["a"])(Mc()(wn(na)),!0)),o=t.pipe(Object(eo["a"])(r));return Lb(a,o,n).subscribe(n.latest$),Object(pt["a"])(Object.values(Fb)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(Dc["a"])((function(e){return n.log.error("Fatal error:",e),Object(P["a"])(na({reason:e}))})),Object(eo["a"])(r))};function qb(e){return Wb(e)||Vb(e)||Zb(e)||Hb()}function Hb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Wb(e){if(Array.isArray(e))return Xb(e)}function Gb(e,t){return Qb(e)||Yb(e,t)||Zb(e,t)||Kb()}function Kb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zb(e,t){if(e){if("string"===typeof e)return Xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xb(e,t):void 0}}function Xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qb(e){if(Array.isArray(e))return e}function zb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ey(e,t,n){return t&&Jb(e.prototype,t),n&&Jb(e,n),e}var ty=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ny=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,f=this;zb(this,e),this.resolveName=t.resolveName.bind(t);var b=o.address;this.log=y.a.getLogger("raiden:".concat(b)),t.resetEventsBlock(o.blockNumber+1);var m=new C["a"](1);this.state$=m.pipe(lo("state")),this.action$=m.pipe(lo("action"),Object(M["a"])(1)),this.channels$=this.state$.pipe(lo("channels"),Object(B["a"])($s)),this.transfers$=Fs(this.state$),this.events$=this.action$.pipe(Object(L["a"])(wn(oa))),this.getTokenInfo=R()((function(e){return ty(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ke(ot.is(e),"Invalid address"),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(x()(void 0)),n.functions.symbol().catch(x()(void 0))]);case 4:return r=t.sent,a=Gb(r,4),o=a[0],i=a[1],c=a[2],s=a[3],Ke(o&&null!=i,"Not a token contract"),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:m,config$:m.pipe(lo("config")),matrix$:new N["a"],provider:t,network:n,signer:r,address:b,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:K.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:R()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:R()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),main:c},this.userDepositTokenAddress=R()((function(){return ty(f,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var h=Object(T["createLogger"])({predicate:function(){return f.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.deps.config$.subscribe((function(e){return f.config=e})),this.deps.config$.pipe(lo("logger")).subscribe((function(e){return f.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(_["b"])(Nc,o,Object(_["a"])(h,this.epicMiddleware)),Lb(Object(P["a"])(ra({})),Object(P["a"])(this.store.getState()),this.deps).subscribe((function(e){return f.deps.latest$.next(e)}))}return ey(e,[{key:"start",value:function(){var e=this;Ke(this.epicMiddleware,"Already started or stopped!"),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run($b),this.epicMiddleware=void 0,this.store.dispatch(ra({}))}},{key:"stop",value:function(){this.store.dispatch(na({reason:Se.STOP}))}},{key:"getBlockNumber",value:function(){return ty(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(ra(Xe($t,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:qs(this.deps,this.config.subkey).address,Ke(ot.is(e),"Invalid address"),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return ty(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:qs(this.deps,this.config.subkey).address,Ke(ot.is(t)&&ot.is(e),"Invalid address"),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return ty(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return ty(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Ke(ot.is(e),"Invalid address"),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,Ke(r&&r!==w["AddressZero"],"Unknown token network"),this.store.dispatch(Mn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return ty(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a.next=3,this.monitorToken(e);case 3:return o=a.sent,Ke(!n.subkey||this.deps.main,"Can't send tx from subkey if not set"),i=void 0===n.deposit?void 0:Xe(et(32),n.deposit),c={tokenNetwork:o,partner:t},s=An(Bn,c,this.action$,!1).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Bn.request(Object.assign(Object.assign({},n),{deposit:i}),c)),a.next=11,s;case 11:return u=a.sent,null===r||void 0===r||r({type:we.OPENED,payload:{txHash:u}}),a.next=15,this.state$.pipe(lo("channels",go({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===Ia.open}))).toPromise();case 15:if(null===r||void 0===r||r({type:we.CONFIRMED,payload:{txHash:u}}),!i){a.next=21;break}return a.next=19,An(Fn,c,this.action$,!0).then((function(e){var t=e.txHash;return t}));case 19:l=a.sent,null===r||void 0===r||r({type:we.DEPOSITED,payload:{txHash:l}});case 21:return a.abrupt("return",u);case 22:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return ty(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state,i=o.tokens[e],Ke(i,"Unknown token network"),Ke(!a||this.deps.main,"Can't send tx from subkey if not set"),c=Xe(et(32),n),s={tokenNetwork:i,partner:t},u=An(Fn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Fn.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return ty(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ke(o,"Unknown token network"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=An(qn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(qn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return ty(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state,o=a.tokens[e],Ke(o,"Unknown token network"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),i={tokenNetwork:o,partner:t},c=An(Vn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Vn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return ty(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Ke(ot.is(e),"Invalid address"),n={address:e},r=An(Zn,n,this.action$),this.store.dispatch(Zn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ty(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ke(o,"Unknown token network"),i=Xe(et(32),n),c=r.paymentId?Xe(et(8),r.paymentId):Li(),s=r.paths?Xe(Tr,r.paths):void 0,u=r.pfs?Xe(Sr,r.pfs):void 0,Ke(void 0===r.secret||rt.is(r.secret),"Invalid options.secret"),Ke(void 0===r.secrethash||nt.is(r.secrethash),"Invalid options.secrethash"),l=r.secret?r.secret:r.secrethash?void 0:Bi(),d=r.secrethash||Mi(l),Ke(!l||Mi(l)===d,"Provided secrethash must match the sha256 hash of provided secret"),f={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Sn(Qr,f)),Object(B["a"])((function(e){if(Qr.failure.is(e))throw e.payload;return e.payload.paths}))),Object(D["a"])((function(){return b.store.dispatch(Qr.request({paths:s,pfs:u},f)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(L["a"])(wn([Dr,Ir.failure])),Object(F["a"])((function(e){return e.meta.direction===Rr.SENT&&e.meta.secrethash===d})),Object(B["a"])((function(e){if(Ir.failure.is(e))throw e.payload;return qi(e.meta)}))),Object(D["a"])((function(){return b.store.dispatch(Ir.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:Rr.SENT})),U["a"]})))}))).toPromise());case 14:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return ty(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=Vi(e),c=i.direction,s=i.secrethash,Ke(s in this.state[c],"Unknown transfer"),u=Zi(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new fn(Ht.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,An(Ir,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ty(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),o=this.state.tokens[e],Ke(o,"Unknown token network"),i=Xe(et(32),n),c=r.pfs?Xe(Sr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=An(Qr,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Qr.request({pfs:c},s)),a.abrupt("return",u);case 9:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return ty(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address"),a=this.state.tokens[e],Ke(a,"Unknown token network"),o=Xe(et(32),n),i={tokenNetwork:a,target:t,value:o},c=An(Qr,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Qr.request({pfs:null},i)),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return ty(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ke(null!==this.config.pfs,"PFS disabled in config"),e.abrupt("return",(this.config.pfs?Object(P["a"])([this.config.pfs]):this.deps.latest$.pipe(lo("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return nb(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return ty(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(ot.is(e),"Invalid address"),Ke(!r||this.deps.main,"Can't send tx from subkey if not set"),Ke("homestead"!==this.deps.network.name,"Minting is only allowed on test networks."),a=qs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=pe.connect(e,o),n.next=7,Vs(i,"mint",[Xe(et(32),t)],Ht.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,Ws(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return ty(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){var r=Object.values(t).filter((function(e){return e.expiration_block.gte(n)}));return e.push.apply(e,qb(r)),e}),new Array).reduce((function(e,t){return e.add(t.amount)}),w["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return ty(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c,s,u,l,d,f,b;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Ke(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),a=Object(j["bigNumberify"])(e),Ke(a.gt(w["Zero"]),"Please deposit a positive amount.",this.log.debug),o=qs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,s=Hs(this.deps.userDepositContract,i),n.t0=Hs,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=i,u=(0,n.t0)(n.t3,n.t4),n.next=15,u.functions.balanceOf(c);case 15:return l=n.sent,Ke(l.gte(e),"Insufficient token balance (".concat(l,")."),this.log.debug),n.next=19,Vs(u,"approve",[s.address,a],Ht.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 19:return d=n.sent,null===t||void 0===t||t({type:we.APPROVED,payload:{txHash:d.transactionHash}}),n.next=23,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(Ye)).toPromise();case 23:return f=n.sent,n.next=26,Vs(s,"deposit",[this.address,f.add(a)],Ht.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 26:return b=n.sent,null===t||void 0===t||t({type:we.DEPOSITED,payload:{txHash:b.transactionHash}}),n.next=30,Ws(b,this.deps);case 30:return this.log.debug('deposit tx "'.concat(b.transactionHash,'" confirmed')),null===t||void 0===t||t({type:we.CONFIRMED,payload:{txHash:b.transactionHash}}),n.abrupt("return",b.transactionHash);case 33:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return ty(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Ke(ot.is(e),"Invalid address",this.log.debug),Ke(!r||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=qs(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(j["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(j["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),Ke(d.gt(w["Zero"]),"Not enough balance for a transfer",this.log.error),f=d.lte(t)?d:Object(j["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:f,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:if(y=n.sent,y.status){n.next=26;break}throw new fn(Ht.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED);case 26:return n.abrupt("return",b.hash);case 27:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return ty(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,d;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Ke(ot.is(e)&&ot.is(t),"Invalid address",this.log.debug),Ke(!a||this.deps.main,"Can't send tx from subkey if not set",this.log.debug),o=qs(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=Hs(this.deps.getTokenContract(e),i),r.next=6,this.getTokenBalance(e,c);case 6:return u=r.sent,l=u.lte(n)?u:Object(j["bigNumberify"])(n),r.next=10,Vs(s,"transfer",[t,l],Ht.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 10:return d=r.sent,r.abrupt("return",d.transactionHash);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return ty(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,d,f,b,y,m,h,v,g;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new k["JsonRpcProvider"](e):e instanceof k["JsonRpcProvider"]?e:new k["Web3Provider"](e),It(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=Ms(s)),i.next=8,Ls(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,f=u.main,i.next=14,Ka(s,r,d,n,a&&Xe($t,a));case 14:return b=i.sent,y=b.state,m=b.onState,h=b.onStateComplete,v=b.defaultConfig,Ke(d===y.address,'Mismatch between provided account and loaded state: "'.concat(d,'" !== "').concat(y.address,'"')),Ke(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,"Mismatch between network or registry address and loaded state"),g=new this(c,s,l,r,y,v,f),m&&g.state$.subscribe(m,h,h),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Te.sdk}},{key:"contractVersion",get:function(){return Te.contracts}}]),e}()},f45e:function(e,t,n){},ff61:function(e,t,n){}});
(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2caebeb8":"2cfabbb0","chunk-3fce2bbf":"9cffef6e","chunk-165954e2":"a57827f0","chunk-39f9a39e":"d7f6c84a","chunk-3e39f0d6":"48f4c775","chunk-5f2081ed":"b8ed8a0f","chunk-62168147":"1a10b31d","chunk-11f6e3c6":"4b3f8d8c","chunk-eb1a832e":"089da1fe","chunk-0d5ff6a0":"6650e65e","chunk-4c01e9ac":"3765189b","chunk-932ef3c2":"59f448b2","chunk-d503b626":"fae02ead","chunk-4b2f0e85":"32ef79a4","chunk-206bffae":"7cc4b57f","chunk-8c624d74":"cdb4e277","chunk-1e15440c":"6cd66739","chunk-6422f8ef":"994b70e8"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2caebeb8":1,"chunk-3fce2bbf":1,"chunk-165954e2":1,"chunk-39f9a39e":1,"chunk-3e39f0d6":1,"chunk-5f2081ed":1,"chunk-62168147":1,"chunk-11f6e3c6":1,"chunk-eb1a832e":1,"chunk-0d5ff6a0":1,"chunk-4c01e9ac":1,"chunk-932ef3c2":1,"chunk-d503b626":1,"chunk-4b2f0e85":1,"chunk-206bffae":1,"chunk-8c624d74":1,"chunk-1e15440c":1,"chunk-6422f8ef":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2caebeb8":"284343a3","chunk-3fce2bbf":"f0caf6ea","chunk-165954e2":"bbec60a2","chunk-39f9a39e":"e65b95d7","chunk-3e39f0d6":"3a69ade2","chunk-5f2081ed":"a9f4933e","chunk-62168147":"36e127a6","chunk-11f6e3c6":"4c2a0c88","chunk-eb1a832e":"c60d19bc","chunk-0d5ff6a0":"120a3baf","chunk-4c01e9ac":"f6fa631c","chunk-932ef3c2":"32f65b6d","chunk-d503b626":"05692934","chunk-4b2f0e85":"c2e1e777","chunk-206bffae":"ba89b3e9","chunk-8c624d74":"10f22ed9","chunk-1e15440c":"6c9b5542","chunk-6422f8ef":"37234d15"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],d.parentNode.removeChild(d),n(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"07e6":function(e,t,n){e.exports=n.p+"img/info.c9b975f7.svg"},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("4a7b"),i=n("9eb3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["a"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("71a0"),n("8e3c")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("0e7f"),a=n("a3d5"),o=n("5bfd"),i=n.n(o),c=n("e73a"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("4a7b"),a=n("9eb3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=d(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},"1c30":function(e,t,n){"use strict";var r=n("2b98"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1ffc":function(e,t,n){e.exports=n.p+"img/state.ff4426c1.svg"},2:function(e,t){},"208f":function(e,t,n){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("4a7b"),i=n("9eb3"),c=n("7aa1"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=w();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var k=function(e){m(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));k=Object(o["a"])([Object(i["a"])({computed:f(f({},Object(c["f"])(["defaultAccount"])),Object(c["d"])(["pendingTransfers"]))})],k);var j=k,E=j,T=(n("49fc"),n("8e3c")),A=n("8f3c"),S=n.n(A),x=n("39eb"),N=n("f097"),R=n("200a"),C=Object(T["a"])(E,r,a,!1,null,"880322ee",null);t["a"]=C.exports;S()(C,{VBadge:x["a"],VImg:N["a"],VTooltip:R["a"]})},2850:function(e,t,n){"use strict";var r=n("208f"),a=n.n(r);a.a},2886:function(e,t,n){e.exports=n.p+"img/sent_transfer.087bd404.svg"},"2b98":function(e,t,n){},"2d14":function(e,t,n){e.exports=n.p+"img/down_arrow.d7fcc637.svg"},"2e1f":function(e,t,n){e.exports=n.p+"img/done.51f3a970.svg"},"2ee5":function(e,t,n){e.exports=n.p+"img/error.f52d5069.svg"},"2fca":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("f633"),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return p(e)||d(e,t)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function p(e){if(Array.isArray(e))return e}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){m(this,e)}return v(e,null,[{key:"contracts",value:function(){var e=y(a.a.mark((function e(){var t,n,r,o,c,u,l,f,d,p,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return o=e.sent,c=s(o,2),u=c[0],l=c[1],e.next=10,Promise.all([u.json(),l.json()]);case 10:return f=e.sent,d=s(f,2),p=d[0],b=d[1],e.abrupt("return",i(i({},p.contracts),b.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=y(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},"31e8":function(e,t,n){var r={"./back_arrow.svg":"73da","./bug.svg":"c0e3","./deposit.svg":"d989","./done.svg":"2e1f","./down_arrow.svg":"2d14","./error.svg":"2ee5","./eth.svg":"b872","./eth_transfer_arrow.svg":"e2f5","./gear.svg":"5cc9","./generic.svg":"ec79","./info.svg":"07e6","./input_invalid.svg":"c2ff","./input_valid.svg":"b376","./logo.svg":"9b19","./metamask.svg":"d6c5","./notifications.svg":"4170","./received_transfer.svg":"5b9b","./sent_transfer.svg":"2886","./state.svg":"1ffc","./udc.svg":"8fe8","./warning.svg":"afb7","./withdrawal.svg":"45f0"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="31e8"},3465:function(e,t,n){"use strict";var r=n("9c26"),a=n.n(r);a.a},"3eea":function(e,t,n){"use strict";var r=n("e9eb"),a=n.n(r);a.a},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"45f0":function(e,t,n){e.exports=n.p+"img/withdrawal.c80c3337.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"49fc":function(e,t,n){"use strict";var r=n("fe4d"),a=n.n(r);a.a},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},"503c":function(e,t,n){},"58a8":function(e,t,n){"use strict";var r=n("bb98"),a=n.n(r);a.a},"5b9b":function(e,t,n){e.exports=n.p+"img/received_transfer.ef6596cc.svg"},"5cc9":function(e,t,n){e.exports=n.p+"img/gear.263a7ddf.svg"},6:function(e,t){},6568:function(e,t,n){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("4a7b"),i=n("0a08"),c=n("9eb3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){d(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("8e3c")),k=n("8f3c"),j=n.n(k),E=n("34f2"),T=n("3424"),A=n("6d95"),S=n("eb37"),x=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},6707:function(e,t,n){"use strict";var r=n("f113"),a=n.n(r);a.a},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("c307"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("4a7b"),i=n("9eb3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){f(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("3eea"),n("8e3c")),_=n("8f3c"),k=n.n(_),j=n("34f2"),E=n("0fbe"),T=n("eb37"),A=n("897f"),S=Object(w["a"])(O,r,a,!1,null,"07afaaa8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("6568"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("4a7b"),a=n("9eb3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"7e8f":function(e,t,n){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return T}));var r=n("f633"),a=n.n(r),o=n("7e01"),i=n.n(o),c=n("5da6");function s(e){return d(e)||f(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function w(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function _(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?w(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:w(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function k(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function j(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=_(n);i&&g.put(O,{logger:r,level:e,message:i},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(k)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return A.apply(this,arguments)}function A(){return A=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}},"8fe8":function(e,t,n){e.exports=n.p+"img/udc.a4ddd71a.svg"},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("4a7b"),i=n("9eb3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){d(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return f(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("58a8"),n("8e3c")),k=n("8f3c"),j=n.n(k),E=n("200a"),T=Object(_["a"])(w,r,a,!1,null,"0b75904e",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"959b":function(e,t,n){"use strict";var r=n("503c"),a=n.n(r);a.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},"9c26":function(e,t,n){},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction failed.","CNL_OPENCHANNEL_FAILED":"Token networks openChannel transaction failed.","CNL_SETTOTALDEPOSIT_FAILED":"Token networks setTotalDeposit transaction failed.","CNL_CLOSECHANNEL_FAILED":"Token networks closeChannel transaction failed.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"Token networks settleChannel transaction failed.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction failed.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction failed.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction failed","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("38dd");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b376:function(e,t,n){e.exports=n.p+"img/input_valid.762cb0ae.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},b872:function(e,t,n){e.exports=n.p+"img/eth.640d53f2.svg"},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("f633"),i=n.n(o),c=n("4a7b"),s=n("9eb3"),u=n("7aa1"),l=n("87a2"),f=n("750b"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("66bc"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function k(e){var t=T();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var S=function(e){w(n,e);var t=k(n);function n(){return v(this,n),t.apply(this,arguments)}return O(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0})],S.prototype,"reason",void 0),S=Object(c["a"])([Object(s["a"])({})],S);var x=S,N=x,R=(n("753f"),n("8e3c")),C=n("8f3c"),D=n.n(C),I=n("3bdb"),P=Object(R["a"])(N,y,m,!1,null,"7b92b083",null),L=P.exports;function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function K(e){var t=Y();return function(){var n,r=X(e);if(t){var a=X(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}D()(P,{VAlert:I["a"]});var Q=function(e){q(n,e);var t=K(n);function n(){var e;return W(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return $(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",B(B({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],Q.prototype,"visible",void 0),Object(c["a"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],Q.prototype,"connecting",void 0),Object(c["a"])([Object(s["d"])({required:!0})],Q.prototype,"hasProvider",void 0),Object(c["a"])([Object(s["b"])()],Q.prototype,"close",null),Object(c["a"])([Object(s["b"])()],Q.prototype,"connect",null),Q=Object(c["a"])([Object(s["a"])({components:{RaidenDialog:b["a"],ActionButton:f["a"],NoAccessMessage:L},computed:Object(u["f"])(["accessDenied"])})],Q);var z=Q,J=z,ee=(n("e4b6"),n("61c1")),te=Object(R["a"])(J,d,p,!1,null,"469a86df",null),ne=te.exports;D()(te,{VCardText:ee["b"],VCardTitle:ee["c"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},ae=[],oe=n("152b");function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){var t=ve();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var Oe=function(e){pe(n,e);var t=ye(n);function n(){return le(this,n),t.apply(this,arguments)}return de(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(oe["a"]));Object(c["a"])([Object(s["f"])("tokens",{immediate:!0})],Oe.prototype,"onChange",null),Oe=Object(c["a"])([Object(s["a"])({computed:se({},Object(u["d"])(["tokens"]))})],Oe);var we=Oe,_e=we,ke=(n("959b"),n("34f2")),je=n("0fbe"),Ee=n("cae1"),Te=n("eb37"),Ae=n("897f"),Se=Object(R["a"])(_e,re,ae,!1,null,"593703f5",null),xe=Se.exports;D()(Se,{VBtn:ke["a"],VCol:je["a"],VContainer:Ee["a"],VIcon:Te["a"],VRow:Ae["a"]});var Ne=n("f15c"),Re=n("2fca");function Ce(e){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,c,"next",e)}function c(e){Le(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}function $e(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ze=function(e){We(n,e);var t=$e(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Fe(n,[{key:"created",value:function(){var e=Ue(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ne["a"].injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,Re["a"].configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ze=Object(c["a"])([Object(s["a"])({computed:Ie(Ie({},Object(u["f"])(["loading","accessDenied","stateBackup","settings"])),Object(u["d"])(["isConnected"])),components:{ActionButton:f["a"],ConnectDialog:ne,NoTokens:xe,NoAccessMessage:L}})],Ze);var Ye=Ze,Xe=Ye,Qe=(n("3465"),n("f097")),ze=Object(R["a"])(Xe,r,a,!1,null,"3ad2829a",null);t["a"]=ze.exports;D()(ze,{VCol:je["a"],VContainer:Ee["a"],VImg:Qe["a"],VRow:Ae["a"]})},bb98:function(e,t,n){},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.10.0","contracts":"0.37.0"}')},c0e3:function(e,t,n){e.exports=n.p+"img/bug.4e8b8f1b.svg"},c2ff:function(e,t,n){e.exports=n.p+"img/input_invalid.4e8b2468.svg"},c307:function(e,t,n){},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("0e7f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-area")],1)},o=[],i=n("4a7b"),c=n("9eb3"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),!e.loading&&e.defaultAccount?r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1):e._e(),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},l=[],f=n("7aa1"),d=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=Object(f["a"])("notifications"),N=x.mapState,R=x.mapMutations,C=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"canGoBack",get:function(){var e=[d["a"].HOME,d["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(s["a"]));C=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(f["f"])(["loading","defaultAccount"])),N(["newNotifications"])),Object(f["d"])(["network","isConnected"])),methods:h({},R(["notificationsViewed"]))})],C);var D=C,I=D,P=(n("f9be"),n("8e3c")),L=n("8f3c"),U=n.n(L),M=n("39eb"),B=n("34f2"),F=n("0fbe"),W=n("f097"),H=n("897f"),$=Object(P["a"])(I,u,l,!1,null,"c43773b0",null),q=$.exports;U()($,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:H["a"]});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},K=[],G=n("0a08");function Z(e){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}function ee(e){var t=re();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe=function(e){z(n,e);var t=ee(n);function n(){var e;return Y(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Q(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);oe=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],oe);var ie=oe,ce=ie,se=n("eb37"),ue=n("be95"),le=Object(P["a"])(ce,V,K,!1,null,null,null),fe=le.exports;U()(le,{VIcon:se["a"],VSnackbar:ue["a"]});var de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function be(e){return be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Oe(e){var t=ke();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ee=function(e){ve(n,e);var t=Oe(n);function n(){var e;return ye(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return he(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Ee=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],Ee);var Te=Ee,Ae=Te,Se=Object(P["a"])(Ae,de,pe,!1,null,null,null),xe=Se.exports;U()(Se,{VBtn:B["a"],VSnackbar:ue["a"]});var Ne,Re,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,top:"",centered:"",vertical:"",app:"",rounded:"","max-width":"550px"},on:{input:function(t){return e.notificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{dark:"",text:"",left:""},on:{click:function(t){return e.dismiss(e.notification.id)}}},"v-btn",n,!1),[e._v(" "+e._s(e.$t("notification-area.dismiss"))+" ")])]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area__notification__content",attrs:{"no-gutters":""}},["none"!==e.notification.context?r("v-col",{staticClass:"notification-area__notification__content__icon d-flex flex-column",attrs:{cols:"auto"}},[r("v-img",{class:"notification-area__notification__content__icon--"+e.notification.context,attrs:{"aspect-ratio":"1",contain:"",src:n("31e8")("./"+e.notification.context+".svg"),height:"48px",width:"48px"}})],1):e._e(),r("v-col",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h3",{staticClass:"text--primary title"},[e._v(e._s(e.notification.title))])]),e.notificationQueue.length>=1?r("v-col",{attrs:{cols:"auto"}},[r("v-badge",{staticClass:"notification-area__notification__content__count",attrs:{inline:"",content:e.notificationQueue.length,color:"info"}})],1):e._e()],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("p",{staticClass:"text--secondary caption notification-area__notification__content__description text-justify"},[e._v(" "+e._s(e.notification.description)+" ")])])],1)],1)],1)],1)},De=[];function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}function $e(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Ne||(Ne={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(Re||(Re={}));var Ze={id:-1,title:"",description:"",display:!1,duration:5e3,importance:Ne.LOW,context:Re.NONE,received:new Date},Ye=function(e){We(n,e);var t=$e(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.notification=Ze,e}return Fe(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ze}},{key:"dismiss",value:function(e){this.notificationShown(e),this.notification=Le(Le({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Ye.prototype,"onQueueChange",null),Ye=Object(i["a"])([Object(c["a"])({computed:Le({},Object(f["d"])("notifications",["notificationQueue"])),methods:Le({},Object(f["c"])("notifications",["notificationShown"]))})],Ye);var Xe=Ye,Qe=Xe,ze=(n("6707"),Object(P["a"])(Qe,Ce,De,!1,null,"f05dcae4",null)),Je=ze.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(ze,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:H["a"],VSnackbar:ue["a"]});var ft=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));ft=Object(i["a"])([Object(c["a"])({components:{AppHeader:q,OfflineSnackbar:fe,UpdateSnackbar:xe,NotificationArea:Je}})],ft);var dt=ft,pt=dt,bt=(n("2850"),n("ffd6")),yt=n("cae1"),mt=n("3c4f"),ht=Object(P["a"])(pt,a,o,!1,null,"6800ce96",null),vt=ht.exports;U()(ht,{VApp:bt["a"],VContainer:yt["a"],VMain:mt["a"]});var gt=n("9d8a");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("617c"),wt=n("bb51");r["a"].use(Ot["a"]);var _t=new Ot["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:d["a"].HOME,meta:{title:"Raiden dApp"},component:wt["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:d["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-62168147"),n.e("chunk-11f6e3c6"),n.e("chunk-eb1a832e"),n.e("chunk-0d5ff6a0")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:d["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-62168147"),n.e("chunk-932ef3c2")]).then(n.bind(null,"146c"))}},{path:"/connect",name:d["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-165954e2")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:d["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-62168147"),n.e("chunk-11f6e3c6"),n.e("chunk-eb1a832e"),n.e("chunk-8c624d74")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:d["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-62168147"),n.e("chunk-11f6e3c6"),n.e("chunk-206bffae")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:d["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-62168147"),n.e("chunk-4c01e9ac")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:d["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:d["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-4b2f0e85").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:d["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:d["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-2caebeb8").then(n.bind(null,"47f5"))}),r()},children:[{path:"/",name:d["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-39f9a39e")]).then(n.bind(null,"f18d"))}},{path:"backup",name:d["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-d503b626")]).then(n.bind(null,"248b"))}},{path:"raiden",name:d["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-62168147"),n.e("chunk-6422f8ef")]).then(n.bind(null,"9114"))}},{path:"settings",name:d["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-3e39f0d6")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:d["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-3fce2bbf"),n.e("chunk-5f2081ed")]).then(n.bind(null,"c9175"))}},{path:"udc",name:d["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-62168147"),n.e("chunk-1e15440c")]).then(n.bind(null,"4c07"))}}]}]}),kt=_t,jt=n("5013"),Et=n("f455"),Tt=n("87a2"),At=n("002a"),St=n.n(At),xt=n("4c4f"),Nt=n.n(xt),Rt=n("1c4f0"),Ct=n.n(Rt),Dt=n("9038"),It=n.n(Dt),Pt=n("c72f"),Lt=n.n(Pt),Ut=n("5091"),Mt=n.n(Ut),Bt=n("8265"),Ft=n.n(Bt),Wt=n("b104"),Ht=n.n(Wt);function $t(e){return Gt(e)||Kt(e)||Vt(e)||qt()}function qt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(e,t){if(e){if("string"===typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zt(e,t):void 0}}function Kt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Gt(e){if(Array.isArray(e))return Zt(e)}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt={notify:function(e,t){var n,r,a=e.commit,o=e.getters.nextNotificationId,i=Xt(Xt({},t),{},{id:o,received:new Date,display:!0,context:null!==(n=t.context)&&void 0!==n?n:Re.NONE,duration:null!==(r=t.duration)&&void 0!==r?r:5e3});a("notificationAdd",i)},notificationShown:function(e,t){var n=e.commit,r=e.state,a=r.notifications.findIndex((function(e){return e.id===t}));if(!(a<0)){var o=$t(r.notifications);o[a]=Xt(Xt({},r.notifications[a]),{},{display:!1}),n("notifications",o)}}},Jt={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0},notifications:function(e,t){e.notifications=t},clear:function(e){e.notifications=[]}},en={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]+1},notificationQueue:function(e){return e.notifications.filter((function(e){return e.importance===Ne.HIGH&&!0===e.display}))}},tn=function(){return{notifications:[],newNotifications:!1}},nn=tn(),rn=nn,an={namespaced:!0,mutations:Jt,actions:zt,state:rn,getters:en};function on(e){return un(e)||sn(e)||yn(e)||cn()}function cn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function un(e){if(Array.isArray(e))return mn(e)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){return vn(e)||hn(e,t)||yn(e,t)||bn()}function bn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yn(e,t){if(e){if("string"===typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vn(e){if(Array.isArray(e))return e}r["a"].use(f["b"]);var gn={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:Tt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:Tt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:""};function On(){return It()(gn)}var wn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},_n=new jt["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),kn={state:On(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=pn(r[n],2),o=a[0],i=a[1];o in e.tokens&&Ft()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=fn(fn({},e.tokens[o]),i):e.tokens=fn(fn({},e.tokens),{},dn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=on(t)},updatePresence:function(e,t){e.presences=fn(fn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,fn(fn({},On()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=fn(fn({},e.transfers),{},dn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return St()(Ct()(Nt()(e.channels),(function(e){return!Ht()(e)})),(function(n){var r=Lt()(n,t,Object(Tt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return wn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Ht()(r)&&(n=Nt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Et["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Et["b"].open}));return Mt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[_n.plugin],modules:{notifications:an}},jn=new f["b"].Store(kn),En=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Tn=n("f633"),An=n.n(Tn),Sn=n("f15c"),xn=n("a3d5"),Nn=n("38dd"),Rn=n("5adc"),Cn=n("3a07"),Dn=n("a8c1"),In=n.n(Dn),Pn=n("2fca"),Ln=n("f30a"),Un=n("80b9");function Mn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Un["a"]);var Bn=new Un["a"]({locale:"en",fallbackLocale:"en",messages:Mn()});function Fn(e){return Fn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Wn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}function Hn(e){var t=Gn();return function(){var n,r=Xn(e);if(t){var a=Xn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $n(this,n)}}function $n(e,t){return!t||"object"!==Fn(t)&&"function"!==typeof t?qn(e):t}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){var t="function"===typeof Map?new Map:void 0;return Vn=function(e){if(null===e||!Zn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Kn(e,arguments,Xn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Yn(n,e)},Vn(e)}function Kn(e,t,n){return Kn=Gn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Yn(o,n.prototype),o},Kn.apply(null,arguments)}function Gn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Zn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Yn(e,t){return Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yn(e,t)}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t){return nr(e)||tr(e,t)||or(e,t)||er()}function er(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tr(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nr(e){if(Array.isArray(e))return e}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=or(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function or(e,t){if(e){if("string"===typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(e,t):void 0}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function sr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){cr(o,r,a,i,c,"next",e)}function c(e){cr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e,t,n){return t&&lr(e.prototype,t),n&&lr(e,n),e}var dr=function(){function e(t){ur(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return fr(e,[{key:"updateBalances",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=sr(An.a.mark((function e(){var t,n,r,a,o,i;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=ar(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=sr(An.a.mark((function e(t){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new pr(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=sr(An.a.mark((function t(n,r){var a,o,i,c,s,u=this;return An.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pn["a"].configuration();case 3:return o=t.sent,t.next=6,Sn["a"].provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=52;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Et["f"](Et["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,t.next=28,this.fetchTokenData([this._userDepositTokenAddress]);case 28:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=31,this.monitorPreSetTokens();case 31:return a.events$.pipe(Object(Rn["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(Rn["a"])((function(e){return"block/new"===e.type})),Object(Cn["a"])((function(){return u.fetchTokenData(u.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),a.events$.pipe(Object(Rn["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=sr(An.a.mark((function e(t){var n;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),!(null===(n=t.caps)||void 0===n?void 0:n[Et["a"].NO_RECEIVE])){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=sr(An.a.mark((function e(t){var n;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",rr({},t.payload.token,{address:t.payload.token})),e.next=36;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",rr({},t.meta.address,t.payload.available)),e.next=36;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=36;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=36;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=36;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner,t.meta.tokenNetwork,t.payload.txHash);case 31:e.next=36;break;case 33:if("channel/settle/failure"!==t.type){e.next=36;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner,t.meta.tokenNetwork,t.payload.message);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=44,this.getBalance();case 44:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=52;break}return t.t2=this.store,t.next=50,this.getBalance(a.address);case 50:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 52:t.next=58;break;case 54:t.prev=54,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?Tt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?Tt["a"].RDN_STATE_MIGRATION:t.t4 instanceof br?Tt["a"].INITIALIZATION_FAILED:Tt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 58:this.store.commit("loadComplete");case 59:case"end":return t.stop()}}),t,this,[[0,54]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:Bn.t("receiving-disabled-dialog.title"),description:Bn.t("receiving-disabled-dialog.body"),importance:Ne.HIGH,context:Re.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=sr(An.a.mark((function e(){var t,n,r,a,o,i,c;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=ar(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=sr(An.a.mark((function e(t,n,r){var a,o,i,c,s,u;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=xn["a"].toUnits(n,i),s="string"===typeof t?Bn.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Bn.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:Bn.t("notifications.withdrawal.failure.title"),description:u,context:Re.ERROR,importance:Ne.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=sr(An.a.mark((function e(t,n){var r,a,o,i,c;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=xn["a"].toUnits(t,o),c=xn["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:Bn.t("notifications.withdrawal.success.title"),description:Bn.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:Re.INFO,importance:Ne.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=sr(An.a.mark((function e(t,n,r,a){var o,i,c,s;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=xn["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:Bn.t("notifications.ms-balance-proof.title"),description:Bn.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:Re.INFO,importance:Ne.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=sr(An.a.mark((function e(t,n,r){var a;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Bn.t("notifications.settlement.success.description",{partner:t,tokenNetwork:n,txHash:r}),this._subkey&&(a+=" "+Bn.t("notifications.settlement.success.withdrawal_hint")),e.next=4,this.store.dispatch("notifications/notify",{title:Bn.t("notifications.settlement.success.title"),description:a,context:Re.INFO,importance:Ne.HIGH});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=sr(An.a.mark((function e(t,n,r){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:Bn.t("notifications.settlement.failure.title"),description:Bn.t("notifications.settlement.failure.description",{partner:t,tokenNetwork:n,message:r}),context:Re.ERROR,importance:Ne.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=sr(An.a.mark((function e(t){var n;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",xn["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=sr(An.a.mark((function e(t){var n,r,a,o,i,c,s,u;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=Jn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=sr(An.a.mark((function e(t,n,r,a){var o,i;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Et["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=sr(An.a.mark((function e(t,n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=sr(An.a.mark((function e(t,n,r){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=sr(An.a.mark((function e(t,n,r){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=sr(An.a.mark((function e(t,n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=sr(An.a.mark((function e(t){var n,r=this;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=sr(An.a.mark((function e(t){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",rr({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,In()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=sr(An.a.mark((function e(t,n,r,a,o){var i;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=sr(An.a.mark((function e(t,n,r,a){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=sr(An.a.mark((function e(t,n,r){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=sr(An.a.mark((function e(t,n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=sr(An.a.mark((function e(t,n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Et["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=sr(An.a.mark((function e(t){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=sr(An.a.mark((function e(){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=sr(An.a.mark((function e(t){var n,r;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",rr({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=sr(An.a.mark((function e(){var t,n;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=sr(An.a.mark((function e(t){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Nn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=sr(An.a.mark((function e(t){var n;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Nn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=sr(An.a.mark((function e(t,n){var r;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=sr(An.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=sr(An.a.mark((function e(n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Ln["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,In()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=zn(zn({},t),r[e]),delete r[e])})),i=function(){var e=sr(An.a.mark((function e(n){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=zn(zn({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,In()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=sr(An.a.mark((function e(t){return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=sr(An.a.mark((function e(t){var n,r,a,o,i=arguments;return An.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,Pn["a"].contracts();case 6:return o=e.sent,e.next=9,Et["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network"},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new br(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),pr=function(e){Wn(n,e);var t=Hn(n);function n(){return ur(this,n),t.apply(this,arguments)}return n}(Vn(Error)),br=function(e){Wn(n,e);var t=Hn(n);function n(){return ur(this,n),t.apply(this,arguments)}return n}(Vn(Error));function yr(e,t){e.prototype.$raiden=new dr(jn)}var mr=n("5ffb"),hr=n.n(mr);function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),e}var wr=function(){function e(){vr(this,e),this.cache={}}return Or(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=hr()(e);return this.cache[e]=n,n}}]),e}();function _r(e,t){e.prototype.$identicon=new wr}n("b1e8"),n("8e5c"),n("bd89");var kr=n("5aa6");r["a"].use(kr["a"]);var jr=new kr["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Er=n("9bec"),Tr=(n("5443"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Tr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(En["b"])(),r["a"].use(yr),r["a"].use(_r),r["a"].use(Er["a"]),new r["a"]({vuetify:jr,router:kt,store:jn,i18n:Bn,render:function(e){return e(vt)}}).$mount("#app")},d6c5:function(e,t,n){e.exports=n.p+"img/metamask.c879a582.svg"},d989:function(e,t,n){e.exports=n.p+"img/deposit.d1f000b7.svg"},e2f5:function(e,t,n){e.exports=n.p+"img/eth_transfer_arrow.cdc92be6.svg"},e4b6:function(e,t,n){"use strict";var r=n("7e8f"),a=n.n(r);a.a},e9eb:function(e,t,n){},ec79:function(e,t,n){e.exports=n.p+"img/generic.55c56a33.svg"},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","settlement":{"success":{"title":"Channel Settlement","description":"The channel with {partner} for the token network {tokenNetwork} has become settled ({txHash}).","withdrawal_hint":"Go to the acounts Withdrawal screen to transfer the tokens to your main account."},"failure":{"title":"Channel Settlement","description":"The attempt to settle the channel with {partner} for the token network {tokenNetwork} failed: {message}"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"UDC Balance:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"button":"Mint and deposit","button-main":"Deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"change-token-title":"Change Token","transfer-title":"Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"notification-area":{"dismiss":"Dismiss"}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f113:function(e,t,n){},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("f633"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f402:function(e,t,n){},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return Am})),n.d(t,"b",(function(){return po})),n.d(t,"a",(function(){return De})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return ft})),n.d(t,"f",(function(){return pt})),n.d(t,"g",(function(){return cn}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Kn})),n.d(r,"tokenMonitored",(function(){return Gn})),n.d(r,"channelOpen",(function(){return Zn})),n.d(r,"channelMonitored",(function(){return Yn})),n.d(r,"channelDeposit",(function(){return Xn})),n.d(r,"channelWithdrawn",(function(){return Qn})),n.d(r,"channelClose",(function(){return zn})),n.d(r,"channelSettleable",(function(){return Jn})),n.d(r,"channelSettle",(function(){return er}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return rr})),n.d(a,"matrixPresence",(function(){return ar})),n.d(a,"matrixRoom",(function(){return or})),n.d(a,"matrixRoomLeave",(function(){return ir})),n.d(a,"rtcChannel",(function(){return cr}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Gr})),n.d(o,"messageGlobalSend",(function(){return Zr})),n.d(o,"messageReceived",(function(){return Yr}));var i={};n.r(i),n.d(i,"transfer",(function(){return ua})),n.d(i,"transferSigned",(function(){return la})),n.d(i,"transferProcessed",(function(){return fa})),n.d(i,"transferSecret",(function(){return da})),n.d(i,"transferSecretRegister",(function(){return pa})),n.d(i,"transferSecretRequest",(function(){return ba})),n.d(i,"transferSecretReveal",(function(){return ya})),n.d(i,"transferUnlock",(function(){return ma})),n.d(i,"transferUnlockProcessed",(function(){return ha})),n.d(i,"transferExpire",(function(){return va})),n.d(i,"transferExpireProcessed",(function(){return ga})),n.d(i,"transferRefunded",(function(){return Oa})),n.d(i,"withdraw",(function(){return _a})),n.d(i,"withdrawMessage",(function(){return ka})),n.d(i,"withdrawExpire",(function(){return ja})),n.d(i,"withdrawCompleted",(function(){return Ea}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Sa})),n.d(c,"pfsListUpdated",(function(){return xa})),n.d(c,"iouPersist",(function(){return Na})),n.d(c,"iouClear",(function(){return Ra})),n.d(c,"udcDeposited",(function(){return Ca})),n.d(c,"udcWithdraw",(function(){return Ia})),n.d(c,"udcWithdrawn",(function(){return Pa})),n.d(c,"msBalanceProofSent",(function(){return La}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return nl})),n.d(s,"initTokensRegistryEpic",(function(){return rl})),n.d(s,"initMonitorProviderEpic",(function(){return al})),n.d(s,"channelEventsEpic",(function(){return ul})),n.d(s,"channelMonitoredEpic",(function(){return ll})),n.d(s,"channelOpenEpic",(function(){return dl})),n.d(s,"channelDepositEpic",(function(){return pl})),n.d(s,"channelCloseEpic",(function(){return bl})),n.d(s,"channelUpdateEpic",(function(){return yl})),n.d(s,"channelSettleEpic",(function(){return ml})),n.d(s,"channelSettleableEpic",(function(){return hl})),n.d(s,"channelUnlockEpic",(function(){return vl})),n.d(s,"confirmationEpic",(function(){return Ol}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return cf})),n.d(u,"matrixShutdownEpic",(function(){return sf})),n.d(u,"matrixMonitorPresenceEpic",(function(){return kf})),n.d(u,"matrixPresenceUpdateEpic",(function(){return jf})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Ef})),n.d(u,"matrixUpdateCapsEpic",(function(){return Tf})),n.d(u,"matrixCreateRoomEpic",(function(){return Ff})),n.d(u,"matrixInviteEpic",(function(){return Wf})),n.d(u,"matrixHandleInvitesEpic",(function(){return Hf})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return $f})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return qf})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Vf})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Kf})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Gf})),n.d(u,"matrixMessageSendEpic",(function(){return id})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return cd})),n.d(u,"matrixMessageReceivedEpic",(function(){return sd})),n.d(u,"deliveredEpic",(function(){return ud})),n.d(u,"rtcConnectEpic",(function(){return Cd}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return Bd})),n.d(l,"transferAutoExpireEpic",(function(){return Xd})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Ep})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Dp})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Ip})),n.d(l,"transferMediateEpic",(function(){return Wp})),n.d(l,"transferProcessedReceivedEpic",(function(){return Yp})),n.d(l,"transferProcessedSendEpic",(function(){return Xp})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return Qp})),n.d(l,"transferExpireProcessedEpic",(function(){return zp})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return Jp})),n.d(l,"transferRefundedEpic",(function(){return ub})),n.d(l,"transferRetryMessageEpic",(function(){return _b})),n.d(l,"transferSecretRequestedEpic",(function(){return Nb})),n.d(l,"transferSecretRevealEpic",(function(){return Cb})),n.d(l,"transferSecretRevealedEpic",(function(){return Db})),n.d(l,"transferRequestUnlockEpic",(function(){return Ib})),n.d(l,"monitorSecretRegistryEpic",(function(){return Pb})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return Lb})),n.d(l,"transferAutoRegisterEpic",(function(){return Ub})),n.d(l,"transferSecretRegisterEpic",(function(){return Mb})),n.d(l,"initWithdrawMessagesEpic",(function(){return Gb})),n.d(l,"withdrawSendRequestMessageEpic",(function(){return Zb})),n.d(l,"withdrawSendTxEpic",(function(){return Yb})),n.d(l,"withdrawMessageProcessedEpic",(function(){return Xb})),n.d(l,"autoWithdrawExpireEpic",(function(){return Qb})),n.d(l,"withdrawSendExpireMessageEpic",(function(){return zb}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return Ry})),n.d(f,"pfsCapacityUpdateEpic",(function(){return Cy})),n.d(f,"pfsFeeUpdateEpic",(function(){return Dy})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return Iy})),n.d(f,"monitorUdcBalanceEpic",(function(){return Py})),n.d(f,"monitorRequestEpic",(function(){return Uy})),n.d(f,"udcWithdrawRequestEpic",(function(){return My})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return By})),n.d(f,"udcWithdrawPlannedEpic",(function(){return Fy})),n.d(f,"msMonitorNewBPEpic",(function(){return Wy}));var d=n("f633"),p=n.n(d),b=(n("3dfb"),n("f674"),n("8e94"),n("7e01")),y=n.n(b),m=n("3ef3"),h=n("2aec"),v=n("6fe4"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("7d8c")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("5ca1"),_=n("38dd"),k=n("f30a"),j=n("45c3"),E=n("26de"),T=n("ae32"),A=n("7082"),S=n.n(A),x=n("5fda"),N=n.n(x),R=n("a287"),C=n("9fc9"),D=n("0977"),I=n("473f"),P=n("0a39"),L=n("e654"),U=n("9882"),M=n("6422"),B=n("5adc"),F=n("6193"),W=n("2e48"),H=n("54b9"),$=n("fc62");function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var G=function(){function e(){q(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}var pe=function(){function e(){le(this,e)}return de(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}var ke=function(){function e(){Oe(this,e)}return _e(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,je,t)}}]),e}(),je=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var Se,xe=function(){function e(){Ee(this,e)}return Ae(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,Ne,t)}}]),e}(),Ne=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Re=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var Ce,De,Ie=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Pe=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ce||(Ce={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(De||(De={}));var Le=n("a62f"),Ue=n("1788"),Me=n.n(Ue),Be=n("4398"),Fe=n("202c"),We=n("cf93"),He=n("3bb1"),$e=n.n(He),qe=n("a32b");function Ve(e){return Ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e){return Xe(e)||Ye(e)||Ze(e)||Ge()}function Ge(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(e){if("string"===typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}function Ye(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xe(e){if(Array.isArray(e))return Qe(e)}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}function tt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function nt(e){var t=ct();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ve(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){var t="function"===typeof Map?new Map:void 0;return ot=function(e){if(null===e||!st(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return it(e,arguments,lt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,e)},ot(e)}function it(e,t,n){return it=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ut(o,n.prototype),o},it.apply(null,arguments)}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function st(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var ft=qe,dt=Le["p"](Le["q"],Le["v"]([Le["q"],Le["l"],Le["d"],Le["k"]])),pt=function(e){tt(n,e);var t=nt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(at(r),n.prototype),r}return et(n,[{key:"code",get:function(){var e,t=this;return null!==(e=$e()(ft,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ot(Error));function bt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?it(pt,Ke(t)):new pt(null!==t&&void 0!==t?t:ft.RDN_ASSERT_ERROR,{condition:e})}var yt=Le["h"]([Le["t"]({name:Le["q"]}),Le["m"]({message:Le["q"],stack:Le["q"],details:dt})]),mt=new Le["a"]("Error",(function(e){return"object"===Ve(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(We["pipe"])(yt.decode(e),Object(Fe["map"])((function(e){return"details"in e?Object.assign(new pt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function ht(e){Be["ThrowReporter"].report(e)}function vt(e,t,n,r){try{var a=e.decode(t);return ht(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new pt(n):o}}function gt(e){return null!=e}var Ot=new Le["a"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){var n,r;if(_["BigNumber"].isBigNumber(e))return Le["r"](e);try{return Le["r"](Object(_["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Le["f"](e,t)}}),(function(e){return e.toString()})),wt=N()((function(e){return Le["e"](Le["q"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),_t=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Le["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),kt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Le["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),jt=wt(65),Et=wt(32),Tt=wt(32),At=wt(32),St=new Le["a"]("Address",(function(e){try{return wt(20).is(e)&&Object(_["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!wt(20).is(e))return Le["f"](e,t);var n;try{n=Object(_["getAddress"])(e)}catch(r){return Le["f"](e,t)}return n?Le["r"](n):Le["f"](e,t)}),Le["g"]),xt=N()((function(e){return Le["s"]([Le["l"],e])}));function Nt(e){return[Date.now(),e]}var Rt=N()((function(e){return Le["h"]([e,Le["n"](Le["t"]({signature:jt}))])})),Ct=N()((function(e){return new Le["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Le["r"](t):Le["f"](t,n)}),Le["g"])})),Dt=n("8590"),It=n("98ad"),Pt=n("6283"),Lt=n("71aa"),Ut=n("64ca"),Mt=n("3a07"),Bt=n("2786"),Ft=n("d515"),Wt=n("6abd"),Ht=n("2f60"),$t=n.n(Ht);function qt(e,t){return Gt(e)||Kt(e,t)||Xt(e,t)||Vt()}function Vt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gt(e){if(Array.isArray(e))return e}function Zt(e){return zt(e)||Qt(e)||Xt(e)||Yt()}function Yt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xt(e,t){if(e){if("string"===typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}function Qt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function zt(e){if(Array.isArray(e))return Jt(e)}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var en=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function tn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if("string"===typeof t||Array.isArray(t))return Object(It["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var a=[];return Object(P["a"])((function(){var t,n=e._lastBlockNumber,r=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1;return a.push(r),tn(e,"block")})).pipe(Object(Ut["a"])(Math.ceil(e.pollingInterval/10)),Object(Mt["a"])((function(n){return Object(P["a"])((function(){return e.getLogs(Object.assign(Object.assign({},t),{fromBlock:a[0],toBlock:n}))})).pipe(Object(W["a"])((function(e){a.length>=r&&a.shift(),a.push(n+1);var t=Math.max.apply(Math,[0].concat(Zt(e.map((function(e){return e.blockNumber})).filter(gt))))+1;return a[0]<=t&&a.splice(0,a.filter((function(e){return e<=t})).length,t),Object(Pt["a"])(e)})),Object(Bt["a"])((function(){return L["a"]})))})))}function nn(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=Object.assign(Object.assign(Object.assign({},t),n),{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Zt(r),[a])}};return void 0!==t?n(t):n}function rn(e,t,n){var r=e.provider,a=L["a"],o=Object(D["a"])(-1);n&&(o=Object(P["a"])((function(){return r.blockNumber?Object(D["a"])(r.blockNumber):tn(r,"block").pipe(Object(F["a"])(),Object(M["a"])((function(){return r.blockNumber})),Object(Ft["a"])())})),a=Object(Lt["a"])(n,o).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=qt(e,2),a=n[0],o=n[1];return Object(Pt["a"])(t).pipe(Object(W["a"])((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})),Object(W["a"])(Pt["a"]),Object(Wt["a"])(),Object(W["a"])((function(e){return Object(Pt["a"])($t()(e,["blockNumber"]))})))})),Object(M["a"])(nn(e)),Object(B["a"])(gt)));var i=o.pipe(Object(W["a"])((function(){return Object(Pt["a"])(t)})),Object(W["a"])((function(e){return tn(r,e)})),Object(M["a"])(nn(e)),Object(B["a"])(gt));return Object(I["a"])(a,i)}function an(e){return en(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Dt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function on(e){var t=e.send;e.send=function(n,r){return en(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function cn(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var sn,un=Le["n"](Le["p"](Le["q"],Le["b"]));function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fn=Le["t"]({urls:Le["v"]([Le["q"],Le["c"](Le["q"])])}),dn=Le["n"](Le["h"]([Le["t"]({matrixServerLookup:Le["q"],revealTimeout:Le["l"],settleTimeout:Le["l"],httpTimeout:Le["l"],discoveryRoom:Le["v"]([Le["q"],Le["k"]]),pfsRoom:Le["v"]([Le["q"],Le["k"]]),monitoringRoom:Le["v"]([Le["q"],Le["k"]]),pfs:Le["v"]([St,Le["q"],Le["k"]]),pfsSafetyMargin:Le["l"],matrixExcessRooms:Le["l"],confirmationBlocks:Le["l"],monitoringReward:Le["v"]([Le["k"],kt(32)]),logger:Le["i"]((sn={},ln(sn,"",null),ln(sn,"trace",null),ln(sn,"debug",null),ln(sn,"info",null),ln(sn,"warn",null),ln(sn,"error",null),sn)),caps:Le["v"]([Le["k"],un]),fallbackIceServers:Le["c"](fn),rateToSvt:Le["p"](Le["q"],kt(32))}),Le["m"]({matrixServer:Le["q"],subkey:Le["d"]})])),pn=Le["n"](Le["m"](Object.assign(Object.assign({},dn.type.types["0"].props),dn.type.types["1"].props)));function bn(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(cn(r),"_discovery"),pfsRoom:"raiden_".concat(cn(r),"_path_finding"),monitoringRoom:"raiden_".concat(cn(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},ln(n,De.NO_DELIVERY,!0),ln(n,De.NO_MEDIATE,!0),ln(n,De.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var yn=n("5dab"),mn=n.n(yn),hn=n("0cb5"),vn=n.n(hn),gn=n("c72f"),On=n.n(gn),wn=n("5000"),_n=n.n(wn);function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e){return Sn(e)||An(e)||Tn(e)||En()}function En(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e,t){if(e){if("string"===typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function An(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Sn(e){if(Array.isArray(e))return xn(e)}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Rn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Cn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Le["t"](Object.assign(Object.assign(Object.assign({type:Le["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Le["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Dn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Le["b"],c=Cn(t,a,e),s=Cn(n,o,e),u=Cn(r,i,e,!0);return{request:c,success:s,failure:u}}function In(e){var t=function(t){return _n()(t.meta,e,(function(e,t){return Ot.is(e)&&Ot.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Pn(e,t){var n=function(n){return Rn([e.success,e.failure],n)&&In(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Ln(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Pn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Un(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Nn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?Ln(e,t):Pn(e,t)),Object(M["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new pt(ft.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function Mn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return bt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(jn(a.map((function(e){return kn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Bn,Fn=Le["q"],Wn=(Le["q"],Le["h"]([Le["t"]({amount:kt(32),expiration:kt(32),secrethash:Et}),Le["m"]({registered:Le["j"](!0)})],"Lock")),Hn=Le["n"](Le["t"]({chainId:kt(32),tokenNetworkAddress:St,channelId:kt(32),nonce:kt(8),transferredAmount:kt(32),lockedAmount:kt(32),locksroot:Et,additionalHash:Et})),$n=Hn,qn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Pe,additionalHash:k["HashZero"],signature:Ie},Vn=Le["t"]({tokenNetwork:St,partner:St}),Kn=Cn("block/new",Le["t"]({blockNumber:Le["l"]})),Gn=Cn("token/monitored",Le["h"]([Le["t"]({token:St,tokenNetwork:St}),Le["m"]({fromBlock:Le["l"],toBlock:Le["l"]})])),Zn=Dn(Vn,"channel/open/request","channel/open/success","channel/open/failed",Le["m"]({settleTimeout:Le["l"],subkey:Le["d"],deposit:kt(32)}),Le["t"]({id:Le["l"],token:St,settleTimeout:Le["l"],isFirstParticipant:Le["d"],txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),Yn=Cn("channel/monitored",Le["t"]({id:Le["l"]}),Vn),Xn=Dn(Vn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Le["h"]([Le["t"]({deposit:kt(32)}),Le["m"]({subkey:Le["d"]})]),Le["t"]({id:Le["l"],participant:St,totalDeposit:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),Qn=Cn("channel/withdraw/success",Le["t"]({id:Le["l"],participant:St,totalWithdraw:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),Vn),zn=Dn(Vn,"channel/close/request","channel/close/success","channel/close/failure",Le["v"]([Le["m"]({subkey:Le["d"]}),Le["u"]]),Le["t"]({id:Le["l"],participant:St,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),Jn=Cn("channel/settleable",Le["t"]({settleableBlock:Le["l"]}),Vn),er=Dn(Vn,"channel/settle/request","channel/settle/success","channel/settle/failure",Le["v"]([Le["m"]({subkey:Le["d"]}),Le["u"]]),Le["h"]([Le["t"]({id:Le["l"],txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),Le["m"]({locks:Le["o"](Wn)})])),tr=Le["n"](Le["t"]({userId:Le["q"],accessToken:Le["q"],deviceId:Le["q"],displayName:Le["q"]})),nr=Le["t"]({address:St}),rr=Cn("matrix/setup",Le["t"]({server:Le["q"],setup:tr})),ar=Dn(nr,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Le["h"]([Le["t"]({userId:Le["q"],available:Le["d"],ts:Le["l"]}),Le["m"]({caps:Le["p"](Le["q"],Le["b"])})])),or=Cn("matrix/room",Le["t"]({roomId:Le["q"]}),nr),ir=Cn("matrix/room/leave",Le["t"]({roomId:Le["q"]}),nr),cr=Cn("rtc/channel",Le["v"]([Le["u"],Ct(RTCDataChannel)]),nr);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Bn||(Bn={}));var sr,ur=Le["n"](Le["t"]({message_identifier:kt(8)})),lr=Le["n"](Le["t"]({type:Le["j"](Bn.DELIVERED),delivered_message_identifier:kt(8)})),fr=lr,dr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.PROCESSED)}),ur])),pr=dr,br=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.SECRET_REQUEST),payment_identifier:kt(8),secrethash:Et,amount:kt(32),expiration:kt(32)}),ur])),yr=br,mr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.SECRET_REVEAL),secret:Tt}),ur])),hr=mr,vr=Le["n"](Le["h"]([Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),transferred_amount:kt(32),locked_amount:kt(32),locksroot:Et}),ur])),gr=Le["n"](Le["t"]({route:Le["o"](St)})),Or=gr,wr=Le["n"](Le["t"]({routes:Le["o"](Or)})),_r=wr,kr=Le["n"](Le["h"]([Le["t"]({payment_identifier:kt(8),token:St,recipient:St,lock:Wn,target:St,initiator:St,metadata:_r}),vr])),jr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.LOCKED_TRANSFER)}),kr])),Er=jr,Tr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.REFUND_TRANSFER)}),kr])),Ar=Tr,Sr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.UNLOCK),payment_identifier:kt(8),secret:Tt}),vr])),xr=Sr,Nr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.LOCK_EXPIRED),recipient:St,secrethash:Et}),vr])),Rr=Nr,Cr=Le["n"](Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),participant:St,total_withdraw:kt(32),nonce:kt(8),expiration:kt(32)})),Dr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.WITHDRAW_REQUEST)}),Cr,ur])),Ir=Dr,Pr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.WITHDRAW_CONFIRMATION)}),Cr,ur])),Lr=Pr,Ur=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Bn.WITHDRAW_EXPIRED)}),Cr,ur])),Mr=Ur,Br=Le["n"](Le["t"]({type:Le["j"](Bn.PFS_CAPACITY_UPDATE),canonical_identifier:Le["n"](Le["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,other_participant:St,updating_nonce:kt(8),other_nonce:kt(8),updating_capacity:kt(32),other_capacity:kt(32),reveal_timeout:kt(32)})),Fr=Br,Wr=Le["n"](Le["t"]({type:Le["j"](Bn.PFS_FEE_UPDATE),canonical_identifier:Le["n"](Le["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,timestamp:Le["q"],fee_schedule:Le["t"]({cap_fees:Le["d"],imbalance_penalty:Le["v"]([Le["k"],Le["c"](Le["s"]([kt(32),_t(32)]))]),proportional:_t(32),flat:_t(32)})})),Hr=Wr,$r=Le["n"](Le["t"]({type:Le["j"](Bn.MONITOR_REQUEST),balance_proof:Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),balance_hash:Et,additional_hash:Et,signature:jt}),monitoring_service_contract_address:St,non_closing_participant:St,non_closing_signature:jt,reward_amount:kt(32)})),qr=$r,Vr=[fr,pr,yr,hr,Er,Ar,xr,Rr,Ir,Lr,Mr,Fr,Hr,qr],Kr=Le["v"]([].concat(Vr)),Gr=Dn(Le["t"]({address:St,msgId:Le["q"]}),"message/send/request","message/send/success","message/send/failure",Le["t"]({message:Le["v"]([Le["q"],Rt(Kr)])}),void 0),Zr=Cn("message/global/send",Le["t"]({message:Le["v"]([Le["q"],Rt(Kr)])}),Le["t"]({roomName:Le["q"]})),Yr=Cn("message/received",Le["h"]([Le["t"]({text:Le["q"],ts:Le["l"]}),Le["m"]({message:Le["v"]([Kr,Rt(Kr)]),userId:Le["q"],roomId:Le["q"]})]),Le["t"]({address:St})),Xr=n("48f2"),Qr=n.n(Xr),zr=Le["n"](Le["h"]([Le["t"]({result:Le["c"](Le["n"](Le["t"]({path:Le["o"](St),estimated_fee:_t(32)})))}),Le["m"]({feedback_token:Le["q"]})])),Jr=Le["c"](Le["n"](Le["t"]({path:Le["o"](St),fee:_t(32)}))),ea=Le["n"](Le["t"]({address:St,url:Le["q"],rtt:Le["l"],price:kt(32),token:St})),ta=Le["n"](Le["t"]({sender:St,receiver:St,amount:kt(32),expiration_block:kt(32),one_to_n_address:St,chain_id:kt(32)})),na=Le["n"](Le["t"]({last_iou:Rt(ta)})),ra={SENT:"sent",RECEIVED:"received"},aa=Le["n"](Le["h"]([Le["t"]({transfer:xt(Rt(Er)),fee:_t(32),partner:St}),Le["m"]({secret:xt(Le["t"]({value:Tt,registerBlock:Le["l"]})),transferProcessed:xt(Rt(pr)),refund:xt(Rt(Ar)),channelClosed:xt(Et),secretRequest:xt(Rt(yr)),secretReveal:xt(Rt(hr)),unlock:xt(Rt(xr)),lockExpired:xt(Rt(Rr)),unlockProcessed:xt(Rt(pr)),lockExpiredProcessed:xt(Rt(pr))})])),oa=aa,ia=Le["n"](Le["p"](Le["q"],oa));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(sr||(sr={}));var ca=Le["i"](Qr()(ra)),sa=Le["t"]({secrethash:Et,direction:ca}),ua=Dn(sa,"transfer/request","transfer/success","transfer/failure",Le["h"]([Le["t"]({tokenNetwork:St,target:St,value:kt(32),paths:Jr,paymentId:kt(8)}),Le["m"]({secret:Tt,expiration:Le["l"],initiator:St})]),Le["m"]({balanceProof:Rt($n)})),la=Cn("transfer/signed",Le["t"]({message:Rt(Er),fee:_t(32),partner:St}),sa),fa=Cn("transfer/processed",Le["t"]({message:Rt(pr)}),sa),da=Cn("transfer/secret",Le["t"]({secret:Tt}),sa),pa=Dn(sa,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Le["h"]([Le["t"]({secret:Tt}),Le["m"]({subkey:Le["d"]})]),Le["t"]({secret:Tt,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),ba=Cn("transfer/secret/request",Le["t"]({message:Rt(yr)}),sa),ya=Cn("transfer/secret/reveal",Le["t"]({message:Rt(hr)}),sa),ma=Dn(sa,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Le["t"]({message:Rt(xr),partner:St})),ha=Cn("transfer/unlock/processed",Le["t"]({message:Rt(pr)}),sa),va=Dn(sa,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Le["t"]({message:Rt(Rr),partner:St})),ga=Cn("transfer/expire/processed",Le["t"]({message:Rt(pr)}),sa),Oa=Cn("transfer/refunded",Le["t"]({message:Rt(Ar),partner:St}),sa),wa=Le["t"]({direction:ca,tokenNetwork:St,partner:St,totalWithdraw:kt(32),expiration:Le["l"]}),_a=Dn(wa,"withdraw/request","withdraw/success","withdraw/failure",Le["u"],Le["t"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),ka=Dn(wa,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Le["t"]({message:Rt(Ir)}),Le["t"]({message:Rt(Lr)})),ja=Dn(wa,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Le["u"],Le["t"]({message:Rt(Mr)})),Ea=Cn("withdraw/completed",Le["u"],wa),Ta=Le["t"]({tokenNetwork:St,target:St,value:kt(32)}),Aa=Le["t"]({tokenNetwork:St,serviceAddress:St}),Sa=Dn(Ta,"path/find/request","path/find/success","path/find/failure",Le["m"]({paths:Jr,pfs:Le["v"]([ea,Le["k"]])}),Le["t"]({paths:Jr})),xa=Cn("pfs/list/updated",Le["t"]({pfsList:Le["o"](St)})),Na=Cn("iou/persist",Le["t"]({iou:Rt(ta)}),Aa),Ra=Cn("iou/clear",void 0,Aa),Ca=Cn("udc/deposited",kt(32)),Da=Le["t"]({amount:kt(32)}),Ia=Dn(Da,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Le["u"],Le["h"]([Le["t"]({block:Le["l"]}),Le["m"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})])),Pa=Cn("udc/withdrawn",Le["t"]({withdrawal:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),Da),La=Cn("ms/balanceProof/sent",Le["t"]({tokenNetwork:St,partner:St,id:Le["l"],reward:kt(32),nonce:kt(8),monitoringService:St,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}));function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ma=Cn("raiden/shutdown",Le["t"]({reason:Le["v"]([Le["j"](Ce.STOP),Le["j"](Ce.ACCOUNT_CHANGED),Le["j"](Ce.NETWORK_CHANGED),mt])})),Ba=Cn("raiden/config/update",pn),Fa=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:Ma,raidenConfigUpdate:Ba},r),a),o),i),c),Wa=[Fa.raidenShutdown,Fa.newBlock,Fa.matrixPresence.success,Fa.tokenMonitored,Fa.udcWithdrawn,Fa.udcWithdraw.failure,Fa.msBalanceProofSent,Fa.channelSettle.success,Fa.channelSettle.failure],Ha=On()(Fa,(function(e,t){return Object.assign(Object.assign({},e),"type"in t?Ua({},t.type,t):mn()(t,vn()("type")))}),{}),$a=Le["n"](Le["t"]({type:Le["q"],payload:Le["n"](Le["t"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}))})),qa=new Le["a"]("ConfirmableAction",$a.is,(function(e,t){return Fe["either"].chain($a.validate(e,t),(function(e){var n=e.type;return n in Ha?Ha[n].codec.validate(e,t):Le["f"](e,t)}))}),(function(e){return Ha[e.type].codec.encode(e)}));function Va(e){return Object.assign(Object.assign({},e),{version:0})}function Ka(e,t){return Qa(e)||Xa(e,t)||Za(e,t)||Ga()}function Ga(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Za(e,t){if(e){if("string"===typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ya(e,t):void 0}}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qa(e){if(Array.isArray(e))return e}function za(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=Ka(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function Ja(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var eo=n("77a9"),to=n("2cb6"),no=n("70de");function ro(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ao(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(eo["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(eo["isArrayish"])(e)&&(e=Object(eo["hexlify"])(e)),Ot.is(e)){if(e.lt(0))throw new pt(ft.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new pt(ft.DTA_NUMBER_TOO_LARGE);n=Object(eo["hexZeroPad"])(Object(eo["hexlify"])(e),t)}else{if("string"!==typeof e)throw new pt(ft.DTA_UNENCODABLE_DATA);if(Object(eo["hexDataLength"])(e)!==t)throw new pt(ft.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var oo,io=function(e){return null!=e&&e["isLosslessNumber"]};function co(e){return no["parse"](e,(function(e,t){if(ro(e),io(t))try{return t.valueOf()}catch(n){return Object(_["bigNumberify"])(t.toString())}return t}))}function so(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return ro(e),_["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return no["stringify"](e,t,n)}function uo(e){return uo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fo,po,bo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},yo=(oo={},lo(oo,Bn.DELIVERED,12),lo(oo,Bn.PROCESSED,0),lo(oo,Bn.SECRET_REQUEST,3),lo(oo,Bn.SECRET_REVEAL,11),lo(oo,Bn.LOCKED_TRANSFER,7),lo(oo,Bn.REFUND_TRANSFER,8),lo(oo,Bn.UNLOCK,4),lo(oo,Bn.LOCK_EXPIRED,13),lo(oo,Bn.WITHDRAW_REQUEST,15),lo(oo,Bn.WITHDRAW_CONFIRMATION,16),lo(oo,Bn.WITHDRAW_EXPIRED,17),lo(oo,Bn.PFS_CAPACITY_UPDATE,-1),lo(oo,Bn.PFS_FEE_UPDATE,-1),lo(oo,Bn.MONITOR_REQUEST,-1),oo);function mo(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function ho(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Pe)?k["HashZero"]:Object(_["keccak256"])(Object(eo["concat"])([ao(t,32),ao(n,32),ao(r,32)]))}function vo(e){switch(e.type){case Bn.LOCKED_TRANSFER:case Bn.REFUND_TRANSFER:var t=Object(eo["concat"])([ao(yo[e.type],1),ao(e.message_identifier,8),ao(e.payment_identifier,8),ao(e.lock.expiration,32),ao(e.token,20),ao(e.recipient,20),ao(e.target,20),ao(e.initiator,20),ao(e.lock.secrethash,32),ao(e.lock.amount,32)]);return e.type===Bn.LOCKED_TRANSFER&&(t=Object(eo["concat"])([t,mo(e.metadata)])),Object(_["keccak256"])(t);case Bn.UNLOCK:return Object(_["keccak256"])(Object(eo["concat"])([ao(yo[e.type],1),ao(e.message_identifier,8),ao(e.payment_identifier,8),ao(e.secret,32)]));case Bn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(eo["concat"])([ao(yo[e.type],1),ao(e.message_identifier,8),ao(e.recipient,20),ao(e.secrethash,32)]))}}function go(e){var t;switch(e.type){case Bn.DELIVERED:return Object(eo["hexlify"])(Object(eo["concat"])([ao(yo[e.type],1),ao(0,3),ao(e.delivered_message_identifier,8)]));case Bn.PROCESSED:return Object(eo["hexlify"])(Object(eo["concat"])([ao(yo[e.type],1),ao(0,3),ao(e.message_identifier,8)]));case Bn.LOCKED_TRANSFER:case Bn.REFUND_TRANSFER:case Bn.UNLOCK:case Bn.LOCK_EXPIRED:var n=vo(e),r=ho({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(eo["hexlify"])(Object(eo["concat"])([ao(e.token_network_address,20),ao(e.chain_id,32),ao(fo.BALANCE_PROOF,32),ao(e.channel_identifier,32),ao(r,32),ao(e.nonce,32),ao(n,32)]));case Bn.SECRET_REQUEST:return Object(eo["hexlify"])(Object(eo["concat"])([ao(yo[e.type],1),ao(0,3),ao(e.message_identifier,8),ao(e.payment_identifier,8),ao(e.secrethash,32),ao(e.amount,32),ao(e.expiration,32)]));case Bn.SECRET_REVEAL:return Object(eo["hexlify"])(Object(eo["concat"])([ao(yo[e.type],1),ao(0,3),ao(e.message_identifier,8),ao(e.secret,32)]));case Bn.WITHDRAW_REQUEST:case Bn.WITHDRAW_CONFIRMATION:return Object(eo["hexlify"])(Object(eo["concat"])([ao(e.token_network_address,20),ao(e.chain_id,32),ao(fo.WITHDRAW,32),ao(e.channel_identifier,32),ao(e.participant,20),ao(e.total_withdraw,32),ao(e.expiration,32)]));case Bn.WITHDRAW_EXPIRED:return Object(eo["hexlify"])(Object(eo["concat"])([ao(yo[e.type],1),ao(0,3),ao(e.nonce,32),ao(e.message_identifier,8),ao(e.token_network_address,20),ao(e.chain_id,32),ao(fo.WITHDRAW,32),ao(e.channel_identifier,32),ao(e.participant,20),ao(e.total_withdraw,32),ao(e.expiration,32)]));case Bn.PFS_CAPACITY_UPDATE:return Object(eo["hexlify"])(Object(eo["concat"])([ao(e.canonical_identifier.chain_identifier,32),ao(e.canonical_identifier.token_network_address,20),ao(e.canonical_identifier.channel_identifier,32),ao(e.updating_participant,20),ao(e.other_participant,20),ao(e.updating_nonce,8),ao(e.other_nonce,8),ao(e.updating_capacity,32),ao(e.other_capacity,32),ao(e.reveal_timeout,32)]));case Bn.PFS_FEE_UPDATE:return Object(eo["hexlify"])(Object(eo["concat"])([ao(e.canonical_identifier.chain_identifier,32),ao(e.canonical_identifier.token_network_address,20),ao(e.canonical_identifier.channel_identifier,32),ao(e.updating_participant,20),ao(e.fee_schedule.cap_fees,1),ao(e.fee_schedule.flat,32),ao(e.fee_schedule.proportional,32),Object(to["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),ao(e.timestamp,19)]));case Bn.MONITOR_REQUEST:return Object(eo["hexlify"])(Object(eo["concat"])([ao(e.monitoring_service_contract_address,20),ao(e.balance_proof.chain_id,32),ao(fo.MS_REWARD,32),ao(e.balance_proof.token_network_address,20),ao(e.non_closing_participant,20),ao(e.non_closing_signature,65),ao(e.reward_amount,32)]))}}function Oo(e){return jt.is(e.signature)}function wo(e){return Object(_["verifyMessage"])(Object(eo["arrayify"])(go(e)),e.signature)}function _o(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:vo(e),signature:e.signature}}function ko(e){return so("signature"in e?Rt(Kr).encode(e):Kr.encode(e))}function jo(e){var t=co(e);return bt(t&&"object"===uo(t)&&"type"in t&&Object.values(Bn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),vt("signature"in t?Rt(Kr):Kr,t)}function Eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return bo(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Oo(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(eo["arrayify"])(go(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function To(e){return function(t){return Yr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(fo||(fo={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(po||(po={}));var Ao=Le["n"](Le["t"]({address:St,deposit:kt(32),withdraw:kt(32),locks:Le["o"](Wn),balanceProof:Rt($n),pendingWithdraws:Le["o"](Le["v"]([Rt(Ir),Rt(Lr),Rt(Mr)])),nextNonce:kt(8)})),So=Ao,xo=Le["h"]([Le["n"](Le["t"]({id:Le["l"],token:St,tokenNetwork:St,settleTimeout:Le["l"],isFirstParticipant:Le["d"],openBlock:Le["l"],own:So,partner:So})),Le["v"]([Le["n"](Le["t"]({state:Le["v"]([Le["j"](po.open),Le["j"](po.closing)])})),Le["h"]([Le["n"](Le["t"]({closeBlock:Le["l"],closeParticipant:St})),Le["v"]([Le["n"](Le["t"]({state:Le["v"]([Le["j"](po.closed),Le["j"](po.settleable),Le["j"](po.settling)])})),Le["n"](Le["t"]({state:Le["j"](po.settled),settleBlock:Le["l"]}))])])])]);function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t){return Lo(e)||Po(e,t)||Do(e,t)||Co()}function Co(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Do(e,t){if(e){if("string"===typeof e)return Io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Io(e,t):void 0}}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Po(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Lo(e){if(Array.isArray(e))return e}function Uo(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Ro(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:qn,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function Mo(e){for(var t,n={},r=function(){for(var t=Ro(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=Ro(s[c],2),l=u[0],f=u[1];Uo(f,{own:e.address,partner:l});var d=$e()(e.tokens,(function(e){return e===r}));Object.assign(f,{token:d,tokenNetwork:r}),Object.assign(n,No({},"".concat(l,"@").concat(r),f))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function Bo(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Fo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Fo(e,t){if(e){if("string"===typeof e)return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ho(e){var t,n=Bo(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(_["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}function $o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function qo(e,t){if(e){if("string"===typeof e)return Vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vo(e,t):void 0}}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ko(e){var t,n=$o(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{pendingWithdraws:r[i].withdrawRequests}),delete r[i].withdrawRequests}}catch(c){n.e(c)}finally{n.f()}return e}var Go=[Va,za,Ja,Mo,Ho,Ko],Zo=Go.length-1;function Yo(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Go[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var Xo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Qo=Le["n"](Le["t"]({address:St,version:Le["j"](Zo),chainId:Le["l"],registry:St,blockNumber:Le["l"],config:pn,channels:Le["n"](Le["p"](Fn,xo)),oldChannels:Le["n"](Le["p"](Le["q"],xo)),tokens:Le["n"](Le["p"](Le["q"],St)),transport:Le["n"](Le["m"]({server:Le["q"],setup:tr,rooms:Le["n"](Le["p"](Le["q"],Le["c"](Le["q"])))})),sent:ia,received:ia,iou:Le["n"](Le["p"](Le["q"],Le["p"](Le["q"],Rt(ta)))),pendingTxs:Le["o"](qa)})),zo=Qo;function Jo(e){return so(zo.encode(e),void 0,2)}function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=co(e));var r=Yo(e,Zo,{log:n});try{return vt(zo,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function ti(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({address:n,version:Zo,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var ni=ti({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0},OneToN:{address:k["AddressZero"],block_number:0}}}),ri=function(e){return e&&"function"===typeof e.getItem},ai=function(e,t,n,r,a){return Xo(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,f,d,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),ri(r)?(u=r,l=void 0):ri(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),f=void 0,l&&(f=ei(l,{log:i})),!u){o.next=23;break}return d="raiden_".concat(cn(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(d);case 8:if(b=o.sent,!b){o.next=20;break}if(m=ei(b,{log:i}),!f){o.next=19;break}if(!(f.blockNumber<m.blockNumber)){o.next=16;break}throw new pt(ft.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:f.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(f.blockNumber));case 17:o.next=20;break;case 19:f=m;case 20:h=Me()((function(e){u.setItem(d,Jo(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return f||(f=ti({network:e,address:n,contractsInfo:t})),v=bn({network:e},a),o.abrupt("return",{state:f,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},oi=n("07ae"),ii=n.n(oi);function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function si(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),ci({},o,s)))}}return r}}var ui=n("6758"),li=n("676b"),fi=n("7a2d"),di=n("58ce"),pi=n("578c"),bi=n("6973"),yi=n("5ac0"),mi=n("cf70");function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vi(e,t){return ki(e)||_i(e,t)||Oi(e,t)||gi()}function gi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oi(e,t){if(e){if("string"===typeof e)return wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(e,t):void 0}}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _i(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ki(e){if(Array.isArray(e))return e}function ji(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(H["a"].apply(void 0,t),Object(pi["a"])())}}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(pi["a"])(),Object(W["a"])((function(e){return Object(di["a"])(e)})),Object(bi["a"])((function(t,n){var r=t.acc,a=vi(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),hi({},o,i)),changed:[o,i]}}),{acc:{}}),Object(H["a"])("changed"),Object(B["a"])(gt))}}function Ti(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(yi["a"])((function(e){return e.pipe(Object(mi["a"])(t))})),Object(fi["a"])(e))}}function Ai(e,t){return Ni(e)||xi(e,t)||Di(e,t)||Si()}function Si(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ni(e){if(Array.isArray(e))return e}function Ri(e){return Pi(e)||Ii(e)||Di(e)||Ci()}function Ci(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Di(e,t){if(e){if("string"===typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Li(e,t):void 0}}function Ii(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Pi(e){if(Array.isArray(e))return Li(e)}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ui(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Mi(e){return"".concat(e.id,"#").concat(Ui(e))}function Bi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function Fi(e){if(e.state!==po.open)return{ownDeposit:k["Zero"],ownWithdraw:k["Zero"],ownTransferred:k["Zero"],ownLocked:k["Zero"],ownBalance:k["Zero"],ownCapacity:k["Zero"],ownOnchainUnlocked:k["Zero"],ownUnlocked:k["Zero"],ownTotalWithdrawable:k["Zero"],ownWithdrawable:k["Zero"],partnerDeposit:k["Zero"],partnerWithdraw:k["Zero"],partnerTransferred:k["Zero"],partnerLocked:k["Zero"],partnerBalance:k["Zero"],partnerCapacity:k["Zero"],partnerOnchainUnlocked:k["Zero"],partnerUnlocked:k["Zero"],partnerTotalWithdrawable:k["Zero"],partnerWithdrawable:k["Zero"]};var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),f=s.sub(c),d=c.sub(s),p=Bi.apply(void 0,[t].concat(Ri(e.own.pendingWithdraws.filter((function(e){return e.type===Bn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Bi.apply(void 0,[n].concat(Ri(e.partner.pendingWithdraws.filter((function(e){return e.type===Bn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(p).sub(u).add(f),m=e.partner.deposit.sub(b).sub(l).add(d),h=e.own.deposit.add(f).sub(u),v=h.sub(t),g=e.partner.deposit.add(d).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:f,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:d,partnerCapacity:m,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:h,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Wi(e,t,n){var r=n.log;return function(n){return n.pipe(Object(ui["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object(W["a"])((function(e){return e.wait()})),Object(M["a"])((function(n){var a,o,i;if(!n.status||!n.transactionHash||!n.blockNumber)throw new pt(t,{status:null!==(a=n.status)&&void 0!==a?a:null,transactionHash:null!==(o=n.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=n.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(n.transactionHash,'" successfuly mined!')),n})))}}function Hi(e){return e.pipe(Object(H["a"])("channels"),Ei(),Object(H["a"])(1),Object(li["a"])(Mi,void 0,void 0,(function(){return new R["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=Ai(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(fi["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function $i(e){return $i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i(e)}function qi(e,t){return Gi(e)||Ki(e,t)||Xi(e,t)||Vi()}function Vi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ki(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gi(e){if(Array.isArray(e))return e}function Zi(e){return zi(e)||Qi(e)||Xi(e)||Yi()}function Yi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xi(e,t){if(e){if("string"===typeof e)return Ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(e,t):void 0}}function Qi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function zi(e){if(Array.isArray(e))return Ji(e)}function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ec(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tc(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var nc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},rc=Mn(ni.blockNumber).handle(Kn,(function(e,t){tc(e);var n=t.payload;return n.blockNumber})),ac=Mn(ni.tokens).handle(Gn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:Object.assign(Object.assign({},e),ec({},r,a))})),oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(qa.is(t)){if(void 0===t.payload.confirmed)return[].concat(Zi(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},ic={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:qn,pendingWithdraws:[],nextNonce:k["One"]};function cc(e,t){var n,r,a=Ui(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:po.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},ic),{address:e.address}),partner:Object.assign(Object.assign({},ic),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},a,i))})}function sc(e,t){var n;if(!t.payload.confirmed)return e;var r=Ui(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==po.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Qn.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=qi(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),ec({},o,Object.assign(Object.assign({},a[o]),(n={},ec(n,s,u),ec(n,"pendingWithdraws",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},r,a))}))}function uc(e,t){var n=Ui(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===po.open)r=Object.assign(Object.assign({},r),{state:po.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:po.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},n,r))})}function lc(e,t){var n=Ui(t.meta),r=e.channels[n];if(!r)return e;if(zn.request.is(t)&&r.state===po.open)r=Object.assign(Object.assign({},r),{state:po.closing});else if(er.request.is(t)&&r.state===po.settleable)r=Object.assign(Object.assign({},r),{state:po.settling});else{if(!Jn.is(t)||r.state!==po.closed)return e;r=Object.assign(Object.assign({},r),{state:po.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},n,r))})}function fc(e,t){var n=Ui(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==po.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},n,Object.assign(Object.assign({},r),{state:po.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],nc(a,["symbol"===$i(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),ec({},Mi(r),Object.assign(Object.assign({},r),{state:po.settled,settleBlock:t.payload.txBlock})))})}return e}function dc(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=Ui({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===ra.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),ec({},a,Object.assign(Object.assign({},e.channels[a]),ec({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var pc=Mn(ni).handle(Zn.success,cc).handle([Xn.success,Qn],sc).handle([zn.request,Jn,er.request],lc).handle(zn.success,uc).handle(er.success,fc).handle(pa.success,dc),bc=si({blockNumber:rc,tokens:ac,pendingTxs:oc},ni),yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni,t=arguments.length>1?arguments[1]:void 0;return[bc,pc].reduce((function(e,n){return n(e,t)}),e)},mc=yc;function hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vc(e){return _c(e)||wc(e)||Oc(e)||gc()}function gc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oc(e,t){if(e){if("string"===typeof e)return kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kc(e,t):void 0}}function wc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _c(e){if(Array.isArray(e))return kc(e)}function kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jc,Ec=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Tc=Mn(ni.transport).handle(rr,(function(e,t){e.rooms;var n=Ec(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(or,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),hc({},t.meta.address,[t.payload.roomId].concat(vc((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(ir,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),hc({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Ac=si({transport:Tc},ni),Sc=Ac;function xc(e){return Cc(e)||Rc(e)||Pc(e)||Nc()}function Nc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Cc(e){if(Array.isArray(e))return Lc(e)}function Dc(e,t){return Mc(e)||Uc(e,t)||Pc(e,t)||Ic()}function Ic(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pc(e,t){if(e){if("string"===typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mc(e){if(Array.isArray(e))return e}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fc=(jc={},Bc(jc,ra.SENT,"own"),Bc(jc,ra.RECEIVED,"partner"),jc);function Wc(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=pa.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:Nt({value:t.payload.secret,registerBlock:u})})))))),e}function Hc(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Ui({tokenNetwork:a,partner:o}),c=Fc[t.meta.direction],s=e.channels[i];if(la.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==po.open||!n.nonce.eq(s[c].nextNonce))return e;var u=la.is(t)?[[].concat(xc(s[c].locks),[t.payload.message.lock]),{transfer:Nt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),Bc({},ma.success.is(t)?"unlock":"lockExpired",Nt(t.payload.message)))],l=Dc(u,2),f=l[0],d=l[1];return s=Object.assign(Object.assign({},s),Bc({},c,Object.assign(Object.assign({},s[c]),{locks:f,balanceProof:_o(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),Bc({channels:Object.assign(Object.assign({},e.channels),Bc({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},r,d))))}function $c(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:Nt(t.payload.message)}))))):e}function qc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:Nt(t.payload.message)})))))}function Vc(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(fa.is(t))n="transferProcessed";else if(ha.is(t))n="unlockProcessed";else if(ga.is(t))n="lockExpiredProcessed";else{if(!Oa.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),Bc({},n,Nt(t.payload.message)))))))}function Kc(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Dc(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),Bc({},i,Object.assign(Object.assign({},c),{channelClosed:Nt(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,f=Object.entries(u);l<f.length;l++){var d=Dc(f[l],2),p=d[0],b=d[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),Bc({},p,Object.assign(Object.assign({},b),{channelClosed:Nt(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Gc(e,t){var n=t.payload.message,r=Ui(t.meta),a=e.channels[r],o=t.meta.direction===ra.RECEIVED!==ka.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==po.open||!n.nonce.eq(a[o].nextNonce))return e;a=Object.assign(Object.assign({},a),Bc({},o,Object.assign(Object.assign({},a[o]),{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===ra.RECEIVED?"partner":"own",c=[].concat(xc(a[i].pendingWithdraws),[t.payload.message]);return a=Object.assign(Object.assign({},a),Bc({},i,Object.assign(Object.assign({},a[i]),{pendingWithdraws:c}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Bc({},r,a))})}function Zc(e,t){var n=Ui(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==po.open)return e;var a=t.meta.direction===ra.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Object.assign(Object.assign({},r),Bc({},a,Object.assign(Object.assign({},r[a]),{pendingWithdraws:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Bc({},n,r))})}var Yc=Mn(ni).handle([da,pa.success],Wc).handle([la,ma.success,va.success],Hc).handle([fa,ha,ga,Oa],Vc).handle(ba,$c).handle(ya,qc).handle(zn.success,Kc).handle([ka.request,ka.success,ja.success],Gc).handle(Ea,Zc),Xc=Yc;function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zc=Mn(ni.iou).handle(Na,(function(e,t){return Object.assign(Object.assign({},e),Qc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),Qc({},t.meta.serviceAddress,t.payload.iou))))})).handle(Ra,(function(e,t){return ii()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),Jc=si({iou:zc},ni),es=Jc;function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e,t){return cs(e)||is(e,t)||as(e,t)||rs()}function rs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function as(e,t){if(e){if("string"===typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?os(e,t):void 0}}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function is(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cs(e){if(Array.isArray(e))return e}var ss=Mn(ni).handle(Ba,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=ns(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),ts({},c,s)):c in r&&(r=ii()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),us={configReducer:ss,channelsReducer:mc,transportReducer:Sc,transfersReducer:Xc,servicesReducer:es},ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni,t=arguments.length>1?arguments[1]:void 0;return Object.values(us).reduce((function(e,n){return n(e,t)}),e)},fs=n("c3a8"),ds=n("a7df"),ps=n("8b2d"),bs=n.n(ps),ys=n("8265"),ms=n.n(ys);function hs(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Os(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function vs(e,t){return ks(e)||_s(e,t)||Os(e,t)||gs()}function gs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Os(e,t){if(e){if("string"===typeof e)return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _s(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ks(e){if(Array.isArray(e))return e}function js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Es=N()((function(e){return e.pipe(Object(B["a"])(ar.success.is),Object(bi["a"])((function(e,t){return Object.assign(Object.assign({},e),js({},t.meta.address,t))}),{}),Object(Ft["a"])(),Object(fs["a"])({}))}));function Ts(e){return Object.entries(e).filter((function(e){var t=vs(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=vs(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function As(e){var t;if(e){var n={};try{var r,a=hs(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Ss,xs=n("9a82"),Ns=n("1918"),Rs=n("5964"),Cs=n("c456"),Ds=n("02ec"),Is=n("8cbc"),Ps=n("884b4"),Ls=n("b215"),Us=n("87ed"),Ms=n("571d"),Bs=n("3dc8"),Fs=n("0bb0"),Ws=n("73b4"),Hs=n("b104"),$s=n.n(Hs),qs=n("3de0"),Vs=n("7a10");function Ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gs(e,t){return Xs(e)||Ys(e,t)||zs(e,t)||Zs()}function Zs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ys(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xs(e){if(Array.isArray(e))return e}function Qs(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zs(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function zs(e,t){if(e){if("string"===typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(e,t):void 0}}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(e){var t,n=[],r=Qs(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(ao(a.expiration,32),ao(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(eo["concat"])(n))}function tu(e){return Object(_["sha256"])(e)}function nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(eo["hexlify"])(Object(_["randomBytes"])(e))}function ru(){return Object(_["bigNumberify"])(Date.now())}function au(){return Object(_["bigNumberify"])(Date.now())}function ou(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?ra.SENT:ra.RECEIVED}function iu(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(ou(e),":").concat(e.transfer[1].lock.secrethash)}var cu=new RegExp("^(".concat(Object.values(ra).join("|"),"):0x[a-z0-9]{64}$"),"i");function su(e){bt(cu.test(e),"Invalid transferKey format");var t=e.split(":"),n=Gs(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function uu(e){return function(t){return t[e]?t[e][0]:void 0}}var lu=(Ss={},Ks(Ss,sr.expired,uu("lockExpiredProcessed")),Ks(Ss,sr.unlocked,uu("unlockProcessed")),Ks(Ss,sr.expiring,uu("lockExpired")),Ks(Ss,sr.unlocking,uu("unlock")),Ks(Ss,sr.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Ks(Ss,sr.revealed,uu("secretReveal")),Ks(Ss,sr.requested,uu("secretRequest")),Ks(Ss,sr.closed,uu("channelClosed")),Ks(Ss,sr.refunded,uu("refund")),Ks(Ss,sr.received,uu("transferProcessed")),Ks(Ss,sr.pending,uu("transfer")),Ss);function fu(e){for(var t,n,r,a,o,i,c=new Date(e.transfer[0]),s=c,u=sr.pending,l=0,f=Object.entries(lu);l<f.length;l++){var d=Gs(f[l],2),p=d[0],b=d[1],y=b(e);if(void 0!==y){u=p,s=new Date(y);break}}var m=e.transfer[1],h=ou(e),v=m.lock.amount.sub(e.fee),g=e.secretRequest&&e.secretRequest[1].amount.lt(v),O=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(g||e.refund||e.lockExpired||e.channelClosed)&&void 0,w=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:iu(e),secrethash:m.lock.secrethash,direction:h,status:u,initiator:m.initiator,partner:e.partner,target:m.target,metadata:m.metadata,paymentId:m.payment_identifier,chainId:m.chain_id.toNumber(),token:m.token,tokenNetwork:m.token_network_address,channelId:m.channel_identifier,value:v,fee:e.fee,amount:m.lock.amount,expirationBlock:m.lock.expiration.toNumber(),startedAt:c,changedAt:s,success:O,completed:w,secret:null===(i=null===(o=e.secret)||void 0===o?void 0:o[1])||void 0===i?void 0:i.value}}function du(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return qn;var c,s=Qs(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(gt).map(_o).find((function(e){return ho(e)===t}));if(l)return l}}}catch(f){s.e(f)}finally{s.f()}}var pu=n("a0df"),bu=n("31a7"),yu=n("c998"),mu=n("ee79"),hu=n("b4cc"),vu=n("0ff6"),gu=n("4e0b"),Ou=n("1f0b");function wu(e,t){return ju(e)||ku(e,t)||Au(e,t)||_u()}function _u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ku(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ju(e){if(Array.isArray(e))return e}function Eu(e){return xu(e)||Su(e)||Au(e)||Tu()}function Tu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Au(e,t){if(e){if("string"===typeof e)return Nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nu(e,t):void 0}}function Su(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xu(e){if(Array.isArray(e))return Nu(e)}function Nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ru(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cu=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Du=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},bu.contracts),vu.contracts);case"ropsten":return Object.assign(Object.assign({},pu.contracts),hu.contracts);case"goerli":return Object.assign(Object.assign({},yu.contracts),gu.contracts);case"homestead":return Object.assign(Object.assign({},mu.contracts),Ou.contracts);default:throw new pt(ft.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Iu(e,t){var n,r;return Cu(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(cn(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(_["sha256"])(c),u=new Vs["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Pu=function(e,t,n){return Cu(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!qs["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof Vs["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new pt(ft.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!St.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new pt(ft.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!At.is(e)){r.next=37;break}a=new Vs["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new pt(ft.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Iu,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Lu=function(e){return e.pipe(Object(W["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),Ei(),Object(H["a"])(1),Object(M["a"])(fu))},Uu=function(e){return Object.values(e).reduce((function(e,t){var n=Fi(t),r=Object.assign({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Object.assign(Object.assign({},e),Ru({},t.token,Object.assign(Object.assign({},e[t.token]),Ru({},t.partner.address,r))))}),{})};function Mu(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function Bu(e,t){return e.signer===t?e:e.connect(t)}function Fu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Cu(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Eu(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new pt(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,bt(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new pt(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function Wu(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Cu(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(ji("state","blockNumber"),Object(Ls["a"])(a),Object(B["a"])((function(e){var t=wu(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(Mt["a"])((function(e){var t=wu(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new pt(ft.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(gt)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var Hu=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function $u(e,t){return Cu(this,void 0,void 0,p.a.mark((function n(){var r,a,o,i,c,s,u,l,f,d,b;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=ve.connect(t,e),n.next=3,r.msc_address();case 3:return a=n.sent,o=xe.connect(a,e),n.next=7,o.token_network_registry();case 7:return i=n.sent,c=G.connect(i,e),n.next=11,c.secret_registry_address();case 11:return s=n.sent,n.next=14,o.service_registry();case 14:return u=n.sent,n.next=17,e.getLogs(Object.assign(Object.assign({},c.filters.TokenNetworkCreated(null,null)),{fromBlock:1,toBlock:"latest"}));case 17:return l=n.sent,f=l.map((function(e){return e.blockNumber})).filter(gt),d=f.length?Math.min.apply(Math,Eu(f)):0,n.next=22,r.one_to_n_address();case 22:return b=n.sent,n.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:d},ServiceRegistry:{address:u,block_number:d},UserDeposit:{address:t,block_number:d},SecretRegistry:{address:s,block_number:d},MonitoringService:{address:a,block_number:d},OneToN:{address:b,block_number:d}});case 24:case"end":return n.stop()}}),n)})))}function qu(e){return Gu(e)||Ku(e)||Xu(e)||Vu()}function Vu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ku(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Gu(e){if(Array.isArray(e))return Qu(e)}function Zu(e,t){return Ju(e)||zu(e,t)||Xu(e,t)||Yu()}function Yu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xu(e,t){if(e){if("string"===typeof e)return Qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qu(e,t):void 0}}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ju(e){if(Array.isArray(e))return e}function el(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function tl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(P["a"])(e).pipe(Object(Ds["a"])((function(e){return e.pipe(Object(W["a"])((function(e,r){return n(e,r)?Object(xs["a"])(e):Object(Ns["a"])(t)})))})))}var nl=function(e,t,n){el(e),el(t);var r=n.provider;return tl((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object(W["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),tn(r,"block"))})),Object(M["a"])((function(e){return Kn({blockNumber:e})})))},rl=function(e,t,n){el(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Is["a"])(1),Object(B["a"])((function(e){return $s()(e.tokens)})),Object(W["a"])((function(){return tl((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object(W["a"])(Pt["a"]),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object(W["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Rs["a"])(tl((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Pt["a"])),tl((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Pt["a"]))).pipe(Object(Is["a"])(1),Object(Ps["a"])(Gn({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},al=function(e,t,n){el(e),el(t);var r=n.address,a=n.network,o=n.provider;return tl((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object(W["a"])((function(e){return Object(Cs["a"])(o.pollingInterval).pipe(Object(Mt["a"])((function(){return Object(I["a"])(e?tl((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.includes(r)?L["a"]:Object(D["a"])(Ma({reason:Ce.ACCOUNT_CHANGED}))}))):L["a"],tl((function(){return an(o)}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(Ma({reason:Ce.NETWORK_CHANGED})):L["a"]}))))})))})))};function ol(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function il(e,t){var n=Zu(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=ol(s),l=u.openTopic,f=u.depositTopic,d=u.withdrawTopic,p=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Ls["a"])(i),Object(M["a"])((function(e){var t,n,i,c,s=Zu(e,2),u=s[0],y=s[1],m=y.state,h=y.config,v=u[0].toNumber(),g=Object.values(m.channels).find((function(e){return e.tokenNetwork===a&&e.id===v})),O=(null===(t=null===g||void 0===g?void 0:g.partner)||void 0===t?void 0:t.address)||(null===(n=m.pendingTxs.filter(Zn.success.is).find((function(e){return e.payload.id===v})))||void 0===n?void 0:n.meta.partner),w=u[u.length-1],_=null===(i=w.topics)||void 0===i?void 0:i[0],k=w.transactionHash,j=w.blockNumber,E=j+h.confirmationBlocks<=m.blockNumber||void 0;switch(_){case l:var T=Zu(u,4),A=T[1],S=T[2],x=T[3];if((o===A||o===S)&&(!g||v>g.id)){var N=o==A?S:A;c=Zn.success({id:v,token:r,settleTimeout:x.toNumber(),isFirstParticipant:o===A,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:N})}break;case f:var R=Zu(u,3),C=R[1],D=R[2];O&&((null===g||void 0===g?void 0:g.id)!==v||D.gt(g[C===g.partner.address?"partner":"own"].deposit))&&(c=Xn.success({id:v,participant:C,totalDeposit:D,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O}));break;case d:var I=Zu(u,3),P=I[1],L=I[2];O&&((null===g||void 0===g?void 0:g.id)!==v||L.gt(g[P===g.partner.address?"partner":"own"].withdraw))&&(c=Qn({id:v,participant:P,totalWithdraw:L,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O}));break;case p:if(O&&((null===g||void 0===g?void 0:g.id)!==v||!("closeBlock"in g))){var U=Zu(u,2),M=U[1];c=zn.success({id:v,participant:M,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O})}break;case b:(null===g||void 0===g?void 0:g.id)===v&&(c=er.success({id:v,txHash:k,txBlock:j,confirmed:E,locks:g.partner.locks},{tokenNetwork:a,partner:g.partner.address}));break}return c})),Object(B["a"])(gt))}}function cl(e,t,n){var r=Zu(e,2),a=r[0],o=r[1],i=Zu(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,f=n.latest$,d=n.getTokenNetworkContract,p=d(s),b=ol(p),y=b.openTopic;return tl((function(){return Promise.all([l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,u,null,null)),{fromBlock:a,toBlock:o})),l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,null,u,null)),{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Ls["a"])(f),Object(W["a"])((function(e){var t=Zu(e,2),n=Zu(t[0],2),r=n[0],i=n[1],c=t[1].state,f=r.concat(i).map(nn(p)).filter(gt).filter((function(e){var t=Zu(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Ui({tokenNetwork:s,partner:o});return!(Mi({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),d=[].concat(qu(f),qu(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=Zu(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===d.length?L["a"]:tl((function(){return l.getLogs({address:s,topics:[Object.values(ol(p)).filter((function(e){return e!==y})),d],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object(W["a"])((function(e){var t=e.map(nn(p)).filter(gt),n=[].concat(qu(f),qu(t));return Object(Pt["a"])($t()(n,(function(e){return e[e.length-1].blockNumber})))})))})),il([c,s],n))}function sl(e,t){var n=Zu(e,2),r=n[0],a=n[1],o=t.provider,i=t.getTokenNetworkContract,c=t.config$,s=i(a),u={address:a,topics:[Object.values(ol(s))]};return c.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.confirmationBlocks;return tn(o,u,void 0,t)})),Object(M["a"])(nn(s)),Object(B["a"])(gt),il([r,a],t))}var ul=function(e,t,n){return e.pipe(Object(B["a"])(Kn.is),Object(H["a"])("payload","blockNumber"),Object(Us["a"])(1,void 0,(function(e){return t.pipe(Object(H["a"])("tokens"),Ei(),Object(Ls["a"])(t),Object(W["a"])((function(t){var r=Zu(t,2),a=Zu(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number)+1,u=new C["a"];return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(I["a"])(Object(D["a"])(Gn({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),cl([s,e],[o,i],n).pipe(Object(Ms["a"])((function(){return u.next(!0),u.complete()}))),sl([o,i],n).pipe(Object(Bs["a"])((function(){return u}))))})))})))})))},ll=function(e,t){return el(e),t.pipe(Hi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return Yn({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},fl=function(e,t,n,r,a,o){var i=Zu(e,2),c=i[0],s=i[1],u=Zu(t,3),l=u[0],f=u[1],d=u[2],p=a.log;if(!(null===n||void 0===n?void 0:n.gt(k["Zero"])))return L["a"];function b(e,t){var n=4001;return t>=10||(null===e||void 0===e?void 0:e.code)===n}return Object(P["a"])((function(){return Promise.all([c.functions.balanceOf(l),c.functions.allowance(l,s.address)])})).pipe(Object(W["a"])((function(e){var t=Zu(e,2),r=t[0],a=t[1];return bt(r.gte(n),[ft.RDN_INSUFFICIENT_BALANCE,{current:r.toString(),required:n.toString()}]),a.gte(n)?Object(D["a"])(!0):tl((function(){return c.functions.approve(s.address,n,{nonce:o})}),c.provider.pollingInterval,b).pipe(Wi("approve",ft.CNL_APPROVE_TRANSACTION_FAILED,{log:p}))})),Object(Fs["a"])(r),Object(Is["a"])(1),Object(W["a"])((function(e){return s.functions.getChannelParticipantInfo(e,f,d).then((function(t){var n=t[0];return[e,n]}))})),Object(W["a"])((function(e){var t=Zu(e,2),r=t[0],a=t[1];return tl((function(){return s.functions.setTotalDeposit(r,f,a.add(n),d)}),s.provider.pollingInterval,b)})),Wi("setTotalDeposit",ft.CNL_SETTOTALDEPOSIT_FAILED,{log:p}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(Xn.failure(e,{tokenNetwork:s.address,partner:d}))})))},dl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Rn(Zn.request)),Object(Ls["a"])(t,u),Object(W["a"])((function(t){var n,u,l=Zu(t,3),f=l[0],d=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,m=f.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=d.channels[Ui(f.meta)])||void 0===n?void 0:n.state;if(g)return Object(D["a"])(Zn.failure(new pt(ft.CNL_INVALID_STATE,{state:g}),f.meta));var O=Mu({signer:a,address:o,main:i},null!==(u=f.payload.subkey)&&void 0!==u?u:y),w=O.signer,_=O.address,k=Bu(s(h),w),j=$e()(d.tokens,(function(e){return e===h})),E=Bu(c(j),w);return e.pipe(Object(B["a"])(Zn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(H["a"])("payload","id"),Object(Us["a"])(1,void 0,(function(e){return Object(P["a"])((function(){var e;return k.functions.openChannel(o,v,null!==(e=f.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object(W["a"])((function(t){return Object(I["a"])(Object(D["a"])(t).pipe(Wi("openChannel",ft.CNL_OPENCHANNEL_FAILED,{log:r}),Object(Ws["a"])()),fl([E,k],[_,o,v],f.payload.deposit,e,{log:r},t.nonce+1))})),Object(Bt["a"])((function(e){return Object(D["a"])(Zn.failure(e,f.meta))})))})))})))},pl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Rn(Xn.request)),Object(Ls["a"])(t,u),Object(W["a"])((function(e){var t,n=Zu(e,3),u=n[0],l=n[1],f=n[2].subkey,d=u.meta,p=d.tokenNetwork,b=d.partner,y=Ui(u.meta),m=l.channels[y];if((null===m||void 0===m?void 0:m.state)!==po.open){var h=new pt(ft.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(D["a"])(Xn.failure(h,u.meta))}var v=Mu({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:f),g=v.signer,O=v.address,w=Bu(c(m.token),g),_=Bu(s(p),g);return fl([w,_],[O,o,b],u.payload.deposit,Object(D["a"])(m.id),{log:r})})))},bl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Rn(zn.request)),Object(Ls["a"])(t,u),Object(W["a"])((function(e){var t,n,u=Zu(e,3),l=u[0],f=u[1],d=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=Mu({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),h=m.signer,v=Bu(s(b),h),g=f.channels[Ui(l.meta)];if((null===g||void 0===g?void 0:g.state)!==po.open&&(null===g||void 0===g?void 0:g.state)!==po.closing){var O=new pt(ft.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(D["a"])(zn.failure(O,l.meta))}var w=g.partner.balanceProof,k=ho(w),j=w.nonce,E=w.additionalHash,T=w.signature,A=Object(_["concat"])([ao(b,20),ao(c.chainId,32),ao(fo.BALANCE_PROOF,32),ao(g.id,32),ao(k,32),ao(j,32),ao(E,32),ao(T,65)]);return Object(Pt["a"])(a.signMessage(A)).pipe(Object(W["a"])((function(e){return v.functions.closeChannel(g.id,y,o,k,j,E,T,e)})),Wi("closeChannel",ft.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(zn.failure(e,l.meta))})))})))},yl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(Rn(zn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(Kn.is),Object(U["a"])(1),Object(Is["a"])(1),Object(Ps["a"])(t))})),Object(Ls["a"])(t,u),Object(B["a"])((function(e){var t=Zu(e,2),n=t[0],r=t[1],a=r.channels[Ui(n.meta)];return(null===a||void 0===a?void 0:a.state)===po.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object(W["a"])((function(e){var t=Zu(e,3),n=t[0],u=t[1],l=t[2].subkey,f=n.meta,d=f.tokenNetwork,p=f.partner,b=Mu({signer:a,address:o,main:i},l),y=b.signer,m=Bu(s(d),y),h=u.channels[Ui(n.meta)],v=ho(h.partner.balanceProof),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,w=h.partner.balanceProof.signature,k=Object(_["concat"])([ao(d,20),ao(c.chainId,32),ao(fo.BALANCE_PROOF_UPDATE,32),ao(h.id,32),ao(v,32),ao(g,32),ao(O,32),ao(w,65)]);return Object(Pt["a"])(a.signMessage(k)).pipe(Object(W["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,p,o,v,g,O,w,e)})),Wi("updateNonClosingBalanceProof",ft.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),L["a"]})))})))},ml=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(Rn(er.request)),Object(Ls["a"])(t,s),Object(W["a"])((function(e){var t,n,s=Zu(e,3),u=s[0],l=s[1],f=s[2].subkey,d=u.meta,p=d.tokenNetwork,b=d.partner,y=Mu({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),m=y.signer,h=Bu(c(p),m),v=l.channels[Ui(u.meta)];if((null===v||void 0===v?void 0:v.state)!==po.settleable&&(null===v||void 0===v?void 0:v.state)!==po.settling){var g=new pt(ft.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(D["a"])(er.failure(g,u.meta))}return Object(Pt["a"])(Promise.all([h.functions.getChannelParticipantInfo(v.id,o,b),h.functions.getChannelParticipantInfo(v.id,b,o)])).pipe(Object(W["a"])((function(e){var t=Zu(e,2),n=t[0][3],r=t[1][3],a=v.own.balanceProof;if(n!==ho(a)){var i=du(l.sent,n,u.meta);bt(i,[ft.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),a=i}var c=v.partner.balanceProof;if(r!==ho(c)){var s=du(l.received,r,u.meta);bt(s,[ft.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:b,partnerBalanceHash:r}]),c=s}var f=[o,a],d=[b,c];if(d[1].transferredAmount.add(d[1].lockedAmount).lt(f[1].transferredAmount.add(f[1].lockedAmount))){var p=[d,f];f=p[0],d=p[1]}return h.functions.settleChannel(v.id,f[0],f[1].transferredAmount,f[1].lockedAmount,f[1].locksroot,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot)})),Wi("settleChannel",ft.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(er.failure(e,u.meta))})))})))},hl=function(e,t){return e.pipe(Object(B["a"])(Rn(Kn)),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Zu(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===po.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Jn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},vl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(B["a"])(Rn(er.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Ls["a"])(t,s),Object(B["a"])((function(e){var t,n=Zu(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Ui(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object(W["a"])((function(e){var t=Zu(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,f=u.partner,d=Bu(c(l),Mu({signer:a,address:o,main:i},s).signer),p=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(qu(e),[ao(t.expiration,32),ao(t.amount,32),t.secrethash])}),[]));return Object(Pt["a"])(d.functions.unlock(n.payload.id,o,f,p)).pipe(Wi("unlock",ft.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),L["a"]})))})))};function gl(e,t,n,r){return tl((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(B["a"])(gt))}var Ol=function(e,t,n){el(e);var r=n.config$,a=n.provider;return Object(Lt["a"])(t.pipe(ji("blockNumber")),t.pipe(Object(H["a"])("pendingTxs")),r.pipe(ji("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=Zu(e,2),n=t[1];return n.length>0})),Object(Mt["a"])((function(e){var t=Zu(e,3),n=t[0],r=t[1],o=t[2];return Rs["a"].apply(void 0,qu(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return gl(e,a,n,o)}))))})))},wl=n("5f00"),_l=n("efe0"),kl=n("3276"),jl=n("5dcf"),El=n("c9b0");function Tl(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Al(e,t){var n=Object(El["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Sl=n("2322"),xl=n("1957"),Nl=n("38c9"),Rl=n.n(Nl);function Cl(e,t){return Ul(e)||Ll(e,t)||Il(e,t)||Dl()}function Dl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Il(e,t){if(e){if("string"===typeof e)return Pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pl(e,t):void 0}}function Pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ll(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ul(e){if(Array.isArray(e))return e}function Ml(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Bl(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(gt)}var Fl=Rl()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Wl(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Fl(t))),n?Object(D["a"])(n):Object(Sl["a"])(e,"Room").pipe(Object(B["a"])(Fl(t)),Object(Is["a"])(1))}function Hl(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(Is["a"])(1),Object(W["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(gt),Object(pi["a"])(),Object(xl["a"])((function(n){return Wl(t,n).pipe(Object(W["a"])((function(t){return i.pipe(Object(H["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(pi["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(xl["a"])((function(e){var n=e.room,r=e.userId;if(!r)return L["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(Sl["a"])(t,"RoomMember.membership",(function(e,t){return Ml(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(H["a"])("roomId"))})))})),Object(Is["a"])(1),Object(W["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(Ps["a"])("string"===typeof e?e:e.label),Object(Ds["a"])((function(e){return e.pipe(Object(Ls["a"])(c),Object(W["a"])((function(e,t){var n=Cl(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Ns["a"])(a/u)):Object(xs["a"])(r)})))})))})))}function $l(e,t,n){var r=n.log;if("string"===typeof e)try{var a=jo(e);if("signature"in a){var o=wo(a);if(o!==t)throw new pt(ft.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function ql(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Vl(e,t){return Xl(e)||Yl(e,t)||Gl(e,t)||Kl()}function Kl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gl(e,t){if(e){if("string"===typeof e)return Zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zl(e,t):void 0}}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xl(e){if(Array.isArray(e))return e}var Ql=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},zl="RAIDEN";function Jl(e,t){var n=Tl(t.getHomeserverUrl());return Object(Pt["a"])(Bl(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object(W["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(H["a"])("roomId"),Object(Wt["a"])())}function ef(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function tf(e,t,n,r){return e.pipe(Object(B["a"])(rr.is),Object(Is["a"])(1),Object(ui["a"])((function(){n.next(t),n.complete()})),Object(mi["a"])(1e3),Object(Ls["a"])(r),Object(W["a"])((function(e){var n=Vl(e,2),r=n[1];return Jl(r,t).pipe(Object(W["a"])((function(e){return ef(t,e)})),Object(W["a"])((function(e){return t.startClient({filter:e})})))})),Object(Ws["a"])())}function nf(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function rf(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(jl["a"])(e+"/_matrix/client/versions").pipe(Object(wl["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Bt["a"])((function(){return Object(D["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function af(e,t){var n=this;return Object(jl["a"])(e).pipe(Object(W["a"])((function(t){return Ql(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(wl["a"])(t),Object(W["a"])((function(e){return nf(e)})),Object(W["a"])((function(e){return rf(e,t)})),Object(Wt["a"])(),Object(W["a"])((function(e){return $t()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(_l["a"])((function(){return new pt(ft.TRNS_NO_MATRIX_SERVERS)})))}function of(e,t,n,r){var a=n.address,o=n.signer,i=Tl(e);if(!i)throw new pt(ft.TRNS_NO_SERVERNAME,{server:e});return Object(P["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(Pt["a"])(o.signMessage(i)).pipe(Object(W["a"])((function(e){return Object(Pt["a"])(r.login("m.login.password",{user:c,password:e,device_id:zl})).pipe(Object(Bt["a"])((function(){return r.register(c,e)})))})),Object(W["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(Pt["a"])(o.signMessage(s)).pipe(Object(M["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object(W["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(Pt["a"])(t.setDisplayName(a.displayName)),Object(Pt["a"])(t.setAvatarUrl(r&&!$s()(r)?Ts(r):""))).pipe(Object(Ps["a"])({matrix:t,server:n,setup:a}))})))}var cf=function(e,t,n){ql(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(Lt["a"])([i,c]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var t,n=Vl(e,2),o=n[0].state,i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,f=o.transport.server,d=o.transport.setup,p=[];c?(c===f&&p.push(Object(D["a"])({server:f,setup:d})),p.push(Object(D["a"])({server:c}))):(f&&p.push(Object(D["a"])({server:f,setup:d})),p.push(af(s,u)));var b=function(e){return t=e,L["a"]};return Object(P["a"])((function(){return p.shift()||L["a"]})).pipe(Object(Bt["a"])(b),Object(kl["a"])((function(e){var t=e.server,n=e.setup;return of(t,n,{address:r,signer:a},l).pipe(Object(Bt["a"])(b))})),Object(F["a"])(),Object(ui["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(Ds["a"])((function(e){return e.pipe(Object(W["a"])((function(){return p.length?Object(D["a"])(null):Object(xs["a"])(t)})))})))})),Object(W["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(tf(e,n,o,c),Object(D["a"])(rr({server:r,setup:a})),c.pipe(ji("logger"),Object(ui["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Ws["a"])()))})))},sf=function(e,t,n){ql(t);var r=n.matrix$;return r.pipe(Object(W["a"])((function(t){return e.pipe(Object(Ms["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Ws["a"])())},uf=n("93e7"),lf=n.n(uf);function ff(e,t){return bf(e)||pf(e,t)||hf(e,t)||df()}function df(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bf(e){if(Array.isArray(e))return e}function yf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function mf(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=hf(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function hf(e,t){if(e){if("string"===typeof e)return vf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vf(e,t):void 0}}function vf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gf=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Of=["online","unavailable"],wf=/^@(0x[0-9a-f]{40})[.:]/i;function _f(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object(W["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=mf(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=wf.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object(W["a"])((function(t){return Al(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(gt),Object(Wt["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(ft.TRNS_NO_VALID_USER,{address:t});return lf()(e,"last_active_ago")})))}var kf=function(e,t,n){yf(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(Rn(ar.request)),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(li["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Ls["a"])(a.pipe(ji("presences"))),Object(Mt["a"])((function(e){var t=ff(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):_f(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return ar.success({userId:n,available:Of.includes(t),ts:Date.now(),caps:As(a)},r.meta)})),Object(Bt["a"])((function(e){return Object(D["a"])(ar.failure(e,r.meta))})))})))})))},jf=function(e,t,n){yf(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(xl["a"])((function(e){return Object(Sl["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{bt(null===a||void 0===a?void 0:a.presence);var o=null===(t=wf.exec(a.userId))||void 0===t?void 0:t[1];bt(o);var i=Object(_["getAddress"])(o);return bt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(gt),Object(Ls["a"])(e.pipe(Object(B["a"])(ar.request.is),Object(bi["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(fs["a"])(new Set))),Object(B["a"])((function(e){var t=ff(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object(W["a"])((function(e){var t=ff(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=Of.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;bt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(c,e.displayname);return bt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),ar.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:As(e.avatar_url)},{address:n})})),Object(Bt["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),L["a"]})))}))).pipe(Object(Ls["a"])(o),Object(B["a"])((function(e){var t=ff(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(H["a"])(0))},Ef=function(e){return e.pipe(Object(B["a"])(Yn.is),Object(M["a"])((function(e){return ar.request(void 0,{address:e.meta.partner})})))},Tf=function(e,t,n){yf(e),yf(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(H["a"])("caps"),Object(pi["a"])(ms.a),Object(U["a"])(1),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object(W["a"])((function(e){var t=ff(e,2),n=t[0],r=t[1];return gf(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!$s()(n)?Ts(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(Ws["a"])())},Af=n("2688"),Sf=n("3ae7"),xf=n.n(Sf);function Nf(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=If(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Rf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Cf(e,t){return Uf(e)||Lf(e,t)||If(e,t)||Df()}function Df(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function If(e,t){if(e){if("string"===typeof e)return Pf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pf(e,t):void 0}}function Pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Uf(e){if(Array.isArray(e))return e}var Mf=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Bf(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(Sl["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(Is["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Ls["a"])(r),Object(W["a"])((function(r){var a=Cf(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(yi["a"])((function(e){return e.pipe(Object(mi["a"])(i))})),Object(fi["a"])(Object(Sl["a"])(e,"RoomMember.membership",(function(e,t){return Rf(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var Ff=function(e,t,n){Rf(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])(Rn([la,Yn,Gr.request,ir])),Object(M["a"])((function(e){var t;switch(e.type){case la.type:e.meta.direction===ra.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===ra.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Yn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(gt),Object(li["a"])((function(e){return e})),Object(W["a"])((function(e){return e.pipe(Object(W["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Mt["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(Is["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object(W["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return or({roomId:n},{address:t})})),Object(Bt["a"])((function(e){return a.error("Error creating room, ignoring",e),L["a"]})))})))})))},Wf=function(e,t,n){Rf(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(Rn(ar.success)),Object(li["a"])((function(e){return e.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Ls["a"])(r),Object(xl["a"])((function(e){var t=Cf(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(pi["a"])(),Object(xl["a"])((function(e){return Object(Rs["a"])(Object(D["a"])(e),e?Object(Sl["a"])(r,"RoomMember.membership",(function(e,t){return Rf(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(Ps["a"])(e)):L["a"])})),Object(xl["a"])((function(e){return e?Bf(r,e,n.payload.userId,a,{log:i}):L["a"]}))):L["a"]})))})),Object(Ws["a"])())},Hf=function(e,t,n){Rf(e),Rf(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(xl["a"])((function(e){return Object(Sl["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=Cf(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(ji("presences"),Object(M["a"])((function(e){return xf()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(gt),Object(Is["a"])(1),Object(fi["a"])(Object(Ns["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Pt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Ps["a"])(or({roomId:n.roomId},{address:a.meta.address})),Object(Bt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),L["a"]})))})))},$f=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Rn(or)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ls["a"])(t,o),Object(W["a"])((function(e){var t,n,a=Cf(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Pt["a"])(l.filter((function(e,t){return Rf(e),t>=u}))).pipe(Object(W["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return ir({roomId:e},i.meta)})))})))},qf=function(e,t,n){Rf(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(xl["a"])((function(e){return Object(Sl["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,room:t}})))})),Object(Bs["a"])((function(){return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.httpTimeout;return Object(Ns["a"])(t)})))})),Object(Ls["a"])(t,o),Object(B["a"])((function(e){var t,n=Cf(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=Tl(a.getHomeserverUrl());if(Bl(c).some((function(e){return Fl("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var f,d=l[u],p=Nf(d);try{for(p.s();!(f=p.n()).done;){var b=f.value;if(b===o.roomId)return!1}}catch(y){p.e(y)}finally{p.f()}}return!0})),Object(W["a"])((function(e){var t=Cf(e,1),n=t[0],a=n.matrix,o=n.room;return Mf(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o.roomId),e.abrupt("return",a.leave(o.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(Ws["a"])())},Vf=function(e,t,n){Rf(e);var r=n.log,a=n.matrix$;return a.pipe(Object(xl["a"])((function(e){return Object(Sl["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,d,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Cf(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Cf(s[c],2),l=u[0],f=u[1],d=Nf(f),e.prev=5,d.s();case 7:if((b=d.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,ir({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),d.e(e.t0);case 20:return e.prev=20,d.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Kf=function(e,t,n){Rf(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(ji("transport","rooms"),Object(B["a"])(gt),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Cf(r[n],2),o=a[0],i=a[1],c=Nf(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Af["a"])((function(e){var t=e.roomId;return t})),Object(W["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=Cf(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Wl(i,a).pipe(Object(wl["a"])(c),Object(Ws["a"])(),Object(Bt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(ir({roomId:a},{address:o}))})))})))},Gf=function(e,t){return e.pipe(Object(B["a"])(Yr.is),Object(Ls["a"])(t),Object(B["a"])((function(e){var t,n,r=Cf(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=Cf(e,1),n=t[0];return or({roomId:n.payload.roomId},n.meta)})))};function Zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xf(e,t,n){return t&&Yf(e.prototype,t),n&&Yf(e,n),e}var Qf=function(){function e(t){Zf(this,e),this.values=new Map,this.max=t}return Xf(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function zf(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=td(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Jf(e,t){return ad(e)||rd(e,t)||td(e,t)||ed()}function ed(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function td(e,t){if(e){if("string"===typeof e)return nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nd(e,t):void 0}}function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ad(e){if(Array.isArray(e))return e}function od(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var id=function(e,t,n){od(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(Rn(Gr.request)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(li["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(kl["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:ko(t.payload.message),c={body:a,msgtype:"m.text"};return Hl(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(Ps["a"])(Gr.success(void 0,t.meta)),Object(Bt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(Gr.failure(e,t.meta))})))})))})))},cd=function(e,t,n){od(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(Rn(Zr)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=Jf(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Bl(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),L["a"];var s=Tl(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Wl(o,u).pipe(Object(W["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:ko(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Bt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),L["a"]})))})),Object(Ws["a"])())},sd=function(e,t,n){od(e),od(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(xl["a"])((function(e){return Object(Sl["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Ls["a"])(o),Object(B["a"])((function(e){var t,n,r=Jf(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Bl(s).some((function(e){return Fl("#".concat(e,":").concat(Tl(o.getHomeserverUrl())),c)}))})),Object(W["a"])((function(e){var t=Jf(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=xf()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Is["a"])(1),Object(fi["a"])(Object(Ns["a"])(c)),Object(W["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=xf()(n,["payload.userId",a.getSender()]),s=zf((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,f=$l(l,c.meta.address,{log:r}),e.next=10,Yr({text:l,message:f,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},ud=function(e,t,n){od(t);var r=n.log,a=n.signer,o=n.latest$,i=new Qf(32);return e.pipe(Object(B["a"])(To([Rt(pr),Rt(yr),Rt(hr)])),Object(Ls["a"])(o),Object(B["a"])((function(e){var t,n=Jf(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[De.NO_DELIVERY])})),Object(kl["a"])((function(e){var t=Jf(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(Gr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Bn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Pt["a"])(Eo(a,s,{log:r})).pipe(Object(ui["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return Gr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},ld=n("e11d"),fd=n("475d");function dd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function pd(e,t){return md(e)||yd(e,t)||gd(e,t)||bd()}function bd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function md(e){if(Array.isArray(e))return e}function hd(e){return wd(e)||Od(e)||gd(e)||vd()}function vd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gd(e,t){if(e){if("string"===typeof e)return _d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_d(e,t):void 0}}function Od(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function wd(e){if(Array.isArray(e))return _d(e)}function _d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},jd=new WeakMap;function Ed(e){return kd(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=jd.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),jd.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Td(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function Ad(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Sl["a"])(e,"icecandidate").pipe(Object(H["a"])("candidate"),Object(Bs["a"])((function(){return n})),Object(ds["a"])(gt),Object(ld["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(ui["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object(W["a"])((function(e){return Hl(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Sl["a"])(t,"event").pipe(Object(B["a"])(Td("m.call.candidates",i,o)),Object(ui["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object(W["a"])((function(e){var t;return Object(Pt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object(W["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Bt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),L["a"]})))})))).pipe(Object(Ws["a"])())}function Sd(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,f=a.latest$,d=a.config$;return Object(Pt["a"])(Ed(e)).pipe(Object(W["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(hd(r),hd(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(Ad(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object(W["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Sl["a"])(e,"event").pipe(Object(B["a"])(Td("m.call.answer",s,c,o))),Hl(u,e,"m.call.invite",n,{log:l,latest$:f,config$:d}).pipe(Object(ui["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Ws["a"])()))})),Object(Is["a"])(1),Object(ui["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Ws["a"])()),Object(D["a"])(b))})))}function xd(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,f=a.config$;return Object(Sl["a"])(e,"event").pipe(Object(B["a"])(Td("m.call.invite",c,i,o)),Object(ui["a"])((function(){return u.info("RTC: got invite",i)})),Object(W["a"])((function(t){return Object(Pt["a"])(Ed(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Ls["a"])(f),Object(W["a"])((function(r){var c=pd(r,2),d=pd(c[0],2),p=d[0],b=d[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(hd(b),hd(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(Ad(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object(W["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Hl(s,e,"m.call.answer",n,{log:u,latest$:l,config$:f})})),Object(ui["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Ws["a"])()),Object(Sl["a"])(m,"datachannel").pipe(Object(H["a"])("channel")))})),Object(Is["a"])(1))}function Nd(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object(W["a"])((function(t){return Object(I["a"])(Object(Sl["a"])(t,"close").pipe(Object(ui["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Ws["a"])()),Object(Sl["a"])(t,"error").pipe(Object(W["a"])((function(e){return Object(xs["a"])(e.error)}))),Object(Sl["a"])(t,"open").pipe(Object(Is["a"])(1),Object(wl["a"])(c/3),Object(ui["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(Ps["a"])(cr(t,{address:i}))),Object(Sl["a"])(t,"message").pipe(Object(ui["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(H["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return Yr({text:e,message:$l(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Ms["a"])((function(){return t.close()})))})),Object(fi["a"])(e),Object(Bt["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),L["a"]})),Object(fd["a"])(cr(void 0,{address:i})))}}function Rd(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(pi["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Ls["a"])(i,c),Object(B["a"])((function(e){var t,n=pd(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[De.WEBRTC])&&!!(null===a||void 0===a?void 0:a[De.WEBRTC])})),Object(xl["a"])((function(t){var n=pd(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(cr(void 0,i.meta));var l={log:r,latest$:o,config$:c},f=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),d=f.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:f,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],p=new C["a"];return t=d?Sd(s,a,n,u,l):xd(s,a,n,u,l),p.pipe(Object(W["a"])((function(){return Hl(i.meta.address,s,"m.call.hangup",{call_id:f,version:0},{log:r,latest$:o,config$:c}).pipe(Object(fi["a"])(Object(Ns["a"])(u.httpTimeout/10)))})),Object(fi["a"])(e.pipe(Object(B["a"])(Ma.is)))).subscribe(),Object(I["a"])(t,Object(Sl["a"])(s,"event").pipe(Object(B["a"])(Td("m.call.hangup",n.peerId,f)),Object(Fs["a"])(Object(xs["a"])(new Error("RTC: peer hung up"))))).pipe(Nd(p,n,u,l))})).pipe(Object(yi["a"])((function(e){return e.pipe(Object(Ls["a"])(o,c),Object(W["a"])((function(e){var t,n,r=pd(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?d?Object(Ns["a"])(o/10):Object(D["a"])(null):L["a"]})))})))})))}var Cd=function(e,t,n){return dd(t),e.pipe(Object(B["a"])(ar.success.is),Object(li["a"])((function(e){return e.meta.address})),Object(W["a"])((function(t){return Rd(e,t,n)})))};function Dd(e,t){return Md(e)||Ud(e,t)||Pd(e,t)||Id()}function Id(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pd(e,t){if(e){if("string"===typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ud(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Md(e){if(Array.isArray(e))return e}var Bd=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(Rn([zn.request,zn.success])),Object(Ls["a"])(t),Object(W["a"])((function(e){var t=Dd(e,2),n=t[0],a=t[1];return Object(Pt["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=Dd(e,2),a=Dd(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(M["a"])((function(e){var t,n,r,a,o=Dd(e,2),i=o[0],c=o[1],s={secrethash:i,direction:ra.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?ua.success({balanceProof:_o(c.unlock[1])},s):ua.success({},s):ua.failure(new pt(ft.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(gt))})))};function Fd(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object(Is["a"])(1),Object(Ws["a"])()),Object(D["a"])(t))}function Wd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Fd(t,e,Pn(Gr,e.meta)).pipe(Ti(n,r))}function Hd(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}function $d(e,t){return Zd(e)||Gd(e,t)||Vd(e,t)||qd()}function qd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vd(e,t){if(e){if("string"===typeof e)return Kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kd(e,t):void 0}}function Kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zd(e){if(Array.isArray(e))return e}function Yd(e,t,n,r){var a=n.confirmationBlocks;return Object(Pt["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=$d(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object(W["a"])((function(t){var n=$d(t,2),r=n[0],a=n[1],o={secrethash:r,direction:ra.SENT};return Object(I["a"])(Fd(e,va.request(void 0,o),Pn(va,o)),Object(D["a"])(ua.failure(new pt(ft.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var Xd=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Rn(Kn)),Object(Ls["a"])(t,r),Object(Mt["a"])((function(t){var n=$d(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return Yd(e,a,o,r)})))};function Qd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function zd(e,t){return tp(e)||ep(e,t)||ap(e,t)||Jd()}function Jd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ep(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function tp(e){if(Array.isArray(e))return e}function np(e){return ip(e)||op(e)||ap(e)||rp()}function rp(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ap(e,t){if(e){if("string"===typeof e)return cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cp(e,t):void 0}}function op(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ip(e){if(Array.isArray(e))return cp(e)}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sp(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return bt(n.length===e.locks.length-1,"invalid locks size"),n}function up(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function lp(e,t,n){var r=e.channels[Ui(t)];return bt((null===r||void 0===r?void 0:r.state)===po.open,"channel not open"),n&&(bt(n.chain_id.eq(e.chainId),"chainId mismatch"),bt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function fp(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),L["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,d=t.payload.paths[0].path[0],b=t.payload.tokenNetwork,y=lp(e,{tokenNetwork:b,partner:d});bt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var m={amount:t.payload.value.add(f),expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},h=eu([].concat(np(y.own.locks),[m]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",y.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var v={type:Bn.LOCKED_TRANSFER,message_identifier:au(),chain_id:Object(_["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(y.id),nonce:y.own.nextNonce,transferred_amount:y.own.balanceProof.transferredAmount,locked_amount:y.own.balanceProof.lockedAmount.add(m.amount),locksroot:h,payment_identifier:t.payload.paymentId,token:y.token,recipient:d,lock:m,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Pt["a"])(Eo(u,v,{log:i})).pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,la({message:n,fee:f,partner:d},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,da({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function dp(e,t,n){return Object(Lt["a"])([e,n.config$]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var r=zd(e,2),a=r[0],o=r[1];return fp(a,t,o,n)})),Object(Bt["a"])((function(e){return Object(D["a"])(ua.failure(e,t.meta))})))}function pp(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;bt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=s.token_network_address,l=t.sent[i].partner,f=lp(t,{tokenNetwork:u,partner:l});if(t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{bt(t.sent[i].secret,"unknown secret"),bt(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var d={type:Bn.UNLOCK,message_identifier:au(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:eu(sp(f.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Pt["a"])(Eo(o,d,{log:a}))}return c.pipe(Object(Ls["a"])(e),Object(M["a"])((function(e){var t=zd(e,2),r=t[0],a=t[1];return bt(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),bt(!a.sent[i].channelClosed,"channel closed!"),ma.success({message:r,partner:l},n.meta)})))}function bp(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object(W["a"])((function(n){return pp(e,n,t,{log:a,signer:r})})),Object(Bt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(ma.failure(e,t.meta))})))}function yp(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;bt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=c.token_network_address,u=e.sent[o].partner,l=lp(e,{tokenNetwork:s,partner:u});if(e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{bt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),bt(!e.sent[o].unlock,"transfer already unlocked");var f=eu(sp(l.own,o)),d={type:Bn.LOCK_EXPIRED,message_identifier:au(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount,locked_amount:l.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:f,recipient:u,secrethash:o};i=Object(Pt["a"])(Eo(r,d,{log:a}))}return i.pipe(Object(M["a"])((function(e){return va.success({message:e,partner:u},t.meta)})))}function mp(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return yp(e,t,{signer:a,log:r})})),Object(Bt["a"])((function(e){return Object(D["a"])(va.failure(e,t.meta))})))}function hp(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=t.payload.message.lock.secrethash,s={secrethash:c,direction:ra.RECEIVED};return Object(Lt["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=zd(e,2),i=n[0],u=n[1],l=u.revealTimeout,f=u.caps,d=t.payload.message;if(c in i.received){a.warn("transfer already present",t.meta);var b=d.message_identifier;return i.received[c].partner===t.meta.address&&i.received[c].transfer[1].message_identifier.eq(b)?Object(D["a"])(fa({message:i.received[c].transferProcessed[1]},s)):L["a"]}var y=d.token_network_address,m=t.meta.address,h=lp(i,{tokenNetwork:y,partner:m},d);bt(d.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=[].concat(np(h.partner.locks),[d.lock]),g=eu(v);bt(d.locksroot===g,"locksroot mismatch"),bt(d.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),bt(d.locked_amount.eq(up(v)),"lockedAmount mismatch");var O=Fi(h),w=O.partnerCapacity;bt(d.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),bt(d.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",d.lock.amount.toString(),"of token",h.token,", from",d.initiator,", through partner",m);var _=Object(D["a"])(void 0);!(null===f||void 0===f?void 0:f[De.NO_RECEIVE])&&d.target===r&&d.lock.expiration.sub(l).gt(i.blockNumber)&&(_=Object(P["a"])((function(){var e={type:Bn.SECRET_REQUEST,payment_identifier:d.payment_identifier,secrethash:c,amount:d.lock.amount,expiration:d.lock.expiration,message_identifier:au()};return Eo(o,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:Bn.PROCESSED,message_identifier:d.message_identifier};return Eo(o,e,{log:a})}));return Object(Lt["a"])([j,_]).pipe(Object(W["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=zd(t,2),r=n[0],a=n[1],e.next=3,la({message:d,fee:k["Zero"],partner:m},s);case 3:return e.next=5,fa({message:r},s);case 5:if(!a){e.next=10;break}return e.next=8,ar.request(void 0,{address:d.initiator});case 8:return e.next=10,ba({message:a},s);case 10:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ua.failure(e,s))})))}function vp(e,t,n){var r=n.log,a=n.signer,o=tu(t.payload.message.secret),i={secrethash:o,direction:ra.RECEIVED};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){if(!(o in e.received))return L["a"];var n=e.received[o],c=t.payload.message,s=t.meta.address;if(bt(s===n.partner,"wrong partner"),bt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(c.message_identifier)?Object(D["a"])(ha({message:n.unlockProcessed[1]},i)):L["a"];var u=n.transfer[1];bt(c.token_network_address===u.token_network_address,"wrong tokenNetwork");var l=c.token_network_address,f=lp(e,{tokenNetwork:l,partner:s},c);bt(c.nonce.eq(f.partner.nextNonce),"nonce mismatch");var d=u.lock.amount,b=sp(f.partner,o);bt(c.locksroot===eu(b),"locksroot mismatch"),bt(c.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(d)),"transferredAmount mismatch"),bt(c.locked_amount.eq(up(b)),"lockedAmount mismatch");var y={type:Bn.PROCESSED,message_identifier:c.message_identifier};return Object(Pt["a"])(Eo(a,y,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,da({secret:c.secret},i);case 2:return e.next=4,ma.success({message:c,partner:s},i);case 4:return e.next=6,ha({message:t},i);case 6:return e.next=8,ua.success({balanceProof:_o(c)},i);case 8:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(ma.failure(e,i))})))}function gp(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=t.payload.message.secrethash,c={secrethash:i,direction:ra.RECEIVED};return Object(Lt["a"])([e,o]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,o,s=zd(e,2),u=s[0],l=s[1].confirmationBlocks;if(!(i in u.received))return L["a"];var f=u.received[i],d=t.payload.message,b=t.meta.address;if(bt(b===f.partner,"wrong partner"),bt(!f.unlock,"transfer unlocked"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(d.message_identifier)?Object(D["a"])(ga({message:f.lockExpiredProcessed[1]},c)):L["a"];var y=f.transfer[1];bt(y.lock.expiration.add(l).lte(u.blockNumber),"expiration block not confirmed yet"),bt(!(null===(o=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===o?void 0:o.registerBlock),"secret registered onchain"),bt(d.token_network_address===y.token_network_address,"wrong tokenNetwork");var m=d.token_network_address,h=lp(u,{tokenNetwork:m,partner:b},d);bt(d.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=sp(h.partner,i);bt(d.locksroot===eu(v),"locksroot mismatch"),bt(d.locked_amount.eq(up(v)),"lockedAmount mismatch"),bt(d.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var g={type:Bn.PROCESSED,message_identifier:d.message_identifier};return Object(Pt["a"])(Eo(a,g,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,va.success({message:d,partner:b},c);case 2:return e.next=4,ga({message:t},c);case 4:return e.next=6,ua.failure(new pt(ft.XFER_EXPIRED,{block:y.lock.expiration.toString()}),c);case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(va.failure(e,c))})))}function Op(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==ra.SENT?L["a"]:Object(Lt["a"])([e,c,s]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,c,s=zd(e,3),u=s[0],l=s[1].revealTimeout,f=s[2].presences,d=lp(u,t.meta);if(d.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_REQUEST,t.meta)))return L["a"];bt(null===(c=null===(n=f[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,ft.CNL_WITHDRAW_PARTNER_OFFLINE),bt(t.meta.expiration>=u.blockNumber+l,ft.CNL_WITHDRAW_EXPIRES_SOON),bt(t.meta.totalWithdraw.gt(d.own.withdraw),ft.CNL_WITHDRAW_AMOUNT_TOO_LOW),bt(t.meta.totalWithdraw.lte(Fi(d).ownTotalWithdrawable),ft.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var p={type:Bn.WITHDRAW_REQUEST,message_identifier:au(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(d.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:d.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Pt["a"])(Eo(o,p,{log:r})).pipe(Object(M["a"])((function(e){return ka.request({message:e},t.meta)})))})),Object(Bt["a"])((function(e){return Object(D["a"])(_a.failure(e,t.meta))})))}function wp(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:ra.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return lp(e,{tokenNetwork:o,partner:i},a),bt(a.participant===r,"participant mismatch"),ka.success({message:a},c)})),Object(Bt["a"])((function(e){return Object(D["a"])(ka.failure(e,c))})))}function _p(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==ra.SENT?L["a"]:Object(Lt["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=zd(e,2),i=n[0],c=n[1].confirmationBlocks,s=lp(i,t.meta);bt(!s.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(Hd(Bn.WITHDRAW_REQUEST,t.meta));bt(u,"no matching WithdrawRequest found, maybe already confirmed"),bt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:Bn.WITHDRAW_EXPIRED,message_identifier:au(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Pt["a"])(Eo(o,l,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ja.success({message:n},t.meta);case 2:return e.next=4,_a.failure(new pt(ft.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ja.failure(e,t.meta))})))}function kp(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:ra.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){bt(o.participant===t.meta.address,"participant mismatch");var n,u=lp(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(Hd(Bn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(D["a"])(l);else{bt(o.nonce.eq(u.partner.nextNonce),"nonce mismatch"),bt(o.total_withdraw.lte(Fi(u).partnerTotalWithdrawable),"invalid total_withdraw");var f={type:Bn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Pt["a"])(Eo(r,f,{log:a}))}return n.pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ka.request({message:o},s);case 2:return e.next=4,ka.success({message:n},s);case 4:return e.next=6,Gr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ka.failure(e,s))})))}function jp(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:ra.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(Lt["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=zd(e,2),i=n[0],f=n[1].confirmationBlocks;bt(u===t.meta.address,"participant mismatch");var d,b=lp(i,{tokenNetwork:s,partner:u},c),y="".concat(Mi(b),"+").concat(c.message_identifier.toString()),m=r.get(y);if(m)d=Object(D["a"])(m);else{bt(c.nonce.eq(b.partner.nextNonce),"nonce mismatch"),bt(i.blockNumber>=l.expiration+f,"expire block not confirmed yet");var h={type:Bn.PROCESSED,message_identifier:c.message_identifier};d=Object(Pt["a"])(Eo(a,h,{log:o})).pipe(Object(ui["a"])((function(e){return r.put(y,e)})))}return d.pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ja.success({message:c},l);case 2:return e.next=4,Ea(void 0,l);case 4:return e.next=6,Gr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ja.failure(e,l))})))}var Ep=function(e,t,n){Qd(t);var r=new Qf(32),a=n.latest$.pipe(ji("state"));return Object(I["a"])(e.pipe(Object(B["a"])(Rn([ua.request,ma.request,va.request,_a.request,ja.request]))),e.pipe(Object(B["a"])(To([Rt(Er),Rt(xr),Rt(Rr),Rt(Ir),Rt(Lr),Rt(Mr)])))).pipe(Object(kl["a"])((function(e){var t;switch(e.type){case ua.request.type:t=dp(a,e,n);break;case ma.request.type:t=bp(a,e,n);break;case va.request.type:t=mp(a,e,n);break;case _a.request.type:t=Op(a,e,n);break;case ja.request.type:t=_p(a,e,n);break;case Yr.type:switch(e.payload.message.type){case Bn.LOCKED_TRANSFER:t=hp(a,e,n);break;case Bn.UNLOCK:t=vp(a,e,n);break;case Bn.LOCK_EXPIRED:t=gp(a,e,n);break;case Bn.WITHDRAW_REQUEST:t=kp(a,e,n);break;case Bn.WITHDRAW_CONFIRMATION:t=wp(a,e,n);break;case Bn.WITHDRAW_EXPIRED:t=jp(a,e,n,r);break}break}return t})))};function Tp(e,t){return Rp(e)||Np(e,t)||Sp(e,t)||Ap()}function Ap(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sp(e,t){if(e){if("string"===typeof e)return xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xp(e,t):void 0}}function xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Np(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Rp(e){if(Array.isArray(e))return e}function Cp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Dp=function(e,t){return Cp(e),t.pipe(Object(F["a"])(),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Tp(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:ra.SENT},e.next=9,ar.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,la({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,ma.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,va.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Ip=function(e,t,n){Cp(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(Pt["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=Tp(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(W["a"])((function(e){var t=Tp(e,2),n=t[0],a=t[1],o={secrethash:n,direction:ra.RECEIVED};return Object(I["a"])(Object(D["a"])(la({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(da({secret:a.secret[1].value},o)):L["a"],a.secretReveal?Object(D["a"])(ya({message:a.secretReveal[1]},o)):L["a"],!a.secret&&a.secretRequest?r.pipe(Object(H["a"])("caps",De.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object(Is["a"])(1),Object(Fs["a"])(Object(D["a"])(ar.request(void 0,{address:a.transfer[1].initiator}),ba({message:a.secretRequest[1]},o)))):L["a"])})))};function Pp(e,t){return Fp(e)||Bp(e,t)||Up(e,t)||Lp()}function Lp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Up(e,t){if(e){if("string"===typeof e)return Mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mp(e,t):void 0}}function Mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fp(e){if(Array.isArray(e))return e}var Wp=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(la.is),Object(B["a"])((function(e){return e.meta.direction===ra.RECEIVED&&e.payload.message.target!==r})),Object(Ls["a"])(t,a),Object(B["a"])((function(e){var t=Pp(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[De.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=Pp(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return ua.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:ra.SENT})})))};function Hp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function $p(e,t){return Zp(e)||Gp(e,t)||Vp(e,t)||qp()}function qp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vp(e,t){if(e){if("string"===typeof e)return Kp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kp(e,t):void 0}}function Kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zp(e){if(Array.isArray(e))return e}var Yp=function(e,t){return e.pipe(Object(B["a"])(To(Rt(pr))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=$p(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=$p(s[c],2),l=u[0],f=u[1],!f.transfer[1].message_identifier.eq(o.message_identifier)||f.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,fa({message:o},{secrethash:i,direction:ra.SENT});case 16:case"end":return e.stop()}}),e)}))))},Xp=function(e,t){return e.pipe(Object(B["a"])(Rn([fa,ha,ga])),Object(B["a"])((function(e){return e.meta.direction===ra.RECEIVED})),Object(Ls["a"])(t),Object(M["a"])((function(e){var t=$p(e,2),n=t[0],r=t[1].received;return Gr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},Qp=function(e,t){return e.pipe(Object(B["a"])(To(Rt(pr))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=$p(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:ra.SENT},e.next=8,ua.success({balanceProof:_o(a.sent[i].unlock[1])},c);case 8:return e.next=10,ha({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},zp=function(e,t){return e.pipe(Object(B["a"])(To(Rt(pr))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=$p(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ga({message:o},{secrethash:i,direction:ra.SENT});case 7:case"end":return e.stop()}}),e)}))))},Jp=function(e,t,n){Hp(t);var r=n.log,a=n.signer,o=new Qf(32);return e.pipe(Object(B["a"])(To(Rt(Ar))),Object(kl["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(Gr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Bn.PROCESSED,message_identifier:n};return Object(Pt["a"])(Eo(a,s,{log:r})).pipe(Object(ui["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return Gr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},eb=n("bef3"),tb=n.n(eb);function nb(e,t){return cb(e)||ib(e,t)||ab(e,t)||rb()}function rb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ab(e,t){if(e){if("string"===typeof e)return ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ob(e,t):void 0}}function ob(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ib(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cb(e){if(Array.isArray(e))return e}function sb(e,t){return tb()(e,t,(function(e,t){return Ot.is(e)?e.eq(t):Ot.is(t)?t.eq(e):void 0}))}var ub=function(e,t){return e.pipe(Object(B["a"])(To(Rt(Ar))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=nb(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&sb(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:ra.SENT},e.next=14,Oa({message:o,partner:c.partner},u);case 14:return e.next=16,ua.failure(new pt(ft.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function lb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function fb(e,t){return mb(e)||yb(e,t)||pb(e,t)||db()}function db(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pb(e,t){if(e){if("string"===typeof e)return bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bb(e,t):void 0}}function bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mb(e){if(Array.isArray(e))return e}var hb=function(e,t,n,r){return r.meta.direction!==ra.SENT?L["a"]:n.pipe(Object(F["a"])(),Object(xl["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=Gr.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(ji("sent",o),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Wd(c,e,s,a)})))},vb=function(e,t,n,r){return r.meta.direction!==ra.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(xl["a"])((function(n){var a=fb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=Gr.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),f=t.pipe(ji("sent",c),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Wd(l,e,f,i)})))},gb=function(e,t,n,r){return r.meta.direction!==ra.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(xl["a"])((function(n){var a=fb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Gr.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(ji("sent",c),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Wd(u,e,l,i)})))},Ob=function(e,t,n,r){return r.meta.direction!==ra.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(xl["a"])((function(n){var a=fb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Gr.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(ji("received",c),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Wd(u,e,l,i)})))},wb=function(e,t,n,r){return r.meta.direction!==ra.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(xl["a"])((function(n){var a=fb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Gr.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(ji("received",c),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Wd(u,e,l,i)})))},_b=function(e,t,n){lb(t);var r=n.latest$,a=n.config$,o=r.pipe(ji("state"));return e.pipe(Object(B["a"])(Rn([la,ma.success,va.success,ba,ya])),Object(W["a"])((function(t){return la.is(t)?hb(e,o,a,t):ma.success.is(t)?vb(e,o,a,t):va.success.is(t)?gb(e,o,a,t):ba.is(t)?Ob(e,o,a,t):wb(e,o,a,t)})))};function kb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function jb(e,t){return xb(e)||Sb(e,t)||Tb(e,t)||Eb()}function Eb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tb(e,t){if(e){if("string"===typeof e)return Ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ab(e,t):void 0}}function Ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xb(e){if(Array.isArray(e))return e}var Nb=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(To(Rt(yr))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=jb(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,ba({message:c},{secrethash:c.secrethash,direction:ra.SENT});case 10:case"end":return e.stop()}}),e)}))))},Rb=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),L["a"];var s,u=e.sent[c].transfer[1],l=u.target,f=e.sent[c].fee,d=u.lock.amount.sub(f);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),L["a"];if(i.amount.lt(d))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])(ua.failure(new pt(ft.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(d)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Bn.SECRET_REVEAL,message_identifier:au(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Pt["a"])(Eo(a,b,{log:o}))}return s.pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ya({message:n},t.meta);case 2:return e.next=4,Gr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Cb=function(e,t,n){kb(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(Rn(ba)),Object(B["a"])((function(e){return e.meta.direction===ra.SENT})),Object(kl["a"])((function(e){return o.pipe(ji("state")).pipe(Object(F["a"])(),Object(W["a"])((function(t){return Rb(t,e,{log:r,signer:a})})))})))},Db=function(e,t){return e.pipe(Object(B["a"])(To(hr)),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=jb(t,2),r=n[0],a=n[1],o=r.payload.message,i=tu(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:ra.SENT},e.next=7,da({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,ma.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,da({secret:o.secret},{secrethash:i,direction:ra.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},Ib=function(e,t,n){kb(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(Rn([da,pa.success])),Object(B["a"])((function(e){return e.meta.direction===ra.RECEIVED})),Object(kl["a"])((function(e){return o.pipe(ji("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object(W["a"])((function(){var t={type:Bn.SECRET_REVEAL,message_identifier:au(),secret:e.payload.secret};return Eo(a,t,{log:r})})),Object(M["a"])((function(t){return ya({message:t},e.meta)})),Object(Bt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),L["a"]})))})))},Pb=function(e,t,n){kb(e);var r=n.secretRegistryContract;return rn(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(Ls["a"])(t),Object(B["a"])((function(e){var t=jb(e,2),n=jb(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=jb(t,2),r=jb(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,pa.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:ra.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,pa.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:ra.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},Lb=function(e){return e.pipe(Object(B["a"])(pa.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return ua.success({},e.meta)})))},Ub=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(ji(ra.RECEIVED),Object(W["a"])((function(e){return Object(Pt["a"])(Object.keys(e))})),Object(Af["a"])(),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(Kn.is),Object(Ls["a"])(a.pipe(Object(H["a"])("state",ra.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=jb(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[De.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(Mt["a"])((function(n){var r=jb(n,2),a=r[1],o={secrethash:t,direction:ra.RECEIVED};return Fd(e,pa.request({secret:a.secret[1].value},o),Ln(pa,o))})),Object(fi["a"])(a.pipe(ji("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},Mb=function(e,t,n){kb(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(B["a"])(pa.request.is),Object(Ls["a"])(s),Object(W["a"])((function(e){var t,n=jb(e,2),s=n[0],u=n[1].subkey,l=Mu({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),f=l.signer,d=Bu(c,f);return Object(Pt["a"])(d.functions.registerSecret(s.payload.secret)).pipe(Wi("registerSecret",ft.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(Ws["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(pa.failure(e,s.meta))})))})))};function Bb(e,t){return Hb(e)||Wb(e,t)||qb(e,t)||Fb()}function Fb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Hb(e){if(Array.isArray(e))return e}function $b(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function qb(e,t){if(e){if("string"===typeof e)return Vb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vb(e,t):void 0}}function Vb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Gb=function(e,t){return Kb(e),t.pipe(Object(F["a"])(),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===po.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=$b(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==Bn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,ka.request({message:c},{direction:ra.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==Bn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,ja.success({message:c},{direction:ra.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},Zb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(ka.request.is),Object(B["a"])((function(e){return e.meta.direction===ra.SENT})),Object(Ls["a"])(r),Object(W["a"])((function(n){var r=Bb(n,2),a=r[0],o=r[1].httpTimeout,i=a.payload.message,c=Gr.request({message:i},{address:a.meta.partner,msgId:i.message_identifier.toString()}),s=t.pipe(Object(B["a"])((function(e){var t=e.channels[Ui(a.meta)];return(null===t||void 0===t?void 0:t.state)!==po.open||t.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_REQUEST,a.meta))})));return Wd(c,e,s,o)})))},Yb=function(e,t,n){Kb(t);var r=n.address,a=n.signer,o=n.main,i=n.log,c=n.getTokenNetworkContract,s=n.latest$;return e.pipe(Object(B["a"])(ka.success.is),Object(B["a"])((function(e){return e.meta.direction===ra.SENT})),Object(kl["a"])((function(e){return s.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.state,i=t.config,s=i.subkey,u=i.revealTimeout;bt(e.meta.expiration>=n.blockNumber+u,ft.CNL_WITHDRAW_EXPIRES_SOON);var l=n.channels[Ui(e.meta)];bt((null===l||void 0===l?void 0:l.state)===po.open,"channel not open"),bt(e.meta.totalWithdraw.gt(l.own.withdraw),"withdraw already performed");var f=l.own.pendingWithdraws.find(Hd(Bn.WITHDRAW_REQUEST,e.payload.message));bt(f,"no matching WithdrawRequest found");var d=e.meta.tokenNetwork,p=Mu({signer:a,address:r,main:o},s),b=p.signer,y=Bu(c(d),b);return y.functions.setTotalWithdraw(l.id,r,e.meta.totalWithdraw,e.meta.expiration,f.signature,e.payload.message.signature)})),Wi("setTotalWithdraw",ft.CNL_WITHDRAW_TRANSACTION_FAILED,{log:i}),Object(M["a"])((function(t){return _a.success({txHash:t.transactionHash,txBlock:t.blockNumber,confirmed:void 0},e.meta)})),Object(Bt["a"])((function(t){return Object(D["a"])(_a.failure(t,e.meta))})))})))},Xb=function(e,t,n){Kb(t);var r=n.signer,a=n.log,o=n.latest$,i=new Qf(32);return e.pipe(Object(B["a"])(Rn([ka.request,ka.success])),Object(B["a"])((function(e){return e.meta.direction===ra.RECEIVED!==ka.success.is(e)})),Object(kl["a"])((function(e){return o.pipe(Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.presences;return e.meta.partner in r&&!(null===(n=r[e.meta.partner].payload.caps)||void 0===n?void 0:n[De.NO_DELIVERY])})),Object(W["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(D["a"])(c);else{var s={type:Bn.PROCESSED,message_identifier:n.message_identifier};t=Object(Pt["a"])(Eo(r,s,{log:a})).pipe(Object(ui["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(M["a"])((function(t){return Gr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(Bt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),L["a"]})))})))},Qb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Kn.is),Object(H["a"])("payload","blockNumber"),Object(Ls["a"])(t,r),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Bb(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===po.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(Hd(Bn.WITHDRAW_REQUEST)),l=$b(u),e.prev=8,l.s();case 10:if((f=l.n()).done){e.next=20;break}if(d=f.value,!d.expiration.add(o).gt(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(Hd(Bn.WITHDRAW_EXPIRED,d))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,ja.request(void 0,{direction:ra.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:d.expiration.toNumber(),totalWithdraw:d.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},zb=function(e,t,n){Kb(t);var r=n.config$;return e.pipe(Object(B["a"])(ja.success.is),Object(B["a"])((function(e){return e.meta.direction===ra.SENT})),Object(Ls["a"])(r),Object(W["a"])((function(t){var n=Bb(t,2),r=n[0],a=n[1].httpTimeout,o=r.payload.message,i=Gr.request({message:o},{address:r.meta.partner,msgId:o.message_identifier.toString()}),c=e.pipe(Object(B["a"])(To(Rt(pr))),Object(B["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(o.message_identifier)})),Object(Ps["a"])(Ea(void 0,r.meta)),Object(Is["a"])(1),Object(Ft["a"])());return Object(I["a"])(Wd(i,e,c,a),c)})))},Jb=n("2b6e"),ey=n("44e4");function ty(e,t){return iy(e)||oy(e,t)||ry(e,t)||ny()}function ny(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ry(e,t){if(e){if("string"===typeof e)return ay(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ay(e,t):void 0}}function ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function iy(e){if(Array.isArray(e))return e}var cy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function sy(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[De.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Ui({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==po.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(po.open,'"');var s=Fi(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var uy=N()((function(e){return cy(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function ly(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Le["t"]({message:Le["q"],network_info:Le["t"]({chain_id:Le["j"](a.chainId),token_network_registry_address:Le["j"](o.TokenNetworkRegistry.address)}),operator:Le["q"],payment_address:St,price_info:kt(32),version:Le["q"]}),s=St.is(e)?Object(Pt["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(Ls["a"])(i),Object(W["a"])((function(e){var t=ty(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new pt(ft.PFS_EMPTY_URL);if(!Hu(a))throw new pt(ft.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(jl["a"])(a+"/api/v1/info").pipe(Object(wl["a"])(o),Object(W["a"])((function(e){return cy(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=vt,t.t1=c,t.t2=co,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,uy(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(M["a"])((function(e){var t=ty(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function fy(e,t){var n=t.log;return Object(Pt["a"])(e).pipe(Object(W["a"])((function(e){return ly(e,t).pipe(Object(Bt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),L["a"]})))}),5),Object(Wt["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(ft.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function dy(e){return Object(_["concat"])([ao(e.one_to_n_address,20),ao(e.chain_id,32),ao(fo.IOU,32),ao(e.sender,20),ao(e.receiver,20),ao(e.amount,32),ao(e.expiration_block,32)])}function py(e,t){return cy(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(dy(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function by(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_y(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function yy(e){return vy(e)||hy(e)||_y(e)||my()}function my(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function vy(e){if(Array.isArray(e))return ky(e)}function gy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Oy(e,t){return Ey(e)||jy(e,t)||_y(e,t)||wy()}function wy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _y(e,t){if(e){if("string"===typeof e)return ky(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ky(e,t):void 0}}function ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ey(e){if(Array.isArray(e))return e}var Ty=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ay=Le["n"](Le["t"]({error_code:Le["l"],errors:Le["q"]}));function Sy(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function xy(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.contractsInfo,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=Sy(),n=Object(_["concat"])([a,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Pt["a"])(o.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Ls["a"])(u),Object(W["a"])((function(n){var r=Oy(n,2),a=r[0],o=r[1].httpTimeout;return Object(jl["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(wl["a"])(o))})),Object(Ls["a"])(s.pipe(Object(H["a"])("state","blockNumber"))),Object(W["a"])((function(t){var n=Oy(t,2),o=n[0],s=n[1];return Ty(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=2;break}return t.abrupt("return",{sender:a,receiver:e.address,chain_id:Object(_["bigNumberify"])(i.chainId),amount:k["Zero"],one_to_n_address:c.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(2*Math.pow(10,5))});case 2:return t.next=4,o.text();case 4:if(n=t.sent,o.ok){t.next=7;break}throw new pt(ft.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 7:if(r=vt(na,co(n)),u=r.last_iou,l=Object(_["verifyMessage"])(dy(u),u.signature),l===a){t.next=11;break}throw new pt(ft.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})))})))}function Ny(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):xy(e,t,n)})),Object(M["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object(W["a"])((function(e){return py(n.signer,e)})))}var Ry=function(e,t,n){return gy(t),e.pipe(Object(B["a"])(Rn(Sa.request)),Object(kl["a"])((function(t){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=L["a"],o=Object(D["a"])(r)):(a=Object(D["a"])(ar.request(void 0,{address:i})),o=Hy(e,n,i)),Object(I["a"])(o.pipe(Object(W["a"])((function(e){return $y(t,n,e)})),Object(Ls["a"])(n.latest$),Object(W["a"])((function(e){var r=Oy(e,2),a=r[0],o=r[1];return qy(t,n,a,o)})),Object(Bt["a"])((function(e){return Object(D["a"])(Sa.failure(e,t.meta))}))),a)})))})))},Cy=function(e,t,n){gy(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Hi,Object(W["a"])((function(e){return e.pipe(Object(Jb["a"])(),Object(Ls["a"])(c),Object(B["a"])((function(e){var t=Oy(e,2),n=Oy(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===po.open&&!!a})),Object(ey["a"])((function(e){var t=Oy(e,2),n=Oy(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(Ns["a"])(o):Object(D["a"])(1)})),Object(xl["a"])((function(e){var t=Oy(e,2),n=Oy(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,f=c.tokenNetwork,d=c.partner.address,p=Fi(c),b=p.ownCapacity,y=p.partnerCapacity,m={type:Bn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:f,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:d,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(P["a"])((function(){return Eo(i,m,{log:r})})).pipe(Object(M["a"])((function(e){return Zr({message:e},{roomName:l})})),Object(Bt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),L["a"]})))})))})))},Dy=function(e,t,n){gy(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Hi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Ls["a"])(c),Object(B["a"])((function(e){var t=Oy(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===po.open&&!!a&&!(null===o||void 0===o?void 0:o[De.NO_MEDIATE])})),Object(W["a"])((function(e){var t=Oy(e,2),n=t[0],c=t[1].pfsRoom,s={type:Bn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:Sy(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Pt["a"])(Eo(i,s,{log:r})).pipe(Object(M["a"])((function(e){return Zr({message:e},{roomName:c})})),Object(Bt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),L["a"]})))})))},Iy=function(e,t,n){gy(e),gy(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(ji("pfs"),Object(xl["a"])((function(e){return""!==e&&void 0!==e?L["a"]:rn(r,[r.filters.RegisteredService(null,null,null,null)],Object(D["a"])(a.ServiceRegistry.block_number)).pipe(Object(li["a"])((function(e){var t=Oy(e,1),n=t[0];return n})),Object(W["a"])((function(e){return e.pipe(Object(xl["a"])((function(e){var t=Oy(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return L["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(mi["a"])(new Date(o.toNumber()))):L["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(bi["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(yy(e),[n]):e}),[]),Object(pi["a"])(),Object(Ut["a"])(1e3),Object(M["a"])((function(e){return xa({pfsList:e})})))})))},Py=function(e,t,n){gy(e),gy(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(ji("state","blockNumber"),Object(Mt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(pi["a"])((function(e,t){return t.eq(e)})),Object(M["a"])(Ca))};function Ly(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Oy(e,2),u=s[1],l=Fi(u),f=l.partnerUnlocked,d=l.ownDeposit;return f.isZero()||d.isZero()?L["a"]:Object(Lt["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n,r=Oy(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&f.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(Is["a"])(1),Object(W["a"])((function(e){var i=Oy(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,f=u.partner.balanceProof,d=ho(f),p=Object(_["concat"])([ao(u.tokenNetwork,20),ao(r.chainId,32),ao(fo.BALANCE_PROOF_UPDATE,32),ao(u.id,32),ao(d,32),ao(f.nonce,32),ao(f.additionalHash,32),ao(f.signature,65)]);return Object(Pt["a"])(a.signMessage(p)).pipe(Object(W["a"])((function(e){return Eo(a,{type:Bn.MONITOR_REQUEST,balance_proof:{chain_id:f.chainId,token_network_address:f.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:f.nonce,balance_hash:d,additional_hash:f.additionalHash,signature:f.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return Zr({message:e},{roomName:l})})))})),Object(Bt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),L["a"]})))}}var Uy=function(e,t,n){return gy(e),gy(t),n.latest$.pipe(Object(H["a"])("state"),Hi,Object(Ls["a"])(n.config$),Object(W["a"])((function(e){var t=Oy(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(pi["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(Jb["a"])(),Object(ey["a"])((function(e){var t=Oy(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(Ns["a"])(a):Object(D["a"])(1)})),Object(xl["a"])(Ly(n)))})))},My=function(e,t,n){gy(t);var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer;return e.pipe(Object(B["a"])(Ia.request.is),Object(W["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(kl["a"])((function(e){var t=Oy(e,2),n=t[0],c=t[1],s=Bu(r,i),u=n.meta.amount;return Object(P["a"])((function(){return bt(u.gt(k["Zero"]),[ft.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:u.toString()}]),bt(c.sub(u).gte(k["Zero"]),[ft.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:c.toString(),amount:u.toString()}]),s.functions.planWithdraw(u)})).pipe(Wi("planWithdraw",ft.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Object(W["a"])((function(e){var t=e.transactionHash,n=e.blockNumber;return Object(Pt["a"])(r.functions.withdraw_plans(a)).pipe(Object(M["a"])((function(e){var r=e.amount,a=e.withdraw_block;return Ia.success({block:a.toNumber(),txHash:t,txBlock:n,confirmed:void 0},{amount:r})})))})),Object(Bt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(D["a"])(Ia.failure(e,n.meta))})))})))},By=function(e,t,n){gy(e),gy(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ia.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},Fy=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer;return e.pipe(Object(B["a"])(Ia.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object(W["a"])((function(e){return t.pipe(Object(H["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(Ps["a"])(e))})),Object(W["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(kl["a"])((function(e){var t=Oy(e,2),n=t[0],c=t[1],s=Bu(a,i);return Object(P["a"])((function(){return bt(c.gt(k["Zero"]),[ft.UDC_WITHDRAW_NO_BALANCE,{balance:c.toString()}]),s.functions.withdraw(n.meta.amount)})).pipe(Wi("withdraw",ft.UDC_WITHDRAW_FAILED,{log:r}),Object(kl["a"])((function(e){var t=e.transactionHash,r=e.blockNumber;return Object(P["a"])((function(){return s.functions.balances(o)})).pipe(Object(M["a"])((function(e){return Pa({withdrawal:c.sub(e),txHash:t,txBlock:r,confirmed:void 0},n.meta)})))})),Object(Bt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(D["a"])(Ia.failure(e,n.meta))})))})))},Wy=function(e,t,n){gy(e);var r=n.monitoringServiceContract,a=n.address;return rn(r,[r.filters.NewBalanceProofReceived(null,null,null,null,null,a)]).pipe(Object(B["a"])((function(e){var t=Oy(e,6),n=t[5];return n===a})),Object(Ls["a"])(t),Object(M["a"])((function(e){var t=Oy(e,2),n=Oy(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)}));if(l)return La({tokenNetwork:r,partner:l.partner.address,id:l.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:s.blockNumber,confirmed:void 0})})),Object(B["a"])(gt))};function Hy(e,t,n){return e.pipe(Object(B["a"])(Pn(ar,{address:n})),Object(Is["a"])(1),Object(W["a"])((function(e){if(ar.success.is(e))return t.latest$.pipe(Object(F["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function $y(e,t,n){Vy(e,n);var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value,c=n.state,s=n.presences;if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===sy(c,s,a,o,o,i))return Object(D["a"])({paths:[{path:[t.address,e.meta.target],fee:k["Zero"]}],iou:void 0});if(Ky(e,n))throw new pt(ft.PFS_DISABLED);return Gy(e,t,n)}function qy(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Pt["a"])(p.a.mark((function s(){var u;return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!Jy(n)){s.next=6;break}return s.next=4,Na({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,Ra(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!tm(c)){s.next=13;break}throw new pt(ft.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new pt(ft.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=Zy(e,t,r,i),!u.length){s.next=20;break}return s.next=18,Sa.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new pt(ft.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function Vy(e,t){var n,r=e.meta,a=r.tokenNetwork,o=r.target,i=t.state,c=t.presences;if(!Object.values(i.tokens).includes(a))throw new pt(ft.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:a});if(!c[o].payload.available)throw new pt(ft.PFS_TARGET_OFFLINE,{target:o});if(null===(n=c[o].payload.caps)||void 0===n?void 0:n[De.NO_RECEIVE])throw new pt(ft.PFS_TARGET_NO_RECEIVE,{target:o})}function Ky(e,t){var n=null===e.payload.pfs,r=!e.payload.pfs&&null===t.config.pfs;return n||r}function Gy(e,t,n){var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value;return Yy(e.payload.pfs,n.config.pfs,t).pipe(Object(W["a"])((function(e){return Xy(e,a,t)})),Object(W["a"])((function(e){var r=e.pfs,c=e.iou;return Qy(r,c,a,t.address,o,i,n.config.httpTimeout)})),Object(M["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return zy(t,r,a,n.config.pfsSafetyMargin)})))}function Zy(e,t,n,r){var a=t.address,o=t.log,i=[],c=new Set;if(r){var s,u=by(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,f=l.path,d=l.fee,p=em(f,a),b=p[0],y=!1,m="";if(!c.has(b)){if(0===i.length){var h=e.meta,v=h.tokenNetwork,g=h.target,O=h.value,w=n.state,_=n.presences,k=sy(w,_,v,b,g,O);y=!0===k,m="string"===typeof k?k:""}else b!==i[0].path[0]?m="path: already selected another recipient":d.gt(i[0].fee)?m="path: already selected a smaller fee":y=!0;y?i.push({path:p,fee:d}):(o.warn("Invalidated received route. Reason:",m,"Route:",p),c.add(b))}}}catch(j){u.e(j)}finally{u.f()}}return i}function Yy(e,t,n){if(e)return Object(D["a"])(e);if(t)return ly(t,n);var r=n.log,a=n.latest$;return a.pipe(Object(H["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object(W["a"])((function(e){return fy(e,n)})),Object(ui["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(H["a"])(0))}function Xy(e,t,n){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):Ny(e,t,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))}function Qy(e,t,n,r,a,o,i){var c=this,s=so({from:r,to:a,value:kt(32).encode(o),max_paths:10,iou:t?Object.assign(Object.assign({},t),{amount:kt(32).encode(t.amount),expiration_block:kt(32).encode(t.expiration_block),chain_id:kt(32).encode(t.chain_id)}):void 0});return Object(jl["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:s}).pipe(Object(wl["a"])(i),Object(W["a"])((function(e){return Ty(c,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,e.text();case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",{pfsResponse:n.t0,responseText:n.t1,iou:n.t2});case 6:case"end":return n.stop()}}),n)})))})))}function zy(e,t,n,r){var a=co(t);if(e.ok){var o=vt(zr,a).result,i=o.map((function(e){var t=e.path,n=e.estimated_fee,a=n.mul(Math.round(1e6*r)).div(1e6);return{path:t,fee:a}}));return{paths:i,iou:n}}var c=vt(Ay,a);return{iou:n,error:c}}function Jy(e){var t=e.paths,n=e.error;return void 0!==t||tm(n)}function em(e,t){return e[0]===t?e.slice(1):e}function tm(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rm(e,t){return sm(e)||cm(e,t)||om(e,t)||am()}function am(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function om(e,t){if(e){if("string"===typeof e)return im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?im(e,t):void 0}}function im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sm(e){if(Array.isArray(e))return e}function um(e,t,n){var r=t.pipe(ji("config"));return Object(Lt["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=rm(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(nm({},De.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(pi["a"])(ms.a))}function lm(e,t,n){var r=n.defaultConfig,a=e.pipe(Object(B["a"])(Ca.is),Object(H["a"])("payload"),Object(fs["a"])(k["MaxUint256"])),o=um(r,t,a),i=Es(e),c=e.pipe(Object(B["a"])(xa.is),Object(H["a"])("payload","pfsList"),Object(fs["a"])([])),s=e.pipe(Object(B["a"])(cr.is),Object(bi["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),nm({},t.meta.address,t.payload)):ii()(t.meta.address,e)}),{}),Object(fs["a"])({}));return Object(Lt["a"])([Object(Lt["a"])([e,t,o,i,c,s]),Object(Lt["a"])([a])]).pipe(Object(M["a"])((function(e){var t=rm(e,2),n=rm(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=rm(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}var fm=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),f),dm=function(e,t,n){var r=e.pipe(Object(B["a"])(Rn(Ma))),a=e.pipe(Object(ds["a"])(bs()(Rn(Ma)),!0)),o=t.pipe(Object(fi["a"])(r));return lm(a,o,n).subscribe(n.latest$),Object(Pt["a"])(Object.values(fm)).pipe(Object(W["a"])((function(e){return e(a,o,n)})),Object(Bt["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(Ma({reason:e}))})),Object(fi["a"])(r))};function pm(e){return mm(e)||ym(e)||gm(e)||bm()}function bm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ym(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function mm(e){if(Array.isArray(e))return Om(e)}function hm(e,t){return _m(e)||wm(e,t)||gm(e,t)||vm()}function vm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gm(e,t){if(e){if("string"===typeof e)return Om(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Om(e,t):void 0}}function Om(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _m(e){if(Array.isArray(e))return e}function km(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Em(e,t,n){return t&&jm(e.prototype,t),n&&jm(e,n),e}var Tm=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Am=function(){function e(t,n,r,a,o,i,c){var s,u,l,f,d,b=this;km(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new R["a"](1);this.state$=h.pipe(ji("state")),this.action$=h.pipe(ji("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(ji("channels"),Object(M["a"])(Uu)),this.transfers$=Lu(this.state$),this.events$=this.action$.pipe(Object(B["a"])(Rn(Wa))),this.getTokenInfo=N()((function(e){return Tm(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=hm(r,4),o=a[0],i=a[1],c=a[2],s=a[3],bt(o&&null!=i,ft.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:h,config$:h.pipe(ji("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:ke.connect(a.SecretRegistry.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),monitoringServiceContract:xe.connect(a.MonitoringService.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),main:c},this.userDepositTokenAddress=N()((function(){return Tm(b,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.config$.pipe(ji("logger")).subscribe((function(e){return b.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(ls,o,Object(j["a"])(v,this.epicMiddleware)),lm(Object(D["a"])(Ba({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return Em(e,[{key:"start",value:function(){var e=this;bt(this.epicMiddleware,ft.RDN_ALREADY_STARTED,this.log.info),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(dm),this.epicMiddleware=void 0,this.store.dispatch(Ba({}))}},{key:"stop",value:function(){this.store.dispatch(Ma({reason:Ce.STOP}))}},{key:"getBlockNumber",value:function(){return Tm(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(Ba(vt(pn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Mu(this.deps,this.config.subkey).address,bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Tm(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:Mu(this.deps,this.config.subkey).address,bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{address:t}],this.log.info),bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Tm(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Tm(this,void 0,void 0,p.a.mark((function t(){var n;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens[e],!n){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return n=t.sent,bt(n&&n!==k["AddressZero"],ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Gn({token:e,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Tm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,f,d;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,bt(!n.subkey||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),i=n.settleTimeout?vt(kt(4),n.settleTimeout,ft.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=n.deposit?vt(kt(32),n.deposit,ft.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:t},u=Un(Zn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Un(Xn,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Zn.request(Object.assign(Object.assign({},n),{settleTimeout:i,deposit:c}),s)),a.next=14,u;case 14:return f=a.sent,null===r||void 0===r||r({type:Se.OPENED,payload:{txHash:f}}),a.next=18,this.state$.pipe(ji("channels",Ui({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===po.open}))).toPromise();case 18:if(null===r||void 0===r||r({type:Se.CONFIRMED,payload:{txHash:f}}),!l){a.next=24;break}return a.next=22,l;case 22:d=a.sent,null===r||void 0===r||r({type:Se.DEPOSITED,payload:{txHash:d}});case 24:return a.abrupt("return",f);case 25:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Tm(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],bt(i,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!a||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),c=vt(kt(32),n,ft.DTA_INVALID_DEPOSIT,this.log.info),s={tokenNetwork:i,partner:t},u=Un(Xn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Xn.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Tm(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Un(zn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(zn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Tm(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Un(er,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(er.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Tm(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=Un(ar,n,this.action$),this.store.dispatch(ar.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Tm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,f,d,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n,ft.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==r.paymentId?vt(kt(8),r.paymentId,ft.DTA_INVALID_PAYMENT_ID,this.log.info):ru(),s=r.paths?vt(Jr,r.paths,ft.DTA_INVALID_PATH,this.log.info):void 0,u=r.pfs?vt(ea,r.pfs,ft.DTA_INVALID_PFS,this.log.info):void 0,bt(void 0===r.secret||Tt.is(r.secret),ft.RDN_INVALID_SECRET,this.log.info),bt(void 0===r.secrethash||Et.is(r.secrethash),ft.RDN_INVALID_SECRETHASH,this.log.info),l=r.secret?r.secret:r.secrethash?void 0:nu(),f=r.secrethash||tu(l),bt(!l||tu(l)===f,ft.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),d={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Pn(Sa,d)),Object(M["a"])((function(e){if(Sa.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return b.store.dispatch(Sa.request({paths:s,pfs:u},d)),L["a"]}))).pipe(Object(W["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(B["a"])(Rn([la,ua.failure])),Object(F["a"])((function(e){return e.meta.direction===ra.SENT&&e.meta.secrethash===f})),Object(M["a"])((function(e){if(ua.failure.is(e))throw e.payload;return iu(e.meta)}))),Object(P["a"])((function(){return b.store.dispatch(ua.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:f,direction:ra.SENT})),L["a"]})))}))).toPromise());case 15:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Tm(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=su(e),c=i.direction,s=i.secrethash,bt(s in this.state[c],ft.RDN_UNKNOWN_TRANSFER,this.log.info),u=fu(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new pt(ft.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,Un(ua,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Tm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n),c=r.pfs?vt(ea,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Un(Sa,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Sa.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Tm(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],bt(a,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=vt(kt(32),n),i={tokenNetwork:a,target:t,value:o},c=Un(Sa,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Sa.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Tm(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt(null!==this.config.pfs,ft.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(ji("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object(W["a"])((function(e){return fy(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.to;return Tm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,f;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(!r||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),bt(1!==this.deps.network.chainId,ft.RDN_MINT_MAINNET,this.log.info),o=Mu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,s=pe.connect(e,i),u=null!==a&&void 0!==a?a:c,bt(St.is(u),[ft.DTA_INVALID_ADDRESS,{beneficiary:u}],this.log.info),l=vt(kt(32),t,ft.DTA_INVALID_AMOUNT),n.next=10,Fu(s,"mintFor",[l,u],ft.RDN_MINT_FAILED,{log:this.log});case 10:return f=n.sent,n.next=13,Wu(f,this.deps,1);case 13:return n.abrupt("return",f.transactionHash);case 14:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Tm(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(H["a"])("udcBalance"),Object(F["a"])(gt)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(pm(e),pm(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return Tm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,f,d,b,y,m;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(!r||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(_["bigNumberify"])(e),bt(o.gt(k["Zero"]),ft.DTA_NON_POSITIVE_NUMBER,this.log.info),i=Mu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=Bu(this.deps.userDepositContract,c),n.t0=Bu,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return f=n.sent,bt(f.gte(e),[ft.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:f.toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),bt(!a||Object(_["bigNumberify"])(a).gte(e),[ft.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(_["bigNumberify"])(f).toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(d=n.sent,b=k["HashZero"],!d.lt(o)){n.next=26;break}return n.next=25,Fu(l,"approve",[u.address,null!==a&&void 0!==a?a:o],ft.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:Se.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,Fu(u,"deposit",[this.address,y.add(o)],ft.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return m=n.sent,null===t||void 0===t||t({type:Se.DEPOSITED,payload:{txHash:m.transactionHash}}),n.next=36,Wu(m,this.deps);case 36:return this.log.debug('deposit tx "'.concat(m.transactionHash,'" confirmed')),null===t||void 0===t||t({type:Se.CONFIRMED,payload:{txHash:m.transactionHash}}),n.abrupt("return",m.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Tm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,f,d,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{to:e}],this.log.info),bt(!r||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),o=Mu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(_["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(_["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,f=l.sub(s.mul(u)),bt(f.gt(k["Zero"]),[ft.RDN_INSUFFICIENT_BALANCE,{transferable:f.toString()}],this.log.info),d=f.lte(t)?f:Object(_["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:d,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,bt(y.status,ft.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Tm(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,f;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{to:t}],this.log.info),bt(!a||this.deps.main,ft.RDN_SUBKEY_NOT_SET,this.log.info),o=Mu(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=Bu(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(_["bigNumberify"])(n),r.next=11,Fu(s,"transfer",[t,l],ft.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return f=r.sent,r.abrupt("return",f.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"planUdcWithdraw",value:function(e){return Tm(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:vt(kt(32),e,ft.DTA_INVALID_AMOUNT,this.log.error)},r=Un(Ia,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ia.request(void 0,n)),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"withdrawChannel",value:function(e,t,n){return Tm(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s,u,l,f,d,b;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[ft.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[ft.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state.tokens[e],bt(a,ft.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[Ui({tokenNetwork:a,partner:t})],bt((null===o||void 0===o?void 0:o.state)===po.open,ft.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Fi(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=vt(kt(32),null!==n&&void 0!==n?n:c,ft.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),f=this.state.blockNumber+2*this.config.revealTimeout,d={direction:ra.SENT,tokenNetwork:a,partner:t,totalWithdraw:l,expiration:f},b=Un(_a,d,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(_a.request(void 0,d)),r.abrupt("return",b);case 14:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(e,t,n,r,a,o){return Tm(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,f,d,b,y,m,h,v,g,O;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new w["JsonRpcProvider"](e):e instanceof w["JsonRpcProvider"]?e:new w["Web3Provider"](e),on(c),i.next=4,c.getNetwork();case 4:if(s=i.sent,r){i.next=9;break}u=Du(s),i.next=17;break;case 9:if("string"!==typeof r){i.next=16;break}return bt(St.is(r),[ft.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:r}]),i.next=13,$u(c,r);case 13:u=i.sent,i.next=17;break;case 16:u=r;case 17:return i.next=19,Pu(t,c,o);case 19:return l=i.sent,f=l.signer,d=l.address,b=l.main,i.next=25,ai(s,u,d,n,a&&vt(pn,a));case 25:return y=i.sent,m=y.state,h=y.onState,v=y.onStateComplete,g=y.defaultConfig,bt(d===m.address,[ft.RDN_STATE_ADDRESS_MISMATCH,{account:d,state:m.address}]),bt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[ft.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),O=new this(c,s,f,u,m,g,b),h&&O.state$.subscribe(h,v,v),i.abrupt("return",O);case 35:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Re.sdk}},{key:"contractVersion",get:function(){return Re.contracts}}]),e}()},f9be:function(e,t,n){"use strict";var r=n("f402"),a=n.n(r);a.a},fe4d:function(e,t,n){}});
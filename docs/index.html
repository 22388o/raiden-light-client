<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>raiden-ts | Raiden Light Client SDK</title>
    <meta name="description" content="API Documentation for the Raiden Light Client SDK">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.3abad139.css" as="style"><link rel="preload" href="/docs/assets/js/app.887f3327.js" as="script"><link rel="preload" href="/docs/assets/js/2.5c8deaaf.js" as="script"><link rel="preload" href="/docs/assets/js/5.a317165e.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.57f5a984.js"><link rel="prefetch" href="/docs/assets/js/11.75055626.js"><link rel="prefetch" href="/docs/assets/js/12.a6e75cd7.js"><link rel="prefetch" href="/docs/assets/js/13.6f0745d5.js"><link rel="prefetch" href="/docs/assets/js/14.f984c4f3.js"><link rel="prefetch" href="/docs/assets/js/15.fde16082.js"><link rel="prefetch" href="/docs/assets/js/16.3c444d2c.js"><link rel="prefetch" href="/docs/assets/js/17.ddfe6601.js"><link rel="prefetch" href="/docs/assets/js/18.7553aeb0.js"><link rel="prefetch" href="/docs/assets/js/19.7656bd62.js"><link rel="prefetch" href="/docs/assets/js/20.f740ce4b.js"><link rel="prefetch" href="/docs/assets/js/21.b9d18d34.js"><link rel="prefetch" href="/docs/assets/js/22.2291182a.js"><link rel="prefetch" href="/docs/assets/js/23.eec49a76.js"><link rel="prefetch" href="/docs/assets/js/24.191e48f6.js"><link rel="prefetch" href="/docs/assets/js/25.03959262.js"><link rel="prefetch" href="/docs/assets/js/26.beb1f2b2.js"><link rel="prefetch" href="/docs/assets/js/27.4d87d04c.js"><link rel="prefetch" href="/docs/assets/js/28.fe15e603.js"><link rel="prefetch" href="/docs/assets/js/29.96a47a49.js"><link rel="prefetch" href="/docs/assets/js/3.e83dc7f9.js"><link rel="prefetch" href="/docs/assets/js/30.34c0a3d0.js"><link rel="prefetch" href="/docs/assets/js/31.8459ea0c.js"><link rel="prefetch" href="/docs/assets/js/32.45dd4366.js"><link rel="prefetch" href="/docs/assets/js/33.2e92d344.js"><link rel="prefetch" href="/docs/assets/js/34.43a7f47e.js"><link rel="prefetch" href="/docs/assets/js/35.6aae04a2.js"><link rel="prefetch" href="/docs/assets/js/36.808b6165.js"><link rel="prefetch" href="/docs/assets/js/37.e26b799f.js"><link rel="prefetch" href="/docs/assets/js/38.77e3da8b.js"><link rel="prefetch" href="/docs/assets/js/39.4fa2d061.js"><link rel="prefetch" href="/docs/assets/js/4.4f698e63.js"><link rel="prefetch" href="/docs/assets/js/40.50eca5ec.js"><link rel="prefetch" href="/docs/assets/js/41.2427d95c.js"><link rel="prefetch" href="/docs/assets/js/42.aa870e67.js"><link rel="prefetch" href="/docs/assets/js/43.96d275fe.js"><link rel="prefetch" href="/docs/assets/js/44.3cef4a60.js"><link rel="prefetch" href="/docs/assets/js/45.dd159ff9.js"><link rel="prefetch" href="/docs/assets/js/46.f9038111.js"><link rel="prefetch" href="/docs/assets/js/47.2be8934a.js"><link rel="prefetch" href="/docs/assets/js/48.20e9e740.js"><link rel="prefetch" href="/docs/assets/js/49.e0a7682a.js"><link rel="prefetch" href="/docs/assets/js/50.91a4a1b9.js"><link rel="prefetch" href="/docs/assets/js/51.ebf497dd.js"><link rel="prefetch" href="/docs/assets/js/52.61f3fd48.js"><link rel="prefetch" href="/docs/assets/js/53.f93c49b2.js"><link rel="prefetch" href="/docs/assets/js/54.84e9fbc1.js"><link rel="prefetch" href="/docs/assets/js/55.a1588e79.js"><link rel="prefetch" href="/docs/assets/js/56.6c832c34.js"><link rel="prefetch" href="/docs/assets/js/57.053b8ffa.js"><link rel="prefetch" href="/docs/assets/js/58.f9c997c1.js"><link rel="prefetch" href="/docs/assets/js/59.d8d439ee.js"><link rel="prefetch" href="/docs/assets/js/6.57ebccac.js"><link rel="prefetch" href="/docs/assets/js/60.d9dc8c6f.js"><link rel="prefetch" href="/docs/assets/js/61.1e381481.js"><link rel="prefetch" href="/docs/assets/js/62.3591d15a.js"><link rel="prefetch" href="/docs/assets/js/7.0962c60d.js"><link rel="prefetch" href="/docs/assets/js/8.a679e96f.js"><link rel="prefetch" href="/docs/assets/js/9.722f9c1d.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.3abad139.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Raiden Light Client SDK</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://raiden.network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Raiden Network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.raiden.network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Portal
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/raiden-network/light-client" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://raiden.network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Raiden Network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.raiden.network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Portal
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/raiden-network/light-client" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Classes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/classes/customtokenfactory.html" class="sidebar-link">Class: CustomTokenFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/customtokenfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/customtokenfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/depositfactory.html" class="sidebar-link">Class: DepositFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/depositfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/depositfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/humanstandardtokenfactory.html" class="sidebar-link">Class: HumanStandardTokenFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/humanstandardtokenfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/humanstandardtokenfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/lrucache.html" class="sidebar-link">Class: LruCache</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/lrucache.html#type-parameters" class="sidebar-link">Type parameters</a></li><li class="sidebar-sub-header"><a href="/docs/classes/lrucache.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/lrucache.html#constructors" class="sidebar-link">Constructors</a></li><li class="sidebar-sub-header"><a href="/docs/classes/lrucache.html#properties" class="sidebar-link">Properties</a></li><li class="sidebar-sub-header"><a href="/docs/classes/lrucache.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/monitoringservicefactory.html" class="sidebar-link">Class: MonitoringServiceFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/monitoringservicefactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/monitoringservicefactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/onetonfactory.html" class="sidebar-link">Class: OneToNFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/onetonfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/onetonfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/raiden.html" class="sidebar-link">Class: Raiden</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/raiden.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/raiden.html#constructors" class="sidebar-link">Constructors</a></li><li class="sidebar-sub-header"><a href="/docs/classes/raiden.html#properties" class="sidebar-link">Properties</a></li><li class="sidebar-sub-header"><a href="/docs/classes/raiden.html#accessors" class="sidebar-link">Accessors</a></li><li class="sidebar-sub-header"><a href="/docs/classes/raiden.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/secretregistryfactory.html" class="sidebar-link">Class: SecretRegistryFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/secretregistryfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/secretregistryfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/serviceregistryconfigurableparametersfactory.html" class="sidebar-link">Class: ServiceRegistryConfigurableParametersFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/serviceregistryconfigurableparametersfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/serviceregistryconfigurableparametersfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/serviceregistryfactory.html" class="sidebar-link">Class: ServiceRegistryFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/serviceregistryfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/serviceregistryfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/standardtokenfactory.html" class="sidebar-link">Class: StandardTokenFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/standardtokenfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/standardtokenfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/tokenfactory.html" class="sidebar-link">Class: TokenFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/tokenfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/tokenfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/tokennetworkfactory.html" class="sidebar-link">Class: TokenNetworkFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/tokennetworkfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/tokennetworkfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/tokennetworkregistryfactory.html" class="sidebar-link">Class: TokenNetworkRegistryFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/tokennetworkregistryfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/tokennetworkregistryfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/udctransferfactory.html" class="sidebar-link">Class: UDCTransferFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/udctransferfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/udctransferfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/userdepositfactory.html" class="sidebar-link">Class: UserDepositFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/userdepositfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/userdepositfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li><li><a href="/docs/classes/utilsfactory.html" class="sidebar-link">Class: UtilsFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/classes/utilsfactory.html#hierarchy" class="sidebar-link">Hierarchy</a></li><li class="sidebar-sub-header"><a href="/docs/classes/utilsfactory.html#methods" class="sidebar-link">Methods</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Enums</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interfaces</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="raiden-ts"><a href="#raiden-ts" aria-hidden="true" class="header-anchor">#</a> raiden-ts</h1> <h2 align="center"><br> <a href="https://raiden.network/"><img width="400px" alt="" src="https://user-images.githubusercontent.com/35398162/54018436-ee3f6300-4188-11e9-9b4e-0666c44cda53.png"></a> <br>
  Raiden Light Client SDK
  <br></h2> <h4 align="center"><a href="https://lightclient.raiden.network/docs/">Full documentation</a></h4> <p>The Raiden Light Client SDK is a <a href="https://raiden.network" target="_blank" rel="noopener noreferrer">Raiden Network<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> compatible client written in JavaScript/Typescript, capable of running in modern web3-enabled browsers, wallets and Node.js environments.</p> <blockquote><p><strong>INFO:</strong> The Light Client SDK is <strong>work in progress</strong>, doesn't work for token transfers yet and currently can only be used on the Ethereum <strong>Testnets</strong>.</p></blockquote> <h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of Contents</h2> <ul><li><a href="#about-the-project">About The Project</a></li> <li><a href="#getting-started">Getting Started</a> <ul><li><a href="#connecting-to-a-raiden-test-network">Connecting to a Raiden test network</a></li> <li><a href="#using-the-sdk-in-a-private-chain-or-a-development-environment">Using the SDK in a private chain or a development environment</a></li> <li><a href="#subscribing-to-channel-observable-and-opening-your-first-channel">Subscribing to channel$ observable and opening your first channel</a></li> <li><a href="#funding-a-channel">Funding a channel</a></li> <li><a href="#paying-through-a-channel">Paying through a channel</a></li> <li><a href="#closing-a-channel">Closing a channel</a></li> <li><a href="#settling-a-channel">Settling a channel</a></li> <li><a href="#other-methods">Other methods</a></li></ul></li> <li><a href="#contributing">Contributing</a></li> <li><a href="#license">License</a></li></ul> <h2 id="about-the-project"><a href="#about-the-project" aria-hidden="true" class="header-anchor">#</a> About The Project</h2> <p>The <a href="https://raiden.network/" target="_blank" rel="noopener noreferrer">Raiden Network<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is an off-chain scaling solution, enabling near-instant, low-fee and scalable payments. It’s complementary to the Ethereum blockchain and works with any ERC20 compatible token.</p> <p>The Raiden client code is available <a href="https://github.com/raiden-network/raiden" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and has been <a href="https://medium.com/raiden-network/red-eyes-mainnet-release-announcement-d48235bbef3c" target="_blank" rel="noopener noreferrer">released for mainnet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with a limited alpha release of the Raiden Network in December 2018.</p> <p>The main entry point of the SDK is the <code>Raiden</code> class, which exposes an <code>async</code>/promise-based public API to fetch state, events and perform every action provided by the SDK on the blockchain and the Raiden Network.</p> <p>Internally, the SDK architecture is a Redux-powered state machine, where every blockchain event, user request and off-chain message from other Raiden nodes and service providers follows an unified flow as actions on this state machine. These actions produce deterministic changes to the state and may cause other actions to be emitted as well. Asynchronous operations are handled by a pipeline of <a href="https://redux-observable.js.org" target="_blank" rel="noopener noreferrer">redux-observable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> epics, an <a href="https://rxjs.dev/" target="_blank" rel="noopener noreferrer">RxJs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> async extension for Redux which unleashes the power, versatility and correctness of observables to Redux actions processing. These epics interact with the blockchain through <a href="https://github.com/ethers-io/ethers.js" target="_blank" rel="noopener noreferrer">ethers.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> providers, signers and contracts, allowing seamless integration with different web3 providers, such as <a href="https://metamask.io/" target="_blank" rel="noopener noreferrer">Metamask<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Redux state is optionally persisted on <code>localStorage</code> or emitted to be persisted somewhere else. Tests are implemented with <a href="https://jestjs.io" target="_blank" rel="noopener noreferrer">Jest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>External off-chain communication with the Raiden Network is provided by a dedicated federation of community-provided <a href="https://matrix.org" target="_blank" rel="noopener noreferrer">matrix.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> homeservers, accessed through <a href="https://github.com/matrix-org/matrix-js-sdk" target="_blank" rel="noopener noreferrer">matrix-js-sdk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="architecture-diagram"><a href="#architecture-diagram" aria-hidden="true" class="header-anchor">#</a> Architecture diagram</h3> <div class="language- extra-class"><pre class="language-text"><code>            +---------+---------+
            |                   |
            |    Raiden SDK     |
            |                   |
            +----+----+----+----+
            |         |         |      +------------+
         +--+  redux  +  epics  +------+ Matrix.org |
         |  |         |         |      +-----+------+
         |  +---------+-----+---+            |
         |                  |          +-----+------+
+--------+-------+   +------+------+   |   Raiden   |
|  localStorage  |   |  ethers.js  |   |   Network  |
+----------------+   +------+------+   +------------+
                            |
                     +------+------+
                     |  ethereum   |
                     +-------------+
</code></pre></div><p>A technical deep dive into the SDK architecture, technologies, tips and details on the design goals and decisions can be found in the <a href="https://github.com/raiden-network/light-client/wiki/SDK-Development" target="_blank" rel="noopener noreferrer">project's Wiki page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Reading it is highly recommended to anyone wishing to better understand how the Raiden Light Client works under the hood or to contribute to it, though not required to use this library as a dApp developer.</p> <h2 id="getting-started"><a href="#getting-started" aria-hidden="true" class="header-anchor">#</a> Getting Started</h2> <p>Go to the <a href="https://lightclient.raiden.network/docs/#getting-started" target="_blank" rel="noopener noreferrer">full documentation including this readme and the documentation of the SDK classes, enums and interfaces.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> raiden-ts
</code></pre></div><p>Then in your JavaScript or TypeScript project:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Raiden <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'raiden-ts'</span><span class="token punctuation">;</span>

# <span class="token keyword">async</span> factory
<span class="token keyword">const</span> raiden <span class="token operator">=</span> <span class="token keyword">await</span> Raiden<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This async factory is required as a lot of initialization code is asynchronous, and we want to provide simpler building blocks for you to get from zero to iterating with the Raiden Network through this SDK in the simplest way possible. Despite that, if you're brave enough or have the need, you can always create the instances and fill the constructor parameters by yourself. Just be very careful to persist and rehydrate the state and constants correctly before starting.</p> <p>After you're done, you may want to call <code>raiden.stop()</code> to trigger all observables to complete and streams to be unsubscribed. It's not required though, as state changes are atomic (non-async) and Raiden can be rehydrated from any intermediary state. However, if you finish before an asynchronous operation was completed, you may need to re-send it. e.g. if you call <code>raiden.closeChannel</code> and your app exits before the transaction was sent and the promise resolved, your channel will be left in the <code>closing</code> state (as state was already notified and persisted that this channel was about to be closed and couldn't be used anymore), and you may need to call <code>closeChannel</code> again to actually send the transaction (even over the <code>closing</code> state) and wait until it is mined and your channel actually becomes <code>closed</code>.</p> <p>Once you got your <code>raiden</code> instance, the public API should be pretty straightforward: most of the methods return Promises, allowing you to async/await on them, and output comes either from the resolved value or public Observables which exposes current state and state changes to the world on common parameters (like token address instead of specific token network contract address).</p> <p>Channels are mostly specified through the first two parameters: <code>token</code> and <code>partner</code> addresses, as Raiden contracts currently limit the number of channels in open at any given time to some specific partner to 1.</p> <h3 id="connecting-to-a-raiden-test-network"><a href="#connecting-to-a-raiden-test-network" aria-hidden="true" class="header-anchor">#</a> Connecting to a Raiden test network</h3> <p>Connecting to a Raiden test network is automatically done by the Light Client SDK. The SDK will automatically connect to the proper Raiden network based on the detected network id on your web3 provider.</p> <p>The SDK provides out of the box support for the deployed networks on Ropsten, Rinkeby, Kovan, and Mainnet.</p> <p>If you want you can also use the Light Client SDK to connect to networks that are not officially supported.</p> <p>To connect for example on a privately deployed Raiden network,
you can initialize the SDK as usual, and pass the Contract Info as the fourth parameter of the create function.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Raiden <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'raiden-ts'</span><span class="token punctuation">;</span>

# <span class="token keyword">async</span> factory
<span class="token keyword">const</span> raiden <span class="token operator">=</span> <span class="token keyword">await</span> Raiden<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">,</span> contractInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Contract info is a JSON file that is generated when you deploy <a href="https://github.com/raiden-network/raiden-contracts" target="_blank" rel="noopener noreferrer">raiden-contracts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="using-the-sdk-in-a-private-chain-or-a-development-environment"><a href="#using-the-sdk-in-a-private-chain-or-a-development-environment" aria-hidden="true" class="header-anchor">#</a> Using the SDK in a private chain or a development environment</h3> <p>If you want to use the SDK in a private chain or a development environment, you can follow <a href="https://github.com/raiden-network/light-client/wiki/Using-the-SDK-in-a-private-chain-or-a-development-environment" target="_blank" rel="noopener noreferrer">this guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="subscribing-to-channel-observable-and-opening-your-first-channel"><a href="#subscribing-to-channel-observable-and-opening-your-first-channel" aria-hidden="true" class="header-anchor">#</a> Subscribing to channel$ observable and opening your first channel</h3> <p>To connect to the Raiden Network, you simply make a transaction to open a channel on-chain with a given partner on a registered token network. You can also specify a <code>settleTimeout</code>, which will be the number of blocks you and your partner will need to wait after closing a channel to be able to settle it and actually get the due tokens back. <code>settleTimeout</code> defaults to <code>500</code></p> <div class="language- extra-class"><pre class="language-text"><code>import { RaidenChannel } from 'raiden-ts';

# logs channels$ changes
raiden.channels$.subscribe(
  (channels: { [token: string]: { [partner: string]: RaidenChannel } }) =&gt;
    console.log('Raiden channels:', channels)
);

# get list of registered tokens
await raiden.getTokenList();
# ['0xtoken']

# open a Raiden payment channel!
const openTxHash = await raiden.openChannel('0xtoken', '0xpartner');

## output:
# Raiden channels: {
#   '0xtoken': {
#     '0xpartner': {
#       token: '0xtoken',
#       tokenNetwork: '0xtokenNetwork',
#       partner: '0xpartner',
#       state: 'open',
#       ownDeposit: BigNumber(0),
#       partnerDeposit: BigNumber(0),
#       id: 123,
#       settleTimeout: 500,
#       openBlock: 5123,
#       balance: BigNumber(0),
#       capacity: BigNumber(0),
#     }
#   }
# }
</code></pre></div><h3 id="funding-a-channel"><a href="#funding-a-channel" aria-hidden="true" class="header-anchor">#</a> Funding a channel</h3> <p>If you intend to perform payments via a channel, you need to first lock a given amount of tokens in it. Note that these tokens aren't paid yet to the partner, and the custody is fully yours. It just locks this amount on-chain so your partner can be sure a given payment can be claimed.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>raiden<span class="token punctuation">.</span><span class="token function">depositChannel</span><span class="token punctuation">(</span><span class="token string">'0xtoken'</span><span class="token punctuation">,</span> <span class="token string">'0xpartner'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

# Raiden channels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
#   <span class="token string">'0xtoken'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#     <span class="token string">'0xpartner'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#       token<span class="token punctuation">:</span> <span class="token string">'0xtoken'</span><span class="token punctuation">,</span>
#       tokenNetwork<span class="token punctuation">:</span> <span class="token string">'0xtokenNetwork'</span><span class="token punctuation">,</span>
#       partner<span class="token punctuation">:</span> <span class="token string">'0xpartner'</span><span class="token punctuation">,</span>
#       state<span class="token punctuation">:</span> <span class="token string">'closed'</span><span class="token punctuation">,</span>
#       ownDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       partnerDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
#       settleTimeout<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
#       openBlock<span class="token punctuation">:</span> <span class="token number">5123</span>
#       balance<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// total received minus sent</span>
#       capacity<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// current spendable amount on channel</span>
#     <span class="token punctuation">}</span>
#   <span class="token punctuation">}</span>
# <span class="token punctuation">}</span>
</code></pre></div><h3 id="paying-through-a-channel"><a href="#paying-through-a-channel" aria-hidden="true" class="header-anchor">#</a> Paying through a channel</h3> <p>This is where the fun begins: off-chain payments!</p> <p>The main point of information about past and pending transfers is the <code>transfers$: Observable&lt;RaidenSentTransfer&gt;</code> observable. It'll first emit all known past transfers at subscription time (history), then emit again each time a transfer state changes, allowing you to keep track of the transfer status. The <a href="https://github.com/raiden-network/light-client/blob/dfe87e1886b12fc9f85857b01e28db5e81cc5070/raiden-ts/src/raiden.ts#L693" target="_blank" rel="noopener noreferrer">Raiden.transfer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> method is used to initiate an outgoing transfer, and returned Promise will reject with an Error if transfer signature prompt is cancelled or resolve with the <code>secrethash</code> value (a transfer unique key) as soon as it's registered. You can use this <code>secrethash</code> property of the objects emitted by <code>transfers$</code> as a unique key to keep track of specific transfers.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RaidenSentTransfer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'raiden-ts'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> transfers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>secrethash<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> RaidenSentTransfer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
raiden<span class="token punctuation">.</span>transfers$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">transfer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  transfers<span class="token punctuation">[</span>transfer<span class="token punctuation">.</span>secrethash<span class="token punctuation">]</span> <span class="token operator">=</span> transfer<span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Transfers updated:'</span><span class="token punctuation">,</span> transfers<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> secrethash<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">await</span> raiden<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">'0xtoken'</span><span class="token punctuation">,</span> <span class="token string">'0xtarget'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

## channels$ output<span class="token punctuation">,</span> <span class="token keyword">as</span> balance <span class="token operator">&amp;</span> capacity are updated<span class="token punctuation">:</span>
# Raiden channels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
#   <span class="token string">'0xtoken'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#     <span class="token string">'0xpartner'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#       token<span class="token punctuation">:</span> <span class="token string">'0xtoken'</span><span class="token punctuation">,</span>
#       tokenNetwork<span class="token punctuation">:</span> <span class="token string">'0xtokenNetwork'</span><span class="token punctuation">,</span>
#       partner<span class="token punctuation">:</span> <span class="token string">'0xpartner'</span><span class="token punctuation">,</span>
#       state<span class="token punctuation">:</span> <span class="token string">'open'</span><span class="token punctuation">,</span>
#       ownDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       partnerDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
#       settleTimeout<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
#       openBlock<span class="token punctuation">:</span> <span class="token number">5123</span>
#       balance<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// you spent 10 tokens</span>
#       capacity<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// capacity is reduced as well</span>
#     <span class="token punctuation">}</span>
#   <span class="token punctuation">}</span>
# <span class="token punctuation">}</span>

## transfers$ output<span class="token punctuation">:</span>
# Transfers updated<span class="token punctuation">:</span> <span class="token punctuation">{</span>
#   <span class="token punctuation">[</span>secrethash<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#     secrethash<span class="token punctuation">,</span>
#     status<span class="token punctuation">:</span> <span class="token string">'PENDING'</span><span class="token punctuation">,</span> <span class="token comment">// see RaidenSentTransferStatus enum imported from 'raiden-ts'</span>
#     initiator<span class="token punctuation">:</span> <span class="token string">'0xourAddress'</span>
#     recipient<span class="token punctuation">:</span> <span class="token string">'0xpartner'</span><span class="token punctuation">,</span>
#     target<span class="token punctuation">:</span> <span class="token string">'0xtarget'</span><span class="token punctuation">,</span>
#     paymentId<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">99123</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// auto-generated if not passed as `opts.paymentId` to transfer</span>
#     chainId<span class="token punctuation">,</span> <span class="token comment">// channel info</span>
#     token<span class="token punctuation">:</span> <span class="token string">'0xtoken'</span><span class="token punctuation">,</span>
#     tokenNetwork<span class="token punctuation">:</span> <span class="token string">'0xtokenNetwork'</span><span class="token punctuation">,</span>
#     channelId<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
#     amount<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#     expirationBlock<span class="token punctuation">:</span> <span class="token number">5223</span><span class="token punctuation">,</span>
#     fee<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#     startedAt<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1566929562387</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#     changedAt<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1566929562387</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#     success<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span> <span class="token comment">// set as soon as known if transfer was revealed or failed</span>
#     completed<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true after no more actions are pending for this transfer</span>
#   <span class="token punctuation">}</span>
# <span class="token punctuation">}</span>

</code></pre></div><h3 id="closing-a-channel"><a href="#closing-a-channel" aria-hidden="true" class="header-anchor">#</a> Closing a channel</h3> <p>Only close a channel if you really don't plan on using the respective channel anymore.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> raiden<span class="token punctuation">.</span><span class="token function">closeChannel</span><span class="token punctuation">(</span><span class="token string">'0xtoken'</span><span class="token punctuation">,</span> <span class="token string">'0xpartner'</span><span class="token punctuation">)</span>
# resolves to close transaction hash<span class="token punctuation">,</span> after it <span class="token keyword">is</span> mined

## channels$ output<span class="token punctuation">:</span>
# Raiden channels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
#   <span class="token string">'0xtoken'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#     <span class="token string">'0xpartner'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
#       token<span class="token punctuation">:</span> <span class="token string">'0xtoken'</span><span class="token punctuation">,</span>
#       tokenNetwork<span class="token punctuation">:</span> <span class="token string">'0xtokenNetwork'</span><span class="token punctuation">,</span>
#       partner<span class="token punctuation">:</span> <span class="token string">'0xpartner'</span><span class="token punctuation">,</span>
#       state<span class="token punctuation">:</span> <span class="token string">'closed'</span><span class="token punctuation">,</span>
#       ownDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       partnerDeposit<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
#       settleTimeout<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
#       openBlock<span class="token punctuation">:</span> <span class="token number">5123</span>
#       closeBlock<span class="token punctuation">:</span> <span class="token number">5999</span><span class="token punctuation">,</span>
#       balance<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#       capacity<span class="token punctuation">:</span> <span class="token function">BigNumber</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
#     <span class="token punctuation">}</span>
#   <span class="token punctuation">}</span>
# <span class="token punctuation">}</span>
</code></pre></div><h3 id="settling-a-channel"><a href="#settling-a-channel" aria-hidden="true" class="header-anchor">#</a> Settling a channel</h3> <p>As we can't perform a cooperative close yet, once your channel is closed, there is a grace period of <code>settleTimeout</code> blocks during which the counterpart can claim a higher signed balance proof sent by you. As the Light Client doesn't receive payments yet, there's no need to worry here, only the tokens you paid can be claimed by your partner. After <code>settleTimeout</code> blocks, your channel's state automatically becomes <code>settleable</code>, which is like <code>closed</code> but when settle can be called:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> raiden<span class="token punctuation">.</span><span class="token function">settleChannel</span><span class="token punctuation">(</span><span class="token string">'0xtoken'</span><span class="token punctuation">,</span> <span class="token string">'0xpartner'</span><span class="token punctuation">)</span>
# resolves to settle transaction hash<span class="token punctuation">,</span> after it <span class="token keyword">is</span> mined

## channels$ output<span class="token punctuation">:</span>
# Raiden channels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
#   <span class="token string">'0xtoken'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
# <span class="token punctuation">}</span>
</code></pre></div><p>Once channel is settled, it's gone from state, and the cycle can restart.</p> <h3 id="other-methods"><a href="#other-methods" aria-hidden="true" class="header-anchor">#</a> Other methods</h3> <p>There's a couple of more public methods exposed through main Raiden Light Client API. It aims to provide all necessary blockchain interaction methods and events related to Raiden, so you don't need to worry about web3 and Raiden contracts directly. Also, we're working on exposing more events and informational methods to the world, so stay tuned and keep an eye out for the main public API file: <a href="./src/raiden.ts">raiden.ts</a>. It's very easy to understand and docstrings are all over the place.</p> <h2 id="contributing"><a href="#contributing" aria-hidden="true" class="header-anchor">#</a> Contributing</h2> <p>Any contributions you make are <strong>greatly appreciated</strong>. Refer to the <a href="/docs/CONTRIBUTING.html">Raiden Light Client Development Guide</a> for details on how to comply with our codestyle, patterns and quality requirements.</p> <h2 id="license"><a href="#license" aria-hidden="true" class="header-anchor">#</a> License</h2> <p>Distributed under the <a href="../LICENSE">MIT License</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.887f3327.js" defer></script><script src="/docs/assets/js/2.5c8deaaf.js" defer></script><script src="/docs/assets/js/5.a317165e.js" defer></script>
  </body>
</html>

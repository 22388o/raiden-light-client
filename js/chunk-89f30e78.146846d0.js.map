{"version":3,"sources":["webpack:///./src/views/OpenChannel.vue?334a","webpack:///./src/views/OpenChannel.vue?0a25","webpack:///./src/views/OpenChannel.vue","webpack:///./src/views/OpenChannel.vue?ca51","webpack:///./src/views/OpenChannel.vue?1438"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","valid","expression","token","balance","deposit","_v","_s","$t","partner","on","$event","openChannel","loading","steps","doneStep","current","done","error","staticRenderFns","to","from","next","window","confirm","address","decimals","depositAmount","parse","eq","$raiden","progress","setTimeout","navigateToSelectTransferTarget","message","$route","query","params","checkAddressChecksum","navigateToHome","fetchTokenData","navigateToTokenSelect","getToken","components","TokenInformation","Divider","ErrorScreen","Stepper","ActionButton","AmountInput","computed","component","VCol","VForm","VRow"],"mappings":"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","file":"js/chunk-89f30e78.146846d0.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=23054d36&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=23054d36&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{staticClass:\"open-channel\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('amount-input',{attrs:{\"token\":_vm.token,\"max\":_vm.token.balance,\"limit\":\"\"},model:{value:(_vm.deposit),callback:function ($$v) {_vm.deposit=$$v},expression:\"deposit\"}})],1)],1),_c('divider'),_c('token-information',{attrs:{\"token\":_vm.token}}),_c('divider'),_c('v-row',{staticClass:\"open-channel__hub\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"open-channel__hub__label text-left\",attrs:{\"cols\":\"2\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('open-channel.hub'))+\"\\n    \")]),_c('v-col',{staticClass:\"open-channel__hub__address text-left\",attrs:{\"cols\":\"8\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.partner)+\"\\n    \")])],1),_c('action-button',{attrs:{\"enabled\":_vm.valid,\"text\":_vm.$t('open-channel.open-button')},on:{\"click\":function($event){return _vm.openChannel()}}}),_c('stepper',{attrs:{\"display\":_vm.loading,\"steps\":_vm.steps,\"done-step\":_vm.doneStep,\"current\":_vm.current,\"done\":_vm.done}}),_c('error-screen',{attrs:{\"description\":_vm.error,\"title\":_vm.$t('open-channel.error.title'),\"button-label\":_vm.$t('open-channel.error.button')},on:{\"dismiss\":function($event){_vm.error = ''}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport AmountInput from '../components/AmountInput.vue';\nimport {\n  ChannelDepositFailed,\n  ChannelOpenFailed\n} from '@/services/raiden-service';\nimport { emptyDescription, StepDescription, Token } from '@/model/types';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport Stepper from '@/components/Stepper.vue';\nimport { Zero } from 'ethers/constants';\nimport AddressUtils from '@/utils/address-utils';\nimport NavigationMixin from '@/mixins/navigation-mixin';\nimport { Route } from 'vue-router';\nimport ErrorScreen from '@/components/ErrorScreen.vue';\nimport Divider from '@/components/Divider.vue';\nimport TokenInformation from '@/components/TokenInformation.vue';\nimport ActionButton from '@/components/ActionButton.vue';\nimport { mapGetters } from 'vuex';\nimport { getAmount } from '@/utils/query-params';\n\n@Component({\n  components: {\n    TokenInformation,\n    Divider,\n    ErrorScreen,\n    Stepper,\n    ActionButton,\n    AmountInput\n  },\n  computed: {\n    ...mapGetters({\n      getToken: 'token'\n    })\n  }\n})\nexport default class OpenChannel extends Mixins(NavigationMixin) {\n  partner: string = '';\n  getToken!: (address: string) => Token;\n\n  deposit: string = '0.00';\n\n  valid: boolean = false;\n  loading: boolean = false;\n  error: string = '';\n\n  steps: StepDescription[] = [];\n\n  doneStep: StepDescription = emptyDescription();\n  current = 0;\n  done = false;\n\n  get token(): Token {\n    const { token: address } = this.$route.params;\n    return this.getToken(address) || ({ address } as Token);\n  }\n\n  beforeRouteLeave(to: Route, from: Route, next: any) {\n    if (!this.loading) {\n      next();\n    } else {\n      if (window.confirm(this.$t('open-channel.confirmation') as string)) {\n        next();\n      } else {\n        next(false);\n      }\n    }\n  }\n\n  async openChannel() {\n    const { address, decimals } = this.token;\n    const depositAmount = BalanceUtils.parse(this.deposit, decimals!);\n\n    if (depositAmount.eq(Zero)) {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription\n      ];\n    } else {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription,\n        (this.$t('open-channel.steps.transfer') as any) as StepDescription,\n        (this.$t('open-channel.steps.deposit') as any) as StepDescription\n      ];\n    }\n\n    this.loading = true;\n\n    try {\n      await this.$raiden.openChannel(\n        address,\n        this.partner,\n        depositAmount,\n        progress => (this.current = progress.current - 1)\n      );\n\n      this.done = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.navigateToSelectTransferTarget(address);\n      }, 2000);\n    } catch (e) {\n      this.error = '';\n      if (e instanceof ChannelOpenFailed) {\n        this.error = this.$t('open-channel.error.open-failed') as string;\n      } else if (e instanceof ChannelDepositFailed) {\n        this.error = this.$t('open-channel.error.deposit-failed') as string;\n      } else {\n        this.error = e.message;\n      }\n\n      this.done = false;\n      this.loading = false;\n    }\n  }\n\n  async created() {\n    this.deposit = getAmount(this.$route.query.deposit);\n\n    this.doneStep = (this.$t(\n      'open-channel.steps.done'\n    ) as any) as StepDescription;\n    const { token: address, partner } = this.$route.params;\n\n    if (!AddressUtils.checkAddressChecksum(address)) {\n      this.navigateToHome();\n      return;\n    }\n\n    await this.$raiden.fetchTokenData([address]);\n\n    if (typeof this.token.decimals !== 'number') {\n      this.navigateToHome();\n    }\n\n    if (!AddressUtils.checkAddressChecksum(partner)) {\n      this.navigateToTokenSelect();\n      return;\n    } else {\n      this.partner = partner;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OpenChannel.vue?vue&type=template&id=23054d36&scoped=true&\"\nimport script from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nexport * from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OpenChannel.vue?vue&type=style&index=0&id=23054d36&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23054d36\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VForm,VRow})\n"],"sourceRoot":""}
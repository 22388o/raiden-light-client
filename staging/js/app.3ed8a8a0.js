(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2caf36c7":"ade791e1","chunk-2dce5709":"f53d1d1b","chunk-42bc4fc2":"f80eb4f8","chunk-48646ba8":"e2629804","chunk-5d3b2a50":"9b864f5b","chunk-52abfed0":"591a4cbe","chunk-6d6cffbd":"1b4d18b6","chunk-b0964c66":"ac19fed2","chunk-5173cd44":"f8d90101","chunk-a76b7520":"b72b2bb5","chunk-1ad720d1":"f293c618","chunk-11468e22":"a39bc2f1","chunk-13de63f4":"f8110766","chunk-618b5a2b":"ed40a94c","chunk-662b1de2":"6b7130fd","chunk-66bfb858":"9b3f8606","chunk-67561f66":"f1efc8eb","chunk-73bb0efe":"1d7f19aa"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2caf36c7":1,"chunk-2dce5709":1,"chunk-42bc4fc2":1,"chunk-48646ba8":1,"chunk-5d3b2a50":1,"chunk-52abfed0":1,"chunk-6d6cffbd":1,"chunk-b0964c66":1,"chunk-5173cd44":1,"chunk-a76b7520":1,"chunk-1ad720d1":1,"chunk-11468e22":1,"chunk-13de63f4":1,"chunk-618b5a2b":1,"chunk-662b1de2":1,"chunk-66bfb858":1,"chunk-67561f66":1,"chunk-73bb0efe":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2caf36c7":"284343a3","chunk-2dce5709":"688988c3","chunk-42bc4fc2":"4c2a0c88","chunk-48646ba8":"09416e52","chunk-5d3b2a50":"afe9b41e","chunk-52abfed0":"9ddd6f20","chunk-6d6cffbd":"fda03424","chunk-b0964c66":"423bfba4","chunk-5173cd44":"c2e1e777","chunk-a76b7520":"f0caf6ea","chunk-1ad720d1":"a9f4933e","chunk-11468e22":"27c85d4e","chunk-13de63f4":"dd2f333d","chunk-618b5a2b":"4641a76f","chunk-662b1de2":"1747eb60","chunk-66bfb858":"05692934","chunk-67561f66":"42e3e78c","chunk-73bb0efe":"3eb41cc2"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0716":function(e,t,n){},"07e6":function(e,t,n){e.exports=n.p+"img/info.c9b975f7.svg"},"0976":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("4a7b"),i=n("b99a");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["a"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("71a0"),n("8e3c")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0a5b":function(e,t,n){},"0e5c":function(e,t,n){},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("0e7f"),a=n("a3d5"),o=n("5bfd"),i=n.n(o),c=n("e73a"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},1180:function(e,t,n){},1286:function(e,t,n){},"152b":function(e,t,n){"use strict";var r=n("4a7b"),a=n("b99a"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},"1aef":function(e,t,n){"use strict";var r=n("5780"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1286"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1ffc":function(e,t,n){e.exports=n.p+"img/state.ff4426c1.svg"},2:function(e,t){},"20b6":function(e,t,n){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("4a7b"),i=n("b99a"),c=n("7aa1"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=m(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:d({},Object(c["f"])(["defaultAccount"]))})],w);var _=w,k=_,j=(n("1aef"),n("8e3c")),E=n("bf66"),T=n.n(E),A=n("2ed7"),S=Object(j["a"])(k,r,a,!1,null,"0e385849",null);t["a"]=S.exports;T()(S,{VImg:A["a"]})},2850:function(e,t,n){"use strict";var r=n("fe8f"),a=n.n(r);a.a},2886:function(e,t,n){e.exports=n.p+"img/sent_transfer.087bd404.svg"},"2d14":function(e,t,n){e.exports=n.p+"img/down_arrow.d7fcc637.svg"},"2e1f":function(e,t,n){e.exports=n.p+"img/done.51f3a970.svg"},"2ee5":function(e,t,n){e.exports=n.p+"img/error.f52d5069.svg"},"2fca":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("f633"),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return p(e)||f(e,t)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function p(e){if(Array.isArray(e))return e}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){m(this,e)}return v(e,null,[{key:"contracts",value:function(){var e=y(a.a.mark((function e(){var t,n,r,o,c,u,l,d,f,p,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return o=e.sent,c=s(o,2),u=c[0],l=c[1],e.next=10,Promise.all([u.json(),l.json()]);case 10:return d=e.sent,f=s(d,2),p=f[0],b=f[1],e.abrupt("return",i(i({},p.contracts),b.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=y(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},"31e8":function(e,t,n){var r={"./back_arrow.svg":"73da","./bug.svg":"c0e3","./deposit.svg":"d989","./done.svg":"2e1f","./down_arrow.svg":"2d14","./error.svg":"2ee5","./eth.svg":"b872","./eth_transfer_arrow.svg":"e2f5","./gear.svg":"5cc9","./generic.svg":"ec79","./info.svg":"07e6","./input_invalid.svg":"c2ff","./input_valid.svg":"b376","./logo.svg":"9b19","./metamask.svg":"d6c5","./notifications.svg":"4170","./received_transfer.svg":"5b9b","./sent_transfer.svg":"2886","./state.svg":"1ffc","./udc.svg":"8fe8","./warning.svg":"afb7","./withdrawal.svg":"45f0"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="31e8"},3465:function(e,t,n){"use strict";var r=n("c955"),a=n.n(r);a.a},"3eea":function(e,t,n){"use strict";var r=n("456a"),a=n.n(r);a.a},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"456a":function(e,t,n){},"45f0":function(e,t,n){e.exports=n.p+"img/withdrawal.c80c3337.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},5780:function(e,t,n){},"58a8":function(e,t,n){"use strict";var r=n("d3eb"),a=n.n(r);a.a},"5b9b":function(e,t,n){e.exports=n.p+"img/received_transfer.ef6596cc.svg"},"5cc9":function(e,t,n){e.exports=n.p+"img/gear.263a7ddf.svg"},6:function(e,t){},6691:function(e,t,n){"use strict";var r=n("20b6"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("4a7b"),i=n("0a08"),c=n("b99a");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("8e3c")),k=n("bf66"),j=n.n(k),E=n("67b0"),T=n("0f03"),A=n("0edf"),S=n("35c4"),x=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},6707:function(e,t,n){"use strict";var r=n("0976"),a=n.n(r);a.a},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("1180"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("4a7b"),i=n("b99a");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("3eea"),n("8e3c")),_=n("bf66"),k=n.n(_),j=n("67b0"),E=n("ba6d"),T=n("35c4"),A=n("33c5"),S=Object(w["a"])(O,r,a,!1,null,"07afaaa8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("0716"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("4a7b"),a=n("b99a");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return B}));var r=n("f633"),a=n.n(r),o=n("7e01"),i=n.n(o),c=n("5da6");function s(e){return d(e)||l(e)||h(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return v(e)}function f(e,t){return y(e)||b(e,t)||h(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function m(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function A(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function S(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?A(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?_(_({},e),{},{payload:A(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function x(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return R.apply(this,arguments)}function R(){return R=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}var C=/^raiden:(0x[0-9a-f]{40})$/i;function D(e){return I.apply(this,arguments)}function I(){return I=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(C.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function P(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return D(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=S(n);i&&j.put(E,_({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,_({logger:r,level:e,message:n.map(x)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var U=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function M(e){var t,n=m(U);try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,d,f,p,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,d=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,f=new Date(n.key).toISOString(),p=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(f).concat(p).concat(b," [").concat(s,"] \t=> ").concat(d,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=M(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},"8fe8":function(e,t,n){e.exports=n.p+"img/udc.a4ddd71a.svg"},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("4a7b"),i=n("b99a"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("58a8"),n("8e3c")),k=n("bf66"),j=n.n(k),E=n("b803"),T=Object(_["a"])(w,r,a,!1,null,"0b75904e",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"959b":function(e,t,n){"use strict";var r=n("cb0d"),a=n.n(r);a.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("38dd");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b376:function(e,t,n){e.exports=n.p+"img/input_valid.762cb0ae.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},b872:function(e,t,n){e.exports=n.p+"img/eth.640d53f2.svg"},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("f633"),i=n.n(o),c=n("4a7b"),s=n("b99a"),u=n("7aa1"),l=n("87a2"),d=n("750b"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("66bc"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function k(e){var t=T();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var S=function(e){w(n,e);var t=k(n);function n(){return v(this,n),t.apply(this,arguments)}return O(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0})],S.prototype,"reason",void 0),S=Object(c["a"])([Object(s["a"])({})],S);var x=S,N=x,R=(n("753f"),n("8e3c")),C=n("bf66"),D=n.n(C),I=n("b441"),P=Object(R["a"])(N,y,m,!1,null,"7b92b083",null),L=P.exports;function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function K(e){var t=X();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}D()(P,{VAlert:I["a"]});var Q=function(e){q(n,e);var t=K(n);function n(){var e;return W(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return H(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",B(B({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],Q.prototype,"visible",void 0),Object(c["a"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],Q.prototype,"connecting",void 0),Object(c["a"])([Object(s["d"])({required:!0})],Q.prototype,"hasProvider",void 0),Object(c["a"])([Object(s["b"])()],Q.prototype,"close",null),Object(c["a"])([Object(s["b"])()],Q.prototype,"connect",null),Q=Object(c["a"])([Object(s["a"])({components:{RaidenDialog:b["a"],ActionButton:d["a"],NoAccessMessage:L},computed:Object(u["f"])(["accessDenied"])})],Q);var z=Q,J=z,ee=(n("e4b6"),n("069e")),te=Object(R["a"])(J,f,p,!1,null,"469a86df",null),ne=te.exports;D()(te,{VCardText:ee["b"],VCardTitle:ee["c"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},ae=[],oe=n("152b");function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){var t=ve();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var Oe=function(e){pe(n,e);var t=ye(n);function n(){return le(this,n),t.apply(this,arguments)}return fe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(oe["a"]));Object(c["a"])([Object(s["f"])("tokens",{immediate:!0})],Oe.prototype,"onChange",null),Oe=Object(c["a"])([Object(s["a"])({computed:se({},Object(u["d"])(["tokens"]))})],Oe);var we=Oe,_e=we,ke=(n("959b"),n("67b0")),je=n("ba6d"),Ee=n("f9c2"),Te=n("35c4"),Ae=n("33c5"),Se=Object(R["a"])(_e,re,ae,!1,null,"593703f5",null),xe=Se.exports;D()(Se,{VBtn:ke["a"],VCol:je["a"],VContainer:Ee["a"],VIcon:Te["a"],VRow:Ae["a"]});var Ne=n("f15c"),Re=n("2fca");function Ce(e){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,c,"next",e)}function c(e){Le(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ze=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Fe(n,[{key:"created",value:function(){var e=Ue(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ne["a"].injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,Re["a"].configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ze=Object(c["a"])([Object(s["a"])({computed:Ie(Ie({},Object(u["f"])(["loading","accessDenied","stateBackup","settings"])),Object(u["d"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:ne,NoTokens:xe,NoAccessMessage:L}})],Ze);var Xe=Ze,Ye=Xe,Qe=(n("3465"),n("2ed7")),ze=Object(R["a"])(Ye,r,a,!1,null,"3ad2829a",null);t["a"]=ze.exports;D()(ze,{VCol:je["a"],VContainer:Ee["a"],VImg:Qe["a"],VRow:Ae["a"]})},bb68:function(e,t,n){"use strict";var r=n("0e5c"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.10.0","contracts":"0.37.0"}')},c0e3:function(e,t,n){e.exports=n.p+"img/bug.4e8b8f1b.svg"},c2ff:function(e,t,n){e.exports=n.p+"img/input_invalid.4e8b2468.svg"},c955:function(e,t,n){},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cb0d:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var r=n("0e7f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-area")],1)},o=[],i=n("4a7b"),c=n("b99a"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")])]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1),e.isDisclaimerRoute?e._e():r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[e.showTitleOnly?e._e():r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)])],1)],1)},l=[],d=n("7aa1"),f=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=Object(d["a"])("notifications"),N=x.mapState,R=x.mapMutations,C=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===f["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));C=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(d["f"])(["defaultAccount"])),N(["newNotifications"])),Object(d["d"])(["network","isConnected"])),methods:h({},R(["notificationsViewed"]))})],C);var D=C,I=D,P=(n("bb68"),n("8e3c")),L=n("bf66"),U=n.n(L),M=n("7fb2"),B=n("67b0"),F=n("ba6d"),W=n("2ed7"),$=n("33c5"),H=Object(P["a"])(I,u,l,!1,null,"3fabce59",null),q=H.exports;U()(H,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"]});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},K=[],G=n("0a08");function Z(e){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}function ee(e){var t=re();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe=function(e){z(n,e);var t=ee(n);function n(){var e;return X(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Q(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);oe=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],oe);var ie=oe,ce=ie,se=n("35c4"),ue=n("8361"),le=Object(P["a"])(ce,V,K,!1,null,null,null),de=le.exports;U()(le,{VIcon:se["a"],VSnackbar:ue["a"]});var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function be(e){return be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Oe(e){var t=ke();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ee=function(e){ve(n,e);var t=Oe(n);function n(){var e;return ye(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return he(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Ee=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],Ee);var Te=Ee,Ae=Te,Se=Object(P["a"])(Ae,fe,pe,!1,null,null,null),xe=Se.exports;U()(Se,{VBtn:B["a"],VSnackbar:ue["a"]});var Ne,Re,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,top:"",centered:"",vertical:"",app:"",rounded:"","max-width":"550px"},on:{input:function(t){return e.notificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{dark:"",text:"",left:""},on:{click:function(t){return e.dismiss(e.notification.id)}}},"v-btn",n,!1),[e._v(" "+e._s(e.$t("notification-area.dismiss"))+" ")])]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area__notification__content",attrs:{"no-gutters":""}},["none"!==e.notification.context?r("v-col",{staticClass:"notification-area__notification__content__icon d-flex flex-column",attrs:{cols:"auto"}},[r("v-img",{class:"notification-area__notification__content__icon--"+e.notification.context,attrs:{"aspect-ratio":"1",contain:"",src:n("31e8")("./"+e.notification.context+".svg"),height:"48px",width:"48px"}})],1):e._e(),r("v-col",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h3",{staticClass:"text--primary title"},[e._v(e._s(e.notification.title))])]),e.notificationQueue.length>=1?r("v-col",{attrs:{cols:"auto"}},[r("v-badge",{staticClass:"notification-area__notification__content__count",attrs:{inline:"",content:e.notificationQueue.length,color:"info"}})],1):e._e()],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("p",{staticClass:"text--secondary caption notification-area__notification__content__description text-justify"},[e._v(" "+e._s(e.notification.description)+" ")])])],1)],1)],1)],1)},De=[];function Ie(e){return Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Ne||(Ne={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(Re||(Re={}));var Ze={id:-1,title:"",description:"",display:!1,duration:5e3,importance:Ne.LOW,context:Re.NONE,received:new Date},Xe=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.notification=Ze,e}return Fe(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ze}},{key:"dismiss",value:function(e){this.notificationShown(e),this.notification=Le(Le({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Xe.prototype,"onQueueChange",null),Xe=Object(i["a"])([Object(c["a"])({computed:Le({},Object(d["d"])("notifications",["notificationQueue"])),methods:Le({},Object(d["c"])("notifications",["notificationShown"]))})],Xe);var Ye=Xe,Qe=Ye,ze=(n("6707"),Object(P["a"])(Qe,Ce,De,!1,null,"f05dcae4",null)),Je=ze.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(ze,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"],VSnackbar:ue["a"]});var dt=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));dt=Object(i["a"])([Object(c["a"])({components:{AppHeader:q,OfflineSnackbar:de,UpdateSnackbar:xe,NotificationArea:Je}})],dt);var ft=dt,pt=ft,bt=(n("2850"),n("58c6")),yt=n("f9c2"),mt=n("fa34"),ht=Object(P["a"])(pt,a,o,!1,null,"6800ce96",null),vt=ht.exports;U()(ht,{VApp:bt["a"],VContainer:yt["a"],VMain:mt["a"]});var gt=n("304c");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("617c"),wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"disclaimer",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10",offset:"1"}},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1)],1),n("action-button",{attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},_t=[],kt=n("750b");function jt(e){return jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),e}function St(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}function xt(e,t){return xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xt(e,t)}function Nt(e){var t=Dt();return function(){var n,r=It(e);if(t){var a=It(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(e,t){return!t||"object"!==jt(t)&&"function"!==typeof t?Ct(e):t}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function It(e){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},It(e)}var Pt=function(e){St(n,e);var t=Nt(n);function n(){var e;return Et(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return At(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:f["a"].HOME}}}]),n}(c["e"]);Pt=Object(i["a"])([Object(c["a"])({components:{ActionButton:kt["a"]}})],Pt);var Lt=Pt,Ut=Lt,Mt=(n("6691"),n("a787")),Bt=Object(P["a"])(Ut,wt,_t,!1,null,"51ed7395",null),Ft=Bt.exports;U()(Bt,{VCheckbox:Mt["a"],VCol:F["a"],VContainer:yt["a"],VRow:$["a"]});var Wt=n("bb51"),$t=n("5013"),Ht=n("f455"),qt=n("87a2"),Vt=n("002a"),Kt=n.n(Vt),Gt=n("4c4f"),Zt=n.n(Gt),Xt=n("1c4f0"),Yt=n.n(Xt),Qt=n("9038"),zt=n.n(Qt),Jt=n("c72f"),en=n.n(Jt),tn=n("5091"),nn=n.n(tn),rn=n("8265"),an=n.n(rn),on=n("b104"),cn=n.n(on);function sn(e){return fn(e)||dn(e)||ln(e)||un()}function un(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ln(e,t){if(e){if("string"===typeof e)return pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}function dn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function fn(e){if(Array.isArray(e))return pn(e)}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn={notify:function(e,t){var n,r,a=e.commit,o=e.getters.nextNotificationId,i=yn(yn({},t),{},{id:o,received:new Date,display:!0,context:null!==(n=t.context)&&void 0!==n?n:Re.NONE,duration:null!==(r=t.duration)&&void 0!==r?r:5e3});a("notificationAdd",i)},notificationShown:function(e,t){var n=e.commit,r=e.state,a=r.notifications.findIndex((function(e){return e.id===t}));if(!(a<0)){var o=sn(r.notifications);o[a]=yn(yn({},r.notifications[a]),{},{display:!1}),n("notifications",o)}}},vn={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0},notifications:function(e,t){e.notifications=t},clear:function(e){e.notifications=[]}},gn={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]+1},notificationQueue:function(e){return e.notifications.filter((function(e){return e.importance===Ne.HIGH&&!0===e.display}))}},On=function(){return{notifications:[],newNotifications:!1}},wn=On(),_n=wn,kn={namespaced:!0,mutations:vn,actions:hn,state:_n,getters:gn};function jn(e){return An(e)||Tn(e)||Dn(e)||En()}function En(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function An(e){if(Array.isArray(e))return In(e)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){return Ln(e)||Pn(e,t)||Dn(e,t)||Cn()}function Cn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dn(e,t){if(e){if("string"===typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ln(e){if(Array.isArray(e))return e}r["a"].use(d["b"]);var Un={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:qt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:qt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function Mn(){return zt()(Un)}var Bn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},Fn=new $t["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Wn=new $t["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),$n={state:Mn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Rn(r[n],2),o=a[0],i=a[1];o in e.tokens&&an()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=xn(xn({},e.tokens[o]),i):e.tokens=xn(xn({},e.tokens),{},Nn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=jn(t)},updatePresence:function(e,t){e.presences=xn(xn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted;Object.assign(e,xn(xn({},Mn()),{},{settings:t,disclaimerAccepted:n}))},updateTransfers:function(e,t){e.transfers=xn(xn({},e.transfers),{},Nn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return Kt()(Yt()(Zt()(e.channels),(function(e){return!cn()(e)})),(function(n){var r=en()(n,t,Object(qt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Bn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!cn()(r)&&(n=Zt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Ht["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Ht["b"].open}));return nn()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[Fn.plugin,Wn.plugin],modules:{notifications:kn}},Hn=new d["b"].Store($n),qn=[{path:"/",name:f["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:Ft},{path:"*",redirect:"/"},{path:"/home",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Wt["a"]},{path:"/transfer/:token",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-2dce5709"),n.e("chunk-42bc4fc2"),n.e("chunk-48646ba8"),n.e("chunk-13de63f4")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-2dce5709"),n.e("chunk-11468e22")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-67561f66")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-2dce5709"),n.e("chunk-42bc4fc2"),n.e("chunk-48646ba8"),n.e("chunk-5d3b2a50")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-2dce5709"),n.e("chunk-42bc4fc2"),n.e("chunk-52abfed0")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-2dce5709"),n.e("chunk-618b5a2b")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-5173cd44").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:f["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-2caf36c7").then(n.bind(null,"47f5"))}),r()},children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-73bb0efe")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-66bfb858")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-2dce5709"),n.e("chunk-6d6cffbd")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-662b1de2")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-a76b7520"),n.e("chunk-1ad720d1")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-2dce5709"),n.e("chunk-b0964c66")]).then(n.bind(null,"4c07"))}}]}];function Vn(e,t,n){var r=e.name===f["a"].DISCLAIMER;Hn.state.disclaimerAccepted?r?n({name:f["a"].HOME}):n():r?n():n({name:f["a"].DISCLAIMER,query:{redirectTo:e.fullPath}})}r["a"].use(Ot["a"]);var Kn=new Ot["a"]({mode:"hash",base:"/staging/",routes:qn});Kn.beforeEach(Vn);var Gn=Kn,Zn=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Xn=n("f633"),Yn=n.n(Xn),Qn=n("f15c"),zn=n("a3d5"),Jn=n("38dd"),er=n("bf60"),tr=n("c2dd"),nr=n("a8c1"),rr=n.n(nr),ar=n("2fca"),or=n("f30a"),ir=n("1f6f");function cr(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(ir["a"]);var sr=new ir["a"]({locale:"en",fallbackLocale:"en",messages:cr()});function ur(e){return ur="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function lr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function dr(e){var t=mr();return function(){var n,r=gr(e);if(t){var a=gr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(e,t){return!t||"object"!==ur(t)&&"function"!==typeof t?pr(e):t}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){var t="function"===typeof Map?new Map:void 0;return br=function(e){if(null===e||!hr(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return yr(e,arguments,gr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vr(n,e)},br(e)}function yr(e,t,n){return yr=mr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&vr(o,n.prototype),o},yr.apply(null,arguments)}function mr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function hr(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){Tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _r(e,t){return Er(e)||jr(e,t)||Sr(e,t)||kr()}function kr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jr(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Er(e){if(Array.isArray(e))return e}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Sr(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Sr(e,t){if(e){if("string"===typeof e)return xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xr(e,t):void 0}}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Nr(o,r,a,i,c,"next",e)}function c(e){Nr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t,n){return t&&Dr(e.prototype,t),n&&Dr(e,n),e}var Pr=function(){function e(t){Cr(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return Ir(e,[{key:"updateBalances",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=Rr(Yn.a.mark((function e(){var t,n,r,a,o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=Ar(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=Rr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Lr(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Rr(Yn.a.mark((function t(n,r){var a,o,i,c,s,u=this;return Yn.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ar["a"].configuration();case 3:return o=t.sent,t.next=6,Qn["a"].provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=52;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Ht["f"](Ht["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,t.next=28,this.fetchTokenData([this._userDepositTokenAddress]);case 28:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=31,this.monitorPreSetTokens();case 31:return a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type})),Object(tr["a"])((function(){return u.fetchTokenData(u.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),a.events$.pipe(Object(er["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=Rr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),!(null===(n=t.caps)||void 0===n?void 0:n[Ht["a"].NO_RECEIVE])){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=Rr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",Tr({},t.payload.token,{address:t.payload.token})),e.next=36;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",Tr({},t.meta.address,t.payload.available)),e.next=36;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=36;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=36;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=36;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner,t.meta.tokenNetwork,t.payload.txHash);case 31:e.next=36;break;case 33:if("channel/settle/failure"!==t.type){e.next=36;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner,t.meta.tokenNetwork,t.payload.message);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=44,this.getBalance();case 44:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=52;break}return t.t2=this.store,t.next=50,this.getBalance(a.address);case 50:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 52:t.next=58;break;case 54:t.prev=54,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?qt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?qt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Ur?qt["a"].INITIALIZATION_FAILED:qt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 58:this.store.commit("loadComplete");case 59:case"end":return t.stop()}}),t,this,[[0,54]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("receiving-disabled-dialog.title"),description:sr.t("receiving-disabled-dialog.body"),importance:Ne.HIGH,context:Re.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=Rr(Yn.a.mark((function e(){var t,n,r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=Ar(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){var a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=zn["a"].toUnits(n,i),s="string"===typeof t?sr.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||sr.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.failure.title"),description:u,context:Re.ERROR,importance:Ne.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=Rr(Yn.a.mark((function e(t,n){var r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=zn["a"].toUnits(t,o),c=zn["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.success.title"),description:sr.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:Re.INFO,importance:Ne.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r,a){var o,i,c,s;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=zn["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:sr.t("notifications.ms-balance-proof.title"),description:sr.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:Re.INFO,importance:Ne.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){var a;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=sr.t("notifications.settlement.success.description",{partner:t,tokenNetwork:n,txHash:r}),this._subkey&&(a+=" "+sr.t("notifications.settlement.success.withdrawal_hint")),e.next=4,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.success.title"),description:a,context:Re.INFO,importance:Ne.HIGH});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.failure.title"),description:sr.t("notifications.settlement.failure.description",{partner:t,tokenNetwork:n,message:r}),context:Re.ERROR,importance:Ne.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Rr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",zn["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Rr(Yn.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=_r(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r,a){var o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Ht["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Rr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Rr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=Rr(Yn.a.mark((function e(t){var n,r=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=Rr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Tr({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,rr()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r,a,o){var i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r,a){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Rr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Rr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Rr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Ht["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Rr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Rr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Rr(Yn.a.mark((function e(t){var n,r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Tr({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=Rr(Yn.a.mark((function e(){var t,n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=Rr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(Jn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=Rr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(Jn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=Rr(Yn.a.mark((function e(t,n){var r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=Rr(Yn.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=Rr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(or["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,rr()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=wr(wr({},t),r[e]),delete r[e])})),i=function(){var e=Rr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=wr(wr({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,rr()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Rr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=Rr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=Rr(Yn.a.mark((function e(t){var n,r,a,o,i=arguments;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ar["a"].contracts();case 6:return o=e.sent,e.next=9,Ht["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Ur(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Lr=function(e){lr(n,e);var t=dr(n);function n(){return Cr(this,n),t.apply(this,arguments)}return n}(br(Error)),Ur=function(e){lr(n,e);var t=dr(n);function n(){return Cr(this,n),t.apply(this,arguments)}return n}(br(Error));function Mr(e,t){e.prototype.$raiden=new Pr(Hn)}var Br=n("5ffb"),Fr=n.n(Br);function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t,n){return t&&$r(e.prototype,t),n&&$r(e,n),e}var qr=function(){function e(){Wr(this,e),this.cache={}}return Hr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Fr()(e);return this.cache[e]=n,n}}]),e}();function Vr(e,t){e.prototype.$identicon=new qr}n("a73c"),n("8e5c"),n("bd89");var Kr=n("bf8d");r["a"].use(Kr["a"]);var Gr=new Kr["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Zr=n("9bec"),Xr=(n("5443"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Xr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Zn["b"])(),r["a"].use(Mr),r["a"].use(Vr),r["a"].use(Zr["a"]),new r["a"]({vuetify:Gr,router:Gn,store:Hn,i18n:sr,render:function(e){return e(vt)}}).$mount("#app")},d3eb:function(e,t,n){},d6c5:function(e,t,n){e.exports=n.p+"img/metamask.c879a582.svg"},d989:function(e,t,n){e.exports=n.p+"img/deposit.d1f000b7.svg"},e2f5:function(e,t,n){e.exports=n.p+"img/eth_transfer_arrow.cdc92be6.svg"},e4b6:function(e,t,n){"use strict";var r=n("0a5b"),a=n.n(r);a.a},ec79:function(e,t,n){e.exports=n.p+"img/generic.55c56a33.svg"},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I agree to the Privacy Policy, Disclaimer and Imprint","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","settlement":{"success":{"title":"Channel Settlement","description":"The channel with {partner} for the token network {tokenNetwork} has become settled ({txHash}).","withdrawal_hint":"Go to the acounts Withdrawal screen to transfer the tokens to your main account."},"failure":{"title":"Channel Settlement","description":"The attempt to settle the channel with {partner} for the token network {tokenNetwork} failed: {message}"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"change-token-title":"Change Token","transfer-title":"Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"notification-area":{"dismiss":"Dismiss"}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("f633"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return xm})),n.d(t,"b",(function(){return ro})),n.d(t,"a",(function(){return De})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return pt})),n.d(t,"g",(function(){return Qt}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Un})),n.d(r,"tokenMonitored",(function(){return Mn})),n.d(r,"channelOpen",(function(){return Bn})),n.d(r,"channelMonitored",(function(){return Fn})),n.d(r,"channelDeposit",(function(){return Wn})),n.d(r,"channelWithdrawn",(function(){return $n})),n.d(r,"channelClose",(function(){return Hn})),n.d(r,"channelSettleable",(function(){return qn})),n.d(r,"channelSettle",(function(){return Vn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return Zn})),n.d(a,"matrixPresence",(function(){return Xn})),n.d(a,"matrixRoom",(function(){return Yn})),n.d(a,"matrixRoomLeave",(function(){return Qn})),n.d(a,"rtcChannel",(function(){return zn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Mr})),n.d(o,"messageGlobalSend",(function(){return Br})),n.d(o,"messageReceived",(function(){return Fr}));var i={};n.r(i),n.d(i,"transfer",(function(){return ea})),n.d(i,"transferSigned",(function(){return ta})),n.d(i,"transferProcessed",(function(){return na})),n.d(i,"transferSecret",(function(){return ra})),n.d(i,"transferSecretRegister",(function(){return aa})),n.d(i,"transferSecretRequest",(function(){return oa})),n.d(i,"transferSecretReveal",(function(){return ia})),n.d(i,"transferUnlock",(function(){return ca})),n.d(i,"transferUnlockProcessed",(function(){return sa})),n.d(i,"transferExpire",(function(){return ua})),n.d(i,"transferExpireProcessed",(function(){return la})),n.d(i,"transferRefunded",(function(){return da})),n.d(i,"withdraw",(function(){return pa})),n.d(i,"withdrawMessage",(function(){return ba})),n.d(i,"withdrawExpire",(function(){return ya})),n.d(i,"withdrawCompleted",(function(){return ma}));var c={};n.r(c),n.d(c,"pathFind",(function(){return ga})),n.d(c,"pfsListUpdated",(function(){return Oa})),n.d(c,"iouPersist",(function(){return wa})),n.d(c,"iouClear",(function(){return _a})),n.d(c,"udcDeposited",(function(){return ka})),n.d(c,"udcWithdraw",(function(){return Ea})),n.d(c,"udcWithdrawn",(function(){return Ta})),n.d(c,"msBalanceProofSent",(function(){return Aa}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return al})),n.d(s,"initTokensRegistryEpic",(function(){return ol})),n.d(s,"initMonitorProviderEpic",(function(){return il})),n.d(s,"channelEventsEpic",(function(){return dl})),n.d(s,"channelMonitoredEpic",(function(){return fl})),n.d(s,"channelOpenEpic",(function(){return pl})),n.d(s,"channelDepositEpic",(function(){return yl})),n.d(s,"channelCloseEpic",(function(){return ml})),n.d(s,"channelUpdateEpic",(function(){return hl})),n.d(s,"channelSettleEpic",(function(){return vl})),n.d(s,"channelSettleableEpic",(function(){return gl})),n.d(s,"channelUnlockEpic",(function(){return Ol})),n.d(s,"confirmationEpic",(function(){return _l}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return sd})),n.d(u,"matrixShutdownEpic",(function(){return ud})),n.d(u,"matrixMonitorPresenceEpic",(function(){return jd})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Ed})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Td})),n.d(u,"matrixUpdateCapsEpic",(function(){return Ad})),n.d(u,"matrixCreateRoomEpic",(function(){return Wd})),n.d(u,"matrixInviteEpic",(function(){return $d})),n.d(u,"matrixHandleInvitesEpic",(function(){return Hd})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return qd})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Vd})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Kd})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Gd})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Zd})),n.d(u,"matrixMessageSendEpic",(function(){return sf})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return uf})),n.d(u,"matrixMessageReceivedEpic",(function(){return lf})),n.d(u,"deliveredEpic",(function(){return df})),n.d(u,"rtcConnectEpic",(function(){return If}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return Wf})),n.d(l,"transferAutoExpireEpic",(function(){return zf})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Ap})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Pp})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Lp})),n.d(l,"transferMediateEpic",(function(){return Hp})),n.d(l,"transferProcessedReceivedEpic",(function(){return Qp})),n.d(l,"transferProcessedSendEpic",(function(){return zp})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return Jp})),n.d(l,"transferExpireProcessedEpic",(function(){return eb})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return tb})),n.d(l,"transferRefundedEpic",(function(){return db})),n.d(l,"transferRetryMessageEpic",(function(){return jb})),n.d(l,"transferSecretRequestedEpic",(function(){return Cb})),n.d(l,"transferSecretRevealEpic",(function(){return Ib})),n.d(l,"transferSecretRevealedEpic",(function(){return Pb})),n.d(l,"transferRequestUnlockEpic",(function(){return Lb})),n.d(l,"monitorSecretRegistryEpic",(function(){return Ub})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return Mb})),n.d(l,"transferAutoRegisterEpic",(function(){return Bb})),n.d(l,"transferSecretRegisterEpic",(function(){return Fb})),n.d(l,"initWithdrawMessagesEpic",(function(){return Xb})),n.d(l,"withdrawSendRequestMessageEpic",(function(){return Yb})),n.d(l,"withdrawSendTxEpic",(function(){return Qb})),n.d(l,"withdrawMessageProcessedEpic",(function(){return zb})),n.d(l,"autoWithdrawExpireEpic",(function(){return Jb})),n.d(l,"withdrawSendExpireMessageEpic",(function(){return ey}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return Dy})),n.d(d,"pfsCapacityUpdateEpic",(function(){return Iy})),n.d(d,"pfsFeeUpdateEpic",(function(){return Py})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return Ly})),n.d(d,"monitorUdcBalanceEpic",(function(){return Uy})),n.d(d,"monitorRequestEpic",(function(){return By})),n.d(d,"udcWithdrawRequestEpic",(function(){return Fy})),n.d(d,"udcCheckWithdrawPlannedEpic",(function(){return Wy})),n.d(d,"udcWithdrawPlannedEpic",(function(){return $y})),n.d(d,"msMonitorNewBPEpic",(function(){return Hy}));var f=n("f633"),p=n.n(f),b=(n("3dfb"),n("f674"),n("8e94"),n("7e01")),y=n.n(b),m=n("89e6"),h=n("c8a0"),v=n("32f3"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("5ca1"),_=n("38dd"),k=n("f30a"),j=n("45c3"),E=n("d2b3"),T=n("ae32"),A=n("7082"),S=n.n(A),x=n("5fda"),N=n.n(x),R=n("2f73"),C=n("6649"),D=n("15f1"),I=n("1356"),P=n("fac5"),L=n("6452"),U=n("c159"),M=n("a334"),B=n("bf60"),F=n("911a"),W=n("eb0c"),$=n("5a1b"),H=n("fc62");function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var G=function(){function e(){q(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}var z=function(){function e(){X(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var pe=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}var ke=function(){function e(){Oe(this,e)}return _e(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,je,t)}}]),e}(),je=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var Se,xe=function(){function e(){Ee(this,e)}return Ae(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ne,t)}}]),e}(),Ne=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Re=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var Ce,De,Ie=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Pe=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ce||(Ce={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(De||(De={}));var Le=n("cc97"),Ue=n("1788"),Me=n.n(Ue),Be=n("d567"),Fe=n("47f9"),We=n("e244"),$e=n("3bb1"),He=n.n($e),qe=n("a32b");function Ve(e){return Ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e){return Ye(e)||Xe(e)||Ze(e)||Ge()}function Ge(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(e){if("string"===typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}function Xe(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ye(e){if(Array.isArray(e))return Qe(e)}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}function tt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function nt(e){var t=ct();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ve(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){var t="function"===typeof Map?new Map:void 0;return ot=function(e){if(null===e||!st(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return it(e,arguments,lt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,e)},ot(e)}function it(e,t,n){return it=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ut(o,n.prototype),o},it.apply(null,arguments)}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function st(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var dt=qe,ft=Le["p"](Le["q"],Le["v"]([Le["q"],Le["l"],Le["d"],Le["k"]])),pt=function(e){tt(n,e);var t=nt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(at(r),n.prototype),r}return et(n,[{key:"code",get:function(){var e,t=this;return null!==(e=He()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ot(Error));function bt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?it(pt,Ke(t)):new pt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var yt=Le["h"]([Le["t"]({name:Le["q"]}),Le["m"]({message:Le["q"],stack:Le["q"],details:ft})]),mt=new Le["a"]("Error",(function(e){return"object"===Ve(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(We["pipe"])(yt.decode(e),Object(Fe["map"])((function(e){return"details"in e?Object.assign(new pt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function ht(e){Be["ThrowReporter"].report(e)}function vt(e,t,n,r){try{var a=e.decode(t);return ht(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new pt(n):o}}function gt(e){return null!=e}var Ot=new Le["a"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){var n,r;if(_["BigNumber"].isBigNumber(e))return Le["r"](e);try{return Le["r"](Object(_["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Le["f"](e,t)}}),(function(e){return e.toString()})),wt=N()((function(e){return Le["e"](Le["q"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),_t=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Le["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),kt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Le["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),jt=wt(65),Et=wt(32),Tt=wt(32),At=wt(32),St=new Le["a"]("Address",(function(e){try{return wt(20).is(e)&&Object(_["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!wt(20).is(e))return Le["f"](e,t);var n;try{n=Object(_["getAddress"])(e)}catch(r){return Le["f"](e,t)}return n?Le["r"](n):Le["f"](e,t)}),Le["g"]),xt=N()((function(e){return Le["s"]([Le["l"],e])}));function Nt(e){return[Date.now(),e]}var Rt=N()((function(e){return Le["h"]([e,Le["n"](Le["t"]({signature:jt}))])})),Ct=N()((function(e){return new Le["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Le["r"](t):Le["f"](t,n)}),Le["g"])}));function Dt(e){return e[e.length-1]}var It=n("8590"),Pt=n("ddb3"),Lt=n("5b07"),Ut=n("3905"),Mt=n("c2dd"),Bt=n("c5af");function Ft(e){return qt(e)||Ht(e)||$t(e)||Wt()}function Wt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(e,t){if(e){if("string"===typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}function Ht(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function qt(e){if(Array.isArray(e))return Vt(e)}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Gt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(Pt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(P["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),Gt(e,"block")})).pipe(Object(Ut["a"])(Math.ceil(e.pollingInterval/10)),Object(Mt["a"])((function(n){return Object(P["a"])((function(){return e.getLogs(Object.assign(Object.assign({},t),{fromBlock:i[0],toBlock:n}))})).pipe(Object(W["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(Ft(e.map((function(e){return e.blockNumber})).filter(gt).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Lt["a"])(e)})),Object(Bt["a"])((function(){return L["a"]})))})))}function Zt(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=Object.assign(Object.assign(Object.assign({},t),n),{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Ft(r),[a])}};return void 0!==t?n(t):n}function Xt(e){return Kt(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=It["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function Yt(e){var t=e.send;e.send=function(n,r){return Kt(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function Qt(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var zt,Jt=Le["n"](Le["p"](Le["q"],Le["b"]));function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tn=Le["t"]({urls:Le["v"]([Le["q"],Le["c"](Le["q"])])}),nn=Le["n"](Le["h"]([Le["t"]({matrixServerLookup:Le["q"],revealTimeout:Le["l"],settleTimeout:Le["l"],httpTimeout:Le["l"],discoveryRoom:Le["v"]([Le["q"],Le["k"]]),pfsRoom:Le["v"]([Le["q"],Le["k"]]),monitoringRoom:Le["v"]([Le["q"],Le["k"]]),pfs:Le["v"]([St,Le["q"],Le["k"]]),pfsSafetyMargin:Le["l"],matrixExcessRooms:Le["l"],confirmationBlocks:Le["l"],monitoringReward:Le["v"]([Le["k"],kt(32)]),logger:Le["i"]((zt={},en(zt,"",null),en(zt,"trace",null),en(zt,"debug",null),en(zt,"info",null),en(zt,"warn",null),en(zt,"error",null),zt)),caps:Le["v"]([Le["k"],Jt]),fallbackIceServers:Le["c"](tn),rateToSvt:Le["p"](Le["q"],kt(32)),pollingInterval:Le["l"]}),Le["m"]({matrixServer:Le["q"],subkey:Le["d"]})])),rn=Le["n"](Le["m"](Object.assign(Object.assign({},nn.type.types["0"].props),nn.type.types["1"].props)));function an(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(Qt(r),"_discovery"),pfsRoom:"raiden_".concat(Qt(r),"_path_finding"),monitoringRoom:"raiden_".concat(Qt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},en(n,De.NO_DELIVERY,!0),en(n,De.NO_MEDIATE,!0),en(n,De.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3},t)}var on=n("5dab"),cn=n.n(on),sn=n("0cb5"),un=n.n(sn),ln=n("c72f"),dn=n.n(ln),fn=n("5000"),pn=n.n(fn);function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){return gn(e)||vn(e)||hn(e)||mn()}function mn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hn(e,t){if(e){if("string"===typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function vn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gn(e){if(Array.isArray(e))return On(e)}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function _n(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function kn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Le["t"](Object.assign(Object.assign(Object.assign({type:Le["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Le["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function jn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Le["b"],c=kn(t,a,e),s=kn(n,o,e),u=kn(r,i,e,!0);return{request:c,success:s,failure:u}}function En(e){var t=function(t){return pn()(t.meta,e,(function(e,t){return Ot.is(e)&&Ot.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Tn(e,t){var n=function(n){return _n([e.success,e.failure],n)&&En(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function An(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Tn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?An(e,t):Tn(e,t)),Object(M["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function xn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return bt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(yn(a.map((function(e){return bn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Nn,Rn=Le["q"],Cn=(Le["q"],Le["h"]([Le["t"]({amount:kt(32),expiration:kt(32),secrethash:Et}),Le["m"]({registered:Le["j"](!0)})],"Lock")),Dn=Le["n"](Le["t"]({chainId:kt(32),tokenNetworkAddress:St,channelId:kt(32),nonce:kt(8),transferredAmount:kt(32),lockedAmount:kt(32),locksroot:Et,additionalHash:Et})),In=Dn,Pn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Pe,additionalHash:k["HashZero"],signature:Ie},Ln=Le["t"]({tokenNetwork:St,partner:St}),Un=kn("block/new",Le["t"]({blockNumber:Le["l"]})),Mn=kn("token/monitored",Le["h"]([Le["t"]({token:St,tokenNetwork:St}),Le["m"]({fromBlock:Le["l"],toBlock:Le["l"]})])),Bn=jn(Ln,"channel/open/request","channel/open/success","channel/open/failed",Le["m"]({settleTimeout:Le["l"],subkey:Le["d"],deposit:kt(32)}),Le["t"]({id:Le["l"],token:St,settleTimeout:Le["l"],isFirstParticipant:Le["d"],txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),Fn=kn("channel/monitored",Le["t"]({id:Le["l"]}),Ln),Wn=jn(Ln,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Le["h"]([Le["t"]({deposit:kt(32)}),Le["m"]({subkey:Le["d"],waitOpen:Le["j"](!0)})]),Le["t"]({id:Le["l"],participant:St,totalDeposit:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),$n=kn("channel/withdraw/success",Le["t"]({id:Le["l"],participant:St,totalWithdraw:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),Ln),Hn=jn(Ln,"channel/close/request","channel/close/success","channel/close/failure",Le["v"]([Le["m"]({subkey:Le["d"]}),Le["u"]]),Le["t"]({id:Le["l"],participant:St,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),qn=kn("channel/settleable",Le["t"]({settleableBlock:Le["l"]}),Ln),Vn=jn(Ln,"channel/settle/request","channel/settle/success","channel/settle/failure",Le["v"]([Le["m"]({subkey:Le["d"]}),Le["u"]]),Le["h"]([Le["t"]({id:Le["l"],txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),Le["m"]({locks:Le["o"](Cn)})])),Kn=Le["n"](Le["t"]({userId:Le["q"],accessToken:Le["q"],deviceId:Le["q"],displayName:Le["q"]})),Gn=Le["t"]({address:St}),Zn=kn("matrix/setup",Le["t"]({server:Le["q"],setup:Kn})),Xn=jn(Gn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Le["h"]([Le["t"]({userId:Le["q"],available:Le["d"],ts:Le["l"]}),Le["m"]({caps:Le["p"](Le["q"],Le["b"])})])),Yn=kn("matrix/room",Le["t"]({roomId:Le["q"]}),Gn),Qn=kn("matrix/room/leave",Le["t"]({roomId:Le["q"]}),Gn),zn=kn("rtc/channel",Le["v"]([Le["u"],Ct(RTCDataChannel)]),Gn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Nn||(Nn={}));var Jn,er=Le["n"](Le["t"]({message_identifier:kt(8)})),tr=Le["n"](Le["t"]({type:Le["j"](Nn.DELIVERED),delivered_message_identifier:kt(8)})),nr=tr,rr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.PROCESSED)}),er])),ar=rr,or=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.SECRET_REQUEST),payment_identifier:kt(8),secrethash:Et,amount:kt(32),expiration:kt(32)}),er])),ir=or,cr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.SECRET_REVEAL),secret:Tt}),er])),sr=cr,ur=Le["n"](Le["h"]([Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),transferred_amount:kt(32),locked_amount:kt(32),locksroot:Et}),er])),lr=Le["n"](Le["t"]({route:Le["o"](St)})),dr=lr,fr=Le["n"](Le["t"]({routes:Le["o"](dr)})),pr=fr,br=Le["n"](Le["h"]([Le["t"]({payment_identifier:kt(8),token:St,recipient:St,lock:Cn,target:St,initiator:St,metadata:pr}),ur])),yr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.LOCKED_TRANSFER)}),br])),mr=yr,hr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.REFUND_TRANSFER)}),br])),vr=hr,gr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.UNLOCK),payment_identifier:kt(8),secret:Tt}),ur])),Or=gr,wr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.LOCK_EXPIRED),recipient:St,secrethash:Et}),ur])),_r=wr,kr=Le["n"](Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),participant:St,total_withdraw:kt(32),nonce:kt(8),expiration:kt(32)})),jr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.WITHDRAW_REQUEST)}),kr,er])),Er=jr,Tr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.WITHDRAW_CONFIRMATION)}),kr,er])),Ar=Tr,Sr=Le["n"](Le["h"]([Le["t"]({type:Le["j"](Nn.WITHDRAW_EXPIRED)}),kr,er])),xr=Sr,Nr=Le["n"](Le["t"]({type:Le["j"](Nn.PFS_CAPACITY_UPDATE),canonical_identifier:Le["n"](Le["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,other_participant:St,updating_nonce:kt(8),other_nonce:kt(8),updating_capacity:kt(32),other_capacity:kt(32),reveal_timeout:kt(32)})),Rr=Nr,Cr=Le["n"](Le["t"]({type:Le["j"](Nn.PFS_FEE_UPDATE),canonical_identifier:Le["n"](Le["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,timestamp:Le["q"],fee_schedule:Le["t"]({cap_fees:Le["d"],imbalance_penalty:Le["v"]([Le["k"],Le["c"](Le["s"]([kt(32),_t(32)]))]),proportional:_t(32),flat:_t(32)})})),Dr=Cr,Ir=Le["n"](Le["t"]({type:Le["j"](Nn.MONITOR_REQUEST),balance_proof:Le["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),balance_hash:Et,additional_hash:Et,signature:jt}),monitoring_service_contract_address:St,non_closing_participant:St,non_closing_signature:jt,reward_amount:kt(32)})),Pr=Ir,Lr=[nr,ar,ir,sr,mr,vr,Or,_r,Er,Ar,xr,Rr,Dr,Pr],Ur=Le["v"]([].concat(Lr)),Mr=jn(Le["t"]({address:St,msgId:Le["q"]}),"message/send/request","message/send/success","message/send/failure",Le["t"]({message:Le["v"]([Le["q"],Rt(Ur)])}),void 0),Br=kn("message/global/send",Le["t"]({message:Le["v"]([Le["q"],Rt(Ur)])}),Le["t"]({roomName:Le["q"]})),Fr=kn("message/received",Le["h"]([Le["t"]({text:Le["q"],ts:Le["l"]}),Le["m"]({message:Le["v"]([Ur,Rt(Ur)]),userId:Le["q"],roomId:Le["q"]})]),Le["t"]({address:St})),Wr=n("48f2"),$r=n.n(Wr),Hr=Le["n"](Le["h"]([Le["t"]({result:Le["c"](Le["n"](Le["t"]({path:Le["o"](St),estimated_fee:_t(32)})))}),Le["m"]({feedback_token:Le["q"]})])),qr=Le["c"](Le["n"](Le["t"]({path:Le["o"](St),fee:_t(32)}))),Vr=Le["n"](Le["t"]({address:St,url:Le["q"],rtt:Le["l"],price:kt(32),token:St})),Kr=Le["n"](Le["t"]({sender:St,receiver:St,amount:kt(32),expiration_block:kt(32),one_to_n_address:St,chain_id:kt(32)})),Gr=Le["n"](Le["t"]({last_iou:Rt(Kr)})),Zr={SENT:"sent",RECEIVED:"received"},Xr=Le["n"](Le["h"]([Le["t"]({transfer:xt(Rt(mr)),fee:_t(32),partner:St}),Le["m"]({secret:xt(Le["t"]({value:Tt,registerBlock:Le["l"]})),transferProcessed:xt(Rt(ar)),refund:xt(Rt(vr)),channelClosed:xt(Et),secretRequest:xt(Rt(ir)),secretReveal:xt(Rt(sr)),unlock:xt(Rt(Or)),lockExpired:xt(Rt(_r)),unlockProcessed:xt(Rt(ar)),lockExpiredProcessed:xt(Rt(ar))})])),Yr=Xr,Qr=Le["n"](Le["p"](Le["q"],Yr));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Jn||(Jn={}));var zr=Le["i"]($r()(Zr)),Jr=Le["t"]({secrethash:Et,direction:zr}),ea=jn(Jr,"transfer/request","transfer/success","transfer/failure",Le["h"]([Le["t"]({tokenNetwork:St,target:St,value:kt(32),paths:qr,paymentId:kt(8)}),Le["m"]({secret:Tt,expiration:Le["l"],initiator:St})]),Le["m"]({balanceProof:Rt(In)})),ta=kn("transfer/signed",Le["t"]({message:Rt(mr),fee:_t(32),partner:St}),Jr),na=kn("transfer/processed",Le["t"]({message:Rt(ar)}),Jr),ra=kn("transfer/secret",Le["t"]({secret:Tt}),Jr),aa=jn(Jr,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Le["h"]([Le["t"]({secret:Tt}),Le["m"]({subkey:Le["d"]})]),Le["t"]({secret:Tt,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),oa=kn("transfer/secret/request",Le["t"]({message:Rt(ir)}),Jr),ia=kn("transfer/secret/reveal",Le["t"]({message:Rt(sr)}),Jr),ca=jn(Jr,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Le["t"]({message:Rt(Or),partner:St})),sa=kn("transfer/unlock/processed",Le["t"]({message:Rt(ar)}),Jr),ua=jn(Jr,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Le["t"]({message:Rt(_r),partner:St})),la=kn("transfer/expire/processed",Le["t"]({message:Rt(ar)}),Jr),da=kn("transfer/refunded",Le["t"]({message:Rt(vr),partner:St}),Jr),fa=Le["t"]({direction:zr,tokenNetwork:St,partner:St,totalWithdraw:kt(32),expiration:Le["l"]}),pa=jn(fa,"withdraw/request","withdraw/success","withdraw/failure",Le["u"],Le["t"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})),ba=jn(fa,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Le["t"]({message:Rt(Er)}),Le["t"]({message:Rt(Ar)})),ya=jn(fa,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Le["u"],Le["t"]({message:Rt(xr)})),ma=kn("withdraw/completed",Le["u"],fa),ha=Le["t"]({tokenNetwork:St,target:St,value:kt(32)}),va=Le["t"]({tokenNetwork:St,serviceAddress:St}),ga=jn(ha,"path/find/request","path/find/success","path/find/failure",Le["m"]({paths:qr,pfs:Le["v"]([Vr,Le["k"]])}),Le["t"]({paths:qr})),Oa=kn("pfs/list/updated",Le["t"]({pfsList:Le["o"](St)})),wa=kn("iou/persist",Le["t"]({iou:Rt(Kr)}),va),_a=kn("iou/clear",void 0,va),ka=kn("udc/deposited",kt(32)),ja=Le["t"]({amount:kt(32)}),Ea=jn(ja,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Le["u"],Le["h"]([Le["t"]({block:Le["l"]}),Le["m"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])})])),Ta=kn("udc/withdrawn",Le["t"]({withdrawal:kt(32),txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}),ja),Aa=kn("ms/balanceProof/sent",Le["t"]({tokenNetwork:St,partner:St,id:Le["l"],reward:kt(32),nonce:kt(8),monitoringService:St,txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}));function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xa=kn("raiden/shutdown",Le["t"]({reason:Le["v"]([Le["j"](Ce.STOP),Le["j"](Ce.ACCOUNT_CHANGED),Le["j"](Ce.NETWORK_CHANGED),mt])})),Na=kn("raiden/config/update",rn),Ra=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:xa,raidenConfigUpdate:Na},r),a),o),i),c),Ca=[Ra.raidenShutdown,Ra.newBlock,Ra.matrixPresence.success,Ra.tokenMonitored,Ra.udcWithdrawn,Ra.udcWithdraw.failure,Ra.msBalanceProofSent,Ra.channelSettle.success,Ra.channelSettle.failure],Da=dn()(Ra,(function(e,t){return Object.assign(Object.assign({},e),"type"in t?Sa({},t.type,t):cn()(t,un()("type")))}),{}),Ia=Le["n"](Le["t"]({type:Le["q"],payload:Le["n"](Le["t"]({txHash:Et,txBlock:Le["l"],confirmed:Le["v"]([Le["u"],Le["d"]])}))})),Pa=new Le["a"]("ConfirmableAction",Ia.is,(function(e,t){return Fe["either"].chain(Ia.validate(e,t),(function(e){var n=e.type;return n in Da?Da[n].codec.validate(e,t):Le["f"](e,t)}))}),(function(e){return Da[e.type].codec.encode(e)}));function La(e){return Object.assign(Object.assign({},e),{version:0})}function Ua(e,t){return $a(e)||Wa(e,t)||Ba(e,t)||Ma()}function Ma(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ba(e,t){if(e){if("string"===typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wa(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $a(e){if(Array.isArray(e))return e}function Ha(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=Ua(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function qa(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var Va=n("77a9"),Ka=n("2cb6"),Ga=n("70de");function Za(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xa(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(Va["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(Va["isArrayish"])(e)&&(e=Object(Va["hexlify"])(e)),Ot.is(e)){if(e.lt(0))throw new pt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new pt(dt.DTA_NUMBER_TOO_LARGE);n=Object(Va["hexZeroPad"])(Object(Va["hexlify"])(e),t)}else{if("string"!==typeof e)throw new pt(dt.DTA_UNENCODABLE_DATA);if(Object(Va["hexDataLength"])(e)!==t)throw new pt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var Ya,Qa=function(e){return null!=e&&e["isLosslessNumber"]};function za(e){return Ga["parse"](e,(function(e,t){if(Za(e),Qa(t))try{return t.valueOf()}catch(n){return Object(_["bigNumberify"])(t.toString())}return t}))}function Ja(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Za(e),_["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return Ga["stringify"](e,t,n)}function eo(e){return eo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(e)}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var no,ro,ao=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},oo=(Ya={},to(Ya,Nn.DELIVERED,12),to(Ya,Nn.PROCESSED,0),to(Ya,Nn.SECRET_REQUEST,3),to(Ya,Nn.SECRET_REVEAL,11),to(Ya,Nn.LOCKED_TRANSFER,7),to(Ya,Nn.REFUND_TRANSFER,8),to(Ya,Nn.UNLOCK,4),to(Ya,Nn.LOCK_EXPIRED,13),to(Ya,Nn.WITHDRAW_REQUEST,15),to(Ya,Nn.WITHDRAW_CONFIRMATION,16),to(Ya,Nn.WITHDRAW_EXPIRED,17),to(Ya,Nn.PFS_CAPACITY_UPDATE,-1),to(Ya,Nn.PFS_FEE_UPDATE,-1),to(Ya,Nn.MONITOR_REQUEST,-1),Ya);function io(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function co(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Pe)?k["HashZero"]:Object(_["keccak256"])(Object(Va["concat"])([Xa(t,32),Xa(n,32),Xa(r,32)]))}function so(e){switch(e.type){case Nn.LOCKED_TRANSFER:case Nn.REFUND_TRANSFER:var t=Object(Va["concat"])([Xa(oo[e.type],1),Xa(e.message_identifier,8),Xa(e.payment_identifier,8),Xa(e.lock.expiration,32),Xa(e.token,20),Xa(e.recipient,20),Xa(e.target,20),Xa(e.initiator,20),Xa(e.lock.secrethash,32),Xa(e.lock.amount,32)]);return e.type===Nn.LOCKED_TRANSFER&&(t=Object(Va["concat"])([t,io(e.metadata)])),Object(_["keccak256"])(t);case Nn.UNLOCK:return Object(_["keccak256"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(e.message_identifier,8),Xa(e.payment_identifier,8),Xa(e.secret,32)]));case Nn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(e.message_identifier,8),Xa(e.recipient,20),Xa(e.secrethash,32)]))}}function uo(e){var t;switch(e.type){case Nn.DELIVERED:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(0,3),Xa(e.delivered_message_identifier,8)]));case Nn.PROCESSED:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(0,3),Xa(e.message_identifier,8)]));case Nn.LOCKED_TRANSFER:case Nn.REFUND_TRANSFER:case Nn.UNLOCK:case Nn.LOCK_EXPIRED:var n=so(e),r=co({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(Va["hexlify"])(Object(Va["concat"])([Xa(e.token_network_address,20),Xa(e.chain_id,32),Xa(no.BALANCE_PROOF,32),Xa(e.channel_identifier,32),Xa(r,32),Xa(e.nonce,32),Xa(n,32)]));case Nn.SECRET_REQUEST:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(0,3),Xa(e.message_identifier,8),Xa(e.payment_identifier,8),Xa(e.secrethash,32),Xa(e.amount,32),Xa(e.expiration,32)]));case Nn.SECRET_REVEAL:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(0,3),Xa(e.message_identifier,8),Xa(e.secret,32)]));case Nn.WITHDRAW_REQUEST:case Nn.WITHDRAW_CONFIRMATION:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(e.token_network_address,20),Xa(e.chain_id,32),Xa(no.WITHDRAW,32),Xa(e.channel_identifier,32),Xa(e.participant,20),Xa(e.total_withdraw,32),Xa(e.expiration,32)]));case Nn.WITHDRAW_EXPIRED:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(oo[e.type],1),Xa(0,3),Xa(e.nonce,32),Xa(e.message_identifier,8),Xa(e.token_network_address,20),Xa(e.chain_id,32),Xa(no.WITHDRAW,32),Xa(e.channel_identifier,32),Xa(e.participant,20),Xa(e.total_withdraw,32),Xa(e.expiration,32)]));case Nn.PFS_CAPACITY_UPDATE:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(e.canonical_identifier.chain_identifier,32),Xa(e.canonical_identifier.token_network_address,20),Xa(e.canonical_identifier.channel_identifier,32),Xa(e.updating_participant,20),Xa(e.other_participant,20),Xa(e.updating_nonce,8),Xa(e.other_nonce,8),Xa(e.updating_capacity,32),Xa(e.other_capacity,32),Xa(e.reveal_timeout,32)]));case Nn.PFS_FEE_UPDATE:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(e.canonical_identifier.chain_identifier,32),Xa(e.canonical_identifier.token_network_address,20),Xa(e.canonical_identifier.channel_identifier,32),Xa(e.updating_participant,20),Xa(e.fee_schedule.cap_fees,1),Xa(e.fee_schedule.flat,32),Xa(e.fee_schedule.proportional,32),Object(Ka["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Xa(e.timestamp,19)]));case Nn.MONITOR_REQUEST:return Object(Va["hexlify"])(Object(Va["concat"])([Xa(e.monitoring_service_contract_address,20),Xa(e.balance_proof.chain_id,32),Xa(no.MS_REWARD,32),Xa(e.balance_proof.token_network_address,20),Xa(e.non_closing_participant,20),Xa(e.non_closing_signature,65),Xa(e.reward_amount,32)]))}}function lo(e){return jt.is(e.signature)}function fo(e){return Object(_["verifyMessage"])(Object(Va["arrayify"])(uo(e)),e.signature)}function po(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:so(e),signature:e.signature}}function bo(e){return Ja("signature"in e?Rt(Ur).encode(e):Ur.encode(e))}function yo(e){var t=za(e);return bt(t&&"object"===eo(t)&&"type"in t&&Object.values(Nn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),vt("signature"in t?Rt(Ur):Ur,t)}function mo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return ao(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!lo(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(Va["arrayify"])(uo(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function ho(e){return function(t){return Fr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(no||(no={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(ro||(ro={}));var vo=Le["n"](Le["t"]({address:St,deposit:kt(32),withdraw:kt(32),locks:Le["o"](Cn),balanceProof:Rt(In),pendingWithdraws:Le["o"](Le["v"]([Rt(Er),Rt(Ar),Rt(xr)])),nextNonce:kt(8)})),go=vo,Oo=Le["h"]([Le["n"](Le["t"]({id:Le["l"],token:St,tokenNetwork:St,settleTimeout:Le["l"],isFirstParticipant:Le["d"],openBlock:Le["l"],own:go,partner:go})),Le["v"]([Le["n"](Le["t"]({state:Le["v"]([Le["j"](ro.open),Le["j"](ro.closing)])})),Le["h"]([Le["n"](Le["t"]({closeBlock:Le["l"],closeParticipant:St})),Le["v"]([Le["n"](Le["t"]({state:Le["v"]([Le["j"](ro.closed),Le["j"](ro.settleable),Le["j"](ro.settling)])})),Le["n"](Le["t"]({state:Le["j"](ro.settled),settleBlock:Le["l"]}))])])])]);function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _o(e,t){return Ao(e)||To(e,t)||jo(e,t)||ko()}function ko(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jo(e,t){if(e){if("string"===typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function To(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ao(e){if(Array.isArray(e))return e}function So(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=_o(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:Pn,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function xo(e){for(var t,n={},r=function(){for(var t=_o(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=_o(s[c],2),l=u[0],d=u[1];So(d,{own:e.address,partner:l});var f=He()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:f,tokenNetwork:r}),Object.assign(n,wo({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function No(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ro(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ro(e,t){if(e){if("string"===typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Do(e){var t,n=No(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(_["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}function Io(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Po(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Po(e,t){if(e){if("string"===typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lo(e,t):void 0}}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uo(e){var t,n=Io(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{pendingWithdraws:r[i].withdrawRequests}),delete r[i].withdrawRequests}}catch(c){n.e(c)}finally{n.f()}return e}var Mo=[La,Ha,qa,xo,Do,Uo],Bo=Mo.length-1;function Fo(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Mo[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var Wo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},$o=Le["n"](Le["t"]({address:St,version:Le["j"](Bo),chainId:Le["l"],registry:St,blockNumber:Le["l"],config:rn,channels:Le["n"](Le["p"](Rn,Oo)),oldChannels:Le["n"](Le["p"](Le["q"],Oo)),tokens:Le["n"](Le["p"](Le["q"],St)),transport:Le["n"](Le["m"]({server:Le["q"],setup:Kn,rooms:Le["n"](Le["p"](Le["q"],Le["c"](Le["q"])))})),sent:Qr,received:Qr,iou:Le["n"](Le["p"](Le["q"],Le["p"](Le["q"],Rt(Kr)))),pendingTxs:Le["o"](Pa)})),Ho=$o;function qo(e){return Ja(Ho.encode(e),void 0,2)}function Vo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=za(e));var r=Fo(e,Bo,{log:n});try{return vt(Ho,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function Ko(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({address:n,version:Bo,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var Go=Ko({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0},OneToN:{address:k["AddressZero"],block_number:0}}}),Zo=function(e){return e&&"function"===typeof e.getItem},Xo=function(e,t,n,r,a){return Wo(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,d,f,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Zo(r)?(u=r,l=void 0):Zo(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=Vo(l,{log:i})),!u){o.next=23;break}return f="raiden_".concat(Qt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(f);case 8:if(b=o.sent,!b){o.next=20;break}if(m=Vo(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new pt(dt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Me()((function(e){u.setItem(f,qo(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=Ko({network:e,address:n,contractsInfo:t})),v=an({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},Yo=n("07ae"),Qo=n.n(Yo);function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jo(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),zo({},o,s)))}}return r}}var ei=n("5a76"),ti=n("c77a"),ni=n("4045"),ri=n("1471"),ai=n("394b"),oi=n("cbd9"),ii=n("4dc1"),ci=n("677b"),si=n("c472"),ui=n("01d4"),li=n("c5ca");function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fi(e,t){return hi(e)||mi(e,t)||bi(e,t)||pi()}function pi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bi(e,t){if(e){if("string"===typeof e)return yi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yi(e,t):void 0}}function yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hi(e){if(Array.isArray(e))return e}var vi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe($["a"].apply(void 0,t),Object(ci["a"])())}};function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(ci["a"])(),Object(W["a"])((function(e){return Object(ii["a"])(e)})),Object(si["a"])((function(t,n){var r=t.acc,a=fi(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),di({},o,i)),changed:[o,i]}}),{acc:{}}),Object($["a"])("changed"),Object(B["a"])(gt))}}function Oi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(ui["a"])((function(e){return e.pipe(Object(li["a"])(t))})),Object(oi["a"])(e))}}function wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(P["a"])(e).pipe(Object(ri["a"])((function(e){return e.pipe(Object(W["a"])((function(e,r){return n(e,r)?Object(ti["a"])(e):Object(ei["a"])(t)})))})))}function _i(e,t){return Ei(e)||ji(e,t)||Si(e,t)||ki()}function ki(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ji(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ei(e){if(Array.isArray(e))return e}function Ti(e){return Ni(e)||xi(e)||Si(e)||Ai()}function Ai(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Si(e,t){if(e){if("string"===typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(e,t):void 0}}function xi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ni(e){if(Array.isArray(e))return Ri(e)}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ci=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Di(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Ii(e){return"".concat(e.id,"#").concat(Di(e))}function Pi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function Li(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),d=s.sub(c),f=c.sub(s),p=Pi.apply(void 0,[t].concat(Ti(e.own.pendingWithdraws.filter((function(e){return e.type===Nn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Pi.apply(void 0,[n].concat(Ti(e.partner.pendingWithdraws.filter((function(e){return e.type===Nn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(p).sub(u).add(d),m=e.partner.deposit.sub(b).sub(l).add(f),h=e.own.deposit.add(d).sub(u),v=h.sub(t),g=e.partner.deposit.add(f).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:d,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:f,partnerCapacity:m,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:h,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Ui(e,t,n){var r=this,a=n.log;return function(n){return n.pipe(Object(ni["a"])((function(t){return a.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object(W["a"])((function(e){return Ci(r,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.wait();case 3:return t.t1=t.sent,t.abrupt("return",[t.t0,t.t1]);case 5:case"end":return t.stop()}}),t)})))})),Object(M["a"])((function(n){var r,o,i,c=_i(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new pt(t,{status:null!==(r=u.status)&&void 0!==r?r:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return a.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var Mi=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],Bi=["always failing transaction","execution failed due to an exception","transaction failed"];function Fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:y.a},a=r.log;return function(r){return r.pipe(Object(ri["a"])((function(r){return r.pipe(Object(W["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t,n;return null===(n=null===(t=r.message)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,e)}))?Object(ei["a"])(e):Object(ti["a"])(r)})))})))}}function Wi(e){return e.pipe(Object($["a"])("channels"),gi(),Object($["a"])(1),Object(ai["a"])(Ii,void 0,void 0,(function(){return new R["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=_i(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(oi["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function $i(e){return $i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i(e)}function Hi(e,t){return Ki(e)||Vi(e,t)||Xi(e,t)||qi()}function qi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ki(e){if(Array.isArray(e))return e}function Gi(e){return Qi(e)||Yi(e)||Xi(e)||Zi()}function Zi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xi(e,t){if(e){if("string"===typeof e)return zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}function Yi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qi(e){if(Array.isArray(e))return zi(e)}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ec(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var tc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},nc=xn(Go.blockNumber).handle(Un,(function(e,t){ec(e);var n=t.payload;return n.blockNumber})),rc=xn(Go.tokens).handle(Mn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:Object.assign(Object.assign({},e),Ji({},r,a))}));function ac(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Pa.is(t)){if(void 0===t.payload.confirmed)return[].concat(Gi(ac(e,t)),[t]);var n=ac(e,t);return n.length!==e.length?n:e}return e},ic={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:Pn,pendingWithdraws:[],nextNonce:k["One"]};function cc(e,t){var n,r,a=Di(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:ro.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},ic),{address:e.address}),partner:Object.assign(Object.assign({},ic),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},a,i))})}function sc(e,t){var n;if(!t.payload.confirmed)return e;var r=Di(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==ro.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=$n.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=Hi(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),Ji({},o,Object.assign(Object.assign({},a[o]),(n={},Ji(n,s,u),Ji(n,"pendingWithdraws",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},r,a))}))}function uc(e,t){var n=Di(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===ro.open)r=Object.assign(Object.assign({},r),{state:ro.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:ro.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},n,r))})}function lc(e,t){var n=Di(t.meta),r=e.channels[n];if(!r)return e;if(Hn.request.is(t)&&r.state===ro.open)r=Object.assign(Object.assign({},r),{state:ro.closing});else if(Vn.request.is(t)&&r.state===ro.settleable)r=Object.assign(Object.assign({},r),{state:ro.settling});else{if(!qn.is(t)||r.state!==ro.closed)return e;r=Object.assign(Object.assign({},r),{state:ro.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},n,r))})}function dc(e,t){var n=Di(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==ro.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},n,Object.assign(Object.assign({},r),{state:ro.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],tc(a,["symbol"===$i(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),Ji({},Ii(r),Object.assign(Object.assign({},r),{state:ro.settled,settleBlock:t.payload.txBlock})))})}return e}function fc(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=Di({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===Zr.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ji({},a,Object.assign(Object.assign({},e.channels[a]),Ji({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var pc=xn(Go).handle(Bn.success,cc).handle([Wn.success,$n],sc).handle([Hn.request,qn,Vn.request],lc).handle(Hn.success,uc).handle(Vn.success,dc).handle(aa.success,fc),bc=Jo({blockNumber:nc,tokens:rc,pendingTxs:oc},Go),yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go,t=arguments.length>1?arguments[1]:void 0;return[bc,pc].reduce((function(e,n){return n(e,t)}),e)},mc=yc;function hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vc(e){return _c(e)||wc(e)||Oc(e)||gc()}function gc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oc(e,t){if(e){if("string"===typeof e)return kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kc(e,t):void 0}}function wc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _c(e){if(Array.isArray(e))return kc(e)}function kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jc,Ec=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Tc=xn(Go.transport).handle(Zn,(function(e,t){e.rooms;var n=Ec(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(Yn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),hc({},t.meta.address,[t.payload.roomId].concat(vc((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Qn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),hc({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Ac=Jo({transport:Tc},Go),Sc=Ac;function xc(e){return Cc(e)||Rc(e)||Pc(e)||Nc()}function Nc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Cc(e){if(Array.isArray(e))return Lc(e)}function Dc(e,t){return Mc(e)||Uc(e,t)||Pc(e,t)||Ic()}function Ic(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pc(e,t){if(e){if("string"===typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mc(e){if(Array.isArray(e))return e}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fc=(jc={},Bc(jc,Zr.SENT,"own"),Bc(jc,Zr.RECEIVED,"partner"),jc);function Wc(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=aa.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:Nt({value:t.payload.secret,registerBlock:u})})))))),e}function $c(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Di({tokenNetwork:a,partner:o}),c=Fc[t.meta.direction],s=e.channels[i];if(ta.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==ro.open||!n.nonce.eq(s[c].nextNonce))return e;var u=ta.is(t)?[[].concat(xc(s[c].locks),[t.payload.message.lock]),{transfer:Nt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),Bc({},ca.success.is(t)?"unlock":"lockExpired",Nt(t.payload.message)))],l=Dc(u,2),d=l[0],f=l[1];return s=Object.assign(Object.assign({},s),Bc({},c,Object.assign(Object.assign({},s[c]),{locks:d,balanceProof:po(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),Bc({channels:Object.assign(Object.assign({},e.channels),Bc({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},r,f))))}function Hc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:Nt(t.payload.message)}))))):e}function qc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:Nt(t.payload.message)})))))}function Vc(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(na.is(t))n="transferProcessed";else if(sa.is(t))n="unlockProcessed";else if(la.is(t))n="lockExpiredProcessed";else{if(!da.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),Bc({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Bc({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),Bc({},n,Nt(t.payload.message)))))))}function Kc(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Dc(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),Bc({},i,Object.assign(Object.assign({},c),{channelClosed:Nt(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var f=Dc(d[l],2),p=f[0],b=f[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),Bc({},p,Object.assign(Object.assign({},b),{channelClosed:Nt(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Gc(e,t){var n=t.payload.message,r=Di(t.meta),a=e.channels[r],o=t.meta.direction===Zr.RECEIVED!==ba.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==ro.open||!n.nonce.eq(a[o].nextNonce))return e;a=Object.assign(Object.assign({},a),Bc({},o,Object.assign(Object.assign({},a[o]),{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===Zr.RECEIVED?"partner":"own",c=[].concat(xc(a[i].pendingWithdraws),[t.payload.message]);return a=Object.assign(Object.assign({},a),Bc({},i,Object.assign(Object.assign({},a[i]),{pendingWithdraws:c}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Bc({},r,a))})}function Zc(e,t){var n=Di(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==ro.open)return e;var a=t.meta.direction===Zr.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Object.assign(Object.assign({},r),Bc({},a,Object.assign(Object.assign({},r[a]),{pendingWithdraws:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Bc({},n,r))})}var Xc=xn(Go).handle([ra,aa.success],Wc).handle([ta,ca.success,ua.success],$c).handle([na,sa,la,da],Vc).handle(oa,Hc).handle(ia,qc).handle(Hn.success,Kc).handle([ba.request,ba.success,ya.success],Gc).handle(ma,Zc),Yc=Xc;function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zc=xn(Go.iou).handle(wa,(function(e,t){return Object.assign(Object.assign({},e),Qc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),Qc({},t.meta.serviceAddress,t.payload.iou))))})).handle(_a,(function(e,t){return Qo()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),Jc=Jo({iou:zc},Go),es=Jc;function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e,t){return cs(e)||is(e,t)||as(e,t)||rs()}function rs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function as(e,t){if(e){if("string"===typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?os(e,t):void 0}}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function is(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cs(e){if(Array.isArray(e))return e}var ss=xn(Go).handle(Na,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=ns(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),ts({},c,s)):c in r&&(r=Qo()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),us={configReducer:ss,channelsReducer:mc,transportReducer:Sc,transfersReducer:Yc,servicesReducer:es},ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go,t=arguments.length>1?arguments[1]:void 0;return Object.values(us).reduce((function(e,n){return n(e,t)}),e)},ds=n("5255"),fs=n("0241"),ps=n("8b25"),bs=n("1c3a"),ys=n("8b2d"),ms=n.n(ys),hs=n("8265"),vs=n.n(hs),gs=n("e3b7");function Os(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ks(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ws(e,t){return Ts(e)||Es(e,t)||ks(e,t)||_s()}function _s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ks(e,t){if(e){if("string"===typeof e)return js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?js(e,t):void 0}}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Es(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ts(e){if(Array.isArray(e))return e}function As(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ss=N()((function(e){return e.pipe(Object(B["a"])(Xn.success.is),Object(si["a"])((function(e,t){return Object.assign(Object.assign({},e),As({},t.meta.address,t))}),{}),Object(gs["a"])(),Object(ps["a"])({}))}));function xs(e){return Object.entries(e).filter((function(e){var t=ws(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=ws(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Ns(e){var t;if(e){var n={};try{var r,a=Os(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Rs,Cs=n("c3a3"),Ds=n("f4aa"),Is=n("a4c3"),Ps=n("6ad5"),Ls=n("a8f8"),Us=n("ad8d"),Ms=n("9b17"),Bs=n("d67f"),Fs=n("222f"),Ws=n("dcca"),$s=n("be1d"),Hs=n("2f60"),qs=n.n(Hs),Vs=n("b104"),Ks=n.n(Vs),Gs=n("3de0"),Zs=n("7a10");function Xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ys(e,t){return Js(e)||zs(e,t)||tu(e,t)||Qs()}function Qs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Js(e){if(Array.isArray(e))return e}function eu(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=tu(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function tu(e,t){if(e){if("string"===typeof e)return nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nu(e,t):void 0}}function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ru(e){var t,n=[],r=eu(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Xa(a.expiration,32),Xa(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(Va["concat"])(n))}function au(e){return Object(_["sha256"])(e)}function ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(Va["hexlify"])(Object(_["randomBytes"])(e))}function iu(){return Object(_["bigNumberify"])(Date.now())}function cu(){return Object(_["bigNumberify"])(Date.now())}function su(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?Zr.SENT:Zr.RECEIVED}function uu(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(su(e),":").concat(e.transfer[1].lock.secrethash)}var lu=new RegExp("^(".concat(Object.values(Zr).join("|"),"):0x[a-z0-9]{64}$"),"i");function du(e){bt(lu.test(e),"Invalid transferKey format");var t=e.split(":"),n=Ys(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function fu(e){return function(t){return t[e]?t[e][0]:void 0}}var pu=(Rs={},Xs(Rs,Jn.expired,fu("lockExpiredProcessed")),Xs(Rs,Jn.unlocked,fu("unlockProcessed")),Xs(Rs,Jn.expiring,fu("lockExpired")),Xs(Rs,Jn.unlocking,fu("unlock")),Xs(Rs,Jn.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Xs(Rs,Jn.revealed,fu("secretReveal")),Xs(Rs,Jn.requested,fu("secretRequest")),Xs(Rs,Jn.closed,fu("channelClosed")),Xs(Rs,Jn.refunded,fu("refund")),Xs(Rs,Jn.received,fu("transferProcessed")),Xs(Rs,Jn.pending,fu("transfer")),Rs);function bu(e){for(var t,n,r,a,o,i,c=new Date(e.transfer[0]),s=c,u=Jn.pending,l=0,d=Object.entries(pu);l<d.length;l++){var f=Ys(d[l],2),p=f[0],b=f[1],y=b(e);if(void 0!==y){u=p,s=new Date(y);break}}var m=e.transfer[1],h=su(e),v=m.lock.amount.sub(e.fee),g=e.secretRequest&&e.secretRequest[1].amount.lt(v),O=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(g||e.refund||e.lockExpired||e.channelClosed)&&void 0,w=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:uu(e),secrethash:m.lock.secrethash,direction:h,status:u,initiator:m.initiator,partner:e.partner,target:m.target,metadata:m.metadata,paymentId:m.payment_identifier,chainId:m.chain_id.toNumber(),token:m.token,tokenNetwork:m.token_network_address,channelId:m.channel_identifier,value:v,fee:e.fee,amount:m.lock.amount,expirationBlock:m.lock.expiration.toNumber(),startedAt:c,changedAt:s,success:O,completed:w,secret:null===(i=null===(o=e.secret)||void 0===o?void 0:o[1])||void 0===i?void 0:i.value}}function yu(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return Pn;var c,s=eu(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(gt).map(po).find((function(e){return co(e)===t}));if(l)return l}}}catch(d){s.e(d)}finally{s.f()}}var mu=n("a0df"),hu=n("31a7"),vu=n("c998"),gu=n("ee79"),Ou=n("b4cc"),wu=n("0ff6"),_u=n("4e0b"),ku=n("1f0b");function ju(e,t){return Au(e)||Tu(e,t)||Nu(e,t)||Eu()}function Eu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Au(e){if(Array.isArray(e))return e}function Su(e){return Cu(e)||Ru(e)||Nu(e)||xu()}function xu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nu(e,t){if(e){if("string"===typeof e)return Du(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Du(e,t):void 0}}function Ru(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Cu(e){if(Array.isArray(e))return Du(e)}function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pu=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Lu=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},hu.contracts),wu.contracts);case"ropsten":return Object.assign(Object.assign({},mu.contracts),Ou.contracts);case"goerli":return Object.assign(Object.assign({},vu.contracts),_u.contracts);case"homestead":return Object.assign(Object.assign({},gu.contracts),ku.contracts);default:throw new pt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Uu(e,t){var n,r;return Pu(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(Qt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(_["sha256"])(c),u=new Zs["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Mu=function(e,t,n){return Pu(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!Gs["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof Zs["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new pt(dt.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!St.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new pt(dt.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!At.is(e)){r.next=37;break}a=new Zs["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new pt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Uu,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Bu=function(e){return e.pipe(Object(W["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),gi(),Object($["a"])(1),Object(M["a"])(bu))},Fu=function(e){return Object.values(e).reduce((function(e,t){var n=Li(t),r=Object.assign({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Object.assign(Object.assign({},e),Iu({},t.token,Object.assign(Object.assign({},e[t.token]),Iu({},t.partner.address,r))))}),{})};function Wu(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function $u(e,t){return e.signer===t?e:e.connect(t)}function Hu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Pu(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,Su(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new pt(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,bt(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new pt(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function qu(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Pu(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(vi("state","blockNumber"),Object(Ls["a"])(a),Object(B["a"])((function(e){var t=ju(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(Mt["a"])((function(e){var t=ju(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(gt)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var Vu=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Ku(e,t){return Pu(this,void 0,void 0,p.a.mark((function n(){var r,a,o,i,c,s,u,l,d,f,b;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=ve.connect(t,e),n.next=3,r.msc_address();case 3:return a=n.sent,o=xe.connect(a,e),n.next=7,o.token_network_registry();case 7:return i=n.sent,c=G.connect(i,e),n.next=11,c.secret_registry_address();case 11:return s=n.sent,n.next=14,o.service_registry();case 14:return u=n.sent,n.next=17,e.getLogs(Object.assign(Object.assign({},c.filters.TokenNetworkCreated(null,null)),{fromBlock:1,toBlock:"latest"}));case 17:return l=n.sent,d=l.map((function(e){return e.blockNumber})).filter(gt),f=d.length?Math.min.apply(Math,Su(d)):0,n.next=22,r.one_to_n_address();case 22:return b=n.sent,n.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:f},ServiceRegistry:{address:u,block_number:f},UserDeposit:{address:t,block_number:f},SecretRegistry:{address:s,block_number:f},MonitoringService:{address:a,block_number:f},OneToN:{address:b,block_number:f}});case 24:case"end":return n.stop()}}),n)})))}function Gu(e){return Yu(e)||Xu(e)||Ju(e)||Zu()}function Zu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Yu(e){if(Array.isArray(e))return el(e)}function Qu(e,t){return nl(e)||tl(e,t)||Ju(e,t)||zu()}function zu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ju(e,t){if(e){if("string"===typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,t):void 0}}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nl(e){if(Array.isArray(e))return e}function rl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var al=function(e,t,n){rl(e),rl(t);var r=n.provider;return wi((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object(W["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),Gt(r,"block"))})),Object(M["a"])((function(e){return Un({blockNumber:e})})))},ol=function(e,t,n){rl(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Is["a"])(1),Object(B["a"])((function(e){return Ks()(e.tokens)})),Object(W["a"])((function(){return wi((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object(W["a"])(Lt["a"]),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object(W["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Cs["a"])(wi((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Lt["a"])),wi((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Lt["a"]))).pipe(Object(Is["a"])(1),Object(Ps["a"])(Mn({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},il=function(e,t,n){rl(e),rl(t);var r=n.address,a=n.network,o=n.provider;return wi((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object(W["a"])((function(e){return Object(Ds["a"])(o.pollingInterval).pipe(Object(Mt["a"])((function(){return Object(I["a"])(e?wi((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.includes(r)?L["a"]:Object(D["a"])(xa({reason:Ce.ACCOUNT_CHANGED}))}))):L["a"],wi((function(){return Xt(o)}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(xa({reason:Ce.NETWORK_CHANGED})):L["a"]}))))})))})))};function cl(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function sl(e,t){var n=Qu(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=cl(s),l=u.openTopic,d=u.depositTopic,f=u.withdrawTopic,p=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Ls["a"])(i),Object(M["a"])((function(e){var t,n,i=Qu(e,2),c=i[0],s=i[1],u=s.state,y=s.config,m=c[0].toNumber(),h=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===m})),v=Dt(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,_=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var k=Qu(c,4),j=k[1],E=k[2],T=k[3];if((o===j||o===E)&&(!h||m>h.id)){var A=o==j?E:j;n=Bn.success({id:m,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:A})}break;case d:var S=Qu(c,3),x=S[1],N=S[2];(null===h||void 0===h?void 0:h.id)===m&&N.gt(h[x===h.partner.address?"partner":"own"].deposit)&&(n=Wn.success({id:m,participant:x,totalDeposit:N,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case f:var R=Qu(c,3),C=R[1],D=R[2];(null===h||void 0===h?void 0:h.id)===m&&D.gt(h[C===h.partner.address?"partner":"own"].withdraw)&&(n=$n({id:m,participant:C,totalWithdraw:D,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case p:if((null===h||void 0===h?void 0:h.id)===m&&!("closeBlock"in h)){var I=Qu(c,2),P=I[1];n=Hn.success({id:m,participant:P,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address})}break;case b:(null===h||void 0===h?void 0:h.id)===m&&(n=Vn.success({id:m,txHash:O,txBlock:w,confirmed:_,locks:h.partner.locks},{tokenNetwork:a,partner:h.partner.address}));break}return n})),Object(B["a"])(gt))}}function ul(e,t,n){var r=Qu(e,2),a=r[0],o=r[1],i=Qu(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,d=n.latest$,f=n.getTokenNetworkContract,p=f(s),b=cl(p),y=b.openTopic;return wi((function(){return Promise.all([l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,u,null,null)),{fromBlock:a,toBlock:o})),l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,null,u,null)),{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Ls["a"])(d),Object(W["a"])((function(e){var t=Qu(e,2),n=Qu(t[0],2),r=n[0],i=n[1],c=t[1].state,d=r.concat(i).map(Zt(p)).filter(gt).filter((function(e){var t=Qu(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Di({tokenNetwork:s,partner:o});return!(Ii({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),f=[].concat(Gu(d),Gu(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=Qu(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===f.length?L["a"]:wi((function(){return l.getLogs({address:s,topics:[Object.values(cl(p)).filter((function(e){return e!==y})),f],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object(W["a"])((function(e){var t=e.map(Zt(p)).filter(gt),n=[].concat(Gu(d),Gu(t));return Object(Lt["a"])(qs()(n,[function(e){return Dt(e).blockNumber},function(e){return Dt(e).transactionIndex}]))})))})),sl([c,s],n))}function ll(e,t,n){var r=Qu(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(cl(u))]};return s.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.confirmationBlocks;return Gt(i,l,void 0,n,e)})),Object(M["a"])(Zt(u)),Object(B["a"])(gt),sl([a,o],n))}var dl=function(e,t,n){return e.pipe(Object(B["a"])(Un.is),Object($["a"])("payload","blockNumber"),Object(Us["a"])(1,void 0,(function(e){return t.pipe(Object($["a"])("tokens"),gi(),Object(Ls["a"])(t),Object(W["a"])((function(t){var r=Qu(t,2),a=Qu(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new C["a"];return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(I["a"])(Object(D["a"])(Mn({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),ul([s,e],[o,i],n).pipe(Object(Ms["a"])((function(){return u.next(!0),u.complete()}))),ll(e+1,[o,i],n).pipe(Object(Bs["a"])((function(){return u}))))})))})))})))},fl=function(e,t){return rl(e),t.pipe(Wi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return Fn({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},pl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(_n(Bn.request)),Object(Ls["a"])(t,u),Object(W["a"])((function(t){var n,u,l,d,f=Qu(t,3),p=f[0],b=f[1],y=f[2],m=y.settleTimeout,h=y.subkey,v=p.meta,g=v.tokenNetwork,O=v.partner,w=null===(n=b.channels[Di(p.meta)])||void 0===n?void 0:n.state;if(w)return Object(D["a"])(Bn.failure(new pt(dt.CNL_INVALID_STATE,{state:w}),p.meta));var _=Wu({signer:a,address:o,main:i},null!==(u=p.payload.subkey)&&void 0!==u?u:h),k=_.signer,j=$u(s(g),k),E=L["a"];return(null===(d=null===(l=p.payload.deposit)||void 0===l?void 0:l.gt)||void 0===d?void 0:d.call(l,0))&&(E=Object(D["a"])(Wn.request({deposit:p.payload.deposit,subkey:p.payload.subkey,waitOpen:!0},p.meta))),Object(Cs["a"])(E,Object(P["a"])((function(){var e;return j.functions.openChannel(o,O,null!==(e=p.payload.settleTimeout)&&void 0!==e?e:m)})).pipe(Ui("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),Fi(c.pollingInterval,void 0,Mi.concat(Bi),{log:r}),Object(oi["a"])(e.pipe(Object(B["a"])(Bn.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===g&&e.meta.partner===O})))),Object(Fs["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(Bn.failure(e,p.meta))}))))})))};function bl(e,t,n,r,a){var o=Qu(e,2),i=o[0],c=o[1],s=Qu(t,3),u=s[0],l=s[1],d=s[2],f=a.log;return(null===n||void 0===n?void 0:n.gt(k["Zero"]))?Object(P["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(W["a"])((function(e){var t=Qu(e,2),r=t[0],a=t[1];return bt(r.gte(n),[dt.RDN_INSUFFICIENT_BALANCE,{current:r.toString(),required:n.toString()}]),a.gte(n)?Object(D["a"])(!0):Object(P["a"])((function(){return i.functions.approve(c.address,a.add(n))})).pipe(Ui("approve",dt.CNL_APPROVE_TRANSACTION_FAILED,{log:f}))})),Object(Ws["a"])(r),Object(Is["a"])(1),Object(W["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,d).then((function(t){var n=t[0];return[e,n]}))})),Object(W["a"])((function(e){var t=Qu(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),d)})),Ui("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:f}),Fi(c.provider.pollingInterval,void 0,Mi.concat(Bi),{log:f}),Object(Fs["a"])()):L["a"]}var yl=function(e,t,n){rl(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(B["a"])(_n(Wn.request)),Object(ai["a"])((function(e){return e.meta.tokenNetwork})),Object(W["a"])((function(t){return t.pipe(Object($s["a"])((function(t){return Object(ds["a"])([l,u]).pipe(Object(F["a"])(),Object(W["a"])((function(n){var u,d,f=Qu(n,2),p=f[0].state,b=f[1].subkey,y=t.meta,m=y.tokenNetwork,h=y.partner,v=He()(p.tokens,(function(e){return e===m})),g=p.channels[Di(t.meta)];if(v&&!g&&t.payload.waitOpen)d=Object(I["a"])(e.pipe(Object(B["a"])(Bn.failure.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(Ws["a"])(Object(ti["a"])(new pt(dt.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object($["a"])("state","channels",Di(t.meta)),Object(B["a"])(gt)));else{if((null===g||void 0===g?void 0:g.state)!==ro.open)throw new pt(dt.CNL_NO_OPEN_CHANNEL_FOUND);d=Object(D["a"])(g)}var O=Wu({signer:a,address:o,main:i},null!==(u=t.payload.subkey)&&void 0!==u?u:b),w=O.signer,_=O.address,k=$u(c(v),w),j=$u(s(m),w);return d.pipe(Object($["a"])("id"),Object(Us["a"])(1,void 0,(function(e){return bl([k,j],[_,o,h],t.payload.deposit,e,{log:r})})))})),Object(Bt["a"])((function(e){return Object(D["a"])(Wn.failure(e,t.meta))})))})))})))},ml=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(_n(Hn.request)),Object(Ls["a"])(t,l),Object(W["a"])((function(e){var t,n,l=Qu(e,3),d=l[0],f=l[1],p=l[2].subkey,b=d.meta,y=b.tokenNetwork,m=b.partner,h=Wu({signer:a,address:o,main:i},null!==(n=null===(t=d.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:p),v=h.signer,g=$u(u(y),v),O=f.channels[Di(d.meta)];if((null===O||void 0===O?void 0:O.state)!==ro.open&&(null===O||void 0===O?void 0:O.state)!==ro.closing){var w=new pt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,d.meta);return Object(D["a"])(Hn.failure(w,d.meta))}var k=O.partner.balanceProof,j=co(k),E=k.nonce,T=k.additionalHash,A=k.signature,S=Object(_["concat"])([Xa(y,20),Xa(s.chainId,32),Xa(no.BALANCE_PROOF,32),Xa(O.id,32),Xa(j,32),Xa(E,32),Xa(T,32),Xa(A,65)]);return Object(Lt["a"])(a.signMessage(S)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return g.functions.closeChannel(O.id,m,o,j,E,T,A,e)})).pipe(Ui("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Fs["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(Hn.failure(e,d.meta))})))})))},hl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])(_n(Hn.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(Un.is),Object(U["a"])(1),Object(Is["a"])(1),Object(Ps["a"])(t))})),Object(Ls["a"])(t,l),Object(B["a"])((function(e){var t=Qu(e,2),n=t[0],r=t[1],a=r.channels[Di(n.meta)];return(null===a||void 0===a?void 0:a.state)===ro.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object(W["a"])((function(e){var t=Qu(e,3),n=t[0],l=t[1],d=t[2].subkey,f=n.meta,p=f.tokenNetwork,b=f.partner,y=Wu({signer:a,address:o,main:i},d),m=y.signer,h=$u(u(p),m),v=l.channels[Di(n.meta)],g=co(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,k=v.partner.balanceProof.signature,j=Object(_["concat"])([Xa(p,20),Xa(s.chainId,32),Xa(no.BALANCE_PROOF_UPDATE,32),Xa(v.id,32),Xa(g,32),Xa(O,32),Xa(w,32),Xa(k,65)]);return Object(Lt["a"])(a.signMessage(j)).pipe(Object(W["a"])((function(e){return Object(P["a"])((function(){return h.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,k,e)})).pipe(Ui("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Fs["a"])(),Object(Bt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),L["a"]})))})))},vl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(_n(Vn.request)),Object(Ls["a"])(t,u),Object(W["a"])((function(e){var t,n,u=Qu(e,3),l=u[0],d=u[1],f=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=Wu({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=m.signer,v=$u(s(b),h),g=d.channels[Di(l.meta)];if((null===g||void 0===g?void 0:g.state)!==ro.settleable&&(null===g||void 0===g?void 0:g.state)!==ro.settling){var O=new pt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,l.meta);return Object(D["a"])(Vn.failure(O,l.meta))}return Object(Lt["a"])(Promise.all([v.functions.getChannelParticipantInfo(g.id,o,y),v.functions.getChannelParticipantInfo(g.id,y,o)])).pipe(Object(W["a"])((function(e){var t=Qu(e,2),n=t[0][3],a=t[1][3],i=g.own.balanceProof;if(n!==co(i)){var s=yu(d.sent,n,l.meta);bt(s,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),i=s}var u=g.partner.balanceProof;if(a!==co(u)){var f=yu(d.received,a,l.meta);bt(f,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:y,partnerBalanceHash:a}]),u=f}var p=[o,i],b=[y,u];if(b[1].transferredAmount.add(b[1].lockedAmount).lt(p[1].transferredAmount.add(p[1].lockedAmount))){var m=[b,p];p=m[0],b=m[1]}return Object(P["a"])((function(){return v.functions.settleChannel(g.id,p[0],p[1].transferredAmount,p[1].lockedAmount,p[1].locksroot,b[0],b[1].transferredAmount,b[1].lockedAmount,b[1].locksroot)})).pipe(Ui("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}))})),Object(Fs["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(Vn.failure(e,l.meta))})))})))},gl=function(e,t){return e.pipe(Object(B["a"])(_n(Un)),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Qu(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===ro.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,qn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Ol=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])(_n(Vn.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Ls["a"])(t,u),Object(B["a"])((function(e){var t,n=Qu(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Di(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object(W["a"])((function(e){var t=Qu(e,3),n=t[0],u=t[2].subkey,l=n.meta,d=l.tokenNetwork,f=l.partner,p=$u(s(d),Wu({signer:a,address:o,main:i},u).signer),b=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Gu(e),[Xa(t.expiration,32),Xa(t.amount,32),t.secrethash])}),[]));return Object(P["a"])((function(){return p.functions.unlock(n.payload.id,o,f,b)})).pipe(Ui("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}),Object(Fs["a"])(),Object(Bt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),L["a"]})))})))};function wl(e,t,n,r){return wi((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(B["a"])(gt))}var _l=function(e,t,n){rl(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(ds["a"])(t.pipe(vi("blockNumber")),t.pipe(Object($["a"])("pendingTxs")),r.pipe(vi("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=Qu(e,2),n=t[1];return n.length>0})),Object(Mt["a"])((function(e){var t=Qu(e,3),n=t[0],r=t[1],i=t[2];return Object(Lt["a"])(r).pipe(Object(B["a"])((function(e){return e.payload.txBlock+i<n})),Object($s["a"])((function(e){return wl(e,a,n,i).pipe(Object(oi["a"])(o.pipe(Object(B["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))},kl=n("d859"),jl=n("a4f9"),El=n("1e86"),Tl=n("efec"),Al=n("305c");function Sl(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function xl(e,t){var n=Object(Al["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Nl=n("e5e1"),Rl=n("eab5"),Cl=n("38c9"),Dl=n.n(Cl);function Il(e,t){return Bl(e)||Ml(e,t)||Ll(e,t)||Pl()}function Pl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ll(e,t){if(e){if("string"===typeof e)return Ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ul(e,t):void 0}}function Ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ml(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Bl(e){if(Array.isArray(e))return e}function Fl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Wl(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(gt)}var $l=Dl()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Hl(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find($l(t))),n?Object(D["a"])(n):Object(Nl["a"])(e,"Room").pipe(Object(B["a"])($l(t)),Object(Is["a"])(1))}function ql(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(Is["a"])(1),Object(W["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(gt),Object(ci["a"])(),Object(Rl["a"])((function(n){return Hl(t,n).pipe(Object(W["a"])((function(t){return i.pipe(Object($["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(ci["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(Rl["a"])((function(e){var n=e.room,r=e.userId;if(!r)return L["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(Nl["a"])(t,"RoomMember.membership",(function(e,t){return Fl(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object($["a"])("roomId"))})))})),Object(Is["a"])(1),Object(W["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(Ps["a"])("string"===typeof e?e:e.label),Object(ri["a"])((function(e){return e.pipe(Object(Ls["a"])(c),Object(W["a"])((function(e,t){var n=Il(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(ei["a"])(a)):Object(ti["a"])(r)})))})))})))}function Vl(e,t,n){var r=n.log;if("string"===typeof e)try{var a=yo(e);if("signature"in a){var o=fo(a);if(o!==t)throw new pt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function Kl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Gl(e,t){return zl(e)||Ql(e,t)||Xl(e,t)||Zl()}function Zl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xl(e,t){if(e){if("string"===typeof e)return Yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yl(e,t):void 0}}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ql(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function zl(e){if(Array.isArray(e))return e}var Jl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ed="RAIDEN";function td(e,t){var n=Sl(t.getHomeserverUrl());return Object(Lt["a"])(Wl(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object(W["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object($["a"])("roomId"),Object(kl["a"])())}function nd(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function rd(e,t,n,r){return e.pipe(Object(B["a"])(Zn.is),Object(Is["a"])(1),Object(ni["a"])((function(){n.next(t),n.complete()})),Object(li["a"])(1e3),Object(Ls["a"])(r),Object(W["a"])((function(e){var n=Gl(e,2),r=n[1];return td(r,t).pipe(Object(W["a"])((function(e){return nd(t,e)})),Object(W["a"])((function(e){return t.startClient({filter:e})})))})),Object(Fs["a"])())}function ad(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function od(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(Tl["a"])(e+"/_matrix/client/versions").pipe(Object(jl["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Bt["a"])((function(){return Object(D["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function id(e,t){var n=this;return Object(Tl["a"])(e).pipe(Object(W["a"])((function(t){return Jl(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(jl["a"])(t),Object(W["a"])((function(e){return ad(e)})),Object(W["a"])((function(e){return od(e,t)})),Object(kl["a"])(),Object(W["a"])((function(e){return qs()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(El["a"])((function(){return new pt(dt.TRNS_NO_MATRIX_SERVERS)})))}function cd(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=Sl(e);if(!c)throw new pt(dt.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(F["a"])(),Object(W["a"])((function(n){var i=n.pollingInterval;if(t){var s=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:s,server:e,setup:t})}var u=Object(h["createClient"])({baseUrl:e}),l=a.toLowerCase(),d="@".concat(l,":").concat(c);return Object(Lt["a"])(o.signMessage(c)).pipe(Object(W["a"])((function(e){return wi((function(){return u.login("m.login.password",{user:l,password:e,device_id:ed})}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object(Bt["a"])((function(t){return u.register(l,e).catch((function(){throw t}))})))})),Object(W["a"])((function(t){var n=t.access_token,r=t.device_id;return u.deviceId=r,u._http.opts.accessToken=n,u.credentials={userId:d},Object(Lt["a"])(o.signMessage(d)).pipe(Object(M["a"])((function(t){return{matrix:u,server:e,setup:{userId:d,accessToken:n,deviceId:r,displayName:t}}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(wi((function(){return t.setDisplayName(a.displayName)}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),wi((function(){return t.setAvatarUrl(r&&!Ks()(r)?xs(r):"")}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))).pipe(Object(Ps["a"])({matrix:t,server:n,setup:a}))})))})))}var sd=function(e,t,n){Kl(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(ds["a"])([i,c]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var t,n=Gl(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,d=i.caps,f=o.transport.server,p=o.transport.setup,b=[];s?(s===f&&b.push(Object(D["a"])({server:f,setup:p})),b.push(Object(D["a"])({server:s}))):(f&&b.push(Object(D["a"])({server:f,setup:p})),b.push(id(u,l)));var y=function(e){return t=e,L["a"]};return Object(P["a"])((function(){return b.shift()||L["a"]})).pipe(Object(Bt["a"])(y),Object($s["a"])((function(e){var t=e.server,n=e.setup;return cd(t,n,{address:r,signer:a,config$:c},d).pipe(Object(Bt["a"])(y))})),Object(F["a"])(),Object(ni["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(ri["a"])((function(e){return e.pipe(Object(W["a"])((function(){return b.length?Object(D["a"])(null):Object(ti["a"])(t)})))})))})),Object(W["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(rd(e,n,o,c),Object(D["a"])(Zn({server:r,setup:a})),c.pipe(vi("logger"),Object(ni["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Fs["a"])()))})))},ud=function(e,t,n){Kl(t);var r=n.matrix$;return r.pipe(Object(W["a"])((function(t){return e.pipe(Object(Ms["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Fs["a"])())},ld=n("93e7"),dd=n.n(ld);function fd(e,t){return yd(e)||bd(e,t)||vd(e,t)||pd()}function pd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function yd(e){if(Array.isArray(e))return e}function md(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function hd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=vd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function vd(e,t){if(e){if("string"===typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gd(e,t):void 0}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Od=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},wd=["online","unavailable"],_d=/^@(0x[0-9a-f]{40})[.:]/i;function kd(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object(W["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=hd(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=_d.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object(W["a"])((function(t){return xl(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(gt),Object(kl["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(dt.TRNS_NO_VALID_USER,{address:t});return dd()(e,"last_active_ago")})))}var jd=function(e,t,n){md(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])(_n(Xn.request)),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(ai["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Ls["a"])(a.pipe(vi("presences"))),Object(Mt["a"])((function(e){var t=fd(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):kd(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Xn.success({userId:n,available:wd.includes(t),ts:Date.now(),caps:Ns(a)},r.meta)})),Object(Bt["a"])((function(e){return Object(D["a"])(Xn.failure(e,r.meta))})))})))})))},Ed=function(e,t,n){md(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(Rl["a"])((function(e){return Object(Nl["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{bt(null===a||void 0===a?void 0:a.presence);var o=null===(t=_d.exec(a.userId))||void 0===t?void 0:t[1];bt(o);var i=Object(_["getAddress"])(o);return bt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(gt),Object(Ls["a"])(e.pipe(Object(B["a"])(Xn.request.is),Object(si["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(ps["a"])(new Set))),Object(B["a"])((function(e){var t=fd(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object(W["a"])((function(e){var t=fd(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=wd.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;bt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(c,e.displayname);return bt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Xn.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Ns(e.avatar_url)},{address:n})})),Object(Bt["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),L["a"]})))}))).pipe(Object(Ls["a"])(o),Object(B["a"])((function(e){var t=fd(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object($["a"])(0))},Td=function(e){return e.pipe(Object(B["a"])(Fn.is),Object(M["a"])((function(e){return Xn.request(void 0,{address:e.meta.partner})})))},Ad=function(e,t,n){md(e),md(t);var r=n.matrix$,a=n.config$;return a.pipe(Object($["a"])("caps"),Object(ci["a"])(vs.a),Object(U["a"])(1),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object(W["a"])((function(e){var t=fd(e,2),n=t[0],r=t[1];return Od(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!Ks()(n)?xs(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(Fs["a"])())},Sd=n("41db"),xd=n("3ae7"),Nd=n.n(xd);function Rd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Pd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Cd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Dd(e,t){return Md(e)||Ud(e,t)||Pd(e,t)||Id()}function Id(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pd(e,t){if(e){if("string"===typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ud(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Md(e){if(Array.isArray(e))return e}var Bd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Fd(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(Nl["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(Is["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Ls["a"])(r),Object(W["a"])((function(r){var a=Dd(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(ui["a"])((function(e){return e.pipe(Object(li["a"])(i))})),Object(oi["a"])(Object(Nl["a"])(e,"RoomMember.membership",(function(e,t){return Cd(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var Wd=function(e,t,n){Cd(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])(_n([ta,Fn,Mr.request,Qn])),Object(M["a"])((function(e){var t;switch(e.type){case ta.type:e.meta.direction===Zr.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===Zr.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Fn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(gt),Object(ai["a"])((function(e){return e})),Object(W["a"])((function(e){return e.pipe(Object(W["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Mt["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(Is["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object(W["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return Yn({roomId:n},{address:t})})),Object(Bt["a"])((function(e){return a.error("Error creating room, ignoring",e),L["a"]})))})))})))},$d=function(e,t,n){Cd(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])(_n(Xn.success)),Object(ai["a"])((function(e){return e.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Ls["a"])(r),Object(Rl["a"])((function(e){var t=Dd(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(ci["a"])(),Object(Rl["a"])((function(e){return Object(Cs["a"])(Object(D["a"])(e),e?Object(Nl["a"])(r,"RoomMember.membership",(function(e,t){return Cd(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(Ps["a"])(e)):L["a"])})),Object(Rl["a"])((function(e){return e?Fd(r,e,n.payload.userId,a,{log:i}):L["a"]}))):L["a"]})))})),Object(Fs["a"])())},Hd=function(e,t,n){Cd(e),Cd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Rl["a"])((function(e){return Object(Nl["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=Dd(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(vi("presences"),Object(M["a"])((function(e){return Nd()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(gt),Object(Is["a"])(1),Object(oi["a"])(Object(ei["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Lt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Ps["a"])(Yn({roomId:n.roomId},{address:a.meta.address})),Object(Bt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),L["a"]})))})))},qd=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(_n(Yn)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ls["a"])(t,o),Object(W["a"])((function(e){var t,n,a=Dd(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Lt["a"])(l.filter((function(e,t){return Cd(e),t>=u}))).pipe(Object(W["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return Qn({roomId:e},i.meta)})))})))},Vd=function(e,t,n){Cd(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(Rl["a"])((function(e){return Object(Nl["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,room:t}})))})),Object(Bs["a"])((function(){return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.httpTimeout;return Object(ei["a"])(t)})))})),Object(Ls["a"])(t,o),Object(B["a"])((function(e){var t,n=Dd(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=Sl(a.getHomeserverUrl());if(Wl(c).some((function(e){return $l("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var d,f=l[u],p=Rd(f);try{for(p.s();!(d=p.n()).done;){var b=d.value;if(b===o.roomId)return!1}}catch(y){p.e(y)}finally{p.f()}}return!0})),Object(W["a"])((function(e){var t=Dd(e,1),n=t[0],a=n.matrix,o=n.room;return Bd(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o.roomId),e.abrupt("return",a.leave(o.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(Fs["a"])())},Kd=function(e,t,n){Cd(e);var r=n.log,a=n.matrix$;return a.pipe(Object(Rl["a"])((function(e){return Object(Nl["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Dd(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Dd(s[c],2),l=u[0],d=u[1],f=Rd(d),e.prev=5,f.s();case 7:if((b=f.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Qn({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Gd=function(e,t,n){Cd(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(vi("transport","rooms"),Object(B["a"])(gt),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Dd(r[n],2),o=a[0],i=a[1],c=Rd(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Sd["a"])((function(e){var t=e.roomId;return t})),Object(W["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=Dd(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Hl(i,a).pipe(Object(jl["a"])(c),Object(Fs["a"])(),Object(Bt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(Qn({roomId:a},{address:o}))})))})))},Zd=function(e,t){return e.pipe(Object(B["a"])(Fr.is),Object(Ls["a"])(t),Object(B["a"])((function(e){var t,n,r=Dd(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=Dd(e,1),n=t[0];return Yn({roomId:n.payload.roomId},n.meta)})))};function Xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qd(e,t,n){return t&&Yd(e.prototype,t),n&&Yd(e,n),e}var zd=function(){function e(t){Xd(this,e),this.values=new Map,this.max=t}return Qd(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function Jd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=nf(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ef(e,t){return of(e)||af(e,t)||nf(e,t)||tf()}function tf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nf(e,t){if(e){if("string"===typeof e)return rf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rf(e,t):void 0}}function rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function af(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function of(e){if(Array.isArray(e))return e}function cf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var sf=function(e,t,n){cf(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])(_n(Mr.request)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(ai["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object($s["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:bo(t.payload.message),c={body:a,msgtype:"m.text"};return ql(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(Ps["a"])(Mr.success(void 0,t.meta)),Object(Bt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(Mr.failure(e,t.meta))})))})))})))},uf=function(e,t,n){cf(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])(_n(Br)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ls["a"])(o),Object(W["a"])((function(e){var t=ef(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=Wl(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),L["a"];var s=Sl(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Hl(o,u).pipe(Object(W["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:bo(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Bt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),L["a"]})))})),Object(Fs["a"])())},lf=function(e,t,n){cf(e),cf(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Rl["a"])((function(e){return Object(Nl["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Ls["a"])(o),Object(B["a"])((function(e){var t,n,r=ef(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!Wl(s).some((function(e){return $l("#".concat(e,":").concat(Sl(o.getHomeserverUrl())),c)}))})),Object(W["a"])((function(e){var t=ef(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Nd()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Is["a"])(1),Object(oi["a"])(Object(ei["a"])(c)),Object(W["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Nd()(n,["payload.userId",a.getSender()]),s=Jd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=Vl(l,c.meta.address,{log:r}),e.next=10,Fr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},df=function(e,t,n){cf(t);var r=n.log,a=n.signer,o=n.latest$,i=new zd(32);return e.pipe(Object(B["a"])(ho([Rt(ar),Rt(ir),Rt(sr)])),Object(Ls["a"])(o),Object(B["a"])((function(e){var t,n=ef(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[De.NO_DELIVERY])})),Object($s["a"])((function(e){var t=ef(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(Mr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Nn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Lt["a"])(mo(a,s,{log:r})).pipe(Object(ni["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return Mr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},ff=n("4d57"),pf=n("56f3");function bf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function yf(e,t){return vf(e)||hf(e,t)||wf(e,t)||mf()}function mf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vf(e){if(Array.isArray(e))return e}function gf(e){return kf(e)||_f(e)||wf(e)||Of()}function Of(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wf(e,t){if(e){if("string"===typeof e)return jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jf(e,t):void 0}}function _f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function kf(e){if(Array.isArray(e))return jf(e)}function jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ef=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Tf=new WeakMap;function Af(e){return Ef(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Tf.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),Tf.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Sf(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function xf(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Nl["a"])(e,"icecandidate").pipe(Object($["a"])("candidate"),Object(Bs["a"])((function(){return n})),Object(bs["a"])(gt),Object(ff["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(ni["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object(W["a"])((function(e){return ql(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Nl["a"])(t,"event").pipe(Object(B["a"])(Sf("m.call.candidates",i,o)),Object(ni["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object(W["a"])((function(e){var t;return Object(Lt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object(W["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Bt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),L["a"]})))})))).pipe(Object(Fs["a"])())}function Nf(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,f=a.config$;return Object(Lt["a"])(Af(e)).pipe(Object(W["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(gf(r),gf(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(xf(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object(W["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Nl["a"])(e,"event").pipe(Object(B["a"])(Sf("m.call.answer",s,c,o))),ql(u,e,"m.call.invite",n,{log:l,latest$:d,config$:f}).pipe(Object(ni["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Fs["a"])()))})),Object(Is["a"])(1),Object(ni["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Fs["a"])()),Object(D["a"])(b))})))}function Rf(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(Nl["a"])(e,"event").pipe(Object(B["a"])(Sf("m.call.invite",c,i,o)),Object(ni["a"])((function(){return u.info("RTC: got invite",i)})),Object(W["a"])((function(t){return Object(Lt["a"])(Af(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Ls["a"])(d),Object(W["a"])((function(r){var c=yf(r,2),f=yf(c[0],2),p=f[0],b=f[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(gf(b),gf(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(xf(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object(W["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return ql(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(ni["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Fs["a"])()),Object(Nl["a"])(m,"datachannel").pipe(Object($["a"])("channel")))})),Object(Is["a"])(1))}function Cf(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object(W["a"])((function(t){return Object(I["a"])(Object(Nl["a"])(t,"close").pipe(Object(ni["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Fs["a"])()),Object(Nl["a"])(t,"error").pipe(Object(W["a"])((function(e){return Object(ti["a"])(e.error)}))),Object(Nl["a"])(t,"open").pipe(Object(Is["a"])(1),Object(jl["a"])(c/3),Object(ni["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(Ps["a"])(zn(t,{address:i}))),Object(Nl["a"])(t,"message").pipe(Object(ni["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object($["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return Fr({text:e,message:Vl(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Ms["a"])((function(){return t.close()})))})),Object(oi["a"])(e),Object(Bt["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),L["a"]})),Object(pf["a"])(zn(void 0,{address:i})))}}function Df(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(ci["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Ls["a"])(i,c),Object(B["a"])((function(e){var t,n=yf(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[De.WEBRTC])&&!!(null===a||void 0===a?void 0:a[De.WEBRTC])})),Object(Rl["a"])((function(t){var n=yf(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(zn(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=d.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new C["a"],p=new C["a"];return t=f?Nf(s,a,n,u,l):Rf(s,a,n,u,l),p.pipe(Object(W["a"])((function(){return ql(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(oi["a"])(Object(ei["a"])(u.httpTimeout/10)))})),Object(oi["a"])(e.pipe(Object(B["a"])(xa.is)))).subscribe(),Object(I["a"])(t,Object(Nl["a"])(s,"event").pipe(Object(B["a"])(Sf("m.call.hangup",n.peerId,d)),Object(Ws["a"])(Object(ti["a"])(new Error("RTC: peer hung up"))))).pipe(Cf(p,n,u,l))})).pipe(Object(ui["a"])((function(e){return e.pipe(Object(Ls["a"])(o,c),Object(W["a"])((function(e){var t,n,r=yf(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(ei["a"])(o/10):Object(D["a"])(null):L["a"]})))})))})))}var If=function(e,t,n){return bf(t),e.pipe(Object(B["a"])(Xn.success.is),Object(ai["a"])((function(e){return e.meta.address})),Object(W["a"])((function(t){return Df(e,t,n)})))};function Pf(e,t){return Ff(e)||Bf(e,t)||Uf(e,t)||Lf()}function Lf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uf(e,t){if(e){if("string"===typeof e)return Mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mf(e,t):void 0}}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ff(e){if(Array.isArray(e))return e}var Wf=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])(_n([Hn.request,Hn.success])),Object(Ls["a"])(t),Object(W["a"])((function(e){var t=Pf(e,2),n=t[0],a=t[1];return Object(Lt["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=Pf(e,2),a=Pf(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(M["a"])((function(e){var t,n,r,a,o=Pf(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Zr.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?ea.success({balanceProof:po(c.unlock[1])},s):ea.success({},s):ea.failure(new pt(dt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(B["a"])(gt))})))};function $f(e,t,n){return Object(I["a"])(e.pipe(Object(B["a"])(n),Object(Is["a"])(1),Object(Fs["a"])()),Object(D["a"])(t))}function Hf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return $f(t,e,Tn(Mr,e.meta)).pipe(Oi(n,r))}function qf(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}function Vf(e,t){return Yf(e)||Xf(e,t)||Gf(e,t)||Kf()}function Kf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gf(e,t){if(e){if("string"===typeof e)return Zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zf(e,t):void 0}}function Zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yf(e){if(Array.isArray(e))return e}function Qf(e,t,n,r){var a=n.confirmationBlocks;return Object(Lt["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t,n,o=Vf(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object(W["a"])((function(t){var n=Vf(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Zr.SENT};return Object(I["a"])($f(e,ua.request(void 0,o),Tn(ua,o)),Object(D["a"])(ea.failure(new pt(dt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var zf=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(_n(Un)),Object(Ls["a"])(t,r),Object(Mt["a"])((function(t){var n=Vf(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return Qf(e,a,o,r)})))};function Jf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ep(e,t){return rp(e)||np(e,t)||ip(e,t)||tp()}function tp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function np(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rp(e){if(Array.isArray(e))return e}function ap(e){return sp(e)||cp(e)||ip(e)||op()}function op(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ip(e,t){if(e){if("string"===typeof e)return up(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?up(e,t):void 0}}function cp(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function sp(e){if(Array.isArray(e))return up(e)}function up(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lp(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return bt(n.length===e.locks.length-1,"invalid locks size"),n}function dp(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function fp(e,t,n){var r=e.channels[Di(t)];return bt((null===r||void 0===r?void 0:r.state)===ro.open,"channel not open"),n&&(bt(n.chain_id.eq(e.chainId),"chainId mismatch"),bt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function pp(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),L["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,f=t.payload.paths[0].path[0],b=t.payload.tokenNetwork,y=fp(e,{tokenNetwork:b,partner:f});bt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var m={amount:t.payload.value.add(d),expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},h=ru([].concat(ap(y.own.locks),[m]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",y.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var v={type:Nn.LOCKED_TRANSFER,message_identifier:cu(),chain_id:Object(_["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(y.id),nonce:y.own.nextNonce,transferred_amount:y.own.balanceProof.transferredAmount,locked_amount:y.own.balanceProof.lockedAmount.add(m.amount),locksroot:h,payment_identifier:t.payload.paymentId,token:y.token,recipient:f,lock:m,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Lt["a"])(mo(u,v,{log:i})).pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ta({message:n,fee:d,partner:f},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,ra({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function bp(e,t,n){return Object(ds["a"])([e,n.config$]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var r=ep(e,2),a=r[0],o=r[1];return pp(a,t,o,n)})),Object(Bt["a"])((function(e){return Object(D["a"])(ea.failure(e,t.meta))})))}function yp(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;bt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=s.token_network_address,l=t.sent[i].partner,d=fp(t,{tokenNetwork:u,partner:l});if(t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{bt(t.sent[i].secret,"unknown secret"),bt(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var f={type:Nn.UNLOCK,message_identifier:cu(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:d.own.nextNonce,transferred_amount:d.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:d.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:ru(lp(d.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Lt["a"])(mo(o,f,{log:a}))}return c.pipe(Object(Ls["a"])(e),Object(M["a"])((function(e){var t=ep(e,2),r=t[0],a=t[1];return bt(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),bt(!a.sent[i].channelClosed,"channel closed!"),ca.success({message:r,partner:l},n.meta)})))}function mp(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object(W["a"])((function(n){return yp(e,n,t,{log:a,signer:r})})),Object(Bt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(ca.failure(e,t.meta))})))}function hp(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;bt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=c.token_network_address,u=e.sent[o].partner,l=fp(e,{tokenNetwork:s,partner:u});if(e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{bt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),bt(!e.sent[o].unlock,"transfer already unlocked");var d=ru(lp(l.own,o)),f={type:Nn.LOCK_EXPIRED,message_identifier:cu(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount,locked_amount:l.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:d,recipient:u,secrethash:o};i=Object(Lt["a"])(mo(r,f,{log:a}))}return i.pipe(Object(M["a"])((function(e){return ua.success({message:e,partner:u},t.meta)})))}function vp(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return hp(e,t,{signer:a,log:r})})),Object(Bt["a"])((function(e){return Object(D["a"])(ua.failure(e,t.meta))})))}function gp(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=t.payload.message.lock.secrethash,s={secrethash:c,direction:Zr.RECEIVED};return Object(ds["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=ep(e,2),i=n[0],u=n[1],l=u.revealTimeout,d=u.caps,f=t.payload.message;if(c in i.received){a.warn("transfer already present",t.meta);var b=f.message_identifier;return i.received[c].partner===t.meta.address&&i.received[c].transfer[1].message_identifier.eq(b)?Object(D["a"])(na({message:i.received[c].transferProcessed[1]},s)):L["a"]}var y=f.token_network_address,m=t.meta.address,h=fp(i,{tokenNetwork:y,partner:m},f);bt(f.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=[].concat(ap(h.partner.locks),[f.lock]),g=ru(v);bt(f.locksroot===g,"locksroot mismatch"),bt(f.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),bt(f.locked_amount.eq(dp(v)),"lockedAmount mismatch");var O=Li(h),w=O.partnerCapacity;bt(f.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),bt(f.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",f.lock.amount.toString(),"of token",h.token,", from",f.initiator,", through partner",m);var _=Object(D["a"])(void 0);!(null===d||void 0===d?void 0:d[De.NO_RECEIVE])&&f.target===r&&f.lock.expiration.sub(l).gt(i.blockNumber)&&(_=Object(P["a"])((function(){var e={type:Nn.SECRET_REQUEST,payment_identifier:f.payment_identifier,secrethash:c,amount:f.lock.amount,expiration:f.lock.expiration,message_identifier:cu()};return mo(o,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:Nn.PROCESSED,message_identifier:f.message_identifier};return mo(o,e,{log:a})}));return Object(ds["a"])([j,_]).pipe(Object(W["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=ep(t,2),r=n[0],a=n[1],e.next=3,ta({message:f,fee:k["Zero"],partner:m},s);case 3:return e.next=5,na({message:r},s);case 5:if(!a){e.next=10;break}return e.next=8,Xn.request(void 0,{address:f.initiator});case 8:return e.next=10,oa({message:a},s);case 10:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ea.failure(e,s))})))}function Op(e,t,n){var r=n.log,a=n.signer,o=au(t.payload.message.secret),i={secrethash:o,direction:Zr.RECEIVED};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){if(!(o in e.received))return L["a"];var n=e.received[o],c=t.payload.message,s=t.meta.address;if(bt(s===n.partner,"wrong partner"),bt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(c.message_identifier)?Object(D["a"])(sa({message:n.unlockProcessed[1]},i)):L["a"];var u=n.transfer[1];bt(c.token_network_address===u.token_network_address,"wrong tokenNetwork");var l=c.token_network_address,d=fp(e,{tokenNetwork:l,partner:s},c);bt(c.nonce.eq(d.partner.nextNonce),"nonce mismatch");var f=u.lock.amount,b=lp(d.partner,o);bt(c.locksroot===ru(b),"locksroot mismatch"),bt(c.transferred_amount.eq(d.partner.balanceProof.transferredAmount.add(f)),"transferredAmount mismatch"),bt(c.locked_amount.eq(dp(b)),"lockedAmount mismatch");var y={type:Nn.PROCESSED,message_identifier:c.message_identifier};return Object(Lt["a"])(mo(a,y,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ra({secret:c.secret},i);case 2:return e.next=4,ca.success({message:c,partner:s},i);case 4:return e.next=6,sa({message:t},i);case 6:return e.next=8,ea.success({balanceProof:po(c)},i);case 8:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(ca.failure(e,i))})))}function wp(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=t.payload.message.secrethash,c={secrethash:i,direction:Zr.RECEIVED};return Object(ds["a"])([e,o]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,o,s=ep(e,2),u=s[0],l=s[1].confirmationBlocks;if(!(i in u.received))return L["a"];var d=u.received[i],f=t.payload.message,b=t.meta.address;if(bt(b===d.partner,"wrong partner"),bt(!d.unlock,"transfer unlocked"),d.lockExpired)return r.warn("transfer already expired",t.meta),d.lockExpiredProcessed&&d.lockExpiredProcessed[1].message_identifier.eq(f.message_identifier)?Object(D["a"])(la({message:d.lockExpiredProcessed[1]},c)):L["a"];var y=d.transfer[1];bt(y.lock.expiration.add(l).lte(u.blockNumber),"expiration block not confirmed yet"),bt(!(null===(o=null===(n=d.secret)||void 0===n?void 0:n[1])||void 0===o?void 0:o.registerBlock),"secret registered onchain"),bt(f.token_network_address===y.token_network_address,"wrong tokenNetwork");var m=f.token_network_address,h=fp(u,{tokenNetwork:m,partner:b},f);bt(f.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=lp(h.partner,i);bt(f.locksroot===ru(v),"locksroot mismatch"),bt(f.locked_amount.eq(dp(v)),"lockedAmount mismatch"),bt(f.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var g={type:Nn.PROCESSED,message_identifier:f.message_identifier};return Object(Lt["a"])(mo(a,g,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ua.success({message:f,partner:b},c);case 2:return e.next=4,la({message:t},c);case 4:return e.next=6,ea.failure(new pt(dt.XFER_EXPIRED,{block:y.lock.expiration.toString()}),c);case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(ua.failure(e,c))})))}function _p(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==Zr.SENT?L["a"]:Object(ds["a"])([e,c,s]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,c,s=ep(e,3),u=s[0],l=s[1].revealTimeout,d=s[2].presences,f=fp(u,t.meta);if(f.own.pendingWithdraws.some(qf(Nn.WITHDRAW_REQUEST,t.meta)))return L["a"];bt(null===(c=null===(n=d[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,dt.CNL_WITHDRAW_PARTNER_OFFLINE),bt(t.meta.expiration>=u.blockNumber+l,dt.CNL_WITHDRAW_EXPIRES_SOON),bt(t.meta.totalWithdraw.gt(f.own.withdraw),dt.CNL_WITHDRAW_AMOUNT_TOO_LOW),bt(t.meta.totalWithdraw.lte(Li(f).ownTotalWithdrawable),dt.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var p={type:Nn.WITHDRAW_REQUEST,message_identifier:cu(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(f.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:f.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Lt["a"])(mo(o,p,{log:r})).pipe(Object(M["a"])((function(e){return ba.request({message:e},t.meta)})))})),Object(Bt["a"])((function(e){return Object(D["a"])(pa.failure(e,t.meta))})))}function kp(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:Zr.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return fp(e,{tokenNetwork:o,partner:i},a),bt(a.participant===r,"participant mismatch"),ba.success({message:a},c)})),Object(Bt["a"])((function(e){return Object(D["a"])(ba.failure(e,c))})))}function jp(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==Zr.SENT?L["a"]:Object(ds["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=ep(e,2),i=n[0],c=n[1].confirmationBlocks,s=fp(i,t.meta);bt(!s.own.pendingWithdraws.some(qf(Nn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(qf(Nn.WITHDRAW_REQUEST,t.meta));bt(u,"no matching WithdrawRequest found, maybe already confirmed"),bt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:Nn.WITHDRAW_EXPIRED,message_identifier:cu(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Lt["a"])(mo(o,l,{log:r})).pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ya.success({message:n},t.meta);case 2:return e.next=4,pa.failure(new pt(dt.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ya.failure(e,t.meta))})))}function Ep(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:Zr.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){bt(o.participant===t.meta.address,"participant mismatch");var n,u=fp(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(qf(Nn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(D["a"])(l);else{bt(o.nonce.eq(u.partner.nextNonce),"nonce mismatch"),bt(o.total_withdraw.lte(Li(u).partnerTotalWithdrawable),"invalid total_withdraw");var d={type:Nn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Lt["a"])(mo(r,d,{log:a}))}return n.pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ba.request({message:o},s);case 2:return e.next=4,ba.success({message:n},s);case 4:return e.next=6,Mr.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ba.failure(e,s))})))}function Tp(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:Zr.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(ds["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=ep(e,2),i=n[0],d=n[1].confirmationBlocks;bt(u===t.meta.address,"participant mismatch");var f,b=fp(i,{tokenNetwork:s,partner:u},c),y="".concat(Ii(b),"+").concat(c.message_identifier.toString()),m=r.get(y);if(m)f=Object(D["a"])(m);else{bt(c.nonce.eq(b.partner.nextNonce),"nonce mismatch"),bt(i.blockNumber>=l.expiration+d,"expire block not confirmed yet");var h={type:Nn.PROCESSED,message_identifier:c.message_identifier};f=Object(Lt["a"])(mo(a,h,{log:o})).pipe(Object(ni["a"])((function(e){return r.put(y,e)})))}return f.pipe(Object(W["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ya.success({message:c},l);case 2:return e.next=4,ma(void 0,l);case 4:return e.next=6,Mr.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Bt["a"])((function(e){return Object(D["a"])(ya.failure(e,l))})))}var Ap=function(e,t,n){Jf(t);var r=new zd(32),a=n.latest$.pipe(vi("state"));return Object(I["a"])(e.pipe(Object(B["a"])(_n([ea.request,ca.request,ua.request,pa.request,ya.request]))),e.pipe(Object(B["a"])(ho([Rt(mr),Rt(Or),Rt(_r),Rt(Er),Rt(Ar),Rt(xr)])))).pipe(Object($s["a"])((function(e){var t;switch(e.type){case ea.request.type:t=bp(a,e,n);break;case ca.request.type:t=mp(a,e,n);break;case ua.request.type:t=vp(a,e,n);break;case pa.request.type:t=_p(a,e,n);break;case ya.request.type:t=jp(a,e,n);break;case Fr.type:switch(e.payload.message.type){case Nn.LOCKED_TRANSFER:t=gp(a,e,n);break;case Nn.UNLOCK:t=Op(a,e,n);break;case Nn.LOCK_EXPIRED:t=wp(a,e,n);break;case Nn.WITHDRAW_REQUEST:t=Ep(a,e,n);break;case Nn.WITHDRAW_CONFIRMATION:t=kp(a,e,n);break;case Nn.WITHDRAW_EXPIRED:t=Tp(a,e,n,r);break}break}return t})))};function Sp(e,t){return Dp(e)||Cp(e,t)||Np(e,t)||xp()}function xp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Np(e,t){if(e){if("string"===typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rp(e,t):void 0}}function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Dp(e){if(Array.isArray(e))return e}function Ip(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Pp=function(e,t){return Ip(e),t.pipe(Object(F["a"])(),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Sp(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Zr.SENT},e.next=9,Xn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,ta({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,ca.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,ua.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Lp=function(e,t,n){Ip(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(Lt["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n,r=Sp(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object(W["a"])((function(e){var t=Sp(e,2),n=t[0],a=t[1],o={secrethash:n,direction:Zr.RECEIVED};return Object(I["a"])(Object(D["a"])(ta({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(ra({secret:a.secret[1].value},o)):L["a"],a.secretReveal?Object(D["a"])(ia({message:a.secretReveal[1]},o)):L["a"],!a.secret&&a.secretRequest?r.pipe(Object($["a"])("caps",De.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object(Is["a"])(1),Object(Ws["a"])(Object(D["a"])(Xn.request(void 0,{address:a.transfer[1].initiator}),oa({message:a.secretRequest[1]},o)))):L["a"])})))};function Up(e,t){return $p(e)||Wp(e,t)||Bp(e,t)||Mp()}function Mp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bp(e,t){if(e){if("string"===typeof e)return Fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fp(e,t):void 0}}function Fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $p(e){if(Array.isArray(e))return e}var Hp=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(ta.is),Object(B["a"])((function(e){return e.meta.direction===Zr.RECEIVED&&e.payload.message.target!==r})),Object(Ls["a"])(t,a),Object(B["a"])((function(e){var t=Up(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[De.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=Up(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return ea.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Zr.SENT})})))};function qp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Vp(e,t){return Yp(e)||Xp(e,t)||Gp(e,t)||Kp()}function Kp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gp(e,t){if(e){if("string"===typeof e)return Zp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zp(e,t):void 0}}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yp(e){if(Array.isArray(e))return e}var Qp=function(e,t){return e.pipe(Object(B["a"])(ho(Rt(ar))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Vp(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=Vp(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,na({message:o},{secrethash:i,direction:Zr.SENT});case 16:case"end":return e.stop()}}),e)}))))},zp=function(e,t){return e.pipe(Object(B["a"])(_n([na,sa,la])),Object(B["a"])((function(e){return e.meta.direction===Zr.RECEIVED})),Object(Ls["a"])(t),Object(M["a"])((function(e){var t=Vp(e,2),n=t[0],r=t[1].received;return Mr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},Jp=function(e,t){return e.pipe(Object(B["a"])(ho(Rt(ar))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Vp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Zr.SENT},e.next=8,ea.success({balanceProof:po(a.sent[i].unlock[1])},c);case 8:return e.next=10,sa({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},eb=function(e,t){return e.pipe(Object(B["a"])(ho(Rt(ar))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Vp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,la({message:o},{secrethash:i,direction:Zr.SENT});case 7:case"end":return e.stop()}}),e)}))))},tb=function(e,t,n){qp(t);var r=n.log,a=n.signer,o=new zd(32);return e.pipe(Object(B["a"])(ho(Rt(vr))),Object($s["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(Mr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Nn.PROCESSED,message_identifier:n};return Object(Lt["a"])(mo(a,s,{log:r})).pipe(Object(ni["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return Mr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},nb=n("bef3"),rb=n.n(nb);function ab(e,t){return ub(e)||sb(e,t)||ib(e,t)||ob()}function ob(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ib(e,t){if(e){if("string"===typeof e)return cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cb(e,t):void 0}}function cb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ub(e){if(Array.isArray(e))return e}function lb(e,t){return rb()(e,t,(function(e,t){return Ot.is(e)?e.eq(t):Ot.is(t)?t.eq(e):void 0}))}var db=function(e,t){return e.pipe(Object(B["a"])(ho(Rt(vr))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=ab(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&lb(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:Zr.SENT},e.next=14,da({message:o,partner:c.partner},u);case 14:return e.next=16,ea.failure(new pt(dt.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function fb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function pb(e,t){return vb(e)||hb(e,t)||yb(e,t)||bb()}function bb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yb(e,t){if(e){if("string"===typeof e)return mb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mb(e,t):void 0}}function mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vb(e){if(Array.isArray(e))return e}var gb=function(e,t,n,r){return r.meta.direction!==Zr.SENT?L["a"]:n.pipe(Object(F["a"])(),Object(Rl["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=Mr.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(vi("sent",o),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Hf(c,e,s,a)})))},Ob=function(e,t,n,r){return r.meta.direction!==Zr.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(Rl["a"])((function(n){var a=pb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=Mr.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(vi("sent",c),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Hf(l,e,d,i)})))},wb=function(e,t,n,r){return r.meta.direction!==Zr.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(Rl["a"])((function(n){var a=pb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Mr.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(vi("sent",c),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Hf(u,e,l,i)})))},_b=function(e,t,n,r){return r.meta.direction!==Zr.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(Rl["a"])((function(n){var a=pb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Mr.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(vi("received",c),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Hf(u,e,l,i)})))},kb=function(e,t,n,r){return r.meta.direction!==Zr.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Ls["a"])(n),Object(Rl["a"])((function(n){var a=pb(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Mr.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(vi("received",c),Object(B["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Hf(u,e,l,i)})))},jb=function(e,t,n){fb(t);var r=n.latest$,a=n.config$,o=r.pipe(vi("state"));return e.pipe(Object(B["a"])(_n([ta,ca.success,ua.success,oa,ia])),Object(W["a"])((function(t){return ta.is(t)?gb(e,o,a,t):ca.success.is(t)?Ob(e,o,a,t):ua.success.is(t)?wb(e,o,a,t):oa.is(t)?_b(e,o,a,t):kb(e,o,a,t)})))};function Eb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Tb(e,t){return Rb(e)||Nb(e,t)||Sb(e,t)||Ab()}function Ab(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sb(e,t){if(e){if("string"===typeof e)return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xb(e,t):void 0}}function xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Rb(e){if(Array.isArray(e))return e}var Cb=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(ho(Rt(ir))),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Tb(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,oa({message:c},{secrethash:c.secrethash,direction:Zr.SENT});case 10:case"end":return e.stop()}}),e)}))))},Db=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),L["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,f=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),L["a"];if(i.amount.lt(f))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])(ea.failure(new pt(dt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(f)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Nn.SECRET_REVEAL,message_identifier:cu(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Lt["a"])(mo(a,b,{log:o}))}return s.pipe(Object(W["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ia({message:n},t.meta);case 2:return e.next=4,Mr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Ib=function(e,t,n){Eb(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(_n(oa)),Object(B["a"])((function(e){return e.meta.direction===Zr.SENT})),Object($s["a"])((function(e){return o.pipe(vi("state")).pipe(Object(F["a"])(),Object(W["a"])((function(t){return Db(t,e,{log:r,signer:a})})))})))},Pb=function(e,t){return e.pipe(Object(B["a"])(ho(sr)),Object(Ls["a"])(t),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Tb(t,2),r=n[0],a=n[1],o=r.payload.message,i=au(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Zr.SENT},e.next=7,ra({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,ca.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,ra({secret:o.secret},{secrethash:i,direction:Zr.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},Lb=function(e,t,n){Eb(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])(_n([ra,aa.success])),Object(B["a"])((function(e){return e.meta.direction===Zr.RECEIVED})),Object($s["a"])((function(e){return o.pipe(vi("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object(W["a"])((function(){var t={type:Nn.SECRET_REVEAL,message_identifier:cu(),secret:e.payload.secret};return mo(a,t,{log:r})})),Object(M["a"])((function(t){return ia({message:t},e.meta)})),Object(Bt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),L["a"]})))})))},Ub=function(e,t,n){Eb(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(vi("confirmationBlocks"),Object(Rl["a"])((function(e){return Gt(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(M["a"])(Zt(a)),Object(B["a"])(gt),Object(Ls["a"])(t,o),Object(B["a"])((function(e){var t=Tb(e,2),n=Tb(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return!!a&&(r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a))})),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,f,b,y,m;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Tb(t,3),r=Tb(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.blockNumber,u=c.sent,l=c.received,d=n[2].confirmationBlocks,f=[],a in u&&u[a].transfer[1].lock.expiration.gte(i.blockNumber)&&f.push(Zr.SENT),a in l&&l[a].transfer[1].lock.expiration.gte(i.blockNumber)&&f.push(Zr.RECEIVED),b=0,y=f;case 5:if(!(b<y.length)){e.next=12;break}return m=y[b],e.next=9,aa.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+d<=s||void 0},{secrethash:a,direction:m});case 9:b++,e.next=5;break;case 12:case"end":return e.stop()}}),e)}))))},Mb=function(e){return e.pipe(Object(B["a"])(aa.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return ea.success({},e.meta)})))},Bb=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(vi(Zr.RECEIVED),Object(W["a"])((function(e){return Object(Lt["a"])(Object.keys(e))})),Object(Sd["a"])(),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(Un.is),Object(Ls["a"])(a.pipe(Object($["a"])("state",Zr.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n,r=Tb(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[De.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(Mt["a"])((function(n){var r=Tb(n,2),a=r[1],o={secrethash:t,direction:Zr.RECEIVED};return $f(e,aa.request({secret:a.secret[1].value},o),An(aa,o))})),Object(oi["a"])(a.pipe(vi("state"),Object(B["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},Fb=function(e,t,n){Eb(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(B["a"])(aa.request.is),Object(Ls["a"])(u),Object(W["a"])((function(e){var t,n=Tb(e,2),u=n[0],l=n[1].subkey,d=Wu({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),f=d.signer,p=$u(s,f);return Object(P["a"])((function(){return p.functions.registerSecret(u.payload.secret)})).pipe(Ui("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}),Object(Fs["a"])(),Object(Bt["a"])((function(e){return Object(D["a"])(aa.failure(e,u.meta))})))})))};function Wb(e,t){return qb(e)||Hb(e,t)||Kb(e,t)||$b()}function $b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qb(e){if(Array.isArray(e))return e}function Vb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Kb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Kb(e,t){if(e){if("string"===typeof e)return Gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gb(e,t):void 0}}function Gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Xb=function(e,t){return Zb(e),t.pipe(Object(F["a"])(),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===ro.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=Vb(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==Nn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(qf(Nn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,ba.request({message:c},{direction:Zr.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==Nn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,ya.success({message:c},{direction:Zr.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},Yb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(ba.request.is),Object(B["a"])((function(e){return e.meta.direction===Zr.SENT})),Object(Ls["a"])(r),Object(W["a"])((function(n){var r=Wb(n,2),a=r[0],o=r[1].httpTimeout,i=a.payload.message,c=Mr.request({message:i},{address:a.meta.partner,msgId:i.message_identifier.toString()}),s=t.pipe(Object(B["a"])((function(e){var t=e.channels[Di(a.meta)];return(null===t||void 0===t?void 0:t.state)!==ro.open||t.own.pendingWithdraws.some(qf(Nn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(qf(Nn.WITHDRAW_REQUEST,a.meta))})));return Hf(c,e,s,o)})))},Qb=function(e,t,n){Zb(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(B["a"])(ba.success.is),Object(B["a"])((function(e){return e.meta.direction===Zr.SENT})),Object($s["a"])((function(e){return u.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,d=u.revealTimeout;bt(e.meta.expiration>=n.blockNumber+d,dt.CNL_WITHDRAW_EXPIRES_SOON);var f=n.channels[Di(e.meta)];bt((null===f||void 0===f?void 0:f.state)===ro.open,"channel not open"),bt(e.meta.totalWithdraw.gt(f.own.withdraw),"withdraw already performed");var p=f.own.pendingWithdraws.find(qf(Nn.WITHDRAW_REQUEST,e.payload.message));bt(p,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=Wu({signer:a,address:r,main:o},l),m=y.signer,h=$u(s(b),m);return Object(P["a"])((function(){return h.functions.setTotalWithdraw(f.id,r,e.meta.totalWithdraw,e.meta.expiration,p.signature,e.payload.message.signature)})).pipe(Ui("setTotalWithdraw",dt.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),Fi(i.pollingInterval,void 0,void 0,{log:c}))})),Object(M["a"])((function(t){var n=Wb(t,2),r=n[1];return pa.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Bt["a"])((function(t){return Object(D["a"])(pa.failure(t,e.meta))})))})))},zb=function(e,t,n){Zb(t);var r=n.signer,a=n.log,o=n.latest$,i=new zd(32);return e.pipe(Object(B["a"])(_n([ba.request,ba.success])),Object(B["a"])((function(e){return e.meta.direction===Zr.RECEIVED!==ba.success.is(e)})),Object($s["a"])((function(e){return o.pipe(Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.presences;return e.meta.partner in r&&!(null===(n=r[e.meta.partner].payload.caps)||void 0===n?void 0:n[De.NO_DELIVERY])})),Object(W["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(D["a"])(c);else{var s={type:Nn.PROCESSED,message_identifier:n.message_identifier};t=Object(Lt["a"])(mo(r,s,{log:a})).pipe(Object(ni["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(M["a"])((function(t){return Mr.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(Bt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),L["a"]})))})))},Jb=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(Un.is),Object($["a"])("payload","blockNumber"),Object(Ls["a"])(t,r),Object(W["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,f;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Wb(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===ro.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(qf(Nn.WITHDRAW_REQUEST)),l=Vb(u),e.prev=8,l.s();case 10:if((d=l.n()).done){e.next=20;break}if(f=d.value,!f.expiration.add(o).gt(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(qf(Nn.WITHDRAW_EXPIRED,f))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,ya.request(void 0,{direction:Zr.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:f.expiration.toNumber(),totalWithdraw:f.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},ey=function(e,t,n){Zb(t);var r=n.config$;return e.pipe(Object(B["a"])(ya.success.is),Object(B["a"])((function(e){return e.meta.direction===Zr.SENT})),Object(Ls["a"])(r),Object(W["a"])((function(t){var n=Wb(t,2),r=n[0],a=n[1].httpTimeout,o=r.payload.message,i=Mr.request({message:o},{address:r.meta.partner,msgId:o.message_identifier.toString()}),c=e.pipe(Object(B["a"])(ho(Rt(ar))),Object(B["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(o.message_identifier)})),Object(Ps["a"])(ma(void 0,r.meta)),Object(Is["a"])(1),Object(gs["a"])());return Object(I["a"])(Hf(i,e,c,a),c)})))},ty=n("e68e"),ny=n("bbb8");function ry(e,t){return sy(e)||cy(e,t)||oy(e,t)||ay()}function ay(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oy(e,t){if(e){if("string"===typeof e)return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iy(e,t):void 0}}function iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sy(e){if(Array.isArray(e))return e}var uy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function ly(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[De.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Di({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==ro.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(ro.open,'"');var s=Li(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var dy=N()((function(e){return uy(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function fy(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Le["t"]({message:Le["q"],network_info:Le["t"]({chain_id:Le["j"](a.chainId),token_network_registry_address:Le["j"](o.TokenNetworkRegistry.address)}),operator:Le["q"],payment_address:St,price_info:kt(32),version:Le["q"]}),s=St.is(e)?Object(Lt["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(Ls["a"])(i),Object(W["a"])((function(e){var t=ry(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new pt(dt.PFS_EMPTY_URL);if(!Vu(a))throw new pt(dt.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(Tl["a"])(a+"/api/v1/info").pipe(Object(jl["a"])(o),Object(W["a"])((function(e){return uy(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=vt,t.t1=c,t.t2=za,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,dy(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(M["a"])((function(e){var t=ry(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function py(e,t){var n=t.log;return Object(Lt["a"])(e).pipe(Object(W["a"])((function(e){return fy(e,t).pipe(Object(Bt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),L["a"]})))}),5),Object(kl["a"])(),Object(M["a"])((function(e){if(!e.length)throw new pt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function by(e){return Object(_["concat"])([Xa(e.one_to_n_address,20),Xa(e.chain_id,32),Xa(no.IOU,32),Xa(e.sender,20),Xa(e.receiver,20),Xa(e.amount,32),Xa(e.expiration_block,32)])}function yy(e,t){return uy(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(by(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function my(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=jy(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function hy(e){return Oy(e)||gy(e)||jy(e)||vy()}function vy(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Oy(e){if(Array.isArray(e))return Ey(e)}function wy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _y(e,t){return Ay(e)||Ty(e,t)||jy(e,t)||ky()}function ky(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jy(e,t){if(e){if("string"===typeof e)return Ey(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ey(e,t):void 0}}function Ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ty(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ay(e){if(Array.isArray(e))return e}var Sy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},xy=Le["n"](Le["t"]({error_code:Le["l"],errors:Le["q"]}));function Ny(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Ry(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.contractsInfo,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=Ny(),n=Object(_["concat"])([a,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Lt["a"])(o.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Ls["a"])(u),Object(W["a"])((function(n){var r=_y(n,2),a=r[0],o=r[1].httpTimeout;return Object(Tl["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(jl["a"])(o))})),Object(Ls["a"])(s.pipe(Object($["a"])("state","blockNumber"))),Object(W["a"])((function(t){var n=_y(t,2),o=n[0],s=n[1];return Sy(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=2;break}return t.abrupt("return",{sender:a,receiver:e.address,chain_id:Object(_["bigNumberify"])(i.chainId),amount:k["Zero"],one_to_n_address:c.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(2*Math.pow(10,5))});case 2:return t.next=4,o.text();case 4:if(n=t.sent,o.ok){t.next=7;break}throw new pt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 7:if(r=vt(Gr,za(n)),u=r.last_iou,l=Object(_["verifyMessage"])(by(u),u.signature),l===a){t.next=11;break}throw new pt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})))})))}function Cy(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):Ry(e,t,n)})),Object(M["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object(W["a"])((function(e){return yy(n.signer,e)})))}var Dy=function(e,t,n){return wy(t),e.pipe(Object(B["a"])(_n(ga.request)),Object($s["a"])((function(t){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=L["a"],o=Object(D["a"])(r)):(a=Object(D["a"])(Xn.request(void 0,{address:i})),o=qy(e,n,i)),Object(I["a"])(o.pipe(Object(W["a"])((function(e){return Vy(t,n,e)})),Object(Ls["a"])(n.latest$),Object(W["a"])((function(e){var r=_y(e,2),a=r[0],o=r[1];return Ky(t,n,a,o)})),Object(Bt["a"])((function(e){return Object(D["a"])(ga.failure(e,t.meta))}))),a)})))})))},Iy=function(e,t,n){wy(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Wi,Object(W["a"])((function(e){return e.pipe(Object(ty["a"])(),Object(Ls["a"])(c),Object(B["a"])((function(e){var t=_y(e,2),n=_y(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===ro.open&&!!a})),Object(ny["a"])((function(e){var t=_y(e,2),n=_y(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(ei["a"])(o):Object(D["a"])(1)})),Object(Rl["a"])((function(e){var t=_y(e,2),n=_y(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,d=c.tokenNetwork,f=c.partner.address,p=Li(c),b=p.ownCapacity,y=p.partnerCapacity,m={type:Nn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:d,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(P["a"])((function(){return mo(i,m,{log:r})})).pipe(Object(M["a"])((function(e){return Br({message:e},{roomName:l})})),Object(Bt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),L["a"]})))})))})))},Py=function(e,t,n){wy(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Wi,Object(W["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Ls["a"])(c),Object(B["a"])((function(e){var t=_y(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===ro.open&&!!a&&!(null===o||void 0===o?void 0:o[De.NO_MEDIATE])})),Object(W["a"])((function(e){var t=_y(e,2),n=t[0],c=t[1].pfsRoom,s={type:Nn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:Ny(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Lt["a"])(mo(i,s,{log:r})).pipe(Object(M["a"])((function(e){return Br({message:e},{roomName:c})})),Object(Bt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),L["a"]})))})))},Ly=function(e,t,n){wy(e),wy(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(ds["a"])([i.pipe(vi("pfs")),i.pipe(vi("confirmationBlocks"))]).pipe(Object(Rl["a"])((function(e){var t=_y(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?L["a"]:Gt(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Ls["a"])(c),Object(B["a"])((function(e){var t=_y(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object($["a"])(0),Object(M["a"])(Zt(a)),Object(B["a"])(gt)).pipe(Object(ai["a"])((function(e){var t=_y(e,1),n=t[0];return n})),Object(W["a"])((function(e){return e.pipe(Object(Rl["a"])((function(e){var t=_y(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return L["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(li["a"])(new Date(o.toNumber()))):L["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(si["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(hy(e),[n]):e}),[]),Object(ci["a"])(),Object(Ut["a"])(1e3),Object(M["a"])((function(e){return Oa({pfsList:e})})))})))},Uy=function(e,t,n){wy(e),wy(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(vi("state","blockNumber"),Object(Mt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(ci["a"])((function(e,t){return t.eq(e)})),Object(M["a"])(ka))};function My(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=_y(e,2),u=s[1],l=Li(u),d=l.partnerUnlocked,f=l.ownDeposit;return d.isZero()||f.isZero()?L["a"]:Object(ds["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n,r=_y(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&d.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(Is["a"])(1),Object(W["a"])((function(e){var i=_y(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,d=u.partner.balanceProof,f=co(d),p=Object(_["concat"])([Xa(u.tokenNetwork,20),Xa(r.chainId,32),Xa(no.BALANCE_PROOF_UPDATE,32),Xa(u.id,32),Xa(f,32),Xa(d.nonce,32),Xa(d.additionalHash,32),Xa(d.signature,65)]);return Object(Lt["a"])(a.signMessage(p)).pipe(Object(W["a"])((function(e){return mo(a,{type:Nn.MONITOR_REQUEST,balance_proof:{chain_id:d.chainId,token_network_address:d.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:d.nonce,balance_hash:f,additional_hash:d.additionalHash,signature:d.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return Br({message:e},{roomName:l})})))})),Object(Bt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),L["a"]})))}}var By=function(e,t,n){return wy(e),wy(t),n.latest$.pipe(Object($["a"])("state"),Wi,Object(Ls["a"])(n.config$),Object(W["a"])((function(e){var t=_y(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(ci["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(ty["a"])(),Object(ny["a"])((function(e){var t=_y(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(ei["a"])(a):Object(D["a"])(1)})),Object(Rl["a"])(My(n)))})))},Fy=function(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ea.request.is),Object(W["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object($s["a"])((function(e){var n=_y(e,2),s=n[0],u=n[1],l=$u(r,i),d=s.meta.amount;return Object(P["a"])((function(){return bt(d.gt(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:d.toString()}]),bt(u.sub(d).gte(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:d.toString()}]),l.functions.planWithdraw(d)})).pipe(Ui("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Fi(c.pollingInterval,void 0,void 0,{log:o}),Object(W["a"])((function(e){var n=_y(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(vi("blockNumber"),Object(Mt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(F["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ea.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object(Bt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(D["a"])(Ea.failure(e,s.meta))})))})))},Wy=function(e,t,n){wy(e),wy(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ea.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},$y=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ea.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object(W["a"])((function(e){return t.pipe(Object($["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(Ps["a"])(e))})),Object(W["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object($s["a"])((function(e){var n=_y(e,2),s=n[0],u=n[1],l=$u(a,i);return Object(P["a"])((function(){return bt(u.gt(k["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(Ui("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),Fi(c.pollingInterval,void 0,void 0,{log:r}),Object($s["a"])((function(e){var n=_y(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(vi("blockNumber"),Object(Mt["a"])((function(){return l.functions.balances(o)})),Object(F["a"])((function(e){return e.lt(u)})),Object(M["a"])((function(e){return Ta({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object(Bt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(D["a"])(Ea.failure(e,s.meta))})))})))},Hy=function(e,t,n){wy(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(vi("confirmationBlocks"),Object(Rl["a"])((function(e){return Gt(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(M["a"])(Zt(a)),Object(B["a"])(gt),Object(B["a"])((function(e){var t=_y(e,6),n=t[5];return n===o})),Object(Ls["a"])(t,i),Object(M["a"])((function(e){var t=_y(e,3),n=_y(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,d=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),f=s.blockNumber;if(d&&f)return Aa({tokenNetwork:r,partner:d.partner.address,id:d.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:f,confirmed:f+l<=u.blockNumber||void 0})})),Object(B["a"])(gt))};function qy(e,t,n){return e.pipe(Object(B["a"])(Tn(Xn,{address:n})),Object(Is["a"])(1),Object(W["a"])((function(e){if(Xn.success.is(e))return t.latest$.pipe(Object(F["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function Vy(e,t,n){Gy(e,n);var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value,c=n.state,s=n.presences;if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===ly(c,s,a,o,o,i))return Object(D["a"])({paths:[{path:[t.address,e.meta.target],fee:k["Zero"]}],iou:void 0});if(Zy(e,n))throw new pt(dt.PFS_DISABLED);return Xy(e,t,n)}function Ky(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Lt["a"])(p.a.mark((function s(){var u;return p.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!tm(n)){s.next=6;break}return s.next=4,wa({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,_a(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!rm(c)){s.next=13;break}throw new pt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new pt(dt.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=Yy(e,t,r,i),!u.length){s.next=20;break}return s.next=18,ga.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new pt(dt.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function Gy(e,t){var n,r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value,c=t.state,s=t.presences;bt(Object.values(c.tokens).includes(a),[dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:a}]),bt(s[o].payload.available,[dt.PFS_TARGET_OFFLINE,{target:o}]),bt(!(null===(n=s[o].payload.caps)||void 0===n?void 0:n[De.NO_RECEIVE]),[dt.PFS_TARGET_NO_RECEIVE,{target:o}]),bt(Object.values(c.channels).some((function(e){return!0===ly(c,s,a,e.partner.address,o,i)})),dt.PFS_NO_ROUTES_BETWEEN_NODES)}function Zy(e,t){var n=null===e.payload.pfs,r=!e.payload.pfs&&null===t.config.pfs;return n||r}function Xy(e,t,n){var r=e.meta,a=r.tokenNetwork,o=r.target,i=r.value;return Qy(e.payload.pfs,n.config.pfs,t).pipe(Object(W["a"])((function(e){return zy(e,a,t)})),Object(W["a"])((function(e){var r=e.pfs,c=e.iou;return Jy(r,c,a,t.address,o,i,n.config.httpTimeout)})),Object(M["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return em(t,r,a,n.config.pfsSafetyMargin)})))}function Yy(e,t,n,r){var a=t.address,o=t.log,i=[],c=new Set;if(r){var s,u=my(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,d=l.path,f=l.fee,p=nm(d,a),b=p[0],y=!1,m="";if(!c.has(b)){if(0===i.length){var h=e.meta,v=h.tokenNetwork,g=h.target,O=h.value,w=n.state,_=n.presences,k=ly(w,_,v,b,g,O);y=!0===k,m="string"===typeof k?k:""}else b!==i[0].path[0]?m="path: already selected another recipient":f.gt(i[0].fee)?m="path: already selected a smaller fee":y=!0;y?i.push({path:p,fee:f}):(o.warn("Invalidated received route. Reason:",m,"Route:",p),c.add(b))}}}catch(j){u.e(j)}finally{u.f()}}return i}function Qy(e,t,n){if(e)return Object(D["a"])(e);if(t)return fy(t,n);var r=n.log,a=n.latest$;return a.pipe(Object($["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object(W["a"])((function(e){return py(e,n)})),Object(ni["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object($["a"])(0))}function zy(e,t,n){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):Cy(e,t,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))}function Jy(e,t,n,r,a,o,i){var c=this,s=Ja({from:r,to:a,value:kt(32).encode(o),max_paths:10,iou:t?Object.assign(Object.assign({},t),{amount:kt(32).encode(t.amount),expiration_block:kt(32).encode(t.expiration_block),chain_id:kt(32).encode(t.chain_id)}):void 0});return Object(Tl["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:s}).pipe(Object(jl["a"])(i),Object(W["a"])((function(e){return Sy(c,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,e.text();case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",{pfsResponse:n.t0,responseText:n.t1,iou:n.t2});case 6:case"end":return n.stop()}}),n)})))})))}function em(e,t,n,r){var a=za(t);if(e.ok){var o=vt(Hr,a).result,i=o.map((function(e){var t=e.path,n=e.estimated_fee,a=n.mul(Math.round(1e6*r)).div(1e6);return{path:t,fee:a}}));return{paths:i,iou:n}}var c=vt(xy,a);return{iou:n,error:c}}function tm(e){var t=e.paths,n=e.error;return void 0!==t||rm(n)}function nm(e,t){return e[0]===t?e.slice(1):e}function rm(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function am(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function om(e,t){return lm(e)||um(e,t)||cm(e,t)||im()}function im(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cm(e,t){if(e){if("string"===typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(e,t):void 0}}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function um(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lm(e){if(Array.isArray(e))return e}function dm(e,t,n){var r=t.pipe(vi("config"));return Object(ds["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=om(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(am({},De.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(ci["a"])(vs.a))}function fm(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(B["a"])(ka.is),Object($["a"])("payload"),Object(ps["a"])(k["MaxUint256"])),c=dm(r,t,i),s=Ss(e),u=e.pipe(Object(B["a"])(Oa.is),Object($["a"])("payload","pfsList"),Object(ps["a"])([])),l=e.pipe(Object(B["a"])(zn.is),Object(si["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),am({},t.meta.address,t.payload)):Qo()(t.meta.address,e)}),{}),Object(ps["a"])({}));return Object(fs["a"])((function(){var e=c.pipe(vi("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(vi("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(ds["a"])([Object(ds["a"])([e,t,c,s,u,l]),Object(ds["a"])([i])]).pipe(Object(M["a"])((function(e){var t=om(e,2),n=om(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=om(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var pm=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),bm=function(e,t,n){var r=e.pipe(Object(B["a"])(_n(xa))),a=e.pipe(Object(bs["a"])(ms()(_n(xa)),!0)),o=t.pipe(Object(oi["a"])(r));return Object(fs["a"])((function(){return fm(a,o,n).subscribe(n.latest$)}),(function(){return Object(Lt["a"])(Object.values(pm)).pipe(Object(W["a"])((function(e){return e(a,o,n)})),Object(Bt["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(xa({reason:e}))})),Object(oi["a"])(r))}))};function ym(e){return vm(e)||hm(e)||wm(e)||mm()}function mm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hm(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function vm(e){if(Array.isArray(e))return _m(e)}function gm(e,t){return jm(e)||km(e,t)||wm(e,t)||Om()}function Om(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wm(e,t){if(e){if("string"===typeof e)return _m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_m(e,t):void 0}}function _m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function km(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function jm(e){if(Array.isArray(e))return e}function Em(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Am(e,t,n){return t&&Tm(e.prototype,t),n&&Tm(e,n),e}var Sm=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},xm=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,f,b=this;Em(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new R["a"](1);this.state$=h.pipe(vi("state")),this.action$=h.pipe(vi("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(vi("channels"),Object(M["a"])(Fu)),this.transfers$=Bu(this.state$),this.events$=this.action$.pipe(Object(B["a"])(_n(Ca))),this.getTokenInfo=N()((function(e){return Sm(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=gm(r,4),o=a[0],i=a[1],c=a[2],s=a[3],bt(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:h,config$:h.pipe(vi("config")),matrix$:new C["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:ke.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),monitoringServiceContract:xe.connect(a.MonitoringService.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),main:c},this.userDepositTokenAddress=N()((function(){return Sm(b,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(ls,o,Object(j["a"])(v,this.epicMiddleware)),fm(Object(D["a"])(Na({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return Am(e,[{key:"start",value:function(){var t=this;bt(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:this.deps.network,"raiden-ts":e.version,"raiden-contracts":e.contractVersion}),this.deps.latest$.subscribe(void 0,void 0,(function(){return t.epicMiddleware=null})),this.epicMiddleware.run(bm),this.epicMiddleware=void 0,this.store.dispatch(Na({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch(xa({reason:Ce.STOP}))}},{key:"getBlockNumber",value:function(){return Sm(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(Na(vt(rn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Wu(this.deps,this.config.subkey).address,bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Sm(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:Wu(this.deps,this.config.subkey).address,bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Sm(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Sm(this,void 0,void 0,p.a.mark((function t(){var n;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens[e],!n){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return n=t.sent,bt(n&&n!==k["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Mn({token:e,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Sm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,bt(!n.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=n.settleTimeout?vt(kt(4),n.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=n.deposit?vt(kt(32),n.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:t},u=Sn(Bn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Sn(Wn,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Bn.request(Object.assign(Object.assign({},n),{settleTimeout:i,deposit:c}),s)),a.next=14,u;case 14:return d=a.sent,null===r||void 0===r||r({type:Se.OPENED,payload:{txHash:d}}),a.next=18,this.state$.pipe(vi("channels",Di({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===ro.open}))).toPromise();case 18:if(null===r||void 0===r||r({type:Se.CONFIRMED,payload:{txHash:d}}),!l){a.next=24;break}return a.next=22,l;case 22:f=a.sent,null===r||void 0===r||r({type:Se.DEPOSITED,payload:{txHash:f}});case 24:return a.abrupt("return",d);case 25:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Sm(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],bt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c=vt(kt(32),n,dt.DTA_INVALID_DEPOSIT,this.log.info),s={tokenNetwork:i,partner:t},u=Sn(Wn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Wn.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Sm(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Sn(Hn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Hn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Sm(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Sn(Vn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Vn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Sm(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=Sn(Xn,n,this.action$),this.store.dispatch(Xn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Sm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f,b,y=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n,dt.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==r.paymentId?vt(kt(8),r.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):iu(),s=r.paths?vt(qr,r.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=r.pfs?vt(Vr,r.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,l=r.lockTimeout?this.state.blockNumber+r.lockTimeout:void 0,bt(void 0===r.secret||Tt.is(r.secret),dt.RDN_INVALID_SECRET,this.log.info),bt(void 0===r.secrethash||Et.is(r.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),d=r.secret?r.secret:r.secrethash?void 0:ou(),f=r.secrethash||au(d),bt(!d||au(d)===f,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),b={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(Tn(ga,b)),Object(M["a"])((function(e){if(ga.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return y.store.dispatch(ga.request({paths:s,pfs:u},b)),L["a"]}))).pipe(Object(W["a"])((function(e){return Object(I["a"])(y.action$.pipe(Object(B["a"])(_n([ta,ea.failure])),Object(F["a"])((function(e){return e.meta.direction===Zr.SENT&&e.meta.secrethash===f})),Object(M["a"])((function(e){if(ea.failure.is(e))throw e.payload;return uu(e.meta)}))),Object(P["a"])((function(){return y.store.dispatch(ea.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:d,expiration:l},{secrethash:f,direction:Zr.SENT})),L["a"]})))}))).toPromise());case 16:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Sm(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=du(e),c=i.direction,s=i.secrethash,bt(s in this.state[c],dt.RDN_UNKNOWN_TRANSFER,this.log.info),u=bu(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new pt(dt.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,Sn(ea,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Sm(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n),c=r.pfs?vt(Vr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Sn(ga,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(ga.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Sm(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],bt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=vt(kt(32),n),i={tokenNetwork:a,target:t,value:o},c=Sn(ga,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(ga.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Sm(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(vi("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object(W["a"])((function(e){return py(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.to;return Sm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),bt(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),o=Wu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,s=pe.connect(e,i),u=null!==a&&void 0!==a?a:c,bt(St.is(u),[dt.DTA_INVALID_ADDRESS,{beneficiary:u}],this.log.info),l=vt(kt(32),t,dt.DTA_INVALID_AMOUNT),n.next=10,Hu(s,"mintFor",[l,u],dt.RDN_MINT_FAILED,{log:this.log});case 10:return d=n.sent,n.next=13,qu(d,this.deps,1);case 13:return n.abrupt("return",d.transactionHash);case 14:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Sm(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object($["a"])("udcBalance"),Object(F["a"])(gt)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(ym(e),ym(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return Sm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y,m;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(_["bigNumberify"])(e),bt(o.gt(k["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),i=Wu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=$u(this.deps.userDepositContract,c),n.t0=$u,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return d=n.sent,bt(d.gte(e),[dt.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:d.toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),bt(!a||Object(_["bigNumberify"])(a).gte(e),[dt.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(_["bigNumberify"])(d).toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(f=n.sent,b=k["HashZero"],!f.lt(o)){n.next=26;break}return n.next=25,Hu(l,"approve",[u.address,null!==a&&void 0!==a?a:o],dt.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:Se.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,Hu(u,"deposit",[this.address,y.add(o)],dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return m=n.sent,null===t||void 0===t||t({type:Se.DEPOSITED,payload:{txHash:m.transactionHash}}),n.next=36,qu(m,this.deps);case 36:return this.log.debug('deposit tx "'.concat(m.transactionHash,'" confirmed')),null===t||void 0===t||t({type:Se.CONFIRMED,payload:{txHash:m.transactionHash}}),n.abrupt("return",m.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Sm(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{to:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Wu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(_["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(_["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),bt(d.gt(k["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:d.toString()}],this.log.info),f=d.lte(t)?d:Object(_["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:f,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,bt(y.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Sm(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,d;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Wu(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=$u(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(_["bigNumberify"])(n),r.next=11,Hu(s,"transfer",[t,l],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return d=r.sent,r.abrupt("return",d.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"planUdcWithdraw",value:function(e){return Sm(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:vt(kt(32),e,dt.DTA_INVALID_AMOUNT,this.log.error)},r=Sn(Ea,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ea.request(void 0,n)),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"withdrawChannel",value:function(e,t,n){return Sm(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s,u,l,d,f,b;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state.tokens[e],bt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[Di({tokenNetwork:a,partner:t})],bt((null===o||void 0===o?void 0:o.state)===ro.open,dt.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Li(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=vt(kt(32),null!==n&&void 0!==n?n:c,dt.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),d=this.state.blockNumber+2*this.config.revealTimeout,f={direction:Zr.SENT,tokenNetwork:a,partner:t,totalWithdraw:l,expiration:d},b=Sn(pa,f,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(pa.request(void 0,f)),r.abrupt("return",b);case 14:case"end":return r.stop()}}),r,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(e,t,n,r,a,o){return Sm(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,d,f,b,y,m,h,v,g,O;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new w["JsonRpcProvider"](e):e instanceof w["JsonRpcProvider"]?e:new w["Web3Provider"](e),Yt(c),i.next=4,c.getNetwork();case 4:if(s=i.sent,r){i.next=9;break}u=Lu(s),i.next=17;break;case 9:if("string"!==typeof r){i.next=16;break}return bt(St.is(r),[dt.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:r}]),i.next=13,Ku(c,r);case 13:u=i.sent,i.next=17;break;case 16:u=r;case 17:return i.next=19,Mu(t,c,o);case 19:return l=i.sent,d=l.signer,f=l.address,b=l.main,i.next=25,Xo(s,u,f,n,a&&vt(rn,a));case 25:return y=i.sent,m=y.state,h=y.onState,v=y.onStateComplete,g=y.defaultConfig,bt(f===m.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:f,state:m.address}]),bt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),O=new this(c,s,d,u,m,g,b),h&&O.state$.subscribe(h,v,v),i.abrupt("return",O);case 35:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Re.sdk}},{key:"contractVersion",get:function(){return Re.contracts}}]),e}()},fe8f:function(e,t,n){}});
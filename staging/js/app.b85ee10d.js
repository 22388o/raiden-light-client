(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-056e4508":"99fb8c4c","chunk-24604f94":"f098169d","chunk-2576fd6c":"ce32c361","chunk-33bb99e5":"7556368f","chunk-39b0fc89":"985295f7","chunk-41492adc":"28cd1a65","chunk-dd28d5f6":"1ada71a1","chunk-4a94025a":"15a96b75","chunk-4e36395b":"b32c0d19","chunk-3284767e":"c0de5ca4","chunk-382d1ffe":"760ce6b0","chunk-59233c3d":"9290c35a","chunk-7c913ee4":"8fa2b9b6","chunk-17c87963":"c46ef560","chunk-2cc0f8bd":"5643166c","chunk-68352b0c":"e6b3b0ba","chunk-6503ad80":"f822767a","chunk-ecb3c59c":"942ba3aa"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-056e4508":1,"chunk-24604f94":1,"chunk-2576fd6c":1,"chunk-33bb99e5":1,"chunk-39b0fc89":1,"chunk-41492adc":1,"chunk-dd28d5f6":1,"chunk-4a94025a":1,"chunk-4e36395b":1,"chunk-3284767e":1,"chunk-382d1ffe":1,"chunk-59233c3d":1,"chunk-7c913ee4":1,"chunk-17c87963":1,"chunk-2cc0f8bd":1,"chunk-68352b0c":1,"chunk-6503ad80":1,"chunk-ecb3c59c":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-056e4508":"f0caf6ea","chunk-24604f94":"bbec60a2","chunk-2576fd6c":"24a44256","chunk-33bb99e5":"93c360cb","chunk-39b0fc89":"e65b95d7","chunk-41492adc":"94e7b83c","chunk-dd28d5f6":"1db8e2a6","chunk-4a94025a":"bde0c05a","chunk-4e36395b":"9c06111f","chunk-3284767e":"5f3a5d8d","chunk-382d1ffe":"1c8cc45f","chunk-59233c3d":"9e64696d","chunk-7c913ee4":"284343a3","chunk-17c87963":"02873e1e","chunk-2cc0f8bd":"ca97510d","chunk-68352b0c":"10f22ed9","chunk-6503ad80":"cdc5e498","chunk-ecb3c59c":"ee66dbf5"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("4a7b"),i=n("9eb3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["a"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("71a0"),n("8e3c")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("0e7f"),a=n("a3d5"),o=n("46a4"),i=n.n(o),c=n("ecfd"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("4a7b"),a=n("9eb3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},"1c30":function(e,t,n){"use strict";var r=n("fe22"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("4a7b"),i=n("9eb3"),c=n("7aa1"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=w();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var k=function(e){m(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));k=Object(o["a"])([Object(i["a"])({computed:d(d({},Object(c["d"])(["defaultAccount"])),Object(c["c"])(["pendingTransfers"]))})],k);var j=k,E=j,T=(n("49fc"),n("8e3c")),A=n("16c6"),S=n.n(A),x=n("223f"),N=n("0f3b"),C=n("a58b"),R=Object(T["a"])(E,r,a,!1,null,"880322ee",null);t["a"]=R.exports;S()(R,{VBadge:x["a"],VImg:N["a"],VTooltip:C["a"]})},"2fca":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("8d3f"),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return p(e)||f(e,t)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function p(e){if(Array.isArray(e))return e}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){m(this,e)}return v(e,null,[{key:"contracts",value:function(){var e=y(a.a.mark((function e(){var t,n,r,o,c,u,l,d,f,p,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return o=e.sent,c=s(o,2),u=c[0],l=c[1],e.next=10,Promise.all([u.json(),l.json()]);case 10:return d=e.sent,f=s(d,2),p=f[0],b=f[1],e.abrupt("return",i(i({},p.contracts),b.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=y(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},3203:function(e,t,n){},3465:function(e,t,n){"use strict";var r=n("3203"),a=n.n(r);a.a},"39be":function(e,t,n){},"3eea":function(e,t,n){"use strict";var r=n("d0d0"),a=n.n(r);a.a},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"49fc":function(e,t,n){"use strict";var r=n("39be"),a=n.n(r);a.a},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},"4ee4":function(e,t,n){},5:function(e,t){},5666:function(e,t,n){},"57ca":function(e,t,n){},"58a8":function(e,t,n){"use strict";var r=n("6636"),a=n.n(r);a.a},6:function(e,t){},6636:function(e,t,n){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("4a7b"),i=n("0a08"),c=n("9eb3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("8e3c")),k=n("16c6"),j=n.n(k),E=n("4ca7"),T=n("61c3"),A=n("e4d0"),S=n("921e"),x=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("4ee4"),a=n.n(r);a.a},7218:function(e,t,n){},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("4a7b"),i=n("9eb3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("3eea"),n("8e3c")),_=n("16c6"),k=n.n(_),j=n("4ca7"),E=n("222e"),T=n("921e"),A=n("ecc5"),S=Object(w["a"])(O,r,a,!1,null,"07afaaa8",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("ec99"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("4a7b"),a=n("9eb3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"7e67":function(e,t,n){"use strict";var r=n("7218"),a=n.n(r);a.a},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return T}));var r=n("8d3f"),a=n.n(r),o=n("7e01"),i=n.n(o),c=n("5da6");function s(e){return f(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function w(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function _(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?w(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:w(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function k(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function j(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=_(n);i&&g.put(O,{logger:r,level:e,message:i},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(k)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return A.apply(this,arguments)}function A(){return A=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("4a7b"),i=n("9eb3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("58a8"),n("8e3c")),k=n("16c6"),j=n.n(k),E=n("a58b"),T=Object(_["a"])(w,r,a,!1,null,"0b75904e",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"959b":function(e,t,n){"use strict";var r=n("9c7e"),a=n.n(r);a.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},"9c7e":function(e,t,n){},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction failed.","CNL_OPENCHANNEL_FAILED":"Token networks openChannel transaction failed.","CNL_SETTOTALDEPOSIT_FAILED":"Token networks setTotalDeposit transaction failed.","CNL_CLOSECHANNEL_FAILED":"Token networks closeChannel transaction failed.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"Token networks settleChannel transaction failed.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction failed.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction failed.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction failed","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("38dd");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("8d3f"),i=n.n(o),c=n("4a7b"),s=n("9eb3"),u=n("7aa1"),l=n("87a2"),d=n("750b"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("66bc"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function k(e){var t=T();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var S=function(e){w(n,e);var t=k(n);function n(){return v(this,n),t.apply(this,arguments)}return O(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0})],S.prototype,"reason",void 0),S=Object(c["a"])([Object(s["a"])({})],S);var x=S,N=x,C=(n("753f"),n("8e3c")),R=n("16c6"),D=n.n(R),I=n("2fcc"),P=Object(C["a"])(N,y,m,!1,null,"7b92b083",null),U=P.exports;function L(e){return L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function W(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function K(e){var t=Y();return function(){var n,r=X(e);if(t){var a=X(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}D()(P,{VAlert:I["a"]});var Q=function(e){W(n,e);var t=K(n);function n(){var e;return $(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return H(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",M(M({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],Q.prototype,"visible",void 0),Object(c["a"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],Q.prototype,"connecting",void 0),Object(c["a"])([Object(s["d"])({required:!0})],Q.prototype,"hasProvider",void 0),Object(c["a"])([Object(s["b"])()],Q.prototype,"close",null),Object(c["a"])([Object(s["b"])()],Q.prototype,"connect",null),Q=Object(c["a"])([Object(s["a"])({components:{RaidenDialog:b["a"],ActionButton:d["a"],NoAccessMessage:U},computed:Object(u["d"])(["accessDenied"])})],Q);var z=Q,J=z,ee=(n("e4b6"),n("8c68")),te=Object(C["a"])(J,f,p,!1,null,"469a86df",null),ne=te.exports;D()(te,{VCardText:ee["b"],VCardTitle:ee["c"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},ae=[],oe=n("152b");function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){var t=ve();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var Oe=function(e){pe(n,e);var t=ye(n);function n(){return le(this,n),t.apply(this,arguments)}return fe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(oe["a"]));Object(c["a"])([Object(s["f"])("tokens",{immediate:!0})],Oe.prototype,"onChange",null),Oe=Object(c["a"])([Object(s["a"])({computed:se({},Object(u["c"])(["tokens"]))})],Oe);var we=Oe,_e=we,ke=(n("959b"),n("4ca7")),je=n("222e"),Ee=n("4f2e"),Te=n("921e"),Ae=n("ecc5"),Se=Object(C["a"])(_e,re,ae,!1,null,"593703f5",null),xe=Se.exports;D()(Se,{VBtn:ke["a"],VCol:je["a"],VContainer:Ee["a"],VIcon:Te["a"],VRow:Ae["a"]});var Ne=n("f15c"),Ce=n("2fca");function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ue(o,r,a,i,c,"next",e)}function c(e){Ue(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function $e(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}function qe(e,t){return qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qe(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ze=function(e){$e(n,e);var t=He(n);function n(){var e;return Be(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Fe(n,[{key:"created",value:function(){var e=Le(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ne["a"].injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,Ce["a"].configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Le(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ze=Object(c["a"])([Object(s["a"])({computed:Ie(Ie({},Object(u["d"])(["loading","accessDenied","stateBackup","settings"])),Object(u["c"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:ne,NoTokens:xe,NoAccessMessage:U}})],Ze);var Ye=Ze,Xe=Ye,Qe=(n("3465"),n("0f3b")),ze=Object(C["a"])(Xe,r,a,!1,null,"3ad2829a",null);t["a"]=ze.exports;D()(ze,{VCol:je["a"],VContainer:Ee["a"],VImg:Qe["a"],VRow:Ae["a"]})},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.9.0","contracts":"0.37.0"}')},c43d:function(e,t,n){"use strict";var r=n("57ca"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("0e7f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("receiving-disabled-dialog",{attrs:{visible:e.showReceivingDisabled},on:{dismiss:function(t){e.showReceivingDisabled=!1}}})],1)},o=[],i=n("4a7b"),c=n("9eb3"),s=n("7aa1"),u=n("152b"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),!e.loading&&e.defaultAccount?r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1):e._e(),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},d=[],f=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=Object(s["a"])("notifications"),N=x.mapState,C=x.mapMutations,R=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(u["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(s["d"])(["loading","defaultAccount"])),N(["newNotifications"])),Object(s["c"])(["network","isConnected"])),methods:h({},C(["notificationsViewed"]))})],R);var D=R,I=D,P=(n("f9be"),n("8e3c")),U=n("16c6"),L=n.n(U),B=n("223f"),M=n("4ca7"),F=n("222e"),$=n("0f3b"),q=n("ecc5"),H=Object(P["a"])(I,l,d,!1,null,"c43773b0",null),W=H.exports;L()(H,{VBadge:B["a"],VBtn:M["a"],VCol:F["a"],VImg:$["a"],VRow:q["a"]});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},K=[],G=n("0a08");function Z(e){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}function ee(e){var t=re();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe=function(e){z(n,e);var t=ee(n);function n(){var e;return Y(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Q(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);oe=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],oe);var ie=oe,ce=ie,se=n("921e"),ue=n("f0ec"),le=Object(P["a"])(ce,V,K,!1,null,null,null),de=le.exports;L()(le,{VIcon:se["a"],VSnackbar:ue["a"]});var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},pe=[];function be(e){return be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Oe(e){var t=ke();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ee=function(e){ve(n,e);var t=Oe(n);function n(){var e;return ye(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return he(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Ee=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],Ee);var Te=Ee,Ae=Te,Se=Object(P["a"])(Ae,fe,pe,!1,null,null,null),xe=Se.exports;L()(Se,{VBtn:M["a"],VSnackbar:ue["a"]});var Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("raiden-dialog",{staticClass:"receiving-disabled-dialog",attrs:{visible:e.visible},on:{close:e.dismiss}},[r("v-card-title",{staticClass:"receiving-disabled-dialog__title"},[e._v(" "+e._s(e.$t("receiving-disabled-dialog.title"))+" ")]),r("v-card-text",[r("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-img",{staticClass:"receiving-disabled-dialog__icon",attrs:{src:n("afb7"),height:"110px"}})],1),r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"receiving-disabled-dialog__description"},[r("span",[e._v(" "+e._s(e.$t("receiving-disabled-dialog.body"))+" ")])])])],1)],1)],1)},Ce=[],Re=n("66bc");function De(e){return De="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}function Le(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function Me(e){var t=qe();return function(){var n,r=He(e);if(t){var a=He(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){return!t||"object"!==De(t)&&"function"!==typeof t?$e(e):t}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}var We=function(e){Le(n,e);var t=Me(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ue(n,[{key:"dismiss",value:function(){}}]),n}(c["e"]);Object(i["a"])([Object(c["d"])({required:!0,type:Boolean})],We.prototype,"visible",void 0),Object(i["a"])([Object(c["b"])()],We.prototype,"dismiss",null),We=Object(i["a"])([Object(c["a"])({components:{RaidenDialog:Re["a"]}})],We);var Ve=We,Ke=Ve,Ge=(n("c43d"),n("8c68")),Ze=Object(P["a"])(Ke,Ne,Ce,!1,null,"81398c7c",null),Ye=Ze.exports;function Xe(e){return Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},at(e,t)}function ot(e){var t=st();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return it(this,n)}}function it(e,t){return!t||"object"!==Xe(t)&&"function"!==typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}L()(Ze,{VCardText:Ge["b"],VCardTitle:Ge["c"],VCol:F["a"],VImg:$["a"],VRow:q["a"]});var lt=function(e){rt(n,e);var t=ot(n);function n(){var e;return et(this,n),e=t.apply(this,arguments),e.showReceivingDisabled=!1,e}return nt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"onCanReceiveChanged",value:function(e){this.showReceivingDisabled=!1===e}}]),n}(Object(c["c"])(u["a"]));Object(i["a"])([Object(c["f"])("canReceive")],lt.prototype,"onCanReceiveChanged",null),lt=Object(i["a"])([Object(c["a"])({computed:ze({},Object(s["c"])(["canReceive"])),components:{AppHeader:W,OfflineSnackbar:de,UpdateSnackbar:xe,ReceivingDisabledDialog:Ye}})],lt);var dt=lt,ft=dt,pt=(n("7e67"),n("6998")),bt=n("4f2e"),yt=n("4ae3"),mt=Object(P["a"])(ft,a,o,!1,null,"097bbc17",null),ht=mt.exports;L()(mt,{VApp:pt["a"],VContainer:bt["a"],VMain:yt["a"]});var vt=n("9d8a");vt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var gt=n("617c"),Ot=n("bb51");r["a"].use(gt["a"]);var wt=new gt["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:Ot["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-dd28d5f6"),n.e("chunk-4e36395b"),n.e("chunk-3284767e"),n.e("chunk-382d1ffe")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-dd28d5f6"),n.e("chunk-4a94025a")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-24604f94")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-dd28d5f6"),n.e("chunk-4e36395b"),n.e("chunk-3284767e"),n.e("chunk-68352b0c")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-dd28d5f6"),n.e("chunk-4e36395b"),n.e("chunk-6503ad80")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-dd28d5f6"),n.e("chunk-59233c3d")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-ecb3c59c").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:f["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-7c913ee4").then(n.bind(null,"47f5"))}),r()},children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-39b0fc89")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-2576fd6c")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-dd28d5f6"),n.e("chunk-2cc0f8bd")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-33bb99e5")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-056e4508"),n.e("chunk-41492adc")]).then(n.bind(null,"c9175"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-dd28d5f6"),n.e("chunk-17c87963")]).then(n.bind(null,"4c07"))}}]}]}),_t=wt,kt=n("5013"),jt=n("f455"),Et=n("87a2"),Tt=n("3241"),At=n.n(Tt),St=n("aafe"),xt=n.n(St),Nt=n("f8b2"),Ct=n.n(Nt),Rt=n("d3cc"),Dt=n.n(Rt),It=n("9a0d"),Pt=n.n(It),Ut=n("a6ed"),Lt=n.n(Ut),Bt=n("e22d"),Mt=n.n(Bt),Ft=n("aa15"),$t=n.n(Ft);function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vt={notify:function(e,t){var n=e.commit,r=e.getters.nextNotificationId;n("notificationAdd",Ht(Ht({},t),{},{id:r,received:new Date}))}},Kt={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0}},Gt={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]}},Zt=function(){return{notifications:[],newNotifications:!1}},Yt=Zt(),Xt=Yt,Qt={namespaced:!0,mutations:Kt,actions:Vt,state:Xt,getters:Gt};function zt(e){return tn(e)||en(e)||sn(e)||Jt()}function Jt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function en(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function tn(e){if(Array.isArray(e))return un(e)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){an(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){return dn(e)||ln(e,t)||sn(e,t)||cn()}function cn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sn(e,t){if(e){if("string"===typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function dn(e){if(Array.isArray(e))return e}r["a"].use(s["b"]);var fn={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:Et["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:Et["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:""};function pn(){return Dt()(fn)}var bn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},yn=new kt["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),mn={state:pn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=on(r[n],2),o=a[0],i=a[1];o in e.tokens&&Mt()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=rn(rn({},e.tokens[o]),i):e.tokens=rn(rn({},e.tokens),{},an({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=zt(t)},updatePresence:function(e,t){e.presences=rn(rn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,rn(rn({},pn()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=rn(rn({},e.transfers),{},an({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return At()(Ct()(xt()(e.channels),(function(e){return!$t()(e)})),(function(n){var r=Pt()(n,t,Object(Et["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return bn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!$t()(r)&&(n=xt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(jt["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===jt["b"].open}));return Lt()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},canReceive:function(e){var t;return!(null===(t=e.config.caps)||void 0===t?void 0:t[jt["a"].NO_RECEIVE])},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[yn.plugin],modules:{notifications:Qt}},hn=new s["b"].Store(mn),vn=n("8aa9");vt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var gn=n("8d3f"),On=n.n(gn),wn=n("f15c"),_n=n("a3d5"),kn=n("38dd"),jn=n("5adc"),En=n("3a07"),Tn=n("a8c1"),An=n.n(Tn),Sn=n("2fca"),xn=n("f30a"),Nn=n("80b9");function Cn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Nn["a"]);var Rn=new Nn["a"]({locale:"en",fallbackLocale:"en",messages:Cn()});function Dn(e){return Dn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}function In(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}function Pn(e){var t=Fn();return function(){var n,r=Hn(e);if(t){var a=Hn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Un(this,n)}}function Un(e,t){return!t||"object"!==Dn(t)&&"function"!==typeof t?Ln(e):t}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e){var t="function"===typeof Map?new Map:void 0;return Bn=function(e){if(null===e||!$n(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Mn(e,arguments,Hn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),qn(n,e)},Bn(e)}function Mn(e,t,n){return Mn=Fn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&qn(o,n.prototype),o},Mn.apply(null,arguments)}function Fn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $n(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function qn(e,t){return qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qn(e,t)}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){Xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(e,t){return Yn(e)||Zn(e,t)||zn(e,t)||Gn()}function Gn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yn(e){if(Array.isArray(e))return e}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zn(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function zn(e,t){if(e){if("string"===typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function tr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){er(o,r,a,i,c,"next",e)}function c(e){er(o,r,a,i,c,"throw",e)}i(void 0)}))}}function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e,t,n){return t&&rr(e.prototype,t),n&&rr(e,n),e}var or=function(){function e(t){nr(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return ar(e,[{key:"updateBalances",value:function(){var e=tr(On.a.mark((function e(){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=tr(On.a.mark((function e(){var t,n,r,a,o,i;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=Qn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=tr(On.a.mark((function e(t){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new ir(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=tr(On.a.mark((function t(n,r){var a,o,i,c,s,u=this;return On.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Sn["a"].configuration();case 3:return o=t.sent,t.next=6,wn["a"].provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=50;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new jt["f"](jt["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,t.next=20,this.getAccount();case 20:return c=t.sent,this.store.commit("account",c),t.next=24,a.userDepositTokenAddress();case 24:return this._userDepositTokenAddress=t.sent,t.next=27,this.fetchTokenData([this._userDepositTokenAddress]);case 27:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=30,this.monitorPreSetTokens();case 30:return a.events$.pipe(Object(jn["a"])((function(e){return"block/new"===e.type})),Object(En["a"])((function(){return u.fetchTokenData(u.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),a.events$.pipe(Object(jn["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe((function(e){return u.store.commit("updateConfig",e)})),a.events$.subscribe(function(){var e=tr(On.a.mark((function e(t){var n;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",Xn({},t.payload.token,{address:t.payload.token})),e.next=25;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",Xn({},t.meta.address,t.payload.available)),e.next=25;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=25;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=25;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=25;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=42,this.getBalance();case 42:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=50;break}return t.t2=this.store,t.next=48,this.getBalance(a.address);case 48:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 50:t.next=56;break;case 52:t.prev=52,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?Et["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?Et["a"].RDN_STATE_MIGRATION:t.t4 instanceof cr?Et["a"].INITIALIZATION_FAILED:Et["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 56:this.store.commit("loadComplete");case 57:case"end":return t.stop()}}),t,this,[[0,52]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"monitorPreSetTokens",value:function(){var e=tr(On.a.mark((function e(){var t,n,r,a,o,i,c;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=Qn(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=tr(On.a.mark((function e(t,n,r){var a,o,i,c,s,u;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=_n["a"].toUnits(n,i),s="string"===typeof t?Rn.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||Rn.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:Rn.t("notifications.withdrawal.failure.title"),description:u});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=tr(On.a.mark((function e(t,n){var r,a,o,i,c;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=_n["a"].toUnits(t,o),c=_n["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:Rn.t("notifications.withdrawal.success.title"),description:Rn.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol})});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=tr(On.a.mark((function e(t,n,r,a){var o,i,c,s;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=_n["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:Rn.t("notifications.ms-balance-proof.title"),description:Rn.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,txHash:a})});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=tr(On.a.mark((function e(){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=tr(On.a.mark((function e(){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=tr(On.a.mark((function e(t){var n;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",_n["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=tr(On.a.mark((function e(t){var n,r,a,o,i,c,s,u;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=Kn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=tr(On.a.mark((function e(t,n,r,a){var o,i;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===jt["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=tr(On.a.mark((function e(t,n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=tr(On.a.mark((function e(t,n,r){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=tr(On.a.mark((function e(t,n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=tr(On.a.mark((function e(t){var n,r=this;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=tr(On.a.mark((function e(t){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Xn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,An()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=tr(On.a.mark((function e(t,n,r,a,o){var i;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=tr(On.a.mark((function e(t,n,r,a){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=tr(On.a.mark((function e(){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=tr(On.a.mark((function e(t,n,r){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=tr(On.a.mark((function e(t,n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=tr(On.a.mark((function e(t,n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===jt["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=tr(On.a.mark((function e(t){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=tr(On.a.mark((function e(){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=tr(On.a.mark((function e(t){var n,r;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Xn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=tr(On.a.mark((function e(){var t,n;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=tr(On.a.mark((function e(t){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(kn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=tr(On.a.mark((function e(t){var n;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(kn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=tr(On.a.mark((function e(t,n){var r;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=tr(On.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=tr(On.a.mark((function e(n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(xn["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,An()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=Vn(Vn({},t),r[e]),delete r[e])})),i=function(){var e=tr(On.a.mark((function e(n){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=Vn(Vn({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,An()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=tr(On.a.mark((function e(t){return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=tr(On.a.mark((function e(t){var n,r,a,o,i=arguments;return On.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,Sn["a"].contracts();case 6:return o=e.sent,e.next=9,jt["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network"},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new cr(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),ir=function(e){In(n,e);var t=Pn(n);function n(){return nr(this,n),t.apply(this,arguments)}return n}(Bn(Error)),cr=function(e){In(n,e);var t=Pn(n);function n(){return nr(this,n),t.apply(this,arguments)}return n}(Bn(Error));function sr(e,t){e.prototype.$raiden=new or(hn)}var ur=n("5ffb"),lr=n.n(ur);function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t,n){return t&&fr(e.prototype,t),n&&fr(e,n),e}var br=function(){function e(){dr(this,e),this.cache={}}return pr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=lr()(e);return this.cache[e]=n,n}}]),e}();function yr(e,t){e.prototype.$identicon=new br}n("b1e8"),n("8e5c"),n("bd89");var mr=n("af80");r["a"].use(mr["a"]);var hr=new mr["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),vr=n("9bec"),gr=(n("5443"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(gr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(vn["b"])(),r["a"].use(sr),r["a"].use(yr),r["a"].use(vr["a"]),new r["a"]({vuetify:hr,router:_t,store:hn,i18n:Rn,render:function(e){return e(ht)}}).$mount("#app")},d0d0:function(e,t,n){},e4b6:function(e,t,n){"use strict";var r=n("ed25"),a=n.n(r);a.a},ec99:function(e,t,n){},ed25:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"The monitoring service {monitoringService} successfully submitted a balance proof for a channel with {partner} claiming a reward of {reward}. ({txHash})"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"UDC Balance:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"button":"Mint and deposit","button-main":"Deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"transfer-title":"Make Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("8d3f"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return zy})),n.d(t,"b",(function(){return so})),n.d(t,"a",(function(){return De})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return pt})),n.d(t,"g",(function(){return on}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Vn})),n.d(r,"tokenMonitored",(function(){return Kn})),n.d(r,"channelOpen",(function(){return Gn})),n.d(r,"channelMonitored",(function(){return Zn})),n.d(r,"channelDeposit",(function(){return Yn})),n.d(r,"channelWithdrawn",(function(){return Xn})),n.d(r,"channelClose",(function(){return Qn})),n.d(r,"channelSettleable",(function(){return zn})),n.d(r,"channelSettle",(function(){return Jn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return nr})),n.d(a,"matrixPresence",(function(){return rr})),n.d(a,"matrixRoom",(function(){return ar})),n.d(a,"matrixRoomLeave",(function(){return or})),n.d(a,"rtcChannel",(function(){return ir}));var o={};n.r(o),n.d(o,"messageSend",(function(){return Kr})),n.d(o,"messageGlobalSend",(function(){return Gr})),n.d(o,"messageReceived",(function(){return Zr}));var i={};n.r(i),n.d(i,"transfer",(function(){return ca})),n.d(i,"transferSigned",(function(){return sa})),n.d(i,"transferProcessed",(function(){return ua})),n.d(i,"transferSecret",(function(){return la})),n.d(i,"transferSecretRegister",(function(){return da})),n.d(i,"transferSecretRequest",(function(){return fa})),n.d(i,"transferSecretReveal",(function(){return pa})),n.d(i,"transferUnlock",(function(){return ba})),n.d(i,"transferUnlockProcessed",(function(){return ya})),n.d(i,"transferExpire",(function(){return ma})),n.d(i,"transferExpireProcessed",(function(){return ha})),n.d(i,"transferRefunded",(function(){return va})),n.d(i,"withdrawReceive",(function(){return Oa})),n.d(i,"withdrawExpired",(function(){return wa}));var c={};n.r(c),n.d(c,"pathFind",(function(){return ja})),n.d(c,"pfsListUpdated",(function(){return Ea})),n.d(c,"iouPersist",(function(){return Ta})),n.d(c,"iouClear",(function(){return Aa})),n.d(c,"udcDeposited",(function(){return Sa})),n.d(c,"udcWithdraw",(function(){return Na})),n.d(c,"udcWithdrawn",(function(){return Ca})),n.d(c,"msBalanceProofSent",(function(){return Ra}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return Vu})),n.d(s,"initTokensRegistryEpic",(function(){return Ku})),n.d(s,"initMonitorProviderEpic",(function(){return Gu})),n.d(s,"channelEventsEpic",(function(){return zu})),n.d(s,"channelMonitoredEpic",(function(){return Ju})),n.d(s,"channelOpenEpic",(function(){return tl})),n.d(s,"channelDepositEpic",(function(){return nl})),n.d(s,"channelCloseEpic",(function(){return rl})),n.d(s,"channelUpdateEpic",(function(){return al})),n.d(s,"channelSettleEpic",(function(){return ol})),n.d(s,"channelSettleableEpic",(function(){return il})),n.d(s,"channelUnlockEpic",(function(){return cl})),n.d(s,"confirmationEpic",(function(){return ul}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Xl})),n.d(u,"matrixShutdownEpic",(function(){return Ql})),n.d(u,"matrixMonitorPresenceEpic",(function(){return fd})),n.d(u,"matrixPresenceUpdateEpic",(function(){return pd})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return bd})),n.d(u,"matrixUpdateCapsEpic",(function(){return yd})),n.d(u,"matrixCreateRoomEpic",(function(){return Nd})),n.d(u,"matrixInviteEpic",(function(){return Cd})),n.d(u,"matrixHandleInvitesEpic",(function(){return Rd})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Dd})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Id})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Pd})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Ud})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return Ld})),n.d(u,"matrixMessageSendEpic",(function(){return Xd})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return Qd})),n.d(u,"matrixMessageReceivedEpic",(function(){return zd})),n.d(u,"deliveredEpic",(function(){return Jd})),n.d(u,"rtcConnectEpic",(function(){return kf}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return Nf})),n.d(l,"transferAutoExpireEpic",(function(){return Mf})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return dp})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return gp})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Op})),n.d(l,"transferMediateEpic",(function(){return Ap})),n.d(l,"transferProcessedReceivedEpic",(function(){return Pp})),n.d(l,"transferProcessedSendEpic",(function(){return Up})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return Lp})),n.d(l,"transferExpireProcessedEpic",(function(){return Bp})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return Mp})),n.d(l,"transferRefundedEpic",(function(){return Yp})),n.d(l,"transferRetryMessageEpic",(function(){return lb})),n.d(l,"transferSecretRequestedEpic",(function(){return vb})),n.d(l,"transferSecretRevealEpic",(function(){return Ob})),n.d(l,"transferSecretRevealedEpic",(function(){return wb})),n.d(l,"transferRequestUnlockEpic",(function(){return _b})),n.d(l,"monitorSecretRegistryEpic",(function(){return kb})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return jb})),n.d(l,"transferAutoRegisterEpic",(function(){return Eb})),n.d(l,"transferSecretRegisterEpic",(function(){return Tb})),n.d(l,"withdrawSendConfirmationEpic",(function(){return Ib})),n.d(l,"autoExpireWithdrawEpic",(function(){return Ub}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return my})),n.d(d,"pfsCapacityUpdateEpic",(function(){return hy})),n.d(d,"pfsFeeUpdateEpic",(function(){return vy})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return gy})),n.d(d,"monitorUdcBalanceEpic",(function(){return Oy})),n.d(d,"monitorRequestEpic",(function(){return _y})),n.d(d,"udcWithdrawRequestEpic",(function(){return ky})),n.d(d,"udcCheckWithdrawPlannedEpic",(function(){return jy})),n.d(d,"udcWithdrawPlannedEpic",(function(){return Ey})),n.d(d,"msMonitorNewBPEpic",(function(){return Ty}));var f=n("8d3f"),p=n.n(f),b=(n("3dfb"),n("f674"),n("8e94"),n("7e01")),y=n.n(b),m=n("b15f"),h=n("34f7"),v=n("1457"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("7d8c")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("5ca1"),_=n("38dd"),k=n("f30a"),j=n("45c3"),E=n("26de"),T=n("ae32"),A=n("a9ae"),S=n.n(A),x=n("e504"),N=n.n(x),C=n("a287"),R=n("9fc9"),D=n("0977"),I=n("473f"),P=n("0a39"),U=n("e654"),L=n("9882"),B=n("6422"),M=n("5adc"),F=n("6193"),$=n("2e48"),q=n("54b9"),H=n("fc62");function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var G=function(){function e(){W(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var pe=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e}var ke=function(){function e(){Oe(this,e)}return _e(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,je,t)}}]),e}(),je=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}var Se,xe=function(){function e(){Ee(this,e)}return Ae(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ne,t)}}]),e}(),Ne=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ce=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var Re,De,Ie=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Pe=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Re||(Re={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(De||(De={}));var Ue=n("6646"),Le=n("2820"),Be=n.n(Le),Me=n("ddaa"),Fe=n("ff0f"),$e=n("de48"),qe=n("54a8"),He=n.n(qe),We=n("a32b");function Ve(e){return Ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e){return Xe(e)||Ye(e)||Ze(e)||Ge()}function Ge(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(e){if("string"===typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}function Ye(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xe(e){if(Array.isArray(e))return Qe(e)}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}function tt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function nt(e){var t=ct();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ve(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){var t="function"===typeof Map?new Map:void 0;return ot=function(e){if(null===e||!st(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return it(e,arguments,lt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,e)},ot(e)}function it(e,t,n){return it=ct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ut(o,n.prototype),o},it.apply(null,arguments)}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function st(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var dt=We,ft=Ue["p"](Ue["q"],Ue["v"]([Ue["q"],Ue["l"],Ue["d"],Ue["k"]])),pt=function(e){tt(n,e);var t=nt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ze(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(at(r),n.prototype),r}return et(n,[{key:"code",get:function(){var e,t=this;return null!==(e=He()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ot(Error));function bt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?it(pt,Ke(t)):new pt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var yt=Ue["h"]([Ue["t"]({name:Ue["q"]}),Ue["m"]({message:Ue["q"],stack:Ue["q"],details:ft})]),mt=new Ue["a"]("Error",(function(e){return"object"===Ve(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object($e["pipe"])(yt.decode(e),Object(Fe["map"])((function(e){return"details"in e?Object.assign(new pt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function ht(e){Me["ThrowReporter"].report(e)}function vt(e,t,n,r){try{var a=e.decode(t);return ht(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new pt(n):o}}function gt(e){return null!=e}var Ot=new Ue["a"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){var n,r;if(_["BigNumber"].isBigNumber(e))return Ue["r"](e);try{return Ue["r"](Object(_["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Ue["f"](e,t)}}),(function(e){return e.toString()})),wt=N()((function(e){return Ue["e"](Ue["q"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),_t=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Ue["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),kt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Ue["e"](Ot,(function(e){return Ot.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),jt=wt(65),Et=wt(32),Tt=wt(32),At=wt(32),St=new Ue["a"]("Address",(function(e){try{return wt(20).is(e)&&Object(_["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!wt(20).is(e))return Ue["f"](e,t);var n;try{n=Object(_["getAddress"])(e)}catch(r){return Ue["f"](e,t)}return n?Ue["r"](n):Ue["f"](e,t)}),Ue["g"]),xt=N()((function(e){return Ue["s"]([Ue["l"],e])}));function Nt(e){return[Date.now(),e]}var Ct=N()((function(e){return Ue["h"]([e,Ue["n"](Ue["t"]({signature:jt}))])})),Rt=N()((function(e){return new Ue["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Ue["r"](t):Ue["f"](t,n)}),Ue["g"])})),Dt=n("8590"),It=n("98ad"),Pt=n("6283"),Ut=n("71aa"),Lt=n("64ca"),Bt=n("6758"),Mt=n("d515"),Ft=n("6abd"),$t=n("185a"),qt=n.n($t);function Ht(e,t){return Kt(e)||Vt(e,t)||Yt(e,t)||Wt()}function Wt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Kt(e){if(Array.isArray(e))return e}function Gt(e){return Qt(e)||Xt(e)||Yt(e)||Zt()}function Zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function Xt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Qt(e){if(Array.isArray(e))return zt(e)}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function en(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if("string"===typeof t||Array.isArray(t))return Object(It["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=0,i=0;return Object(P["a"])((function(){return o=e._lastBlockNumber||e.blockNumber||Number.POSITIVE_INFINITY,en(e,"block")})).pipe(Object(Lt["a"])(Math.ceil(e.pollingInterval/10)),Object($["a"])((function(n,c){return Jt(r,void 0,void 0,p.a.mark((function r(){return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",e.getLogs(Object.assign(Object.assign({},t),{fromBlock:Math.max(Math.min(n-a,c<a?o:Number.POSITIVE_INFINITY),i+1),toBlock:"latest"})));case 1:case"end":return r.stop()}}),r)})))})),Object($["a"])((function(e){return Object(Pt["a"])(e)})),Object(Bt["a"])((function(e){return i=Math.max(i,e.blockNumber)})))}function tn(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=Object.assign(Object.assign(Object.assign({},t),n),{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Gt(r),[a])}};return void 0!==t?n(t):n}function nn(e,t,n){var r=e.provider,a=U["a"],o=Object(D["a"])(-1);n&&(o=Object(P["a"])((function(){return r.blockNumber?Object(D["a"])(r.blockNumber):en(r,"block").pipe(Object(F["a"])(),Object(B["a"])((function(){return r.blockNumber})),Object(Mt["a"])())})),a=Object(Ut["a"])(n,o).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=Ht(e,2),a=n[0],o=n[1];return Object(Pt["a"])(t).pipe(Object($["a"])((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})),Object($["a"])(Pt["a"]),Object(Ft["a"])(),Object($["a"])((function(e){return Object(Pt["a"])(qt()(e,["blockNumber"]))})))})),Object(B["a"])(tn(e)),Object(M["a"])(gt)));var i=o.pipe(Object($["a"])((function(){return Object(Pt["a"])(t)})),Object($["a"])((function(e){return en(r,e)})),Object(B["a"])(tn(e)),Object(M["a"])(gt));return Object(I["a"])(a,i)}function rn(e){return Jt(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Dt["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function an(e){var t=e.send;e.send=function(n,r){return Jt(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function on(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var cn,sn=Ue["n"](Ue["p"](Ue["q"],Ue["b"]));function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=Ue["t"]({urls:Ue["v"]([Ue["q"],Ue["c"](Ue["q"])])}),dn=Ue["n"](Ue["h"]([Ue["t"]({matrixServerLookup:Ue["q"],revealTimeout:Ue["l"],settleTimeout:Ue["l"],httpTimeout:Ue["l"],discoveryRoom:Ue["v"]([Ue["q"],Ue["k"]]),pfsRoom:Ue["v"]([Ue["q"],Ue["k"]]),monitoringRoom:Ue["v"]([Ue["q"],Ue["k"]]),pfs:Ue["v"]([St,Ue["q"],Ue["k"]]),pfsSafetyMargin:Ue["l"],matrixExcessRooms:Ue["l"],confirmationBlocks:Ue["l"],monitoringReward:Ue["v"]([Ue["k"],kt(32)]),logger:Ue["i"]((cn={},un(cn,"",null),un(cn,"trace",null),un(cn,"debug",null),un(cn,"info",null),un(cn,"warn",null),un(cn,"error",null),cn)),caps:Ue["v"]([Ue["k"],sn]),fallbackIceServers:Ue["c"](ln),rateToSvt:Ue["p"](Ue["q"],kt(32))}),Ue["m"]({matrixServer:Ue["q"],subkey:Ue["d"]})])),fn=Ue["n"](Ue["m"](Object.assign(Object.assign({},dn.type.types["0"].props),dn.type.types["1"].props)));function pn(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(on(r),"_discovery"),pfsRoom:"raiden_".concat(on(r),"_path_finding"),monitoringRoom:"raiden_".concat(on(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},un(n,De.NO_DELIVERY,!0),un(n,De.NO_MEDIATE,!0),un(n,De.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var bn=n("9212"),yn=n.n(bn),mn=n("db96"),hn=n.n(mn),vn=n("9a0d"),gn=n.n(vn),On=n("4e44"),wn=n.n(On);function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e){return An(e)||Tn(e)||En(e)||jn()}function jn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function En(e,t){if(e){if("string"===typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}function Tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function An(e){if(Array.isArray(e))return Sn(e)}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Nn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Cn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Ue["t"](Object.assign(Object.assign(Object.assign({type:Ue["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Ue["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Rn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Ue["b"],c=Cn(t,a,e),s=Cn(n,o,e),u=Cn(r,i,e,!0);return{request:c,success:s,failure:u}}function Dn(e){var t=function(t){return wn()(t.meta,e,(function(e,t){return Ot.is(e)&&Ot.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function In(e,t){var n=function(n){return Nn([e.success,e.failure],n)&&Dn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Pn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return In(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Un(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return xn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?Pn(e,t):In(e,t)),Object(B["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function Ln(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return bt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(kn(a.map((function(e){return _n({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Bn,Mn=Ue["q"],Fn=(Ue["q"],Ue["h"]([Ue["t"]({amount:kt(32),expiration:kt(32),secrethash:Et}),Ue["m"]({registered:Ue["j"](!0)})],"Lock")),$n=Ue["n"](Ue["t"]({chainId:kt(32),tokenNetworkAddress:St,channelId:kt(32),nonce:kt(8),transferredAmount:kt(32),lockedAmount:kt(32),locksroot:Et,additionalHash:Et})),qn=$n,Hn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Pe,additionalHash:k["HashZero"],signature:Ie},Wn=Ue["t"]({tokenNetwork:St,partner:St}),Vn=Cn("block/new",Ue["t"]({blockNumber:Ue["l"]})),Kn=Cn("token/monitored",Ue["h"]([Ue["t"]({token:St,tokenNetwork:St}),Ue["m"]({fromBlock:Ue["l"],toBlock:Ue["l"]})])),Gn=Rn(Wn,"channel/open/request","channel/open/success","channel/open/failed",Ue["m"]({settleTimeout:Ue["l"],subkey:Ue["d"],deposit:kt(32)}),Ue["t"]({id:Ue["l"],token:St,settleTimeout:Ue["l"],isFirstParticipant:Ue["d"],txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Zn=Cn("channel/monitored",Ue["t"]({id:Ue["l"]}),Wn),Yn=Rn(Wn,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Ue["h"]([Ue["t"]({deposit:kt(32)}),Ue["m"]({subkey:Ue["d"]})]),Ue["t"]({id:Ue["l"],participant:St,totalDeposit:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),Xn=Cn("channel/withdraw/success",Ue["t"]({id:Ue["l"],participant:St,totalWithdraw:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),Wn),Qn=Rn(Wn,"channel/close/request","channel/close/success","channel/close/failure",Ue["v"]([Ue["m"]({subkey:Ue["d"]}),Ue["u"]]),Ue["t"]({id:Ue["l"],participant:St,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),zn=Cn("channel/settleable",Ue["t"]({settleableBlock:Ue["l"]}),Wn),Jn=Rn(Wn,"channel/settle/request","channel/settle/success","channel/settle/failure",Ue["v"]([Ue["m"]({subkey:Ue["d"]}),Ue["u"]]),Ue["h"]([Ue["t"]({id:Ue["l"],txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),Ue["m"]({locks:Ue["o"](Fn)})])),er=Ue["n"](Ue["t"]({userId:Ue["q"],accessToken:Ue["q"],deviceId:Ue["q"],displayName:Ue["q"]})),tr=Ue["t"]({address:St}),nr=Cn("matrix/setup",Ue["t"]({server:Ue["q"],setup:er})),rr=Rn(tr,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Ue["h"]([Ue["t"]({userId:Ue["q"],available:Ue["d"],ts:Ue["l"]}),Ue["m"]({caps:Ue["p"](Ue["q"],Ue["b"])})])),ar=Cn("matrix/room",Ue["t"]({roomId:Ue["q"]}),tr),or=Cn("matrix/room/leave",Ue["t"]({roomId:Ue["q"]}),tr),ir=Cn("rtc/channel",Ue["v"]([Ue["u"],Rt(RTCDataChannel)]),tr);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Bn||(Bn={}));var cr,sr=Ue["n"](Ue["t"]({message_identifier:kt(8)})),ur=Ue["n"](Ue["t"]({type:Ue["j"](Bn.DELIVERED),delivered_message_identifier:kt(8)})),lr=ur,dr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.PROCESSED)}),sr])),fr=dr,pr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.SECRET_REQUEST),payment_identifier:kt(8),secrethash:Et,amount:kt(32),expiration:kt(32)}),sr])),br=pr,yr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.SECRET_REVEAL),secret:Tt}),sr])),mr=yr,hr=Ue["n"](Ue["h"]([Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),transferred_amount:kt(32),locked_amount:kt(32),locksroot:Et}),sr])),vr=Ue["n"](Ue["t"]({route:Ue["o"](St)})),gr=vr,Or=Ue["n"](Ue["t"]({routes:Ue["o"](gr)})),wr=Or,_r=Ue["n"](Ue["h"]([Ue["t"]({payment_identifier:kt(8),token:St,recipient:St,lock:Fn,target:St,initiator:St,metadata:wr}),hr])),kr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.LOCKED_TRANSFER)}),_r])),jr=kr,Er=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.REFUND_TRANSFER)}),_r])),Tr=Er,Ar=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.UNLOCK),payment_identifier:kt(8),secret:Tt}),hr])),Sr=Ar,xr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.LOCK_EXPIRED),recipient:St,secrethash:Et}),hr])),Nr=xr,Cr=Ue["n"](Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),participant:St,total_withdraw:kt(32),nonce:kt(8),expiration:kt(32)})),Rr=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.WITHDRAW_REQUEST)}),Cr,sr])),Dr=Rr,Ir=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.WITHDRAW_CONFIRMATION)}),Cr,sr])),Pr=Ir,Ur=Ue["n"](Ue["h"]([Ue["t"]({type:Ue["j"](Bn.WITHDRAW_EXPIRED)}),Cr,sr])),Lr=Ur,Br=Ue["n"](Ue["t"]({type:Ue["j"](Bn.PFS_CAPACITY_UPDATE),canonical_identifier:Ue["n"](Ue["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,other_participant:St,updating_nonce:kt(8),other_nonce:kt(8),updating_capacity:kt(32),other_capacity:kt(32),reveal_timeout:kt(32)})),Mr=Br,Fr=Ue["n"](Ue["t"]({type:Ue["j"](Bn.PFS_FEE_UPDATE),canonical_identifier:Ue["n"](Ue["t"]({chain_identifier:kt(32),token_network_address:St,channel_identifier:kt(32)})),updating_participant:St,timestamp:Ue["q"],fee_schedule:Ue["t"]({cap_fees:Ue["d"],imbalance_penalty:Ue["v"]([Ue["k"],Ue["c"](Ue["s"]([kt(32),_t(32)]))]),proportional:_t(32),flat:_t(32)})})),$r=Fr,qr=Ue["n"](Ue["t"]({type:Ue["j"](Bn.MONITOR_REQUEST),balance_proof:Ue["t"]({chain_id:kt(32),token_network_address:St,channel_identifier:kt(32),nonce:kt(8),balance_hash:Et,additional_hash:Et,signature:jt}),monitoring_service_contract_address:St,non_closing_participant:St,non_closing_signature:jt,reward_amount:kt(32)})),Hr=qr,Wr=[lr,fr,br,mr,jr,Tr,Sr,Nr,Dr,Pr,Lr,Mr,$r,Hr],Vr=Ue["v"]([].concat(Wr)),Kr=Rn(Ue["t"]({address:St,msgId:Ue["q"]}),"message/send/request","message/send/success","message/send/failure",Ue["t"]({message:Ue["v"]([Ue["q"],Ct(Vr)])}),void 0),Gr=Cn("message/global/send",Ue["t"]({message:Ue["v"]([Ue["q"],Ct(Vr)])}),Ue["t"]({roomName:Ue["q"]})),Zr=Cn("message/received",Ue["h"]([Ue["t"]({text:Ue["q"],ts:Ue["l"]}),Ue["m"]({message:Ue["v"]([Vr,Ct(Vr)]),userId:Ue["q"],roomId:Ue["q"]})]),Ue["t"]({address:St})),Yr=n("955b"),Xr=n.n(Yr),Qr=Ue["n"](Ue["h"]([Ue["t"]({result:Ue["c"](Ue["n"](Ue["t"]({path:Ue["o"](St),estimated_fee:_t(32)})))}),Ue["m"]({feedback_token:Ue["q"]})])),zr=Ue["c"](Ue["n"](Ue["t"]({path:Ue["o"](St),fee:_t(32)}))),Jr=Ue["n"](Ue["t"]({address:St,url:Ue["q"],rtt:Ue["l"],price:kt(32),token:St})),ea=Ue["n"](Ue["t"]({sender:St,receiver:St,amount:kt(32),expiration_block:kt(32),one_to_n_address:St,chain_id:kt(32)})),ta=Ue["n"](Ue["t"]({last_iou:Ct(ea)})),na={SENT:"sent",RECEIVED:"received"},ra=Ue["n"](Ue["h"]([Ue["t"]({transfer:xt(Ct(jr)),fee:_t(32),partner:St}),Ue["m"]({secret:xt(Ue["t"]({value:Tt,registerBlock:Ue["l"]})),transferProcessed:xt(Ct(fr)),refund:xt(Ct(Tr)),channelClosed:xt(Et),secretRequest:xt(Ct(br)),secretReveal:xt(Ct(mr)),unlock:xt(Ct(Sr)),lockExpired:xt(Ct(Nr)),unlockProcessed:xt(Ct(fr)),lockExpiredProcessed:xt(Ct(fr))})])),aa=ra,oa=Ue["n"](Ue["p"](Ue["q"],aa));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(cr||(cr={}));var ia=Ue["t"]({secrethash:Et,direction:Ue["i"](Xr()(na))}),ca=Rn(ia,"transfer/request","transfer/success","transfer/failure",Ue["h"]([Ue["t"]({tokenNetwork:St,target:St,value:kt(32),paths:zr,paymentId:kt(8)}),Ue["m"]({secret:Tt,expiration:Ue["l"],initiator:St})]),Ue["m"]({balanceProof:Ct(qn)})),sa=Cn("transfer/signed",Ue["t"]({message:Ct(jr),fee:_t(32),partner:St}),ia),ua=Cn("transfer/processed",Ue["t"]({message:Ct(fr)}),ia),la=Cn("transfer/secret",Ue["t"]({secret:Tt}),ia),da=Rn(ia,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Ue["h"]([Ue["t"]({secret:Tt}),Ue["m"]({subkey:Ue["d"]})]),Ue["t"]({secret:Tt,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})),fa=Cn("transfer/secret/request",Ue["t"]({message:Ct(br)}),ia),pa=Cn("transfer/secret/reveal",Ue["t"]({message:Ct(mr)}),ia),ba=Rn(ia,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Ue["t"]({message:Ct(Sr),partner:St})),ya=Cn("transfer/unlock/processed",Ue["t"]({message:Ct(fr)}),ia),ma=Rn(ia,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Ue["t"]({message:Ct(Nr),partner:St})),ha=Cn("transfer/expire/processed",Ue["t"]({message:Ct(fr)}),ia),va=Cn("transfer/refunded",Ue["t"]({message:Ct(Tr),partner:St}),ia),ga=Ue["t"]({tokenNetwork:St,partner:St,totalWithdraw:kt(32),expiration:Ue["l"]}),Oa=Rn(ga,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Ue["t"]({message:Ct(Dr)}),Ue["t"]({message:Ct(Pr)}),Ue["t"]({message:Ct(Lr)})),wa=Cn("withdraw/expired",Ue["t"]({participant:St}),ga),_a=Ue["t"]({tokenNetwork:St,target:St,value:kt(32)}),ka=Ue["t"]({tokenNetwork:St,serviceAddress:St}),ja=Rn(_a,"path/find/request","path/find/success","path/find/failure",Ue["m"]({paths:zr,pfs:Ue["v"]([Jr,Ue["k"]])}),Ue["t"]({paths:zr})),Ea=Cn("pfs/list/updated",Ue["t"]({pfsList:Ue["o"](St)})),Ta=Cn("iou/persist",Ue["t"]({iou:Ct(ea)}),ka),Aa=Cn("iou/clear",void 0,ka),Sa=Cn("udc/deposited",kt(32)),xa=Ue["t"]({amount:kt(32)}),Na=Rn(xa,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Ue["u"],Ue["h"]([Ue["t"]({block:Ue["l"]}),Ue["m"]({txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])})])),Ca=Cn("udc/withdrawn",Ue["t"]({withdrawal:kt(32),txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}),xa),Ra=Cn("ms/balanceProof/sent",Ue["t"]({tokenNetwork:St,partner:St,id:Ue["l"],reward:kt(32),nonce:kt(8),monitoringService:St,txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}));function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ia=Cn("raiden/shutdown",Ue["t"]({reason:Ue["v"]([Ue["j"](Re.STOP),Ue["j"](Re.ACCOUNT_CHANGED),Ue["j"](Re.NETWORK_CHANGED),mt])})),Pa=Cn("raiden/config/update",fn),Ua=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:Ia,raidenConfigUpdate:Pa},r),a),o),i),c),La=[Ua.raidenShutdown,Ua.newBlock,Ua.matrixPresence.success,Ua.tokenMonitored,Ua.udcWithdrawn,Ua.udcWithdraw.failure,Ua.msBalanceProofSent],Ba=gn()(Ua,(function(e,t){return Object.assign(Object.assign({},e),"type"in t?Da({},t.type,t):yn()(t,hn()("type")))}),{}),Ma=Ue["n"](Ue["t"]({type:Ue["q"],payload:Ue["n"](Ue["t"]({txHash:Et,txBlock:Ue["l"],confirmed:Ue["v"]([Ue["u"],Ue["d"]])}))})),Fa=new Ue["a"]("ConfirmableAction",Ma.is,(function(e,t){return Fe["either"].chain(Ma.validate(e,t),(function(e){var n=e.type;return n in Ba?Ba[n].codec.validate(e,t):Ue["f"](e,t)}))}),(function(e){return Ba[e.type].codec.encode(e)}));function $a(e){return Object.assign(Object.assign({},e),{version:0})}function qa(e,t){return Ga(e)||Ka(e,t)||Wa(e,t)||Ha()}function Ha(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wa(e,t){if(e){if("string"===typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ka(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ga(e){if(Array.isArray(e))return e}function Za(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=qa(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function Ya(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var Xa=n("77a9"),Qa=n("2cb6"),za=n("70de");function Ja(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function eo(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(Xa["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(Xa["isArrayish"])(e)&&(e=Object(Xa["hexlify"])(e)),Ot.is(e)){if(e.lt(0))throw new pt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new pt(dt.DTA_NUMBER_TOO_LARGE);n=Object(Xa["hexZeroPad"])(Object(Xa["hexlify"])(e),t)}else{if("string"!==typeof e)throw new pt(dt.DTA_UNENCODABLE_DATA);if(Object(Xa["hexDataLength"])(e)!==t)throw new pt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var to,no=function(e){return null!=e&&e["isLosslessNumber"]};function ro(e){return za["parse"](e,(function(e,t){if(Ja(e),no(t))try{return t.valueOf()}catch(n){return Object(_["bigNumberify"])(t.toString())}return t}))}function ao(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Ja(e),_["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return za["stringify"](e,t,n)}function oo(e){return oo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oo(e)}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var co,so,uo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},lo=(to={},io(to,Bn.DELIVERED,12),io(to,Bn.PROCESSED,0),io(to,Bn.SECRET_REQUEST,3),io(to,Bn.SECRET_REVEAL,11),io(to,Bn.LOCKED_TRANSFER,7),io(to,Bn.REFUND_TRANSFER,8),io(to,Bn.UNLOCK,4),io(to,Bn.LOCK_EXPIRED,13),io(to,Bn.WITHDRAW_REQUEST,15),io(to,Bn.WITHDRAW_CONFIRMATION,16),io(to,Bn.WITHDRAW_EXPIRED,17),io(to,Bn.PFS_CAPACITY_UPDATE,-1),io(to,Bn.PFS_FEE_UPDATE,-1),io(to,Bn.MONITOR_REQUEST,-1),to);function fo(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function po(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Pe)?k["HashZero"]:Object(_["keccak256"])(Object(Xa["concat"])([eo(t,32),eo(n,32),eo(r,32)]))}function bo(e){switch(e.type){case Bn.LOCKED_TRANSFER:case Bn.REFUND_TRANSFER:var t=Object(Xa["concat"])([eo(lo[e.type],1),eo(e.message_identifier,8),eo(e.payment_identifier,8),eo(e.lock.expiration,32),eo(e.token,20),eo(e.recipient,20),eo(e.target,20),eo(e.initiator,20),eo(e.lock.secrethash,32),eo(e.lock.amount,32)]);return e.type===Bn.LOCKED_TRANSFER&&(t=Object(Xa["concat"])([t,fo(e.metadata)])),Object(_["keccak256"])(t);case Bn.UNLOCK:return Object(_["keccak256"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(e.message_identifier,8),eo(e.payment_identifier,8),eo(e.secret,32)]));case Bn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(e.message_identifier,8),eo(e.recipient,20),eo(e.secrethash,32)]))}}function yo(e){var t;switch(e.type){case Bn.DELIVERED:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(0,3),eo(e.delivered_message_identifier,8)]));case Bn.PROCESSED:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(0,3),eo(e.message_identifier,8)]));case Bn.LOCKED_TRANSFER:case Bn.REFUND_TRANSFER:case Bn.UNLOCK:case Bn.LOCK_EXPIRED:var n=bo(e),r=po({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(e.token_network_address,20),eo(e.chain_id,32),eo(co.BALANCE_PROOF,32),eo(e.channel_identifier,32),eo(r,32),eo(e.nonce,32),eo(n,32)]));case Bn.SECRET_REQUEST:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(0,3),eo(e.message_identifier,8),eo(e.payment_identifier,8),eo(e.secrethash,32),eo(e.amount,32),eo(e.expiration,32)]));case Bn.SECRET_REVEAL:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(0,3),eo(e.message_identifier,8),eo(e.secret,32)]));case Bn.WITHDRAW_REQUEST:case Bn.WITHDRAW_CONFIRMATION:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(e.token_network_address,20),eo(e.chain_id,32),eo(co.WITHDRAW,32),eo(e.channel_identifier,32),eo(e.participant,20),eo(e.total_withdraw,32),eo(e.expiration,32)]));case Bn.WITHDRAW_EXPIRED:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(lo[e.type],1),eo(0,3),eo(e.nonce,32),eo(e.message_identifier,8),eo(e.token_network_address,20),eo(e.chain_id,32),eo(co.WITHDRAW,32),eo(e.channel_identifier,32),eo(e.participant,20),eo(e.total_withdraw,32),eo(e.expiration,32)]));case Bn.PFS_CAPACITY_UPDATE:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(e.canonical_identifier.chain_identifier,32),eo(e.canonical_identifier.token_network_address,20),eo(e.canonical_identifier.channel_identifier,32),eo(e.updating_participant,20),eo(e.other_participant,20),eo(e.updating_nonce,8),eo(e.other_nonce,8),eo(e.updating_capacity,32),eo(e.other_capacity,32),eo(e.reveal_timeout,32)]));case Bn.PFS_FEE_UPDATE:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(e.canonical_identifier.chain_identifier,32),eo(e.canonical_identifier.token_network_address,20),eo(e.canonical_identifier.channel_identifier,32),eo(e.updating_participant,20),eo(e.fee_schedule.cap_fees,1),eo(e.fee_schedule.flat,32),eo(e.fee_schedule.proportional,32),Object(Qa["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),eo(e.timestamp,19)]));case Bn.MONITOR_REQUEST:return Object(Xa["hexlify"])(Object(Xa["concat"])([eo(e.monitoring_service_contract_address,20),eo(e.balance_proof.chain_id,32),eo(co.MS_REWARD,32),eo(e.balance_proof.token_network_address,20),eo(e.non_closing_participant,20),eo(e.non_closing_signature,65),eo(e.reward_amount,32)]))}}function mo(e){return jt.is(e.signature)}function ho(e){return Object(_["verifyMessage"])(Object(Xa["arrayify"])(yo(e)),e.signature)}function vo(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:bo(e),signature:e.signature}}function go(e){return ao("signature"in e?Ct(Vr).encode(e):Vr.encode(e))}function Oo(e){var t=ro(e);return bt(t&&"object"===oo(t)&&"type"in t&&Object.values(Bn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),vt("signature"in t?Ct(Vr):Vr,t)}function wo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return uo(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!mo(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(Xa["arrayify"])(yo(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function _o(e){return function(t){return Zr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(co||(co={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(so||(so={}));var ko=Ue["n"](Ue["t"]({address:St,deposit:kt(32),withdraw:kt(32),locks:Ue["o"](Fn),balanceProof:Ct(qn),withdrawRequests:Ue["o"](Ct(Dr)),nextNonce:kt(8)})),jo=ko,Eo=Ue["h"]([Ue["n"](Ue["t"]({id:Ue["l"],token:St,tokenNetwork:St,settleTimeout:Ue["l"],isFirstParticipant:Ue["d"],openBlock:Ue["l"],own:jo,partner:jo})),Ue["v"]([Ue["n"](Ue["t"]({state:Ue["v"]([Ue["j"](so.open),Ue["j"](so.closing)])})),Ue["h"]([Ue["n"](Ue["t"]({closeBlock:Ue["l"],closeParticipant:St})),Ue["v"]([Ue["n"](Ue["t"]({state:Ue["v"]([Ue["j"](so.closed),Ue["j"](so.settleable),Ue["j"](so.settling)])})),Ue["n"](Ue["t"]({state:Ue["j"](so.settled),settleBlock:Ue["l"]}))])])])]);function To(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e,t){return Ro(e)||Co(e,t)||xo(e,t)||So()}function So(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xo(e,t){if(e){if("string"===typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?No(e,t):void 0}}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Co(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ro(e){if(Array.isArray(e))return e}function Do(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Ao(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:Hn,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function Io(e){for(var t,n={},r=function(){for(var t=Ao(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=Ao(s[c],2),l=u[0],d=u[1];Do(d,{own:e.address,partner:l});var f=He()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:f,tokenNetwork:r}),Object.assign(n,To({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function Po(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Uo(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Uo(e,t){if(e){if("string"===typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lo(e,t):void 0}}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bo(e){var t,n=Po(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(_["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}var Mo=[$a,Za,Ya,Io,Bo],Fo=Mo.length-1;function $o(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(Mo[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var qo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ho=Ue["n"](Ue["t"]({address:St,version:Ue["j"](Fo),chainId:Ue["l"],registry:St,blockNumber:Ue["l"],config:fn,channels:Ue["n"](Ue["p"](Mn,Eo)),oldChannels:Ue["n"](Ue["p"](Ue["q"],Eo)),tokens:Ue["n"](Ue["p"](Ue["q"],St)),transport:Ue["n"](Ue["m"]({server:Ue["q"],setup:er,rooms:Ue["n"](Ue["p"](Ue["q"],Ue["c"](Ue["q"])))})),sent:oa,received:oa,iou:Ue["n"](Ue["p"](Ue["q"],Ue["p"](Ue["q"],Ct(ea)))),pendingTxs:Ue["o"](Fa)})),Wo=Ho;function Vo(e){return ao(Wo.encode(e),void 0,2)}function Ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=ro(e));var r=$o(e,Fo,{log:n});try{return vt(Wo,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function Go(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({address:n,version:Fo,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var Zo=Go({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0}}}),Yo=function(e){return e&&"function"===typeof e.getItem},Xo=function(e,t,n,r,a){return qo(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,d,f,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Yo(r)?(u=r,l=void 0):Yo(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=Ko(l,{log:i})),!u){o.next=23;break}return f="raiden_".concat(on(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(f);case 8:if(b=o.sent,!b){o.next=20;break}if(m=Ko(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new pt(dt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Be()((function(e){u.setItem(f,Vo(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=Go({network:e,address:n,contractsInfo:t})),v=pn({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},Qo=n("0f19"),zo=n.n(Qo);function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),Jo({},o,s)))}}return r}}var ti=n("676b"),ni=n("7a2d"),ri=n("58ce"),ai=n("578c"),oi=n("6973");function ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ci(e,t){return fi(e)||di(e,t)||ui(e,t)||si()}function si(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ui(e,t){if(e){if("string"===typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function di(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fi(e){if(Array.isArray(e))return e}function pi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(ai["a"])())}}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(ai["a"])(),Object($["a"])((function(e){return Object(ri["a"])(e)})),Object(oi["a"])((function(t,n){var r=t.acc,a=ci(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),ii({},o,i)),changed:[o,i]}}),{acc:{}}),Object(q["a"])("changed"),Object(M["a"])(gt))}}function yi(e,t){return vi(e)||hi(e,t)||wi(e,t)||mi()}function mi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vi(e){if(Array.isArray(e))return e}function gi(e){return ki(e)||_i(e)||wi(e)||Oi()}function Oi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wi(e,t){if(e){if("string"===typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ji(e,t):void 0}}function _i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ki(e){if(Array.isArray(e))return ji(e)}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ei(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Ti(e){return"".concat(e.id,"#").concat(Ei(e))}function Ai(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function Si(e){var t=k["Zero"];if(e.state!==so.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,ownOnchainUnlocked:t,ownUnlocked:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t,partnerOnchainUnlocked:t,partnerUnlocked:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=Ai.apply(void 0,[n].concat(gi(e.own.withdrawRequests.map((function(e){return e.total_withdraw}))))),d=Ai.apply(void 0,[r].concat(gi(e.partner.withdrawRequests.map((function(e){return e.total_withdraw}))))),f=e.own.deposit.sub(l).sub(i).add(s),p=e.partner.deposit.sub(d).sub(c).add(u),b=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),y=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),m=a.add(b),h=o.add(y);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:f,ownOnchainUnlocked:b,ownUnlocked:m,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:p,partnerOnchainUnlocked:y,partnerUnlocked:h}}function xi(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Bt["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(e){return e.wait()})),Object(B["a"])((function(n){var a,o,i;if(!n.status||!n.transactionHash||!n.blockNumber)throw new pt(t,{status:null!==(a=n.status)&&void 0!==a?a:null,transactionHash:null!==(o=n.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=n.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(n.transactionHash,'" successfuly mined!')),n})))}}function Ni(e){return e.pipe(Object(q["a"])("channels"),bi(),Object(q["a"])(1),Object(ti["a"])(Ti,void 0,void 0,(function(){return new C["a"](1)})),Object(B["a"])((function(t){var n=t.key.split("#"),r=yi(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(ni["a"])(e.pipe(Object(M["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function Ci(e){return Ci="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function Ri(e,t){return Pi(e)||Ii(e,t)||Bi(e,t)||Di()}function Di(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pi(e){if(Array.isArray(e))return e}function Ui(e){return Fi(e)||Mi(e)||Bi(e)||Li()}function Li(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bi(e,t){if(e){if("string"===typeof e)return $i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$i(e,t):void 0}}function Mi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Fi(e){if(Array.isArray(e))return $i(e)}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hi(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Wi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Vi=Ln(Zo.blockNumber).handle(Vn,(function(e,t){Hi(e);var n=t.payload;return n.blockNumber})),Ki=Ln(Zo.tokens).handle(Kn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:Object.assign(Object.assign({},e),qi({},r,a))})),Gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(Fa.is(t)){if(void 0===t.payload.confirmed)return[].concat(Ui(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},Zi={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:Hn,withdrawRequests:[],nextNonce:k["One"]};function Yi(e,t){var n,r,a=Ei(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:so.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},Zi),{address:e.address}),partner:Object.assign(Object.assign({},Zi),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},a,i))})}function Xi(e,t){var n;if(!t.payload.confirmed)return e;var r=Ei(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==so.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=Xn.is(t)?["withdraw",t.payload.totalWithdraw,a[o].withdrawRequests.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].withdrawRequests],c=Ri(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),qi({},o,Object.assign(Object.assign({},a[o]),(n={},qi(n,s,u),qi(n,"withdrawRequests",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},r,a))}))}function Qi(e,t){var n=Ei(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===so.open)r=Object.assign(Object.assign({},r),{state:so.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:so.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},n,r))})}function zi(e,t){var n=Ei(t.meta),r=e.channels[n];if(!r)return e;if(Qn.request.is(t)&&r.state===so.open)r=Object.assign(Object.assign({},r),{state:so.closing});else if(Jn.request.is(t)&&r.state===so.settleable)r=Object.assign(Object.assign({},r),{state:so.settling});else{if(!zn.is(t)||r.state!==so.closed)return e;r=Object.assign(Object.assign({},r),{state:so.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},n,r))})}function Ji(e,t){var n=Ei(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==so.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},n,Object.assign(Object.assign({},r),{state:so.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],Wi(a,["symbol"===Ci(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),qi({},Ti(r),Object.assign(Object.assign({},r),{state:so.settled,settleBlock:t.payload.txBlock})))})}return e}function ec(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=Ei({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===na.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),qi({},a,Object.assign(Object.assign({},e.channels[a]),qi({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var tc=Ln(Zo).handle(Gn.success,Yi).handle([Yn.success,Xn],Xi).handle([Qn.request,zn,Jn.request],zi).handle(Qn.success,Qi).handle(Jn.success,Ji).handle(da.success,ec),nc=ei({blockNumber:Vi,tokens:Ki,pendingTxs:Gi},Zo),rc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo,t=arguments.length>1?arguments[1]:void 0;return[nc,tc].reduce((function(e,n){return n(e,t)}),e)},ac=rc;function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e){return lc(e)||uc(e)||sc(e)||cc()}function cc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sc(e,t){if(e){if("string"===typeof e)return dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dc(e,t):void 0}}function uc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function lc(e){if(Array.isArray(e))return dc(e)}function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fc,pc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},bc=Ln(Zo.transport).handle(nr,(function(e,t){e.rooms;var n=pc(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(ar,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),oc({},t.meta.address,[t.payload.roomId].concat(ic((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(or,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),oc({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),yc=ei({transport:bc},Zo),mc=yc;function hc(e){return Oc(e)||gc(e)||kc(e)||vc()}function vc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Oc(e){if(Array.isArray(e))return jc(e)}function wc(e,t){return Tc(e)||Ec(e,t)||kc(e,t)||_c()}function _c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kc(e,t){if(e){if("string"===typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jc(e,t):void 0}}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ec(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Tc(e){if(Array.isArray(e))return e}function Ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sc=(fc={},Ac(fc,na.SENT,"own"),Ac(fc,na.RECEIVED,"partner"),fc);function xc(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=da.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),Ac({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ac({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:Nt({value:t.payload.secret,registerBlock:u})})))))),e}function Nc(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Ei({tokenNetwork:a,partner:o}),c=Sc[t.meta.direction],s=e.channels[i];if(sa.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==so.open||!n.nonce.eq(s[c].nextNonce))return e;var u=sa.is(t)?[[].concat(hc(s[c].locks),[t.payload.message.lock]),{transfer:Nt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),Ac({},ba.success.is(t)?"unlock":"lockExpired",Nt(t.payload.message)))],l=wc(u,2),d=l[0],f=l[1];return s=Object.assign(Object.assign({},s),Ac({},c,Object.assign(Object.assign({},s[c]),{locks:d,balanceProof:vo(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),Ac({channels:Object.assign(Object.assign({},e.channels),Ac({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ac({},r,f))))}function Cc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),Ac({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ac({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:Nt(t.payload.message)}))))):e}function Rc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),Ac({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ac({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:Nt(t.payload.message)})))))}function Dc(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(ua.is(t))n="transferProcessed";else if(ya.is(t))n="unlockProcessed";else if(ha.is(t))n="lockExpiredProcessed";else{if(!va.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),Ac({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),Ac({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),Ac({},n,Nt(t.payload.message)))))))}function Ic(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=wc(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),Ac({},i,Object.assign(Object.assign({},c),{channelClosed:Nt(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var f=wc(d[l],2),p=f[0],b=f[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),Ac({},p,Object.assign(Object.assign({},b),{channelClosed:Nt(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function Pc(e,t){var n=t.payload.message,r=Ei(t.meta),a=n.participant===t.meta.partner!==Oa.success.is(t)?"partner":"own",o=e.channels[r];if((null===o||void 0===o?void 0:o.state)!==so.open||!n.nonce.eq(o[a].nextNonce))return e;var i=o[a].withdrawRequests;return Oa.request.is(t)&&(i=[].concat(hc(o[a].withdrawRequests),[t.payload.message])),o=Object.assign(Object.assign({},o),Ac({},a,Object.assign(Object.assign({},o[a]),{withdrawRequests:i,nextNonce:o[a].nextNonce.add(1)}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ac({},r,o))})}function Uc(e,t){var n=Ei(t.meta),r=t.payload.participant===t.meta.partner?"partner":"own",a=e.channels[n];if((null===a||void 0===a?void 0:a.state)!==so.open)return e;var o=a[r].withdrawRequests.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return a=Object.assign(Object.assign({},a),Ac({},r,Object.assign(Object.assign({},a[r]),{withdrawRequests:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),Ac({},n,a))})}var Lc=Ln(Zo).handle([la,da.success],xc).handle([sa,ba.success,ma.success],Nc).handle([ua,ya,ha,va],Dc).handle(fa,Cc).handle(pa,Rc).handle(Qn.success,Ic).handle([Oa.request,Oa.success,Oa.failure],Pc).handle(wa,Uc),Bc=Lc;function Mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fc=Ln(Zo.iou).handle(Ta,(function(e,t){return Object.assign(Object.assign({},e),Mc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),Mc({},t.meta.serviceAddress,t.payload.iou))))})).handle(Aa,(function(e,t){return zo()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),$c=ei({iou:Fc},Zo),qc=$c;function Hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wc(e,t){return Yc(e)||Zc(e,t)||Kc(e,t)||Vc()}function Vc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kc(e,t){if(e){if("string"===typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gc(e,t):void 0}}function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Yc(e){if(Array.isArray(e))return e}var Xc=Ln(Zo).handle(Pa,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=Wc(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),Hc({},c,s)):c in r&&(r=zo()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),Qc={configReducer:Xc,channelsReducer:ac,transportReducer:mc,transfersReducer:Bc,servicesReducer:qc},zc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo,t=arguments.length>1?arguments[1]:void 0;return Object.values(Qc).reduce((function(e,n){return n(e,t)}),e)},Jc=n("c3a8"),es=n("a7df"),ts=n("2786"),ns=n("0f90"),rs=n.n(ns),as=n("e22d"),os=n.n(as);function is(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=us(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function cs(e,t){return fs(e)||ds(e,t)||us(e,t)||ss()}function ss(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function us(e,t){if(e){if("string"===typeof e)return ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ls(e,t):void 0}}function ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ds(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fs(e){if(Array.isArray(e))return e}function ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bs=N()((function(e){return e.pipe(Object(M["a"])(rr.success.is),Object(oi["a"])((function(e,t){return Object.assign(Object.assign({},e),ps({},t.meta.address,t))}),{}),Object(Mt["a"])(),Object(Jc["a"])({}))}));function ys(e){return Object.entries(e).filter((function(e){var t=cs(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=cs(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function ms(e){var t;if(e){var n={};try{var r,a=is(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var hs,vs=n("1918"),gs=n("9a82"),Os=n("5964"),ws=n("c456"),_s=n("02ec"),ks=n("8cbce"),js=n("884b"),Es=n("3a07"),Ts=n("b215"),As=n("87ed"),Ss=n("571d"),xs=n("3dc8"),Ns=n("0bb0"),Cs=n("73b4"),Rs=n("aa15"),Ds=n.n(Rs),Is=n("3de0"),Ps=n("7a10");function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t){return Fs(e)||Ms(e,t)||qs(e,t)||Bs()}function Bs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ms(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fs(e){if(Array.isArray(e))return e}function $s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qs(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function qs(e,t){if(e){if("string"===typeof e)return Hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hs(e,t):void 0}}function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ws(e){var t,n=[],r=$s(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(eo(a.expiration,32),eo(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(Xa["concat"])(n))}function Vs(e){return Object(_["sha256"])(e)}function Ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(Xa["hexlify"])(Object(_["randomBytes"])(e))}function Gs(){return Object(_["bigNumberify"])(Date.now())}function Zs(){return Object(_["bigNumberify"])(Date.now())}function Ys(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?na.SENT:na.RECEIVED}function Xs(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(Ys(e),":").concat(e.transfer[1].lock.secrethash)}var Qs=new RegExp("^(".concat(Object.values(na).join("|"),"):0x[a-z0-9]{64}$"),"i");function zs(e){bt(Qs.test(e),"Invalid transferKey format");var t=e.split(":"),n=Ls(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function Js(e){return function(t){return t[e]?t[e][0]:void 0}}var eu=(hs={},Us(hs,cr.expired,Js("lockExpiredProcessed")),Us(hs,cr.unlocked,Js("unlockProcessed")),Us(hs,cr.expiring,Js("lockExpired")),Us(hs,cr.unlocking,Js("unlock")),Us(hs,cr.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),Us(hs,cr.revealed,Js("secretReveal")),Us(hs,cr.requested,Js("secretRequest")),Us(hs,cr.closed,Js("channelClosed")),Us(hs,cr.refunded,Js("refund")),Us(hs,cr.received,Js("transferProcessed")),Us(hs,cr.pending,Js("transfer")),hs);function tu(e){for(var t,n,r,a,o,i,c=new Date(e.transfer[0]),s=c,u=cr.pending,l=0,d=Object.entries(eu);l<d.length;l++){var f=Ls(d[l],2),p=f[0],b=f[1],y=b(e);if(void 0!==y){u=p,s=new Date(y);break}}var m=e.transfer[1],h=Ys(e),v=m.lock.amount.sub(e.fee),g=e.secretRequest&&e.secretRequest[1].amount.lt(v),O=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(g||e.refund||e.lockExpired||e.channelClosed)&&void 0,w=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:Xs(e),secrethash:m.lock.secrethash,direction:h,status:u,initiator:m.initiator,partner:e.partner,target:m.target,metadata:m.metadata,paymentId:m.payment_identifier,chainId:m.chain_id.toNumber(),token:m.token,tokenNetwork:m.token_network_address,channelId:m.channel_identifier,value:v,fee:e.fee,amount:m.lock.amount,expirationBlock:m.lock.expiration.toNumber(),startedAt:c,changedAt:s,success:O,completed:w,secret:null===(i=null===(o=e.secret)||void 0===o?void 0:o[1])||void 0===i?void 0:i.value}}function nu(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return Hn;var c,s=$s(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(gt).map(vo).find((function(e){return po(e)===t}));if(l)return l}}}catch(d){s.e(d)}finally{s.f()}}var ru=n("a0df"),au=n("31a7"),ou=n("c998"),iu=n("ee79"),cu=n("b4cc"),su=n("0ff6"),uu=n("4e0b"),lu=n("1f0b");function du(e,t){return bu(e)||pu(e,t)||hu(e,t)||fu()}function fu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bu(e){if(Array.isArray(e))return e}function yu(e){return gu(e)||vu(e)||hu(e)||mu()}function mu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hu(e,t){if(e){if("string"===typeof e)return Ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ou(e,t):void 0}}function vu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gu(e){if(Array.isArray(e))return Ou(e)}function Ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _u=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ku=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},au.contracts),su.contracts);case"ropsten":return Object.assign(Object.assign({},ru.contracts),cu.contracts);case"goerli":return Object.assign(Object.assign({},ou.contracts),uu.contracts);case"homestead":return Object.assign(Object.assign({},iu.contracts),lu.contracts);default:throw new pt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function ju(e,t){var n,r;return _u(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(on(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(_["sha256"])(c),u=new Ps["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Eu=function(e,t,n){return _u(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!Is["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof Ps["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new pt(dt.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!St.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new pt(dt.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!At.is(e)){r.next=37;break}a=new Ps["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new pt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=ju,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},Tu=function(e){return e.pipe(Object($["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),bi(),Object(q["a"])(1),Object(B["a"])(tu))},Au=function(e){return Object.values(e).reduce((function(e,t){var n=Si(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),wu({},t.token,Object.assign(Object.assign({},e[t.token]),wu({},t.partner.address,c))))}),{})};function Su(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function xu(e,t){return e.signer===t?e:e.connect(t)}function Nu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return _u(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,yu(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new pt(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,bt(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new pt(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function Cu(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return _u(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(pi("state","blockNumber"),Object(Ts["a"])(a),Object(M["a"])((function(e){var t=du(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(Es["a"])((function(e){var t=du(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new pt(dt.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(gt)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var Ru=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function Du(e){return Uu(e)||Pu(e)||Mu(e)||Iu()}function Iu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Uu(e){if(Array.isArray(e))return Fu(e)}function Lu(e,t){return qu(e)||$u(e,t)||Mu(e,t)||Bu()}function Bu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mu(e,t){if(e){if("string"===typeof e)return Fu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fu(e,t):void 0}}function Fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $u(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qu(e){if(Array.isArray(e))return e}function Hu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Wu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(P["a"])(e).pipe(Object(_s["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(vs["a"])(t):Object(gs["a"])(e)})))})))}var Vu=function(e,t,n){Hu(e),Hu(t);var r=n.provider;return Wu((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),en(r,"block"))})),Object(B["a"])((function(e){return Vn({blockNumber:e})})))},Ku=function(e,t,n){Hu(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(ks["a"])(1),Object(M["a"])((function(e){return Ds()(e.tokens)})),Object($["a"])((function(){return Wu((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object($["a"])(Pt["a"]),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(M["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Os["a"])(Wu((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Pt["a"])),Wu((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Pt["a"]))).pipe(Object(ks["a"])(1),Object(js["a"])(Kn({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},Gu=function(e,t,n){Hu(e),Hu(t);var r=n.address,a=n.network,o=n.provider;return Wu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(ws["a"])(o.pollingInterval).pipe(Object(Es["a"])((function(){return Object(I["a"])(e?Wu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(D["a"])(Ia({reason:Re.ACCOUNT_CHANGED}))}))):U["a"],Wu((function(){return rn(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(Ia({reason:Re.NETWORK_CHANGED})):U["a"]}))))})))})))};function Zu(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function Yu(e,t){var n=Lu(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=Zu(s),l=u.openTopic,d=u.depositTopic,f=u.withdrawTopic,p=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Ts["a"])(i),Object(B["a"])((function(e){var t,n,i,c,s=Lu(e,2),u=s[0],y=s[1],m=y.state,h=y.config,v=u[0].toNumber(),g=Object.values(m.channels).find((function(e){return e.tokenNetwork===a&&e.id===v})),O=(null===(t=null===g||void 0===g?void 0:g.partner)||void 0===t?void 0:t.address)||(null===(n=m.pendingTxs.filter(Gn.success.is).find((function(e){return e.payload.id===v})))||void 0===n?void 0:n.meta.partner),w=u[u.length-1],_=null===(i=w.topics)||void 0===i?void 0:i[0],k=w.transactionHash,j=w.blockNumber,E=j+h.confirmationBlocks<=m.blockNumber||void 0;switch(_){case l:var T=Lu(u,4),A=T[1],S=T[2],x=T[3];if((o===A||o===S)&&(!g||v>g.id)){var N=o==A?S:A;c=Gn.success({id:v,token:r,settleTimeout:x.toNumber(),isFirstParticipant:o===A,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:N})}break;case d:var C=Lu(u,3),R=C[1],D=C[2];O&&((null===g||void 0===g?void 0:g.id)!==v||D.gt(g[R===g.partner.address?"partner":"own"].deposit))&&(c=Yn.success({id:v,participant:R,totalDeposit:D,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O}));break;case f:var I=Lu(u,3),P=I[1],U=I[2];O&&((null===g||void 0===g?void 0:g.id)!==v||U.gt(g[P===g.partner.address?"partner":"own"].withdraw))&&(c=Xn({id:v,participant:P,totalWithdraw:U,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O}));break;case p:if(O&&((null===g||void 0===g?void 0:g.id)!==v||!("closeBlock"in g))){var L=Lu(u,2),B=L[1];c=Qn.success({id:v,participant:B,txHash:k,txBlock:j,confirmed:E},{tokenNetwork:a,partner:O})}break;case b:(null===g||void 0===g?void 0:g.id)===v&&(c=Jn.success({id:v,txHash:k,txBlock:j,confirmed:E,locks:g.partner.locks},{tokenNetwork:a,partner:g.partner.address}));break}return c})),Object(M["a"])(gt))}}function Xu(e,t,n){var r=Lu(e,2),a=r[0],o=r[1],i=Lu(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,d=n.latest$,f=n.getTokenNetworkContract,p=f(s),b=Zu(p),y=b.openTopic;return Wu((function(){return Promise.all([l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,u,null,null)),{fromBlock:a,toBlock:o})),l.getLogs(Object.assign(Object.assign({},p.filters.ChannelOpened(null,null,u,null)),{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Ts["a"])(d),Object($["a"])((function(e){var t=Lu(e,2),n=Lu(t[0],2),r=n[0],i=n[1],c=t[1].state,d=r.concat(i).map(tn(p)).filter(gt).filter((function(e){var t=Lu(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Ei({tokenNetwork:s,partner:o});return!(Ti({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),f=[].concat(Du(d),Du(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=Lu(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===f.length?U["a"]:Wu((function(){return l.getLogs({address:s,topics:[Object.values(Zu(p)).filter((function(e){return e!==y})),f],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object($["a"])((function(e){var t=e.map(tn(p)).filter(gt),n=[].concat(Du(d),Du(t));return Object(Pt["a"])(qt()(n,(function(e){return e[e.length-1].blockNumber})))})))})),Yu([c,s],n))}function Qu(e,t){var n=Lu(e,2),r=n[0],a=n[1],o=t.provider,i=t.getTokenNetworkContract,c=t.config$,s=i(a),u={address:a,topics:[Object.values(Zu(s))]};return c.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.confirmationBlocks;return en(o,u,void 0,t)})),Object(B["a"])(tn(s)),Object(M["a"])(gt),Yu([r,a],t))}var zu=function(e,t,n){return e.pipe(Object(M["a"])(Vn.is),Object(q["a"])("payload","blockNumber"),Object(As["a"])(1,void 0,(function(e){return t.pipe(Object(q["a"])("tokens"),bi(),Object(Ts["a"])(t),Object($["a"])((function(t){var r=Lu(t,2),a=Lu(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number)+1,u=new R["a"];return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(I["a"])(Object(D["a"])(Kn({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),Xu([s,e],[o,i],n).pipe(Object(Ss["a"])((function(){return u.next(!0),u.complete()}))),Qu([o,i],n).pipe(Object(xs["a"])((function(){return u}))))})))})))})))},Ju=function(e,t){return Hu(e),t.pipe(Ni,Object($["a"])((function(e){return e.pipe(Object(F["a"])(),Object(B["a"])((function(e){return Zn({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},el=function(e,t,n,r,a,o){var i=Lu(e,2),c=i[0],s=i[1],u=Lu(t,3),l=u[0],d=u[1],f=u[2],p=a.log;return(null===n||void 0===n?void 0:n.gt(k["Zero"]))?Object(P["a"])((function(){return c.functions.allowance(l,s.address)})).pipe(Object($["a"])((function(e){return e.gte(n)?Object(D["a"])(!0):Object(Pt["a"])(c.functions.approve(s.address,n,{nonce:o})).pipe(xi("approve",dt.CNL_APPROVE_TRANSACTION_FAILED,{log:p}))})),Object(Ns["a"])(r),Object(ks["a"])(1),Object($["a"])((function(e){return s.functions.getChannelParticipantInfo(e,d,f).then((function(t){var n=t[0];return[e,n]}))})),Object($["a"])((function(e){var t=Lu(e,2),r=t[0],a=t[1];return s.functions.setTotalDeposit(r,d,a.add(n),f)})),xi("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:p}),Object(Cs["a"])(),Object(ts["a"])((function(e){return Object(D["a"])(Yn.failure(e,{tokenNetwork:s.address,partner:f}))}))):U["a"]},tl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(Nn(Gn.request)),Object(Ts["a"])(t,u),Object($["a"])((function(t){var n,u,l=Lu(t,3),d=l[0],f=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,m=d.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=f.channels[Ei(d.meta)])||void 0===n?void 0:n.state;if(g)return Object(D["a"])(Gn.failure(new pt(dt.CNL_INVALID_STATE,{state:g}),d.meta));var O=Su({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:y),w=O.signer,_=O.address,k=xu(s(h),w),j=He()(f.tokens,(function(e){return e===h})),E=xu(c(j),w);return e.pipe(Object(M["a"])(Gn.success.is),Object(M["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(q["a"])("payload","id"),Object(As["a"])(1,void 0,(function(e){return Object(P["a"])((function(){var e;return k.functions.openChannel(o,v,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object($["a"])((function(t){return Object(I["a"])(Object(D["a"])(t).pipe(xi("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),Object(Cs["a"])()),el([E,k],[_,o,v],d.payload.deposit,e,{log:r},t.nonce+1))})),Object(ts["a"])((function(e){return Object(D["a"])(Gn.failure(e,d.meta))})))})))})))},nl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(Nn(Yn.request)),Object(Ts["a"])(t,u),Object($["a"])((function(e){var t,n=Lu(e,3),u=n[0],l=n[1],d=n[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=Ei(u.meta),m=l.channels[y];if((null===m||void 0===m?void 0:m.state)!==so.open){var h=new pt(dt.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(D["a"])(Yn.failure(h,u.meta))}var v=Su({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:d),g=v.signer,O=v.address,w=xu(c(m.token),g),_=xu(s(p),g);return el([w,_],[O,o,b],u.payload.deposit,Object(D["a"])(m.id),{log:r})})))},rl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(Nn(Qn.request)),Object(Ts["a"])(t,u),Object($["a"])((function(e){var t,n,u=Lu(e,3),l=u[0],d=u[1],f=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=Su({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=m.signer,v=xu(s(b),h),g=d.channels[Ei(l.meta)];if((null===g||void 0===g?void 0:g.state)!==so.open&&(null===g||void 0===g?void 0:g.state)!==so.closing){var O=new pt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(D["a"])(Qn.failure(O,l.meta))}var w=g.partner.balanceProof,k=po(w),j=w.nonce,E=w.additionalHash,T=w.signature,A=Object(_["concat"])([eo(b,20),eo(c.chainId,32),eo(co.BALANCE_PROOF,32),eo(g.id,32),eo(k,32),eo(j,32),eo(E,32),eo(T,65)]);return Object(Pt["a"])(a.signMessage(A)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,k,j,E,T,e)})),xi("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(Cs["a"])(),Object(ts["a"])((function(e){return Object(D["a"])(Qn.failure(e,l.meta))})))})))},al=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(Nn(Qn.success)),Object(M["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(M["a"])(Vn.is),Object(L["a"])(1),Object(ks["a"])(1),Object(js["a"])(t))})),Object(Ts["a"])(t,u),Object(M["a"])((function(e){var t=Lu(e,2),n=t[0],r=t[1],a=r.channels[Ei(n.meta)];return(null===a||void 0===a?void 0:a.state)===so.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=Lu(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,f=d.tokenNetwork,p=d.partner,b=Su({signer:a,address:o,main:i},l),y=b.signer,m=xu(s(f),y),h=u.channels[Ei(n.meta)],v=po(h.partner.balanceProof),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,w=h.partner.balanceProof.signature,k=Object(_["concat"])([eo(f,20),eo(c.chainId,32),eo(co.BALANCE_PROOF_UPDATE,32),eo(h.id,32),eo(v,32),eo(g,32),eo(O,32),eo(w,65)]);return Object(Pt["a"])(a.signMessage(k)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,p,o,v,g,O,w,e)})),xi("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(Cs["a"])(),Object(ts["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},ol=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(M["a"])(Nn(Jn.request)),Object(Ts["a"])(t,s),Object($["a"])((function(e){var t,n,s=Lu(e,3),u=s[0],l=s[1],d=s[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=Su({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),m=y.signer,h=xu(c(p),m),v=l.channels[Ei(u.meta)];if((null===v||void 0===v?void 0:v.state)!==so.settleable&&(null===v||void 0===v?void 0:v.state)!==so.settling){var g=new pt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(D["a"])(Jn.failure(g,u.meta))}return Object(Pt["a"])(Promise.all([h.functions.getChannelParticipantInfo(v.id,o,b),h.functions.getChannelParticipantInfo(v.id,b,o)])).pipe(Object($["a"])((function(e){var t=Lu(e,2),n=t[0][3],r=t[1][3],a=v.own.balanceProof;if(n!==po(a)){var i=nu(l.sent,n,u.meta);bt(i,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),a=i}var c=v.partner.balanceProof;if(r!==po(c)){var s=nu(l.received,r,u.meta);bt(s,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:b,partnerBalanceHash:r}]),c=s}var d=[o,a],f=[b,c];if(f[1].transferredAmount.add(f[1].lockedAmount).lt(d[1].transferredAmount.add(d[1].lockedAmount))){var p=[f,d];d=p[0],f=p[1]}return h.functions.settleChannel(v.id,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot,f[0],f[1].transferredAmount,f[1].lockedAmount,f[1].locksroot)})),xi("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(Cs["a"])(),Object(ts["a"])((function(e){return Object(D["a"])(Jn.failure(e,u.meta))})))})))},il=function(e,t){return e.pipe(Object(M["a"])(Nn(Vn)),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Lu(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===so.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,zn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},cl=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(M["a"])(Nn(Jn.success)),Object(M["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Ts["a"])(t,s),Object(M["a"])((function(e){var t,n=Lu(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Ei(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=Lu(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,f=xu(c(l),Su({signer:a,address:o,main:i},s).signer),p=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(Du(e),[eo(t.expiration,32),eo(t.amount,32),t.secrethash])}),[]));return Object(Pt["a"])(f.functions.unlock(n.payload.id,o,d,p)).pipe(xi("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(Cs["a"])(),Object(ts["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function sl(e,t,n,r){return Wu((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(M["a"])(gt))}var ul=function(e,t,n){Hu(e);var r=n.config$,a=n.provider;return Object(Ut["a"])(t.pipe(pi("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(pi("confirmationBlocks"))).pipe(Object(M["a"])((function(e){var t=Lu(e,2),n=t[1];return n.length>0})),Object(Es["a"])((function(e){var t=Lu(e,3),n=t[0],r=t[1],o=t[2];return Os["a"].apply(void 0,Du(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return sl(e,a,n,o)}))))})))},ll=n("cf70"),dl=n("5f00"),fl=n("efe0"),pl=n("3276"),bl=n("5dcf"),yl=n("7546");function ml(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function hl(e,t){var n=Object(yl["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var vl=n("2322"),gl=n("1957"),Ol=n("b67e"),wl=n.n(Ol);function _l(e,t){return Al(e)||Tl(e,t)||jl(e,t)||kl()}function kl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jl(e,t){if(e){if("string"===typeof e)return El(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?El(e,t):void 0}}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Al(e){if(Array.isArray(e))return e}function Sl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function xl(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(gt)}var Nl=wl()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Cl(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Nl(t))),n?Object(D["a"])(n):Object(vl["a"])(e,"Room").pipe(Object(M["a"])(Nl(t)),Object(ks["a"])(1))}function Rl(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(M["a"])((function(t){var n=t.presences;return e in n})),Object(ks["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(M["a"])(gt),Object(ai["a"])(),Object(gl["a"])((function(n){return Cl(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(B["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(ai["a"])(),Object(B["a"])((function(e){return{room:t,userId:e}})))})),Object(gl["a"])((function(e){var n=e.room,r=e.userId;if(!r)return U["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(vl["a"])(t,"RoomMember.membership",(function(e,t){return Sl(e),t})).pipe(Object(M["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(ks["a"])(1),Object($["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(js["a"])("string"===typeof e?e:e.label),Object(_s["a"])((function(e){return e.pipe(Object(Ts["a"])(c),Object($["a"])((function(e,t){var n=_l(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(vs["a"])(a/u)):Object(gs["a"])(r)})))})))})))}function Dl(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Oo(e);if("signature"in a){var o=ho(a);if(o!==t)throw new pt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function Il(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Pl(e,t){return Fl(e)||Ml(e,t)||Ll(e,t)||Ul()}function Ul(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ll(e,t){if(e){if("string"===typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ml(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fl(e){if(Array.isArray(e))return e}var $l=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ql="RAIDEN";function Hl(e,t){var n=ml(t.getHomeserverUrl());return Object(Pt["a"])(xl(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(q["a"])("roomId"),Object(Ft["a"])())}function Wl(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function Vl(e,t,n,r){return e.pipe(Object(M["a"])(nr.is),Object(ks["a"])(1),Object(Bt["a"])((function(){n.next(t),n.complete()})),Object(ll["a"])(1e3),Object(Ts["a"])(r),Object($["a"])((function(e){var n=Pl(e,2),r=n[1];return Hl(r,t).pipe(Object($["a"])((function(e){return Wl(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(Cs["a"])())}function Kl(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Gl(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object(bl["a"])(e+"/_matrix/client/versions").pipe(Object(dl["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(ts["a"])((function(){return Object(D["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Zl(e,t){var n=this;return Object(bl["a"])(e).pipe(Object($["a"])((function(t){return $l(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(dl["a"])(t),Object($["a"])((function(e){return Kl(e)})),Object($["a"])((function(e){return Gl(e,t)})),Object(Ft["a"])(),Object($["a"])((function(e){return qt()(e,["rtt"])})),Object(M["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(fl["a"])((function(){return new pt(dt.TRNS_NO_MATRIX_SERVERS)})))}function Yl(e,t,n,r){var a=n.address,o=n.signer,i=ml(e);if(!i)throw new pt(dt.TRNS_NO_SERVERNAME,{server:e});return Object(P["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(Pt["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(Pt["a"])(r.login("m.login.password",{user:c,password:e,device_id:ql})).pipe(Object(ts["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(Pt["a"])(o.signMessage(s)).pipe(Object(B["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(Pt["a"])(t.setDisplayName(a.displayName)),Object(Pt["a"])(t.setAvatarUrl(r&&!Ds()(r)?ys(r):""))).pipe(Object(js["a"])({matrix:t,server:n,setup:a}))})))}var Xl=function(e,t,n){Il(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(Ut["a"])([i,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=Pl(e,2),o=n[0].state,i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,d=o.transport.server,f=o.transport.setup,p=[];c?(c===d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(Object(D["a"])({server:c}))):(d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(Zl(s,u)));var b=function(e){return t=e,U["a"]};return Object(P["a"])((function(){return p.shift()||U["a"]})).pipe(Object(ts["a"])(b),Object(pl["a"])((function(e){var t=e.server,n=e.setup;return Yl(t,n,{address:r,signer:a},l).pipe(Object(ts["a"])(b))})),Object(F["a"])(),Object(Bt["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(_s["a"])((function(e){return e.pipe(Object($["a"])((function(){return p.length?Object(D["a"])(null):Object(gs["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(Vl(e,n,o,c),Object(D["a"])(nr({server:r,setup:a})),c.pipe(pi("logger"),Object(Bt["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(Cs["a"])()))})))},Ql=function(e,t,n){Il(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Ss["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(Cs["a"])())},zl=n("58fc"),Jl=n.n(zl);function ed(e,t){return rd(e)||nd(e,t)||id(e,t)||td()}function td(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rd(e){if(Array.isArray(e))return e}function ad(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function od(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=id(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function id(e,t){if(e){if("string"===typeof e)return cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cd(e,t):void 0}}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ud=["online","unavailable"],ld=/^@(0x[0-9a-f]{40})[.:]/i;function dd(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=od(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=ld.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return hl(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(M["a"])(gt),Object(Ft["a"])(),Object(B["a"])((function(e){if(!e.length)throw new pt(dt.TRNS_NO_VALID_USER,{address:t});return Jl()(e,"last_active_ago")})))}var fd=function(e,t,n){ad(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(M["a"])(Nn(rr.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ti["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Ts["a"])(a.pipe(pi("presences"))),Object(Es["a"])((function(e){var t=ed(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):dd(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return rr.success({userId:n,available:ud.includes(t),ts:Date.now(),caps:ms(a)},r.meta)})),Object(ts["a"])((function(e){return Object(D["a"])(rr.failure(e,r.meta))})))})))})))},pd=function(e,t,n){ad(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(gl["a"])((function(e){return Object(vl["a"])(e,"event").pipe(Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(M["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(B["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{bt(null===a||void 0===a?void 0:a.presence);var o=null===(t=ld.exec(a.userId))||void 0===t?void 0:t[1];bt(o);var i=Object(_["getAddress"])(o);return bt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(M["a"])(gt),Object(Ts["a"])(e.pipe(Object(M["a"])(rr.request.is),Object(oi["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(Jc["a"])(new Set))),Object(M["a"])((function(e){var t=ed(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=ed(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=ud.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(B["a"])((function(e){var t;bt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(c,e.displayname);return bt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),rr.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:ms(e.avatar_url)},{address:n})})),Object(ts["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),U["a"]})))}))).pipe(Object(Ts["a"])(o),Object(M["a"])((function(e){var t=ed(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},bd=function(e){return e.pipe(Object(M["a"])(Zn.is),Object(B["a"])((function(e){return rr.request(void 0,{address:e.meta.partner})})))},yd=function(e,t,n){ad(e),ad(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(q["a"])("caps"),Object(ai["a"])(os.a),Object(L["a"])(1),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return[e,t]})))})),Object($["a"])((function(e){var t=ed(e,2),n=t[0],r=t[1];return sd(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!Ds()(n)?ys(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(Cs["a"])())},md=n("5ac0"),hd=n("2688"),vd=n("9665"),gd=n.n(vd);function Od(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=jd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function wd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _d(e,t){return Ad(e)||Td(e,t)||jd(e,t)||kd()}function kd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jd(e,t){if(e){if("string"===typeof e)return Ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ed(e,t):void 0}}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Td(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ad(e){if(Array.isArray(e))return e}var Sd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function xd(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(vl["a"])(e,"Room").pipe(Object(M["a"])((function(e){return e.roomId===t})),Object(ks["a"])(1))})).pipe(Object(M["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Ts["a"])(r),Object($["a"])((function(r){var a=_d(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(md["a"])((function(e){return e.pipe(Object(ll["a"])(i))})),Object(ni["a"])(Object(vl["a"])(e,"RoomMember.membership",(function(e,t){return wd(e),t})).pipe(Object(M["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var Nd=function(e,t,n){wd(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(M["a"])(Nn([sa,Zn,Kr.request,or])),Object(B["a"])((function(e){var t;switch(e.type){case sa.type:e.meta.direction===na.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===na.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Zn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(M["a"])(gt),Object(ti["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(Es["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(M["a"])((function(e){var n=e.presences;return t in n})),Object(ks["a"])(1),Object(M["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(B["a"])((function(e){var n=e.room_id;return ar({roomId:n},{address:t})})),Object(ts["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},Cd=function(e,t,n){wd(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(M["a"])(Nn(rr.success)),Object(ti["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Ts["a"])(r),Object(gl["a"])((function(e){var t=_d(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(B["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(ai["a"])(),Object(gl["a"])((function(e){return Object(Os["a"])(Object(D["a"])(e),e?Object(vl["a"])(r,"RoomMember.membership",(function(e,t){return wd(e),t})).pipe(Object(M["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(js["a"])(e)):U["a"])})),Object(gl["a"])((function(e){return e?xd(r,e,n.payload.userId,a,{log:i}):U["a"]}))):U["a"]})))})),Object(Cs["a"])())},Rd=function(e,t,n){wd(e),wd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(gl["a"])((function(e){return Object(vl["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(M["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Ts["a"])(o),Object($["a"])((function(e){var t=_d(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(pi("presences"),Object(B["a"])((function(e){return gd()(e,(function(e){return e.payload.userId===s}))})),Object(M["a"])(gt),Object(ks["a"])(1),Object(ni["a"])(Object(vs["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Pt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(js["a"])(ar({roomId:n.roomId},{address:a.meta.address})),Object(ts["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},Dd=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(M["a"])(Nn(ar)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ts["a"])(t,o),Object($["a"])((function(e){var t,n,a=_d(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Pt["a"])(l.filter((function(e,t){return wd(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return or({roomId:e},i.meta)})))})))},Id=function(e,t,n){wd(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(gl["a"])((function(e){return Object(vl["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,room:t}})))})),Object(xs["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(vs["a"])(t)})))})),Object(Ts["a"])(t,o),Object(M["a"])((function(e){var t,n=_d(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=ml(a.getHomeserverUrl());if(xl(c).some((function(e){return Nl("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var d,f=l[u],p=Od(f);try{for(p.s();!(d=p.n()).done;){var b=d.value;if(b===o.roomId)return!1}}catch(y){p.e(y)}finally{p.f()}}return!0})),Object($["a"])((function(e){var t=_d(e,1),n=t[0],a=n.matrix,o=n.room;return Sd(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o.roomId),e.abrupt("return",a.leave(o.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(Cs["a"])())},Pd=function(e,t,n){wd(e);var r=n.log,a=n.matrix$;return a.pipe(Object(gl["a"])((function(e){return Object(vl["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(M["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=_d(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=_d(s[c],2),l=u[0],d=u[1],f=Od(d),e.prev=5,f.s();case 7:if((b=f.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,or({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Ud=function(e,t,n){wd(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(pi("transport","rooms"),Object(M["a"])(gt),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=_d(r[n],2),o=a[0],i=a[1],c=Od(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(hd["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Ts["a"])(o),Object($["a"])((function(e){var t=_d(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return Cl(i,a).pipe(Object(dl["a"])(c),Object(Cs["a"])(),Object(ts["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(or({roomId:a},{address:o}))})))})))},Ld=function(e,t){return e.pipe(Object(M["a"])(Zr.is),Object(Ts["a"])(t),Object(M["a"])((function(e){var t,n,r=_d(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=_d(e,1),n=t[0];return ar({roomId:n.payload.roomId},n.meta)})))};function Bd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fd(e,t,n){return t&&Md(e.prototype,t),n&&Md(e,n),e}var $d=function(){function e(t){Bd(this,e),this.values=new Map,this.max=t}return Fd(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function qd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Vd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Hd(e,t){return Zd(e)||Gd(e,t)||Vd(e,t)||Wd()}function Wd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vd(e,t){if(e){if("string"===typeof e)return Kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kd(e,t):void 0}}function Kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zd(e){if(Array.isArray(e))return e}function Yd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Xd=function(e,t,n){Yd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(M["a"])(Nn(Kr.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(ti["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(pl["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:go(t.payload.message),c={body:a,msgtype:"m.text"};return Rl(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(js["a"])(Kr.success(void 0,t.meta)),Object(ts["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(Kr.failure(e,t.meta))})))})))})))},Qd=function(e,t,n){Yd(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(M["a"])(Nn(Gr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ts["a"])(o),Object($["a"])((function(e){var t=Hd(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=xl(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=ml(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return Cl(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:go(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(ts["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(Cs["a"])())},zd=function(e,t,n){Yd(e),Yd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(gl["a"])((function(e){return Object(vl["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Ts["a"])(o),Object(M["a"])((function(e){var t,n,r=Hd(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!xl(s).some((function(e){return Nl("#".concat(e,":").concat(ml(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=Hd(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(M["a"])((function(e){var t,n,r=e.presences,i=e.state,c=gd()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(ks["a"])(1),Object(ni["a"])(Object(vs["a"])(c)),Object($["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=gd()(n,["payload.userId",a.getSender()]),s=qd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=Dl(l,c.meta.address,{log:r}),e.next=10,Zr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Jd=function(e,t,n){Yd(t);var r=n.log,a=n.signer,o=n.latest$,i=new $d(32);return e.pipe(Object(M["a"])(_o([Ct(fr),Ct(br),Ct(mr)])),Object(Ts["a"])(o),Object(M["a"])((function(e){var t,n=Hd(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[De.NO_DELIVERY])})),Object(pl["a"])((function(e){var t=Hd(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(Kr.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Bn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Pt["a"])(wo(a,s,{log:r})).pipe(Object(Bt["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return Kr.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},ef=n("e11d"),tf=n("475d");function nf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function rf(e,t){return cf(e)||of(e,t)||lf(e,t)||af()}function af(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function of(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cf(e){if(Array.isArray(e))return e}function sf(e){return ff(e)||df(e)||lf(e)||uf()}function uf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lf(e,t){if(e){if("string"===typeof e)return pf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pf(e,t):void 0}}function df(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ff(e){if(Array.isArray(e))return pf(e)}function pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bf=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},yf=new WeakMap;function mf(e){return bf(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=yf.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),yf.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function hf(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function vf(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(vl["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(xs["a"])((function(){return n})),Object(es["a"])(gt),Object(ef["a"])(10),Object(M["a"])((function(e){return e.length>0})),Object(Bt["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return Rl(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(vl["a"])(t,"event").pipe(Object(M["a"])(hf("m.call.candidates",i,o)),Object(Bt["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(Pt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(ts["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(Cs["a"])())}function gf(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,f=a.config$;return Object(Pt["a"])(mf(e)).pipe(Object($["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(sf(r),sf(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(vf(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object($["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(vl["a"])(e,"event").pipe(Object(M["a"])(hf("m.call.answer",s,c,o))),Rl(u,e,"m.call.invite",n,{log:l,latest$:d,config$:f}).pipe(Object(Bt["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(Cs["a"])()))})),Object(ks["a"])(1),Object(Bt["a"])((function(){return l.info("RTC: got answer",c)})),Object(B["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(Cs["a"])()),Object(D["a"])(b))})))}function Of(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(vl["a"])(e,"event").pipe(Object(M["a"])(hf("m.call.invite",c,i,o)),Object(Bt["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(Pt["a"])(mf(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(Ts["a"])(d),Object($["a"])((function(r){var c=rf(r,2),f=rf(c[0],2),p=f[0],b=f[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(sf(b),sf(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(vf(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return Rl(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(Bt["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(Cs["a"])()),Object(vl["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(ks["a"])(1))}function wf(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(vl["a"])(t,"close").pipe(Object(Bt["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(Cs["a"])()),Object(vl["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(gs["a"])(e.error)}))),Object(vl["a"])(t,"open").pipe(Object(ks["a"])(1),Object(dl["a"])(c/3),Object(Bt["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(js["a"])(ir(t,{address:i}))),Object(vl["a"])(t,"message").pipe(Object(Bt["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(M["a"])((function(e){return"string"===typeof e})),Object(B["a"])((function(e){return Zr({text:e,message:Dl(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Ss["a"])((function(){return t.close()})))})),Object(ni["a"])(e),Object(ts["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),U["a"]})),Object(tf["a"])(ir(void 0,{address:i})))}}function _f(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(ai["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Ts["a"])(i,c),Object(M["a"])((function(e){var t,n=rf(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[De.WEBRTC])&&!!(null===a||void 0===a?void 0:a[De.WEBRTC])})),Object(gl["a"])((function(t){var n=rf(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(ir(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=d.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new R["a"],p=new R["a"];return t=f?gf(s,a,n,u,l):Of(s,a,n,u,l),p.pipe(Object($["a"])((function(){return Rl(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(ni["a"])(Object(vs["a"])(u.httpTimeout/10)))})),Object(ni["a"])(e.pipe(Object(M["a"])(Ia.is)))).subscribe(),Object(I["a"])(t,Object(vl["a"])(s,"event").pipe(Object(M["a"])(hf("m.call.hangup",n.peerId,d)),Object(Ns["a"])(Object(gs["a"])(new Error("RTC: peer hung up"))))).pipe(wf(p,n,u,l))})).pipe(Object(md["a"])((function(e){return e.pipe(Object(Ts["a"])(o,c),Object($["a"])((function(e){var t,n,r=rf(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(vs["a"])(o/10):Object(D["a"])(null):U["a"]})))})))})))}var kf=function(e,t,n){return nf(t),e.pipe(Object(M["a"])(rr.success.is),Object(ti["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return _f(e,t,n)})))};function jf(e,t){return xf(e)||Sf(e,t)||Tf(e,t)||Ef()}function Ef(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tf(e,t){if(e){if("string"===typeof e)return Af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Af(e,t):void 0}}function Af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xf(e){if(Array.isArray(e))return e}var Nf=function(e,t,n){var r=n.address;return e.pipe(Object(M["a"])(Nn([Qn.request,Qn.success])),Object(Ts["a"])(t),Object($["a"])((function(e){var t=jf(e,2),n=t[0],a=t[1];return Object(Pt["a"])(Object.entries(a.sent)).pipe(Object(M["a"])((function(e){var t=jf(e,2),a=jf(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(B["a"])((function(e){var t,n,r,a,o=jf(e,2),i=o[0],c=o[1],s={secrethash:i,direction:na.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?ca.success({balanceProof:vo(c.unlock[1])},s):ca.success({},s):ca.failure(new pt(dt.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(M["a"])(gt))})))};function Cf(e,t,n){return Object(I["a"])(e.pipe(Object(M["a"])(n),Object(ks["a"])(1),Object(Cs["a"])()),Object(D["a"])(t))}function Rf(e,t){return Lf(e)||Uf(e,t)||If(e,t)||Df()}function Df(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function If(e,t){if(e){if("string"===typeof e)return Pf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pf(e,t):void 0}}function Pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Lf(e){if(Array.isArray(e))return e}function Bf(e,t,n,r){var a=n.confirmationBlocks;return Object(Pt["a"])(Object.entries(t.sent)).pipe(Object(M["a"])((function(e){var t,n,o=Rf(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=Rf(t,2),r=n[0],a=n[1],o={secrethash:r,direction:na.SENT};return Object(I["a"])(Cf(e,ma.request(void 0,o),In(ma,o)),Object(D["a"])(ca.failure(new pt(dt.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var Mf=function(e,t,n){var r=n.config$;return e.pipe(Object(M["a"])(Nn(Vn)),Object(Ts["a"])(t,r),Object(Es["a"])((function(t){var n=Rf(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return Bf(e,a,o,r)})))};function Ff(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function $f(e,t){return Wf(e)||Hf(e,t)||Gf(e,t)||qf()}function qf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wf(e){if(Array.isArray(e))return e}function Vf(e){return Yf(e)||Zf(e)||Gf(e)||Kf()}function Kf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gf(e,t){if(e){if("string"===typeof e)return Xf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xf(e,t):void 0}}function Zf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Yf(e){if(Array.isArray(e))return Xf(e)}function Xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qf(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return bt(n.length===e.locks.length-1,"invalid locks size"),n}function zf(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function Jf(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),U["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,f=t.payload.paths[0].path[0],b=e.channels[Ei({tokenNetwork:t.payload.tokenNetwork,partner:f})];bt((null===b||void 0===b?void 0:b.state)===so.open,"not open"),bt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(d),expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},m=Ws([].concat(Vf(b.own.locks),[y]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",b.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var h={type:Bn.LOCKED_TRANSFER,message_identifier:Zs(),chain_id:Object(_["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(b.id),nonce:b.own.nextNonce,transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:m,payment_identifier:t.payload.paymentId,token:b.token,recipient:f,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Pt["a"])(wo(u,h,{log:i})).pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,sa({message:n,fee:d,partner:f},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,la({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function ep(e,t,n){return Object(Ut["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=$f(e,2),a=r[0],o=r[1];return Jf(a,t,o,n)})),Object(ts["a"])((function(e){return Object(D["a"])(ca.failure(e,t.meta))})))}function tp(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;bt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=t.sent[i].partner,l=t.channels[Ei({tokenNetwork:s.token_network_address,partner:u})];if(bt((null===l||void 0===l?void 0:l.state)===so.open,"channel not open"),t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{bt(t.sent[i].secret,"unknown secret"),bt(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var d={type:Bn.UNLOCK,message_identifier:Zs(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:l.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:Ws(Qf(l.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Pt["a"])(wo(o,d,{log:a}))}return c.pipe(Object(Ts["a"])(e),Object(B["a"])((function(e){var t=$f(e,2),r=t[0],a=t[1];return bt(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),bt(!a.sent[i].channelClosed,"channel closed!"),ba.success({message:r,partner:u},n.meta)})))}function np(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return tp(e,n,t,{log:a,signer:r})})),Object(ts["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(ba.failure(e,t.meta))})))}function rp(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;bt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[Ei({tokenNetwork:c.token_network_address,partner:s})];if(bt((null===u||void 0===u?void 0:u.state)===so.open,"channel not open"),e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{bt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),bt(!e.sent[o].unlock,"transfer already unlocked");var l=Ws(Qf(u.own,o)),d={type:Bn.LOCK_EXPIRED,message_identifier:Zs(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:u.own.nextNonce,transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(Pt["a"])(wo(r,d,{log:a}))}return i.pipe(Object(B["a"])((function(e){return ma.success({message:e,partner:s},t.meta)})))}function ap(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return rp(e,t,{signer:a,log:r})})),Object(ts["a"])((function(e){return Object(D["a"])(ma.failure(e,t.meta))})))}function op(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:na.RECEIVED};return Object(Ut["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=$f(e,2),c=n[0],l=n[1],d=l.revealTimeout,f=l.caps,b=t.payload.message;if(s in c.received){a.warn("transfer already present",t.meta);var y=b.message_identifier;return c.received[s].partner===t.meta.address&&c.received[s].transfer[1].message_identifier.eq(y)?Object(D["a"])(ua({message:c.received[s].transferProcessed[1]},u)):U["a"]}var m=b.token_network_address,h=t.meta.address,v=c.channels[Ei({tokenNetwork:m,partner:h})];bt((null===v||void 0===v?void 0:v.state)===so.open,"channel not open"),bt(b.chain_id.eq(o.chainId),"chainId mismatch"),bt(b.channel_identifier.eq(v.id),"channelId mismatch"),bt(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=[].concat(Vf(v.partner.locks),[b.lock]),O=Ws(g);bt(b.locksroot===O,"locksroot mismatch"),bt(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),bt(b.locked_amount.eq(zf(g)),"lockedAmount mismatch");var w=Si(v).partnerCapacity;bt(b.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),bt(b.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",b.lock.amount.toString(),"of token",v.token,", from",b.initiator,", through partner",h);var _=Object(D["a"])(void 0);!(null===f||void 0===f?void 0:f[De.NO_RECEIVE])&&b.target===r&&b.lock.expiration.sub(d).gt(c.blockNumber)&&(_=Object(P["a"])((function(){var e={type:Bn.SECRET_REQUEST,payment_identifier:b.payment_identifier,secrethash:s,amount:b.lock.amount,expiration:b.lock.expiration,message_identifier:Zs()};return wo(i,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:Bn.PROCESSED,message_identifier:b.message_identifier};return wo(i,e,{log:a})}));return Object(Ut["a"])([j,_]).pipe(Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=$f(t,2),r=n[0],a=n[1],e.next=3,sa({message:b,fee:k["Zero"],partner:h},u);case 3:return e.next=5,ua({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,rr.request(void 0,{address:b.initiator});case 8:return e.next=10,fa({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(ts["a"])((function(e){return Object(D["a"])(ca.failure(e,u))})))}function ip(e,t,n){var r=n.log,a=n.network,o=n.signer,i=Vs(t.payload.message.secret),c={secrethash:i,direction:na.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return U["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(bt(u===n.partner,"wrong partner"),bt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(D["a"])(ya({message:n.unlockProcessed[1]},c)):U["a"];var l=n.transfer[1];bt(s.token_network_address===l.token_network_address,"wrong tokenNetwork");var d=s.token_network_address,f=e.channels[Ei({tokenNetwork:d,partner:u})];bt((null===f||void 0===f?void 0:f.state)===so.open,"channel not open"),bt(s.chain_id.eq(a.chainId),"chainId mismatch"),bt(s.channel_identifier.eq(f.id),"channelId mismatch"),bt(s.nonce.eq(f.partner.nextNonce),"nonce mismatch");var b=l.lock.amount,y=Qf(f.partner,i);bt(s.locksroot===Ws(y),"locksroot mismatch"),bt(s.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(b)),"transferredAmount mismatch"),bt(s.locked_amount.eq(zf(y)),"lockedAmount mismatch");var m={type:Bn.PROCESSED,message_identifier:s.message_identifier};return Object(Pt["a"])(wo(o,m,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,la({secret:s.secret},c);case 2:return e.next=4,ba.success({message:s,partner:u},c);case 4:return e.next=6,ya({message:t},c);case 6:return e.next=8,ca.success({balanceProof:vo(s)},c);case 8:case"end":return e.stop()}}),e)}))))})),Object(ts["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(ba.failure(e,c))})))}function cp(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:na.RECEIVED};return Object(Ut["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=$f(e,2),l=u[0],d=u[1].confirmationBlocks;if(!(c in l.received))return U["a"];var f=l.received[c],b=t.payload.message,y=t.meta.address;if(bt(y===f.partner,"wrong partner"),bt(!f.unlock,"transfer unlocked"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(D["a"])(ha({message:f.lockExpiredProcessed[1]},s)):U["a"];var m=f.transfer[1];bt(m.lock.expiration.add(d).lte(l.blockNumber),"expiration block not confirmed yet"),bt(!(null===(i=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered onchain"),bt(b.token_network_address===m.token_network_address,"wrong tokenNetwork");var h=b.token_network_address,v=l.channels[Ei({tokenNetwork:h,partner:y})];bt((null===v||void 0===v?void 0:v.state)===so.open,"channel not open"),bt(b.chain_id.eq(a.chainId),"chainId mismatch"),bt(b.channel_identifier.eq(v.id),"channelId mismatch"),bt(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=Qf(v.partner,c);bt(b.locksroot===Ws(g),"locksroot mismatch"),bt(b.locked_amount.eq(zf(g)),"lockedAmount mismatch"),bt(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var O={type:Bn.PROCESSED,message_identifier:b.message_identifier};return Object(Pt["a"])(wo(o,O,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ma.success({message:b,partner:y},s);case 2:return e.next=4,ha({message:t},s);case 4:return e.next=6,ca.failure(new pt(dt.XFER_EXPIRED,{block:m.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(ts["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(ma.failure(e,s))})))}function sp(e,t,n,r){var a=n.log,o=n.signer,i=t.payload.message;bt(i.participant===t.meta.address,"participant mismatch");var c=i.token_network_address,s=i.participant,u=e.channels[Ei({tokenNetwork:c,partner:s})];bt((null===u||void 0===u?void 0:u.state)===so.open,"channel not open"),bt(i.chain_id.eq(e.chainId),"chainId mismatch"),bt(i.channel_identifier.eq(u.id),"channelId mismatch");var l=Object(D["a"])(void 0),d="".concat(Ti(u),"+").concat(i.message_identifier.toString()),f=r.get(d);if(f)l=Object(D["a"])(f);else{bt(i.nonce.eq(u.partner.nextNonce),"nonce mismatch");var p=Si(u),b=p.partnerBalance,y=p.partnerLocked,m=p.partnerDeposit,h=m.add(b).sub(y);if(bt(i.total_withdraw.lte(h),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount"),i.expiration.gt(e.blockNumber)){var v={type:Bn.WITHDRAW_CONFIRMATION,message_identifier:i.message_identifier,chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,participant:i.participant,total_withdraw:i.total_withdraw,nonce:u.own.nextNonce,expiration:i.expiration};l=Object(Pt["a"])(wo(o,v,{log:a})).pipe(Object(Bt["a"])((function(e){return r.put(d,e)})))}}var g={tokenNetwork:c,partner:s,totalWithdraw:i.total_withdraw,expiration:i.expiration.toNumber()};return Object(I["a"])(Object(D["a"])(Oa.request({message:i},g)),l.pipe(Object(M["a"])(gt),Object(B["a"])((function(t){return bt(i.expiration.gt(e.blockNumber),"request expired while signing"),Oa.success({message:t},g)})),Object(ts["a"])((function(e){return a.warn("error while signing WithdrawConfirmation, ignoring",e),U["a"]}))))}function up(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return sp(e,t,{log:o,signer:a},r)})),Object(ts["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}function lp(e,t,n,r){var a=n.signer,o=n.log,i=n.config$;return Object(Ut["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=$f(e,2),i=n[0],c=n[1].confirmationBlocks,s=t.payload.message;bt(s.participant===t.meta.address,"participant mismatch");var u,l=s.token_network_address,d=s.participant,f=i.channels[Ei({tokenNetwork:l,partner:d})];bt((null===f||void 0===f?void 0:f.state)===so.open,"channel not open"),bt(s.chain_id.eq(i.chainId),"chainId mismatch"),bt(s.channel_identifier.eq(f.id),"channelId mismatch");var b="".concat(Ti(f),"+").concat(s.message_identifier.toString()),y=r.get(b);if(y)u=Object(D["a"])(y);else{bt(s.nonce.eq(f.partner.nextNonce),"nonce mismatch"),bt(s.expiration.add(c).lte(i.blockNumber));var m={type:Bn.PROCESSED,message_identifier:s.message_identifier};u=Object(Pt["a"])(wo(a,m,{log:o})).pipe(Object(Bt["a"])((function(e){return r.put(b,e)})))}var h={tokenNetwork:l,partner:d,totalWithdraw:s.total_withdraw,expiration:s.expiration.toNumber()};return u.pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oa.failure({message:s},h);case 2:return e.next=4,Kr.request({message:t},{address:d,msgId:t.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))})),Object(ts["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}var dp=function(e,t,n){Ff(t);var r=new $d(32),a=new $d(32),o=n.latest$.pipe(pi("state"));return Object(I["a"])(e.pipe(Object(M["a"])(Nn([ca.request,ba.request,ma.request]))),e.pipe(Object(M["a"])(_o([Ct(jr),Ct(Sr),Ct(Nr),Ct(Dr),Ct(Lr)])))).pipe(Object(pl["a"])((function(e){var t;switch(e.type){case ca.request.type:t=ep(o,e,n);break;case ba.request.type:t=np(o,e,n);break;case ma.request.type:t=ap(o,e,n);break;case Zr.type:switch(e.payload.message.type){case Bn.LOCKED_TRANSFER:t=op(o,e,n);break;case Bn.UNLOCK:t=ip(o,e,n);break;case Bn.LOCK_EXPIRED:t=cp(o,e,n);break;case Bn.WITHDRAW_REQUEST:t=up(o,e,n,r);break;case Bn.WITHDRAW_EXPIRED:t=lp(o,e,n,a);break}break}return t})))};function fp(e,t){return hp(e)||mp(e,t)||bp(e,t)||pp()}function pp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bp(e,t){if(e){if("string"===typeof e)return yp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yp(e,t):void 0}}function yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hp(e){if(Array.isArray(e))return e}function vp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var gp=function(e,t){return vp(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=fp(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:na.SENT},e.next=9,rr.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,sa({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,ba.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,ma.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Op=function(e,t,n){vp(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(Pt["a"])(Object.entries(e.received))})),Object(M["a"])((function(e){var t,n,r=fp(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object($["a"])((function(e){var t=fp(e,2),n=t[0],a=t[1],o={secrethash:n,direction:na.RECEIVED};return Object(I["a"])(Object(D["a"])(sa({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(la({secret:a.secret[1].value},o)):U["a"],a.secretReveal?Object(D["a"])(pa({message:a.secretReveal[1]},o)):U["a"],!a.secret&&a.secretRequest?r.pipe(Object(q["a"])("caps",De.NO_RECEIVE),Object(M["a"])((function(e){return!e})),Object(ks["a"])(1),Object(Ns["a"])(Object(D["a"])(rr.request(void 0,{address:a.transfer[1].initiator}),fa({message:a.secretRequest[1]},o)))):U["a"])})))};function wp(e,t){return Tp(e)||Ep(e,t)||kp(e,t)||_p()}function _p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kp(e,t){if(e){if("string"===typeof e)return jp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jp(e,t):void 0}}function jp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ep(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Tp(e){if(Array.isArray(e))return e}var Ap=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(M["a"])(sa.is),Object(M["a"])((function(e){return e.meta.direction===na.RECEIVED&&e.payload.message.target!==r})),Object(Ts["a"])(t,a),Object(M["a"])((function(e){var t=wp(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[De.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(B["a"])((function(e){var t=wp(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return ca.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:na.SENT})})))};function Sp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function xp(e,t){return Ip(e)||Dp(e,t)||Cp(e,t)||Np()}function Np(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cp(e,t){if(e){if("string"===typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rp(e,t):void 0}}function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ip(e){if(Array.isArray(e))return e}var Pp=function(e,t){return e.pipe(Object(M["a"])(_o(Ct(fr))),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=xp(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=xp(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,ua({message:o},{secrethash:i,direction:na.SENT});case 16:case"end":return e.stop()}}),e)}))))},Up=function(e,t){return e.pipe(Object(M["a"])(Nn([ua,ya,ha])),Object(M["a"])((function(e){return e.meta.direction===na.RECEIVED})),Object(Ts["a"])(t),Object(B["a"])((function(e){var t=xp(e,2),n=t[0],r=t[1].received;return Kr.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},Lp=function(e,t){return e.pipe(Object(M["a"])(_o(Ct(fr))),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:na.SENT},e.next=8,ca.success({balanceProof:vo(a.sent[i].unlock[1])},c);case 8:return e.next=10,ya({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},Bp=function(e,t){return e.pipe(Object(M["a"])(_o(Ct(fr))),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=xp(t,2),r=n[0],a=n[1],o=r.payload.message,i=He()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ha({message:o},{secrethash:i,direction:na.SENT});case 7:case"end":return e.stop()}}),e)}))))},Mp=function(e,t,n){Sp(t);var r=n.log,a=n.signer,o=new $d(32);return e.pipe(Object(M["a"])(_o([Ct(Tr),Ct(Lr)])),Object(pl["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(Kr.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Bn.PROCESSED,message_identifier:n};return Object(Pt["a"])(wo(a,s,{log:r})).pipe(Object(Bt["a"])((function(e){return o.put(i,e)})),Object(B["a"])((function(t){return Kr.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},Fp=n("3d58"),$p=n.n(Fp);function qp(e,t){return Gp(e)||Kp(e,t)||Wp(e,t)||Hp()}function Hp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wp(e,t){if(e){if("string"===typeof e)return Vp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vp(e,t):void 0}}function Vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gp(e){if(Array.isArray(e))return e}function Zp(e,t){return $p()(e,t,(function(e,t){return Ot.is(e)?e.eq(t):Ot.is(t)?t.eq(e):void 0}))}var Yp=function(e,t){return e.pipe(Object(M["a"])(_o(Ct(Tr))),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=qp(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&Zp(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:na.SENT},e.next=14,va({message:o,partner:c.partner},u);case 14:return e.next=16,ca.failure(new pt(dt.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function Xp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Qp(e,t){return nb(e)||tb(e,t)||Jp(e,t)||zp()}function zp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jp(e,t){if(e){if("string"===typeof e)return eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eb(e,t):void 0}}function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function nb(e){if(Array.isArray(e))return e}function rb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(md["a"])((function(e){return e.pipe(Object(ll["a"])(t))})),Object(ni["a"])(e))}}function ab(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Cf(t,e,In(Kr,e.meta)).pipe(rb(n,r))}var ob=function(e,t,n,r){return r.meta.direction!==na.SENT?U["a"]:n.pipe(Object(F["a"])(),Object(gl["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=Kr.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(pi("sent",o),Object(M["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return ab(c,e,s,a)})))},ib=function(e,t,n,r){return r.meta.direction!==na.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Ts["a"])(n),Object(gl["a"])((function(n){var a=Qp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=Kr.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(pi("sent",c),Object(M["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return ab(l,e,d,i)})))},cb=function(e,t,n,r){return r.meta.direction!==na.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Ts["a"])(n),Object(gl["a"])((function(n){var a=Qp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Kr.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(pi("sent",c),Object(M["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return ab(u,e,l,i)})))},sb=function(e,t,n,r){return r.meta.direction!==na.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Ts["a"])(n),Object(gl["a"])((function(n){var a=Qp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Kr.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(pi("received",c),Object(M["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return ab(u,e,l,i)})))},ub=function(e,t,n,r){return r.meta.direction!==na.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Ts["a"])(n),Object(gl["a"])((function(n){var a=Qp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=Kr.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(pi("received",c),Object(M["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return ab(u,e,l,i)})))},lb=function(e,t,n){Xp(t);var r=n.latest$,a=n.config$,o=r.pipe(pi("state"));return e.pipe(Object(M["a"])(Nn([sa,ba.success,ma.success,fa,pa])),Object($["a"])((function(t){return sa.is(t)?ob(e,o,a,t):ba.success.is(t)?ib(e,o,a,t):ma.success.is(t)?cb(e,o,a,t):fa.is(t)?sb(e,o,a,t):ub(e,o,a,t)})))};function db(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function fb(e,t){return hb(e)||mb(e,t)||bb(e,t)||pb()}function pb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bb(e,t){if(e){if("string"===typeof e)return yb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yb(e,t):void 0}}function yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hb(e){if(Array.isArray(e))return e}var vb=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(M["a"])(_o(Ct(br))),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=fb(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,fa({message:c},{secrethash:c.secrethash,direction:na.SENT});case 10:case"end":return e.stop()}}),e)}))))},gb=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),U["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,f=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),U["a"];if(i.amount.lt(f))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])(ca.failure(new pt(dt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(f)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Bn.SECRET_REVEAL,message_identifier:Zs(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Pt["a"])(wo(a,b,{log:o}))}return s.pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pa({message:n},t.meta);case 2:return e.next=4,Kr.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Ob=function(e,t,n){db(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(M["a"])(Nn(fa)),Object(M["a"])((function(e){return e.meta.direction===na.SENT})),Object(pl["a"])((function(e){return o.pipe(pi("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return gb(t,e,{log:r,signer:a})})))})))},wb=function(e,t){return e.pipe(Object(M["a"])(_o(mr)),Object(Ts["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=fb(t,2),r=n[0],a=n[1],o=r.payload.message,i=Vs(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:na.SENT},e.next=7,la({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,ba.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,la({secret:o.secret},{secrethash:i,direction:na.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},_b=function(e,t,n){db(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(M["a"])(Nn([la,da.success])),Object(M["a"])((function(e){return e.meta.direction===na.RECEIVED})),Object(pl["a"])((function(e){return o.pipe(pi("state"),Object(F["a"])(),Object(M["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Bn.SECRET_REVEAL,message_identifier:Zs(),secret:e.payload.secret};return wo(a,t,{log:r})})),Object(B["a"])((function(t){return pa({message:t},e.meta)})),Object(ts["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},kb=function(e,t,n){db(e);var r=n.secretRegistryContract;return nn(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(Ts["a"])(t),Object(M["a"])((function(e){var t=fb(e,2),n=fb(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=fb(t,2),r=fb(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,da.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:na.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,da.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:na.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},jb=function(e){return e.pipe(Object(M["a"])(da.success.is),Object(M["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return ca.success({},e.meta)})))},Eb=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(pi(na.RECEIVED),Object($["a"])((function(e){return Object(Pt["a"])(Object.keys(e))})),Object(hd["a"])(),Object($["a"])((function(t){return e.pipe(Object(M["a"])(Vn.is),Object(Ts["a"])(a.pipe(Object(q["a"])("state",na.RECEIVED,t)),r),Object(M["a"])((function(e){var t,n,r=fb(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[De.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(Es["a"])((function(n){var r=fb(n,2),a=r[1],o={secrethash:t,direction:na.RECEIVED};return Cf(e,da.request({secret:a.secret[1].value},o),Pn(da,o))})),Object(ni["a"])(a.pipe(pi("state"),Object(M["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},Tb=function(e,t,n){db(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(M["a"])(da.request.is),Object(Ts["a"])(s),Object($["a"])((function(e){var t,n=fb(e,2),s=n[0],u=n[1].subkey,l=Su({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,f=xu(c,d);return Object(Pt["a"])(f.functions.registerSecret(s.payload.secret)).pipe(xi("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(Cs["a"])(),Object(ts["a"])((function(e){return Object(D["a"])(da.failure(e,s.meta))})))})))};function Ab(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Nb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Sb(e,t){return Db(e)||Rb(e,t)||Nb(e,t)||xb()}function xb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nb(e,t){if(e){if("string"===typeof e)return Cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cb(e,t):void 0}}function Cb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Db(e){if(Array.isArray(e))return e}var Ib=function(e){return e.pipe(Object(M["a"])(Nn(Oa.success)),Object(B["a"])((function(e){return Kr.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},Pb=[["partner",1],["own",2]],Ub=function(e,t,n){var r=n.config$;return e.pipe(Object(M["a"])(Vn.is),Object(q["a"])("payload","blockNumber"),Object(Ts["a"])(t,r),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,f,b,y,m,h;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Sb(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=43;break}if(s=c[i],s.state===so.open){e.next=6;break}return e.abrupt("continue",40);case 6:u=Ab(Pb),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=32;break}d=Sb(l.value,2),f=d[0],b=d[1],y=Ab(s[f].withdrawRequests),e.prev=12,y.s();case 14:if((m=y.n()).done){e.next=22;break}if(h=m.value,!h.expiration.add(o*b).gt(r)){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,wa({participant:s[f].address},{tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:h.expiration.toNumber(),totalWithdraw:h.total_withdraw});case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](12),y.e(e.t0);case 27:return e.prev=27,y.f(),e.finish(27);case 30:e.next=9;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](7),u.e(e.t1);case 37:return e.prev=37,u.f(),e.finish(37);case 40:i++,e.next=2;break;case 43:case"end":return e.stop()}}),e,null,[[7,34,37,40],[12,24,27,30]])}))))},Lb=n("2b6e"),Bb=n("44e4");function Mb(e,t){return Wb(e)||Hb(e,t)||$b(e,t)||Fb()}function Fb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $b(e,t){if(e){if("string"===typeof e)return qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qb(e,t):void 0}}function qb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Wb(e){if(Array.isArray(e))return e}var Vb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Kb(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[De.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Ei({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==so.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(so.open,'"');var s=Si(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var Gb=N()((function(e){return Vb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function Zb(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Ue["t"]({message:Ue["q"],network_info:Ue["t"]({chain_id:Ue["j"](a.chainId),token_network_registry_address:Ue["j"](o.TokenNetworkRegistry.address)}),operator:Ue["q"],payment_address:St,price_info:kt(32),version:Ue["q"]}),s=St.is(e)?Object(Pt["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(Ts["a"])(i),Object($["a"])((function(e){var t=Mb(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new pt(dt.PFS_EMPTY_URL);if(!Ru(a))throw new pt(dt.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object(bl["a"])(a+"/api/v1/info").pipe(Object(dl["a"])(o),Object($["a"])((function(e){return Vb(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=vt,t.t1=c,t.t2=ro,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,Gb(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(B["a"])((function(e){var t=Mb(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function Yb(e,t){var n=t.log;return Object(Pt["a"])(e).pipe(Object($["a"])((function(e){return Zb(e,t).pipe(Object(ts["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(Ft["a"])(),Object(B["a"])((function(e){if(!e.length)throw new pt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function Xb(e){return Object(_["concat"])([eo(e.one_to_n_address,20),eo(e.chain_id,32),eo(co.IOU,32),eo(e.sender,20),eo(e.receiver,20),eo(e.amount,32),eo(e.expiration_block,32)])}function Qb(e,t){return Vb(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(Xb(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function zb(e){return ty(e)||ey(e)||iy(e)||Jb()}function Jb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ey(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ty(e){if(Array.isArray(e))return cy(e)}function ny(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=iy(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ry(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ay(e,t){return uy(e)||sy(e,t)||iy(e,t)||oy()}function oy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iy(e,t){if(e){if("string"===typeof e)return cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cy(e,t):void 0}}function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function uy(e){if(Array.isArray(e))return e}var ly=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},dy=N()((function(e){return ly(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),fy=Ue["n"](Ue["t"]({error_code:Ue["l"],errors:Ue["q"]}));function py(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function by(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.userDepositContract,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=py(),n=Object(_["concat"])([a,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Pt["a"])(o.signMessage(n)).pipe(Object(B["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Ts["a"])(u),Object($["a"])((function(n){var r=ay(n,2),a=r[0],o=r[1].httpTimeout;return Object(bl["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(dl["a"])(o))})),Object(Ts["a"])(s.pipe(Object(q["a"])("state","blockNumber"))),Object($["a"])((function(t){var n=ay(t,2),o=n[0],s=n[1];return ly(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=10;break}return t.t0=a,t.t1=e.address,t.t2=Object(_["bigNumberify"])(i.chainId),t.t3=k["Zero"],t.next=7,dy(c);case 7:return t.t4=t.sent,t.t5=Object(_["bigNumberify"])(s).add(2*Math.pow(10,5)),t.abrupt("return",{sender:t.t0,receiver:t.t1,chain_id:t.t2,amount:t.t3,one_to_n_address:t.t4,expiration_block:t.t5});case 10:return t.next=12,o.text();case 12:if(n=t.sent,o.ok){t.next=15;break}throw new pt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 15:if(r=vt(ta,ro(n)),u=r.last_iou,l=Object(_["verifyMessage"])(Xb(u),u.signature),l===a){t.next=19;break}throw new pt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))}function yy(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):by(e,t,n)})),Object(B["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return Qb(n.signer,e)})))}var my=function(e,t,n){ry(t);var r=n.log,a=n.latest$;return e.pipe(Object(M["a"])(Nn(ja.request)),Object(pl["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,f=e.meta,b=f.tokenNetwork,y=f.target;if(!Object.values(i.tokens).includes(b))throw new pt(dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new pt(dt.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[De.NO_RECEIVE])throw new pt(dt.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===Kb(i,c,b,y,y,e.meta.value))return Object(D["a"])({paths:[{path:[n.address,y],fee:k["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new pt(dt.PFS_DISABLED);var m=e.payload.pfs?Object(D["a"])(e.payload.pfs):u?Zb(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return Yb(e,n)})),Object(Bt["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):yy(e,b,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object(bl["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:ao({from:n.address,to:y,value:kt(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:kt(32).encode(a.amount),expiration_block:kt(32).encode(a.expiration_block),chain_id:kt(32).encode(a.chain_id)}):void 0})}).pipe(Object(dl["a"])(l),Object(B["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return ly(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(B["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=ro(n);return t.ok?{paths:vt(Qr,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:vt(fy,a),iou:r}})))})),Object(Ts["a"])(a),Object($["a"])((function(t){var a=ay(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(Pt["a"])(p.a.mark((function t(){var a,i,u,l,d,f,b,y,m,h,v,g,O;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,Ta({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,Aa(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new pt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new pt(dt.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],f=new Set,b=ny(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,h=m.path,v=m.fee,h[0]===n.address&&(h=h.slice(1)),g=h[0],!f.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!v.gt(d[0].fee)||"path: already selected a smaller fee":Kb(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",h),f.add(g),t.abrupt("continue",30);case 29:d.push({path:h,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new pt(dt.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,ja.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(ts["a"])((function(t){return Object(D["a"])(ja.failure(t,e.meta))})))})))},hy=function(e,t,n){ry(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Ni,Object($["a"])((function(e){return e.pipe(Object(Lb["a"])(),Object(Ts["a"])(c),Object(M["a"])((function(e){var t=ay(e,2),n=ay(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===so.open&&!!a})),Object(Bb["a"])((function(e){var t=ay(e,2),n=ay(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(vs["a"])(o):Object(D["a"])(1)})),Object(gl["a"])((function(e){var t=ay(e,2),n=ay(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,d=c.tokenNetwork,f=c.partner.address,p=Si(c),b=p.ownCapacity,y=p.partnerCapacity,m={type:Bn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:d,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:f,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(P["a"])((function(){return wo(i,m,{log:r})})).pipe(Object(B["a"])((function(e){return Gr({message:e},{roomName:l})})),Object(ts["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},vy=function(e,t,n){ry(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Ni,Object($["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Ts["a"])(c),Object(M["a"])((function(e){var t=ay(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===so.open&&!!a&&!(null===o||void 0===o?void 0:o[De.NO_MEDIATE])})),Object($["a"])((function(e){var t=ay(e,2),n=t[0],c=t[1].pfsRoom,s={type:Bn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:py(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Pt["a"])(wo(i,s,{log:r})).pipe(Object(B["a"])((function(e){return Gr({message:e},{roomName:c})})),Object(ts["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},gy=function(e,t,n){ry(e),ry(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(pi("pfs"),Object(gl["a"])((function(e){return""!==e&&void 0!==e?U["a"]:nn(r,[r.filters.RegisteredService(null,null,null,null)],Object(D["a"])(a.ServiceRegistry.block_number)).pipe(Object(ti["a"])((function(e){var t=ay(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(gl["a"])((function(e){var t=ay(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(ll["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(oi["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(zb(e),[n]):e}),[]),Object(ai["a"])(),Object(Lt["a"])(1e3),Object(B["a"])((function(e){return Ea({pfsList:e})})))})))},Oy=function(e,t,n){ry(e),ry(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(pi("state","blockNumber"),Object(Es["a"])((function(){return o.functions.effectiveBalance(r)})),Object(ai["a"])((function(e,t){return t.eq(e)})),Object(B["a"])(Sa))};function wy(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=ay(e,2),u=s[1],l=Si(u),d=l.partnerUnlocked,f=l.ownDeposit;return d.isZero()||f.isZero()?U["a"]:Object(Ut["a"])([i,c]).pipe(Object(M["a"])((function(e){var t,n,r=ay(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&d.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(ks["a"])(1),Object($["a"])((function(e){var i=ay(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,d=u.partner.balanceProof,f=po(d),p=Object(_["concat"])([eo(u.tokenNetwork,20),eo(r.chainId,32),eo(co.BALANCE_PROOF_UPDATE,32),eo(u.id,32),eo(f,32),eo(d.nonce,32),eo(d.additionalHash,32),eo(d.signature,65)]);return Object(Pt["a"])(a.signMessage(p)).pipe(Object($["a"])((function(e){return wo(a,{type:Bn.MONITOR_REQUEST,balance_proof:{chain_id:d.chainId,token_network_address:d.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:d.nonce,balance_hash:f,additional_hash:d.additionalHash,signature:d.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(B["a"])((function(e){return Gr({message:e},{roomName:l})})))})),Object(ts["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]})))}}var _y=function(e,t,n){return ry(e),ry(t),n.latest$.pipe(Object(q["a"])("state"),Ni,Object(Ts["a"])(n.config$),Object($["a"])((function(e){var t=ay(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(ai["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(Lb["a"])(),Object(Bb["a"])((function(e){var t=ay(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(vs["a"])(a):Object(D["a"])(1)})),Object(gl["a"])(wy(n)))})))},ky=function(e,t,n){ry(t);var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer;return e.pipe(Object(M["a"])(Na.request.is),Object($["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(pl["a"])((function(e){var t=ay(e,2),n=t[0],c=t[1],s=xu(r,i),u=n.meta.amount;return Object(P["a"])((function(){return bt(u.gt(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:u.toString()}]),bt(c.sub(u).gte(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:c.toString(),amount:u.toString()}]),s.functions.planWithdraw(u)})).pipe(xi("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Object($["a"])((function(e){var t=e.transactionHash,n=e.blockNumber;return Object(Pt["a"])(r.functions.withdraw_plans(a)).pipe(Object(B["a"])((function(e){var r=e.amount,a=e.withdraw_block;return Na.success({block:a.toNumber(),txHash:t,txBlock:n,confirmed:void 0},{amount:r})})))})),Object(ts["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(D["a"])(Na.failure(e,n.meta))})))})))},jy=function(e,t,n){ry(e),ry(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(M["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Na.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},Ey=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer;return e.pipe(Object(M["a"])(Na.success.is),Object(M["a"])((function(e){return!0===e.payload.confirmed})),Object($["a"])((function(e){return t.pipe(Object(q["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(js["a"])(e))})),Object($["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(pl["a"])((function(e){var t=ay(e,2),n=t[0],c=t[1],s=xu(a,i);return Object(P["a"])((function(){return bt(c.gt(k["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:c.toString()}]),s.functions.withdraw(n.meta.amount)})).pipe(xi("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),Object(pl["a"])((function(e){var t=e.transactionHash,r=e.blockNumber;return Object(P["a"])((function(){return s.functions.balances(o)})).pipe(Object(B["a"])((function(e){return Ca({withdrawal:c.sub(e),txHash:t,txBlock:r,confirmed:void 0},n.meta)})))})),Object(ts["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(D["a"])(Na.failure(e,n.meta))})))})))},Ty=function(e,t,n){ry(e);var r=n.monitoringServiceContract,a=n.address;return nn(r,[r.filters.NewBalanceProofReceived(null,null,null,null,null,a)]).pipe(Object(M["a"])((function(e){var t=ay(e,6),n=t[5];return n===a})),Object(Ts["a"])(t),Object(B["a"])((function(e){var t=ay(e,2),n=ay(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)}));if(l)return Ra({tokenNetwork:r,partner:l.partner.address,id:l.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:s.blockNumber,confirmed:void 0})})),Object(M["a"])(gt))};function Ay(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sy(e,t){return Dy(e)||Ry(e,t)||Ny(e,t)||xy()}function xy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ny(e,t){if(e){if("string"===typeof e)return Cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cy(e,t):void 0}}function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ry(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Dy(e){if(Array.isArray(e))return e}function Iy(e,t,n){var r=t.pipe(pi("config"));return Object(Ut["a"])([r,n]).pipe(Object(B["a"])((function(t){var n,r=Sy(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(Ay({},De.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(ai["a"])(os.a))}function Py(e,t,n){var r=n.defaultConfig,a=e.pipe(Object(M["a"])(Sa.is),Object(q["a"])("payload"),Object(Jc["a"])(k["MaxUint256"])),o=Iy(r,t,a),i=bs(e),c=e.pipe(Object(M["a"])(Ea.is),Object(q["a"])("payload","pfsList"),Object(Jc["a"])([])),s=e.pipe(Object(M["a"])(ir.is),Object(oi["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),Ay({},t.meta.address,t.payload)):zo()(t.meta.address,e)}),{}),Object(Jc["a"])({}));return Object(Ut["a"])([Object(Ut["a"])([e,t,o,i,c,s]),Object(Ut["a"])([a])]).pipe(Object(B["a"])((function(e){var t=Sy(e,2),n=Sy(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Sy(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}var Uy=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),Ly=function(e,t,n){var r=e.pipe(Object(M["a"])(Nn(Ia))),a=e.pipe(Object(es["a"])(rs()(Nn(Ia)),!0)),o=t.pipe(Object(ni["a"])(r));return Py(a,o,n).subscribe(n.latest$),Object(Pt["a"])(Object.values(Uy)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(ts["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(Ia({reason:e}))})),Object(ni["a"])(r))};function By(e){return $y(e)||Fy(e)||Wy(e)||My()}function My(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $y(e){if(Array.isArray(e))return Vy(e)}function qy(e,t){return Gy(e)||Ky(e,t)||Wy(e,t)||Hy()}function Hy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wy(e,t){if(e){if("string"===typeof e)return Vy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vy(e,t):void 0}}function Vy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ky(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gy(e){if(Array.isArray(e))return e}function Zy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xy(e,t,n){return t&&Yy(e.prototype,t),n&&Yy(e,n),e}var Qy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},zy=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,f,b=this;Zy(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new C["a"](1);this.state$=h.pipe(pi("state")),this.action$=h.pipe(pi("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(pi("channels"),Object(B["a"])(Au)),this.transfers$=Tu(this.state$),this.events$=this.action$.pipe(Object(M["a"])(Nn(La))),this.getTokenInfo=N()((function(e){return Qy(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=qy(r,4),o=a[0],i=a[1],c=a[2],s=a[3],bt(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:h,config$:h.pipe(pi("config")),matrix$:new R["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:ke.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),monitoringServiceContract:xe.connect(a.MonitoringService.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),main:c},this.userDepositTokenAddress=N()((function(){return Qy(b,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.config$.pipe(pi("logger")).subscribe((function(e){return b.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(zc,o,Object(j["a"])(v,this.epicMiddleware)),Py(Object(D["a"])(Pa({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return Xy(e,[{key:"start",value:function(){var e=this;bt(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(Ly),this.epicMiddleware=void 0,this.store.dispatch(Pa({}))}},{key:"stop",value:function(){this.store.dispatch(Ia({reason:Re.STOP}))}},{key:"getBlockNumber",value:function(){return Qy(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(Pa(vt(fn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:Su(this.deps,this.config.subkey).address,bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Qy(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:Su(this.deps,this.config.subkey).address,bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Qy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return Qy(this,void 0,void 0,p.a.mark((function t(){var n;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens[e],!n){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return n=t.sent,bt(n&&n!==k["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Kn({token:e,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Qy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,bt(!n.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=n.settleTimeout?vt(kt(4),n.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=n.deposit?vt(kt(32),n.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:t},u=Un(Gn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Un(Yn,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(Gn.request(Object.assign(Object.assign({},n),{settleTimeout:i,deposit:c}),s)),a.next=14,u;case 14:return d=a.sent,null===r||void 0===r||r({type:Se.OPENED,payload:{txHash:d}}),a.next=18,this.state$.pipe(pi("channels",Ei({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===so.open}))).toPromise();case 18:if(null===r||void 0===r||r({type:Se.CONFIRMED,payload:{txHash:d}}),!l){a.next=24;break}return a.next=22,l;case 22:f=a.sent,null===r||void 0===r||r({type:Se.DEPOSITED,payload:{txHash:f}});case 24:return a.abrupt("return",d);case 25:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Qy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],bt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c=vt(kt(32),n),s={tokenNetwork:i,partner:t},u=Un(Yn,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Yn.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Qy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Un(Qn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Qn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Qy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=Un(Jn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Jn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Qy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=Un(rr,n,this.action$),this.store.dispatch(rr.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Qy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n,dt.DTA_INVALID_AMOUNT,this.log.info),c=r.paymentId?vt(kt(8),r.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):Gs(),s=r.paths?vt(zr,r.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=r.pfs?vt(Jr,r.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,bt(void 0===r.secret||Tt.is(r.secret),dt.RDN_INVALID_SECRET,this.log.info),bt(void 0===r.secrethash||Et.is(r.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),l=r.secret?r.secret:r.secrethash?void 0:Ks(),d=r.secrethash||Vs(l),bt(!l||Vs(l)===d,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),f={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(In(ja,f)),Object(B["a"])((function(e){if(ja.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return b.store.dispatch(ja.request({paths:s,pfs:u},f)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(M["a"])(Nn([sa,ca.failure])),Object(F["a"])((function(e){return e.meta.direction===na.SENT&&e.meta.secrethash===d})),Object(B["a"])((function(e){if(ca.failure.is(e))throw e.payload;return Xs(e.meta)}))),Object(P["a"])((function(){return b.store.dispatch(ca.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:na.SENT})),U["a"]})))}))).toPromise());case 15:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return Qy(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=zs(e),c=i.direction,s=i.secrethash,bt(s in this.state[c],dt.RDN_UNKNOWN_TRANSFER,this.log.info),u=tu(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new pt(dt.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,Un(ca,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Qy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],bt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=vt(kt(32),n),c=r.pfs?vt(Jr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=Un(ja,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(ja.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return Qy(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],bt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=vt(kt(32),n),i={tokenNetwork:a,target:t,value:o},c=Un(ja,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(ja.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return Qy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bt(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(pi("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return Yb(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return Qy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),bt(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),a=Su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=pe.connect(e,o),n.next=7,Nu(i,"mint",[vt(kt(32),t)],dt.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,Cu(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return Qy(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(gt)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(By(e),By(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return Qy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y,m;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(_["bigNumberify"])(e),bt(o.gt(k["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),i=Su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=xu(this.deps.userDepositContract,c),n.t0=xu,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return d=n.sent,bt(d.gte(e),[dt.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:d.toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),bt(!a||Object(_["bigNumberify"])(a).gte(e),[dt.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(_["bigNumberify"])(d).toString(),required:Object(_["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(f=n.sent,b=k["HashZero"],!f.lt(o)){n.next=26;break}return n.next=25,Nu(l,"approve",[u.address,null!==a&&void 0!==a?a:o],dt.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:Se.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,Nu(u,"deposit",[this.address,y.add(o)],dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return m=n.sent,null===t||void 0===t||t({type:Se.DEPOSITED,payload:{txHash:m.transactionHash}}),n.next=36,Cu(m,this.deps);case 36:return this.log.debug('deposit tx "'.concat(m.transactionHash,'" confirmed')),null===t||void 0===t||t({type:Se.CONFIRMED,payload:{txHash:m.transactionHash}}),n.abrupt("return",m.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return Qy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{to:e}],this.log.info),bt(!r||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Su(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(_["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(_["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),bt(d.gt(k["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:d.toString()}],this.log.info),f=d.lte(t)?d:Object(_["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:f,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,bt(y.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return Qy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,d;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return bt(St.is(e),[dt.DTA_INVALID_ADDRESS,{token:e}],this.log.info),bt(St.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),bt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Su(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=xu(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(_["bigNumberify"])(n),r.next=11,Nu(s,"transfer",[t,l],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return d=r.sent,r.abrupt("return",d.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"planUdcWithdraw",value:function(e){return Qy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:Object(_["bigNumberify"])(e)},r=Un(Na,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Na.request(void 0,n)),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return Qy(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,d,f,b,y,m,h,v,g;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new w["JsonRpcProvider"](e):e instanceof w["JsonRpcProvider"]?e:new w["Web3Provider"](e),an(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=ku(s)),i.next=8,Eu(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,f=u.main,i.next=14,Xo(s,r,d,n,a&&vt(fn,a));case 14:return b=i.sent,y=b.state,m=b.onState,h=b.onStateComplete,v=b.defaultConfig,bt(d===y.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:d,state:y.address}]),bt(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:r.TokenNetworkRegistry.address,stateNetwork:y.chainId,stateRegistry:y.registry}]),g=new this(c,s,l,r,y,v,f),m&&g.state$.subscribe(m,h,h),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Ce.sdk}},{key:"contractVersion",get:function(){return Ce.contracts}}]),e}()},f9be:function(e,t,n){"use strict";var r=n("5666"),a=n.n(r);a.a},fe22:function(e,t,n){}});
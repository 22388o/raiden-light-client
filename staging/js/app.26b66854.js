(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"00949c72","chunk-579e1ea3":"efabdc9a","chunk-0a1aad5a":"381d83ac","chunk-29ded97f":"035b72a3","chunk-4dbd0956":"523f8f8e","chunk-08dab35b":"d10a951a","chunk-1c4c3756":"4abb48bb","chunk-4d730eb5":"fb1e78bb","chunk-f60d6c70":"c02b90bc","chunk-fb35a2fc":"cc6f01b6","chunk-12baf7f0":"a88bd640","chunk-192741ba":"d404f151","chunk-2fc925ad":"f4c8e700","chunk-42bc8b47":"caae34f9","chunk-5bd868d6":"4bd12db8","chunk-7b0391a4":"5de96e0c","chunk-e8fa3e66":"043f0cc6","chunk-7916f8ca":"b429b49a"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0a9c6d1a":1,"chunk-579e1ea3":1,"chunk-0a1aad5a":1,"chunk-29ded97f":1,"chunk-4dbd0956":1,"chunk-08dab35b":1,"chunk-1c4c3756":1,"chunk-4d730eb5":1,"chunk-f60d6c70":1,"chunk-fb35a2fc":1,"chunk-12baf7f0":1,"chunk-192741ba":1,"chunk-2fc925ad":1,"chunk-42bc8b47":1,"chunk-5bd868d6":1,"chunk-7b0391a4":1,"chunk-e8fa3e66":1,"chunk-7916f8ca":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0a9c6d1a":"284343a3","chunk-579e1ea3":"976b6bb8","chunk-0a1aad5a":"e02dd5fa","chunk-29ded97f":"6144f939","chunk-4dbd0956":"57dadbf8","chunk-08dab35b":"78af775a","chunk-1c4c3756":"0cd0c0e2","chunk-4d730eb5":"d84f9e81","chunk-f60d6c70":"220ca184","chunk-fb35a2fc":"1d5a726d","chunk-12baf7f0":"53c90c86","chunk-192741ba":"d669c000","chunk-2fc925ad":"8cbb0a83","chunk-42bc8b47":"50c8bcda","chunk-5bd868d6":"36154c83","chunk-7b0391a4":"7e485eae","chunk-e8fa3e66":"aeb39eb6","chunk-7916f8ca":"665ed9bd"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09b0":function(e,t,n){},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["b"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["b"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("e6c7"),n("2877")),O=Object(g["a"])(v,r,a,!1,null,"bbe72a48",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a71"),s=n.n(c);function u(e,t){return b(e)||p(e,t)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=f(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["b"])([a["a"]],h),t["a"]=h},"15c8":function(e,t,n){},"1a19":function(e,t,n){},"1a2b":function(e,t,n){"use strict";var r=n("f45e"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("1a19"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},2:function(e,t){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[e.pendingTransferAmount?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-badge",{attrs:{color:"primary",bordered:"",content:e.pendingTransferAmount,overlap:""}},[n("v-img",e._g({staticClass:"header-identicon__blockie",attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}},r))],1)]}}],null,!1,1705622633)},[n("span",[e._v(" "+e._s(e.$tc("app-header.pending-transfers",e.pendingTransferAmount,{amount:e.pendingTransferAmount}))+" ")])]):n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("2f62"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=_();return function(){var n,r=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var k=function(e){m(n,e);var t=v(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"pendingTransferAmount",get:function(){return Object.keys(this.pendingTransfers).length}}]),n}(Object(i["c"])(s["a"]));k=Object(o["b"])([Object(i["a"])({computed:d(d({},Object(c["c"])(["defaultAccount"])),Object(c["b"])(["pendingTransfers"]))})],k);var j=k,E=j,T=(n("be88"),n("2877")),A=n("6544"),S=n.n(A),x=n("4ca6"),N=n("adda"),C=n("3a2f"),R=Object(T["a"])(E,r,a,!1,null,"b740b99e",null);t["a"]=R.exports;S()(R,{VBadge:x["a"],VImg:N["a"],VTooltip:C["a"]})},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b2":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},"51ce":function(e,t,n){},"553a":function(e,t,n){},"5d27":function(e,t,n){},"5fcf":function(e,t,n){"use strict";var r=n("5d27"),a=n.n(r);a.a},6:function(e,t){},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("9ab4"),i=n("0a08"),c=n("60a3");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return d(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["b"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["b"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["b"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["b"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,_=O,w=(n("1c30"),n("2877")),k=n("6544"),j=n.n(k),E=n("8336"),T=n("b0af"),A=n("169a"),S=n("132d"),x=Object(w["a"])(_,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:A["a"],VIcon:S["a"]})},7:function(e,t){},7189:function(e,t,n){"use strict";var r=n("8620"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){d(n,e);var t=p(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["b"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["b"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["b"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["b"])([Object(i["a"])({})],v);var g=v,O=g,_=(n("c6c9"),n("2877")),w=n("6544"),k=n.n(w),j=n("8336"),E=n("62ad"),T=n("132d"),A=n("0fd9"),S=Object(_["a"])(O,r,a,!1,null,"de9d7fe4",null);t["a"]=S.exports;k()(S,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:A["a"]})},"753f":function(e,t,n){"use strict";var r=n("94e9"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=d(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["b"])([a["a"]],m),t["a"]=m},8:function(e,t){},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8620:function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return T}));var r=n("4795"),a=n.n(r),o=n("5c7d"),i=n.n(o),c=n("3f4f");function s(e){return f(e)||d(e)||l(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g,O="logs";function _(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function w(e){if("%c prev state"!==e[0]&&"—— log end ——"!==e[0])return e=e.map((function(e){return e instanceof Error?_(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?h(h({},e),{},{payload:_(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e}function k(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function j(){return E.apply(this,arguments)}function E(){return E=y(a.a.mark((function e(){var t,n,r,o,u,l=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:"raiden",n=l.length>1&&void 0!==l[1]?l[1]:["matrix"],"undefined"===typeof g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(O);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 6:for(g=e.sent,r=function(){var e=u[o],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=w(n);i&&g.put(O,{logger:r,level:e,message:n},Date.now()).catch((function(){return g.put(O,{logger:r,level:e,message:n.map(k)},Date.now())}))}}},o=0,u=[i.a].concat(s(n.map(i.a.getLogger)));o<u.length;o++)r();case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(){return A.apply(this,arguments)}function A(){return A=y(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,g.transaction(O).store.openCursor();case 3:n=e.sent,r=Date.now();case 5:if(!n){e.next=16;break}return o=n.value,i=o.logger,c=o.level,s=o.message,u=s.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,l=new Date(n.key).toISOString(),t+="".concat(l," @ ").concat(i," [").concat(c,"] \t=> ").concat(u,"\n"),e.next=13,n.continue();case 13:n=e.sent,e.next=5;break;case 16:return e.abrupt("return",[r,t]);case 17:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}},9:function(e,t){},9040:function(e,t,n){"use strict";var r=n("15c8"),a=n.n(r);a.a},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("9ab4"),i=n("60a3"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){f(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return d(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["b"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["b"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["b"])([Object(i["a"])({})],g);var O=g,_=O,w=(n("a130"),n("2877")),k=n("6544"),j=n.n(k),E=n("3a2f"),T=Object(w["a"])(_,r,a,!1,null,"dda182e6",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"94e9":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a130:function(e,t,n){"use strict";var r=n("e1fc"),a=n.n(r);a.a},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction failed.","CNL_OPENCHANNEL_FAILED":"Token networks openChannel transaction failed.","CNL_SETTOTALDEPOSIT_FAILED":"Token networks setTotalDeposit transaction failed.","CNL_CLOSECHANNEL_FAILED":"Token networks closeChannel transaction failed.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"Token networks settleChannel transaction failed.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction failed.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction failed.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction failed","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_PLAN_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},af21:function(e,t,n){},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("4795"),i=n.n(o),c=n("9ab4"),s=n("60a3"),u=n("2f62"),l=n("87a2"),d=n("750b"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},p=[],b=n("f15c"),y=n("66bc"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},h=[];function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=function(e){w(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return _(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0})],x.prototype,"reason",void 0),x=Object(c["b"])([Object(s["a"])({})],x);var N=x,C=N,R=(n("753f"),n("2877")),D=n("6544"),I=n.n(D),P=n("0798"),U=Object(R["a"])(C,m,h,!1,null,"7b92b083",null),L=U.exports;function B(e){return B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function W(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function G(e){var t=X();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}I()(U,{VAlert:P["a"]});var z=function(e){W(n,e);var t=G(n);function n(){var e;return q(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return V(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",F(F({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}},{key:"hasProvider",get:function(){return!!Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||b["a"].injectedWeb3Available()}}]),n}(s["e"]);Object(c["b"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],z.prototype,"visible",void 0),Object(c["b"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],z.prototype,"connecting",void 0),Object(c["b"])([Object(s["b"])()],z.prototype,"close",null),Object(c["b"])([Object(s["b"])()],z.prototype,"connect",null),z=Object(c["b"])([Object(s["a"])({components:{RaidenDialog:y["a"],ActionButton:d["a"],NoAccessMessage:L},computed:Object(u["c"])(["accessDenied"])})],z);var J=z,ee=J,te=(n("9040"),n("99d9")),ne=Object(R["a"])(ee,f,p,!1,null,"0a49a460",null),re=ne.exports;I()(ne,{VCardText:te["c"],VCardTitle:te["d"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},oe=[],ie=n("152b");function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e){var t=ge();return function(){var n,r=Oe(e);if(t){var a=Oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var _e=function(e){be(n,e);var t=me(n);function n(){return de(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(ie["a"]));Object(c["b"])([Object(s["f"])("tokens",{immediate:!0})],_e.prototype,"onChange",null),_e=Object(c["b"])([Object(s["a"])({computed:ue({},Object(u["b"])(["tokens"]))})],_e);var we=_e,ke=we,je=(n("1a2b"),n("8336")),Ee=n("62ad"),Te=n("a523"),Ae=n("132d"),Se=n("0fd9"),xe=Object(R["a"])(ke,ae,oe,!1,null,"4f16408a",null),Ne=xe.exports;function Ce(e){return Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Pe(o,r,a,i,c,"next",e)}function c(e){Pe(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function Fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function qe(e){var t=We();return function(){var n,r=Ke(e);if(t){var a=Ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return He(this,n)}}function He(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}I()(xe,{VBtn:je["a"],VCol:Ee["a"],VContainer:Te["a"],VIcon:Ae["a"],VRow:Se["a"]});var Ge=function(e){Fe(n,e);var t=qe(n);function n(){var e;return Le(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e}return Me(n,[{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ge=Object(c["b"])([Object(s["a"])({computed:De(De({},Object(u["c"])(["loading","accessDenied","stateBackup","settings"])),Object(u["b"])(["isConnected"])),components:{ActionButton:d["a"],ConnectDialog:re,NoTokens:Ne,NoAccessMessage:L}})],Ge);var Ze=Ge,Ye=Ze,Xe=(n("7189"),n("adda")),Qe=Object(R["a"])(Ye,r,a,!1,null,"05942de6",null);t["a"]=Qe.exports;I()(Qe,{VCol:Ee["a"],VContainer:Te["a"],VImg:Xe["a"],VRow:Se["a"]})},be88:function(e,t,n){"use strict";var r=n("09b0"),a=n.n(r);a.a},bf6c:function(e){e.exports=JSON.parse('{"sdk":"0.9.0","contracts":"0.37.0"}')},c6c9:function(e,t,n){"use strict";var r=n("51ce"),a=n.n(r);a.a},c7d9:function(e,t,n){"use strict";var r=n("553a"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("receiving-disabled-dialog",{attrs:{visible:e.showReceivingDisabled},on:{dismiss:function(t){e.showReceivingDisabled=!1}}})],1)},o=[],i=n("9ab4"),c=n("60a3"),s=n("2f62"),u=n("152b"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e.isConnected?r("span",[e._v(" "+e._s(e.$route.meta.title)+" ")]):r("span",[e._v(" "+e._s(e.$t("home.title"))+" ")])]),!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")]):e._e()]),r("v-spacer"),!e.loading&&e.defaultAccount?r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.navigateToNotifications()}}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1):e._e(),r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[!e.loading&&e.defaultAccount?r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("address-display",{attrs:{address:e.defaultAccount}})],1)]):e._e()],1)],1)},d=[],f=n("80bf"),p=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=A();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var x=function(e){w(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return _(n,[{key:"canGoBack",get:function(){var e=[f["a"].HOME,f["a"].TRANSFER];return this.isConnected&&!e.includes(this.$route.name)}}]),n}(Object(c["c"])(u["a"]));x=Object(i["b"])([Object(c["a"])({components:{HeaderIdenticon:p["a"],AddressDisplay:b["a"]},computed:h(h({},Object(s["c"])(["loading","defaultAccount"])),Object(s["b"])(["network","isConnected"]))})],x);var N=x,C=N,R=(n("5fcf"),n("2877")),D=n("6544"),I=n.n(D),P=n("8336"),U=n("62ad"),L=n("adda"),B=n("0fd9"),M=n("2fa4"),F=Object(R["a"])(C,l,d,!1,null,"372c2478",null),$=F.exports;I()(F,{VBtn:P["a"],VCol:U["a"],VImg:L["a"],VRow:B["a"],VSpacer:M["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},H=[],V=n("0a08");function W(e){return W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function Y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function Q(e){var t=ee();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne=function(e){Y(n,e);var t=Q(n);function n(){var e;return K(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Z(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);ne=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],ne);var re=ne,ae=re,oe=n("132d"),ie=n("2db4"),ce=Object(R["a"])(ae,q,H,!1,null,null,null),se=ce.exports;I()(ce,{VIcon:oe["a"],VSnackbar:ie["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:0,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},le=[];function de(e){return de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me(e,t)}function he(e){var t=Oe();return function(){var n,r=_e(e);if(t){var a=_e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==de(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}var we=function(e){ye(n,e);var t=he(n);function n(){var e;return fe(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return be(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);we=Object(i["b"])([Object(c["a"])({components:{BlurredOverlay:V["a"]}})],we);var ke=we,je=ke,Ee=Object(R["a"])(je,ue,le,!1,null,null,null),Te=Ee.exports;I()(Ee,{VBtn:P["a"],VSnackbar:ie["a"]});var Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("raiden-dialog",{staticClass:"receiving-disabled-dialog",attrs:{visible:e.visible},on:{close:e.dismiss}},[r("v-card-title",{staticClass:"receiving-disabled-dialog__title"},[e._v(" "+e._s(e.$t("receiving-disabled-dialog.title"))+" ")]),r("v-card-text",[r("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-img",{staticClass:"receiving-disabled-dialog__icon",attrs:{src:n("afb7"),height:"110px"}})],1),r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"receiving-disabled-dialog__description"},[r("span",[e._v(" "+e._s(e.$t("receiving-disabled-dialog.body"))+" ")])])])],1)],1)],1)},Se=[],xe=n("66bc");function Ne(e){return Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),e}function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function Ue(e){var t=Me();return function(){var n,r=Fe(e);if(t){var a=Fe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Ne(t)&&"function"!==typeof t?Be(e):t}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}var $e=function(e){Ie(n,e);var t=Ue(n);function n(){return Ce(this,n),t.apply(this,arguments)}return De(n,[{key:"dismiss",value:function(){}}]),n}(c["e"]);Object(i["b"])([Object(c["d"])({required:!0,type:Boolean})],$e.prototype,"visible",void 0),Object(i["b"])([Object(c["b"])()],$e.prototype,"dismiss",null),$e=Object(i["b"])([Object(c["a"])({components:{RaidenDialog:xe["a"]}})],$e);var qe=$e,He=qe,Ve=(n("c7d9"),n("99d9")),We=Object(R["a"])(He,Ae,Se,!1,null,"2055512c",null),Ke=We.exports;function Ge(e){return Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),e}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e){var t=ot();return function(){var n,r=it(e);if(t){var a=it(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}I()(We,{VCardText:Ve["c"],VCardTitle:Ve["d"],VCol:U["a"],VImg:L["a"],VRow:B["a"]});var ct=function(e){et(n,e);var t=nt(n);function n(){var e;return Qe(this,n),e=t.apply(this,arguments),e.showReceivingDisabled=!1,e}return Je(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"onCanReceiveChanged",value:function(e){this.showReceivingDisabled=!1===e}}]),n}(Object(c["c"])(u["a"]));Object(i["b"])([Object(c["f"])("canReceive")],ct.prototype,"onCanReceiveChanged",null),ct=Object(i["b"])([Object(c["a"])({computed:Ye({},Object(s["b"])(["canReceive"])),components:{AppHeader:$,OfflineSnackbar:se,UpdateSnackbar:Te,ReceivingDisabledDialog:Ke}})],ct);var st=ct,ut=st,lt=(n("eb13"),n("7496")),dt=n("a523"),ft=n("a75b"),pt=Object(R["a"])(ut,a,o,!1,null,"45ab90b7",null),bt=pt.exports;I()(pt,{VApp:lt["a"],VContainer:dt["a"],VContent:ft["a"]});var yt=n("2fe1");yt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var mt=n("8c4f"),ht=n("bb51");r["a"].use(mt["a"]);var vt=new mt["a"]({mode:"history",base:"/staging/",routes:[{path:"/",name:f["a"].HOME,meta:{title:"Raiden dApp"},component:ht["a"]},{path:"*",redirect:"/"},{path:"/transfer/:token",name:f["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-579e1ea3"),n.e("chunk-4dbd0956"),n.e("chunk-08dab35b"),n.e("chunk-5bd868d6")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:f["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-579e1ea3"),n.e("chunk-7b0391a4")]).then(n.bind(null,"146c"))}},{path:"/connect",name:f["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-7916f8ca")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:f["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-4dbd0956"),n.e("chunk-08dab35b"),n.e("chunk-1c4c3756")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:f["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-4dbd0956"),n.e("chunk-4d730eb5")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:f["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-579e1ea3"),n.e("chunk-e8fa3e66")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:f["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-f60d6c70").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:f["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:f["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-0a9c6d1a").then(n.bind(null,"47f56"))}),r()},children:[{path:"/",name:f["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-192741ba")]).then(n.bind(null,"f18d"))}},{path:"backup",name:f["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-12baf7f0")]).then(n.bind(null,"248b"))}},{path:"raiden",name:f["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-29ded97f")]).then(n.bind(null,"9114"))}},{path:"settings",name:f["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-42bc8b47")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:f["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-fb35a2fc"),n.e("chunk-2fc925ad")]).then(n.bind(null,"c917"))}},{path:"udc",name:f["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-579e1ea3"),n.e("chunk-0a1aad5a")]).then(n.bind(null,"4c07"))}}]}]}),gt=vt,Ot=n("bfa9"),_t=n("f455"),wt=n("87a2"),kt=n("dd61"),jt=n.n(kt),Et=n("e9a8d"),Tt=n.n(Et),At=n("9380"),St=n.n(At),xt=n("b8ce"),Nt=n.n(xt),Ct=n("c5a2"),Rt=n.n(Ct),Dt=n("93c6"),It=n.n(Dt),Pt=n("63ea"),Ut=n.n(Pt),Lt=n("13ea"),Bt=n.n(Lt);function Mt(e){return qt(e)||$t(e)||Zt(e)||Ft()}function Ft(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function qt(e){if(Array.isArray(e))return Yt(e)}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return Qt(e)||Xt(e,t)||Zt(e,t)||Gt()}function Gt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zt(e,t){if(e){if("string"===typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(e,t):void 0}}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qt(e){if(Array.isArray(e))return e}r["a"].use(s["a"]);var zt={loading:!0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:wt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:wt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:""};function Jt(){return Nt()(zt)}var en=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},tn=new Ot["a"]({storage:window.localStorage,reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),nn={state:Jt(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Kt(r[n],2),o=a[0],i=a[1];o in e.tokens&&Ut()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=Vt(Vt({},e.tokens[o]),i):e.tokens=Vt(Vt({},e.tokens),{},Wt({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=Mt(t)},updatePresence:function(e,t){e.presences=Vt(Vt({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings;Object.assign(e,Vt(Vt({},Jt()),{},{settings:t}))},updateTransfers:function(e,t){e.transfers=Vt(Vt({},e.transfers),{},Wt({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return jt()(St()(Tt()(e.channels),(function(e){return!Bt()(e)})),(function(n){var r=Rt()(n,t,Object(wt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return en(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Bt()(r)&&(n=Tt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(_t["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===_t["b"].open}));return It()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},canReceive:function(e){var t;return!(null===(t=e.config.caps)||void 0===t?void 0:t[_t["a"].NO_RECEIVE])},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[tn.plugin]},rn=new s["a"].Store(nn),an=n("8aa9");yt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var on=n("4795"),cn=n.n(on),sn=n("f15c"),un=n("a3d5"),ln=n("6934"),dn=n("5670"),fn=n("e95d"),pn=n("7f4b"),bn=n.n(pn);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e,t){return kn(e)||wn(e,t)||On(e,t)||gn()}function gn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function On(e,t){if(e){if("string"===typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function kn(e){if(Array.isArray(e))return e}function jn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function En(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){jn(o,r,a,i,c,"next",e)}function c(e){jn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t,n){return t&&An(e.prototype,t),n&&An(e,n),e}var xn=function(){function e(){Tn(this,e)}return Sn(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=En(cn.a.mark((function e(t){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"contracts",value:function(){var e=En(cn.a.mark((function e(){var t,n,r,a,o,i,c,s,u,l,d;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return a=e.sent,o=vn(a,2),i=o[0],c=o[1],e.next=10,Promise.all([i.json(),c.json()]);case 10:return s=e.sent,u=vn(s,2),l=u[0],d=u[1],e.abrupt("return",mn(mn({},l.contracts),d.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Nn=n("8404");function Cn(e){return Cn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Rn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}function Dn(e){var t=Bn();return function(){var n,r=$n(e);if(t){var a=$n(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return In(this,n)}}function In(e,t){return!t||"object"!==Cn(t)&&"function"!==typeof t?Pn(e):t}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e){var t="function"===typeof Map?new Map:void 0;return Un=function(e){if(null===e||!Mn(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ln(e,arguments,$n(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Fn(n,e)},Un(e)}function Ln(e,t,n){return Ln=Bn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Fn(o,n.prototype),o},Ln.apply(null,arguments)}function Bn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Mn(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Fn(e,t){return Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fn(e,t)}function $n(e){return $n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$n(e)}function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vn(e,t){return Gn(e)||Kn(e,t)||Xn(e,t)||Wn()}function Wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kn(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gn(e){if(Array.isArray(e))return e}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Xn(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Xn(e,t){if(e){if("string"===typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qn(e,t):void 0}}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zn(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zn(o,r,a,i,c,"next",e)}function c(e){zn(o,r,a,i,c,"throw",e)}i(void 0)}))}}function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t,n){return t&&tr(e.prototype,t),n&&tr(e,n),e}var rr=function(){function e(t){er(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return nr(e,[{key:"updateBalances",value:function(){var e=Jn(cn.a.mark((function e(){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=Jn(cn.a.mark((function e(){var t,n,r,a,o,i;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=Yn(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=Jn(cn.a.mark((function e(t){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new sr(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Jn(cn.a.mark((function t(n,r){var a,o,i,c,s,u,l,d=this;return cn.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE,!a){t.next=11;break}return t.next=5,xn.fetch(a);case 5:return o=t.sent,t.next=8,sn["a"].provider(o);case 8:i=t.sent,t.next=14;break;case 11:return t.next=13,sn["a"].provider();case 13:i=t.sent;case 14:if(i){t.next=18;break}this.store.commit("noProvider"),t.next=54;break;case 18:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=20;break}throw new _t["f"](_t["c"].RDN_UNRECOGNIZED_NETWORK);case 20:return t.next=22,e.createRaiden(i,null===(s=o)||void 0===s?void 0:s.PRIVATE_KEY,n,r);case 22:return c=t.sent,this._raiden=c,t.next=26,this.getAccount();case 26:return u=t.sent,this.store.commit("account",u),t.next=30,c.userDepositTokenAddress();case 30:return this._userDepositTokenAddress=t.sent,t.next=33,this.fetchTokenData([this._userDepositTokenAddress]);case 33:return this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),c.events$.pipe(Object(dn["a"])((function(e){return"block/new"===e.type})),Object(fn["a"])((function(){return d.fetchTokenData(d.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(dn["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return d.store.commit("reset")})),c.config$.subscribe((function(e){return d.store.commit("updateConfig",e)})),c.events$.subscribe((function(e){"token/monitored"===e.type&&d.store.commit("updateTokens",Zn({},e.payload.token,{address:e.payload.token})),"matrix/presence/success"===e.type&&d.store.commit("updatePresence",Zn({},e.meta.address,e.payload.available))})),c.channels$.subscribe((function(e){d.store.commit("updateChannels",e)})),c.transfers$.subscribe((function(e){d.store.commit("updateTransfers",e)})),this.store.commit("network",c.network),window.addEventListener("beforeunload",(function(){return d.raiden.stop()})),c.start(),t.t0=this.store,t.next=46,this.getBalance();case 46:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=54;break}return t.t2=this.store,t.next=52,this.getBalance(c.address);case 52:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 54:t.next=60;break;case 56:t.prev=56,t.t4=t["catch"](0),l=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?wt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?wt["a"].RDN_STATE_MIGRATION:t.t4 instanceof lr?wt["a"].INITIALIZATION_FAILED:wt["a"].NO_ACCOUNT,this.store.commit("accessDenied",l);case 60:this.store.commit("loadComplete");case 61:case"end":return t.stop()}}),t,this,[[0,56]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Jn(cn.a.mark((function e(){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=Jn(cn.a.mark((function e(){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Jn(cn.a.mark((function e(t){var n;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",un["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Jn(cn.a.mark((function e(t){var n,r,a,o,i,c,s,u;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=Vn(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Jn(cn.a.mark((function e(t,n,r,a){var o,i;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.prev=3,e.next=6,i.openChannel(t,n,{deposit:r},(function(e){return e.type===_t["d"].OPENED?o(2,3):""}));case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new ir(e.t0);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Jn(cn.a.mark((function e(t,n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new or(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Jn(cn.a.mark((function e(t,n,r){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new cr(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Jn(cn.a.mark((function e(t,n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new ar(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=Jn(cn.a.mark((function e(t){var n,r=this;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=Jn(cn.a.mark((function e(t){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Zn({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,bn()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Jn(cn.a.mark((function e(t,n,r,a,o){var i;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 3:return i=e.sent,e.next=6,this.raiden.waitTransfer(i);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new ur(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Jn(cn.a.mark((function e(t,n,r,a){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getAvailability(n);case 2:return e.next=4,this.raiden.findRoutes(t,n,r,{pfs:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=Jn(cn.a.mark((function e(){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Jn(cn.a.mark((function e(t,n,r){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Jn(cn.a.mark((function e(t,n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Jn(cn.a.mark((function e(t,n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===_t["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Jn(cn.a.mark((function e(t){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Jn(cn.a.mark((function e(){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Jn(cn.a.mark((function e(t){var n,r;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Zn({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=Jn(cn.a.mark((function e(){var t,n;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=Jn(cn.a.mark((function e(t){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(ln["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=Jn(cn.a.mark((function e(t){var n;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(ln["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=Jn(cn.a.mark((function e(t,n){var r;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=Jn(cn.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=Jn(cn.a.mark((function e(n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(Nn["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,bn()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=Hn(Hn({},t),r[e]),delete r[e])})),i=function(){var e=Jn(cn.a.mark((function e(n){return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=Hn(Hn({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,bn()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=Jn(cn.a.mark((function e(t){var n,r,a,o,i=arguments;return cn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,xn.contracts();case 6:return o=e.sent,e.next=9,_t["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network"},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new lr(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),ar=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),or=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),ir=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),cr=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),sr=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),ur=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error)),lr=function(e){Rn(n,e);var t=Dn(n);function n(){return er(this,n),t.apply(this,arguments)}return n}(Un(Error));function dr(e,t){e.prototype.$raiden=new rr(rn)}var fr=n("103a"),pr=n.n(fr);function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),e}var hr=function(){function e(){br(this,e),this.cache={}}return mr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=pr()(e);return this.cache[e]=n,n}}]),e}();function vr(e,t){e.prototype.$identicon=new hr}var gr=n("a925");function Or(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(gr["a"]);var _r=new gr["a"]({locale:"en",fallbackLocale:"en",messages:Or()}),wr=(n("5363"),n("d1e7"),n("d4b8"),n("f309"));r["a"].use(wr["a"]);var kr=new wr["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),jr=n("e508"),Er=(n("a899"),n("9483"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_TRANSPORT:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Er["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(an["b"])(),r["a"].use(dr),r["a"].use(vr),r["a"].use(jr["a"]),new r["a"]({vuetify:kr,router:gt,store:rn,i18n:_r,render:function(e){return e(bt)}}).$mount("#app")},d040:function(e,t,n){},e1fc:function(e,t,n){},e6c7:function(e,t,n){"use strict";var r=n("af21"),a=n.n(r);a.a},eb13:function(e,t,n){"use strict";var r=n("d040"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"home":{"title":"Raiden dApp","welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"UDC Balance:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH","pending-transfers":"no pending transfers | 1 pending transfer | {amount} pending transfers"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"button":"Mint and deposit","button-main":"Deposit","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"transfer-title":"Make Transfer","deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"Transfer History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("4795"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.INFURA_ENDPOINT.startsWith("http")?t.INFURA_ENDPOINT:"https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return ky})),n.d(t,"b",(function(){return Pa})),n.d(t,"a",(function(){return Se})),n.d(t,"d",(function(){return ke})),n.d(t,"c",(function(){return ot})),n.d(t,"f",(function(){return ct})),n.d(t,"g",(function(){return zt}));var r={};n.r(r),n.d(r,"newBlock",(function(){return Ln})),n.d(r,"tokenMonitored",(function(){return Bn})),n.d(r,"channelOpen",(function(){return Mn})),n.d(r,"channelMonitor",(function(){return Fn})),n.d(r,"channelDeposit",(function(){return $n})),n.d(r,"channelWithdrawn",(function(){return qn})),n.d(r,"channelClose",(function(){return Hn})),n.d(r,"channelSettleable",(function(){return Vn})),n.d(r,"channelSettle",(function(){return Wn}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return Zn})),n.d(a,"matrixPresence",(function(){return Yn})),n.d(a,"matrixRoom",(function(){return Xn})),n.d(a,"matrixRoomLeave",(function(){return Qn})),n.d(a,"rtcChannel",(function(){return zn}));var o={};n.r(o),n.d(o,"messageSend",(function(){return _r})),n.d(o,"messageGlobalSend",(function(){return wr})),n.d(o,"messageReceived",(function(){return kr}));var i={};n.r(i),n.d(i,"transfer",(function(){return Pr})),n.d(i,"transferSigned",(function(){return Ur})),n.d(i,"transferProcessed",(function(){return Lr})),n.d(i,"transferSecret",(function(){return Br})),n.d(i,"transferSecretRegister",(function(){return Mr})),n.d(i,"transferSecretRequest",(function(){return Fr})),n.d(i,"transferSecretReveal",(function(){return $r})),n.d(i,"transferUnlock",(function(){return qr})),n.d(i,"transferUnlockProcessed",(function(){return Hr})),n.d(i,"transferExpire",(function(){return Vr})),n.d(i,"transferExpireProcessed",(function(){return Wr})),n.d(i,"transferRefunded",(function(){return Kr})),n.d(i,"withdrawReceive",(function(){return Zr})),n.d(i,"withdrawExpired",(function(){return Yr}));var c={};n.r(c),n.d(c,"pathFind",(function(){return zr})),n.d(c,"pfsListUpdated",(function(){return Jr})),n.d(c,"iouPersist",(function(){return ea})),n.d(c,"iouClear",(function(){return ta})),n.d(c,"udcDeposited",(function(){return na})),n.d(c,"udcWithdraw",(function(){return aa})),n.d(c,"udcWithdrawn",(function(){return oa}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return hu})),n.d(s,"initTokensRegistryEpic",(function(){return vu})),n.d(s,"initMonitorChannelsEpic",(function(){return gu})),n.d(s,"initMonitorProviderEpic",(function(){return Ou})),n.d(s,"tokenMonitoredEpic",(function(){return _u})),n.d(s,"channelOpenedEpic",(function(){return wu})),n.d(s,"channelMonitoredEpic",(function(){return Eu})),n.d(s,"channelOpenEpic",(function(){return Tu})),n.d(s,"channelDepositEpic",(function(){return Au})),n.d(s,"channelCloseEpic",(function(){return Su})),n.d(s,"channelUpdateEpic",(function(){return xu})),n.d(s,"channelSettleEpic",(function(){return Nu})),n.d(s,"channelSettleableEpic",(function(){return Cu})),n.d(s,"channelUnlockEpic",(function(){return Ru})),n.d(s,"confirmationEpic",(function(){return Iu}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return wl})),n.d(u,"matrixShutdownEpic",(function(){return kl})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Bl})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Ml})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return Fl})),n.d(u,"matrixUpdateCapsEpic",(function(){return $l})),n.d(u,"matrixCreateRoomEpic",(function(){return nd})),n.d(u,"matrixInviteEpic",(function(){return rd})),n.d(u,"matrixHandleInvitesEpic",(function(){return ad})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return od})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return id})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return cd})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return sd})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return ud})),n.d(u,"matrixMessageSendEpic",(function(){return wd})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return kd})),n.d(u,"matrixMessageReceivedEpic",(function(){return jd})),n.d(u,"deliveredEpic",(function(){return Ed})),n.d(u,"rtcConnectEpic",(function(){return Yd}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return nf})),n.d(l,"transferAutoExpireEpic",(function(){return ff})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return Bf})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Kf})),n.d(l,"initQueuePendingReceivedEpic",(function(){return Gf})),n.d(l,"transferMediateEpic",(function(){return ep})),n.d(l,"transferProcessedReceivedEpic",(function(){return sp})),n.d(l,"transferProcessedSendEpic",(function(){return up})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return lp})),n.d(l,"transferExpireProcessedEpic",(function(){return dp})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return fp})),n.d(l,"transferRefundedEpic",(function(){return wp})),n.d(l,"transferRetryMessageEpic",(function(){return Lp})),n.d(l,"transferSecretRequestedEpic",(function(){return Wp})),n.d(l,"transferSecretRevealEpic",(function(){return Gp})),n.d(l,"transferSecretRevealedEpic",(function(){return Zp})),n.d(l,"transferRequestUnlockEpic",(function(){return Yp})),n.d(l,"monitorSecretRegistryEpic",(function(){return Xp})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return Qp})),n.d(l,"transferAutoRegisterEpic",(function(){return zp})),n.d(l,"transferSecretRegisterEpic",(function(){return Jp})),n.d(l,"withdrawSendConfirmationEpic",(function(){return cb})),n.d(l,"autoExpireWithdrawEpic",(function(){return ub}));var d={};n.r(d),n.d(d,"pathFindServiceEpic",(function(){return qb})),n.d(d,"pfsCapacityUpdateEpic",(function(){return Hb})),n.d(d,"pfsFeeUpdateEpic",(function(){return Vb})),n.d(d,"pfsServiceRegistryMonitorEpic",(function(){return Wb})),n.d(d,"monitorUdcBalanceEpic",(function(){return Kb})),n.d(d,"monitorRequestEpic",(function(){return Zb})),n.d(d,"udcWithdrawRequestEpic",(function(){return Yb})),n.d(d,"udcCheckWithdrawPlannedEpic",(function(){return Xb})),n.d(d,"udcWithdrawPlannedEpic",(function(){return Qb}));var f=n("4795"),p=n.n(f),b=(n("a755"),n("86ae"),n("fa1e"),n("5c7d")),y=n.n(b),m=n("51b1"),h=n("aadd"),v=n("4f34"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("eb32")),Object.assign(v,{createNewMatrixCall:function(){return null}});var _=n("686e"),w=n("6934"),k=n("8404"),j=n("7508"),E=n("733d"),T=n("371e"),A=n("72f0"),S=n.n(A),x=n("e380"),N=n.n(x),C=n("4b96"),R=n("b2f7"),D=n("17f5"),I=n("a748"),P=n("9586"),U=n("1b92"),L=n("d263"),B=n("ebb6"),M=n("5670"),F=n("3fab"),$=n("a6c5"),q=n("1585"),H=n("e7ea");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}var G=function(){function e(){V(this,e)}return K(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Z,t)}}]),e}(),Z=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var z=function(){function e(){Y(this,e)}return Q(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}var re=function(){function e(){ee(this,e)}return ne(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ae,t)}}]),e}(),ae=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}var se=function(){function e(){oe(this,e)}return ce(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ue,t)}}]),e}(),ue=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var pe=function(){function e(){le(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,be,t)}}]),e}(),be=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}var ve=function(){function e(){ye(this,e)}return he(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,ge,t)}}]),e}(),ge=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}var ke,je=function(){function e(){Oe(this,e)}return we(e,null,[{key:"connect",value:function(e,t){return new H["Contract"](e,Ee,t)}}]),e}(),Ee=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Te=n("bf6c");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(ke||(ke={}));var Ae,Se,xe=Object(w["hexlify"])(Object(w["padZeros"])([],65));(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(Ae||(Ae={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Se||(Se={}));var Ne=n("bef3"),Ce=n("b047c"),Re=n.n(Ce),De=n("ffa9"),Ie=n("3498"),Pe=n("6f95"),Ue=n("74c8"),Le=n.n(Ue),Be=n("a32b");function Me(e){return Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(e){return Ve(e)||He(e)||qe(e)||$e()}function $e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(e,t){if(e){if("string"===typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function He(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ve(e){if(Array.isArray(e))return We(e)}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return t&&Ge(e.prototype,t),n&&Ge(e,n),e}function Ye(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}function Xe(e){var t=tt();return function(){var n,r=at(e);if(t){var a=at(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e){var t="function"===typeof Map?new Map:void 0;return Je=function(e){if(null===e||!nt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return et(e,arguments,at(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),rt(n,e)},Je(e)}function et(e,t,n){return et=tt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&rt(o,n.prototype),o},et.apply(null,arguments)}function tt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var ot=Be,it=Ne["p"](Ne["q"],Ne["v"]([Ne["q"],Ne["l"],Ne["d"],Ne["k"]])),ct=function(e){Ye(n,e);var t=Xe(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ke(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(ze(r),n.prototype),r}return Ze(n,[{key:"code",get:function(){var e,t=this;return null!==(e=Le()(ot,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(Je(Error));function st(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?et(ct,Fe(t)):new ct(null!==t&&void 0!==t?t:ot.RDN_ASSERT_ERROR,{condition:e})}var ut=Ne["h"]([Ne["t"]({name:Ne["q"]}),Ne["m"]({message:Ne["q"],stack:Ne["q"],details:it})]),lt=new Ne["a"]("Error",(function(e){return"object"===Me(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Pe["pipe"])(ut.decode(e),Object(Ie["map"])((function(e){return"details"in e?Object.assign(new ct(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return Object.assign({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function dt(e){De["ThrowReporter"].report(e)}function ft(e,t,n,r){try{var a=e.decode(t);return dt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new ct(n):o}}function pt(e){return null!=e}var bt=new Ne["a"]("BigNumber",w["BigNumber"].isBigNumber,(function(e,t){var n,r;if(w["BigNumber"].isBigNumber(e))return Ne["r"](e);try{return Ne["r"](Object(w["bigNumberify"])((null!==(r=null===(n=e)||void 0===n?void 0:n._hex)&&void 0!==r?r:e).toString()))}catch(a){return Ne["f"](e,t)}}),(function(e){return e.toString()})),yt=N()((function(e){return Ne["e"](Ne["q"],(function(t){return"string"===typeof t&&(e?Object(w["hexDataLength"])(t)===e:Object(w["isHexString"])(t))}),"HexString")})),mt=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Ne["e"](bt,(function(e){return bt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),ht=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Ne["e"](bt,(function(e){return bt.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),vt=yt(65),gt=yt(32),Ot=yt(32),_t=yt(32),wt=new Ne["a"]("Address",(function(e){try{return yt(20).is(e)&&Object(w["getAddress"])(e)===e}catch(t){return!1}}),(function(e,t){if(!yt(20).is(e))return Ne["f"](e,t);var n;try{n=Object(w["getAddress"])(e)}catch(r){return Ne["f"](e,t)}return n?Ne["r"](n):Ne["f"](e,t)}),Ne["g"]),kt=N()((function(e){return Ne["s"]([Ne["l"],e])}));function jt(e){return[Date.now(),e]}var Et=N()((function(e){return Ne["h"]([e,Ne["n"](Ne["t"]({signature:vt}))])})),Tt=N()((function(e){return new Ne["a"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Ne["r"](t):Ne["f"](t,n)}),Ne["g"])})),At=n("6f0b"),St=n("9044"),xt=n("7738"),Nt=n("d3fb"),Ct=n("4b59"),Rt=n("d792"),Dt=n("4d8c"),It=n.n(Dt),Pt=n("c707"),Ut=n.n(Pt);function Lt(e,t){return Ft(e)||Mt(e,t)||Ht(e,t)||Bt()}function Bt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mt(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ft(e){if(Array.isArray(e))return e}function $t(e){return Wt(e)||Vt(e)||Ht(e)||qt()}function qt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ht(e,t){if(e){if("string"===typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(e,t):void 0}}function Vt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Wt(e){if(Array.isArray(e))return Kt(e)}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gt=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Zt(e,t,n){return Object(St["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function Yt(e,t,n){var r=e.provider,a=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var a=Array.prototype.slice.call(n.values),o=Object.assign(Object.assign(Object.assign({},t),n),{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat($t(a),[o])}},o=U["a"],i=Object(D["a"])(-1);n&&(i=Object(P["a"])((function(){return r.blockNumber?Object(D["a"])(r.blockNumber):Zt(r,"block").pipe(Object(F["a"])(),Object(B["a"])((function(e){var t;return null!==(t=r.blockNumber)&&void 0!==t?t:e})))})).pipe(Object(Ct["a"])()),o=Object(xt["a"])(n,i).pipe(Object(F["a"])(),Object(Rt["a"])((function(e){var n=Lt(e,2),a=n[0],o=n[1];return Promise.all(t.map((function(e){return r.getLogs(Object.assign(Object.assign({},e),{fromBlock:a,toBlock:o}))})))})),Object($["a"])((function(e){return Object(Nt["a"])(Ut()(It()(e),["blockNumber"]))})),Object(B["a"])(a),Object(M["a"])(pt)));var c=i.pipe(Object(Rt["a"])((function(){return Object(Nt["a"])(t)})),Object($["a"])((function(e){return Zt(r,e)})),Object(B["a"])(a),Object(M["a"])(pt));return Object(I["a"])(o,c)}function Xt(e){return Gt(this,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=At["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function Qt(e){var t=e.send;e.send=function(n,r){return Gt(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}function zt(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var Jt,en=Ne["n"](Ne["p"](Ne["q"],Ne["b"]));function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nn=Ne["t"]({urls:Ne["v"]([Ne["q"],Ne["c"](Ne["q"])])}),rn=Ne["n"](Ne["h"]([Ne["t"]({matrixServerLookup:Ne["q"],revealTimeout:Ne["l"],settleTimeout:Ne["l"],httpTimeout:Ne["l"],discoveryRoom:Ne["v"]([Ne["q"],Ne["k"]]),pfsRoom:Ne["v"]([Ne["q"],Ne["k"]]),monitoringRoom:Ne["v"]([Ne["q"],Ne["k"]]),pfs:Ne["v"]([wt,Ne["q"],Ne["k"]]),pfsSafetyMargin:Ne["l"],matrixExcessRooms:Ne["l"],confirmationBlocks:Ne["l"],monitoringReward:Ne["v"]([Ne["k"],ht(32)]),logger:Ne["i"]((Jt={},tn(Jt,"",null),tn(Jt,"trace",null),tn(Jt,"debug",null),tn(Jt,"info",null),tn(Jt,"warn",null),tn(Jt,"error",null),Jt)),caps:Ne["v"]([Ne["k"],en]),fallbackIceServers:Ne["c"](nn),rateToSvt:Ne["p"](Ne["q"],ht(32))}),Ne["m"]({matrixServer:Ne["q"],subkey:Ne["d"]})])),an=Ne["n"](Ne["m"](Object.assign(Object.assign({},rn.type.types["0"].props),rn.type.types["1"].props)));function on(e,t){var n,r=e.network;return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(zt(r),"_discovery"),pfsRoom:"raiden_".concat(zt(r),"_path_finding"),monitoringRoom:"raiden_".concat(zt(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,confirmationBlocks:5,monitoringReward:Object(w["parseEther"])("5"),logger:"info",caps:(n={},tn(n,Se.NO_DELIVERY,!0),tn(n,Se.NO_MEDIATE,!0),tn(n,Se.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{}},t)}var cn=n("4472"),sn=n.n(cn),un=n("f9ce"),ln=n.n(un),dn=n("c5a2"),fn=n.n(dn),pn=n("f49b"),bn=n.n(pn);function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mn(e){return On(e)||gn(e)||vn(e)||hn()}function hn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vn(e,t){if(e){if("string"===typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}function gn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function On(e){if(Array.isArray(e))return _n(e)}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wn=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function kn(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function jn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Ne["t"](Object.assign(Object.assign(Object.assign({type:Ne["j"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Ne["j"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Object.assign({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Object.assign(Object.assign(Object.assign({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function En(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Ne["b"],c=jn(t,a,e),s=jn(n,o,e),u=jn(r,i,e,!0);return{request:c,success:s,failure:u}}function Tn(e){var t=function(t){return bn()(t.meta,e,(function(e,t){return bt.is(e)&&bt.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function An(e,t){var n=function(n){return kn([e.success,e.failure],n)&&Tn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Sn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return An(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function xn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wn(this,void 0,void 0,p.a.mark((function a(){return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",n.pipe(Object(F["a"])(r?Sn(e,t):An(e,t)),Object(B["a"])((function(t){if(e.failure.is(t))throw t.payload;if(!1===t.payload.confirmed)throw new ct(ot.RDN_TRANSACTION_REORG,{transactionHash:t.payload.txHash});return t.payload}))).toPromise());case 1:case"end":return a.stop()}}),a)})))}function Nn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return st(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(mn(a.map((function(e){return yn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Cn,Rn=Ne["q"],Dn=(Ne["q"],Ne["h"]([Ne["t"]({amount:ht(32),expiration:ht(32),secrethash:gt}),Ne["m"]({registered:Ne["j"](!0)})],"Lock")),In=Ne["n"](Ne["t"]({chainId:ht(32),tokenNetworkAddress:wt,channelId:ht(32),nonce:ht(8),transferredAmount:ht(32),lockedAmount:ht(32),locksroot:gt,additionalHash:gt})),Pn={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:k["HashZero"],additionalHash:k["HashZero"],signature:xe},Un=Ne["t"]({tokenNetwork:wt,partner:wt}),Ln=jn("block/new",Ne["t"]({blockNumber:Ne["l"]})),Bn=jn("token/monitored",Ne["h"]([Ne["t"]({token:wt,tokenNetwork:wt}),Ne["m"]({fromBlock:Ne["l"]})])),Mn=En(Un,"channel/open/request","channel/open/success","channel/open/failed",Ne["m"]({settleTimeout:Ne["l"],subkey:Ne["d"],deposit:ht(32)}),Ne["t"]({id:Ne["l"],token:wt,settleTimeout:Ne["l"],isFirstParticipant:Ne["d"],txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Fn=jn("channel/monitor",Ne["h"]([Ne["t"]({id:Ne["l"]}),Ne["m"]({fromBlock:Ne["l"]})]),Un),$n=En(Un,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Ne["h"]([Ne["t"]({deposit:ht(32)}),Ne["m"]({subkey:Ne["d"]})]),Ne["t"]({id:Ne["l"],participant:wt,totalDeposit:ht(32),txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),qn=jn("channel/withdraw/success",Ne["t"]({id:Ne["l"],participant:wt,totalWithdraw:ht(32),txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}),Un),Hn=En(Un,"channel/close/request","channel/close/success","channel/close/failure",Ne["v"]([Ne["m"]({subkey:Ne["d"]}),Ne["u"]]),Ne["t"]({id:Ne["l"],participant:wt,txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Vn=jn("channel/settleable",Ne["t"]({settleableBlock:Ne["l"]}),Un),Wn=En(Un,"channel/settle/request","channel/settle/success","channel/settle/failure",Ne["v"]([Ne["m"]({subkey:Ne["d"]}),Ne["u"]]),Ne["h"]([Ne["t"]({id:Ne["l"],txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}),Ne["m"]({locks:Ne["o"](Dn)})])),Kn=Ne["n"](Ne["t"]({userId:Ne["q"],accessToken:Ne["q"],deviceId:Ne["q"],displayName:Ne["q"]})),Gn=Ne["t"]({address:wt}),Zn=jn("matrix/setup",Ne["t"]({server:Ne["q"],setup:Kn})),Yn=En(Gn,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Ne["h"]([Ne["t"]({userId:Ne["q"],available:Ne["d"],ts:Ne["l"]}),Ne["m"]({caps:Ne["p"](Ne["q"],Ne["b"])})])),Xn=jn("matrix/room",Ne["t"]({roomId:Ne["q"]}),Gn),Qn=jn("matrix/room/leave",Ne["t"]({roomId:Ne["q"]}),Gn),zn=jn("rtc/channel",Ne["v"]([Ne["u"],Tt(RTCDataChannel)]),Gn);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Cn||(Cn={}));var Jn,er=Ne["n"](Ne["t"]({message_identifier:ht(8)})),tr=Ne["n"](Ne["t"]({type:Ne["j"](Cn.DELIVERED),delivered_message_identifier:ht(8)})),nr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.PROCESSED)}),er])),rr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.SECRET_REQUEST),payment_identifier:ht(8),secrethash:gt,amount:ht(32),expiration:ht(32)}),er])),ar=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.SECRET_REVEAL),secret:Ot}),er])),or=Ne["n"](Ne["h"]([Ne["t"]({chain_id:ht(32),token_network_address:wt,channel_identifier:ht(32),nonce:ht(8),transferred_amount:ht(32),locked_amount:ht(32),locksroot:gt}),er])),ir=Ne["n"](Ne["t"]({route:Ne["o"](wt)})),cr=Ne["n"](Ne["t"]({routes:Ne["o"](ir)})),sr=Ne["n"](Ne["h"]([Ne["t"]({payment_identifier:ht(8),token:wt,recipient:wt,lock:Dn,target:wt,initiator:wt,metadata:cr}),or])),ur=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.LOCKED_TRANSFER)}),sr])),lr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.REFUND_TRANSFER)}),sr])),dr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.UNLOCK),payment_identifier:ht(8),secret:Ot}),or])),fr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.LOCK_EXPIRED),recipient:wt,secrethash:gt}),or])),pr=Ne["n"](Ne["t"]({chain_id:ht(32),token_network_address:wt,channel_identifier:ht(32),participant:wt,total_withdraw:ht(32),nonce:ht(8),expiration:ht(32)})),br=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.WITHDRAW_REQUEST)}),pr,er])),yr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.WITHDRAW_CONFIRMATION)}),pr,er])),mr=Ne["n"](Ne["h"]([Ne["t"]({type:Ne["j"](Cn.WITHDRAW_EXPIRED)}),pr,er])),hr=Ne["n"](Ne["t"]({type:Ne["j"](Cn.PFS_CAPACITY_UPDATE),canonical_identifier:Ne["n"](Ne["t"]({chain_identifier:ht(32),token_network_address:wt,channel_identifier:ht(32)})),updating_participant:wt,other_participant:wt,updating_nonce:ht(8),other_nonce:ht(8),updating_capacity:ht(32),other_capacity:ht(32),reveal_timeout:ht(32)})),vr=Ne["n"](Ne["t"]({type:Ne["j"](Cn.PFS_FEE_UPDATE),canonical_identifier:Ne["n"](Ne["t"]({chain_identifier:ht(32),token_network_address:wt,channel_identifier:ht(32)})),updating_participant:wt,timestamp:Ne["q"],fee_schedule:Ne["t"]({cap_fees:Ne["d"],imbalance_penalty:Ne["v"]([Ne["k"],Ne["c"](Ne["s"]([ht(32),mt(32)]))]),proportional:mt(32),flat:mt(32)})})),gr=Ne["n"](Ne["t"]({type:Ne["j"](Cn.MONITOR_REQUEST),balance_proof:Ne["t"]({chain_id:ht(32),token_network_address:wt,channel_identifier:ht(32),nonce:ht(8),balance_hash:gt,additional_hash:gt,signature:vt}),monitoring_service_contract_address:wt,non_closing_participant:wt,non_closing_signature:vt,reward_amount:ht(32)})),Or=Ne["v"]([tr,nr,rr,ar,ur,lr,dr,fr,br,yr,mr,hr,vr,gr]),_r=En(Ne["t"]({address:wt,msgId:Ne["q"]}),"message/send/request","message/send/success","message/send/failure",Ne["t"]({message:Ne["v"]([Ne["q"],Et(Or)])}),void 0),wr=jn("message/global/send",Ne["t"]({message:Ne["v"]([Ne["q"],Et(Or)])}),Ne["t"]({roomName:Ne["q"]})),kr=jn("message/received",Ne["h"]([Ne["t"]({text:Ne["q"],ts:Ne["l"]}),Ne["m"]({message:Ne["v"]([Or,Et(Or)]),userId:Ne["q"],roomId:Ne["q"]})]),Ne["t"]({address:wt})),jr=n("27f3"),Er=n.n(jr),Tr=Ne["n"](Ne["h"]([Ne["t"]({result:Ne["c"](Ne["n"](Ne["t"]({path:Ne["o"](wt),estimated_fee:mt(32)})))}),Ne["m"]({feedback_token:Ne["q"]})])),Ar=Ne["c"](Ne["n"](Ne["t"]({path:Ne["o"](wt),fee:mt(32)}))),Sr=Ne["n"](Ne["t"]({address:wt,url:Ne["q"],rtt:Ne["l"],price:ht(32),token:wt})),xr=Ne["n"](Ne["t"]({sender:wt,receiver:wt,amount:ht(32),expiration_block:ht(32),one_to_n_address:wt,chain_id:ht(32)})),Nr=Ne["n"](Ne["t"]({last_iou:Et(xr)})),Cr={SENT:"sent",RECEIVED:"received"},Rr=Ne["n"](Ne["h"]([Ne["t"]({transfer:kt(Et(ur)),fee:mt(32),partner:wt}),Ne["m"]({secret:kt(Ne["t"]({value:Ot,registerBlock:Ne["l"]})),transferProcessed:kt(Et(nr)),refund:kt(Et(lr)),channelClosed:kt(gt),secretRequest:kt(Et(rr)),secretReveal:kt(Et(ar)),unlock:kt(Et(dr)),lockExpired:kt(Et(fr)),unlockProcessed:kt(Et(nr)),lockExpiredProcessed:kt(Et(nr))})])),Dr=Ne["n"](Ne["p"](Ne["q"],Rr));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Jn||(Jn={}));var Ir=Ne["t"]({secrethash:gt,direction:Ne["i"](Er()(Cr))}),Pr=En(Ir,"transfer/request","transfer/success","transfer/failure",Ne["h"]([Ne["t"]({tokenNetwork:wt,target:wt,value:ht(32),paths:Ar,paymentId:ht(8)}),Ne["m"]({secret:Ot,expiration:Ne["l"],initiator:wt})]),Ne["m"]({balanceProof:Et(In)})),Ur=jn("transfer/signed",Ne["t"]({message:Et(ur),fee:mt(32),partner:wt}),Ir),Lr=jn("transfer/processed",Ne["t"]({message:Et(nr)}),Ir),Br=jn("transfer/secret",Ne["t"]({secret:Ot}),Ir),Mr=En(Ir,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Ne["h"]([Ne["t"]({secret:Ot}),Ne["m"]({subkey:Ne["d"]})]),Ne["t"]({secret:Ot,txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})),Fr=jn("transfer/secret/request",Ne["t"]({message:Et(rr)}),Ir),$r=jn("transfer/secret/reveal",Ne["t"]({message:Et(ar)}),Ir),qr=En(Ir,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Ne["t"]({message:Et(dr),partner:wt})),Hr=jn("transfer/unlock/processed",Ne["t"]({message:Et(nr)}),Ir),Vr=En(Ir,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Ne["t"]({message:Et(fr),partner:wt})),Wr=jn("transfer/expire/processed",Ne["t"]({message:Et(nr)}),Ir),Kr=jn("transfer/refunded",Ne["t"]({message:Et(lr),partner:wt}),Ir),Gr=Ne["t"]({tokenNetwork:wt,partner:wt,totalWithdraw:ht(32),expiration:Ne["l"]}),Zr=En(Gr,"withdraw/receive/request","withdraw/receive/success","withdraw/receive/failure",Ne["t"]({message:Et(br)}),Ne["t"]({message:Et(yr)}),Ne["t"]({message:Et(mr)})),Yr=jn("withdraw/expired",Ne["t"]({participant:wt}),Gr),Xr=Ne["t"]({tokenNetwork:wt,target:wt,value:ht(32)}),Qr=Ne["t"]({tokenNetwork:wt,serviceAddress:wt}),zr=En(Xr,"path/find/request","path/find/success","path/find/failure",Ne["m"]({paths:Ar,pfs:Ne["v"]([Sr,Ne["k"]])}),Ne["t"]({paths:Ar})),Jr=jn("pfs/list/updated",Ne["t"]({pfsList:Ne["o"](wt)})),ea=jn("iou/persist",Ne["t"]({iou:Et(xr)}),Qr),ta=jn("iou/clear",void 0,Qr),na=jn("udc/deposited",ht(32)),ra=Ne["t"]({amount:ht(32)}),aa=En(ra,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Ne["u"],Ne["h"]([Ne["t"]({block:Ne["l"]}),Ne["m"]({txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])})])),oa=jn("udc/withdrawn",Ne["t"]({withdrawal:ht(32),txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}),ra);function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ca=jn("raiden/shutdown",Ne["t"]({reason:Ne["v"]([Ne["j"](Ae.STOP),Ne["j"](Ae.ACCOUNT_CHANGED),Ne["j"](Ae.NETWORK_CHANGED),lt])})),sa=jn("raiden/config/update",an),ua=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({raidenShutdown:ca,raidenConfigUpdate:sa},r),a),o),i),c),la=[ua.raidenShutdown,ua.newBlock,ua.matrixPresence.success,ua.tokenMonitored,ua.udcWithdrawn,ua.udcWithdraw.failure],da=fn()(ua,(function(e,t){return Object.assign(Object.assign({},e),"type"in t?ia({},t.type,t):sn()(t,ln()("type")))}),{}),fa=Ne["n"](Ne["t"]({type:Ne["q"],payload:Ne["n"](Ne["t"]({txHash:gt,txBlock:Ne["l"],confirmed:Ne["v"]([Ne["u"],Ne["d"]])}))})),pa=new Ne["a"]("ConfirmableAction",fa.is,(function(e,t){return Ie["either"].chain(fa.validate(e,t),(function(e){var n=e.type;return n in da?da[n].codec.validate(e,t):Ne["f"](e,t)}))}),(function(e){return da[e.type].codec.encode(e)}));function ba(e){return Object.assign(Object.assign({},e),{version:0})}function ya(e,t){return Oa(e)||ga(e,t)||ha(e,t)||ma()}function ma(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ha(e,t){if(e){if("string"===typeof e)return va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?va(e,t):void 0}}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ga(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Oa(e){if(Array.isArray(e))return e}function _a(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=ya(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function wa(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var ka=n("948b"),ja=n("3b2b"),Ea=n("ad02");function Ta(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Aa(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(w["bigNumberify"])(e)),"string"!==typeof e||Object(ka["isHexString"])(e)||(e=Object(w["toUtf8Bytes"])(e)),Object(ka["isArrayish"])(e)&&(e=Object(ka["hexlify"])(e)),bt.is(e)){if(e.lt(0))throw new ct(ot.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new ct(ot.DTA_NUMBER_TOO_LARGE);n=Object(ka["hexZeroPad"])(Object(ka["hexlify"])(e),t)}else{if("string"!==typeof e)throw new ct(ot.DTA_UNENCODABLE_DATA);if(Object(ka["hexDataLength"])(e)!==t)throw new ct(ot.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var Sa,xa=function(e){return null!=e&&e["isLosslessNumber"]};function Na(e){return Ea["parse"](e,(function(e,t){if(Ta(e),xa(t))try{return t.valueOf()}catch(n){return Object(w["bigNumberify"])(t.toString())}return t}))}function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Ta(e),w["BigNumber"].isBigNumber(t)?t.toString():t},n=arguments.length>2?arguments[2]:void 0;return Ea["stringify"](e,t,n)}function Ra(e){return Ra="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ia,Pa,Ua=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},La=(Sa={},Da(Sa,Cn.DELIVERED,12),Da(Sa,Cn.PROCESSED,0),Da(Sa,Cn.SECRET_REQUEST,3),Da(Sa,Cn.SECRET_REVEAL,11),Da(Sa,Cn.LOCKED_TRANSFER,7),Da(Sa,Cn.REFUND_TRANSFER,8),Da(Sa,Cn.UNLOCK,4),Da(Sa,Cn.LOCK_EXPIRED,13),Da(Sa,Cn.WITHDRAW_REQUEST,15),Da(Sa,Cn.WITHDRAW_CONFIRMATION,16),Da(Sa,Cn.WITHDRAW_EXPIRED,17),Da(Sa,Cn.PFS_CAPACITY_UPDATE,-1),Da(Sa,Cn.PFS_FEE_UPDATE,-1),Da(Sa,Cn.MONITOR_REQUEST,-1),Sa);function Ba(e){var t=e.routes.map((function(e){return Object(w["keccak256"])(w["RLP"].encode(e.route))}));return Object(w["keccak256"])(w["RLP"].encode(t))}function Ma(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&r===k["HashZero"]?k["HashZero"]:Object(w["keccak256"])(Object(ka["concat"])([Aa(t,32),Aa(n,32),Aa(r,32)]))}function Fa(e){switch(e.type){case Cn.LOCKED_TRANSFER:case Cn.REFUND_TRANSFER:var t=Object(ka["concat"])([Aa(La[e.type],1),Aa(e.message_identifier,8),Aa(e.payment_identifier,8),Aa(e.lock.expiration,32),Aa(e.token,20),Aa(e.recipient,20),Aa(e.target,20),Aa(e.initiator,20),Aa(e.lock.secrethash,32),Aa(e.lock.amount,32)]);return e.type===Cn.LOCKED_TRANSFER&&(t=Object(ka["concat"])([t,Ba(e.metadata)])),Object(w["keccak256"])(t);case Cn.UNLOCK:return Object(w["keccak256"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(e.message_identifier,8),Aa(e.payment_identifier,8),Aa(e.secret,32)]));case Cn.LOCK_EXPIRED:return Object(w["keccak256"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(e.message_identifier,8),Aa(e.recipient,20),Aa(e.secrethash,32)]))}}function $a(e){var t;switch(e.type){case Cn.DELIVERED:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(0,3),Aa(e.delivered_message_identifier,8)]));case Cn.PROCESSED:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(0,3),Aa(e.message_identifier,8)]));case Cn.LOCKED_TRANSFER:case Cn.REFUND_TRANSFER:case Cn.UNLOCK:case Cn.LOCK_EXPIRED:var n=Fa(e),r=Ma({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(ka["hexlify"])(Object(ka["concat"])([Aa(e.token_network_address,20),Aa(e.chain_id,32),Aa(Ia.BALANCE_PROOF,32),Aa(e.channel_identifier,32),Aa(r,32),Aa(e.nonce,32),Aa(n,32)]));case Cn.SECRET_REQUEST:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(0,3),Aa(e.message_identifier,8),Aa(e.payment_identifier,8),Aa(e.secrethash,32),Aa(e.amount,32),Aa(e.expiration,32)]));case Cn.SECRET_REVEAL:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(0,3),Aa(e.message_identifier,8),Aa(e.secret,32)]));case Cn.WITHDRAW_REQUEST:case Cn.WITHDRAW_CONFIRMATION:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(e.token_network_address,20),Aa(e.chain_id,32),Aa(Ia.WITHDRAW,32),Aa(e.channel_identifier,32),Aa(e.participant,20),Aa(e.total_withdraw,32),Aa(e.expiration,32)]));case Cn.WITHDRAW_EXPIRED:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(La[e.type],1),Aa(0,3),Aa(e.nonce,32),Aa(e.message_identifier,8),Aa(e.token_network_address,20),Aa(e.chain_id,32),Aa(Ia.WITHDRAW,32),Aa(e.channel_identifier,32),Aa(e.participant,20),Aa(e.total_withdraw,32),Aa(e.expiration,32)]));case Cn.PFS_CAPACITY_UPDATE:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(e.canonical_identifier.chain_identifier,32),Aa(e.canonical_identifier.token_network_address,20),Aa(e.canonical_identifier.channel_identifier,32),Aa(e.updating_participant,20),Aa(e.other_participant,20),Aa(e.updating_nonce,8),Aa(e.other_nonce,8),Aa(e.updating_capacity,32),Aa(e.other_capacity,32),Aa(e.reveal_timeout,32)]));case Cn.PFS_FEE_UPDATE:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(e.canonical_identifier.chain_identifier,32),Aa(e.canonical_identifier.token_network_address,20),Aa(e.canonical_identifier.channel_identifier,32),Aa(e.updating_participant,20),Aa(e.fee_schedule.cap_fees,1),Aa(e.fee_schedule.flat,32),Aa(e.fee_schedule.proportional,32),Object(ja["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),Aa(e.timestamp,19)]));case Cn.MONITOR_REQUEST:return Object(ka["hexlify"])(Object(ka["concat"])([Aa(e.monitoring_service_contract_address,20),Aa(e.balance_proof.chain_id,32),Aa(Ia.MS_REWARD,32),Aa(e.balance_proof.token_network_address,20),Aa(e.non_closing_participant,20),Aa(e.non_closing_signature,65),Aa(e.reward_amount,32)]))}}function qa(e){return vt.is(e.signature)}function Ha(e){return Object(w["verifyMessage"])(Object(ka["arrayify"])($a(e)),e.signature)}function Va(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:Fa(e),signature:e.signature}}function Wa(e){return Ca("signature"in e?Et(Or).encode(e):Or.encode(e))}function Ka(e){var t=Na(e);return st(t&&"object"===Ra(t)&&"type"in t&&Object.values(Cn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),ft("signature"in t?Et(Or):Or,t)}function Ga(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},r=n.log;return Ua(this,void 0,void 0,p.a.mark((function n(){var a;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!qa(t)){n.next=2;break}return n.abrupt("return",t);case 2:return r.debug('Signing message "'.concat(t.type,'"'),t),n.next=5,e.signMessage(Object(ka["arrayify"])($a(t)));case 5:return a=n.sent,n.abrupt("return",Object.assign(Object.assign({},t),{signature:a}));case 7:case"end":return n.stop()}}),n)})))}function Za(e){return function(t){return kr.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(Ia||(Ia={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(Pa||(Pa={}));var Ya=Ne["n"](Ne["t"]({address:wt,deposit:ht(32),withdraw:ht(32),locks:Ne["o"](Dn),balanceProof:Et(In),withdrawRequests:Ne["o"](Et(br)),nextNonce:ht(8)})),Xa=Ne["h"]([Ne["n"](Ne["t"]({id:Ne["l"],token:wt,tokenNetwork:wt,settleTimeout:Ne["l"],isFirstParticipant:Ne["d"],openBlock:Ne["l"],own:Ya,partner:Ya})),Ne["v"]([Ne["n"](Ne["t"]({state:Ne["v"]([Ne["j"](Pa.open),Ne["j"](Pa.closing)])})),Ne["h"]([Ne["n"](Ne["t"]({closeBlock:Ne["l"],closeParticipant:wt})),Ne["v"]([Ne["n"](Ne["t"]({state:Ne["v"]([Ne["j"](Pa.closed),Ne["j"](Pa.settleable),Ne["j"](Pa.settling)])})),Ne["n"](Ne["t"]({state:Ne["j"](Pa.settled),settleBlock:Ne["l"]}))])])])]);function Qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function za(e,t){return ro(e)||no(e,t)||eo(e,t)||Ja()}function Ja(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eo(e,t){if(e){if("string"===typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?to(e,t):void 0}}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function no(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ro(e){if(Array.isArray(e))return e}function ao(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=za(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:Pn,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function oo(e){for(var t,n={},r=function(){for(var t=za(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=za(s[c],2),l=u[0],d=u[1];ao(d,{own:e.address,partner:l});var f=Le()(e.tokens,(function(e){return e===r}));Object.assign(d,{token:f,tokenNetwork:r}),Object.assign(n,Qa({},"".concat(l,"@").concat(r),d))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function io(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=co(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function co(e,t){if(e){if("string"===typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e){var t,n=io(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(w["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}var lo=[ba,_a,wa,oo,uo],fo=lo.length-1;function po(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(lo[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}var bo=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},yo=Ne["n"](Ne["t"]({address:wt,version:Ne["j"](fo),chainId:Ne["l"],registry:wt,blockNumber:Ne["l"],config:an,channels:Ne["n"](Ne["p"](Rn,Xa)),oldChannels:Ne["n"](Ne["p"](Ne["q"],Xa)),tokens:Ne["n"](Ne["p"](Ne["q"],wt)),transport:Ne["n"](Ne["m"]({server:Ne["q"],setup:Kn,rooms:Ne["n"](Ne["p"](Ne["q"],Ne["c"](Ne["q"])))})),sent:Dr,received:Dr,iou:Ne["n"](Ne["p"](Ne["q"],Ne["p"](Ne["q"],Et(xr)))),pendingTxs:Ne["o"](pa)}));function mo(e){return Ca(yo.encode(e),void 0,2)}function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=Na(e));var r=po(e,fo,{log:n});try{return ft(yo,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function vo(e){var t,n=e.network,r=e.address,a=e.contractsInfo,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:r,version:fo,chainId:n.chainId,registry:a.TokenNetworkRegistry.address,blockNumber:a.TokenNetworkRegistry.block_number,config:null!==(t=o.config)&&void 0!==t?t:{},channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[]}}var go=vo({network:Object(w["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0}}}),Oo=function(e){return e&&"function"===typeof e.getItem},_o=function(e,t,n,r,a){return bo(void 0,void 0,void 0,p.a.mark((function o(){var i,c,s,u,l,d,f,b,m,h,v;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=y.a.getLogger("raiden:".concat(n)),Oo(r)?(u=r,l=void 0):Oo(null===r||void 0===r?void 0:r.storage)?(u=r.storage,l=r.state):(u=void 0,l=r),d=void 0,l&&(d=ho(l,{log:i})),!u){o.next=23;break}return f="raiden_".concat(zt(e),"_").concat(t.TokenNetworkRegistry.address,"_").concat(n),o.next=8,u.getItem(f);case 8:if(b=o.sent,!b){o.next=20;break}if(m=ho(b,{log:i}),!d){o.next=19;break}if(!(d.blockNumber<m.blockNumber)){o.next=16;break}throw new ct(ot.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:d.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(d.blockNumber));case 17:o.next=20;break;case 19:d=m;case 20:h=Re()((function(e){u.setItem(f,mo(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return d||(d=vo({network:e,address:n,contractsInfo:t})),v=on({network:e},a),o.abrupt("return",{state:d,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return o.stop()}}),o)})))},wo=n("9bf7"),ko=n.n(wo);function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eo(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=Object.assign(Object.assign({},r),jo({},o,s)))}}return r}}var To=n("c4cc"),Ao=n("2313"),So=n("9f2d"),xo=n("69dd"),No=n("742d");function Co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t){return Lo(e)||Uo(e,t)||Io(e,t)||Do()}function Do(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Io(e,t){if(e){if("string"===typeof e)return Po(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Po(e,t):void 0}}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Lo(e){if(Array.isArray(e))return e}function Bo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(q["a"].apply(void 0,t),Object(xo["a"])())}}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(xo["a"])(),Object($["a"])((function(e){return Object(Nt["a"])(Object.entries(e))})),Object(No["a"])((function(t,n){var r=t.acc,a=Ro(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:Object.assign(Object.assign({},r),Co({},o,i)),changed:[o,i]}}),{acc:{}}),Object(q["a"])("changed"),Object(M["a"])(pt))}}function Fo(e,t){return Ho(e)||qo(e,t)||Ko(e,t)||$o()}function $o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ho(e){if(Array.isArray(e))return e}function Vo(e){return Zo(e)||Go(e)||Ko(e)||Wo()}function Wo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ko(e,t){if(e){if("string"===typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yo(e,t):void 0}}function Go(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zo(e){if(Array.isArray(e))return Yo(e)}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xo(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Qo(e){return"".concat(e.id,"#").concat(Xo(e))}function zo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t.gt(e)?t:e}),k["Zero"])}function Jo(e){var t=k["Zero"];if(e.state!==Pa.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,ownOnchainUnlocked:t,ownUnlocked:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t,partnerOnchainUnlocked:t,partnerUnlocked:t};var n=e.own.withdraw,r=e.partner.withdraw,a=e.own.balanceProof.transferredAmount,o=e.partner.balanceProof.transferredAmount,i=e.own.balanceProof.lockedAmount,c=e.partner.balanceProof.lockedAmount,s=o.sub(a),u=a.sub(o),l=zo.apply(void 0,[n].concat(Vo(e.own.withdrawRequests.map((function(e){return e.total_withdraw}))))),d=zo.apply(void 0,[r].concat(Vo(e.partner.withdrawRequests.map((function(e){return e.total_withdraw}))))),f=e.own.deposit.sub(l).sub(i).add(s),p=e.partner.deposit.sub(d).sub(c).add(u),b=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),y=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),m=a.add(b),h=o.add(y);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:f,ownOnchainUnlocked:b,ownUnlocked:m,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:p,partnerOnchainUnlocked:y,partnerUnlocked:h}}function ei(e,t,n){var r=n.log;return function(n){return n.pipe(Object(To["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object($["a"])((function(e){return e.wait()})),Object(B["a"])((function(n){var a,o,i;if(!n.status||!n.transactionHash||!n.blockNumber)throw new ct(t,{status:null!==(a=n.status)&&void 0!==a?a:null,transactionHash:null!==(o=n.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=n.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(n.transactionHash,'" successfuly mined!')),n})))}}function ti(e){return e.pipe(Object(q["a"])("channels"),Mo(),Object(q["a"])(1),Object(Ao["a"])(Qo,void 0,void 0,(function(){return new C["a"](1)})),Object(B["a"])((function(t){var n=t.key.split("#"),r=Fo(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(So["a"])(e.pipe(Object(M["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function ni(e){return ni="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni(e)}function ri(e,t){return ii(e)||oi(e,t)||ui(e,t)||ai()}function ai(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ii(e){if(Array.isArray(e))return e}function ci(e){return di(e)||li(e)||ui(e)||si()}function si(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ui(e,t){if(e){if("string"===typeof e)return fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fi(e,t):void 0}}function li(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function di(e){if(Array.isArray(e))return fi(e)}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var yi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},mi=Nn(go.blockNumber).handle(Ln,(function(e,t){bi(e);var n=t.payload;return n.blockNumber})),hi=Nn(go.tokens).handle(Bn,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return Object.assign(Object.assign({},e),pi({},r,a))})),vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(pa.is(t)){if(void 0===t.payload.confirmed)return[].concat(ci(e),[t]);var n=e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}));return n.length!==e.length?n:e}return e},gi={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:Pn,withdrawRequests:[],nextNonce:k["One"]};function Oi(e,t){var n,r,a=Xo(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:Pa.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:Object.assign(Object.assign({},gi),{address:e.address}),partner:Object.assign(Object.assign({},gi),{address:t.meta.partner})};return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},a,i))})}function _i(e,t){var n;if(!t.payload.confirmed)return e;var r=Xo(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==Pa.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=qn.is(t)?["withdraw",t.payload.totalWithdraw,a[o].withdrawRequests.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].withdrawRequests],c=ri(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=Object.assign(Object.assign({},a),pi({},o,Object.assign(Object.assign({},a[o]),(n={},pi(n,s,u),pi(n,"withdrawRequests",l),n)))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},r,a))}))}function wi(e,t){var n=Xo(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===Pa.open)r=Object.assign(Object.assign({},r),{state:Pa.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=Object.assign(Object.assign({},r),{state:Pa.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},n,r))})}function ki(e,t){var n=Xo(t.meta),r=e.channels[n];if(!r)return e;if(Hn.request.is(t)&&r.state===Pa.open)r=Object.assign(Object.assign({},r),{state:Pa.closing});else if(Wn.request.is(t)&&r.state===Pa.settleable)r=Object.assign(Object.assign({},r),{state:Pa.settling});else{if(!Vn.is(t)||r.state!==Pa.closed)return e;r=Object.assign(Object.assign({},r),{state:Pa.settleable})}return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},n,r))})}function ji(e,t){var n=Xo(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==Pa.settling)return Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},n,Object.assign(Object.assign({},r),{state:Pa.settling})))});if(t.payload.confirmed){var a=e.channels,o=n,i=(a[o],yi(a,["symbol"===ni(o)?o:o+""]));return Object.assign(Object.assign({},e),{channels:i,oldChannels:Object.assign(Object.assign({},e.oldChannels),pi({},Qo(r),Object.assign(Object.assign({},r),{state:Pa.settled,settleBlock:t.payload.txBlock})))})}return e}function Ei(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer[1],a=Xo({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===Cr.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),pi({},a,Object.assign(Object.assign({},e.channels[a]),pi({},o,Object.assign(Object.assign({},e.channels[a][o]),{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:Object.assign(Object.assign({},e),{registered:!0})}))})))))}):e}var Ti=Nn(go).handle(Mn.success,Oi).handle([$n.success,qn],_i).handle([Hn.request,Vn,Wn.request],ki).handle(Hn.success,wi).handle(Wn.success,ji).handle(Mr.success,Ei),Ai=Eo({blockNumber:mi,tokens:hi,pendingTxs:vi},go),Si=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go,t=arguments.length>1?arguments[1]:void 0;return[Ai,Ti].reduce((function(e,n){return n(e,t)}),e)},xi=Si;function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ci(e){return Pi(e)||Ii(e)||Di(e)||Ri()}function Ri(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Di(e,t){if(e){if("string"===typeof e)return Ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ui(e,t):void 0}}function Ii(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Pi(e){if(Array.isArray(e))return Ui(e)}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Li,Bi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Mi=Nn(go.transport).handle(Zn,(function(e,t){e.rooms;var n=Bi(e,["rooms"]);return Object.assign(Object.assign({},e.server!==t.payload.server?n:e),t.payload)})).handle(Xn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Ni({},t.meta.address,[t.payload.roomId].concat(Ci((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(Qn,(function(e,t){var n,r;return Object.assign(Object.assign({},e),{rooms:Object.assign(Object.assign({},e.rooms),Ni({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Fi=Eo({transport:Mi},go),$i=Fi;function qi(e){return Wi(e)||Vi(e)||Zi(e)||Hi()}function Hi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vi(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Wi(e){if(Array.isArray(e))return Yi(e)}function Ki(e,t){return Qi(e)||Xi(e,t)||Zi(e,t)||Gi()}function Gi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zi(e,t){if(e){if("string"===typeof e)return Yi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yi(e,t):void 0}}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Qi(e){if(Array.isArray(e))return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ji=(Li={},zi(Li,Cr.SENT,"own"),zi(Li,Cr.RECEIVED,"partner"),Li);function ec(e,t){var n,r,a,o,i,c,s=t.meta.secrethash,u=Mr.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(o=null===(a=null===(r=null===(n=e[t.meta.direction][s])||void 0===n?void 0:n.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)&&void 0!==o?o:0;return s in e[t.meta.direction]&&(null===(c=null===(i=e[t.meta.direction][s].secret)||void 0===i?void 0:i[1])||void 0===c?void 0:c.registerBlock)!==u&&(e=Object.assign(Object.assign({},e),zi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),zi({},s,Object.assign(Object.assign({},e[t.meta.direction][s]),{secret:jt({value:t.payload.secret,registerBlock:u})})))))),e}function tc(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Xo({tokenNetwork:a,partner:o}),c=Ji[t.meta.direction],s=e.channels[i];if(Ur.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==Pa.open||!n.nonce.eq(s[c].nextNonce))return e;var u=Ur.is(t)?[[].concat(qi(s[c].locks),[t.payload.message.lock]),{transfer:jt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Object.assign(Object.assign({},e[t.meta.direction][r]),zi({},qr.success.is(t)?"unlock":"lockExpired",jt(t.payload.message)))],l=Ki(u,2),d=l[0],f=l[1];return s=Object.assign(Object.assign({},s),zi({},c,Object.assign(Object.assign({},s[c]),{locks:d,balanceProof:Va(n),nextNonce:s[c].nextNonce.add(1)}))),Object.assign(Object.assign({},e),zi({channels:Object.assign(Object.assign({},e.channels),zi({},i,s))},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),zi({},r,f))))}function nc(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Object.assign(Object.assign({},e),zi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),zi({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretRequest:jt(t.payload.message)}))))):e}function rc(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Object.assign(Object.assign({},e),zi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),zi({},n,Object.assign(Object.assign({},e[t.meta.direction][n]),{secretReveal:jt(t.payload.message)})))))}function ac(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(Lr.is(t))n="transferProcessed";else if(Hr.is(t))n="unlockProcessed";else if(Wr.is(t))n="lockExpiredProcessed";else{if(!Kr.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Object.assign(Object.assign({},e),zi({},t.meta.direction,Object.assign(Object.assign({},e[t.meta.direction]),zi({},r,Object.assign(Object.assign({},e[t.meta.direction][r]),zi({},n,jt(t.payload.message)))))))}function oc(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Ki(a[r],2),i=o[0],c=o[1],s=c.transfer[1];s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Object.assign(Object.assign({},n),zi({},i,Object.assign(Object.assign({},c),{channelClosed:jt(t.payload.txHash)}))))}n!==e.sent&&(e=Object.assign(Object.assign({},e),{sent:n}));for(var u=e.received,l=0,d=Object.entries(u);l<d.length;l++){var f=Ki(d[l],2),p=f[0],b=f[1],y=b.transfer[1];y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Object.assign(Object.assign({},u),zi({},p,Object.assign(Object.assign({},b),{channelClosed:jt(t.payload.txHash)}))))}return u!==e.received&&(e=Object.assign(Object.assign({},e),{received:u})),e}function ic(e,t){var n=t.payload.message,r=Xo(t.meta),a=n.participant===t.meta.partner!==Zr.success.is(t)?"partner":"own",o=e.channels[r];if((null===o||void 0===o?void 0:o.state)!==Pa.open||!n.nonce.eq(o[a].nextNonce))return e;var i=o[a].withdrawRequests;return Zr.request.is(t)&&(i=[].concat(qi(o[a].withdrawRequests),[t.payload.message])),o=Object.assign(Object.assign({},o),zi({},a,Object.assign(Object.assign({},o[a]),{withdrawRequests:i,nextNonce:o[a].nextNonce.add(1)}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),zi({},r,o))})}function cc(e,t){var n=Xo(t.meta),r=t.payload.participant===t.meta.partner?"partner":"own",a=e.channels[n];if((null===a||void 0===a?void 0:a.state)!==Pa.open)return e;var o=a[r].withdrawRequests.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return a=Object.assign(Object.assign({},a),zi({},r,Object.assign(Object.assign({},a[r]),{withdrawRequests:o}))),Object.assign(Object.assign({},e),{channels:Object.assign(Object.assign({},e.channels),zi({},n,a))})}var sc=Nn(go).handle([Br,Mr.success],ec).handle([Ur,qr.success,Vr.success],tc).handle([Lr,Hr,Wr,Kr],ac).handle(Fr,nc).handle($r,rc).handle(Hn.success,oc).handle([Zr.request,Zr.success,Zr.failure],ic).handle(Yr,cc),uc=sc;function lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dc=Nn(go.iou).handle(ea,(function(e,t){return Object.assign(Object.assign({},e),lc({},t.meta.tokenNetwork,Object.assign(Object.assign({},e[t.meta.tokenNetwork]),lc({},t.meta.serviceAddress,t.payload.iou))))})).handle(ta,(function(e,t){return ko()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),fc=Eo({iou:dc},go),pc=fc;function bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yc(e,t){return Oc(e)||gc(e,t)||hc(e,t)||mc()}function mc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hc(e,t){if(e){if("string"===typeof e)return vc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vc(e,t):void 0}}function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Oc(e){if(Array.isArray(e))return e}var _c=Nn(go).handle(sa,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=yc(o[a],2),c=i[0],s=i[1];void 0!==s?r=Object.assign(Object.assign({},r),bc({},c,s)):c in r&&(r=ko()(c,r))}return r===e.config?e:Object.assign(Object.assign({},e),{config:r})})),wc={configReducer:_c,channelsReducer:xi,transportReducer:$i,transfersReducer:uc,servicesReducer:pc},kc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go,t=arguments.length>1?arguments[1]:void 0;return Object.values(wc).reduce((function(e,n){return n(e,t)}),e)},jc=n("a744"),Ec=n("8ef6"),Tc=n("f59d"),Ac=n("a0ac"),Sc=n.n(Ac),xc=n("13ea"),Nc=n.n(xc),Cc=n("63ea"),Rc=n.n(Cc);function Dc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Uc(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Ic(e,t){return Mc(e)||Bc(e,t)||Uc(e,t)||Pc()}function Pc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uc(e,t){if(e){if("string"===typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mc(e){if(Array.isArray(e))return e}function Fc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $c=N()((function(e){return e.pipe(Object(M["a"])(Yn.success.is),Object(No["a"])((function(e,t){return Object.assign(Object.assign({},e),Fc({},t.meta.address,t))}),{}),Object(Ct["a"])(),Object(jc["a"])({}))}));function qc(e){return Object.entries(e).filter((function(e){var t=Ic(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=Ic(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Hc(e){var t;if(e){var n={};try{var r,a=Dc(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var Vc,Wc=n("808d"),Kc=n("5e53"),Gc=n("744c"),Zc=n("c575"),Yc=n("66aa"),Xc=n("b7d7"),Qc=n("6863"),zc=n("e95d"),Jc=n("fcf1"),es=n("b4cc1"),ts=n("0318"),ns=n("b389"),rs=n("0ca2"),as=n("cd9d"),os=n.n(as),is=n("8358"),cs=n("ddfd");function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function us(e,t){return fs(e)||ds(e,t)||bs(e,t)||ls()}function ls(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ds(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fs(e){if(Array.isArray(e))return e}function ps(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=bs(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function bs(e,t){if(e){if("string"===typeof e)return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ys(e,t):void 0}}function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ms(e){var t,n=[],r=ps(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Aa(a.expiration,32),Aa(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(w["keccak256"])(Object(ka["concat"])(n))}function hs(e){return Object(w["sha256"])(e)}function vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(ka["hexlify"])(Object(w["randomBytes"])(e))}function gs(){return Object(w["bigNumberify"])(Date.now())}function Os(){return Object(w["bigNumberify"])(Date.now())}function _s(e){if("direction"in e)return e.direction;var t=e.transfer[1];return t.recipient===e.partner?Cr.SENT:Cr.RECEIVED}function ws(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(_s(e),":").concat(e.transfer[1].lock.secrethash)}var ks=new RegExp("^(".concat(Object.values(Cr).join("|"),"):0x[a-z0-9]{64}$"),"i");function js(e){st(ks.test(e),"Invalid transferKey format");var t=e.split(":"),n=us(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function Es(e){return function(t){return t[e]?t[e][0]:void 0}}var Ts=(Vc={},ss(Vc,Jn.expired,Es("lockExpiredProcessed")),ss(Vc,Jn.unlocked,Es("unlockProcessed")),ss(Vc,Jn.expiring,Es("lockExpired")),ss(Vc,Jn.unlocking,Es("unlock")),ss(Vc,Jn.registered,(function(e){var t,n;return(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)?e.secret[0]:void 0})),ss(Vc,Jn.revealed,Es("secretReveal")),ss(Vc,Jn.requested,Es("secretRequest")),ss(Vc,Jn.closed,Es("channelClosed")),ss(Vc,Jn.refunded,Es("refund")),ss(Vc,Jn.received,Es("transferProcessed")),ss(Vc,Jn.pending,Es("transfer")),Vc);function As(e){for(var t,n,r,a,o=new Date(e.transfer[0]),i=o,c=Jn.pending,s=0,u=Object.entries(Ts);s<u.length;s++){var l=us(u[s],2),d=l[0],f=l[1],p=f(e);if(void 0!==p){c=d,i=new Date(p);break}}var b=e.transfer[1],y=_s(e),m=b.lock.amount.sub(e.fee),h=e.secretRequest&&e.secretRequest[1].amount.lt(m),v=!!(e.secretReveal||e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock))||!(h||e.refund||e.lockExpired||e.channelClosed)&&void 0,g=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(a=null===(r=e.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||e.channelClosed);return{key:ws(e),secrethash:b.lock.secrethash,direction:y,status:c,initiator:b.initiator,partner:e.partner,target:b.target,metadata:b.metadata,paymentId:b.payment_identifier,chainId:b.chain_id.toNumber(),token:b.token,tokenNetwork:b.token_network_address,channelId:b.channel_identifier,value:m,fee:e.fee,amount:b.lock.amount,expirationBlock:b.lock.expiration.toNumber(),startedAt:o,changedAt:i,success:v,completed:g}}function Ss(e,t,n){var r,a,o=n.tokenNetwork,i=n.partner;if(t===k["HashZero"])return Pn;var c,s=ps(Object.values(e).reverse());try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.transfer[1].token_network_address===o&&u.partner===i){var l=[u.transfer[1],null===(r=u.unlock)||void 0===r?void 0:r[1],null===(a=u.lockExpired)||void 0===a?void 0:a[1]].filter(pt).map(Va).find((function(e){return Ma(e)===t}));if(l)return l}}}catch(d){s.e(d)}finally{s.f()}}var xs=n("a0df"),Ns=n("31a7"),Cs=n("c998"),Rs=n("ee79"),Ds=n("b4cc"),Is=n("0ff6"),Ps=n("4e0b2"),Us=n("1f0b");function Ls(e,t){return Fs(e)||Ms(e,t)||Hs(e,t)||Bs()}function Bs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ms(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fs(e){if(Array.isArray(e))return e}function $s(e){return Ws(e)||Vs(e)||Hs(e)||qs()}function qs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hs(e,t){if(e){if("string"===typeof e)return Ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ks(e,t):void 0}}function Vs(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ws(e){if(Array.isArray(e))return Ks(e)}function Ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zs=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Ys=function(e){switch(e.name){case"rinkeby":return Object.assign(Object.assign({},Ns.contracts),Is.contracts);case"ropsten":return Object.assign(Object.assign({},xs.contracts),Ds.contracts);case"goerli":return Object.assign(Object.assign({},Cs.contracts),Ps.contracts);case"homestead":return Object.assign(Object.assign({},Rs.contracts),Us.contracts);default:throw new ct(ot.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function Xs(e,t){var n,r;return Zs(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null!==(r=null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===n?void 0:n.origin)&&void 0!==r?r:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(zt(e).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),a.next=4,t.signMessage(Object(w["toUtf8Bytes"])(i));case 4:return c=a.sent,s=Object(w["sha256"])(c),u=new cs["Wallet"](s,t.provider),a.abrupt("return",{signer:u,address:u.address});case 8:case"end":return a.stop()}}),a)})))}var Qs=function(e,t,n){return Zs(void 0,void 0,void 0,p.a.mark((function r(){var a,o,i,c,s;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!is["Signer"].isSigner(e)){r.next=15;break}if(e.provider!==t){r.next=5;break}a=e,r.next=10;break;case 5:if(!(e instanceof cs["Wallet"])){r.next=9;break}a=e.connect(t),r.next=10;break;case 9:throw new ct(ot.RDN_SIGNER_NOT_CONNECTED,{account:e.toString(),provider:t.toString()});case 10:return r.next=12,a.getAddress();case 12:o=r.sent,r.next=38;break;case 15:if("number"!==typeof e){r.next=22;break}return a=t.getSigner(e),r.next=19,a.getAddress();case 19:o=r.sent,r.next=38;break;case 22:if(!wt.is(e)){r.next=32;break}return r.next=25,t.listAccounts();case 25:if(c=r.sent,c.includes(e)){r.next=28;break}throw new ct(ot.RDN_ACCOUNT_NOT_FOUND,{account:e,accounts:JSON.stringify(c)});case 28:a=t.getSigner(e),o=e,r.next=38;break;case 32:if(!_t.is(e)){r.next=37;break}a=new cs["Wallet"](e,t),o=a.address,r.next=38;break;case 37:throw new ct(ot.RDN_STRING_ACCOUNT_INVALID);case 38:if(!n){r.next=50;break}return i={signer:a,address:o},r.t0=Xs,r.next=43,t.getNetwork();case 43:return r.t1=r.sent,r.t2=i.signer,r.next=47,(0,r.t0)(r.t1,r.t2);case 47:s=r.sent,a=s.signer,o=s.address;case 50:return r.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return r.stop()}}),r)})))},zs=function(e){return e.pipe(Object($["a"])(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),Mo(),Object(q["a"])(1),Object(B["a"])(As))},Js=function(e){return Object.values(e).reduce((function(e,t){var n=Jo(t),r=n.ownDeposit,a=n.partnerDeposit,o=n.ownBalance,i=n.ownCapacity,c={state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,ownDeposit:r,partnerDeposit:a,balance:o,capacity:i};return Object.assign(Object.assign({},e),Gs({},t.token,Object.assign(Object.assign({},e[t.token]),Gs({},t.partner.address,c))))}),{})};function eu(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function tu(e,t){return e.signer===t?e:e.connect(t)}function nu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a},o=a.log;return Zs(this,void 0,void 0,p.a.mark((function a(){var i,c,s;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(c=e.functions)[t].apply(c,$s(n));case 3:i=a.sent,a.next=10;break;case 6:throw a.prev=6,a.t0=a["catch"](0),o.error("Error sending ".concat(t," tx"),a.t0),new ct(r,{error:a.t0.message});case 10:return o.debug("sent ".concat(t,' tx "').concat(i.hash,'" to "').concat(e.address,'"')),a.prev=11,a.next=14,i.wait();case 14:s=a.sent,st(s.status,"tx status: ".concat(s.status)),a.next=22;break;case 18:throw a.prev=18,a.t1=a["catch"](11),o.error("Error mining ".concat(t," tx"),a.t1),new ct(r,{transactionHash:i.hash});case 22:return o.debug("".concat(t,' tx "').concat(i.hash,'" successfuly mined!')),a.abrupt("return",s);case 24:case"end":return a.stop()}}),a,null,[[0,6],[11,18]])})))}function ru(e,t,n){var r=t.latest$,a=t.config$,o=t.provider;return Zs(this,void 0,void 0,p.a.mark((function t(){var i,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.blockNumber,c=e.transactionHash,t.abrupt("return",r.pipe(Bo("state","blockNumber"),Object(Jc["a"])(a),Object(M["a"])((function(e){var t=Ls(e,2),r=t[0],a=t[1].confirmationBlocks;return i+(null!==n&&void 0!==n?n:a)<=r})),Object(zc["a"])((function(e){var t=Ls(e,2),r=t[0],a=t[1].confirmationBlocks;return Object(P["a"])((function(){return o.getTransactionReceipt(c)})).pipe(Object(B["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==n&&void 0!==n?n:a))return e.blockNumber;if(i+2*(null!==n&&void 0!==n?n:a)<r)throw new ct(ot.RDN_TRANSACTION_REORG,{transactionHash:c})})))})),Object(F["a"])(pt)).toPromise());case 3:case"end":return t.stop()}}),t)})))}var au=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function ou(e){return su(e)||cu(e)||du(e)||iu()}function iu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cu(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function su(e){if(Array.isArray(e))return fu(e)}function uu(e,t){return bu(e)||pu(e,t)||du(e,t)||lu()}function lu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function du(e,t){if(e){if("string"===typeof e)return fu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fu(e,t):void 0}}function fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bu(e){if(Array.isArray(e))return e}function yu(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function mu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(P["a"])(e).pipe(Object(Yc["a"])((function(e){return e.pipe(Object($["a"])((function(e,r){return r<n?Object(Wc["a"])(t):Object(Kc["a"])(e)})))})))}var hu=function(e,t,n){yu(e),yu(t);var r=n.provider;return mu((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object($["a"])((function(e){return Object(I["a"])(Object(D["a"])(e),Zt(r,"block"))})),Object(B["a"])((function(e){return Ln({blockNumber:e})})))},vu=function(e,t,n){yu(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Xc["a"])(1),Object($["a"])((function(e){var t=w["defaultAbiCoder"].encode(["address"],[r]);return Nc()(e.tokens)?mu((function(){return a.getLogs(Object.assign(Object.assign({},o.filters.TokenNetworkCreated(null,null)),{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval).pipe(Object($["a"])((function(e){return Object(Nt["a"])(e)})),Object(B["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(M["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object($["a"])((function(e){var n=e.log,r=e.parsed;return Object(Gc["a"])(mu((function(){var e;return a.getLogs({address:r.values.token_network_address,topics:[null,null,t],fromBlock:null!==(e=n.blockNumber)&&void 0!==e?e:i.TokenNetworkRegistry.block_number,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Nt["a"])),mu((function(){return a.getLogs({address:r.values.token_network_address,topics:[null,null,null,t],fromBlock:n.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object($["a"])(Nt["a"]))).pipe(Object(Xc["a"])(1),Object(Qc["a"])(Bn({token:r.values.token_address,tokenNetwork:r.values.token_network_address,fromBlock:n.blockNumber})))}),5)):Object(Nt["a"])(Object.entries(e.tokens).map((function(e){var t=uu(e,2),n=t[0],r=t[1];return Bn({token:n,tokenNetwork:r})})))})))},gu=function(e,t){return yu(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,Fn({id:a.id},{tokenNetwork:a.tokenNetwork,partner:a.partner.address});case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)}))))},Ou=function(e,t,n){yu(e),yu(t);var r=n.address,a=n.network,o=n.provider;return mu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(B["a"])((function(e){return e.includes(r)})),Object($["a"])((function(e){return Object(Zc["a"])(o.pollingInterval).pipe(Object(zc["a"])((function(){return Object(I["a"])(e?mu((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.includes(r)?U["a"]:Object(D["a"])(ca({reason:Ae.ACCOUNT_CHANGED}))}))):U["a"],mu((function(){return Xt(o)}),o.pollingInterval).pipe(Object($["a"])((function(e){return e.chainId!==a.chainId?Object(D["a"])(ca({reason:Ae.NETWORK_CHANGED})):U["a"]}))))})))})))},_u=function(e,t,n){yu(t);var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(M["a"])(kn(Bn)),Object(Ao["a"])((function(e){return e.payload.tokenNetwork})),Object($["a"])((function(e){return e.pipe(Object(zc["a"])((function(e){var t=a(e.payload.tokenNetwork);return Yt(t,[t.filters.ChannelOpened(null,null,null,null)],e.payload.fromBlock?Object(D["a"])(e.payload.fromBlock):void 0).pipe(Object(M["a"])((function(e){var t=uu(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(B["a"])((function(n){var a=uu(n,5),o=a[0],i=a[1],c=a[2],s=a[3],u=a[4];return Mn.success({id:o.toNumber(),token:e.payload.token,settleTimeout:s.toNumber(),isFirstParticipant:r===i,txHash:u.transactionHash,txBlock:u.blockNumber,confirmed:void 0},{tokenNetwork:t.address,partner:r===i?c:i})})))})))})))},wu=function(e){return e.pipe(Object(M["a"])(kn(Mn.success)),Object(M["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return Fn({id:e.payload.id,fromBlock:e.payload.txBlock},e.meta)})))};function ku(e){var t=e.interface.events;return{depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function ju(e,t){var n=ku(e),r=n.depositTopic,a=n.withdrawTopic,o=n.closedTopic,i=n.settledTopic,c={tokenNetwork:e.address,partner:t};return function(e){var n,s,u=uu(e,2),l=u[0],d=u[1],f=l[l.length-1],p=null===(n=f.topics)||void 0===n?void 0:n[0],b=l[0].toNumber();switch(p){case r:var y=uu(l,3),m=y[1],h=y[2],v=m===t?"partner":"own";if(h.lte(d[v].deposit))break;s=$n.success({id:b,participant:m,totalDeposit:h,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case a:var g=uu(l,3),O=g[1],_=g[2],w=O===t?"partner":"own";if(_.lte(d[w].withdraw))break;s=qn({id:b,participant:O,totalWithdraw:_,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case o:if("closeBlock"in d)break;var k=uu(l,2),j=k[1];s=Hn.success({id:b,participant:j,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0},c);break;case i:s=Wn.success({id:b,txHash:f.transactionHash,txBlock:f.blockNumber,confirmed:void 0,locks:d.partner.locks},c);break}return s}}var Eu=function(e,t,n){yu(e);var r=n.getTokenNetworkContract,a=n.latest$;return t.pipe(ti,Object($["a"])((function(e){return e.pipe(Object(zc["a"])((function(e){var t=e.tokenNetwork,n=e.partner.address,o=Xo(e),i=r(t),c=w["defaultAbiCoder"].encode(["uint256"],[e.id]),s={address:t,topics:[Object.values(ku(i)),[c]]};return Yt(i,[s],Object(D["a"])(e.openBlock)).pipe(Object(Jc["a"])(a.pipe(Object(q["a"])("state","channels",o))),Object(B["a"])(ju(i,n)),Object(M["a"])(pt),Object(es["a"])(os.a))})),Object(So["a"])(e.pipe(Object(ts["a"])(1))))})))},Tu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(kn(Mn.request)),Object(Jc["a"])(t,u),Object($["a"])((function(t){var n,u,l=uu(t,3),d=l[0],f=l[1],p=l[2],b=p.settleTimeout,y=p.subkey,m=d.meta,h=m.tokenNetwork,v=m.partner,g=null===(n=f.channels[Xo(d.meta)])||void 0===n?void 0:n.state;if(g)return Object(D["a"])(Mn.failure(new ct(ot.CNL_INVALID_STATE,{state:g}),d.meta));var O=eu({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:y),_=O.signer,w=O.address,k=tu(s(h),_),j=!d.payload.deposit||d.payload.deposit.isZero()?void 0:d.payload.deposit,E=Le()(f.tokens,(function(e){return e===h})),T=tu(c(E),_);return e.pipe(Object(M["a"])(Mn.success.is),Object(M["a"])((function(e){return e.meta.tokenNetwork===h&&e.meta.partner===v})),Object(ns["a"])(1,void 0,(function(e){return Object(P["a"])((function(){var e;return k.functions.openChannel(o,v,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:b)})).pipe(Object(To["a"])((function(e){return r.debug('sent openChannel tx "'.concat(e.hash,'" to "').concat(h,'"'))})),Object($["a"])((function(e){return j?Object(Nt["a"])(T.functions.allowance(w,h)).pipe(Object($["a"])((function(t){return t.gte(j)?Object(D["a"])([e,!1]):Object(Nt["a"])(T.functions.approve(h,j)).pipe(Object(To["a"])((function(e){return r.debug('sent approve tx "'.concat(e.hash,'" to "').concat(E,'"'))})),Object(B["a"])((function(t){return[e,t]})))}))):Object(D["a"])([e])})),Object($["a"])((function(e){var t=uu(e,2),n=t[0],r=t[1];return Object(xt["a"])([Object(Nt["a"])(n.wait()),r?Object(Nt["a"])(r.wait()):Object(D["a"])(r)])})),Object($["a"])((function(t){var n=uu(t,2),a=n[0],i=n[1];if(!a.status)throw new ct(ot.CNL_OPENCHANNEL_FAILED,Object.assign(Object.assign({},d.meta),{transactionHash:a.transactionHash}));return r.debug('openChannel tx "'.concat(a.transactionHash,'" successfuly mined!')),(void 0===i?U["a"]:Object(D["a"])(i)).pipe(Object($["a"])((function(t){if(!1!==t){if(!t.status)throw new ct(ot.CNL_APPROVE_TRANSACTION_FAILED,{token:E,transactionHash:t.transactionHash});r.debug('approve tx "'.concat(t.transactionHash,'" successfuly mined!'))}return e.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.payload.id;return k.functions.setTotalDeposit(t,o,j,v)})))})),ei("setTotalDeposit",ot.CNL_SETTOTALDEPOSIT_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return Object(D["a"])($n.failure(e,d.meta))})))})),Object(Tc["a"])((function(e){return Object(D["a"])(Mn.failure(e,d.meta))})))})))})))},Au=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(kn($n.request)),Object(Jc["a"])(t,u),Object($["a"])((function(e){var t,n=uu(e,3),u=n[0],l=n[1],d=n[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=Xo(u.meta),m=l.channels[y];if((null===m||void 0===m?void 0:m.state)!==Pa.open){var h=new ct(ot.CNL_NO_OPEN_CHANNEL_FOUND,u.meta);return Object(D["a"])($n.failure(h,u.meta))}var v=eu({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:d),g=v.signer,O=v.address,_=tu(c(m.token),g),w=tu(s(p),g);return Object(P["a"])((function(){return Promise.all([w.functions.getChannelParticipantInfo(m.id,o,b),_.functions.allowance(O,p)])})).pipe(Object($["a"])((function(e){var t=uu(e,2),n=t[0][0],a=t[1];return Object(P["a"])((function(){return a.gte(u.payload.deposit)?Object(D["a"])(!1):Object(Nt["a"])(_.functions.approve(p,u.payload.deposit)).pipe(ei("approve",ot.CNL_APPROVE_TRANSACTION_FAILED,{log:r}))})).pipe(Object($["a"])((function(){return w.functions.setTotalDeposit(m.id,o,u.payload.deposit.add(n),b)})),ei("setTotalDeposit",ot.CNL_SETTOTALDEPOSIT_FAILED,{log:r}))})),Object(rs["a"])(),Object(Tc["a"])((function(e){return Object(D["a"])($n.failure(e,u.meta))})))})))},Su=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(kn(Hn.request)),Object(Jc["a"])(t,u),Object($["a"])((function(e){var t,n,u=uu(e,3),l=u[0],d=u[1],f=u[2].subkey,p=l.meta,b=p.tokenNetwork,y=p.partner,m=eu({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:f),h=m.signer,v=tu(s(b),h),g=d.channels[Xo(l.meta)];if((null===g||void 0===g?void 0:g.state)!==Pa.open&&(null===g||void 0===g?void 0:g.state)!==Pa.closing){var O=new ct(ot.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,l.meta);return Object(D["a"])(Hn.failure(O,l.meta))}var _=g.partner.balanceProof,k=Ma(_),j=_.nonce,E=_.additionalHash,T=_.signature,A=Object(w["concat"])([Aa(b,20),Aa(c.chainId,32),Aa(Ia.BALANCE_PROOF,32),Aa(g.id,32),Aa(k,32),Aa(j,32),Aa(E,32),Aa(T,65)]);return Object(Nt["a"])(a.signMessage(A)).pipe(Object($["a"])((function(e){return v.functions.closeChannel(g.id,y,o,k,j,E,T,e)})),ei("closeChannel",ot.CNL_CLOSECHANNEL_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return Object(D["a"])(Hn.failure(e,l.meta))})))})))},xu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.network,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(M["a"])(kn(Hn.success)),Object(M["a"])((function(e){return!!e.payload.confirmed})),Object($["a"])((function(t){return e.pipe(Object(M["a"])(Ln.is),Object(L["a"])(1),Object(Xc["a"])(1),Object(Qc["a"])(t))})),Object(Jc["a"])(t,u),Object(M["a"])((function(e){var t=uu(e,2),n=t[0],r=t[1],a=r.channels[Xo(n.meta)];return(null===a||void 0===a?void 0:a.state)===Pa.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object($["a"])((function(e){var t=uu(e,3),n=t[0],u=t[1],l=t[2].subkey,d=n.meta,f=d.tokenNetwork,p=d.partner,b=eu({signer:a,address:o,main:i},l),y=b.signer,m=tu(s(f),y),h=u.channels[Xo(n.meta)],v=Ma(h.partner.balanceProof),g=h.partner.balanceProof.nonce,O=h.partner.balanceProof.additionalHash,_=h.partner.balanceProof.signature,k=Object(w["concat"])([Aa(f,20),Aa(c.chainId,32),Aa(Ia.BALANCE_PROOF_UPDATE,32),Aa(h.id,32),Aa(v,32),Aa(g,32),Aa(O,32),Aa(_,65)]);return Object(Nt["a"])(a.signMessage(k)).pipe(Object($["a"])((function(e){return m.functions.updateNonClosingBalanceProof(h.id,p,o,v,g,O,_,e)})),ei("updateNonClosingBalanceProof",ot.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),U["a"]})))})))},Nu=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(M["a"])(kn(Wn.request)),Object(Jc["a"])(t,s),Object($["a"])((function(e){var t,n,s=uu(e,3),u=s[0],l=s[1],d=s[2].subkey,f=u.meta,p=f.tokenNetwork,b=f.partner,y=eu({signer:a,address:o,main:i},null!==(n=null===(t=u.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),m=y.signer,h=tu(c(p),m),v=l.channels[Xo(u.meta)];if((null===v||void 0===v?void 0:v.state)!==Pa.settleable&&(null===v||void 0===v?void 0:v.state)!==Pa.settling){var g=new ct(ot.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,u.meta);return Object(D["a"])(Wn.failure(g,u.meta))}return Object(Nt["a"])(Promise.all([h.functions.getChannelParticipantInfo(v.id,o,b),h.functions.getChannelParticipantInfo(v.id,b,o)])).pipe(Object($["a"])((function(e){var t=uu(e,2),n=t[0][3],r=t[1][3],a=v.own.balanceProof;if(n!==Ma(a)){var i=Ss(l.sent,n,u.meta);st(i,[ot.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),a=i}var c=v.partner.balanceProof;if(r!==Ma(c)){var s=Ss(l.received,r,u.meta);st(s,[ot.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:b,partnerBalanceHash:r}]),c=s}var d=[o,a],f=[b,c];if(f[1].transferredAmount.add(f[1].lockedAmount).lt(d[1].transferredAmount.add(d[1].lockedAmount))){var p=[f,d];d=p[0],f=p[1]}return h.functions.settleChannel(v.id,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot,f[0],f[1].transferredAmount,f[1].lockedAmount,f[1].locksroot)})),ei("settleChannel",ot.CNL_SETTLECHANNEL_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return Object(D["a"])(Wn.failure(e,u.meta))})))})))},Cu=function(e,t){return e.pipe(Object(M["a"])(kn(Ln)),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=uu(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===Pa.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,Vn({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Ru=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenNetworkContract,s=n.config$;return e.pipe(Object(M["a"])(kn(Wn.success)),Object(M["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Jc["a"])(t,s),Object(M["a"])((function(e){var t,n=uu(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Xo(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object($["a"])((function(e){var t=uu(e,3),n=t[0],s=t[2].subkey,u=n.meta,l=u.tokenNetwork,d=u.partner,f=tu(c(l),eu({signer:a,address:o,main:i},s).signer),p=Object(w["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(ou(e),[Aa(t.expiration,32),Aa(t.amount,32),t.secrethash])}),[]));return Object(Nt["a"])(f.functions.unlock(n.payload.id,o,d,p)).pipe(ei("unlock",ot.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),U["a"]})))})))};function Du(e,t,n,r){return mu((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(B["a"])((function(t){return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{txBlock:t.blockNumber,confirmed:!0})}):e.payload.txBlock+2*r<n?Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{confirmed:!1})}):void 0})),Object(M["a"])(pt))}var Iu=function(e,t,n){yu(e);var r=n.config$,a=n.provider;return Object(xt["a"])(t.pipe(Bo("blockNumber")),t.pipe(Object(q["a"])("pendingTxs")),r.pipe(Bo("confirmationBlocks"))).pipe(Object(M["a"])((function(e){var t=uu(e,2),n=t[1];return n.length>0})),Object(zc["a"])((function(e){var t=uu(e,3),n=t[0],r=t[1],o=t[2];return Gc["a"].apply(void 0,ou(r.filter((function(e){return e.payload.txBlock+o<=n})).map((function(e){return Du(e,a,n,o)}))))})))},Pu=n("47ea"),Uu=n("bee6"),Lu=n("d337"),Bu=n("b4d5"),Mu=n("3e18"),Fu=n("d96a"),$u=n("2527"),qu=n("fc5d");function Hu(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Vu(e,t){var n=Object(qu["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var Wu=n("6e77"),Ku=n("dc46"),Gu=n.n(Ku);function Zu(e,t){return Ju(e)||zu(e,t)||Xu(e,t)||Yu()}function Yu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xu(e,t){if(e){if("string"===typeof e)return Qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qu(e,t):void 0}}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ju(e){if(Array.isArray(e))return e}function el(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function tl(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(pt)}var nl=Gu()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function rl(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(nl(t))),n?Object(D["a"])(n):Object(Wu["a"])(e,"Room").pipe(Object(M["a"])(nl(t)),Object(Xc["a"])(1))}function al(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(M["a"])((function(t){var n=t.presences;return e in n})),Object(Xc["a"])(1),Object($["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(D["a"])(a[e]):i.pipe(Object(B["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(M["a"])(pt),Object(xo["a"])(),Object(Rt["a"])((function(n){return rl(t,n).pipe(Object($["a"])((function(t){return i.pipe(Object(q["a"])("presences",e),Object(B["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(xo["a"])(),Object(B["a"])((function(e){return{room:t,userId:e}})))})),Object(Rt["a"])((function(e){var n=e.room,r=e.userId;if(!r)return U["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(D["a"])(a):Object(Wu["a"])(t,"RoomMember.membership",(function(e,t){return el(e),t})).pipe(Object(M["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(q["a"])("roomId"))})))})),Object(Xc["a"])(1),Object($["a"])((function(e){return Object(P["a"])((function(){return"string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body)})).pipe(Object(Qc["a"])("string"===typeof e?e:e.label),Object(Yc["a"])((function(e){return e.pipe(Object(Jc["a"])(c),Object($["a"])((function(e,t){var n=Zu(e,2),r=n[0],a=n[1].httpTimeout;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(Wc["a"])(a/u)):Object(Kc["a"])(r)})))})))})))}function ol(e,t,n){var r=n.log;if("string"===typeof e)try{var a=Ka(e);if("signature"in a){var o=Ha(a);if(o!==t)throw new ct(ot.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function il(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function cl(e,t){return fl(e)||dl(e,t)||ul(e,t)||sl()}function sl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ul(e,t){if(e){if("string"===typeof e)return ll(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ll(e,t):void 0}}function ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function fl(e){if(Array.isArray(e))return e}var pl=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},bl="RAIDEN";function yl(e,t){var n=Hu(t.getHomeserverUrl());return Object(Nt["a"])(tl(e)).pipe(Object(B["a"])((function(e){return"#".concat(e,":").concat(n)})),Object($["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),r}))})),Object(q["a"])("roomId"),Object(Pu["a"])())}function ml(e,t){return Object(P["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function hl(e,t,n,r){return e.pipe(Object(M["a"])(Zn.is),Object(Xc["a"])(1),Object(To["a"])((function(){n.next(t),n.complete()})),Object(Uu["a"])(1e3),Object(Jc["a"])(r),Object($["a"])((function(e){var n=cl(e,2),r=n[1];return yl(r,t).pipe(Object($["a"])((function(e){return ml(t,e)})),Object($["a"])((function(e){return t.startClient({filter:e})})))})),Object(rs["a"])())}function vl(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function gl(e,t){return e.includes("://")||(e="https://"+e),Object(P["a"])((function(){var n=Date.now();return Object($u["a"])(e+"/_matrix/client/versions").pipe(Object(Lu["a"])(t),Object(B["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Tc["a"])((function(){return Object(D["a"])(NaN)})),Object(B["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Ol(e,t){var n=this;return Object($u["a"])(e).pipe(Object($["a"])((function(t){return pl(n,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return st(t.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(t.status)),n.abrupt("return",t.text());case 2:case"end":return n.stop()}}),n)})))})),Object(Lu["a"])(t),Object($["a"])((function(e){return vl(e)})),Object($["a"])((function(e){return gl(e,t)})),Object(Pu["a"])(),Object($["a"])((function(e){return Ut()(e,["rtt"])})),Object(M["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(Bu["a"])((function(){return new ct(ot.TRNS_NO_MATRIX_SERVERS)})))}function _l(e,t,n,r){var a=n.address,o=n.signer,i=Hu(e);if(!i)throw new ct(ot.TRNS_NO_SERVERNAME,{server:e});return Object(P["a"])((function(){if(t){var n=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(D["a"])({matrix:n,server:e,setup:t})}var r=Object(h["createClient"])({baseUrl:e}),c=a.toLowerCase(),s="@".concat(c,":").concat(i);return Object(Nt["a"])(o.signMessage(i)).pipe(Object($["a"])((function(e){return Object(Nt["a"])(r.login("m.login.password",{user:c,password:e,device_id:bl})).pipe(Object(Tc["a"])((function(){return r.register(c,e)})))})),Object($["a"])((function(t){var n=t.access_token,a=t.device_id;return r.deviceId=a,r._http.opts.accessToken=n,r.credentials={userId:s},Object(Nt["a"])(o.signMessage(s)).pipe(Object(B["a"])((function(t){return{matrix:r,server:e,setup:{userId:s,accessToken:n,deviceId:a,displayName:t}}})))})))})).pipe(Object($["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(I["a"])(Object(Nt["a"])(t.setDisplayName(a.displayName)),Object(Nt["a"])(t.setAvatarUrl(r&&!Nc()(r)?qc(r):""))).pipe(Object(Qc["a"])({matrix:t,server:n,setup:a}))})))}var wl=function(e,t,n){il(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(xt["a"])([i,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var t,n=cl(e,2),o=n[0].state,i=n[1],c=i.matrixServer,s=i.matrixServerLookup,u=i.httpTimeout,l=i.caps,d=o.transport.server,f=o.transport.setup,p=[];c?(c===d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(Object(D["a"])({server:c}))):(d&&p.push(Object(D["a"])({server:d,setup:f})),p.push(Ol(s,u)));var b=function(e){return t=e,U["a"]};return Object(P["a"])((function(){return p.shift()||U["a"]})).pipe(Object(Tc["a"])(b),Object(Mu["a"])((function(e){var t=e.server,n=e.setup;return _l(t,n,{address:r,signer:a},l).pipe(Object(Tc["a"])(b))})),Object(F["a"])(),Object(To["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(Yc["a"])((function(e){return e.pipe(Object($["a"])((function(){return p.length?Object(D["a"])(null):Object(Kc["a"])(t)})))})))})),Object($["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(I["a"])(hl(e,n,o,c),Object(D["a"])(Zn({server:r,setup:a})),c.pipe(Bo("logger"),Object(To["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(rs["a"])()))})))},kl=function(e,t,n){il(t);var r=n.matrix$;return r.pipe(Object($["a"])((function(t){return e.pipe(Object(Fu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(rs["a"])())},jl=n("80f6"),El=n.n(jl);function Tl(e,t){return xl(e)||Sl(e,t)||Rl(e,t)||Al()}function Al(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xl(e){if(Array.isArray(e))return e}function Nl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Cl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Rl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Rl(e,t){if(e){if("string"===typeof e)return Dl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dl(e,t):void 0}}function Dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Il=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Pl=["online","unavailable"],Ul=/^@(0x[0-9a-f]{40})[.:]/i;function Ll(e,t,n){var r=n.log;return Object(P["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object($["a"])(p.a.mark((function e(n){var r,a,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Cl(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=Ul.exec(i.user_id),c&&Object(w["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(w["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object($["a"])((function(t){return Vu(e,t.user_id).then((function(e){return Object.assign(Object.assign({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(M["a"])(pt),Object(Pu["a"])(),Object(B["a"])((function(e){if(!e.length)throw new ct(ot.TRNS_NO_VALID_USER,{address:t});return El()(e,"last_active_ago")})))}var Bl=function(e,t,n){Nl(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(M["a"])(kn(Yn.request)),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ao["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Jc["a"])(a.pipe(Bo("presences"))),Object(zc["a"])((function(e){var t=Tl(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(D["a"])(i[r.meta.address]):Ll(a,r.meta.address,{log:o}).pipe(Object(B["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return Yn.success({userId:n,available:Pl.includes(t),ts:Date.now(),caps:Hc(a)},r.meta)})),Object(Tc["a"])((function(e){return Object(D["a"])(Yn.failure(e,r.meta))})))})))})))},Ml=function(e,t,n){Nl(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(Rt["a"])((function(e){return Object(Wu["a"])(e,"event").pipe(Object(B["a"])((function(t){return{event:t,matrix:e}})))})),Object(M["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(B["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{st(null===a||void 0===a?void 0:a.presence);var o=null===(t=Ul.exec(a.userId))||void 0===t?void 0:t[1];st(o);var i=Object(w["getAddress"])(o);return st(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(M["a"])(pt),Object(Jc["a"])(e.pipe(Object(M["a"])(Yn.request.is),Object(No["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(jc["a"])(new Set))),Object(M["a"])((function(e){var t=Tl(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object($["a"])((function(e){var t=Tl(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=Pl.includes(s);return Object(P["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(B["a"])((function(e){var t;st(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(w["verifyMessage"])(c,e.displayname);return st(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),Yn.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Hc(e.avatar_url)},{address:n})})),Object(Tc["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),U["a"]})))}))).pipe(Object(Jc["a"])(o),Object(M["a"])((function(e){var t=Tl(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(q["a"])(0))},Fl=function(e){return e.pipe(Object(M["a"])(Fn.is),Object(B["a"])((function(e){return Yn.request(void 0,{address:e.meta.partner})})))},$l=function(e,t,n){Nl(e),Nl(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(q["a"])("caps"),Object(xo["a"])(Rc.a),Object(L["a"])(1),Object($["a"])((function(e){return r.pipe(Object(B["a"])((function(t){return[e,t]})))})),Object($["a"])((function(e){var t=Tl(e,2),n=t[0],r=t[1];return Il(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setAvatarUrl(n&&!Nc()(n)?qc(n):"").catch((function(){})));case 1:case"end":return e.stop()}}),e)})))})),Object(rs["a"])())},ql=n("59b7"),Hl=n("a2ef"),Vl=n("2769"),Wl=n.n(Vl);function Kl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Xl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Gl(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Zl(e,t){return Jl(e)||zl(e,t)||Xl(e,t)||Yl()}function Yl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xl(e,t){if(e){if("string"===typeof e)return Ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ql(e,t):void 0}}function Ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Jl(e){if(Array.isArray(e))return e}var ed=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function td(e,t,n,r,a){var o=a.log;return Object(P["a"])((function(){var n=e.getRoom(t);return n?Object(D["a"])(n):Object(Wu["a"])(e,"Room").pipe(Object(M["a"])((function(e){return e.roomId===t})),Object(Xc["a"])(1))})).pipe(Object(M["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Jc["a"])(r),Object($["a"])((function(r){var a=Zl(r,2),i=a[1].httpTimeout;return Object(P["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(es["a"])((function(e){return e.pipe(Object(Uu["a"])(i))})),Object(So["a"])(Object(Wu["a"])(e,"RoomMember.membership",(function(e,t){return Gl(e),t})).pipe(Object(M["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var nd=function(e,t,n){Gl(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(M["a"])(kn([Ur,Fn,_r.request,Qn])),Object(B["a"])((function(e){var t;switch(e.type){case Ur.type:e.meta.direction===Cr.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===Cr.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case Fn.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(M["a"])(pt),Object(Ao["a"])((function(e){return e})),Object($["a"])((function(e){return e.pipe(Object($["a"])((function(e){return o.pipe(Object(B["a"])((function(t){return{address:e,matrix:t}})))})),Object(zc["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(M["a"])((function(e){var n=e.presences;return t in n})),Object(Xc["a"])(1),Object(M["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object($["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(B["a"])((function(e){var n=e.room_id;return Xn({roomId:n},{address:t})})),Object(Tc["a"])((function(e){return a.error("Error creating room, ignoring",e),U["a"]})))})))})))},rd=function(e,t,n){Gl(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(M["a"])(kn(Yn.success)),Object(Ao["a"])((function(e){return e.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Jc["a"])(r),Object(Rt["a"])((function(e){var t=Zl(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(B["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(xo["a"])(),Object(Rt["a"])((function(e){return Object(Gc["a"])(Object(D["a"])(e),e?Object(Wu["a"])(r,"RoomMember.membership",(function(e,t){return Gl(e),t})).pipe(Object(M["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(Qc["a"])(e)):U["a"])})),Object(Rt["a"])((function(e){return e?td(r,e,n.payload.userId,a,{log:i}):U["a"]}))):U["a"]})))})),Object(rs["a"])())},ad=function(e,t,n){Gl(e),Gl(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Rt["a"])((function(e){return Object(Wu["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(M["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Jc["a"])(o),Object($["a"])((function(e){var t=Zl(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(Bo("presences"),Object(B["a"])((function(e){return Wl()(e,(function(e){return e.payload.userId===s}))})),Object(M["a"])(pt),Object(Xc["a"])(1),Object(So["a"])(Object(Wc["a"])(c)));return u.pipe(Object(B["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object($["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Nt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Qc["a"])(Xn({roomId:n.roomId},{address:a.meta.address})),Object(Tc["a"])((function(e){return r.error("Error joining invited room, ignoring",e),U["a"]})))})))},od=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(M["a"])(kn(Xn)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Jc["a"])(t,o),Object($["a"])((function(e){var t,n,a=Zl(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Nt["a"])(l.filter((function(e,t){return Gl(e),t>=u}))).pipe(Object($["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(B["a"])((function(e){return Qn({roomId:e},i.meta)})))})))},id=function(e,t,n){Gl(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(Rt["a"])((function(e){return Object(Wu["a"])(e,"Room").pipe(Object(B["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(ql["a"])((function(){return o.pipe(Object(F["a"])(),Object($["a"])((function(e){var t=e.httpTimeout;return Object(Wc["a"])(t)})))})),Object(Jc["a"])(t,o),Object(M["a"])((function(e){var t,n=Zl(e,3),r=n[0],a=r.matrix,o=r.roomId,i=n[1].transport,c=n[2],s=a.getRoom(o);if(!s)return!1;var u=tl(c);if(s.name&&u.some((function(e){return s.name.match("#".concat(e,":"))})))return!1;for(var l=0,d=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});l<d.length;l++){var f,p=d[l],b=Kl(p);try{for(b.s();!(f=b.n()).done;){var y=f.value;if(y===s.roomId)return!1}}catch(m){b.e(m)}finally{b.f()}}return!0})),Object($["a"])((function(e){var t=Zl(e,1),n=t[0],a=n.matrix,o=n.roomId;return ed(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.warn("Unknown room in matrix, leaving",o),e.abrupt("return",a.leave(o).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 2:case"end":return e.stop()}}),e)})))})),Object(rs["a"])())},cd=function(e,t,n){Gl(e);var r=n.log,a=n.matrix$;return a.pipe(Object(Rt["a"])((function(e){return Object(Wu["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(M["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,a,o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Zl(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=Zl(s[c],2),l=u[0],d=u[1],f=Kl(d),e.prev=5,f.s();case 7:if((b=f.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,Qn({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},sd=function(e,t,n){Gl(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(Bo("transport","rooms"),Object(M["a"])(pt),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=Zl(r[n],2),o=a[0],i=a[1],c=Kl(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(Hl["a"])((function(e){var t=e.roomId;return t})),Object($["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(B["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Jc["a"])(o),Object($["a"])((function(e){var t=Zl(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return rl(i,a).pipe(Object(Lu["a"])(c),Object(rs["a"])(),Object(Tc["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(D["a"])(Qn({roomId:a},{address:o}))})))})))},ud=function(e,t){return e.pipe(Object(M["a"])(kr.is),Object(Jc["a"])(t),Object(M["a"])((function(e){var t,n,r=Zl(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(B["a"])((function(e){var t=Zl(e,1),n=t[0];return Xn({roomId:n.payload.roomId},n.meta)})))};function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fd(e,t,n){return t&&dd(e.prototype,t),n&&dd(e,n),e}var pd=function(){function e(t){ld(this,e),this.values=new Map,this.max=t}return fd(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function bd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=hd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function yd(e,t){return Od(e)||gd(e,t)||hd(e,t)||md()}function md(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hd(e,t){if(e){if("string"===typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Od(e){if(Array.isArray(e))return e}function _d(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var wd=function(e,t,n){_d(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(M["a"])(kn(_r.request)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ao["a"])((function(e){var t=e.action;return t.meta.address})),Object($["a"])((function(e){return e.pipe(Object(Mu["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Wa(t.payload.message),c={body:a,msgtype:"m.text"};return al(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(Qc["a"])(_r.success(void 0,t.meta)),Object(Tc["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(D["a"])(_r.failure(e,t.meta))})))})))})))},kd=function(e,t,n){_d(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(M["a"])(kn(wr)),Object($["a"])((function(e){return a.pipe(Object(B["a"])((function(t){return{action:e,matrix:t}})))})),Object(Jc["a"])(o),Object($["a"])((function(e){var t=yd(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=tl(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),U["a"];var s=Hu(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return rl(o,u).pipe(Object($["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Wa(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Tc["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),U["a"]})))})),Object(rs["a"])())},jd=function(e,t,n){_d(e),_d(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(Rt["a"])((function(e){return Object(Wu["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Jc["a"])(o),Object(M["a"])((function(e){var t,n,r=yd(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!tl(s).some((function(e){return nl("#".concat(e,":").concat(Hu(o.getHomeserverUrl())),c)}))})),Object($["a"])((function(e){var t=yd(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(M["a"])((function(e){var t,n,r=e.presences,i=e.state,c=Wl()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Xc["a"])(1),Object(So["a"])(Object(Wc["a"])(c)),Object($["a"])(p.a.mark((function e(t){var n,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=Wl()(n,["payload.userId",a.getSender()]),s=bd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,d=ol(l,c.meta.address,{log:r}),e.next=10,kr({text:l,message:d,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},Ed=function(e,t,n){_d(t);var r=n.log,a=n.signer,o=n.latest$,i=new pd(32);return e.pipe(Object(M["a"])(Za([Et(nr),Et(rr),Et(ar)])),Object(Jc["a"])(o),Object(M["a"])((function(e){var t,n=yd(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Se.NO_DELIVERY])})),Object(Mu["a"])((function(e){var t=yd(e,1),n=t[0],o=n.payload.message;return Object(P["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(D["a"])(_r.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Cn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Nt["a"])(Ga(a,s,{log:r})).pipe(Object(To["a"])((function(e){return i.put(t,e)})),Object(B["a"])((function(e){return _r.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Td=n("6fb6"),Ad=n("de5c"),Sd=n("8f41");function xd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Nd(e,t){return Dd(e)||Rd(e,t)||Ud(e,t)||Cd()}function Cd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Dd(e){if(Array.isArray(e))return e}function Id(e){return Bd(e)||Ld(e)||Ud(e)||Pd()}function Pd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ud(e,t){if(e){if("string"===typeof e)return Md(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Md(e,t):void 0}}function Ld(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Bd(e){if(Array.isArray(e))return Md(e)}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fd=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},$d=new WeakMap;function qd(e){return Fd(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=$d.get(e),!(n&&Date.now()<n[0])){t.next=3;break}return t.abrupt("return",n[1]);case 3:return t.next=5,e.turnServer();case 5:return r=t.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),$d.set(e,[a,o]),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))}function Hd(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function Vd(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(I["a"])(Object(Wu["a"])(e,"icecandidate").pipe(Object(q["a"])("candidate"),Object(ql["a"])((function(){return n})),Object(Ec["a"])(pt),Object(Td["a"])(10),Object(M["a"])((function(e){return e.length>0})),Object(To["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object($["a"])((function(e){return al(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(Wu["a"])(t,"event").pipe(Object(M["a"])(Hd("m.call.candidates",i,o)),Object(To["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object($["a"])((function(e){var t;return Object(Nt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object($["a"])((function(t){return Object(P["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Tc["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),U["a"]})))})))).pipe(Object(rs["a"])())}function Wd(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,d=a.latest$,f=a.config$;return Object(Nt["a"])(qd(e)).pipe(Object($["a"])((function(r){var p=new RTCPeerConnection({iceServers:[].concat(Id(r),Id(i))}),b=p.createDataChannel(c,{ordered:!1});return Object(I["a"])(Vd(p,e,t,n,a),Object(P["a"])((function(){return p.createOffer()})).pipe(Object($["a"])((function(t){p.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(I["a"])(Object(Wu["a"])(e,"event").pipe(Object(M["a"])(Hd("m.call.answer",s,c,o))),al(u,e,"m.call.invite",n,{log:l,latest$:d,config$:f}).pipe(Object(To["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(rs["a"])()))})),Object(Xc["a"])(1),Object(To["a"])((function(){return l.info("RTC: got answer",c)})),Object(B["a"])((function(e){p.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(rs["a"])()),Object(D["a"])(b))})))}function Kd(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,d=a.config$;return Object(Wu["a"])(e,"event").pipe(Object(M["a"])(Hd("m.call.invite",c,i,o)),Object(To["a"])((function(){return u.info("RTC: got invite",i)})),Object($["a"])((function(t){return Object(Nt["a"])(qd(e)).pipe(Object(B["a"])((function(e){return[t,e]})))})),Object(Jc["a"])(d),Object($["a"])((function(r){var c=Nd(r,2),f=Nd(c[0],2),p=f[0],b=f[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(Id(b),Id(y))});return m.setRemoteDescription(new RTCSessionDescription(p.getContent().offer)),Object(I["a"])(Vd(m,e,t,n,a),Object(P["a"])((function(){return m.createAnswer()})).pipe(Object($["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return al(s,e,"m.call.answer",n,{log:u,latest$:l,config$:d})})),Object(To["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(rs["a"])()),Object(Wu["a"])(m,"datachannel").pipe(Object(q["a"])("channel")))})),Object(Xc["a"])(1))}function Gd(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object($["a"])((function(t){return Object(I["a"])(Object(Wu["a"])(t,"close").pipe(Object(To["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(rs["a"])()),Object(Wu["a"])(t,"error").pipe(Object($["a"])((function(e){return Object(Kc["a"])(e.error)}))),Object(Wu["a"])(t,"open").pipe(Object(Xc["a"])(1),Object(Lu["a"])(c/3),Object(To["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(Qc["a"])(zn(t,{address:i}))),Object(Wu["a"])(t,"message").pipe(Object(To["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(q["a"])("data"),Object(M["a"])((function(e){return"string"===typeof e})),Object(B["a"])((function(e){return kr({text:e,message:ol(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Fu["a"])((function(){return t.close()})))})),Object(So["a"])(e),Object(Tc["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),U["a"]})),Object(Ad["a"])(zn(void 0,{address:i})))}}function Zd(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(xo["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Jc["a"])(i,c),Object(M["a"])((function(e){var t,n=Nd(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Se.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Se.WEBRTC])})),Object(Rt["a"])((function(t){var n=Nd(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(D["a"])(zn(void 0,i.meta));var l={log:r,latest$:o,config$:c},d=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),f=d.startsWith(a.toLowerCase());return Object(P["a"])((function(){var t,n={callId:d,peerId:i.payload.userId,peerAddress:i.meta.address},a=new R["a"],p=new R["a"];return t=f?Wd(s,a,n,u,l):Kd(s,a,n,u,l),p.pipe(Object($["a"])((function(){return al(i.meta.address,s,"m.call.hangup",{call_id:d,version:0},{log:r,latest$:o,config$:c}).pipe(Object(So["a"])(Object(Wc["a"])(u.httpTimeout/10)))})),Object(So["a"])(e.pipe(Object(M["a"])(ca.is)))).subscribe(),Object(I["a"])(t,Object(Wu["a"])(s,"event").pipe(Object(M["a"])(Hd("m.call.hangup",n.peerId,d)),Object(Sd["a"])(Object(Kc["a"])(new Error("RTC: peer hung up"))))).pipe(Gd(p,n,u,l))})).pipe(Object(es["a"])((function(e){return e.pipe(Object(Jc["a"])(o,c),Object($["a"])((function(e){var t,n,r=Nd(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?f?Object(Wc["a"])(o/10):Object(D["a"])(null):U["a"]})))})))})))}var Yd=function(e,t,n){return xd(t),e.pipe(Object(M["a"])(Yn.success.is),Object(Ao["a"])((function(e){return e.meta.address})),Object($["a"])((function(t){return Zd(e,t,n)})))};function Xd(e,t){return tf(e)||ef(e,t)||zd(e,t)||Qd()}function Qd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zd(e,t){if(e){if("string"===typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ef(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function tf(e){if(Array.isArray(e))return e}var nf=function(e,t,n){var r=n.address;return e.pipe(Object(M["a"])(kn([Hn.request,Hn.success])),Object(Jc["a"])(t),Object($["a"])((function(e){var t=Xd(e,2),n=t[0],a=t[1];return Object(Nt["a"])(Object.entries(a.sent)).pipe(Object(M["a"])((function(e){var t=Xd(e,2),a=Xd(t[1].transfer,2),o=a[1];return o.token_network_address===n.meta.tokenNetwork&&o.recipient===n.meta.partner&&o.initiator===r})),Object(B["a"])((function(e){var t,n,r,a,o=Xd(e,2),i=o[0],c=o[1],s={secrethash:i,direction:Cr.SENT};return c.lockExpired||c.unlockProcessed||(null===(n=null===(t=c.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||c.secretRequest&&!c.secretReveal?void 0:(null===(a=null===(r=c.secret)||void 0===r?void 0:r[1])||void 0===a?void 0:a.registerBlock)||c.secretReveal||c.unlock?c.unlock?Pr.success({balanceProof:Va(c.unlock[1])},s):Pr.success({},s):Pr.failure(new ct(ot.XFER_CHANNEL_CLOSED_PREMATURELY),s)})),Object(M["a"])(pt))})))};function rf(e,t,n){return Object(I["a"])(e.pipe(Object(M["a"])(n),Object(Xc["a"])(1),Object(rs["a"])()),Object(D["a"])(t))}function af(e,t){return lf(e)||uf(e,t)||cf(e,t)||of()}function of(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cf(e,t){if(e){if("string"===typeof e)return sf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sf(e,t):void 0}}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function lf(e){if(Array.isArray(e))return e}function df(e,t,n,r){var a=n.confirmationBlocks;return Object(Nt["a"])(Object.entries(t.sent)).pipe(Object(M["a"])((function(e){var t,n,o=af(e,2),i=o[1];return!i.unlock&&!i.lockExpired&&!i.channelClosed&&i.transfer[1].lock.expiration.add(a).lte(r)&&!(null===(n=null===(t=i.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)})),Object($["a"])((function(t){var n=af(t,2),r=n[0],a=n[1],o={secrethash:r,direction:Cr.SENT};return Object(I["a"])(rf(e,Vr.request(void 0,o),An(Vr,o)),Object(D["a"])(Pr.failure(new ct(ot.XFER_EXPIRED,{block:a.transfer[1].lock.expiration.toString()}),o)))})))}var ff=function(e,t,n){var r=n.config$;return e.pipe(Object(M["a"])(kn(Ln)),Object(Jc["a"])(t,r),Object(zc["a"])((function(t){var n=af(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return df(e,a,o,r)})))};function pf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function bf(e,t){return hf(e)||mf(e,t)||Of(e,t)||yf()}function yf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function hf(e){if(Array.isArray(e))return e}function vf(e){return wf(e)||_f(e)||Of(e)||gf()}function gf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Of(e,t){if(e){if("string"===typeof e)return kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kf(e,t):void 0}}function _f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function wf(e){if(Array.isArray(e))return kf(e)}function kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jf(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return st(n.length===e.locks.length-1,"invalid locks size"),n}function Ef(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function Tf(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),U["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},d=t.payload.paths[0].fee,f=t.payload.paths[0].path[0],b=e.channels[Xo({tokenNetwork:t.payload.tokenNetwork,partner:f})];st((null===b||void 0===b?void 0:b.state)===Pa.open,"not open"),st(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var y={amount:t.payload.value.add(d),expiration:Object(w["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},m=ms([].concat(vf(b.own.locks),[y]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",b.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",d.toString(),"in fees.");var h={type:Cn.LOCKED_TRANSFER,message_identifier:Os(),chain_id:Object(w["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(w["bigNumberify"])(b.id),nonce:b.own.nextNonce,transferred_amount:b.own.balanceProof.transferredAmount,locked_amount:b.own.balanceProof.lockedAmount.add(y.amount),locksroot:m,payment_identifier:t.payload.paymentId,token:b.token,recipient:f,lock:y,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Nt["a"])(Ga(u,h,{log:i})).pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ur({message:n,fee:d,partner:f},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Br({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function Af(e,t,n){return Object(xt["a"])([e,n.config$]).pipe(Object(F["a"])(),Object($["a"])((function(e){var r=bf(e,2),a=r[0],o=r[1];return Tf(a,t,o,n)})),Object(Tc["a"])((function(e){return Object(D["a"])(Pr.failure(e,t.meta))})))}function Sf(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;st(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer[1],u=t.sent[i].partner,l=t.channels[Xo({tokenNetwork:s.token_network_address,partner:u})];if(st((null===l||void 0===l?void 0:l.state)===Pa.open,"channel not open"),t.sent[i].unlock)c=Object(D["a"])(t.sent[i].unlock[1]);else{st(t.sent[i].secret,"unknown secret"),st(t.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var d={type:Cn.UNLOCK,message_identifier:Os(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:l.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:ms(jf(l.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret[1].value};c=Object(Nt["a"])(Ga(o,d,{log:a}))}return c.pipe(Object(Jc["a"])(e),Object(B["a"])((function(e){var t=bf(e,2),r=t[0],a=t[1];return st(a.sent[i].secret[1].registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),st(!a.sent[i].channelClosed,"channel closed!"),qr.success({message:r,partner:u},n.meta)})))}function xf(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(n){return Sf(e,n,t,{log:a,signer:r})})),Object(Tc["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(D["a"])(qr.failure(e,t.meta))})))}function Nf(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;st(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer[1],s=e.sent[o].partner,u=e.channels[Xo({tokenNetwork:c.token_network_address,partner:s})];if(st((null===u||void 0===u?void 0:u.state)===Pa.open,"channel not open"),e.sent[o].lockExpired)i=Object(D["a"])(e.sent[o].lockExpired[1]);else{st(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),st(!e.sent[o].unlock,"transfer already unlocked");var l=ms(jf(u.own,o)),d={type:Cn.LOCK_EXPIRED,message_identifier:Os(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:u.own.nextNonce,transferred_amount:u.own.balanceProof.transferredAmount,locked_amount:u.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:l,recipient:s,secrethash:o};i=Object(Nt["a"])(Ga(r,d,{log:a}))}return i.pipe(Object(B["a"])((function(e){return Vr.success({message:e,partner:s},t.meta)})))}function Cf(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Nf(e,t,{signer:a,log:r})})),Object(Tc["a"])((function(e){return Object(D["a"])(Vr.failure(e,t.meta))})))}function Rf(e,t,n){var r=n.address,a=n.log,o=n.network,i=n.signer,c=n.config$,s=t.payload.message.lock.secrethash,u={secrethash:s,direction:Cr.RECEIVED};return Object(xt["a"])([e,c]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=bf(e,2),c=n[0],l=n[1],d=l.revealTimeout,f=l.caps,b=t.payload.message;if(s in c.received){a.warn("transfer already present",t.meta);var y=b.message_identifier;return c.received[s].partner===t.meta.address&&c.received[s].transfer[1].message_identifier.eq(y)?Object(D["a"])(Lr({message:c.received[s].transferProcessed[1]},u)):U["a"]}var m=b.token_network_address,h=t.meta.address,v=c.channels[Xo({tokenNetwork:m,partner:h})];st((null===v||void 0===v?void 0:v.state)===Pa.open,"channel not open"),st(b.chain_id.eq(o.chainId),"chainId mismatch"),st(b.channel_identifier.eq(v.id),"channelId mismatch"),st(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=[].concat(vf(v.partner.locks),[b.lock]),O=ms(g);st(b.locksroot===O,"locksroot mismatch"),st(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),st(b.locked_amount.eq(Ef(g)),"lockedAmount mismatch");var _=Jo(v).partnerCapacity;st(b.lock.amount.lte(_),"balanceProof total amount bigger than capacity"),st(b.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",b.lock.amount.toString(),"of token",v.token,", from",b.initiator,", through partner",h);var w=Object(D["a"])(void 0);!(null===f||void 0===f?void 0:f[Se.NO_RECEIVE])&&b.target===r&&b.lock.expiration.sub(d).gt(c.blockNumber)&&(w=Object(P["a"])((function(){var e={type:Cn.SECRET_REQUEST,payment_identifier:b.payment_identifier,secrethash:s,amount:b.lock.amount,expiration:b.lock.expiration,message_identifier:Os()};return Ga(i,e,{log:a})})));var j=Object(P["a"])((function(){var e={type:Cn.PROCESSED,message_identifier:b.message_identifier};return Ga(i,e,{log:a})}));return Object(xt["a"])([j,w]).pipe(Object($["a"])(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=bf(t,2),r=n[0],a=n[1],e.next=3,Ur({message:b,fee:k["Zero"],partner:h},u);case 3:return e.next=5,Lr({message:r},u);case 5:if(!a){e.next=10;break}return e.next=8,Yn.request(void 0,{address:b.initiator});case 8:return e.next=10,Fr({message:a},u);case 10:case"end":return e.stop()}}),e)}))))})),Object(Tc["a"])((function(e){return Object(D["a"])(Pr.failure(e,u))})))}function Df(e,t,n){var r=n.log,a=n.network,o=n.signer,i=hs(t.payload.message.secret),c={secrethash:i,direction:Cr.RECEIVED};return e.pipe(Object(F["a"])(),Object($["a"])((function(e){if(!(i in e.received))return U["a"];var n=e.received[i],s=t.payload.message,u=t.meta.address;if(st(u===n.partner,"wrong partner"),st(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed[1].message_identifier.eq(s.message_identifier)?Object(D["a"])(Hr({message:n.unlockProcessed[1]},c)):U["a"];var l=n.transfer[1];st(s.token_network_address===l.token_network_address,"wrong tokenNetwork");var d=s.token_network_address,f=e.channels[Xo({tokenNetwork:d,partner:u})];st((null===f||void 0===f?void 0:f.state)===Pa.open,"channel not open"),st(s.chain_id.eq(a.chainId),"chainId mismatch"),st(s.channel_identifier.eq(f.id),"channelId mismatch"),st(s.nonce.eq(f.partner.nextNonce),"nonce mismatch");var b=l.lock.amount,y=jf(f.partner,i);st(s.locksroot===ms(y),"locksroot mismatch"),st(s.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(b)),"transferredAmount mismatch"),st(s.locked_amount.eq(Ef(y)),"lockedAmount mismatch");var m={type:Cn.PROCESSED,message_identifier:s.message_identifier};return Object(Nt["a"])(Ga(o,m,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Br({secret:s.secret},c);case 2:return e.next=4,qr.success({message:s,partner:u},c);case 4:return e.next=6,Hr({message:t},c);case 6:return e.next=8,Pr.success({balanceProof:Va(s)},c);case 8:case"end":return e.stop()}}),e)}))))})),Object(Tc["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(D["a"])(qr.failure(e,c))})))}function If(e,t,n){var r=n.log,a=n.network,o=n.signer,i=n.config$,c=t.payload.message.secrethash,s={secrethash:c,direction:Cr.RECEIVED};return Object(xt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n,i,u=bf(e,2),l=u[0],d=u[1].confirmationBlocks;if(!(c in l.received))return U["a"];var f=l.received[c],b=t.payload.message,y=t.meta.address;if(st(y===f.partner,"wrong partner"),st(!f.unlock,"transfer unlocked"),f.lockExpired)return r.warn("transfer already expired",t.meta),f.lockExpiredProcessed&&f.lockExpiredProcessed[1].message_identifier.eq(b.message_identifier)?Object(D["a"])(Wr({message:f.lockExpiredProcessed[1]},s)):U["a"];var m=f.transfer[1];st(m.lock.expiration.add(d).lte(l.blockNumber),"expiration block not confirmed yet"),st(!(null===(i=null===(n=f.secret)||void 0===n?void 0:n[1])||void 0===i?void 0:i.registerBlock),"secret registered onchain"),st(b.token_network_address===m.token_network_address,"wrong tokenNetwork");var h=b.token_network_address,v=l.channels[Xo({tokenNetwork:h,partner:y})];st((null===v||void 0===v?void 0:v.state)===Pa.open,"channel not open"),st(b.chain_id.eq(a.chainId),"chainId mismatch"),st(b.channel_identifier.eq(v.id),"channelId mismatch"),st(b.nonce.eq(v.partner.nextNonce),"nonce mismatch");var g=jf(v.partner,c);st(b.locksroot===ms(g),"locksroot mismatch"),st(b.locked_amount.eq(Ef(g)),"lockedAmount mismatch"),st(b.transferred_amount.eq(v.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var O={type:Cn.PROCESSED,message_identifier:b.message_identifier};return Object(Nt["a"])(Ga(o,O,{log:r})).pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Vr.success({message:b,partner:y},s);case 2:return e.next=4,Wr({message:t},s);case 4:return e.next=6,Pr.failure(new ct(ot.XFER_EXPIRED,{block:m.lock.expiration.toString()}),s);case 6:case"end":return e.stop()}}),e)}))))})),Object(Tc["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(D["a"])(Vr.failure(e,s))})))}function Pf(e,t,n,r){var a=n.log,o=n.signer,i=t.payload.message;st(i.participant===t.meta.address,"participant mismatch");var c=i.token_network_address,s=i.participant,u=e.channels[Xo({tokenNetwork:c,partner:s})];st((null===u||void 0===u?void 0:u.state)===Pa.open,"channel not open"),st(i.chain_id.eq(e.chainId),"chainId mismatch"),st(i.channel_identifier.eq(u.id),"channelId mismatch");var l=Object(D["a"])(void 0),d="".concat(Qo(u),"+").concat(i.message_identifier.toString()),f=r.get(d);if(f)l=Object(D["a"])(f);else{st(i.nonce.eq(u.partner.nextNonce),"nonce mismatch");var p=Jo(u),b=p.partnerBalance,y=p.partnerLocked,m=p.partnerDeposit,h=m.add(b).sub(y);if(st(i.total_withdraw.lte(h),"invalid total_withdraw, greater than partner.deposit + own.transferredAmount"),i.expiration.gt(e.blockNumber)){var v={type:Cn.WITHDRAW_CONFIRMATION,message_identifier:i.message_identifier,chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,participant:i.participant,total_withdraw:i.total_withdraw,nonce:u.own.nextNonce,expiration:i.expiration};l=Object(Nt["a"])(Ga(o,v,{log:a})).pipe(Object(To["a"])((function(e){return r.put(d,e)})))}}var g={tokenNetwork:c,partner:s,totalWithdraw:i.total_withdraw,expiration:i.expiration.toNumber()};return Object(I["a"])(Object(D["a"])(Zr.request({message:i},g)),l.pipe(Object(M["a"])(pt),Object(B["a"])((function(t){return st(i.expiration.gt(e.blockNumber),"request expired while signing"),Zr.success({message:t},g)})),Object(Tc["a"])((function(e){return a.warn("error while signing WithdrawConfirmation, ignoring",e),U["a"]}))))}function Uf(e,t,n,r){var a=n.signer,o=n.log;return e.pipe(Object(F["a"])(),Object($["a"])((function(e){return Pf(e,t,{log:o,signer:a},r)})),Object(Tc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}function Lf(e,t,n,r){var a=n.signer,o=n.log,i=n.config$;return Object(xt["a"])([e,i]).pipe(Object(F["a"])(),Object($["a"])((function(e){var n=bf(e,2),i=n[0],c=n[1].confirmationBlocks,s=t.payload.message;st(s.participant===t.meta.address,"participant mismatch");var u,l=s.token_network_address,d=s.participant,f=i.channels[Xo({tokenNetwork:l,partner:d})];st((null===f||void 0===f?void 0:f.state)===Pa.open,"channel not open"),st(s.chain_id.eq(i.chainId),"chainId mismatch"),st(s.channel_identifier.eq(f.id),"channelId mismatch");var b="".concat(Qo(f),"+").concat(s.message_identifier.toString()),y=r.get(b);if(y)u=Object(D["a"])(y);else{st(s.nonce.eq(f.partner.nextNonce),"nonce mismatch"),st(s.expiration.add(c).lte(i.blockNumber));var m={type:Cn.PROCESSED,message_identifier:s.message_identifier};u=Object(Nt["a"])(Ga(a,m,{log:o})).pipe(Object(To["a"])((function(e){return r.put(b,e)})))}var h={tokenNetwork:l,partner:d,totalWithdraw:s.total_withdraw,expiration:s.expiration.toNumber()};return u.pipe(Object($["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Zr.failure({message:s},h);case 2:return e.next=4,_r.request({message:t},{address:d,msgId:t.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))})),Object(Tc["a"])((function(e){return o.warn("Error trying to handle WithdrawRequest, ignoring:",e),U["a"]})))}var Bf=function(e,t,n){pf(t);var r=new pd(32),a=new pd(32),o=n.latest$.pipe(Bo("state"));return Object(I["a"])(e.pipe(Object(M["a"])(kn([Pr.request,qr.request,Vr.request]))),e.pipe(Object(M["a"])(Za([Et(ur),Et(dr),Et(fr),Et(br),Et(mr)])))).pipe(Object(Mu["a"])((function(e){var t;switch(e.type){case Pr.request.type:t=Af(o,e,n);break;case qr.request.type:t=xf(o,e,n);break;case Vr.request.type:t=Cf(o,e,n);break;case kr.type:switch(e.payload.message.type){case Cn.LOCKED_TRANSFER:t=Rf(o,e,n);break;case Cn.UNLOCK:t=Df(o,e,n);break;case Cn.LOCK_EXPIRED:t=If(o,e,n);break;case Cn.WITHDRAW_REQUEST:t=Uf(o,e,n,r);break;case Cn.WITHDRAW_EXPIRED:t=Lf(o,e,n,a);break}break}return t})))};function Mf(e,t){return Vf(e)||Hf(e,t)||$f(e,t)||Ff()}function Ff(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $f(e,t){if(e){if("string"===typeof e)return qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qf(e,t):void 0}}function qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vf(e){if(Array.isArray(e))return e}function Wf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Kf=function(e,t){return Wf(e),t.pipe(Object(F["a"])(),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,o=Object.entries(t.sent);case 1:if(!(a<o.length)){e.next=21;break}if(i=Mf(o[a],2),c=i[0],s=i[1],u=c,!(s.unlockProcessed||s.lockExpiredProcessed||(null===(r=null===(n=s.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock)||s.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return l={secrethash:u,direction:Cr.SENT},e.next=9,Yn.request(void 0,{address:s.transfer[1].target});case 9:if(s.transferProcessed){e.next=12;break}return e.next=12,Ur({message:s.transfer[1],fee:s.fee,partner:s.partner},l);case 12:if(!s.unlock){e.next=15;break}return e.next=15,qr.success({message:s.unlock[1],partner:s.partner},l);case 15:if(!s.lockExpired){e.next=18;break}return e.next=18,Vr.success({message:s.lockExpired[1],partner:s.partner},l);case 18:a++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},Gf=function(e,t,n){Wf(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object($["a"])((function(e){return Object(Nt["a"])(Object.entries(e.received))})),Object(M["a"])((function(e){var t,n,r=Mf(e,2),a=r[1];return!a.unlock&&!a.lockExpired&&!(null===(n=null===(t=a.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!a.channelClosed})),Object($["a"])((function(e){var t=Mf(e,2),n=t[0],a=t[1],o={secrethash:n,direction:Cr.RECEIVED};return Object(I["a"])(Object(D["a"])(Ur({message:a.transfer[1],fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(D["a"])(Br({secret:a.secret[1].value},o)):U["a"],a.secretReveal?Object(D["a"])($r({message:a.secretReveal[1]},o)):U["a"],!a.secret&&a.secretRequest?r.pipe(Object(q["a"])("caps",Se.NO_RECEIVE),Object(M["a"])((function(e){return!e})),Object(Xc["a"])(1),Object(Sd["a"])(Object(D["a"])(Yn.request(void 0,{address:a.transfer[1].initiator}),Fr({message:a.secretRequest[1]},o)))):U["a"])})))};function Zf(e,t){return Jf(e)||zf(e,t)||Xf(e,t)||Yf()}function Yf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xf(e,t){if(e){if("string"===typeof e)return Qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qf(e,t):void 0}}function Qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Jf(e){if(Array.isArray(e))return e}var ep=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(M["a"])(Ur.is),Object(M["a"])((function(e){return e.meta.direction===Cr.RECEIVED&&e.payload.message.target!==r})),Object(Jc["a"])(t,a),Object(M["a"])((function(e){var t=Zf(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(B["a"])((function(e){var t=Zf(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return Pr.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:Cr.SENT})})))};function tp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function np(e,t){return cp(e)||ip(e,t)||ap(e,t)||rp()}function rp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ap(e,t){if(e){if("string"===typeof e)return op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?op(e,t):void 0}}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ip(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function cp(e){if(Array.isArray(e))return e}var sp=function(e,t){return e.pipe(Object(M["a"])(Za(Et(nr))),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=np(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=np(s[c],2),l=u[0],d=u[1],!d.transfer[1].message_identifier.eq(o.message_identifier)||d.transfer[1].recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Lr({message:o},{secrethash:i,direction:Cr.SENT});case 16:case"end":return e.stop()}}),e)}))))},up=function(e,t){return e.pipe(Object(M["a"])(kn([Lr,Hr,Wr])),Object(M["a"])((function(e){return e.meta.direction===Cr.RECEIVED})),Object(Jc["a"])(t),Object(B["a"])((function(e){var t=np(e,2),n=t[0],r=t[1].received;return _r.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},lp=function(e,t){return e.pipe(Object(M["a"])(Za(Et(nr))),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=np(t,2),r=n[0],a=n[1],o=r.payload.message,i=Le()(a.sent,(function(e){return e.unlock&&e.unlock[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:Cr.SENT},e.next=8,Pr.success({balanceProof:Va(a.sent[i].unlock[1])},c);case 8:return e.next=10,Hr({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},dp=function(e,t){return e.pipe(Object(M["a"])(Za(Et(nr))),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=np(t,2),r=n[0],a=n[1],o=r.payload.message,i=Le()(a.sent,(function(e){return e.lockExpired&&e.lockExpired[1].message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Wr({message:o},{secrethash:i,direction:Cr.SENT});case 7:case"end":return e.stop()}}),e)}))))},fp=function(e,t,n){tp(t);var r=n.log,a=n.signer,o=new pd(32);return e.pipe(Object(M["a"])(Za([Et(lr),Et(mr)])),Object(Mu["a"])((function(e){var t=e.payload.message;return Object(P["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(D["a"])(_r.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Cn.PROCESSED,message_identifier:n};return Object(Nt["a"])(Ga(a,s,{log:r})).pipe(Object(To["a"])((function(e){return o.put(i,e)})),Object(B["a"])((function(t){return _r.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},pp=n("b6ad"),bp=n.n(pp);function yp(e,t){return Op(e)||gp(e,t)||hp(e,t)||mp()}function mp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hp(e,t){if(e){if("string"===typeof e)return vp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vp(e,t):void 0}}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Op(e){if(Array.isArray(e))return e}function _p(e,t){return bp()(e,t,(function(e,t){return bt.is(e)?e.eq(t):bt.is(t)?t.eq(e):void 0}))}var wp=function(e,t){return e.pipe(Object(M["a"])(Za(Et(lr))),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=yp(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&_p(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:Cr.SENT},e.next=14,Kr({message:o,partner:c.partner},u);case 14:return e.next=16,Pr.failure(new ct(ot.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function kp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function jp(e,t){return xp(e)||Sp(e,t)||Tp(e,t)||Ep()}function Ep(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tp(e,t){if(e){if("string"===typeof e)return Ap(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ap(e,t):void 0}}function Ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xp(e){if(Array.isArray(e))return e}function Np(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(es["a"])((function(e){return e.pipe(Object(Uu["a"])(t))})),Object(So["a"])(e))}}function Cp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return rf(t,e,An(_r,e.meta)).pipe(Np(n,r))}var Rp=function(e,t,n,r){return r.meta.direction!==Cr.SENT?U["a"]:n.pipe(Object(F["a"])(),Object(Rt["a"])((function(n){var a=n.httpTimeout,o=r.meta.secrethash,i=r.payload.message,c=_r.request({message:i},{address:i.recipient,msgId:i.message_identifier.toString()}),s=t.pipe(Bo("sent",o),Object(M["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Cp(c,e,s,a)})))},Dp=function(e,t,n,r){return r.meta.direction!==Cr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Jc["a"])(n),Object(Rt["a"])((function(n){var a=jp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=o.sent[c].transfer[1],l=_r.request({message:s},{address:u.recipient,msgId:s.message_identifier.toString()}),d=t.pipe(Bo("sent",c),Object(M["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Cp(l,e,d,i)})))},Ip=function(e,t,n,r){return r.meta.direction!==Cr.SENT?U["a"]:t.pipe(Object(F["a"])(),Object(Jc["a"])(n),Object(Rt["a"])((function(n){var a=jp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=_r.request({message:s},{address:o.sent[c].transfer[1].recipient,msgId:s.message_identifier.toString()}),l=t.pipe(Bo("sent",c),Object(M["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Cp(u,e,l,i)})))},Pp=function(e,t,n,r){return r.meta.direction!==Cr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Jc["a"])(n),Object(Rt["a"])((function(n){var a=jp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=_r.request({message:s},{address:o.received[c].transfer[1].initiator,msgId:s.message_identifier.toString()}),l=t.pipe(Bo("received",c),Object(M["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Cp(u,e,l,i)})))},Up=function(e,t,n,r){return r.meta.direction!==Cr.RECEIVED?U["a"]:t.pipe(Object(F["a"])(),Object(Jc["a"])(n),Object(Rt["a"])((function(n){var a=jp(n,2),o=a[0],i=a[1].httpTimeout,c=r.meta.secrethash,s=r.payload.message,u=_r.request({message:s},{address:o.received[c].partner,msgId:s.message_identifier.toString()}),l=t.pipe(Bo("received",c),Object(M["a"])((function(e){var t,n;return!!(e.unlock||(null===(n=null===(t=e.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)||e.channelClosed)})));return Cp(u,e,l,i)})))},Lp=function(e,t,n){kp(t);var r=n.latest$,a=n.config$,o=r.pipe(Bo("state"));return e.pipe(Object(M["a"])(kn([Ur,qr.success,Vr.success,Fr,$r])),Object($["a"])((function(t){return Ur.is(t)?Rp(e,o,a,t):qr.success.is(t)?Dp(e,o,a,t):Vr.success.is(t)?Ip(e,o,a,t):Fr.is(t)?Pp(e,o,a,t):Up(e,o,a,t)})))};function Bp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Mp(e,t){return Vp(e)||Hp(e,t)||$p(e,t)||Fp()}function Fp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $p(e,t){if(e){if("string"===typeof e)return qp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qp(e,t):void 0}}function qp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Vp(e){if(Array.isArray(e))return e}var Wp=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(M["a"])(Za(Et(rr))),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,o,i,c,s;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Mp(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer[1],s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Fr({message:c},{secrethash:c.secrethash,direction:Cr.SENT});case 10:case"end":return e.stop()}}),e)}))))},Kp=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),U["a"];var s,u=e.sent[c].transfer[1],l=u.target,d=e.sent[c].fee,f=u.lock.amount.sub(d);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),U["a"];if(i.amount.lt(f))return o.error("SecretRequest for amount too small!",i,u),Object(D["a"])(Pr.failure(new ct(ot.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(f)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(D["a"])(e.sent[t.meta.secrethash].secretReveal[1]);else{var b={type:Cn.SECRET_REVEAL,message_identifier:Os(),secret:e.sent[t.meta.secrethash].secret[1].value};s=Object(Nt["a"])(Ga(a,b,{log:o}))}return s.pipe(Object($["a"])(p.a.mark((function e(n){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$r({message:n},t.meta);case 2:return e.next=4,_r.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},Gp=function(e,t,n){Bp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(M["a"])(kn(Fr)),Object(M["a"])((function(e){return e.meta.direction===Cr.SENT})),Object(Mu["a"])((function(e){return o.pipe(Bo("state")).pipe(Object(F["a"])(),Object($["a"])((function(t){return Kp(t,e,{log:r,signer:a})})))})))},Zp=function(e,t){return e.pipe(Object(M["a"])(Za(ar)),Object(Jc["a"])(t),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Mp(t,2),r=n[0],a=n[1],o=r.payload.message,i=hs(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:Cr.SENT},e.next=7,Br({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,qr.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Br({secret:o.secret},{secrethash:i,direction:Cr.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},Yp=function(e,t,n){Bp(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(M["a"])(kn([Br,Mr.success])),Object(M["a"])((function(e){return e.meta.direction===Cr.RECEIVED})),Object(Mu["a"])((function(e){return o.pipe(Bo("state"),Object(F["a"])(),Object(M["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object($["a"])((function(){var t={type:Cn.SECRET_REVEAL,message_identifier:Os(),secret:e.payload.secret};return Ga(a,t,{log:r})})),Object(B["a"])((function(t){return $r({message:t},e.meta)})),Object(Tc["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),U["a"]})))})))},Xp=function(e,t,n){Bp(e);var r=n.secretRegistryContract;return Yt(r,[r.filters.SecretRevealed(null,null)]).pipe(Object(Jc["a"])(t),Object(M["a"])((function(e){var t=Mp(e,2),n=Mp(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return r in i&&i[r].transfer[1].lock.expiration.gte(a)||r in c&&c[r].transfer[1].lock.expiration.gte(a)})),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Mp(t,2),r=Mp(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.sent,u=c.received,!(a in s)||!s[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=4;break}return e.next=4,Mr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Cr.SENT});case 4:if(!(a in u)||!u[a].transfer[1].lock.expiration.gte(i.blockNumber)){e.next=7;break}return e.next=7,Mr.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:void 0},{secrethash:a,direction:Cr.RECEIVED});case 7:case"end":return e.stop()}}),e)}))))},Qp=function(e){return e.pipe(Object(M["a"])(Mr.success.is),Object(M["a"])((function(e){return!!e.payload.confirmed})),Object(B["a"])((function(e){return Pr.success({},e.meta)})))},zp=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(Bo(Cr.RECEIVED),Object($["a"])((function(e){return Object(Nt["a"])(Object.keys(e))})),Object(Hl["a"])(),Object($["a"])((function(t){return e.pipe(Object(M["a"])(Ln.is),Object(Jc["a"])(a.pipe(Object(q["a"])("state",Cr.RECEIVED,t)),r),Object(M["a"])((function(e){var t,n,r=Mp(e,3),a=r[0],o=r[1],i=r[2],c=i.revealTimeout,s=i.caps;return!(null===s||void 0===s?void 0:s[Se.NO_RECEIVE])&&!!o.secret&&o.transfer[1].lock.expiration.sub(c).lt(a.payload.blockNumber)&&!(null===(n=null===(t=o.secret)||void 0===t?void 0:t[1])||void 0===n?void 0:n.registerBlock)&&!o.unlock})),Object(zc["a"])((function(n){var r=Mp(n,2),a=r[1],o={secrethash:t,direction:Cr.RECEIVED};return rf(e,Mr.request({secret:a.secret[1].value},o),Sn(Mr,o))})),Object(So["a"])(a.pipe(Bo("state"),Object(M["a"])((function(e){var n,r,a=e.blockNumber,o=e.received[t],i=o.transfer[1].lock.expiration;return!!(i.lt(a)||o.unlock||(null===(r=null===(n=o.secret)||void 0===n?void 0:n[1])||void 0===r?void 0:r.registerBlock))})))))})))},Jp=function(e,t,n){Bp(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.secretRegistryContract,s=n.config$;return e.pipe(Object(M["a"])(Mr.request.is),Object(Jc["a"])(s),Object($["a"])((function(e){var t,n=Mp(e,2),s=n[0],u=n[1].subkey,l=eu({signer:a,address:o,main:i},null!==(t=s.payload.subkey)&&void 0!==t?t:u),d=l.signer,f=tu(c,d);return Object(Nt["a"])(f.functions.registerSecret(s.payload.secret)).pipe(ei("registerSecret",ot.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Object(rs["a"])(),Object(Tc["a"])((function(e){return Object(D["a"])(Mr.failure(e,s.meta))})))})))};function eb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=rb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function tb(e,t){return ib(e)||ob(e,t)||rb(e,t)||nb()}function nb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rb(e,t){if(e){if("string"===typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ab(e,t):void 0}}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ob(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ib(e){if(Array.isArray(e))return e}var cb=function(e){return e.pipe(Object(M["a"])(kn(Zr.success)),Object(B["a"])((function(e){return _r.request({message:e.payload.message},{address:e.meta.partner,msgId:e.payload.message.message_identifier.toString()})})))},sb=[["partner",1],["own",2]],ub=function(e,t,n){var r=n.config$;return e.pipe(Object(M["a"])(Ln.is),Object(q["a"])("payload","blockNumber"),Object(Jc["a"])(t,r),Object($["a"])(p.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,f,b,y,m,h;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=tb(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=43;break}if(s=c[i],s.state===Pa.open){e.next=6;break}return e.abrupt("continue",40);case 6:u=eb(sb),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=32;break}d=tb(l.value,2),f=d[0],b=d[1],y=eb(s[f].withdrawRequests),e.prev=12,y.s();case 14:if((m=y.n()).done){e.next=22;break}if(h=m.value,!h.expiration.add(o*b).gt(r)){e.next=18;break}return e.abrupt("continue",20);case 18:return e.next=20,Yr({participant:s[f].address},{tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:h.expiration.toNumber(),totalWithdraw:h.total_withdraw});case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](12),y.e(e.t0);case 27:return e.prev=27,y.f(),e.finish(27);case 30:e.next=9;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](7),u.e(e.t1);case 37:return e.prev=37,u.f(),e.finish(37);case 40:i++,e.next=2;break;case 43:case"end":return e.stop()}}),e,null,[[7,34,37,40],[12,24,27,30]])}))))},lb=n("1a2de");function db(e,t){return mb(e)||yb(e,t)||pb(e,t)||fb()}function fb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pb(e,t){if(e){if("string"===typeof e)return bb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bb(e,t):void 0}}function bb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mb(e){if(Array.isArray(e))return e}var hb=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function vb(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Se.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Xo({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==Pa.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(Pa.open,'"');var s=Jo(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var gb=N()((function(e){return hb(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function Ob(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=Ne["t"]({message:Ne["q"],network_info:Ne["t"]({chain_id:Ne["j"](a.chainId),token_network_registry_address:Ne["j"](o.TokenNetworkRegistry.address)}),operator:Ne["q"],payment_address:wt,price_info:ht(32),version:Ne["q"]}),s=wt.is(e)?Object(Nt["a"])(r.functions.urls(e)):Object(D["a"])(e);return s.pipe(Object(Jc["a"])(i),Object($["a"])((function(e){var t=db(e,2),a=t[0],o=t[1].httpTimeout;if(!a)throw new ct(ot.PFS_EMPTY_URL);if(!au(a))throw new ct(ot.PFS_INVALID_URL,{url:a});a.startsWith("https://")||a.startsWith("http://")||(a="https://".concat(a));var i=Date.now();return Object($u["a"])(a+"/api/v1/info").pipe(Object(Lu["a"])(o),Object($["a"])((function(e){return hb(n,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=ft,t.t1=c,t.t2=Na,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,gb(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(B["a"])((function(e){var t=db(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function _b(e,t){var n=t.log;return Object(Nt["a"])(e).pipe(Object($["a"])((function(e){return Ob(e,t).pipe(Object(Tc["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),U["a"]})))}),5),Object(Pu["a"])(),Object(B["a"])((function(e){if(!e.length)throw new ct(ot.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function wb(e){return Object(w["concat"])([Aa(e.one_to_n_address,20),Aa(e.chain_id,32),Aa(Ia.IOU,32),Aa(e.sender,20),Aa(e.receiver,20),Aa(e.amount,32),Aa(e.expiration_block,32)])}function kb(e,t){return hb(this,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",e.signMessage(wb(t)).then((function(e){return Object.assign(Object.assign({},t),{signature:e})})));case 1:case"end":return n.stop()}}),n)})))}function jb(e){return Ab(e)||Tb(e)||Rb(e)||Eb()}function Eb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ab(e){if(Array.isArray(e))return Db(e)}function Sb(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Rb(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function xb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Nb(e,t){return Pb(e)||Ib(e,t)||Rb(e,t)||Cb()}function Cb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rb(e,t){if(e){if("string"===typeof e)return Db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Db(e,t):void 0}}function Db(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ib(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pb(e){if(Array.isArray(e))return e}var Ub=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Lb=N()((function(e){return Ub(void 0,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.one_to_n_address());case 1:case"end":return t.stop()}}),t)})))})),Bb=Ne["n"](Ne["t"]({error_code:Ne["l"],errors:Ne["q"]}));function Mb(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Fb(e,t,n){var r=this,a=n.address,o=n.signer,i=n.network,c=n.userDepositContract,s=n.latest$,u=n.config$;return Object(P["a"])((function(){var t=Mb(),n=Object(w["concat"])([a,e.address,Object(w["toUtf8Bytes"])(t)]);return Object(Nt["a"])(o.signMessage(n)).pipe(Object(B["a"])((function(n){return{sender:a,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Jc["a"])(u),Object($["a"])((function(n){var r=Nb(n,2),a=r[0],o=r[1].httpTimeout;return Object($u["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Lu["a"])(o))})),Object(Jc["a"])(s.pipe(Object(q["a"])("state","blockNumber"))),Object($["a"])((function(t){var n=Nb(t,2),o=n[0],s=n[1];return Ub(r,void 0,void 0,p.a.mark((function t(){var n,r,u,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(404!==o.status){t.next=10;break}return t.t0=a,t.t1=e.address,t.t2=Object(w["bigNumberify"])(i.chainId),t.t3=k["Zero"],t.next=7,Lb(c);case 7:return t.t4=t.sent,t.t5=Object(w["bigNumberify"])(s).add(2*Math.pow(10,5)),t.abrupt("return",{sender:t.t0,receiver:t.t1,chain_id:t.t2,amount:t.t3,one_to_n_address:t.t4,expiration_block:t.t5});case 10:return t.next=12,o.text();case 12:if(n=t.sent,o.ok){t.next=15;break}throw new ct(ot.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:o.status,responseText:n});case 15:if(r=ft(Nr,Na(n)),u=r.last_iou,l=Object(w["verifyMessage"])(wb(u),u.signature),l===a){t.next=19;break}throw new ct(ot.PFS_IOU_SIGNATURE_MISMATCH,{signer:l,address:a});case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})))})))}function $b(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object($["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(D["a"])(i):Fb(e,t,n)})),Object(B["a"])((function(t){return Object.assign(Object.assign({},t),{amount:t.amount.add(e.price)})})),Object($["a"])((function(e){return kb(n.signer,e)})))}var qb=function(e,t,n){xb(t);var r=n.log,a=n.latest$;return e.pipe(Object(M["a"])(kn(zr.request)),Object(Mu["a"])((function(e){return a.pipe(Object(F["a"])(),Object($["a"])((function(t){var o,i=t.state,c=t.presences,s=t.config,u=s.pfs,l=s.httpTimeout,d=s.pfsSafetyMargin,f=e.meta,b=f.tokenNetwork,y=f.target;if(!Object.values(i.tokens).includes(b))throw new ct(ot.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:b});if(!(y in c)||!c[y].payload.available)throw new ct(ot.PFS_TARGET_OFFLINE,{target:y});if(null===(o=c[y].payload.caps)||void 0===o?void 0:o[Se.NO_RECEIVE])throw new ct(ot.PFS_TARGET_NO_RECEIVE,{target:y});if(e.payload.paths)return Object(D["a"])({paths:e.payload.paths,iou:void 0});if(!0===vb(i,c,b,y,y,e.meta.value))return Object(D["a"])({paths:[{path:[n.address,y],fee:k["Zero"]}],iou:void 0});if(null===e.payload.pfs||!e.payload.pfs&&null===u)throw new ct(ot.PFS_DISABLED);var m=e.payload.pfs?Object(D["a"])(e.payload.pfs):u?Ob(u,n):a.pipe(Object(q["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object($["a"])((function(e){return _b(e,n)})),Object(To["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(q["a"])(0));return m.pipe(Object($["a"])((function(e){return e.price.isZero()?Object(D["a"])({pfs:e,iou:void 0}):$b(e,b,n).pipe(Object(B["a"])((function(t){return{pfs:e,iou:t}})))})),Object($["a"])((function(t){var r=t.pfs,a=t.iou;return Object($u["a"])("".concat(r.url,"/api/v1/").concat(b,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Ca({from:n.address,to:y,value:ht(32).encode(e.meta.value),max_paths:10,iou:a?Object.assign(Object.assign({},a),{amount:ht(32).encode(a.amount),expiration_block:ht(32).encode(a.expiration_block),chain_id:ht(32).encode(a.chain_id)}):void 0})}).pipe(Object(Lu["a"])(l),Object(B["a"])((function(e){return{response:e,iou:a}})))})),Object($["a"])((function(e){var t=e.response,n=e.iou;return Ub(void 0,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",{response:e.t0,text:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})))})),Object(B["a"])((function(e){var t=e.response,n=e.text,r=e.iou,a=Na(n);return t.ok?{paths:ft(Tr,a).result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*d)).div(1e6)}})),iou:r}:{error:ft(Bb,a),iou:r}})))})),Object(Jc["a"])(a),Object($["a"])((function(t){var a=Nb(t,2),o=a[0],i=a[1],c=i.state,s=i.presences;return Object(Nt["a"])(p.a.mark((function t(){var a,i,u,l,d,f,b,y,m,h,v,g,O;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.iou,!a){t.next=9;break}if(!o.paths&&2201!==o.error.error_code){t.next=7;break}return t.next=5,ea({iou:a},{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 5:t.next=9;break;case 7:return t.next=9,ta(void 0,{tokenNetwork:e.meta.tokenNetwork,serviceAddress:a.receiver});case 9:if(o.paths){t.next=14;break}if(i=o.error,u=i.errors,l=i.error_code,2201!==l){t.next=13;break}throw new ct(ot.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new ct(ot.PFS_ERROR_RESPONSE,{errorCode:l,errors:u});case 14:d=[],f=new Set,b=Sb(o.paths),t.prev=16,b.s();case 18:if((y=b.n()).done){t.next=32;break}if(m=y.value,h=m.path,v=m.fee,h[0]===n.address&&(h=h.slice(1)),g=h[0],!f.has(g)){t.next=24;break}return t.abrupt("continue",30);case 24:if(O=d.length?g!==d[0].path[0]?"path: already selected another recipient":!v.gt(d[0].fee)||"path: already selected a smaller fee":vb(c,s,e.meta.tokenNetwork,g,e.meta.target,e.meta.value.add(v)),!0===O){t.next=29;break}return r.warn("Invalidated received route. Reason:",O,"Route:",h),f.add(g),t.abrupt("continue",30);case 29:d.push({path:h,fee:v});case 30:t.next=18;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](16),b.e(t.t0);case 37:return t.prev=37,b.f(),t.finish(37);case 40:if(d.length){t.next=42;break}throw new ct(ot.PFS_NO_ROUTES_FOUND);case 42:return t.next=44,zr.success({paths:d},e.meta);case 44:case"end":return t.stop()}}),t,null,[[16,34,37,40]])}))())})),Object(Tc["a"])((function(t){return Object(D["a"])(zr.failure(t,e.meta))})))})))},Hb=function(e,t,n){xb(e),xb(t);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.latest$,s=n.config$;return c.pipe(Object(q["a"])("state"),ti,Object(Jc["a"])(s),Object($["a"])((function(e){var t=Nb(e,2),n=t[0],c=t[1].httpTimeout;return n.pipe(Object(Jc["a"])(s),Object(M["a"])((function(e){var t=Nb(e,2),n=t[1].pfsRoom;return!!n})),Object(lb["a"])(c/2),Object(Mu["a"])((function(e){var t=Nb(e,2),n=t[0],c=t[1],s=c.revealTimeout,u=c.pfsRoom,l=n.tokenNetwork,d=n.partner.address;if(n.state!==Pa.open)return U["a"];var f=Jo(n),p=f.ownCapacity,b=f.partnerCapacity,y={type:Cn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(w["bigNumberify"])(o.chainId),token_network_address:l,channel_identifier:Object(w["bigNumberify"])(n.id)},updating_participant:a,other_participant:d,updating_nonce:n.own.balanceProof.nonce,other_nonce:n.partner.balanceProof.nonce,updating_capacity:p,other_capacity:b,reveal_timeout:Object(w["bigNumberify"])(s)};return Object(P["a"])((function(){return Ga(i,y,{log:r})})).pipe(Object(B["a"])((function(e){return wr({message:e},{roomName:u})})),Object(Tc["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),U["a"]})))})))})))},Vb=function(e,t,n){xb(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(ti,Object($["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Jc["a"])(c),Object(M["a"])((function(e){var t=Nb(e,2),n=t[1],r=n.pfsRoom,a=n.caps;return!!r&&!(null===a||void 0===a?void 0:a[Se.NO_MEDIATE])})),Object($["a"])((function(e){var t=Nb(e,2),n=t[0],c=t[1].pfsRoom;if(n.state!==Pa.open)return U["a"];var s={type:Cn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(w["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(w["bigNumberify"])(n.id)},updating_participant:a,timestamp:Mb(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Nt["a"])(Ga(i,s,{log:r})).pipe(Object(B["a"])((function(e){return wr({message:e},{roomName:c})})),Object(Tc["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),U["a"]})))})))},Wb=function(e,t,n){xb(e),xb(t);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return o.pipe(Bo("pfs"),Object(Rt["a"])((function(e){return""!==e&&void 0!==e?U["a"]:Yt(r,[r.filters.RegisteredService(null,null,null,null)],Object(D["a"])(a.ServiceRegistry.block_number)).pipe(Object(Ao["a"])((function(e){var t=Nb(e,1),n=t[0];return n})),Object($["a"])((function(e){return e.pipe(Object(Rt["a"])((function(e){var t=Nb(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return U["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(D["a"])({service:n,valid:!1}).pipe(Object(Uu["a"])(new Date(o.toNumber()))):U["a"];return Object(I["a"])(Object(D["a"])({service:n,valid:!0}),i)})))})),Object(No["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(jb(e),[n]):e}),[]),Object(xo["a"])(),Object(lb["a"])(1e3),Object(B["a"])((function(e){return Jr({pfsList:e})})))})))},Kb=function(e,t,n){xb(e),xb(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(Bo("state","blockNumber"),Object(zc["a"])((function(){return o.functions.effectiveBalance(r)})),Object(xo["a"])((function(e,t){return t.eq(e)})),Object(B["a"])(na))};function Gb(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=Jo(e),u=s.partnerUnlocked;return u.gt(k["Zero"])?Object(xt["a"])([i,c]).pipe(Object(M["a"])((function(t){var n,r,a=Nb(t,2),o=a[0].udcBalance,i=a[1],c=i.monitoringRoom,s=i.monitoringReward,l=i.rateToSvt;return!!c&&!!(null===(n=null===s||void 0===s?void 0:s.gt)||void 0===n?void 0:n.call(s,k["Zero"]))&&o.gte(s)&&u.mul(null!==(r=l[e.token])&&void 0!==r?r:k["Zero"]).div(k["WeiPerEther"]).gt(s)})),Object(Xc["a"])(1),Object($["a"])((function(i){var c=Nb(i,2),s=c[1],u=s.monitoringReward,l=s.monitoringRoom,d=e.partner.balanceProof,f=Ma(d),p=Object(w["concat"])([Aa(e.tokenNetwork,20),Aa(r.chainId,32),Aa(Ia.BALANCE_PROOF_UPDATE,32),Aa(e.id,32),Aa(f,32),Aa(d.nonce,32),Aa(d.additionalHash,32),Aa(d.signature,65)]);return Object(Nt["a"])(a.signMessage(p)).pipe(Object($["a"])((function(r){return Ga(a,{type:Cn.MONITOR_REQUEST,balance_proof:{chain_id:d.chainId,token_network_address:d.tokenNetworkAddress,channel_identifier:Object(w["bigNumberify"])(e.id),nonce:d.nonce,balance_hash:f,additional_hash:d.additionalHash,signature:d.signature},non_closing_participant:t,non_closing_signature:r,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:u},{log:n})})),Object(B["a"])((function(e){return wr({message:e},{roomName:l})})))})),Object(Tc["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),U["a"]}))):U["a"]}}var Zb=function(e,t,n){return xb(e),xb(t),n.latest$.pipe(Object(q["a"])("state"),ti,Object(Jc["a"])(n.config$),Object($["a"])((function(e){var t=Nb(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(xo["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(L["a"])(1),Object(lb["a"])(a/2),Object(Rt["a"])(Gb(n)))})))},Yb=function(e,t,n){xb(t);var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer;return e.pipe(Object(M["a"])(aa.request.is),Object($["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(Mu["a"])((function(e){var t=Nb(e,2),n=t[0],c=t[1],s=tu(r,i),u=n.meta.amount;return Object(P["a"])((function(){return st(u.gt(k["Zero"]),[ot.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:u.toString()}]),st(c.sub(u).gte(k["Zero"]),[ot.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:c.toString(),amount:u.toString()}]),s.functions.planWithdraw(u)})).pipe(ei("planWithdraw",ot.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Object($["a"])((function(e){var t=e.transactionHash,n=e.blockNumber;return Object(Nt["a"])(r.functions.withdraw_plans(a)).pipe(Object(B["a"])((function(e){var r=e.amount,a=e.withdraw_block;return aa.success({block:a.toNumber(),txHash:t,txBlock:n,confirmed:void 0},{amount:r})})))})),Object(Tc["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(D["a"])(aa.failure(e,n.meta))})))})))},Xb=function(e,t,n){xb(e),xb(t);var r=n.userDepositContract,a=n.address;return Object(P["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(M["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(B["a"])((function(e){var t=e.amount,n=e.withdraw_block;return aa.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},Qb=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer;return e.pipe(Object(M["a"])(aa.success.is),Object(M["a"])((function(e){return!0===e.payload.confirmed})),Object($["a"])((function(e){return t.pipe(Object(q["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(Qc["a"])(e))})),Object($["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(Mu["a"])((function(e){var t=Nb(e,2),n=t[0],c=t[1],s=tu(a,i);return Object(P["a"])((function(){return st(c.gt(k["Zero"]),[ot.UDC_PLAN_WITHDRAW_NO_BALANCE,{balance:c.toString()}]),s.functions.withdraw(n.meta.amount)})).pipe(ei("withdraw",ot.UDC_WITHDRAW_FAILED,{log:r}),Object(Mu["a"])((function(e){var t=e.transactionHash,r=e.blockNumber;return Object(P["a"])((function(){return s.functions.balances(o)})).pipe(Object(B["a"])((function(e){return oa({withdrawal:c.sub(e),txHash:t,txBlock:r,confirmed:void 0},n.meta)})))})),Object(Tc["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(D["a"])(aa.failure(e,n.meta))})))})))};function zb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jb(e,t){return ay(e)||ry(e,t)||ty(e,t)||ey()}function ey(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ty(e,t){if(e){if("string"===typeof e)return ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ny(e,t):void 0}}function ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ry(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ay(e){if(Array.isArray(e))return e}function oy(e,t,n){var r=t.pipe(Bo("config"));return Object(xt["a"])([r,n]).pipe(Object(B["a"])((function(t){var n,r=Jb(t,2),a=r[0],o=r[1],i=Object.assign(Object.assign({},e),a),c=null===a.caps?a.caps:Object.assign(zb({},Se.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o)&&!Nc()(i.rateToSvt))),i.caps);return Object.assign(Object.assign({},i),{caps:c})})),Object(xo["a"])(Rc.a))}function iy(e,t,n){var r=n.defaultConfig,a=e.pipe(Object(M["a"])(na.is),Object(q["a"])("payload"),Object(jc["a"])(k["MaxUint256"])),o=oy(r,t,a),i=$c(e),c=e.pipe(Object(M["a"])(Jr.is),Object(q["a"])("payload","pfsList"),Object(jc["a"])([])),s=e.pipe(Object(M["a"])(zn.is),Object(No["a"])((function(e,t){return t.payload?Object.assign(Object.assign({},e),zb({},t.meta.address,t.payload)):ko()(t.meta.address,e)}),{}),Object(jc["a"])({}));return Object(xt["a"])([Object(xt["a"])([e,t,o,i,c,s]),Object(xt["a"])([a])]).pipe(Object(B["a"])((function(e){var t=Jb(e,2),n=Jb(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=Jb(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}var cy=Object.assign(Object.assign(Object.assign(Object.assign({},s),u),l),d),sy=function(e,t,n){var r=e.pipe(Object(M["a"])(kn(ca))),a=e.pipe(Object(Ec["a"])(Sc()(kn(ca)),!0)),o=t.pipe(Object(So["a"])(r));return iy(a,o,n).subscribe(n.latest$),Object(Nt["a"])(Object.values(cy)).pipe(Object($["a"])((function(e){return e(a,o,n)})),Object(Tc["a"])((function(e){return n.log.error("Fatal error:",e),Object(D["a"])(ca({reason:e}))})),Object(So["a"])(r))};function uy(e){return fy(e)||dy(e)||yy(e)||ly()}function ly(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dy(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function fy(e){if(Array.isArray(e))return my(e)}function py(e,t){return vy(e)||hy(e,t)||yy(e,t)||by()}function by(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yy(e,t){if(e){if("string"===typeof e)return my(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?my(e,t):void 0}}function my(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vy(e){if(Array.isArray(e))return e}function gy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _y(e,t,n){return t&&Oy(e.prototype,t),n&&Oy(e,n),e}var wy=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):a(e.value).then(i,c)}s((r=r.apply(e,t||[])).next())}))},ky=function(){function e(t,n,r,a,o,i,c){var s,u,l,d,f=this;gy(this,e),this.resolveName=t.resolveName.bind(t);var b=o.address;this.log=y.a.getLogger("raiden:".concat(b)),t.resetEventsBlock(o.blockNumber+1);var m=new C["a"](1);this.state$=m.pipe(Bo("state")),this.action$=m.pipe(Bo("action"),Object(L["a"])(1)),this.channels$=this.state$.pipe(Bo("channels"),Object(B["a"])(Js)),this.transfers$=zs(this.state$),this.events$=this.action$.pipe(Object(M["a"])(kn(la))),this.getTokenInfo=N()((function(e){return wy(this,void 0,void 0,p.a.mark((function t(){var n,r,a,o,i,c,s;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.deps.getTokenContract(e),t.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(S()(void 0)),n.functions.symbol().catch(S()(void 0))]);case 4:return r=t.sent,a=py(r,4),o=a[0],i=a[1],c=a[2],s=a[3],st(o&&null!=i,ot.RDN_NOT_A_TOKEN,this.log.info),t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return t.stop()}}),t,this)})))})),this.deps={latest$:m,config$:m.pipe(Bo("config")),matrix$:new R["a"],provider:t,network:n,signer:r,address:b,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:G.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return z.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return re.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:se.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:ve.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:je.connect(a.SecretRegistry.address,null!==(d=null===c||void 0===c?void 0:c.signer)&&void 0!==d?d:r),main:c},this.userDepositTokenAddress=N()((function(){return wy(f,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));var h=Object(T["createLogger"])({predicate:function(){return f.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return f.config=e})),this.config$.pipe(Bo("logger")).subscribe((function(e){return f.log.setLevel(e||"silent",!1)})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(kc,o,Object(j["a"])(h,this.epicMiddleware)),iy(Object(D["a"])(sa({})),Object(D["a"])(this.store.getState()),this.deps).subscribe((function(e){return f.deps.latest$.next(e)}))}return _y(e,[{key:"start",value:function(){var e=this;st(this.epicMiddleware,ot.RDN_ALREADY_STARTED,this.log.info),this.deps.latest$.subscribe(void 0,void 0,(function(){return e.epicMiddleware=null})),this.epicMiddleware.run(sy),this.epicMiddleware=void 0,this.store.dispatch(sa({}))}},{key:"stop",value:function(){this.store.dispatch(ca({reason:Ae.STOP}))}},{key:"getBlockNumber",value:function(){return wy(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(sa(ft(an,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:eu(this.deps,this.config.subkey).address,st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return wy(this,void 0,void 0,p.a.mark((function n(){var r;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=null!==t&&void 0!==t?t:eu(this.deps,this.config.subkey).address,st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{address:t}],this.log.info),st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return wy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(Object.assign(Object.assign({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"monitorToken",value:function(e){return wy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),n=this.state.tokens,!(e in n)){t.next=4;break}return t.abrupt("return",n[e]);case 4:return t.next=6,this.deps.registryContract.token_to_token_networks(e);case 6:return r=t.sent,st(r&&r!==k["AddressZero"],ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(Bn({token:e,tokenNetwork:r,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return wy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a.next=4,this.monitorToken(e);case 4:return o=a.sent,st(!n.subkey||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),i=n.settleTimeout?ft(ht(4),n.settleTimeout,ot.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=n.deposit?ft(ht(32),n.deposit,ot.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:t},u=xn(Mn,s,this.action$,!1).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Mn.request(Object.assign(Object.assign({},n),{settleTimeout:i,deposit:c}),s)),a.next=13,u;case 13:return l=a.sent,null===r||void 0===r||r({type:ke.OPENED,payload:{txHash:l}}),a.next=17,this.state$.pipe(Bo("channels",Xo({tokenNetwork:o,partner:t}),"state"),Object(F["a"])((function(e){return e===Pa.open}))).toPromise();case 17:if(null===r||void 0===r||r({type:ke.CONFIRMED,payload:{txHash:l}}),!c){a.next=23;break}return a.next=21,xn($n,s,this.action$,!0).then((function(e){var t=e.txHash;return t}));case 21:d=a.sent,null===r||void 0===r||r({type:ke.DEPOSITED,payload:{txHash:d}});case 23:return a.abrupt("return",l);case 24:case"end":return a.stop()}}),a,this)})))}},{key:"depositChannel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return wy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),o=this.state,i=o.tokens[e],st(i,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),st(!a||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),c=ft(ht(32),n),s={tokenNetwork:i,partner:t},u=xn($n,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch($n.request({deposit:c,subkey:a},s)),r.abrupt("return",u);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return wy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],st(o,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),st(!r||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=xn(Hn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Hn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return wy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{partner:t}],this.log.info),a=this.state,o=a.tokens[e],st(o,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),st(!r||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),i={tokenNetwork:o,partner:t},c=xn(Wn,i,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Wn.request(r?{subkey:r}:void 0,i)),n.abrupt("return",c);case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return wy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{address:e}],this.log.info),n={address:e},r=xn(Yn,n,this.action$),this.store.dispatch(Yn.request(void 0,n)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u,l,d,f,b=this;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],st(o,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=ft(ht(32),n),c=r.paymentId?ft(ht(8),r.paymentId):gs(),s=r.paths?ft(Ar,r.paths):void 0,u=r.pfs?ft(Sr,r.pfs):void 0,st(void 0===r.secret||Ot.is(r.secret),ot.RDN_INVALID_SECRET,this.log.info),st(void 0===r.secrethash||gt.is(r.secrethash),ot.RDN_INVALID_SECRETHASH,this.log.info),l=r.secret?r.secret:r.secrethash?void 0:vs(),d=r.secrethash||hs(l),st(!l||hs(l)===d,ot.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),f={tokenNetwork:o,target:t,value:i},a.abrupt("return",Object(I["a"])(this.action$.pipe(Object(F["a"])(An(zr,f)),Object(B["a"])((function(e){if(zr.failure.is(e))throw e.payload;return e.payload.paths}))),Object(P["a"])((function(){return b.store.dispatch(zr.request({paths:s,pfs:u},f)),U["a"]}))).pipe(Object($["a"])((function(e){return Object(I["a"])(b.action$.pipe(Object(M["a"])(kn([Ur,Pr.failure])),Object(F["a"])((function(e){return e.meta.direction===Cr.SENT&&e.meta.secrethash===d})),Object(B["a"])((function(e){if(Pr.failure.is(e))throw e.payload;return ws(e.meta)}))),Object(P["a"])((function(){return b.store.dispatch(Pr.request({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:l},{secrethash:d,direction:Cr.SENT})),U["a"]})))}))).toPromise());case 15:case"end":return a.stop()}}),a,this)})))}},{key:"waitTransfer",value:function(e){var t,n,r,a;return wy(this,void 0,void 0,p.a.mark((function o(){var i,c,s,u;return p.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=js(e),c=i.direction,s=i.secrethash,st(s in this.state[c],ot.RDN_UNKNOWN_TRANSFER,this.log.info),u=As(this.state[c][s]),!u.completed){o.next=9;break}if(!u.success){o.next=8;break}return o.abrupt("return",null===(n=null===(t=this.state[c][s].secretRequest)||void 0===t?void 0:t[1])||void 0===n?void 0:n.amount);case 8:throw new ct(ot.XFER_ALREADY_COMPLETED,{status:u.status});case 9:return o.next=11,xn(Pr,{secrethash:s,direction:c},this.action$);case 11:return o.abrupt("return",null===(a=null===(r=this.state[c][s].secretRequest)||void 0===r?void 0:r[1])||void 0===a?void 0:a.amount);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wy(this,void 0,void 0,p.a.mark((function a(){var o,i,c,s,u;return p.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{target:t}],this.log.info),o=this.state.tokens[e],st(o,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=ft(ht(32),n),c=r.pfs?ft(Sr,r.pfs):void 0,s={tokenNetwork:o,target:t,value:i},u=xn(zr,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(zr.request({pfs:c},s)),a.abrupt("return",u);case 10:case"end":return a.stop()}}),a,this)})))}},{key:"directRoute",value:function(e,t,n){return wy(this,void 0,void 0,p.a.mark((function r(){var a,o,i,c;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{target:t}],this.log.info),a=this.state.tokens[e],st(a,ot.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=ft(ht(32),n),i={tokenNetwork:a,target:t,value:o},c=xn(zr,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(zr.request({pfs:null},i)),r.abrupt("return",c);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"findPFS",value:function(){return wy(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return st(null!==this.config.pfs,ot.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(D["a"])([this.config.pfs]):this.deps.latest$.pipe(Bo("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object($["a"])((function(e){return _b(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey;return wy(this,void 0,void 0,p.a.mark((function n(){var a,o,i,c;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(!r||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),st(1!==this.deps.network.chainId,ot.RDN_MINT_MAINNET,this.log.info),a=eu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),o=a.signer,i=pe.connect(e,o),n.next=7,nu(i,"mint",[ft(ht(32),t)],ot.RDN_MINT_FAILED,{log:this.log});case 7:return c=n.sent,n.next=10,ru(c,this.deps,1);case 10:return n.abrupt("return",c.transactionHash);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"getUDCCapacity",value:function(){return wy(this,void 0,void 0,p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deps.latest$.pipe(Object(q["a"])("udcBalance"),Object(F["a"])(pt)).toPromise();case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(uy(e),uy(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"depositToUDC",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.allowance;return wy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y,m;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return st(!r||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),o=Object(w["bigNumberify"])(e),st(o.gt(k["Zero"]),ot.DTA_NON_POSITIVE_NUMBER,this.log.info),i=eu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),c=i.signer,s=i.address,u=tu(this.deps.userDepositContract,c),n.t0=tu,n.t1=this.deps,n.next=9,this.userDepositTokenAddress();case 9:return n.t2=n.sent,n.t3=n.t1.getTokenContract.call(n.t1,n.t2),n.t4=c,l=(0,n.t0)(n.t3,n.t4),n.next=15,l.functions.balanceOf(s);case 15:return d=n.sent,st(d.gte(e),[ot.RDN_INSUFFICIENT_BALANCE,{token:l.address,account:s,balance:d.toString(),required:Object(w["bigNumberify"])(e).toString()}],this.log.info),st(!a||Object(w["bigNumberify"])(a).gte(e),[ot.RDN_INSUFFICIENT_ALLOWANCE,{allowance:Object(w["bigNumberify"])(d).toString(),required:Object(w["bigNumberify"])(e).toString()}],this.log.info),n.next=20,l.functions.allowance(s,u.address);case 20:if(f=n.sent,b=k["HashZero"],!f.lt(o)){n.next=26;break}return n.next=25,nu(l,"approve",[u.address,null!==a&&void 0!==a?a:o],ot.RDN_APPROVE_TRANSACTION_FAILED,{log:this.log});case 25:b=n.sent.transactionHash;case 26:return null===t||void 0===t||t({type:ke.APPROVED,payload:{txHash:b}}),n.next=29,u.functions.total_deposit(this.address);case 29:return y=n.sent,n.next=32,nu(u,"deposit",[this.address,y.add(o)],ot.RDN_DEPOSIT_TRANSACTION_FAILED,{log:this.log});case 32:return m=n.sent,null===t||void 0===t||t({type:ke.DEPOSITED,payload:{txHash:m.transactionHash}}),n.next=36,ru(m,this.deps);case 36:return this.log.debug('deposit tx "'.concat(m.transactionHash,'" confirmed')),null===t||void 0===t||t({type:ke.CONFIRMED,payload:{txHash:m.transactionHash}}),n.abrupt("return",m.transactionHash);case 39:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainBalance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k["MaxUint256"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.subkey,a=n.gasPrice;return wy(this,void 0,void 0,p.a.mark((function n(){var o,i,c,s,u,l,d,f,b,y;return p.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{to:e}],this.log.info),st(!r||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),o=eu(this.deps,null!==r&&void 0!==r?r:this.config.subkey),i=o.signer,c=o.address,!a){n.next=7;break}n.t0=Object(w["bigNumberify"])(a),n.next=10;break;case 7:return n.next=9,this.deps.provider.getGasPrice();case 9:n.t0=n.sent;case 10:return s=n.t0,u=Object(w["bigNumberify"])(21e3),n.next=14,this.getBalance(c);case 14:return l=n.sent,d=l.sub(s.mul(u)),st(d.gt(k["Zero"]),[ot.RDN_INSUFFICIENT_BALANCE,{transferable:d.toString()}],this.log.info),f=d.lte(t)?d:Object(w["bigNumberify"])(t),n.next=20,i.sendTransaction({to:e,value:f,gasPrice:s,gasLimit:u});case 20:return b=n.sent,n.next=23,b.wait();case 23:return y=n.sent,st(y.status,ot.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),n.abrupt("return",b.hash);case 26:case"end":return n.stop()}}),n,this)})))}},{key:"transferOnchainTokens",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k["MaxUint256"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.subkey;return wy(this,void 0,void 0,p.a.mark((function r(){var o,i,c,s,u,l,d;return p.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return st(wt.is(e),[ot.DTA_INVALID_ADDRESS,{token:e}],this.log.info),st(wt.is(t),[ot.DTA_INVALID_ADDRESS,{to:t}],this.log.info),st(!a||this.deps.main,ot.RDN_SUBKEY_NOT_SET,this.log.info),o=eu(this.deps,null!==a&&void 0!==a?a:this.config.subkey),i=o.signer,c=o.address,s=tu(this.deps.getTokenContract(e),i),r.next=7,this.getTokenBalance(e,c);case 7:return u=r.sent,l=u.lte(n)?u:Object(w["bigNumberify"])(n),r.next=11,nu(s,"transfer",[t,l],ot.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 11:return d=r.sent,r.abrupt("return",d.transactionHash);case 13:case"end":return r.stop()}}),r,this)})))}},{key:"planUdcWithdraw",value:function(e){return wy(this,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:Object(w["bigNumberify"])(e)},r=xn(aa,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(aa.request(void 0,n)),t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(e,t,n,r,a,o){return wy(this,void 0,void 0,p.a.mark((function i(){var c,s,u,l,d,f,b,y,m,h,v,g;return p.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c="string"===typeof e?new _["JsonRpcProvider"](e):e instanceof _["JsonRpcProvider"]?e:new _["Web3Provider"](e),Qt(c),i.next=4,c.getNetwork();case 4:return s=i.sent,r||(r=Ys(s)),i.next=8,Qs(t,c,o);case 8:return u=i.sent,l=u.signer,d=u.address,f=u.main,i.next=14,_o(s,r,d,n,a&&ft(an,a));case 14:return b=i.sent,y=b.state,m=b.onState,h=b.onStateComplete,v=b.defaultConfig,st(d===y.address,[ot.RDN_STATE_ADDRESS_MISMATCH,{account:d,state:y.address}]),st(s.chainId===y.chainId&&r.TokenNetworkRegistry.address===y.registry,[ot.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:r.TokenNetworkRegistry.address,stateNetwork:y.chainId,stateRegistry:y.registry}]),g=new this(c,s,l,r,y,v,f),m&&g.state$.subscribe(m,h,h),i.abrupt("return",g);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"version",get:function(){return Te.sdk}},{key:"contractVersion",get:function(){return Te.contracts}}]),e}()},f45e:function(e,t,n){}});
(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],p=0,l=[];p<c.length;p++)a=c[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2a5b2f9c":"dcfaaf80","chunk-587869c4":"756a856c","chunk-67e81ee5":"7740ad35","chunk-6aff208b":"29451800","chunk-89f30e78":"be127edf","chunk-e28890e2":"b831bff5","chunk-4a2aa1f7":"90570756"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2a5b2f9c":1,"chunk-587869c4":1,"chunk-67e81ee5":1,"chunk-6aff208b":1,"chunk-89f30e78":1,"chunk-e28890e2":1,"chunk-4a2aa1f7":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2a5b2f9c":"91aeee02","chunk-587869c4":"4d3f2534","chunk-67e81ee5":"5c4534eb","chunk-6aff208b":"d154f1bd","chunk-89f30e78":"b4487b1e","chunk-e28890e2":"88d11361","chunk-4a2aa1f7":"d50b715f"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===r||p===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],p=u.getAttribute("data-href");if(p===r||p===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.src=c(e);var l=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=p;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("2b0e"),a=n("a3d5"),o=n("6625"),i=n.n(o),c=n("e9a7"),s=n.n(c);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var f=function(){function e(){u(this,e)}return l(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(e,t){var n=a["a"].toUnits(e,t),r=parseFloat(n);if(0===r)return"0.0";if(r<1e-5)return"<0.00001";var o=i()(n,".");return o[1]&&o[1].length>5?n.substr(0,n.indexOf(".")+6):n}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();r["a"].filter("truncate",f.truncate),r["a"].filter("decimals",f.decimals),r["a"].filter("upper",f.upper),r["a"].filter("displayFormat",f.displayFormat),r["a"].filter("capitalizeFirst",f.capitalizeFirst)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a","transaction_hash":"0x2321d67b966e82f7a054abfd45a0cbd47bd14736add98b18e0143d91c5447b8b","block_number":5152486,"gas_cost":2525133,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x99360d569d56Eca65d59527771F21BdfA43fEAb0","transaction_hash":"0x84adae24bb476bfa3c5a37a8a34370282d71f323aaecdd283faa1d067ce03c2b","block_number":5152487,"gas_cost":1898944,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383",1.157920892373162e+77]},"MonitoringService":{"address":"0x402B6956de78584AAd190584Bb52Ce7b39AF2F53","transaction_hash":"0xbef5bff2b380220c194795ceec9e0b6d79f7605946b8cf962c93bf6d379f4292","block_number":5152488,"gas_cost":2507553,"constructor_arguments":["0x003648b964014f3AB1ac6D5FC1e0676Cb8F4E383","0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a","0x99360d569d56Eca65d59527771F21BdfA43fEAb0","0x07147fE01573D88B4a8D60f94877d7b47f06e7EC"]},"OneToN":{"address":"0x2293b064c07aB4AB805b4FFD67278AAe6dEDb4cE","transaction_hash":"0xb19b6c56fa4348e19339bb05583c37c664481b235f877a4607623bd400695dc5","block_number":5152489,"gas_cost":1364293,"constructor_arguments":["0x99360d569d56Eca65d59527771F21BdfA43fEAb0",4,"0x18Fe9Bdd6F3265DF2F18931f18c817C43056dC0a"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3"),o=n("5a48");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function p(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}var m=function(e){function t(){return c(this,t),p(this,f(t).apply(this,arguments))}return d(t,e),u(t,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME})}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e){this.$router.push({name:o["a"].TRANSFER,params:{token:e}})}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),t}(a["e"]);m=r["a"]([a["a"]],m),t["a"]=m},2:function(e,t){},"210b":function(e,t,n){},"2e1f":function(e,t,n){e.exports=n.p+"img/done.24f4e34a.svg"},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0xfC83B78195A99Ee782fABCFF9d259764640cEc7E","transaction_hash":"0xf79919c727a4ad270548d7b0a3dcb5f4b6f391097528adfe5ec4cbfd1cda4faa","block_number":4667704,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x07147fE01573D88B4a8D60f94877d7b47f06e7EC","transaction_hash":"0xeafb4216cf9958eec50747a5d6aaa98e825060673f85903b1edf18e03a8c118e","block_number":5152481,"gas_cost":5030881,"constructor_arguments":["0xfC83B78195A99Ee782fABCFF9d259764640cEc7E",4,20,555428,1.157920892373162e+77]}}}')},4:function(e,t){},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4b05":function(e,t,n){},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x7a8aA60bc95697e767367f63f386cd94cC8db5dA","transaction_hash":"0xc1b554e807309930ba36d306f6e4f6972a6d36cc63cbce4284a4d4000b75e6ae","block_number":1360431,"gas_cost":2525197,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x39ff19161414E257AA29461dCD087F6a1AE362Fd","transaction_hash":"0xd53e32349bdd05a7669a1c82d0aefbd243e9ce0f198b744679f4ffd6cd583207","block_number":1360433,"gas_cost":1899008,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77",1.157920892373162e+77]},"MonitoringService":{"address":"0xdA8953b43044D1FdceF1a4609D1c663052B45F0f","transaction_hash":"0x74628c0c32a27c4346923a424c9934c487c21190d4162c8b58a71d5e7b64abe7","block_number":1360434,"gas_cost":2507617,"constructor_arguments":["0x3a989D97388a39A0B5796306C615d10B7416bE77","0x7a8aA60bc95697e767367f63f386cd94cC8db5dA","0x39ff19161414E257AA29461dCD087F6a1AE362Fd","0x754b1Fa6bcb43F09557Eb5A212513F40A263DAF8"]},"OneToN":{"address":"0x3d26600Ded4a0A2576998381e3c9d3a9ad7434b3","transaction_hash":"0x31fd539559a1ffdb7591509d09471b8cbf8ab41e90737c0eed2f6849e5289785","block_number":1360435,"gas_cost":1364293,"constructor_arguments":["0x39ff19161414E257AA29461dCD087F6a1AE362Fd",5,"0x7a8aA60bc95697e767367f63f386cd94cC8db5dA"]}}}')},"54ca":function(e,t,n){},"59dd":function(e,t,n){},"5a48":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["TRANSFER"]="transfer",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel"}(r||(r={}))},"5c11":function(e,t,n){"use strict";var r=n("7d3a"),a=n.n(r);a.a},7006:function(e,t,n){},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"10"}},[n("v-btn",{staticClass:"text-capitalize action-button__button",attrs:{disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v("\n      "+e._s(e.text)+"\n    ")])],1)],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var h=function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return b(t,e),p(t,[{key:"click",value:function(){}}]),t}(i["e"]);o["a"]([Object(i["d"])({required:!0,type:Boolean})],h.prototype,"enabled",void 0),o["a"]([Object(i["d"])({required:!0})],h.prototype,"text",void 0),o["a"]([Object(i["d"])({type:Boolean,default:!1})],h.prototype,"loading",void 0),o["a"]([Object(i["b"])()],h.prototype,"click",null),h=o["a"]([Object(i["a"])({})],h);var y=h,v=y,O=(n("84f9"),n("2877")),k=n("6544"),j=n.n(k),w=n("8336"),g=n("62ad"),_=n("0fd9"),x=Object(O["a"])(v,r,a,!1,null,"f9550b38",null);t["a"]=x.exports;j()(x,{VBtn:w["a"],VCol:g["a"],VRow:_["a"]})},"77fd":function(e,t,n){"use strict";var r=n("9ab4"),a=n("60a3");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var b=function(e){function t(){return i(this,t),u(this,l(t).apply(this,arguments))}return f(t,e),s(t,[{key:"$blockie",value:function(e){return this.$identicon.getIdenticon(e)}}]),t}(a["e"]);b=r["a"]([a["a"]],b),t["a"]=b},"7d3a":function(e,t,n){},"81e7":function(e,t,n){},"84f9":function(e,t,n){"use strict";var r=n("dd4b"),a=n.n(r);a.a},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED"})(r||(r={}))},"8be4":function(e,t,n){"use strict";var r=n("7006"),a=n.n(r);a.a},"8ecd":function(e,t,n){"use strict";var r=n("59dd"),a=n.n(r);a.a},"8ffa":function(e,t,n){"use strict";var r=n("4b05"),a=n.n(r);a.a},"90a8":function(e,t,n){"use strict";var r=n("81e7"),a=n.n(r);a.a},"927e":function(e,t,n){e.exports=n.p+"img/copy_icon.80d12304.svg"},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xA39faF9464b4E5668154003464e3a40ab9a83cB8","transaction_hash":"0x948201d71da1c344ff722257e2153eafa2f7a55c1dd2afc72fbf61271d8bfa3f","block_number":5914539,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x522c6a70c9346D8146c1378184f448571c608559","transaction_hash":"0x9cd6b4feb85c24bc887a84296476952e57982be6de6f5fca474bc3d6b30097ad","block_number":6457381,"gas_cost":5030817,"constructor_arguments":["0xA39faF9464b4E5668154003464e3a40ab9a83cB8",3,20,555428,1.157920892373162e+77]}}}')},a1ab:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.display?r("div",{staticClass:"stepper"},[r("div",{staticClass:"stepper__card"},[r("div",{staticClass:"stepper__card__steps"},[e._l(e.steps,(function(t,n){return r("div",{key:n,staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.current===n&&!e.done}},[r("span",{staticClass:"stepper__card__steps__step__label"},[e._v("\n          "+e._s(t.label)+"\n        ")])])})),r("div",{staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.done}},[e._v("\n        "+e._s(e.doneStep.label)+"\n      ")])],2),r("div",{staticClass:"stepper__card__content"},[r("div",{staticClass:"stepper__card__content__title"},[e.done?r("span",[e._v("\n          "+e._s(e.doneStep.title)+"\n        ")]):r("span",[e._v(e._s(e.steps[e.current].title))])]),e.done?r("div",[r("v-img",{staticClass:"stepper__card__content--done",attrs:{src:n("2e1f")}})],1):r("v-progress-circular",{staticClass:"stepper__card__content--progress",attrs:{size:110,width:7,indeterminate:""}}),r("p",{staticClass:"stepper__card__content__description"},[e.done?r("span",[e._v("\n          "+e._s(e.doneStep.description)+"\n        ")]):r("span",[e._v("\n          "+e._s(e.steps[e.current].description)+"\n        ")])])],1)])]):e._e()},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var b=function(e){function t(){return s(this,t),u(this,l(t).apply(this,arguments))}return f(t,e),t}(i["e"]);o["a"]([Object(i["d"])({required:!0})],b.prototype,"display",void 0),o["a"]([Object(i["d"])({required:!1,default:0})],b.prototype,"current",void 0),o["a"]([Object(i["d"])({required:!0})],b.prototype,"steps",void 0),o["a"]([Object(i["d"])({required:!0})],b.prototype,"doneStep",void 0),o["a"]([Object(i["d"])({})],b.prototype,"done",void 0),b=o["a"]([Object(i["a"])({})],b);var m=b,h=m,y=(n("8ffa"),n("2877")),v=n("6544"),O=n.n(v),k=n("adda"),j=n("490a"),w=Object(y["a"])(h,r,a,!1,null,"30108802",null);t["a"]=w.exports;O()(w,{VImg:k["a"],VProgressCircular:j["a"]})},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("6934");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){return Object(r["formatUnits"])(e,t)}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e,t)}}]),e}()},aebe:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4","transaction_hash":"0x1b891535e2fcd929bc3b5df5a16c80bf1dff670fb649ebba1840c14217481303","block_number":6457392,"gas_cost":2525197,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10","0x0000000000000000000000000000000000000000",2e+21,6,5,17280000,1000,17280000]},"UserDeposit":{"address":"0x160eeF30E8c3C18e3A91FaEF3962B6B316720916","transaction_hash":"0xc4a754955a2e7093efc9aa25a46bbf21180d4352a492c6ece7697667cab03d06","block_number":6457395,"gas_cost":1899008,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10",1.157920892373162e+77]},"MonitoringService":{"address":"0xa312893DA25C72c27313AC4d82C24f65c2d81981","transaction_hash":"0xd6a541da68d63239fbd48a33818f8484fc3f58b555287c90d47fe4e927b291df","block_number":6457397,"gas_cost":2507553,"constructor_arguments":["0x4D1dF0b7258c89d8336Ea006e84104024eb9FF10","0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4","0x160eeF30E8c3C18e3A91FaEF3962B6B316720916","0x522c6a70c9346D8146c1378184f448571c608559"]},"OneToN":{"address":"0x6F7bC802dAA92B8e3612823f4cAf2e54b829E10C","transaction_hash":"0x8c2eeff2b2f900670391ba60ba0bc0f64bfe7ef871242970e4b614bc9d5b5fc9","block_number":6457400,"gas_cost":1364229,"constructor_arguments":["0x160eeF30E8c3C18e3A91FaEF3962B6B316720916",3,"0xccdF91649e17007676Ece32aA2A9a519ee0AEfb4"]}}}')},bcd1:function(e,t,n){"use strict";var r=n("aebe"),a=n.n(r);a.a},c60f:function(e,t,n){"use strict";var r=n("54ca"),a=n.n(r);a.a},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0xF6d610f7c8473a0F0c8c1653AF28A68C69860288","transaction_hash":"0x9e4d32a73673f046e731580c2a6aaafc28a9ca0aaecee689fb61e28754abcb82","block_number":875035,"gas_cost":298578,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x754b1Fa6bcb43F09557Eb5A212513F40A263DAF8","transaction_hash":"0xe91593170a4b67983cba9edc2933db8dd3a04e1d3c145ef8b3713ab6450caddc","block_number":1360415,"gas_cost":5030881,"constructor_arguments":["0xF6d610f7c8473a0F0c8c1653AF28A68C69860288",5,20,555428,1.157920892373162e+77]}}}')},cd49:function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2be"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f5766"),n("ed50"),n("788df"),n("14b96"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[e.inaccessible?n("splash-screen",{attrs:{connecting:e.connecting},on:{connect:function(t){return e.connect()}}}):n("div",{attrs:{id:"application-wrapper"}},[n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)]),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v("\n      "+e._s(e.$t("application.privacy-policy"))+"\n    ")])])],1)},o=[],i=n("a34a"),c=n.n(i),s=n("9ab4"),u=n("60a3"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"splash-screen fill-height",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"4",lg:"4",md:"6",sm:"8"}},[r("div",{staticClass:"splash-screen__wrapper display-3"},[r("div",{staticClass:"splash-screen__logo-container"},[r("v-img",{staticClass:"splash-screen__logo",attrs:{src:n("9b19"),"min-width":"50px","aspect-ratio":"1",contain:""}})],1),r("div",{staticClass:"splash-screen__app-name"},[r("div",[e._v("\n            "+e._s(e.name)+"\n          ")])])]),r("div",{staticClass:"font-weight-light text-center splash-screen__disclaimer"},[e._v("\n        "+e._s(e.$t("splash-screen.disclaimer"))+"\n      ")]),r("div",{staticClass:"font-weight-light text-center splash-screen__matrix_sign"},[e._v("\n        "+e._s(e.$t("splash-screen.matrix-sign"))+"\n      ")]),r("div",{staticClass:"splash-screen__button"},[e.injectedProvider?r("action-button",{attrs:{text:e.$t("splash-screen.connect-button"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}}):r("span",{staticClass:"splash-screen__no-provider"},[e._v("\n          "+e._s(e.$t("splash-screen.no-provider"))+"\n        ")])],1),r("div",{staticClass:"splash-screen__message"},[e.accessDenied?r("no-access-message",{attrs:{reason:e.accessDenied}}):e._e()],1)])],1)],1)},l=[],f=n("f15c"),d=n("2f62"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v("\n      "+e._s(e.$t("no-access.unsupported-network"))+"\n    ")]):e.initializationFailed?n("span",[e._v("\n      "+e._s(e.$t("no-access.sdk-initialization-failure"))+"\n    ")]):n("span",[e._v("\n      "+e._s(e.$t("no-access.generic-error"))+"\n    ")])])])},m=[],h=n("87a2");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function j(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}var E=function(e){function t(){return v(this,t),j(this,g(t).apply(this,arguments))}return _(t,e),k(t,[{key:"networkUnsupported",get:function(){return this.reason===h["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===h["a"].INITIALIZATION_FAILED}}]),t}(u["e"]);s["a"]([Object(u["d"])({required:!0})],E.prototype,"reason",void 0),E=s["a"]([Object(u["a"])({})],E);var A=E,S=A,C=(n("8ecd"),n("2877")),P=n("6544"),N=n.n(P),T=n("0798"),R=Object(C["a"])(S,b,m,!1,null,"6b8163f4",null),I=R.exports;N()(R,{VAlert:T["a"]});var D=n("750b");function F(e){return F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function U(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}var q=function(e){function t(){var e;return M(this,t),e=U(this,H(t).apply(this,arguments)),e.name="Raiden dApp",e}return V(t,e),L(t,[{key:"connect",value:function(){}},{key:"injectedProvider",get:function(){return f["a"].injectedWeb3Available()}}]),t}(u["e"]);s["a"]([Object(u["d"])({default:!1,required:!0,type:Boolean})],q.prototype,"connecting",void 0),s["a"]([Object(u["b"])()],q.prototype,"connect",null),q=s["a"]([Object(u["a"])({components:{ActionButton:D["a"],NoAccessMessage:I},computed:Object(d["c"])(["accessDenied"])})],q);var Z=q,K=Z,z=(n("c60f"),n("62ad")),G=n("a523"),X=n("adda"),Y=n("0fd9"),J=Object(C["a"])(K,p,l,!1,null,"4b726f94",null),Q=J.exports;N()(J,{VCol:z["a"],VContainer:G["a"],VImg:X["a"],VRow:Y["a"]});var ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return!e.loading&&e.defaultAccount?r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-spacer"),r("v-col",{attrs:{"align-self":"center"}},[r("div",{staticClass:"app-header__top__content__title"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n          ")]),r("div",{staticClass:"app-header__top__content__network"},[e._v("\n            "+e._s(e.network)+"\n          ")])]),r("v-spacer"),r("div",[r("v-img",{staticClass:"app-header__top__content__blockie",attrs:{src:e.$blockie(e.defaultAccount),height:"36",width:"36",contain:"","aspect-ratio":"1"}})],1)],1)])],1),r("v-row",{staticClass:"app-header__bottom",attrs:{align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("div",{staticClass:"app-header__bottom__address text-left"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("span",e._g({},n),[e._v("\n              "+e._s(e._f("truncate")(e.defaultAccount,8))+"\n            ")])]}}],null,!1,3329657142)},[r("span",[e._v(e._s(e.defaultAccount))])]),r("v-tooltip",{attrs:{bottom:"",dark:"","close-delay":"1500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{id:"copyBtn",text:"",icon:""},on:{click:function(t){return e.copy()}}},a),[r("v-img",{staticClass:"app-header__bottom__address__copy",attrs:{src:n("927e"),contain:""}})],1)]}}],null,!1,121364382)},[r("span",[e._v("\n            "+e._s(e.copied?e.$t("app-header.copy-success"):e.$t("app-header.copy"))+"\n          ")])])],1)]),r("v-col",{attrs:{cols:"6"}},[r("div",{staticClass:"app-header__bottom__balance text-right"},[e._v("\n        "+e._s(e._f("decimals")(e.accountBalance))+"\n        "),r("span",{staticClass:"app-header__bottom__balance__currency"},[e._v("\n          "+e._s(e.$t("app-header.currency"))+"\n        ")])])])],1),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.defaultAccount,expression:"defaultAccount"}],ref:"copy",staticClass:"app-header__copy-area",domProps:{value:e.defaultAccount},on:{input:function(t){t.target.composing||(e.defaultAccount=t.target.value)}}})],1):e._e()},te=[],ne=n("77fd"),re=n("5a48"),ae=n("152b");function oe(e){return oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function fe(e,t){return!t||"object"!==oe(t)&&"function"!==typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function me(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}var ye=function(e){function t(){var e;return ue(this,t),e=fe(this,be(t).apply(this,arguments)),e.copied=!1,e.timeout=0,e}return me(t,e),le(t,[{key:"copy",value:function(){var e=this,t=this.$refs.copy;t.focus(),t.select(),this.copied=document.execCommand("copy"),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.copied=!1}),2e3)}},{key:"canGoBack",get:function(){return this.$route.name!==re["a"].HOME}}]),t}(Object(u["c"])(ne["a"],ae["a"]));ye=s["a"]([Object(u["a"])({computed:ce({},Object(d["c"])(["loading","defaultAccount","accountBalance"]),{},Object(d["b"])(["network"]))})],ye);var ve=ye,Oe=ve,ke=(n("90a8"),n("8336")),je=n("2fa4"),we=n("3a2f"),ge=Object(C["a"])(Oe,ee,te,!1,null,"08e6cbd5",null),_e=ge.exports;function xe(e){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Ee(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ee(o,r,a,i,c,"next",e)}function c(e){Ee(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),e}function Ne(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}N()(ge,{VBtn:ke["a"],VCol:z["a"],VImg:X["a"],VRow:Y["a"],VSpacer:je["a"],VTooltip:we["a"]});var Fe=function(e){function t(){var e;return Se(this,t),e=Ne(this,Re(t).call(this)),e.connecting=!1,e.name="Raiden dApp",e}return Ie(t,e),Pe(t,[{key:"connect",value:function(){var e=Ae(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.connecting=!0,this.$store.commit("reset"),e.next=4,this.$raiden.connect();case 4:this.connecting=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==h["a"].UNDEFINED}}]),t}(u["e"]);Fe=s["a"]([Object(u["a"])({computed:Object(d["c"])(["loading","accessDenied"]),components:{AppHeader:_e,SplashScreen:Q}})],Fe);var Me=Fe,Be=Me,Le=(n("8be4"),n("7496")),Ue=n("a75b"),$e=Object(C["a"])(Be,a,o,!1,null,"36797782",null),He=$e.exports;N()($e,{VApp:Le["a"],VContainer:G["a"],VContent:Ue["a"]});var Ve=n("2fe1");Ve["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var We=n("8c4f"),qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-core")},Ze=[],Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tokens")},ze=[],Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height"},[n("v-col",{staticClass:"fill-height",attrs:{cols:"12"}},[n("list-header",{staticClass:"connected-tokens__header",attrs:{header:e.$t("tokens.connected.header")}}),n("v-row",{attrs:{justify:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-list",{staticClass:"connected-tokens__tokens",attrs:{expand:""}},e._l(e.tokens,(function(t,r){return n("v-list-group",{key:t.token,staticClass:"connected-tokens__tokens__token",attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item",{attrs:{id:"token-"+r}},[n("v-list-item-avatar",{staticClass:"list-blockie"},[n("img",{attrs:{src:e.$blockie(t.address),alt:e.$t("tokens.connected.token.blockie-alt")}})]),n("v-list-item-content",[n("v-list-item-title",{staticClass:"connected-tokens__tokens__token__info"},[e._v("\n                    "+e._s(e.$t("tokens.connected.token.token-info",{symbol:t.symbol,name:t.name}))+"\n                  ")]),n("v-list-item-subtitle",{staticClass:"connected-tokens__tokens__token__address"},[e._v("\n                    "+e._s(t.address)+"\n                  ")])],1)],1)]},proxy:!0}],null,!0)},[n("div",{staticClass:"connected-tokens__tokens__token__expanded",attrs:{id:"expanded-area-"+r}},[n("v-row",{attrs:{justify:"center",align:"center","no-gutters":""}},[n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{disabled:0===t.open,id:"transfer-"+r,to:"/transfer/"+t.address}},[e._v("\n                  "+e._s(e.$t("general.buttons.transfer"))+"\n                ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button leave",attrs:{id:"leave-"+r},on:{click:function(n){return e.leaveNetwork(t)}}},[e._v("\n                  "+e._s(e.$t("tokens.connected.token.buttons.disconnect"))+"\n                ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{to:"/channels/"+t.address}},[e._v("\n                  "+e._s(e.$t("tokens.connected.token.buttons.view-channels"))+"\n                ")])],1)],1)])})),1)],1)],1),n("action-button",{staticClass:"connected-tokens__button",attrs:{text:e.$t("tokens.connect-new"),enabled:""},on:{click:function(t){return e.navigateToTokenSelect()}}}),n("confirmation-dialog",{attrs:{display:e.leaveModalVisible},on:{confirm:function(t){return e.leaveConfirmed()},cancel:function(t){return e.leaveCancelled()}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n        "+e._s(e.$t("tokens.disconnect-dialog.header"))+"\n      ")]},proxy:!0}])},[e.selectedToken?n("i18n",{attrs:{path:"tokens.disconnect-dialog.confirmation-message",tag:"div"}},[n("b",{attrs:{place:"symbol"}},[e._v(e._s(e.selectedToken.symbol))]),n("span",{staticClass:"connected-tokens__tokens__token__leave__address",attrs:{place:"address"}},[e._v("\n          "+e._s(e.selectedToken.address)+"\n        ")])]):e._e()],1),n("stepper",{attrs:{display:e.loading,steps:e.steps,doneStep:e.doneStep}})],1)],1)},Xe=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"625"},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[n("v-card",[n("v-card-title",[n("v-col",[n("h1",{staticClass:"confirmation-dialog__header"},[e._t("header")],2)])],1),n("v-card-text",[n("p",{staticClass:"confirmation-dialog__message"},[e._t("default")],2)]),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"confirmation-dialog__button",attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.cancel"))+"\n        ")]),n("v-btn",{staticClass:"confirmation-dialog__button confirmation-dialog__button__primary",attrs:{text:""},on:{click:function(t){return e.confirm()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.confirm"))+"\n        ")]),n("v-spacer")],1)],1)],1)],1)},Je=[];function Qe(e){return Qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){return!t||"object"!==Qe(t)&&"function"!==typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}function ct(e,t){return ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ct(e,t)}var st=function(e){function t(){return et(this,t),rt(this,ot(t).apply(this,arguments))}return it(t,e),nt(t,[{key:"confirm",value:function(){this.$emit("confirm")}},{key:"cancel",value:function(){this.$emit("cancel")}}]),t}(u["e"]);s["a"]([Object(u["d"])({required:!0})],st.prototype,"display",void 0),st=s["a"]([Object(u["a"])({})],st);var ut=st,pt=ut,lt=(n("e0d1"),n("b0af")),ft=n("99d9"),dt=n("169a"),bt=Object(C["a"])(pt,Ye,Je,!1,null,"2ef2cf74",null),mt=bt.exports;N()(bt,{VBtn:ke["a"],VCard:lt["a"],VCardActions:ft["a"],VCardText:ft["b"],VCardTitle:ft["c"],VCol:z["a"],VDialog:dt["a"],VRow:Y["a"],VSpacer:je["a"]});var ht=n("a1ab"),yt=n("d0aa");function vt(e){return vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function Ot(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ot(o,r,a,i,c,"next",e)}function c(e){Ot(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),e}function _t(e,t){return!t||"object"!==vt(t)&&"function"!==typeof t?xt(e):t}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}function At(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}function St(e,t){return St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},St(e,t)}var Ct=function(e){function t(){var e;return jt(this,t),e=_t(this,Et(t).apply(this,arguments)),e.selectedToken=null,e.leaveModalVisible=!1,e.loading=!1,e.steps=[],e.doneStep=Object(h["c"])(),e}return At(t,e),gt(t,[{key:"created",value:function(){this.steps=[this.$t("tokens.leave-progress")],this.doneStep=this.$t("tokens.leave-done")}},{key:"dismissModal",value:function(){this.leaveModalVisible=!1,this.selectedToken=null}},{key:"leaveNetwork",value:function(e){this.selectedToken=e,this.leaveModalVisible=!0}},{key:"leaveConfirmed",value:function(){var e=kt(c.a.mark((function e(){var t;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selectedToken.address,this.dismissModal(),this.loading=!0,e.next=5,this.$raiden.leaveNetwork(t);case 5:this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"leaveCancelled",value:function(){this.dismissModal()}}]),t}(Object(u["c"])(ne["a"],ae["a"]));Ct=s["a"]([Object(u["a"])({components:{ListHeader:yt["a"],Stepper:ht["a"],ConfirmationDialog:mt,ActionButton:D["a"]},computed:Object(d["b"])(["tokens"])})],Ct);var Pt=Ct,Nt=Pt,Tt=(n("bcd1"),n("8860")),Rt=n("56b0"),It=n("da13"),Dt=n("8270"),Ft=n("5d23"),Mt=Object(C["a"])(Nt,Ge,Xe,!1,null,"107a7378",null),Bt=Mt.exports;function Lt(e){return Lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){return!t||"object"!==Lt(t)&&"function"!==typeof t?Ht(e):t}function Ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Wt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}function qt(e,t){return qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qt(e,t)}N()(Mt,{VBtn:ke["a"],VCol:z["a"],VList:Tt["a"],VListGroup:Rt["a"],VListItem:It["a"],VListItemAvatar:Dt["a"],VListItemContent:Ft["b"],VListItemSubtitle:Ft["c"],VListItemTitle:Ft["d"],VRow:Y["a"]});var Zt=function(e){function t(){return Ut(this,t),$t(this,Vt(t).apply(this,arguments))}return Wt(t,e),t}(u["e"]);Zt=s["a"]([Object(u["a"])({components:{Tokens:Bt}})],Zt);var Kt=Zt,zt=Kt,Gt=Object(C["a"])(zt,Ke,ze,!1,null,null,null),Xt=Gt.exports;function Yt(e){return Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){return!t||"object"!==Yt(t)&&"function"!==typeof t?en(e):t}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}function rn(e,t){return rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rn(e,t)}var an=function(e){function t(){return Jt(this,t),Qt(this,tn(t).apply(this,arguments))}return nn(t,e),t}(u["e"]);an=s["a"]([Object(u["a"])({components:{AppCore:Xt}})],an);var on=an,cn=on,sn=Object(C["a"])(cn,qe,Ze,!1,null,null,null),un=sn.exports;r["a"].use(We["a"]);var pn=new We["a"]({mode:"history",base:"/",routes:[{path:"/",name:re["a"].HOME,meta:{title:"Raiden dApp"},component:un},{path:"*",redirect:"/"},{path:"/transfer/:token",name:re["a"].TRANSFER,meta:{title:"Send"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-67e81ee5"),n.e("chunk-6aff208b")]).then(n.bind(null,"69aa"))}},{path:"/connect",name:re["a"].SELECT_TOKEN,meta:{title:"Select token"},component:function(){return n.e("chunk-4a2aa1f7").then(n.bind(null,"7724"))}},{path:"/connect/:token",name:re["a"].SELECT_HUB,meta:{title:"Select hub"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-e28890e2")]).then(n.bind(null,"c405"))}},{path:"/connect/:token/:partner",name:re["a"].OPEN_CHANNEL,meta:{title:"Open channel"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-67e81ee5"),n.e("chunk-89f30e78")]).then(n.bind(null,"7542"))}},{path:"/channels/:token",name:re["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-2a5b2f9c"),n.e("chunk-587869c4")]).then(n.bind(null,"3010"))}}]}),ln=pn,fn=n("f455"),dn=n("dd61"),bn=n.n(dn),mn=n("e9a8d"),hn=n.n(mn),yn=n("9380"),vn=n.n(yn),On=n("b8ce"),kn=n.n(On),jn=n("c5a2"),wn=n.n(jn),gn=n("93c6"),_n=n.n(gn),xn=n("63ea"),En=n.n(xn),An=n("13ea"),Sn=n.n(An);function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(n,!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t){return Dn(e)||In(e,t)||Rn()}function Rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function In(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Dn(e){if(Array.isArray(e))return e}r["a"].use(d["a"]);var Fn={loading:!0,defaultAccount:"",accountBalance:"0.0",providerDetected:!0,accessDenied:h["a"].UNDEFINED,channels:{},tokens:{},network:h["b"]};function Mn(){return kn()(Fn)}var Bn={state:Mn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Tn(r[n],2),o=a[0],i=a[1];o in e.tokens&&En()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=Pn({},e.tokens[o],{},i):e.tokens=Pn({},e.tokens,Nn({},o,i)))}},network:function(e,t){e.network=t},reset:function(e){Object.assign(e,Mn())}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return bn()(vn()(hn()(e.channels),(function(e){return!Sn()(e)})),(function(n){var r=wn()(n,t,Object(h["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens)},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!Sn()(r)&&(n=hn()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===fn["a"].open}));return _n()(r,["capacity"],["desc"])[0]}}}},Ln=new d["a"].Store(Bn),Un=n("9483");Object({NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_RAIDEN_PACKAGE||Object(Un["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Ve["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var $n=n("e62e");function Hn(e,t){e.prototype.$raiden=new $n["c"](Ln)}var Vn=n("103a"),Wn=n.n(Vn);function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t,n){return t&&Zn(e.prototype,t),n&&Zn(e,n),e}var zn=function(){function e(){qn(this,e),this.cache={}}return Kn(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Wn()(e);return this.cache[e]=n,n}}]),e}();function Gn(e,t){e.prototype.$identicon=new zn}var Xn=n("a925");function Yn(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(Xn["a"]);var Jn=new Xn["a"]({locale:"en",fallbackLocale:"en",messages:Yn()}),Qn=(n("5363"),n("f309"));r["a"].use(Qn["a"]);var er=new Qn["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87"}}}}),tr=n("e508");n("a899");r["a"].config.productionTip=!1,r["a"].use(Hn),r["a"].use(Gn),r["a"].use(tr["a"]),new r["a"]({vuetify:er,router:ln,store:Ln,i18n:Jn,render:function(e){return e(He)}}).$mount("#app")},d0aa:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"list-header",attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"list-header__header"},[e._v(e._s(e.header))]),n("div",{staticClass:"list-header__divider"})])],1)},a=[],o=n("9ab4"),i=n("60a3");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var b=function(e){function t(){return s(this,t),u(this,l(t).apply(this,arguments))}return f(t,e),t}(i["e"]);o["a"]([Object(i["d"])({required:!0})],b.prototype,"header",void 0),b=o["a"]([Object(i["a"])({})],b);var m=b,h=m,y=(n("5c11"),n("2877")),v=n("6544"),O=n.n(v),k=n("62ad"),j=n("0fd9"),w=Object(y["a"])(h,r,a,!1,null,"046d9f4b",null);t["a"]=w.exports;O()(w,{VCol:k["a"],VRow:j["a"]})},dd4b:function(e,t,n){},e0d1:function(e,t,n){"use strict";var r=n("210b"),a=n.n(r);a.a},e62e:function(e,t,n){"use strict";var r=n("a34a"),a=n.n(r),o=n("f455"),i=n("f15c"),c=n("a3d5"),s=n("87a2"),u=n("8404"),p=n("5670"),l=n("e95d"),f=n("3fab"),d=n("7f4b"),b=n.n(d);function m(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){m(o,r,a,i,c,"next",e)}function c(e){m(o,r,a,i,c,"throw",e)}i(void 0)}))}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}var k=function(){function e(){y(this,e)}return O(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=h(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}]),e}();function j(e){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function w(e,t){return!t||"object"!==j(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!S(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,P(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,e)},x(e)}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e,t,n){return A=E()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&C(o,n.prototype),o},A.apply(null,arguments)}function S(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function N(e,t){return I(e)||R(e,t)||T()}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function R(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function I(e){if(Array.isArray(e))return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){F(o,r,a,i,c,"next",e)}function c(e){F(o,r,a,i,c,"throw",e)}i(void 0)}))}}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}n.d(t,"c",(function(){return $})),n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return q}));var $=function(){function e(t){B(this,e),this._raiden=void 0,this.store=t}return U(e,[{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}}],[{key:"createRaiden",value:function(){var e=M(a.a.mark((function e(t){var n,r=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:0,e.prev=1,e.next=4,o["b"].create(t,n,window.localStorage,void 0,{pfsSafetyMargin:1.1});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),new z(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),U(e,[{key:"ensResolve",value:function(){var e=M(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Z(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=M(a.a.mark((function t(){var n,r,o,c,u,f=this;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=Object({NODE_ENV:"production",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).VUE_APP_RAIDEN_PACKAGE,!n){t.next=11;break}return t.next=5,k.fetch(n);case 5:return r=t.sent,t.next=8,i["a"].provider(r);case 8:o=t.sent,t.next=14;break;case 11:return t.next=13,i["a"].provider();case 13:o=t.sent;case 14:if(o){t.next=18;break}this.store.commit("noProvider"),t.next=44;break;case 18:if(!r){t.next=24;break}return t.next=21,e.createRaiden(o,r.PRIVATE_KEY);case 21:c=t.sent,t.next=27;break;case 24:return t.next=26,e.createRaiden(o);case 26:c=t.sent;case 27:return this._raiden=c,t.t0=this.store,t.next=31,this.getAccount();case 31:return t.t1=t.sent,t.t0.commit.call(t.t0,"account",t.t1),t.t2=this.store,t.next=36,this.getBalance();case 36:t.t3=t.sent,t.t2.commit.call(t.t2,"balance",t.t3),c.events$.pipe(Object(p["a"])((function(e){return"newBlock"===e.type})),Object(l["a"])((function(){return f.fetchTokenData(f.store.getters.tokens.map((function(e){return e.address})))}))).subscribe(),c.events$.pipe(Object(p["a"])((function(e){return"raidenShutdown"===e.type}))).subscribe((function(){return f.store.commit("reset")})),c.events$.subscribe((function(e){"tokenMonitored"===e.type&&f.store.commit("updateTokens",D({},e.payload.token,{address:e.payload.token}))})),c.channels$.subscribe((function(e){f.store.commit("updateChannels",e)})),this.store.commit("network",c.network),c.start();case 44:t.next=51;break;case 46:t.prev=46,t.t4=t["catch"](0),console.error(t.t4),u=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?s["a"].UNSUPPORTED_NETWORK:t.t4 instanceof z?s["a"].INITIALIZATION_FAILED:s["a"].NO_ACCOUNT,this.store.commit("accessDenied",u);case 51:this.store.commit("loadComplete");case 52:case"end":return t.stop()}}),t,this,[[0,46]])})));function n(){return t.apply(this,arguments)}return n}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=M(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=M(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance();case 2:return t=e.sent,e.abrupt("return",c["a"].toEth(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=M(a.a.mark((function e(t){var n,r,o,i,c,s,u,p;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,o=N(r,2),i=o[0],c=o[1],s=c.decimals,u=c.symbol,p=c.name,e.abrupt("return",{name:p,symbol:u,balance:i,decimals:s,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=M(a.a.mark((function e(t,n,r,o){var i,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=function(e,t){o&&o({current:e,total:t})},c=this.raiden,i(1,3),e.prev=3,e.next=6,c.openChannel(t,n);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new W(e.t0);case 11:if(i(2,3),!r.gt(u["Zero"])){e.next=15;break}return e.next=15,this.deposit(t,n,r);case 15:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"leaveNetwork",value:function(){var e=M(a.a.mark((function e(t,n){var r,o,i,c,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this.store.getters.channels(t),o={closed:0,failed:0},i=r.length,c=0;case 4:if(!(c<i)){e.next=19;break}return n&&n({current:c+1,total:i}),s=r[c],e.prev=7,e.next=10,this.closeChannel(s.token,s.partner);case 10:o.closed+=1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),o.failed+=1;case 16:c++,e.next=4;break;case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this,[[7,13]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=M(a.a.mark((function e(t,n){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new V(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=M(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new q(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=M(a.a.mark((function e(t,n){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new H(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=M(a.a.mark((function e(t){var n,r=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=M(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",D({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,b()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=M(a.a.mark((function e(t,n,r,o){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.transfer(t,n,r,{paths:o});case 3:return i=e.sent,e.next=6,this.raiden.transfers$.pipe(Object(f["a"])((function(e){return e.secrethash===i&&e.completed}))).toPromise();case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new K(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=M(a.a.mark((function e(t,n,r,o){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(n);case 3:return e.next=5,this.raiden.findRoutes(t,n,r,{pfs:o});case 5:i=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new G(e.t0);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=M(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.findPFS();case 3:t=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e["catch"](0),new X(e.t0);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"noPfsSelected",value:function(){return void 0===this.raiden.config.pfs}}]),e}(),H=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),V=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),W=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),q=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),Z=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),K=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),z=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),G=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error)),X=function(e){function t(){return B(this,t),w(this,P(t).apply(this,arguments))}return _(t,e),t}(x(Error))},edd4:function(e){e.exports=JSON.parse('{"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"}},"address-input":{"paste-button":"Paste","input":{"placeholder":"Enter an address or ENS name..."},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Please enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Please enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}"}},"app-header":{"copy":"Copy","copy-success":"Copied!","currency":"ETH"},"channel-actions":{"deposit":"Deposit","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"find-routes":{"busy-title":"Searching available routes","title":"Select a route","description":"Mediators require a small fee to forward your token transfer. Please select one below:","buttons":{"confirm":"Continue"},"hops":"Hops","fees-in":"Fees in {token}","total-amount":"{totalAmount} {token}","error":{"title":"Ops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nhis may take up some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Deposit {deposit} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"splash-screen":{"disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can just be used on the Ethereum Testnets.","matrix-sign":"On the first launch you get asked to sign two messages to connect to the Raiden transport layer. You sign the matrix server name and the public user name.","connect-button":"Connect","no-provider":"No web3 provider was detected. Please install e.g. MetaMask"},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"transfer":{"deposit-button":"Deposit","channel-button":"Channels","capacity-label":"Capacity","capacity-amount":"{capacity} {token}","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Specify amount...","error":{"button":"Dismiss","title":"Token transfer unsuccessful. Please retry.","deposit-title":"Deposit was unsuccessful. Please retry."},"steps":{"transfer":{"label":"Transfer","title":"Sending Tokens","description":"Please do not close the browser and confirm the transactions with MetaMask."},"done":{"label":"Done","title":"Send Successful","description":"Your transfer was successful"},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Please do not close the browser and confirm the transactions with MetaMask."},"deposit-done":{"label":"Done","title":"Deposit successful","description":"Your tokens have been success"}}},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel has been opened successfully. You may now select a transfer target."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","price":"{amount} {symbol}","headers":{"address":"Address","url":"URL","rtt":"RTT","price":"Price"}}}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("a34a"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var p=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();p.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"newBlock",(function(){return At})),n.d(r,"tokenMonitored",(function(){return St})),n.d(r,"channelOpen",(function(){return Ct})),n.d(r,"channelOpened",(function(){return Pt})),n.d(r,"channelOpenFailed",(function(){return Nt})),n.d(r,"channelMonitored",(function(){return Tt})),n.d(r,"channelDeposit",(function(){return Rt})),n.d(r,"channelDeposited",(function(){return It})),n.d(r,"channelDepositFailed",(function(){return Dt})),n.d(r,"channelWithdrawn",(function(){return Ft})),n.d(r,"channelClose",(function(){return Mt})),n.d(r,"channelClosed",(function(){return Bt})),n.d(r,"channelCloseFailed",(function(){return Lt})),n.d(r,"channelSettleable",(function(){return Ut})),n.d(r,"channelSettle",(function(){return $t})),n.d(r,"channelSettled",(function(){return Ht})),n.d(r,"channelSettleFailed",(function(){return Vt}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return zt})),n.d(a,"matrixRequestMonitorPresence",(function(){return Gt})),n.d(a,"matrixPresenceUpdate",(function(){return Xt})),n.d(a,"matrixRequestMonitorPresenceFailed",(function(){return Yt})),n.d(a,"matrixRoom",(function(){return Jt})),n.d(a,"matrixRoomLeave",(function(){return Qt}));var o={};n.r(o),n.d(o,"transfer",(function(){return Tn})),n.d(o,"transferSigned",(function(){return Rn})),n.d(o,"transferProcessed",(function(){return In})),n.d(o,"transferSecret",(function(){return Dn})),n.d(o,"transferSecretRequest",(function(){return Fn})),n.d(o,"transferSecretReveal",(function(){return Mn})),n.d(o,"transferUnlock",(function(){return Bn})),n.d(o,"transferUnlocked",(function(){return Ln})),n.d(o,"transferUnlockProcessed",(function(){return Un})),n.d(o,"transferExpire",(function(){return $n})),n.d(o,"transferExpired",(function(){return Hn})),n.d(o,"transferExpireFailed",(function(){return Vn})),n.d(o,"transferExpireProcessed",(function(){return Wn})),n.d(o,"transferRefunded",(function(){return qn})),n.d(o,"transferred",(function(){return Zn})),n.d(o,"transferFailed",(function(){return Kn})),n.d(o,"transferClear",(function(){return zn})),n.d(o,"withdrawReceiveRequest",(function(){return Gn})),n.d(o,"withdrawSendConfirmation",(function(){return Xn}));var i={};n.r(i),n.d(i,"messageSend",(function(){return rr})),n.d(i,"messageSent",(function(){return ar})),n.d(i,"messageGlobalSend",(function(){return or})),n.d(i,"messageReceived",(function(){return ir}));var c={};n.r(c),n.d(c,"pathFind",(function(){return cr})),n.d(c,"pathFound",(function(){return sr})),n.d(c,"pathFindFailed",(function(){return ur})),n.d(c,"pfsListUpdated",(function(){return pr}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return Qr})),n.d(s,"initMonitorRegistryEpic",(function(){return ea})),n.d(s,"initMonitorChannelsEpic",(function(){return ta})),n.d(s,"initMonitorProviderEpic",(function(){return na})),n.d(s,"tokenMonitoredEpic",(function(){return ra})),n.d(s,"channelMonitoredEpic",(function(){return aa})),n.d(s,"channelOpenEpic",(function(){return oa})),n.d(s,"channelOpenedEpic",(function(){return ia})),n.d(s,"channelDepositEpic",(function(){return ca})),n.d(s,"channelCloseEpic",(function(){return sa})),n.d(s,"channelSettleEpic",(function(){return ua})),n.d(s,"channelSettleableEpic",(function(){return pa}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Xa})),n.d(u,"matrixShutdownEpic",(function(){return Ya})),n.d(u,"matrixMonitorPresenceEpic",(function(){return Ja})),n.d(u,"matrixPresenceUpdateEpic",(function(){return Qa})),n.d(u,"matrixCreateRoomEpic",(function(){return eo})),n.d(u,"matrixInviteEpic",(function(){return to})),n.d(u,"matrixHandleInvitesEpic",(function(){return no})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return ro})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return ao})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return oo})),n.d(u,"matrixMessageSendEpic",(function(){return io})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return co})),n.d(u,"matrixMessageReceivedEpic",(function(){return so})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return uo})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return po})),n.d(u,"deliveredEpic",(function(){return lo}));var p={};n.r(p),n.d(p,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return So})),n.d(p,"transferSignedRetryMessageEpic",(function(){return Co})),n.d(p,"transferUnlockedRetryMessageEpic",(function(){return Po})),n.d(p,"transferExpiredRetryMessageEpic",(function(){return No})),n.d(p,"transferAutoExpireEpic",(function(){return To})),n.d(p,"initQueuePendingEnvelopeMessagesEpic",(function(){return Ro})),n.d(p,"transferProcessedReceivedEpic",(function(){return Io})),n.d(p,"transferSecretRequestedEpic",(function(){return Do})),n.d(p,"transferSecretRevealEpic",(function(){return Fo})),n.d(p,"transferSecretRevealedEpic",(function(){return Mo})),n.d(p,"transferUnlockProcessedReceivedEpic",(function(){return Bo})),n.d(p,"transferExpireProcessedEpic",(function(){return Lo})),n.d(p,"transferChannelClosedEpic",(function(){return Uo})),n.d(p,"transferRefundedEpic",(function(){return $o})),n.d(p,"transferReceivedReplyProcessedEpic",(function(){return Ho})),n.d(p,"withdrawRequestReceivedEpic",(function(){return Vo})),n.d(p,"withdrawSendConfirmationEpic",(function(){return Wo}));var l={};n.r(l),n.d(l,"pathFindServiceEpic",(function(){return hi})),n.d(l,"pfsCapacityUpdateEpic",(function(){return yi})),n.d(l,"pfsServiceRegistryMonitorEpic",(function(){return vi}));var f=n("bef3"),d=n("8404"),b=n("6934"),m=n("ad02"),h=n("9749"),y=n("3498"),v=n("ffa9");function O(e,t){var n=e.decode(t);if(Object(y["isLeft"])(n))throw v["ThrowReporter"].report(n);return n.right}var k,j=function(e){return null!==e&&void 0!==e&&"function"===typeof e["toString"]},w=function(e){return e&&"BigNumber"===e["_ethersType"]},g=new f["a"]("BigNumber",w,(function(e,t){if(w(e))return f["p"](e);try{if(j(e))return f["p"](Object(b["bigNumberify"])(e.toString()))}catch(n){return f["e"](e,t,n.message)}return f["e"](e,t)}),(function(e){return new m["LosslessNumber"](e.toString())})),_=Object(h["memoize"])((function(e){return f["d"](f["o"],(function(t){return"string"===typeof t&&(e?Object(b["hexDataLength"])(t)===e:Object(b["isHexString"])(t))}),"HexString")})),x=Object(h["memoize"])((function(e){var t=e?d["Zero"].sub(d["Two"].pow(8*e-1)):void 0,n=e?d["Two"].pow(8*e-1):void 0;return f["d"](g,(function(e){return g.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),E=Object(h["memoize"])((function(e){var t=e?d["Zero"]:void 0,n=e?d["Two"].pow(8*e):void 0;return f["d"](g,(function(e){return g.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),A=_(65),S=_(32),C=_(),P=_(32),N=f["d"](_(20),(function(e){try{return"string"===typeof e&&Object(b["getAddress"])(e)===e}catch(t){}return!1}),"Address"),T=Object(h["memoize"])((function(e){return f["q"]([f["j"],e])}));function R(e){return[Date.now(),e]}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=f["l"](f["f"]([f["r"]({matrixServerLookup:f["o"],revealTimeout:f["j"],settleTimeout:f["j"],httpTimeout:f["j"],discoveryRoom:f["s"]([f["o"],f["i"]]),pfsRoom:f["s"]([f["o"],f["i"]]),pfsSafetyMargin:f["j"],matrixExcessRooms:f["j"]}),f["k"]({matrixServer:f["o"],logger:f["g"]((k={},I(k,"",null),I(k,"debug",null),I(k,"log",null),I(k,"info",null),I(k,"warn",null),I(k,"error",null),k)),pfs:f["s"]([N,f["o"],f["i"]])})]));function F(e){var t=e.network,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat("unknown"!==t.name?t.name:t.chainId,"_discovery"),pfsRoom:"raiden_".concat("unknown"!==t.name?t.name:t.chainId,"_path_finding"),matrixExcessRooms:3,pfsSafetyMargin:1},n)}var M=n("948b");function B(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function L(e,t){var n;if("number"===typeof e&&(e=Object(b["bigNumberify"])(e)),g.is(e)){if(e.lt(0))throw new Error("Number is negative");if(e.gte(d["Two"].pow(8*t)))throw new Error("Number too large");n=Object(M["hexZeroPad"])(Object(M["hexlify"])(e),t)}else{if("string"!==typeof e&&!Object(M["isArrayish"])(e))throw new Error("data is not a HexString or Uint8Array");var r=Object(M["hexlify"])(e);if(Object(M["hexDataLength"])(r)!==t)throw new Error("Uint8Array or hex string must be of exact length");n=r}return n}var U=function(e){return e&&!0===e["isLosslessNumber"]};function $(e){return Object(m["parse"])(e,(function(e,t){if(B(e),U(t))try{return t.valueOf()}catch(n){}return t}))}var H,V=f["r"]({amount:E(32),expiration:E(32),secrethash:S},"Lock"),W=f["r"]({chainId:E(32),tokenNetworkAddress:N,channelId:E(32),nonce:E(8),transferredAmount:E(32),lockedAmount:E(32),locksroot:S,messageHash:S,signature:A,sender:N});(function(e){e["opening"]="opening",e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})(H||(H={}));var q,Z=f["l"](f["f"]([f["r"]({deposit:E(32)}),f["k"]({locks:f["b"](V),balanceProof:W,withdraw:E(32)})])),K=f["f"]([f["l"](f["r"]({own:Z,partner:Z})),f["s"]([f["l"](f["r"]({state:f["h"](H.opening)})),f["l"](f["r"]({state:f["s"]([f["h"](H.open),f["h"](H.closing)]),id:f["j"],settleTimeout:f["j"],openBlock:f["j"],isFirstParticipant:f["c"]})),f["l"](f["r"]({state:f["s"]([f["h"](H.closed),f["h"](H.settleable),f["h"](H.settling)]),id:f["j"],settleTimeout:f["j"],openBlock:f["j"],isFirstParticipant:f["c"],closeBlock:f["j"]}))])]),z=f["l"](f["r"]({userId:f["o"],accessToken:f["o"],deviceId:f["o"],displayName:f["o"]}));(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["TO_DEVICE"]="ToDevice",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate"})(q||(q={}));var G,X=f["l"](f["r"]({message_identifier:E(8)})),Y=f["l"](f["r"]({type:f["h"](q.DELIVERED),delivered_message_identifier:E(8)})),J=f["l"](f["f"]([f["r"]({type:f["h"](q.PROCESSED)}),X])),Q=f["l"](f["f"]([f["r"]({type:f["h"](q.SECRET_REQUEST),payment_identifier:E(8),secrethash:S,amount:E(32),expiration:E(32)}),X])),ee=f["l"](f["f"]([f["r"]({type:f["h"](q.SECRET_REVEAL),secret:C}),X])),te=f["l"](f["f"]([f["r"]({chain_id:E(32),token_network_address:N,channel_identifier:E(32),nonce:E(8),transferred_amount:E(32),locked_amount:E(32),locksroot:S}),X])),ne=f["l"](f["r"]({route:f["m"](N)})),re=f["l"](f["r"]({routes:f["m"](ne)})),ae=f["l"](f["f"]([f["r"]({payment_identifier:E(8),token:N,recipient:N,lock:V,target:N,initiator:N,fee:E(32),metadata:re}),te])),oe=f["l"](f["f"]([f["r"]({type:f["h"](q.LOCKED_TRANSFER)}),ae])),ie=f["l"](f["f"]([f["r"]({type:f["h"](q.REFUND_TRANSFER)}),ae])),ce=f["l"](f["f"]([f["r"]({type:f["h"](q.UNLOCK),payment_identifier:E(8),secret:C}),te])),se=f["l"](f["f"]([f["r"]({type:f["h"](q.LOCK_EXPIRED),recipient:N,secrethash:S}),te])),ue=f["l"](f["r"]({type:f["h"](q.TO_DEVICE),message_identifier:E(8)})),pe=f["l"](f["r"]({chain_id:E(32),token_network_address:N,channel_identifier:E(32),participant:N,total_withdraw:E(32),nonce:E(8),expiration:E(32)})),le=f["l"](f["f"]([f["r"]({type:f["h"](q.WITHDRAW_REQUEST)}),pe,X])),fe=f["l"](f["f"]([f["r"]({type:f["h"](q.WITHDRAW_CONFIRMATION)}),pe,X])),de=f["l"](f["f"]([f["r"]({type:f["h"](q.WITHDRAW_EXPIRED)}),pe,X])),be=f["l"](f["r"]({type:f["h"](q.PFS_CAPACITY_UPDATE),canonical_identifier:f["l"](f["r"]({chain_identifier:E(32),token_network_address:N,channel_identifier:E(32)})),updating_participant:N,other_participant:N,updating_nonce:E(8),other_nonce:E(8),updating_capacity:E(32),other_capacity:E(32),reveal_timeout:f["j"]})),me=f["s"]([Y,J,Q,ee,oe,ie,ce,se,ue,le,fe,de,be]),he=Object(h["memoize"])((function(e){return f["f"]([e,f["l"](f["r"]({signature:A}))])})),ye=f["l"](f["f"]([f["r"]({transfer:T(he(oe)),fee:x(32)}),f["k"]({transferProcessed:T(he(J)),refund:T(he(ie)),channelClosed:T(S),secretReveal:T(he(ee)),unlock:T(he(ce)),lockExpired:T(he(se)),unlockProcessed:T(he(J)),lockExpiredProcessed:T(he(J))})])),ve=f["l"](f["n"](f["o"],ye));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["revealed"]="REVEALED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(G||(G={}));var Oe=f["l"](f["r"]({address:N,chainId:f["j"],registry:N,blockNumber:f["j"],config:D,channels:f["l"](f["n"](f["o"],f["l"](f["n"](f["o"],K)))),tokens:f["l"](f["n"](f["o"],N)),transport:f["l"](f["k"]({matrix:f["l"](f["f"]([f["r"]({server:f["o"]}),f["k"]({setup:z,rooms:f["l"](f["n"](f["o"],f["b"](f["o"])))})]))})),secrets:f["l"](f["n"](f["o"],f["l"](f["f"]([f["r"]({secret:C}),f["k"]({registerBlock:f["j"]})])))),sent:ve}));function ke(e){return Object(m["stringify"])(Oe.encode(e),void 0,2)}function je(e){return"string"===typeof e&&(e=$(e)),O(Oe,e)}function we(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{address:n,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number||0,config:F({network:t},a.config),channels:{},tokens:{},transport:{},secrets:{},sent:{}}}var ge,_e=we({network:Object(b["getNetwork"])("unspecified"),address:d["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:d["AddressZero"],block_number:0},ServiceRegistry:{address:d["AddressZero"],block_number:0}}}),xe=Object(b["padZeros"])([],65);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(ge||(ge={}));var Ee=n("a34a"),Ae=n.n(Ee),Se=n("e7ea"),Ce=n("ddfd"),Pe=n("686e"),Ne=n("7508"),Te=n("733d"),Re=n("7442"),Ie=n("371e"),De=n("ff97"),Fe=n("6aa5"),Me=n("eec8"),Be=n("6292"),Le=n("a1c0"),Ue=n("649d"),$e=n("06d2"),He=n("5580"),Ve=n("f791"),We=n("891b"),qe=n("e102"),Ze=n("7fdb"),Ke=n("ac72"),ze=n("3a71"),Ge=n("7b32"),Xe=n("446c");n("86ae"),n("fa1e");function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}var et=function(){function e(){Ye(this,e)}return Qe(e,null,[{key:"connect",value:function(e,t){return new Se["Contract"](e,tt,t)}}]),e}(),tt=[{constant:!0,inputs:[{name:"",type:"address"}],name:"token_to_token_networks",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"max_token_networks",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_created",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_token_address",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{name:"token_network_address",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"secret_registry_address",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_secret_registry_address",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_max_token_networks",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"token_address",type:"address"},{indexed:!0,name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"}];function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),e}var ot=function(){function e(){nt(this,e)}return at(e,null,[{key:"connect",value:function(e,t){return new Se["Contract"](e,it,t)}}]),e}(),it=[{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"receiver",type:"address"},{name:"sender",type:"address"},{name:"locks",type:"bytes"}],name:"unlock",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"participant1",type:"address"},{name:"participant2",type:"address"},{name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"secret_registry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"channel_participant_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_deposit",type:"uint256"},{name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"channel_counter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MAX_SAFE_UINT256",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"non_closing_participant",type:"address"},{name:"closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"non_closing_signature",type:"bytes"},{name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"signature_prefix",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant1_transferred_amount",type:"uint256"},{name:"participant1_locked_amount",type:"uint256"},{name:"participant1_locksroot",type:"bytes32"},{name:"participant2",type:"address"},{name:"participant2_transferred_amount",type:"uint256"},{name:"participant2_locked_amount",type:"uint256"},{name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_withdraw",type:"uint256"},{name:"expiration_block",type:"uint256"},{name:"participant_signature",type:"bytes"},{name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"safety_deprecation_switch",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"channels",outputs:[{name:"settle_block_number",type:"uint256"},{name:"state",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"bytes32"},{name:"",type:"uint256"},{name:"",type:"bytes32"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"closing_participant",type:"address"},{name:"non_closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"closing_signature",type:"bytes"},{name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"sender",type:"address"},{name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{inputs:[{name:"_token_address",type:"address"},{name:"_secret_registry",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_deprecation_executor",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant1",type:"address"},{indexed:!0,name:"participant2",type:"address"},{indexed:!1,name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"locksroot",type:"bytes32"},{indexed:!1,name:"unlocked_amount",type:"uint256"},{indexed:!1,name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!1,name:"participant1_amount",type:"uint256"},{indexed:!1,name:"participant1_locksroot",type:"bytes32"},{indexed:!1,name:"participant2_amount",type:"uint256"},{indexed:!1,name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"}];function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),e}var pt=function(){function e(){ct(this,e)}return ut(e,null,[{key:"connect",value:function(e,t){return new Se["Contract"](e,lt,t)}}]),e}(),lt=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"supply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"decimals",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenName",type:"string"},{name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!1,stateMutability:"nonpayable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}];function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t,n){return t&&dt(e.prototype,t),n&&dt(e,n),e}var mt=function(){function e(){ft(this,e)}return bt(e,null,[{key:"connect",value:function(e,t){return new Se["Contract"](e,ht,t)}}]),e}(),ht=[{constant:!0,inputs:[],name:"price_bump_denominator",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"set_price",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_set_price",type:"uint256"},{name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_price_bump_numerator",type:"uint256"},{name:"_price_bump_denominator",type:"uint256"},{name:"_decay_constant",type:"uint256"},{name:"_min_price",type:"uint256"},{name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"set_price_at",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"everMadeDepositsLen",outputs:[{name:"_len",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"new_url",type:"string"}],name:"setURL",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decay_constant",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"service_valid_till",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentPrice",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"registration_duration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"setDeprecationSwitch",outputs:[{name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"min_price",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"urls",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{name:"_has_registration",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"controller",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"price_bump_numerator",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_token_for_registration",type:"address"},{name:"_controller",type:"address"},{name:"_initial_price",type:"uint256"},{name:"_price_bump_numerator",type:"uint256"},{name:"_price_bump_denominator",type:"uint256"},{name:"_decay_constant",type:"uint256"},{name:"_min_price",type:"uint256"},{name:"_registration_duration",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"service",type:"address"},{indexed:!1,name:"valid_till",type:"uint256"},{indexed:!1,name:"deposit_amount",type:"uint256"},{indexed:!1,name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"}],yt=n("a0df"),vt=n("31a7"),Ot=n("c998"),kt=n("b4cc"),jt=n("0ff6"),wt=n("4e0b");function gt(e){var t=d["Zero"];if(e.state!==H.open)return{ownDeposit:t,ownWithdraw:t,ownTransferred:t,ownLocked:t,ownBalance:t,ownCapacity:t,partnerDeposit:t,partnerWithdraw:t,partnerTransferred:t,partnerLocked:t,partnerBalance:t,partnerCapacity:t};var n=e.own.withdraw||t,r=e.partner.withdraw||t,a=e.own.balanceProof?e.own.balanceProof.transferredAmount:t,o=e.partner.balanceProof?e.partner.balanceProof.transferredAmount:t,i=e.own.balanceProof?e.own.balanceProof.lockedAmount:t,c=e.partner.balanceProof?e.partner.balanceProof.lockedAmount:t,s=o.sub(a),u=a.sub(o),p=e.own.deposit.sub(n).sub(i).add(s),l=e.partner.deposit.sub(r).sub(c).add(u);return{ownDeposit:e.own.deposit,ownWithdraw:n,ownTransferred:a,ownLocked:i,ownBalance:s,ownCapacity:p,partnerDeposit:e.partner.deposit,partnerWithdraw:r,partnerTransferred:o,partnerLocked:c,partnerBalance:u,partnerCapacity:l}}var _t=n("0b23");function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;for(var a in e){var o=e[a];if(o){var i=n[a]||t[a],c=o(i,r);c!==i&&(n=Object.assign({},n,xt({},a,c)))}}return n}}var At=Object(Re["createStandardAction"])("newBlock")(),St=Object(Re["createStandardAction"])("tokenMonitored")(),Ct=Object(Re["createStandardAction"])("channelOpen")(),Pt=Object(Re["createStandardAction"])("channelOpened")(),Nt=Object(Re["createStandardAction"])("channelOpenFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),Tt=Object(Re["createStandardAction"])("channelMonitored")(),Rt=Object(Re["createStandardAction"])("channelDeposit")(),It=Object(Re["createStandardAction"])("channelDeposited")(),Dt=Object(Re["createStandardAction"])("channelDepositFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),Ft=Object(Re["createStandardAction"])("channelWithdrawn")(),Mt=Object(Re["createStandardAction"])("channelClose")(),Bt=Object(Re["createStandardAction"])("channelClosed")(),Lt=Object(Re["createStandardAction"])("channelCloseFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),Ut=Object(Re["createStandardAction"])("channelSettleable")(),$t=Object(Re["createStandardAction"])("channelSettle")(),Ht=Object(Re["createStandardAction"])("channelSettled")(),Vt=Object(Re["createStandardAction"])("channelSettleFailed").map((function(e,t){return{payload:e,error:!0,meta:t}}));function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.blockNumber,t=arguments.length>1?arguments[1]:void 0;return Object(Re["isActionOf"])(At,t)?t.payload.blockNumber:e}function qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.tokens,t=arguments.length>1?arguments[1]:void 0;return Object(Re["isActionOf"])(St,t)?Object(_t["set"])([t.payload.token],t.payload.tokenNetwork,e):e}function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.channels,t=arguments.length>1?arguments[1]:void 0;if(Object(Re["isActionOf"])(Ct,t)){var n=[t.meta.tokenNetwork,t.meta.partner];if(Object(_t["get"])(n,e))return e;var r={state:H.opening,own:{deposit:d["Zero"]},partner:{deposit:d["Zero"]}};return Object(_t["set"])(n,r,e)}if(Object(Re["isActionOf"])(Pt,t)){var a=[t.meta.tokenNetwork,t.meta.partner],o={state:H.open,own:{deposit:d["Zero"]},partner:{deposit:d["Zero"]},id:t.payload.id,settleTimeout:t.payload.settleTimeout,openBlock:t.payload.openBlock,isFirstParticipant:t.payload.isFirstParticipant};return Object(_t["set"])(a,o,e)}if(Object(Re["isActionOf"])(Nt,t)){var i=[t.meta.tokenNetwork,t.meta.partner];return Object(_t["get"])([].concat(i,["state"]),e)!==H.opening?e:Object(_t["unset"])(i,e)}if(Object(Re["isActionOf"])(It,t)){var c=[t.meta.tokenNetwork,t.meta.partner],s=Object(_t["get"])(c,e);return s&&s.state===H.open&&s.id===t.payload.id?(s=t.payload.participant===t.meta.partner?Object.assign({},s,{partner:Object.assign({},s.partner,{deposit:t.payload.totalDeposit})}):Object.assign({},s,{own:Object.assign({},s.own,{deposit:t.payload.totalDeposit})}),Object(_t["set"])(c,s,e)):e}if(Object(Re["isActionOf"])(Ft,t)){var u=[t.meta.tokenNetwork,t.meta.partner],p=Object(_t["get"])(u,e);return p&&p.state===H.open&&p.id===t.payload.id?(p=t.payload.participant===t.meta.partner?Object.assign({},p,{partner:Object.assign({},p.partner,{withdraw:t.payload.totalWithdraw})}):Object.assign({},p,{own:Object.assign({},p.own,{withdraw:t.payload.totalWithdraw})}),Object(_t["set"])(u,p,e)):e}if(Object(Re["isActionOf"])(Mt,t)){var l=[t.meta.tokenNetwork,t.meta.partner],f=Object(_t["get"])(l,e);return f&&f.state===H.open?(f=Object.assign({},f,{state:H.closing}),Object(_t["set"])(l,f,e)):e}if(Object(Re["isActionOf"])(Bt,t)){var b=[t.meta.tokenNetwork,t.meta.partner],m=Object(_t["get"])(b,e);return!m||m.state!==H.open&&m.state!==H.closing||m.id!==t.payload.id?e:(m=Object.assign({},m,{state:H.closed,closeBlock:t.payload.closeBlock}),Object(_t["set"])(b,m,e))}if(Object(Re["isActionOf"])(Ut,t)){var h=[t.meta.tokenNetwork,t.meta.partner],y=Object(_t["get"])(h,e);return y&&y.state===H.closed?(y=Object.assign({},y,{state:H.settleable}),Object(_t["set"])(h,y,e)):e}if(Object(Re["isActionOf"])($t,t)){var v=[t.meta.tokenNetwork,t.meta.partner],O=Object(_t["get"])(v,e);return O&&O.state===H.settleable?(O=Object.assign({},O,{state:H.settling}),Object(_t["set"])(v,O,e)):e}if(Object(Re["isActionOf"])(Ht,t)){var k=[t.meta.tokenNetwork,t.meta.partner],j=Object(_t["get"])(k,e);return j&&[H.closed,H.settleable,H.settling].includes(j.state)?Object(_t["unset"])(k,e):e}return e}var Kt=Et({blockNumber:Wt,tokens:qt,channels:Zt},_e),zt=Object(Re["createStandardAction"])("matrixSetup")(),Gt=Object(Re["createStandardAction"])("matrixRequestMonitorPresence")(),Xt=Object(Re["createStandardAction"])("matrixPresenceUpdate").map((function(e,t){var n=e.userId,r=e.available,a=e.ts;return{payload:{userId:n,available:r,ts:a||Date.now()},meta:t}})),Yt=Object(Re["createStandardAction"])("matrixRequestMonitorPresenceFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),Jt=Object(Re["createStandardAction"])("matrixRoom")(),Qt=Object(Re["createStandardAction"])("matrixRoomLeave")();function en(e){return rn(e)||nn(e)||tn()}function tn(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function nn(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function rn(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function an(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.transport,t=arguments.length>1?arguments[1]:void 0;if(Object(Re["isActionOf"])(zt,t))return Object.assign({},e,{matrix:Object.assign({},e.matrix,t.payload)});if(Object(Re["isActionOf"])(Jt,t)){var n=["matrix","rooms",t.meta.address];return Object(_t["set"])(n,[t.payload.roomId].concat(en(Object(_t["getOr"])([],n,e).filter((function(e){return e!==t.payload.roomId})))),e)}if(Object(Re["isActionOf"])(Qt,t)){var r=["matrix","rooms",t.meta.address];return e=Object(_t["set"])(r,Object(_t["getOr"])([],r,e).filter((function(e){return e!==t.payload.roomId})),e),Object(_t["isEmpty"])(Object(_t["get"])(r,e))&&(e=Object(_t["unset"])(r,e)),e}return e}var on,cn=Et({transport:an},_e);function sn(e,t){return ln(e)||pn(e,t)||un()}function un(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function pn(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ln(e){if(Array.isArray(e))return e}function fn(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.push(L(c.expiration,32),L(c.amount,32),c.secrethash)}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return Object(b["keccak256"])(Object(M["concat"])(t))}function dn(e){return Object(b["sha256"])(e)}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(M["hexlify"])(Object(b["randomBytes"])(e))}function mn(){return Object(b["bigNumberify"])(Object(b["randomBytes"])(8))}function hn(){return Object(b["bigNumberify"])(Date.now())}function yn(e){var t=e.lockExpiredProcessed?[G.expired,e.lockExpiredProcessed[0]]:e.unlockProcessed?[G.unlocked,e.unlockProcessed[0]]:e.lockExpired?[G.expiring,e.lockExpired[0]]:e.unlock?[G.unlocking,e.unlock[0]]:e.secretReveal?[G.revealed,e.secretReveal[0]]:e.channelClosed?[G.closed,e.channelClosed[0]]:e.refund?[G.refunded,e.refund[0]]:e.transferProcessed?[G.received,e.transferProcessed[0]]:[G.pending,e.transfer[0]],n=sn(t,2),r=n[0],a=n[1],o=!(!e.secretReveal&&!e.unlock)||!(e.refund||e.lockExpired||e.channelClosed)&&void 0,i=!!(e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed);return{secrethash:e.transfer[1].lock.secrethash,status:r,initiator:e.transfer[1].initiator,recipient:e.transfer[1].recipient,target:e.transfer[1].target,metadata:e.transfer[1].metadata,paymentId:e.transfer[1].payment_identifier,chainId:e.transfer[1].chain_id.toNumber(),token:e.transfer[1].token,tokenNetwork:e.transfer[1].token_network_address,channelId:e.transfer[1].channel_identifier,value:e.transfer[1].lock.amount.sub(e.fee),fee:e.fee,amount:e.transfer[1].lock.amount,expirationBlock:e.transfer[1].lock.expiration.toNumber(),startedAt:new Date(e.transfer[0]),changedAt:new Date(a),success:o,completed:i}}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On,kn=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))},jn=(on={},vn(on,q.DELIVERED,12),vn(on,q.PROCESSED,0),vn(on,q.SECRET_REQUEST,3),vn(on,q.SECRET_REVEAL,11),vn(on,q.LOCKED_TRANSFER,7),vn(on,q.REFUND_TRANSFER,8),vn(on,q.UNLOCK,4),vn(on,q.LOCK_EXPIRED,13),vn(on,q.TO_DEVICE,14),vn(on,q.WITHDRAW_REQUEST,15),vn(on,q.WITHDRAW_CONFIRMATION,16),vn(on,q.WITHDRAW_EXPIRED,17),vn(on,q.PFS_CAPACITY_UPDATE,-1),on);function wn(e){var t=e.routes.map((function(e){return Object(b["keccak256"])(b["RLP"].encode(e.route))}));return Object(b["keccak256"])(b["RLP"].encode(t))}function gn(e,t,n){return e.isZero()&&t.isZero()&&n===d["HashZero"]?d["HashZero"]:Object(b["keccak256"])(Object(M["concat"])([L(e,32),L(t,32),L(n,32)]))}function _n(e){switch(e.type){case q.LOCKED_TRANSFER:case q.REFUND_TRANSFER:var t=Object(M["concat"])([L(jn[e.type],1),L(e.message_identifier,8),L(e.payment_identifier,8),L(e.lock.expiration,32),L(e.token,20),L(e.recipient,20),L(e.target,20),L(e.initiator,20),L(e.lock.secrethash,32),L(e.lock.amount,32),L(e.fee,32)]);return e.type===q.LOCKED_TRANSFER&&(t=Object(M["concat"])([t,wn(e.metadata)])),Object(b["keccak256"])(t);case q.UNLOCK:return Object(b["keccak256"])(Object(M["concat"])([L(jn[e.type],1),L(e.message_identifier,8),L(e.payment_identifier,8),L(e.secret,32)]));case q.LOCK_EXPIRED:return Object(b["keccak256"])(Object(M["concat"])([L(jn[e.type],1),L(e.message_identifier,8),L(e.recipient,20),L(e.secrethash,32)]))}}function xn(e){switch(e.type){case q.DELIVERED:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.delivered_message_identifier,8)]));case q.PROCESSED:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.message_identifier,8)]));case q.LOCKED_TRANSFER:case q.REFUND_TRANSFER:case q.UNLOCK:case q.LOCK_EXPIRED:var t=_n(e),n=gn(e.transferred_amount,e.locked_amount,e.locksroot);return Object(M["hexlify"])(Object(M["concat"])([L(e.token_network_address,20),L(e.chain_id,32),L(On.BALANCE_PROOF,32),L(e.channel_identifier,32),L(n,32),L(e.nonce,32),L(t,32)]));case q.SECRET_REQUEST:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.message_identifier,8),L(e.payment_identifier,8),L(e.secrethash,32),L(e.amount,32),L(e.expiration,32)]));case q.SECRET_REVEAL:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.message_identifier,8),L(e.secret,32)]));case q.TO_DEVICE:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.message_identifier,8)]));case q.WITHDRAW_REQUEST:case q.WITHDRAW_CONFIRMATION:return Object(M["hexlify"])(Object(M["concat"])([L(e.token_network_address,20),L(e.chain_id,32),L(On.WITHDRAW,32),L(e.channel_identifier,32),L(e.participant,20),L(e.total_withdraw,32),L(e.expiration,32)]));case q.WITHDRAW_EXPIRED:return Object(M["hexlify"])(Object(M["concat"])([L(jn[e.type],1),L(0,3),L(e.nonce,32),L(e.message_identifier,8),L(e.token_network_address,20),L(e.chain_id,32),L(On.WITHDRAW,32),L(e.channel_identifier,32),L(e.participant,20),L(e.total_withdraw,32),L(e.expiration,32)]));case q.PFS_CAPACITY_UPDATE:return Object(M["hexlify"])(Object(M["concat"])([L(e.canonical_identifier.chain_identifier,32),L(e.canonical_identifier.token_network_address,20),L(e.canonical_identifier.channel_identifier,32),L(e.updating_participant,20),L(e.other_participant,20),L(e.updating_nonce,8),L(e.other_nonce,8),L(e.updating_capacity,32),L(e.other_capacity,32),L(e.reveal_timeout,32)]))}}function En(e){return A.is(e.signature)}function An(e){return Object(b["verifyMessage"])(Object(M["arrayify"])(xn(e)),e.signature)}function Sn(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,messageHash:_n(e),signature:e.signature,sender:An(e)}}function Cn(e){return Object(m["stringify"])(he(me).encode(e))}function Pn(e){var t=$(e),n=he(me).decode(t);if(Object(y["isLeft"])(n))throw v["ThrowReporter"].report(n);return n.right}function Nn(e,t){return kn(this,void 0,void 0,Ae.a.mark((function n(){var r;return Ae.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!En(t)){n.next=2;break}return n.abrupt("return",t);case 2:return n.next=4,e.signMessage(Object(M["arrayify"])(xn(t)));case 4:return r=n.sent,n.abrupt("return",Object.assign({},t,{signature:r}));case 6:case"end":return n.stop()}}),n)})))}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["WITHDRAW"]=3]="WITHDRAW"})(On||(On={}));var Tn=Object(Re["createStandardAction"])("transfer")(),Rn=Object(Re["createStandardAction"])("transferSigned")(),In=Object(Re["createStandardAction"])("transferProcessed")(),Dn=Object(Re["createStandardAction"])("transferSecret")(),Fn=Object(Re["createStandardAction"])("transferSecretRequest")(),Mn=Object(Re["createStandardAction"])("transferSecretReveal")(),Bn=Object(Re["createStandardAction"])("transferUnlock")(),Ln=Object(Re["createStandardAction"])("transferUnlocked")(),Un=Object(Re["createStandardAction"])("transferUnlockProcessed")(),$n=Object(Re["createStandardAction"])("transferExpire")(),Hn=Object(Re["createStandardAction"])("transferExpired")(),Vn=Object(Re["createStandardAction"])("transferExpireFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),Wn=Object(Re["createStandardAction"])("transferExpireProcessed")(),qn=Object(Re["createStandardAction"])("transferRefunded")(),Zn=Object(Re["createStandardAction"])("transferred")(),Kn=Object(Re["createStandardAction"])("transferFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),zn=Object(Re["createStandardAction"])("transferClear")(),Gn=Object(Re["createStandardAction"])("withdrawReceiveRequest")(),Xn=Object(Re["createStandardAction"])("withdrawSendConfirmation")();function Yn(e){return er(e)||Qn(e)||Jn()}function Jn(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Qn(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function er(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;if(Object(Re["isActionOf"])(Dn,t))return t.meta.secrethash in e.secrets&&e.secrets[t.meta.secrethash].registerBlock?e:Object.assign({},e,{secrets:Object.assign({},e.secrets,tr({},t.meta.secrethash,t.payload))});if(Object(Re["isActionOf"])(Rn,t)){var n=t.payload.message,r=n.lock,a=r.secrethash;if(a in e.sent)return e;var o=["channels",n.token_network_address,n.recipient],i=Object(_t["get"])(o,e);if(!i)return e;var c=[].concat(Yn(i.own.locks||[]),[r]),s=fn(c);if(n.locksroot!==s||!n.nonce.eq((i.own.balanceProof?i.own.balanceProof.nonce:d["Zero"]).add(1))||!n.transferred_amount.eq(i.own.balanceProof?i.own.balanceProof.transferredAmount:d["Zero"])||!n.locked_amount.eq((i.own.balanceProof?i.own.balanceProof.lockedAmount:d["Zero"]).add(r.amount)))return e;i=Object.assign({},i,{own:Object.assign({},i.own,{locks:c,balanceProof:Sn(n)})});var u={transfer:R(n),fee:t.payload.fee};return e=Object(_t["set"])(o,i,e),e=Object(_t["set"])(["sent",a],u,e),e}if(Object(Re["isActionOf"])(In,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,tr({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{transferProcessed:R(t.payload.message)})))}):e;if(Object(Re["isActionOf"])(Mn,t))return t.meta.secrethash in e.sent&&!e.sent[t.meta.secrethash].secretReveal?Object.assign({},e,{sent:Object.assign({},e.sent,tr({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{secretReveal:R(t.payload.message)})))}):e;if(Object(Re["isActionOf"])(Ln,t)){var p=t.payload.message,l=t.meta.secrethash;if(!(l in e.sent)||e.sent[l].unlock)return e;var f=e.sent[l].transfer[1],m=f.lock,h=["channels",f.token_network_address,f.recipient],y=Object(_t["get"])(h,e);if(!y||!y.own.locks||!y.own.balanceProof)return e;var v=y.own.locks.filter((function(e){return e.secrethash!==l})),O=fn(v);if(p.locksroot!==O||!y.own.balanceProof.nonce.add(1).eq(p.nonce)||!p.transferred_amount.eq(y.own.balanceProof.transferredAmount.add(m.amount))||!p.locked_amount.eq(y.own.balanceProof.lockedAmount.sub(m.amount)))return e;y=Object.assign({},y,{own:Object.assign({},y.own,{locks:v,balanceProof:Sn(p)})});var k=Object.assign({},e.sent[l],{unlock:R(p)});return e=Object(_t["set"])(h,y,e),e=Object(_t["set"])(["sent",l],k,e),e}if(Object(Re["isActionOf"])(Hn,t)){var j=t.payload.message,w=t.meta.secrethash;if(!(w in e.sent)||e.sent[w].unlock||e.sent[w].lockExpired)return e;var g=e.sent[w].transfer[1],_=g.lock,x=["channels",g.token_network_address,g.recipient],E=Object(_t["get"])(x,e);if(!E||!E.own.locks||!E.own.balanceProof)return e;var A=E.own.locks.filter((function(e){return e.secrethash!==w})),S=fn(A);if(j.locksroot!==S||!E.own.balanceProof.nonce.add(1).eq(j.nonce)||!j.transferred_amount.eq(E.own.balanceProof.transferredAmount)||!j.locked_amount.eq(E.own.balanceProof.lockedAmount.sub(_.amount)))return e;E=Object.assign({},E,{own:Object.assign({},E.own,{locks:A,balanceProof:Sn(j)})});var C=Object.assign({},e.sent[w],{lockExpired:R(j)});return e=Object(_t["set"])(x,E,e),e=Object(_t["set"])(["sent",w],C,e),e}if(Object(Re["isActionOf"])(Un,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,tr({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{unlockProcessed:R(t.payload.message)})))}):e;if(Object(Re["isActionOf"])(Wn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,tr({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{lockExpiredProcessed:R(t.payload.message)})))}):e;if(Object(Re["isActionOf"])(qn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,tr({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{refund:R(t.payload.message)})))}):e;if(Object(Re["isActionOf"])(Bt,t))return Object.assign({},e,{sent:Object(_t["mapValues"])((function(e){return e.transfer[1].channel_identifier.eq(t.payload.id)&&e.transfer[1].recipient===t.meta.partner&&e.transfer[1].token_network_address===t.meta.tokenNetwork?Object.assign({},e,{channelClosed:R(t.payload.txHash)}):e}))(e.sent)});if(Object(Re["isActionOf"])(zn,t))return t.meta.secrethash in e.sent?(e=Object(_t["unset"])(["sent",t.meta.secrethash],e),e=Object(_t["unset"])(["secrets",t.meta.secrethash],e),e):e;if(Object(Re["isActionOf"])(Xn,t)){var P=t.payload.message,N=["channels",t.meta.tokenNetwork,t.meta.partner],T=Object(_t["get"])(N,e);if(!T||T.state!==H.open)return e;var I=T.own.balanceProof||{chainId:P.chain_id,tokenNetworkAddress:t.meta.tokenNetwork,channelId:P.channel_identifier,nonce:d["Zero"],transferredAmount:d["Zero"],lockedAmount:d["Zero"],locksroot:d["HashZero"],messageHash:d["HashZero"],signature:Object(b["hexlify"])(xe),sender:e.address};return P.nonce.eq(I.nonce.add(1))&&P.expiration.gt(e.blockNumber)&&(T=Object.assign({},T,{own:Object.assign({},T.own,{balanceProof:Object.assign({},I,{nonce:P.nonce})})}),e=Object(_t["set"])(N,T,e)),e}return e}var rr=Object(Re["createStandardAction"])("messageSend")(),ar=Object(Re["createStandardAction"])("messageSent")(),or=Object(Re["createStandardAction"])("messageGlobalSend")(),ir=Object(Re["createStandardAction"])("messageReceived").map((function(e,t){var n=e.text,r=e.message,a=e.ts,o=e.userId,i=e.roomId;return{payload:{text:n,message:r,ts:a||Date.now(),userId:o,roomId:i},meta:t}})),cr=Object(Re["createStandardAction"])("pathFind")(),sr=Object(Re["createStandardAction"])("pathFound")(),ur=Object(Re["createStandardAction"])("pathFindFailed").map((function(e,t){return{payload:e,error:!0,meta:t}})),pr=Object(Re["createStandardAction"])("pfsListUpdated")(),lr=Object(Re["createStandardAction"])("raidenShutdown")(),fr=Object(Re["createStandardAction"])("raidenConfigUpdate")(),dr=Object.assign({raidenShutdown:lr,raidenConfigUpdate:fr},r,a,i,o,c),br=Object(h["pick"])(dr,[dr.raidenShutdown,dr.newBlock,dr.matrixPresenceUpdate,dr.tokenMonitored].map(Re["getType"])),mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;return Object(Re["isActionOf"])(fr,t)&&!Object(_t["isEmpty"])(t.payload.config)?Object.assign({},e,{config:Object.assign({},e.config,t.payload.config)}):e},hr={configReducer:mr,channelsReducer:Kt,transportReducer:cn,transfersReducer:nr},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;return Object.values(hr).reduce((function(e,n){return n(e,t)}),e)},vr=n("3c89"),Or=n("379c"),kr=n("99e6"),jr=n("1c03"),wr=n("1a65"),gr=n("ee13"),_r=n("e418"),xr=n("0815"),Er=n("7182"),Ar=n("b66b"),Sr=n("8012c"),Cr=n("d193"),Pr=n("6f0b"),Nr=n("8753"),Tr=n("a3fa");function Rr(e){return Fr(e)||Dr(e)||Ir()}function Ir(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Dr(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Fr(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Mr(e,t){return Ur(e)||Lr(e,t)||Br()}function Br(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Lr(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ur(e){if(Array.isArray(e))return e}var $r=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Hr(e,t,n){return Object(Nr["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n)}function Vr(e,t,n,r){var a=e.provider,o=He["a"];n&&r&&(o=Object(Tr["a"])(n,Object($e["a"])((function(){return a.blockNumber?Object(vr["a"])(a.blockNumber):r}))).pipe(Object(Ge["a"])(),Object(_r["a"])((function(e){var n=Mr(e,2),r=n[0],o=n[1];return Promise.all(t.map((function(e){return a.getLogs(Object.assign({},e,{fromBlock:r,toBlock:o}))})))})),Object(Xe["a"])((function(e){return Object(Me["a"])(Object(h["sortBy"])(Object(h["flatten"])(e),["blockNumber"]))})),Object(Ve["a"])((function(t){var n=e.interface.parseLog(t);if(n){var r=Array.prototype.slice.call(n.values),o=Object.assign({},t,n,{args:r,removeListener:function(){},getBlock:function(){return a.getBlock(t.blockHash)},getTransaction:function(){return a.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return a.getTransactionReceipt(t.transactionHash)},decode:void 0});return[].concat(Rr(r),[o])}})),Object(ze["a"])((function(e){return!!e}))));var i=Object(Me["a"])(t).pipe(Object(Xe["a"])((function(t){return Hr(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}))})));return Object(Ue["a"])(o,i)}function Wr(e){return $r(this,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Pr["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}}),t)})))}function qr(e){var t=e.send;e.send=function(n,r){return $r(this,void 0,void 0,Ae.a.mark((function a(){return Ae.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("eth_sign"!==n){a.next=2;break}return a.abrupt("return",t.apply(this,["personal_sign",[r[1],r[0]]]).catch((function(a){if(a instanceof Error&&(a.message.includes("The method personal_sign does not exist")||a.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,r);throw a})));case 2:return a.abrupt("return",t.apply(this,[n,r]));case 3:case"end":return a.stop()}}),a,this)})))}}var Zr=void 0;function Kr(e,t){return Xr(e)||Gr(e,t)||zr()}function zr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Gr(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xr(e){if(Array.isArray(e))return e}function Yr(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Jr=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Qr=function(e,t,n){Yr(e),Yr(t);var r=n.provider;return Object(Me["a"])(r.getBlockNumber()).pipe(Object(Xe["a"])((function(e){return Object(Ue["a"])(Object(vr["a"])(e),Hr(r,"block"))})),Object(Ve["a"])((function(e){return At({blockNumber:e})})))},ea=function(e,t,n){Yr(e);var r=n.registryContract,a=n.contractsInfo;return t.pipe(Object(gr["a"])(1,void 0,(function(e){return e.pipe(Object(Ge["a"])(),Object(_r["a"])((function(t){return Object(Ue["a"])(Vr(r,[r.filters.TokenNetworkCreated(null,null)],Object(h["isEmpty"])(t.tokens)?Object(vr["a"])(a.TokenNetworkRegistry.block_number):void 0,Object(h["isEmpty"])(t.tokens)?e.pipe(Object(We["a"])("blockNumber")):void 0).pipe(Object(xr["a"])(e),Object(Ve["a"])((function(e){var t=Kr(e,2),n=Kr(t[0],3),r=n[0],a=n[1],o=n[2],i=t[1];return St({token:r,tokenNetwork:a,fromBlock:r in i.tokens?void 0:o.blockNumber})}))),Object(Me["a"])(Object.entries(t.tokens)).pipe(Object(Ve["a"])((function(e){var t=Kr(e,2),n=t[0],r=t[1];return St({token:n,tokenNetwork:r})}))))})))})))},ta=function(e,t){return Yr(e),t.pipe(Object(Ge["a"])(),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t.channels);case 1:if(!(n<r.length)){e.next=16;break}a=Kr(r[n],2),o=a[0],i=a[1],c=0,s=Object.entries(i);case 4:if(!(c<s.length)){e.next=13;break}if(u=Kr(s[c],2),p=u[0],l=u[1],l.state!==H.opening){e.next=8;break}return e.abrupt("continue",10);case 8:return e.next=10,Tt({id:l.id},{tokenNetwork:o,partner:p});case 10:c++,e.next=4;break;case 13:n++,e.next=1;break;case 16:case"end":return e.stop()}}),e)}))))},na=function(e,t,n){Yr(e),Yr(t);var r=n.address,a=n.network,o=n.provider;return Object(Me["a"])(o.listAccounts()).pipe(Object(Ve["a"])((function(e){return e.includes(r)})),Object(Xe["a"])((function(e){return Object(wr["a"])(o.pollingInterval).pipe(Object(Xe["a"])((function(){return Object(Ue["a"])(e?Object(Me["a"])(o.listAccounts()).pipe(Object(Xe["a"])((function(e){return e.includes(r)?He["a"]:Object(vr["a"])(lr({reason:ge.ACCOUNT_CHANGED}))}))):He["a"],Object(Me["a"])(Wr(o)).pipe(Object(Xe["a"])((function(e){return e.chainId!==a.chainId?Object(vr["a"])(lr({reason:ge.NETWORK_CHANGED})):He["a"]}))))})))})))},ra=function(e,t,n){var r=n.address,a=n.getTokenNetworkContract;return t.pipe(Object(We["a"])("blockNumber"),Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(St)),Object(Er["a"])((function(e){return e.payload.tokenNetwork})),Object(Xe["a"])((function(e){return e.pipe(Object(Ar["a"])((function(e){var n=a(e.payload.tokenNetwork),o=[n.filters.ChannelOpened(null,r,null,null),n.filters.ChannelOpened(null,null,r,null)];return Vr(n,o,e.payload.fromBlock?Object(vr["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(ze["a"])((function(e){var t=Kr(e,3),n=t[1],a=t[2];return n===r||a===r})),Object(Ve["a"])((function(e){var t=Kr(e,5),a=t[0],o=t[1],i=t[2],c=t[3],s=t[4];return Pt({id:a.toNumber(),settleTimeout:c.toNumber(),openBlock:s.blockNumber,isFirstParticipant:r===o,txHash:s.transactionHash},{tokenNetwork:n.address,partner:r===o?i:o})})))})))})))})))},aa=function(e,t,n){var r=n.getTokenNetworkContract;return t.pipe(Object(We["a"])("blockNumber"),Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Tt)),Object(Er["a"])((function(e){return"".concat(e.payload.id,"#").concat(e.meta.partner,"@").concat(e.meta.tokenNetwork)})),Object(Xe["a"])((function(e){return e.pipe(Object(Ar["a"])((function(e){var n=r(e.meta.tokenNetwork),a=n.filters.ChannelNewDeposit(e.payload.id,null,null),o=n.filters.ChannelWithdraw(e.payload.id,null,null),i=n.filters.ChannelClosed(e.payload.id,null,null,null),c=n.filters.ChannelSettled(e.payload.id,null,null,null,null);return Object(Ue["a"])(Vr(n,[a],e.payload.fromBlock?Object(vr["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Ve["a"])((function(t){var n=Kr(t,4),r=n[0],a=n[1],o=n[2],i=n[3];return It({id:r.toNumber(),participant:a,totalDeposit:o,txHash:i.transactionHash},e.meta)}))),Vr(n,[o],e.payload.fromBlock?Object(vr["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Ve["a"])((function(t){var n=Kr(t,4),r=n[0],a=n[1],o=n[2],i=n[3];return Ft({id:r.toNumber(),participant:a,totalWithdraw:o,txHash:i.transactionHash},e.meta)}))),Vr(n,[i],e.payload.fromBlock?Object(vr["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Ve["a"])((function(t){var n=Kr(t,5),r=n[0],a=n[1],o=n[4];return Bt({id:r.toNumber(),participant:a,closeBlock:o.blockNumber,txHash:o.transactionHash},e.meta)}))),Vr(n,[c],e.payload.fromBlock?Object(vr["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Ve["a"])((function(t){var n=Kr(t,6),r=n[0],a=n[5];return Ht({id:r.toNumber(),settleBlock:a.blockNumber,txHash:a.transactionHash},e.meta)})))).pipe(Object(Or["a"])(Object(h["negate"])(Object(Re["isActionOf"])(Ht)),!0))})))})))})))},oa=function(e,t,n){var r=n.getTokenNetworkContract,a=n.config$;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Ct)),Object(xr["a"])(t,a),Object(Xe["a"])((function(e){var t=Kr(e,3),n=t[0],a=t[1],o=t[2],i=r(n.meta.tokenNetwork),c=Object(h["get"])(a.channels,[n.meta.tokenNetwork,n.meta.partner,"state"]);return c!==H.opening?Object(vr["a"])(Nt(new Error("Invalid channel state: ".concat(c)),n.meta)):Object(Me["a"])(i.functions.openChannel(a.address,n.meta.partner,n.payload.settleTimeout||o.settleTimeout)).pipe(Object(Xe["a"])((function(e){return Jr(Zr,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('openChannel transaction "'.concat(n.hash,'" failed'));return n.hash})),Object(Sr["a"])(He["a"]),Object(jr["a"])((function(e){return Object(vr["a"])(Nt(e,n.meta))})))})))},ia=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Pt)),Object(xr["a"])(t),Object(ze["a"])((function(e){var t=Kr(e,2),n=t[0],r=t[1],a=Object(h["get"])(r.channels,[n.meta.tokenNetwork,n.meta.partner]);return!!a&&a.state===H.open})),Object(Ve["a"])((function(e){var t=Kr(e,1),n=t[0];return Tt({id:n.payload.id,fromBlock:n.payload.openBlock},n.meta)})))},ca=function(e,t,n){var r=n.address,a=n.getTokenContract,o=n.getTokenNetworkContract;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Rt)),Object(xr["a"])(t),Object(Xe["a"])((function(e){var n=Kr(e,2),i=n[0],c=n[1],s=Object(h["findKey"])(c.tokens,(function(e){return e===i.meta.tokenNetwork}));if(!s){var u=new Error('token for tokenNetwork "'.concat(i.meta.tokenNetwork,'" not found'));return Object(vr["a"])(Dt(u,i.meta))}var p=a(s),l=o(i.meta.tokenNetwork),f=Object(h["get"])(c.channels,[i.meta.tokenNetwork,i.meta.partner]);if(!f||f.state!==H.open||void 0===f.id){var d=new Error('channel for "'.concat(i.meta.tokenNetwork,'" and "').concat(i.meta.partner,"\" not found or not in 'open' state"));return Object(vr["a"])(Dt(d,i.meta))}var b=f.id;return Object(Me["a"])(p.functions.approve(i.meta.tokenNetwork,i.payload.deposit)).pipe(Object(Cr["a"])((function(e){return console.log('sent approve tx "'.concat(e.hash,'" to "').concat(s,'"'))})),Object(Xe["a"])((function(e){return Jr(Zr,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('token "'.concat(s,'" approve transaction "').concat(n.hash,'" failed'));return n.hash})),Object(Cr["a"])((function(e){return console.log('approve tx "'.concat(e,'" successfuly mined!'))}))).pipe(Object(xr["a"])(t),Object(Xe["a"])((function(e){var t=Kr(e,2),n=t[1];return(l.functions.setTotalDeposit(b,r,n.channels[i.meta.tokenNetwork][i.meta.partner].own.deposit.add(i.payload.deposit),i.meta.partner,{gasLimit:1e5}))})),Object(Cr["a"])((function(e){return console.log('sent setTotalDeposit tx "'.concat(e.hash,'" to "').concat(i.meta.tokenNetwork,'"'))})),Object(Xe["a"])((function(e){return Jr(Zr,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(i.meta.tokenNetwork,'" setTotalDeposit transaction "').concat(n.hash,'" failed'));return n.hash})),Object(Cr["a"])((function(e){return console.log('setTotalDeposit tx "'.concat(e,'" successfuly mined!'))})),Object(Sr["a"])(He["a"]),Object(jr["a"])((function(e){return Object(vr["a"])(Dt(e,i.meta))})))})))},sa=function(e,t,n){var r=n.address,a=n.network,o=n.getTokenNetworkContract,i=n.signer;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Mt)),Object(xr["a"])(t),Object(Xe["a"])((function(e){var t=Kr(e,2),n=t[0],c=t[1],s=o(n.meta.tokenNetwork),u=Object(h["get"])(c.channels,[n.meta.tokenNetwork,n.meta.partner]);if(!u||u.state!==H.open&&u.state!==H.closing||!u.id){var p=new Error('channel for "'.concat(n.meta.tokenNetwork,'" and "').concat(n.meta.partner,"\" not found or not in 'open' or 'closing' state"));return Object(vr["a"])(Lt(p,n.meta))}var l=u.id,f=d["HashZero"],m=d["Zero"],y=d["HashZero"],v=Object(b["hexlify"])(xe),O=Object(b["concat"])([L(n.meta.tokenNetwork,20),L(a.chainId,32),L(1,32),L(l,32),L(f,32),L(m,32),L(y,32),L(v,65)]);return Object(Me["a"])(i.signMessage(O)).pipe(Object(Xe["a"])((function(e){return s.functions.closeChannel(l,n.meta.partner,r,f,m,y,v,e)})),Object(Cr["a"])((function(e){return console.log('sent closeChannel tx "'.concat(e.hash,'" to "').concat(n.meta.tokenNetwork,'"'))})),Object(Xe["a"])((function(e){return Jr(Zr,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=e.receipt,r=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(n.meta.tokenNetwork,'" closeChannel transaction "').concat(r.hash,'" failed'));return console.log('closeChannel tx "'.concat(r.hash,'" successfuly mined!')),r.hash})),Object(Sr["a"])(He["a"]),Object(jr["a"])((function(e){return Object(vr["a"])(Lt(e,n.meta))})))})))},ua=function(e,t,n){var r=n.address,a=n.getTokenNetworkContract;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])($t)),Object(xr["a"])(t),Object(Xe["a"])((function(e){var t=Kr(e,2),n=t[0],o=t[1],i=a(n.meta.tokenNetwork),c=Object(h["get"])(o.channels,[n.meta.tokenNetwork,n.meta.partner]);if(!c||c.state!==H.settleable&&c.state!==H.settling||!c.id){var s=new Error('channel for "'.concat(n.meta.tokenNetwork,'" and "').concat(n.meta.partner,"\" not found or not in 'settleable' or 'settling' state"));return Object(vr["a"])(Vt(s,n.meta))}var u=c.id,p={transferredAmount:d["Zero"],lockedAmount:d["Zero"],locksroot:d["HashZero"]},l=Object.assign({address:n.meta.partner},c.partner.balanceProof||p),f=Object.assign({address:r},c.own.balanceProof||p);if(c.isFirstParticipant){var b=[f,l];l=b[0],f=b[1]}return Object(Me["a"])(i.functions.settleChannel(u,l.address,l.transferredAmount,l.lockedAmount,l.locksroot,f.address,f.transferredAmount,f.lockedAmount,f.locksroot)).pipe(Object(Cr["a"])((function(e){return console.log('sent settleChannel tx "'.concat(e.hash,'" to "').concat(n.meta.tokenNetwork,'"'))})),Object(Xe["a"])((function(e){return Jr(Zr,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=e.receipt,r=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(n.meta.tokenNetwork,'" settleChannel transaction "').concat(r.hash,'" failed'));return console.log('settleChannel tx "'.concat(r.hash,'" successfuly mined!')),r.hash})),Object(Sr["a"])(He["a"]),Object(jr["a"])((function(e){return Object(vr["a"])(Vt(e,n.meta))})))})))},pa=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(At)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Kr(t,2),r=n[0].payload.blockNumber,a=n[1],e.t0=Ae.a.keys(a.channels);case 2:if((e.t1=e.t0()).done){e.next=15;break}o=e.t1.value,e.t2=Ae.a.keys(a.channels[o]);case 5:if((e.t3=e.t2()).done){e.next=13;break}if(i=e.t3.value,c=a.channels[o][i],!(c.state===H.closed&&c.settleTimeout&&c.closeBlock&&r>c.closeBlock+c.settleTimeout)){e.next=11;break}return e.next=11,Ut({settleableBlock:r},{tokenNetwork:o,partner:i});case 11:e.next=5;break;case 13:e.next=2;break;case 15:case"end":return e.stop()}}),e)}))))},la=n("9e2e"),fa=n("9000"),da=n("8914"),ba=n("7186"),ma=n("9b90"),ha=n("8de5"),ya=n("c363"),va=n("f494"),Oa=n("e2a1"),ka=n("09b6"),ja=n("0c33"),wa=n("0d2a"),ga=n("183d"),_a=n("fc5d");function xa(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Ea(e,t){var n=e;return n.includes("://")||(n="https://".concat(n)),n+="/_matrix/client/versions",Object($e["a"])((function(){var r=Date.now();return Object(wa["fromFetch"])(n).pipe(Object(Ve["a"])((function(e){return e.ok?Date.now():NaN})),Object(ba["a"])(t||Number.MAX_SAFE_INTEGER),Object(jr["a"])((function(){return Object(vr["a"])(NaN)})),Object(Ve["a"])((function(e){return e-r})),Object(Ve["a"])((function(t){return{server:e,rtt:t}})))}))}function Aa(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function Sa(e,t){var n=Object(_a["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}function Ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Na(e,t,n){return t&&Pa(e.prototype,t),n&&Pa(e,n),e}var Ta=function(){function e(t){Ca(this,e),this.values=new Map,this.max=t}return Na(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}(),Ra=n("f079");function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da=Object(h["memoize"])((function(e){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Xt)),Object(Ke["a"])((function(e,t){return Object.assign({},e,Ia({},t.meta.address,t))}),{}),Object(Ra["a"])(),Object(ja["a"])({}))}));function Fa(e){return[e.discoveryRoom,e.pfsRoom].filter((function(e){return!!e}))}var Ma=Object(h["curry"])((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function Ba(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(Ma(t))),n?Object(vr["a"])(n):Object(fa["a"])(e,"Room").pipe(Object(ze["a"])(Ma(t)),Object(ya["a"])(1))}function La(e){return Ha(e)||$a(e)||Ua()}function Ua(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function $a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Ha(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Va(e,t){return Za(e)||qa(e,t)||Wa()}function Wa(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function qa(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Za(e){if(Array.isArray(e))return e}function Ka(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var za=["online","unavailable"],Ga=/^@(0x[0-9a-f]{40})[.:]/i,Xa=function(e,t,n){Ka(e);var r=n.address,a=n.signer,o=n.matrix$,i=n.config$;return t.pipe(Object(Ge["a"])(),Object(xr["a"])(i),Object(Xe["a"])((function(e){var t=Va(e,2),n=t[0],r=t[1],a=r.matrixServer,o=r.matrixServerLookup,i=r.httpTimeout,c=Object(h["get"])(n,["transport","matrix","server"]),s=Object(h["get"])(n,["transport","matrix","setup"]);return!c||a&&a!==c?a?Object(vr["a"])({server:a,setup:void 0}):Object(wa["fromFetch"])(o).pipe(Object(Xe["a"])((function(e){return e.ok?e.text():Object(la["a"])(new Error('Could not fetch server list from "'.concat(o,'" => ').concat(e.status)))})),Object(ba["a"])(i),Object(Xe["a"])((function(e){return Object(Me["a"])(xa(e))})),Object(Xe["a"])((function(e){return Ea(e,i)})),Object(ma["a"])(),Object(Ve["a"])((function(e){return Object(h["sortBy"])(e,["rtt"])})),Object(Ve["a"])((function(e){if(!e[0]||"number"!==typeof e[0].rtt||isNaN(e[0].rtt))throw new Error("Could not contact any matrix servers: ".concat(JSON.stringify(e)));return e[0].server})),Object(Ve["a"])((function(e){return{server:e.includes("://")?e:"https://".concat(e),setup:void 0}}))):Object(vr["a"])({server:c,setup:s})})),Object(Xe["a"])((function(e){var t=e.server,n=e.setup,o=n||{},i=o.userId,c=o.accessToken,s=o.deviceId;if(n){var u=Object(ga["createClient"])({baseUrl:t,userId:i,accessToken:c,deviceId:s});return Object(vr["a"])({matrix:u,server:t,setup:n})}var p=Aa(t);if(!p)return Object(la["a"])(new Error('Could not get serverName from "'.concat(t,'"')));var l=Object(ga["createClient"])({baseUrl:t}),f=r.toLowerCase();return i="@".concat(f,":").concat(p),Object(Me["a"])(a.signMessage(p)).pipe(Object(Xe["a"])((function(e){return Object(Me["a"])(l.loginWithPassword(f,e)).pipe(Object(jr["a"])((function(){return Object(Me["a"])(l.register(f,e))})))})),Object(Cr["a"])((function(e){l.deviceId=e.device_id,l._http.opts.accessToken=e.access_token,l.credentials={userId:e.user_id},c=e.access_token,s=e.device_id})),Object(Xe["a"])((function(){return a.signMessage(i)})),Object(Ve["a"])((function(e){return{matrix:l,server:t,setup:{userId:i,accessToken:c,deviceId:s,displayName:e}}})))})),Object(xr["a"])(i),Object(Xe["a"])((function(e){var t=Va(e,2),n=t[0],r=n.matrix,a=n.server,o=n.setup,i=t[1];return(Object(Me["a"])(r.setDisplayName(o.displayName)).pipe(Object(Xe["a"])((function(){return Ue["a"].apply(void 0,La(Fa(i).map((function(e){return Object(Me["a"])(r.joinRoom("#".concat(e,":").concat(Aa(a))))}))))})),Object(ma["a"])(),Object(ha["a"])({matrix:r,server:a,setup:o})))})),Object(Xe["a"])((function(e){var n=e.matrix,r=e.server,a=e.setup;return Object(Ue["a"])(t.pipe(Object(We["a"])("transport","matrix","server"),Object(ze["a"])((function(e){return!!e})),Object(ya["a"])(1),Object(Cr["a"])((function(){o.next(n),o.complete()})),Object(_r["a"])((function(){return o})),Object(va["a"])(1e3),Object(Xe["a"])((function(e){return e.startClient({initialSyncLimit:0})})),Object(Oa["a"])()),Object(vr["a"])(zt({server:r,setup:a})))})))},Ya=function(e,t,n){Ka(t);var r=n.matrix$;return r.pipe(Object(Xe["a"])((function(t){return e.pipe(Object(ka["a"])((function(){return t.stopClient()})))})),Object(Oa["a"])())},Ja=function(e,t,n){Ka(t);var r=n.matrix$;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Gt)),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(xr["a"])(Da(e)),Object(Xe["a"])((function(e){var t=Va(e,2),n=t[0],r=n.action,a=n.matrix,o=t[1];if(r.meta.address in o)return Object(vr["a"])(o[r.meta.address]);var i=[],c=!0,s=!1,u=void 0;try{for(var p,l=a.getUsers()[Symbol.iterator]();!(c=(p=l.next()).done);c=!0){var f=p.value;if(f.displayName&&f.presence){var d=void 0;try{var m=Ga.exec(f.userId);if(!m||Object(b["getAddress"])(m[1])!==r.meta.address)continue;if(d=Object(b["verifyMessage"])(f.userId,f.displayName),!d||d!==r.meta.address)continue}catch(v){continue}i.push(f)}}}catch(v){s=!0,u=v}finally{try{c||null==l.return||l.return()}finally{if(s)throw u}}if(i.length>0){var y=Object(h["minBy"])(i,"lastPresenceTs");return Object(vr["a"])(Xt({userId:y.userId,available:za.includes(y.presence)},r.meta))}return Object(Me["a"])(a.searchUserDirectory({term:r.meta.address.toLowerCase()})).pipe(Object(Xe["a"])(Ae.a.mark((function e(t){var n,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.results,a=!0,o=!1,i=void 0,e.prev=4,c=n[Symbol.iterator]();case 6:if(a=(s=c.next()).done){e.next=27;break}if(u=s.value,u.display_name){e.next=10;break}return e.abrupt("continue",24);case 10:if(e.prev=10,p=Ga.exec(u.user_id),p&&Object(b["getAddress"])(p[1])===r.meta.address){e.next=14;break}return e.abrupt("continue",24);case 14:if(l=Object(b["verifyMessage"])(u.user_id,u.display_name),l&&l===r.meta.address){e.next=17;break}return e.abrupt("continue",24);case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e["catch"](10),e.abrupt("continue",24);case 22:return e.next=24,u.user_id;case 24:a=!0,e.next=6;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e["catch"](4),o=!0,i=e.t1;case 33:e.prev=33,e.prev=34,a||null==c.return||c.return();case 36:if(e.prev=36,!o){e.next=39;break}throw i;case 39:return e.finish(36);case 40:return e.finish(33);case 41:case"end":return e.stop()}}),e,null,[[4,29,33,41],[10,19],[34,,36,40]])}))),Object(Xe["a"])((function(e){return Sa(a,e).then((function(t){return Object.assign({},t,{user_id:e})})).catch((function(t){return console.log("Error fetching user presence, ignoring:",t),{presence:"",user_id:e}}))})),Object(ze["a"])((function(e){return!!e&&!!e.presence})),Object(ma["a"])(),Object(Ve["a"])((function(e){if(!e.length)throw new Error("Could not find any user with valid signature for ".concat(r.meta.address));return Object(h["minBy"])(e,"last_active_ago")})),Object(Ve["a"])((function(e){var t=e.presence,n=e.user_id;return Xt({userId:n,available:za.includes(t)},r.meta)})),Object(jr["a"])((function(e){return Object(vr["a"])(Yt(e,r.meta))})))})))},Qa=function(e,t,n){Ka(t);var r=n.matrix$;return r.pipe(Object(_r["a"])((function(e){return Object(fa["a"])(e,"event").pipe(Object(Ve["a"])((function(t){return{event:t,matrix:e}})))})),Object(ze["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(Ve["a"])((function(e){var t=e.event,n=e.matrix,r=n.getUser(t.getSender()),a=Ga.exec(r.userId),o=a&&a[1];return{user:r,matrix:n,peerAddress:o&&Object(b["getAddress"])(o)}})),Object(ze["a"])((function(e){var t=e.user,n=e.peerAddress;return!(!t.presence||!n)})),Object(xr["a"])(e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Gt)),Object(Ke["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(ja["a"])(new Set)),Da(e)),Object(ze["a"])((function(e){var t=Va(e,2),n=t[0].peerAddress,r=t[1];return r.has(n)})),Object(Xe["a"])((function(e){var t=Va(e,3),n=t[0],r=n.user,a=n.matrix,o=n.peerAddress,i=t[2],c=r.userId,s=o,u=r.presence,p=za.includes(u);if(s in i&&i[s].payload.userId===c&&i[s].payload.available===p)return He["a"];var l=r.displayName?Object(vr["a"])(r.displayName):Object(Me["a"])(a.getProfileInfo(c,"displayname")).pipe(Object(Ve["a"])((function(e){return e.displayname})),Object(jr["a"])((function(){return Object(vr["a"])(void 0)})));return l.pipe(Object(Ve["a"])((function(e){if(!e)throw new Error('Could not get displayName of "'.concat(c,'"'));var t=Object(b["verifyMessage"])(c,e);if(!t||t!==o)throw new Error('Could not verify displayName signature of "'.concat(c,'": got "').concat(t,'"'));return t})),Object(Ve["a"])((function(e){return Xt({userId:c,available:p,ts:r.lastPresenceTs},{address:e})})))})),Object(jr["a"])((function(e){return console.log("Error validating presence event, ignoring",e),He["a"]})))},eo=function(e,t,n){var r=n.matrix$;return Object(Tr["a"])(Da(e),t).pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(rr)),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(Ze["a"])((function(e){var n=e.action,r=e.matrix;return(t.pipe(Object(ze["a"])((function(e){var t=Va(e,1),r=t[0];return n.meta.address in r})),Object(ya["a"])(1),Object(ze["a"])((function(e){var t=Va(e,2),r=t[1];return!Object(h["get"])(r,["transport","matrix","rooms",n.meta.address,0])})),Object(Xe["a"])((function(e){var t=Va(e,1),a=t[0];return r.createRoom({visibility:"private",invite:[a[n.meta.address].payload.userId]})})),Object(Ve["a"])((function(e){var t=e.room_id;return Jt({roomId:t},n.meta)}))))})))})))},to=function(e,t,n){var r=n.matrix$;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Xt)),Object(ze["a"])((function(e){return e.payload.available})),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(xr["a"])(t),Object(Xe["a"])((function(e){var t=Va(e,2),n=t[0],r=n.action,a=n.matrix,o=t[1],i=Object(h["get"])(o,["transport","matrix","rooms",r.meta.address,0]);if(i){var c=a.getRoom(i);if(c){var s=c.getMember(r.payload.userId);if(!s)return Object(Me["a"])(a.invite(i,r.payload.userId))}}return He["a"]})),Object(Oa["a"])())},no=function(e,t,n){Ka(t);var r=n.matrix$;return r.pipe(Object(_r["a"])((function(e){return Object(fa["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(ze["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(xr["a"])(Da(e)),Object(Xe["a"])((function(t){var n=Va(t,2),r=n[0],a=r.event,o=r.member,i=r.matrix,c=n[1],s=a.getSender(),u=Object(h["find"])(c,(function(e){return e.payload.userId===s})),p=u?Object(vr["a"])(u):e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Xt)),Object(ze["a"])((function(e){return e.payload.userId===s})),Object(ya["a"])(1),Object(kr["a"])(Object(da["a"])(3e4)));return p.pipe(Object(Ve["a"])((function(e){return{matrix:i,member:o,senderPresence:e}})))})),Object(Xe["a"])((function(e){var t=e.matrix,n=e.member,r=e.senderPresence;return(Object(Me["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Ve["a"])((function(){return Jt({roomId:n.roomId},{address:r.meta.address})}))))})))},ro=function(e,t,n){var r=n.matrix$,a=n.config$;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Jt)),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(xr["a"])(t,a),Object(Xe["a"])((function(e){var t=Va(e,3),n=t[0],r=n.action,a=n.matrix,o=t[1],i=t[2].matrixExcessRooms,c=o.transport.matrix.rooms[r.meta.address];return Object(Me["a"])(c.filter((function(e,t){return Ka(e),t>=i}))).pipe(Object(Xe["a"])((function(e){return a.leave(e).then((function(){return e}))})),Object(Ve["a"])((function(e){return Qt({roomId:e},r.meta)})))})))},ao=function(e,t,n){Ka(e);var r=n.matrix$,a=n.config$;return r.pipe(Object(_r["a"])((function(e){return Object(fa["a"])(e,"Room").pipe(Object(Ve["a"])((function(t){return{matrix:e,roomId:t.roomId}})))})),Object(va["a"])(18e4),Object(xr["a"])(t,a),Object(ze["a"])((function(e){var t=Va(e,3),n=t[0],r=n.matrix,a=n.roomId,o=t[1],i=t[2],c=r.getRoom(a);if(!c)return!1;var s=Fa(i);if(c.name&&s.some((function(e){return c.name.match("#".concat(e,":"))})))return!1;var u=Object(h["get"])(o,["transport","matrix","rooms"],{});for(var p in u){var l=!0,f=!1,d=void 0;try{for(var b,m=u[p][Symbol.iterator]();!(l=(b=m.next()).done);l=!0){var y=b.value;if(y===c.roomId)return!1}}catch(v){f=!0,d=v}finally{try{l||null==m.return||m.return()}finally{if(f)throw d}}}return!0})),Object(Xe["a"])((function(e){var t=Va(e,1),n=t[0],r=n.matrix,a=n.roomId;return r.leave(a)})),Object(Oa["a"])())},oo=function(e,t,n){Ka(e);var r=n.matrix$;return r.pipe(Object(_r["a"])((function(e){return Object(fa["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(ze["a"])((function(e){var t=e.membership;return"leave"===t})),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l,f;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Va(t,2),r=n[0].room,a=n[1],o=Object(h["get"])(a,["transport","matrix","rooms"],{}),e.t0=Ae.a.keys(o);case 3:if((e.t1=e.t0()).done){e.next=34;break}i=e.t1.value,c=!0,s=!1,u=void 0,e.prev=8,p=o[i][Symbol.iterator]();case 10:if(c=(l=p.next()).done){e.next=18;break}if(f=l.value,f!==r.roomId){e.next=15;break}return e.next=15,Qt({roomId:f},{address:i});case 15:c=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t2=e["catch"](8),s=!0,u=e.t2;case 24:e.prev=24,e.prev=25,c||null==p.return||p.return();case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:e.next=3;break;case 34:case"end":return e.stop()}}),e,null,[[8,20,24,32],[25,,27,31]])}))))},io=function(e,t,n){var r=n.matrix$;return Object(Tr["a"])(Da(e),t).pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(rr)),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(Er["a"])((function(e){var t=e.action;return t.meta.address})),Object(Xe["a"])((function(e){return e.pipe(Object(Ze["a"])((function(e){var n=e.action,r=e.matrix;return t.pipe(Object(ze["a"])((function(e){var t=Va(e,2),r=t[0],a=t[1];return n.meta.address in r&&r[n.meta.address].payload.available&&Object(h["get"])(a,["transport","matrix","rooms",n.meta.address,0])})),Object(Ve["a"])((function(e){var t=Va(e,2),r=t[1];return r.transport.matrix.rooms[n.meta.address][0]})),Object(qe["a"])(),Object(_r["a"])((function(e){return Ba(r,e)})),Object(xr["a"])(t),Object(Xe["a"])((function(e){var a=Va(e,2),o=a[0],i=Va(a[1],1),c=i[0],s=c[n.meta.address].payload.userId,u=o.getMember(s);return u&&"join"===u.membership?Object(vr["a"])(u):Object(fa["a"])(r,"RoomMember.membership",(function(e,t){return Ka(e),t})).pipe(Object(xr["a"])(t),Object(ze["a"])((function(e){var t=Va(e,2),r=t[0],a=Va(t[1],1),i=a[0];return r.roomId===o.roomId&&r.userId===i[n.meta.address].payload.userId&&"join"===r.membership})),Object(ya["a"])(1),Object(Ve["a"])((function(e){var t=Va(e,1),n=t[0];return n})))})),Object(ya["a"])(1),Object(Xe["a"])((function(e){var t="string"===typeof n.payload.message?n.payload.message:Cn(n.payload.message);return r.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Ve["a"])((function(){return ar(n.payload,n.meta)})))})))})))})))},co=function(e,t,n){Ka(t);var r=n.matrix$,a=n.config$;return(e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(or)),Object(Xe["a"])((function(e){return r.pipe(Object(Ve["a"])((function(t){return{action:e,matrix:t}})))})),Object(xr["a"])(a),Object(Xe["a"])((function(e){var t=Va(e,2),n=t[0],r=n.action,a=n.matrix,o=t[1],i=Fa(o);if(!i.includes(r.meta.roomName))return console.warn("messageGlobalSend for unknown global room, ignoring",r.meta.roomName,i),He["a"];var c=Aa(a.baseUrl),s="#".concat(r.meta.roomName,":").concat(c);return Ba(a,s).pipe(Object(Xe["a"])((function(e){var t="string"===typeof r.payload.message?r.payload.message:Cn(r.payload.message);return a.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})))})),Object(Oa["a"])()))},so=function(e,t,n){var r=n.matrix$,a=n.config$;return Object(Tr["a"])(Da(e),t).pipe(Object(gr["a"])(1,void 0,(function(e){return r.pipe(Object(_r["a"])((function(e){return Object(fa["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(xr["a"])(a),Object(ze["a"])((function(e){var t=Va(e,2),n=t[0],r=n.matrix,a=n.event,o=n.room,i=t[1];return"m.room.message"===a.getType()&&"m.text"===a.event.content.msgtype&&a.getSender()!==r.getUserId()&&!Fa(i).some((function(e){return Ma("#".concat(e,":").concat(Aa(r.getHomeserverUrl())),o)}))})),Object(Xe["a"])((function(t){var n=Va(t,1),r=n[0],a=r.event,o=r.room;return e.pipe(Object(ze["a"])((function(e){var t=Va(e,2),n=t[0],r=t[1],i=Object(h["find"])(n,["payload.userId",a.getSender()]);if(!i)return!1;var c=Object(h["get"])(r,["transport","matrix","rooms",i.meta.address],[]);return!!c.includes(o.roomId)})),Object(ya["a"])(1),Object(kr["a"])(Object(da["a"])(3e4)),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,i,c,s,u,p,l,f,d,b;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Va(t,1),r=n[0],i=Object(h["find"])(r,["payload.userId",a.getSender()]),c=!0,s=!1,u=void 0,e.prev=5,p=(a.event.content.body||"").split("\n")[Symbol.iterator]();case 7:if(c=(l=p.next()).done){e.next=26;break}if(f=l.value,d=void 0,e.prev=10,d=Pn(f),b=An(d),b===i.meta.address){e.next=15;break}throw new Error("Signature mismatch: sender=".concat(i.meta.address," != signer=").concat(b));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](10),console.warn("Could not decode message: ".concat(f,": ").concat(e.t0)),d=void 0;case 21:return e.next=23,ir({text:f,message:d,ts:a.event.origin_server_ts,userId:i.payload.userId,roomId:o.roomId},i.meta);case 23:c=!0,e.next=7;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e["catch"](5),s=!0,u=e.t1;case 32:e.prev=32,e.prev=33,c||null==p.return||p.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(32);case 40:case"end":return e.stop()}}),e,null,[[5,28,32,40],[10,17],[33,,35,39]])}))))})))})))},uo=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(ze["a"])((function(e){var t=Va(e,2),n=t[0],r=t[1],a=Object(h["get"])(r,["transport","matrix","rooms",n.meta.address],[]);return!!n.payload.roomId&&a.includes(n.payload.roomId)&&a[0]!==n.payload.roomId})),Object(Ve["a"])((function(e){var t=Va(e,1),n=t[0];return Jt({roomId:n.payload.roomId},n.meta)})))},po=function(e){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Tt)),Object(Ve["a"])((function(e){return Gt(void 0,{address:e.meta.partner})})))},lo=function(e,t,n){Ka(t);var r=n.signer,a=new Ta(32);return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(Ze["a"])((function(e){var t=e.payload.message;if(!t||!(he(J).is(t)||he(Q).is(t)||he(ee).is(t)))return He["a"];var n=t.message_identifier,o=n.toString(),i=a.get(o);if(i)return Object(vr["a"])(rr({message:i},e.meta));var c={type:q.DELIVERED,delivered_message_identifier:n};return Object(Me["a"])(Nn(r,c)).pipe(Object(Cr["a"])((function(e){return a.put(o,e)})),Object(Ve["a"])((function(t){return rr({message:t},e.meta)})))})))},fo=n("f412");function bo(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function mo(e){return vo(e)||yo(e)||ho()}function ho(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function yo(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function vo(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Oo(e,t){return wo(e)||jo(e,t)||ko()}function ko(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function jo(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wo(e){if(Array.isArray(e))return e}function go(e){return e?e.nonce.add(1):d["One"]}function _o(e,t,n){var r=n.network,a=n.address,o=n.signer,i=n.config$;return Object(Tr["a"])(e,i).pipe(Object(Ge["a"])(),Object(Xe["a"])((function(e){var n=Oo(e,2),i=n[0],c=n[1].revealTimeout;if(t.meta.secrethash in i.sent)return console.error("transfer already present",t.meta),He["a"];var s={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},u=t.payload.paths[0].fee,p=t.payload.paths[0].path[0],l=i.channels[t.payload.tokenNetwork][p];if(!l||l.state!==H.open)throw new Error("not open");var f={amount:t.payload.value.add(u),expiration:Object(b["bigNumberify"])(i.blockNumber+2*c),secrethash:t.meta.secrethash},m=[].concat(mo(l.own.locks||[]),[f]),y=fn(m),v=Object(h["findKey"])(i.tokens,(function(e){return e===t.payload.tokenNetwork}));console.log("Signing transfer of value",t.payload.value.toString(),"of token",v,", to",t.payload.target,", through routes",t.payload.paths,", paying",u.toString(),"in fees.");var O={type:q.LOCKED_TRANSFER,message_identifier:hn(),chain_id:Object(b["bigNumberify"])(r.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(b["bigNumberify"])(l.id),nonce:go(l.own.balanceProof),transferred_amount:l.own.balanceProof?l.own.balanceProof.transferredAmount:d["Zero"],locked_amount:(l.own.balanceProof?l.own.balanceProof.lockedAmount:d["Zero"]).add(f.amount),locksroot:y,payment_identifier:t.payload.paymentId,token:v,recipient:p,lock:f,target:t.payload.target,initiator:a,fee:d["Zero"],metadata:s};return Object(Me["a"])(Nn(o,O)).pipe(Object(Xe["a"])(Ae.a.mark((function e(n){return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.payload.secret){e.next=3;break}return e.next=3,Dn({secret:t.payload.secret},t.meta);case 3:return e.next=5,Rn({message:n,fee:u},t.meta);case 5:case"end":return e.stop()}}),e)}))))})),Object(jr["a"])((function(e){return Object(vr["a"])(Kn(e,t.meta))})))}function xo(e,t,n){var r=n.signer;return e.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(n){var a=t.meta.secrethash;if(!(a in n.sent))throw new Error("unknown transfer");var o,i=n.sent[a].transfer[1],c=Object(h["get"])(n.channels,[i.token_network_address,i.recipient]);if(!c||c.state!==H.open||!c.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");if(n.sent[a].unlock)o=Object(vr["a"])(n.sent[a].unlock[1]);else{if(i.lock.expiration.lte(n.blockNumber))throw new Error("lock expired");var s=(c.own.locks||[]).filter((function(e){return e.secrethash!==a})),u=fn(s),p={type:q.UNLOCK,message_identifier:hn(),chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,nonce:go(c.own.balanceProof),transferred_amount:c.own.balanceProof.transferredAmount.add(i.lock.amount),locked_amount:c.own.balanceProof.lockedAmount.sub(i.lock.amount),locksroot:u,payment_identifier:i.payment_identifier,secret:n.secrets[t.meta.secrethash].secret};o=Object(Me["a"])(Nn(r,p))}return o.pipe(Object(xr["a"])(e),Object(Xe["a"])(Ae.a.mark((function e(n){var r,o,c;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Oo(n,2),o=r[0],c=r[1],!i.lock.expiration.lte(c.blockNumber)){e.next=3;break}throw new Error("lock expired!");case 3:if(!c.sent[a].channelClosed){e.next=5;break}throw new Error("channel closed!");case 5:return e.next=7,Ln({message:o},t.meta);case 7:case"end":return e.stop()}}),e)}))))})),Object(jr["a"])((function(e){return console.error("Error when trying to unlock after SecretReveal",e),He["a"]})))}function Eo(e,t,n){var r=n.signer;return e.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(e){var n=t.meta.secrethash;if(!(n in e.sent))throw new Error("unknown transfer");var a,o=e.sent[n].transfer[1],i=Object(h["get"])(e.channels,[o.token_network_address,o.recipient]);if(!i||i.state!==H.open||!i.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");if(e.sent[n].lockExpired)a=Object(vr["a"])(e.sent[n].lockExpired[1]);else{if(o.lock.expiration.gte(e.blockNumber))throw new Error("lock not yet expired");if(e.sent[n].unlock)throw new Error("transfer already unlocked");var c=(i.own.locks||[]).filter((function(e){return e.secrethash!==n})),s=fn(c),u={type:q.LOCK_EXPIRED,message_identifier:hn(),chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,nonce:go(i.own.balanceProof),transferred_amount:i.own.balanceProof.transferredAmount,locked_amount:i.own.balanceProof.lockedAmount.sub(o.lock.amount),locksroot:s,recipient:o.recipient,secrethash:n};a=Object(Me["a"])(Nn(r,u))}return a.pipe(Object(Ve["a"])((function(e){return Hn({message:e},t.meta)})))})),Object(jr["a"])((function(e){return Object(vr["a"])(Vn(e,t.meta))})))}function Ao(e,t,n,r){var a=n.signer;return e.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(e){var n,o=t.payload.message,i=Object(h["get"])(e.channels,[t.meta.tokenNetwork,t.meta.partner]);if(!i||i.state!==H.open||!o.channel_identifier.eq(i.id))throw new Error("channel gone or not open");if(o.expiration.lte(e.blockNumber))throw new Error("WithdrawRequest expired");if(o.total_withdraw.gt(i.partner.deposit.add(i.own.balanceProof?i.own.balanceProof.transferredAmount:d["Zero"])))throw new Error("invalid total_withdraw, greater than partner.deposit + own.transferredAmount");var c=o.message_identifier.toString(),s=r.get(c);if(s&&s.chain_id.eq(o.chain_id)&&s.token_network_address===o.token_network_address&&s.channel_identifier.eq(o.channel_identifier)&&s.participant===o.participant&&s.total_withdraw.eq(o.total_withdraw)&&s.expiration.eq(o.expiration))n=Object(vr["a"])(s);else{var u={type:q.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:go(i.own.balanceProof),expiration:o.expiration};n=Object(Me["a"])(Nn(a,u)).pipe(Object(Cr["a"])((function(e){return r.put(c,e)})))}return n.pipe(Object(Ve["a"])((function(e){return Xn({message:e},t.meta)})))})),Object(jr["a"])((function(e){return console.error("Error trying to handle WithdrawRequest, ignoring:",e),He["a"]})))}var So=function(e,t,n){return t.pipe(Object(gr["a"])(1,void 0,(function(t){var r=new Ta(32);return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Tn,Bn,$n,Gn])),Object(Ze["a"])((function(e){return Object(Re["isActionOf"])(Tn,e)?_o(t,e,n):Object(Re["isActionOf"])(Bn,e)?xo(t,e,n):Object(Re["isActionOf"])($n,e)?Eo(t,e,n):Ao(t,e,n,r)})))})))},Co=function(e,t){return t.pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Rn)),Object(Xe["a"])((function(n){var r=n.meta.secrethash,a=n.payload.message,o=rr({message:a},{address:a.recipient}),i=Object(Ue["a"])(Object(vr["a"])(o),e.pipe(Object(ze["a"])((function(e){return Object(Re["isActionOf"])(ar,e)&&e.payload.message===o.payload.message&&e.meta.address===o.meta.address})),Object(ya["a"])(1),Object(Oa["a"])()));return i.pipe(Object(fo["a"])((function(e){return e.pipe(Object(va["a"])(3e4))})),Object(kr["a"])(t.pipe(Object(ze["a"])((function(e){return!!e.sent[r].transferProcessed||!!e.sent[r].unlockProcessed||!!e.sent[r].lockExpiredProcessed||!!e.sent[r].channelClosed})))))})))})))},Po=function(e,t){return t.pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Ln)),Object(xr["a"])(t),Object(Xe["a"])((function(n){var r=Oo(n,2),a=r[0],o=r[1],i=a.meta.secrethash;if(!(i in o.sent))return He["a"];var c=a.payload.message,s=o.sent[i].transfer[1],u=rr({message:c},{address:s.recipient}),p=Object(Ue["a"])(Object(vr["a"])(u),e.pipe(Object(ze["a"])((function(e){return Object(Re["isActionOf"])(ar,e)&&e.payload.message===u.payload.message&&e.meta.address===u.meta.address})),Object(ya["a"])(1),Object(Oa["a"])()));return p.pipe(Object(fo["a"])((function(e){return e.pipe(Object(va["a"])(3e4))})),Object(kr["a"])(t.pipe(Object(ze["a"])((function(e){return!!e.sent[i].unlockProcessed||!!e.sent[i].channelClosed})))))})))})))},No=function(e,t){return t.pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Hn)),Object(xr["a"])(t),Object(Xe["a"])((function(n){var r=Oo(n,2),a=r[0],o=r[1],i=a.meta.secrethash;if(!(i in o.sent))return He["a"];var c=a.payload.message,s=rr({message:c},{address:o.sent[i].transfer[1].recipient}),u=Object(Ue["a"])(Object(vr["a"])(s),e.pipe(Object(ze["a"])((function(e){return Object(Re["isActionOf"])(ar,e)&&e.payload.message===s.payload.message&&e.meta.address===s.meta.address})),Object(ya["a"])(1),Object(Oa["a"])()));return u.pipe(Object(fo["a"])((function(e){return e.pipe(Object(va["a"])(3e4))})),Object(kr["a"])(t.pipe(Object(ze["a"])((function(e){return!!e.sent[i].lockExpiredProcessed||!!e.sent[i].channelClosed})))))})))})))},To=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(At)),Object(xr["a"])(t),Object(Ar["a"])((function(t){for(var n=Oo(t,2),r=n[0].payload.blockNumber,a=n[1],o=[],i=function(){var t=Oo(s[c],2),n=t[0],a=t[1];if(a.unlock||a.lockExpired||a.channelClosed||a.transfer[1].lock.expiration.gte(r))return"continue";var i=n,u=Object(Ue["a"])(Object(vr["a"])($n(void 0,{secrethash:i})),e.pipe(Object(ze["a"])((function(e){return Object(Re["isActionOf"])([Hn,Vn],e)&&e.meta.secrethash===i})),Object(ya["a"])(1),Object(Oa["a"])()));o.push(u),o.push(Object(vr["a"])(Kn(new Error("transfer expired at block=".concat(a.transfer[1].lock.expiration.toString())),{secrethash:i})))},c=0,s=Object.entries(a.sent);c<s.length;c++)i();return Ue["a"].apply(void 0,o)})))},Ro=function(e,t){return bo(e),t.pipe(Object(Ge["a"])(),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t.sent);case 1:if(!(n<r.length)){e.next=20;break}if(a=Oo(r[n],2),o=a[0],i=a[1],c=o,!(i.unlockProcessed||i.lockExpiredProcessed||i.channelClosed)){e.next=6;break}return e.abrupt("continue",17);case 6:return e.next=8,Gt(void 0,{address:i.transfer[1].target});case 8:if(i.transferProcessed){e.next=11;break}return e.next=11,Rn({message:i.transfer[1],fee:i.fee},{secrethash:c});case 11:if(!i.unlock){e.next=14;break}return e.next=14,Ln({message:i.unlock[1]},{secrethash:c});case 14:if(!i.lockExpired){e.next=17;break}return e.next=17,Hn({message:i.lockExpired[1]},{secrethash:c});case 17:n++,e.next=1;break;case 20:case"end":return e.stop()}}),e)}))))},Io=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(J).is(o)){e.next=4;break}return e.abrupt("return");case 4:i=void 0,c=0,s=Object.entries(a.sent);case 6:if(!(c<s.length)){e.next=14;break}if(u=Oo(s[c],2),p=u[0],l=u[1],!l.transfer[1].message_identifier.eq(o.message_identifier)||l.transfer[1].recipient!==r.meta.address){e.next=11;break}return i=p,e.abrupt("break",14);case 11:c++,e.next=6;break;case 14:if(i){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,In({message:o},{secrethash:i});case 18:case"end":return e.stop()}}),e)}))))},Do=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(Q).is(o)){e.next=4;break}return e.abrupt("return");case 4:if(o.secrethash in a.secrets&&o.secrethash in a.sent){e.next=6;break}return e.abrupt("return");case 6:if(i=a.sent[o.secrethash].transfer[1],c=a.sent[o.secrethash].fee,s=i.lock.amount.sub(c),i.target===r.meta.address&&i.payment_identifier.eq(o.payment_identifier)){e.next=11;break}console.warn("Invalid SecretRequest for transfer",o,i),e.next=22;break;case 11:if(o.expiration.lte(i.lock.expiration)&&o.expiration.gt(a.blockNumber)){e.next=15;break}console.warn("SecretRequest for expired transfer",o,i),e.next=22;break;case 15:if(o.amount.gte(s)){e.next=19;break}console.warn("SecretRequest for amount too small!",o,i),e.next=22;break;case 19:return o.amount.eq(s)||console.warn("Accepted SecretRequest for amount different than sent",o,i),e.next=22,Fn({message:o},{secrethash:o.secrethash});case 22:case"end":return e.stop()}}),e)}))))},Fo=function(e,t,n){var r=n.signer;return t.pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Fn)),Object(Ze["a"])((function(e){return t.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(t){var n,a=t.sent[e.meta.secrethash].transfer[1].target;if(t.sent[e.meta.secrethash].secretReveal)n=Object(vr["a"])(t.sent[e.meta.secrethash].secretReveal[1]);else{var o={type:q.SECRET_REVEAL,message_identifier:hn(),secret:t.secrets[e.meta.secrethash].secret};n=Object(Me["a"])(Nn(r,o))}return n.pipe(Object(Xe["a"])(Ae.a.mark((function t(n){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn({message:n},e.meta);case 2:return t.next=4,rr({message:n},{address:a});case 4:case"end":return t.stop()}}),t)}))))})))})))})))},Mo=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(ee).is(o)){e.next=4;break}return e.abrupt("return");case 4:if(i=dn(o.secret),i in a.sent&&r.meta.address===a.sent[i].transfer[1].recipient&&!a.sent[i].channelClosed&&!a.sent[i].unlock){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Dn({secret:o.secret},{secrethash:i});case 9:return e.next=11,Bn(void 0,{secrethash:i});case 11:case"end":return e.stop()}}),e)}))))},Bo=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(J).is(o)){e.next=4;break}return e.abrupt("return");case 4:c=0,s=Object.entries(a.sent);case 5:if(!(c<s.length)){e.next=13;break}if(u=Oo(s[c],2),p=u[0],l=u[1],!l.unlock||!l.unlock[1].message_identifier.eq(o.message_identifier)||l.transfer[1].recipient!==r.meta.address){e.next=10;break}return i=p,e.abrupt("break",13);case 10:c++,e.next=5;break;case 13:if(i){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,Zn({balanceProof:Sn(a.sent[i].unlock[1])},{secrethash:i});case 17:return e.next=19,Un({message:o},{secrethash:i});case 19:case"end":return e.stop()}}),e)}))))},Lo=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(J).is(o)){e.next=4;break}return e.abrupt("return");case 4:c=0,s=Object.entries(a.sent);case 5:if(!(c<s.length)){e.next=13;break}if(u=Oo(s[c],2),p=u[0],l=u[1],!l.lockExpired||!l.lockExpired[1].message_identifier.eq(o.message_identifier)||l.transfer[1].recipient!==r.meta.address){e.next=10;break}return i=p,e.abrupt("break",13);case 10:c++,e.next=5;break;case 13:if(i){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,Wn({message:o},{secrethash:i});case 17:case"end":return e.stop()}}),e)}))))},Uo=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Mt,Bt])),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s,u,p,l;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Oo(t,2),r=n[0],a=n[1],o=0,i=Object.entries(a.sent);case 2:if(!(o<i.length)){e.next=22;break}if(c=Oo(i[o],2),s=c[0],u=c[1],p=s,l=u.transfer[1],l.token_network_address===r.meta.tokenNetwork&&l.recipient===r.meta.partner){e.next=7;break}return e.abrupt("continue",19);case 7:if(u.secretReveal||u.unlock){e.next=12;break}return e.next=10,Kn(new Error("Channel closed before revealing or unlocking"),{secrethash:p});case 10:e.next=19;break;case 12:if(!a.sent[p].unlock){e.next=17;break}return e.next=15,Zn({balanceProof:Sn(a.sent[p].unlock[1])},{secrethash:p});case 15:e.next=19;break;case 17:return e.next=19,Zn({},{secrethash:p});case 19:o++,e.next=2;break;case 22:case"end":return e.stop()}}),e)}))))},$o=function(e,t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(xr["a"])(t),Object(Xe["a"])(Ae.a.mark((function e(t){var n,r,a,o,i,c,s;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Oo(t,2),r=n[0],a=n[1],o=r.payload.message,o&&he(ie).is(o)){e.next=4;break}return e.abrupt("return");case 4:if(i=o.lock.secrethash,i in a.sent){e.next=7;break}return e.abrupt("return");case 7:if(c=Oo(a.sent[i].transfer,2),s=c[1],o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&o.lock.amount.eq(s.lock.amount)&&o.lock.expiration.eq(s.lock.expiration)&&!a.sent[i].unlock&&!a.sent[i].lockExpired&&!a.sent[i].channelClosed&&!o.lock.expiration.lte(a.blockNumber)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,qn({message:o},{secrethash:i});case 12:return e.next=14,Kn(new Error("transfer refunded"),{secrethash:i});case 14:case"end":return e.stop()}}),e)}))))},Ho=function(e,t,n){bo(t);var r=n.signer,a=new Ta(32);return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(Ze["a"])((function(e){var t=e.payload.message;if(!t||!(he(oe).is(t)||he(ie).is(t)||he(se).is(t)||he(de).is(t)))return He["a"];var n=t.message_identifier,o=n.toString(),i=a.get(o);if(i)return Object(vr["a"])(rr({message:i},e.meta));var c={type:q.PROCESSED,message_identifier:n};return Object(Me["a"])(Nn(r,c)).pipe(Object(Cr["a"])((function(e){return a.put(o,e)})),Object(Ve["a"])((function(t){return rr({message:t},e.meta)})))})))},Vo=function(e){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(ir)),Object(Xe["a"])(Ae.a.mark((function e(t){var n;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload.message,n&&he(le).is(n)&&n.participant===t.meta.address){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Gn({message:n},{tokenNetwork:n.token_network_address,partner:n.participant,totalWithdraw:n.total_withdraw,expiration:n.expiration.toNumber()});case 5:case"end":return e.stop()}}),e)}))))},Wo=function(e){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Xn)),Object(Ve["a"])((function(e){return rr({message:e.payload.message},{address:e.meta.partner})})))},qo=n("3eda"),Zo=void 0;function Ko(e,t){return Xo(e)||Go(e,t)||zo()}function zo(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Go(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Xo(e){if(Array.isArray(e))return e}var Yo=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))};function Jo(e,t,n,r,a){if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(!(r in e.channels[n]))return"path: there's no direct channel with partner \"".concat(r,'"');var o=e.channels[n][r];if(o.state!==H.open)return'path: channel with "'.concat(r,'" in state "').concat(o.state,'" instead of "').concat(H.open,'"');var i=gt(o),c=i.ownCapacity;return!c.lt(a)||'path: channel with "'.concat(r,"\" don't have enough capacity=").concat(c.toString())}var Qo=Object(h["memoize"])((function(e){return Yo(Zo,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.functions.token());case 1:case"end":return t.stop()}}),t)})))}));function ei(e,t){var n=this,r=t.serviceRegistryContract,a=t.network,o=t.contractsInfo,i=t.config$,c=f["r"]({message:f["o"],network_info:f["r"]({chain_id:f["h"](a.chainId),registry_address:f["h"](o.TokenNetworkRegistry.address)}),operator:f["o"],payment_address:N,price_info:E(32),version:f["o"]}),s=N.is(e)?Object(Me["a"])(r.functions.urls(e)):Object(vr["a"])(e);return s.pipe(Object(xr["a"])(i),Object(Xe["a"])((function(e){var t=Ko(e,2),a=t[0],o=t[1].httpTimeout;if(!a||!a.includes("://"))throw new Error("Invalid URL: ".concat(a));var i=Date.now();return Object(wa["fromFetch"])("".concat(a,"/api/v1/info")).pipe(Object(ba["a"])(o),Object(Xe["a"])((function(e){return Yo(n,void 0,void 0,Ae.a.mark((function t(){return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=O,t.t1=c,t.t2=$,t.next=5,e.text();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t5=(0,t.t0)(t.t1,t.t4),t.next=10,Qo(r);case 10:return t.t6=t.sent,t.abrupt("return",[t.t5,t.t6]);case 12:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){var t=Ko(e,2),n=t[0],r=t[1];return{address:n.payment_address,url:a,rtt:Date.now()-i,price:n.price_info,token:r}})))})))}function ti(e,t){return Object(Me["a"])(e).pipe(Object(Xe["a"])((function(e){return ei(e,t).pipe(Object(jr["a"])((function(t){return console.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),He["a"]})))}),5),Object(ma["a"])(),Object(Ve["a"])((function(e){if(!e.length)throw new Error("Could not validate any PFS info. Possibly out-of-sync with PFSs version.");return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}var ni=f["l"](f["f"]([f["r"]({result:f["b"](f["l"](f["r"]({path:f["m"](N),estimated_fee:x(32)})))}),f["k"]({feedback_token:f["o"]})])),ri=f["b"](f["l"](f["r"]({path:f["m"](N),fee:x(32)}))),ai=f["l"](f["r"]({address:N,url:f["o"],rtt:f["j"],price:E(32),token:N})),oi=void 0;function ii(e){return ui(e)||si(e)||ci()}function ci(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function si(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function ui(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function pi(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function li(e,t){return bi(e)||di(e,t)||fi()}function fi(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function di(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function bi(e){if(Array.isArray(e))return e}var mi=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))},hi=function(e,t,n){return Object(Tr["a"])(t,Da(e),n.config$,e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(pr)),Object(We["a"])("payload","pfsList"),Object(ja["a"])([]))).pipe(Object(gr["a"])(1,void 0,(function(t){return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(cr)),Object(Ze["a"])((function(e){return t.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(r){var a=li(r,3),o=a[0],i=a[1],c=a[2],s=c.pfs,u=c.httpTimeout,p=c.pfsSafetyMargin,l=e.meta,f=l.tokenNetwork,b=l.target;if(!(f in o.channels))throw new Error("PFS: unknown tokenNetwork ".concat(f));if(!(b in i)||!i[b].payload.available)throw new Error("PFS: target ".concat(b," not online"));if(e.payload.paths)return Object(vr["a"])(e.payload.paths);if(!0===Jo(o,i,f,b,e.meta.value))return Object(vr["a"])([{path:[o.address,b],fee:d["Zero"]}]);if(e.payload.pfs||null!==s){var y=e.payload.pfs?Object(vr["a"])(e.payload.pfs):Object(h["isNil"])(s)?t.pipe(Object(We["a"])(3),Object(Ge["a"])((function(e){return e.length>0})),Object(Xe["a"])((function(e){return ti(e,n)})),Object(Cr["a"])((function(e){return console.log("Auto-selecting best PFS from:",e)})),Object(We["a"])(0)):ei(s,n);return y.pipe(Object(Xe["a"])((function(t){return Object(wa["fromFetch"])("".concat(t.url,"/api/v1/").concat(f,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:Object(m["stringify"])({from:n.address,to:b,value:E(32).encode(e.meta.value),max_paths:10})})})),Object(ba["a"])(u),Object(Xe["a"])((function(e){return mi(oi,void 0,void 0,Ae.a.mark((function t(){var n;return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.text();case 2:if(n=t.sent,e.ok){t.next=5;break}throw new Error("PFS: paths request: code=".concat(e.status,' => body="').concat(n,'"'));case 5:return t.abrupt("return",O(ni,$(n)));case 6:case"end":return t.stop()}}),t)})))})),Object(Ve["a"])((function(e){return e.result.map((function(e){return{path:e.path,fee:e.estimated_fee.mul(Math.round(1e6*p)).div(1e6)}}))})))}throw new Error("PFS disabled and no direct route available")})),Object(xr["a"])(t),Object(Ve["a"])((function(t){var n=li(t,2),r=n[0],a=li(n[1],2),o=a[0],i=a[1],c=[],s=new Set,u=!0,p=!1,l=void 0;try{for(var f,d=r[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var b=f.value,m=b.path,h=b.fee;m[0]===o.address&&(m=m.slice(1));var y=m[0];if(!s.has(y)){var v=c.length?y!==c[0].path[0]?"path: already selected another recipient":!h.gt(c[0].fee)||"path: already selected a smaller fee":Jo(o,i,e.meta.tokenNetwork,y,e.meta.value.add(h));!0===v?c.push({path:m,fee:h}):(console.log("Invalidated received route. Reason:",v,"Route:",m),s.add(y))}}}catch(O){p=!0,l=O}finally{try{u||null==d.return||d.return()}finally{if(p)throw l}}if(!c.length)throw new Error("PFS: no valid routes found");return sr({paths:c},e.meta)})),Object(jr["a"])((function(t){return Object(vr["a"])(ur(t,e.meta))})))})))})))},yi=function(e,t,n){var r=n.address,a=n.network,o=n.signer,i=n.config$;return e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(It)),Object(ze["a"])((function(e){return e.payload.participant===r})),Object(qo["a"])(1e4),Object(xr["a"])(t,i),Object(ze["a"])((function(e){var t=li(e,3),n=t[2].pfsRoom;return!!n})),Object(Xe["a"])((function(e){var t=li(e,3),n=t[0],i=t[1],c=t[2],s=c.revealTimeout,u=c.pfsRoom,p=i.channels[n.meta.tokenNetwork][n.meta.partner];if(!p||p.state!==H.open)return He["a"];var l=gt(p),f=l.ownCapacity,m=l.partnerCapacity,h={type:q.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(b["bigNumberify"])(a.chainId),token_network_address:n.meta.tokenNetwork,channel_identifier:Object(b["bigNumberify"])(p.id)},updating_participant:r,other_participant:n.meta.partner,updating_nonce:p.own.balanceProof?p.own.balanceProof.nonce:d["Zero"],other_nonce:p.partner.balanceProof?p.partner.balanceProof.nonce:d["Zero"],updating_capacity:f,other_capacity:m,reveal_timeout:s};return Object(Me["a"])(Nn(o,h)).pipe(Object(Ve["a"])((function(e){return or({message:e},{roomName:u})})))})),Object(jr["a"])((function(e){return console.error("Error trying to generate & sign PFSCapacityUpdate",e),He["a"]})))},vi=function(e,t,n){pi(e);var r=n.serviceRegistryContract,a=n.contractsInfo,o=n.config$;return t.pipe(Object(We["a"])("blockNumber"),Object(qe["a"])(),Object(gr["a"])(1,void 0,(function(e){return o.pipe(Object(We["a"])("pfs"),Object(qe["a"])(),Object(_r["a"])((function(t){return void 0!==t?He["a"]:Vr(r,[r.filters.RegisteredService(null,null,null,null)],Object(vr["a"])(a.ServiceRegistry.block_number),e).pipe(Object(Er["a"])((function(e){var t=li(e,1),n=t[0];return n})),Object(Xe["a"])((function(e){return e.pipe(Object(_r["a"])((function(e){var t=li(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return He["a"];var i=o.sub(a).lt(d["Two"].pow(31))?Object(vr["a"])({service:n,valid:!1}).pipe(Object(va["a"])(new Date(o.toNumber()))):He["a"];return Object(Ue["a"])(Object(vr["a"])({service:n,valid:!0}),i)})))})),Object(Ke["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(ii(e),[n]):e}),[]),Object(qe["a"])(),Object(qo["a"])(1e3),Object(Ve["a"])((function(e){return pr({pfsList:e})})))})))})))},Oi=Object.assign({},s,u,p,l),ki=function(e,t,n){var r=e.pipe(Object(ze["a"])(Object(Re["isActionOf"])(lr))),a=e.pipe(Object(Or["a"])(Object(h["negate"])(Object(Re["isActionOf"])(lr)),!0)),o=t.pipe(Object(kr["a"])(r));return o.subscribe(n.stateOutput$),a.subscribe(n.actionOutput$),o.pipe(Object(We["a"])("config"),Object(qe["a"])()).subscribe(n.config$),Object(Me["a"])(Object.values(Oi)).pipe(Object(Xe["a"])((function(e){return e(a,o,n)})),Object(jr["a"])((function(e){return Object(vr["a"])(lr({reason:e}))})),Object(kr["a"])(r))};function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e,t){return xi(e)||_i(e,t)||gi()}function gi(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _i(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xi(e){if(Array.isArray(e))return e}function Ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t,n){return t&&Ai(e.prototype,t),n&&Ai(e,n),e}var Ci=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r["throw"](e))}catch(t){o(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,c)}s((r=r.apply(e,t||[])).next())}))},Pi=function(){function e(t,n,r,a,o){var i=this;Ei(this,e),this.resolveName=t.resolveName.bind(t);var c=o.address;t.resetEventsBlock(o.blockNumber+1);var s=new De["a"](o);this.state$=s;var u=new Fe["a"];this.action$=u,this.channels$=s.pipe(Object(Ve["a"])((function(e){return Object(h["transform"])(e.channels,(function(t,n,r){var a=Object(h["findKey"])(e.tokens,(function(e){return e===r}));a&&(t[a]=Object(h["transform"])(n,(function(e,t,n){var o=gt(t),i=o.ownDeposit,c=o.partnerDeposit,s=o.ownBalance,u=o.ownCapacity;e[n]=Object.assign({state:t.state},Object(h["pick"])(t,["id","settleTimeout","openBlock","closeBlock"]),{token:a,tokenNetwork:r,partner:n,ownDeposit:i,partnerDeposit:c,balance:s,capacity:u})})))}))}))),this.transfers$=s.pipe(Object(We["a"])("sent"),Object(qe["a"])(),Object(Ze["a"])((function(e){return Object(Me["a"])(Object.entries(e))})),Object(Ke["a"])((function(e,t){var n=e.acc,r=wi(t,2),a=r[0],o=r[1];return n[a]===o?{acc:n}:{acc:Object.assign({},n,ji({},a,o)),changed:o}}),{acc:{}}),Object(ze["a"])((function(e){var t=e.changed;return!!t})),Object(Ve["a"])((function(e){var t=e.changed;return t})),Object(Ve["a"])(yn)),this.events$=u.pipe(Object(ze["a"])(Object(Re["isActionOf"])(Object.values(br)))),this.getTokenInfo=Object(h["memoize"])((function(e){return Ci(i,void 0,void 0,Ae.a.mark((function t(){var n,r,a,o,i,c,s;return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(N.is(e)){t.next=2;break}throw new Error("Invalid address");case 2:if(e in this.state.tokens){t.next=4;break}throw new Error('token "'.concat(e,'" not monitored'));case 4:return n=this.deps.getTokenContract(e),t.next=7,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(Object(h["constant"])(void 0)),n.functions.symbol().catch(Object(h["constant"])(void 0))]);case 7:return r=t.sent,a=wi(r,4),o=a[0],i=a[1],c=a[2],s=a[3],t.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 14:case"end":return t.stop()}}),t,this)})))}));var p=new Be["a"](1);this.pfsList$=p,u.pipe(Object(ze["a"])(Object(Re["isActionOf"])(pr)),Object(We["a"])("payload","pfsList")).subscribe(p);var l=[Object(Ie["createLogger"])({level:function(){return void 0!==i.deps.config$.value.logger?i.deps.config$.value.logger:""}})];this.deps={stateOutput$:s,actionOutput$:u,config$:new De["a"](o.config),matrix$:new Le["a"],provider:t,network:n,signer:r,address:c,contractsInfo:a,registryContract:et.connect(a.TokenNetworkRegistry.address,r),getTokenNetworkContract:Object(h["memoize"])((function(e){return ot.connect(e,r)})),getTokenContract:Object(h["memoize"])((function(e){return pt.connect(e,r)})),serviceRegistryContract:mt.connect(a.ServiceRegistry.address,r)},this.epicMiddleware=Object(Te["a"])({dependencies:this.deps}),this.store=Object(Ne["b"])(yr,o,Ne["a"].apply(void 0,l.concat([this.epicMiddleware])))}return Si(e,[{key:"start",value:function(){if(!this.epicMiddleware)throw new Error("Already started or stopped!");this.epicMiddleware.run(ki),this.epicMiddleware=void 0,this.store.dispatch(fr({config:{}}))}},{key:"stop",value:function(){this.epicMiddleware=null,this.store.dispatch(lr({reason:ge.STOP}))}},{key:"getBlockNumber",value:function(){return Ci(this,void 0,void 0,Ae.a.mark((function e(){return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateConfig",value:function(e){this.store.dispatch(fr({config:e}))}},{key:"getBalance",value:function(e){if(e=e||this.address,!N.is(e))throw new Error("Invalid address");return this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return Ci(this,void 0,void 0,Ae.a.mark((function n(){var r;return Ae.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=t||this.address,N.is(t)&&N.is(e)){n.next=3;break}throw new Error("Invalid address");case 3:if(e in this.state.tokens){n.next=5;break}throw new Error('token "'.concat(e,'" not monitored'));case 5:return r=this.deps.getTokenContract(e),n.abrupt("return",r.functions.balanceOf(t));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenList",value:function(){return Ci(this,void 0,void 0,Ae.a.mark((function e(){return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.state$.pipe(Object(Ge["a"])((function(e){return!Object(h["isEmpty"])(e.tokens)})),Object(Ve["a"])((function(e){return Object.keys(e.tokens)}))).toPromise());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ci(this,void 0,void 0,Ae.a.mark((function r(){var a,o,i;return Ae.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(N.is(e)&&N.is(t)){r.next=2;break}throw new Error("Invalid address");case 2:if(a=this.state,o=a.tokens[e],o){r.next=6;break}throw new Error("Unknown token network");case 6:return i=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Pt,Nt])),Object(ze["a"])((function(e){return e.meta.tokenNetwork===o&&e.meta.partner===t})),Object(Ge["a"])(),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Nt,e))throw e.payload;return e.payload.txHash}))).toPromise(),this.store.dispatch(Ct(Object.assign({},n),{tokenNetwork:o,partner:t})),r.abrupt("return",i);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"depositChannel",value:function(e,t,n){return Ci(this,void 0,void 0,Ae.a.mark((function r(){var a,o,i,c;return Ae.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(N.is(e)&&N.is(t)){r.next=2;break}throw new Error("Invalid address");case 2:if(a=this.state,o=a.tokens[e],o){r.next=6;break}throw new Error("Unknown token network");case 6:return i=O(E(32),n),c=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([It,Dt])),Object(ze["a"])((function(e){return e.meta.tokenNetwork===o&&e.meta.partner===t})),Object(Ge["a"])(),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Dt,e))throw e.payload;return e.payload.txHash}))).toPromise(),this.store.dispatch(Rt({deposit:i},{tokenNetwork:o,partner:t})),r.abrupt("return",c);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"closeChannel",value:function(e,t){return Ci(this,void 0,void 0,Ae.a.mark((function n(){var r,a,o;return Ae.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(N.is(e)&&N.is(t)){n.next=2;break}throw new Error("Invalid address");case 2:if(r=this.state,a=r.tokens[e],a){n.next=6;break}throw new Error("Unknown token network");case 6:return o=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Bt,Lt])),Object(ze["a"])((function(e){return e.meta.tokenNetwork===a&&e.meta.partner===t})),Object(Ge["a"])(),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Lt,e))throw e.payload;return e.payload.txHash}))).toPromise(),this.store.dispatch(Mt(void 0,{tokenNetwork:a,partner:t})),n.abrupt("return",o);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"settleChannel",value:function(e,t){return Ci(this,void 0,void 0,Ae.a.mark((function n(){var r,a,o;return Ae.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(N.is(e)&&N.is(t)){n.next=2;break}throw new Error("Invalid address");case 2:if(r=this.state,a=r.tokens[e],a){n.next=6;break}throw new Error("Unknown token network");case 6:return o=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Ht,Vt])),Object(ze["a"])((function(e){return e.meta.tokenNetwork===a&&e.meta.partner===t})),Object(Ge["a"])(),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Vt,e))throw e.payload;return e.payload.txHash}))).toPromise(),this.store.dispatch($t(void 0,{tokenNetwork:a,partner:t})),n.abrupt("return",o);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getAvailability",value:function(e){return Ci(this,void 0,void 0,Ae.a.mark((function t(){var n;return Ae.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(N.is(e)){t.next=2;break}throw new Error("Invalid address");case 2:return n=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Xt,Yt])),Object(ze["a"])((function(t){return t.meta.address===e})),Object(Ge["a"])(),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Yt,e))throw e.payload;return e.payload}))).toPromise(),this.store.dispatch(Gt(void 0,{address:e})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"transfer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ci(this,void 0,void 0,Ae.a.mark((function a(){var o,i,c,s,u,p,l,f=this;return Ae.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(N.is(e)&&N.is(t)){a.next=2;break}throw new Error("Invalid address");case 2:if(o=this.state.tokens[e],o){a.next=5;break}throw new Error("Unknown token network");case 5:if(i=O(E(32),n),c=r.paymentId?O(E(8),r.paymentId):mn(),s=r.paths?O(ri,r.paths):void 0,u=r.pfs?O(ai,r.pfs):void 0,void 0===r.secret||C.is(r.secret)){a.next=8;break}throw new Error("Invalid options.secret");case 8:if(void 0===r.secrethash||S.is(r.secrethash)){a.next=10;break}throw new Error("Invalid options.secrethash");case 10:if(p=r.secret?r.secret:r.secrethash?void 0:bn(),l=r.secrethash||dn(p),!p||dn(p)===l){a.next=13;break}throw new Error("Provided secrethash must match the sha256 hash of provided secret");case 13:return a.abrupt("return",Object(Ue["a"])(this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([sr,ur])),Object(Ge["a"])((function(e){return e.meta.tokenNetwork===o&&e.meta.target===t&&e.meta.value.eq(n)})),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(ur,e))throw e.payload;return e.payload.paths}))),Object($e["a"])((function(){return f.store.dispatch(cr({paths:s,pfs:u},{tokenNetwork:o,target:t,value:i})),He["a"]}))).pipe(Object(Xe["a"])((function(e){return Object(Ue["a"])(f.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([Rn,Kn])),Object(Ge["a"])((function(e){return e.meta.secrethash===l})),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(Kn,e))throw e.payload;return l}))),Object($e["a"])((function(){return f.store.dispatch(Tn({tokenNetwork:o,target:t,value:i,paths:e,paymentId:c,secret:p},{secrethash:l})),He["a"]})))}))).toPromise());case 14:case"end":return a.stop()}}),a,this)})))}},{key:"findRoutes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ci(this,void 0,void 0,Ae.a.mark((function a(){var o,i,c,s;return Ae.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(N.is(e)&&N.is(t)){a.next=2;break}throw new Error("Invalid address");case 2:if(o=this.state.tokens[e],o){a.next=5;break}throw new Error("Unknown token network");case 5:return i=O(E(32),n),c=r.pfs?O(ai,r.pfs):void 0,s=this.action$.pipe(Object(ze["a"])(Object(Re["isActionOf"])([sr,ur])),Object(Ge["a"])((function(e){return e.meta.tokenNetwork===o&&e.meta.target===t&&e.meta.value.eq(n)})),Object(Ve["a"])((function(e){if(Object(Re["isActionOf"])(ur,e))throw e.payload;return e.payload.paths}))).toPromise(),this.store.dispatch(cr({pfs:c},{tokenNetwork:o,target:t,value:i})),a.abrupt("return",s);case 9:case"end":return a.stop()}}),a,this)})))}},{key:"findPFS",value:function(){return Ci(this,void 0,void 0,Ae.a.mark((function e(){var t=this;return Ae.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===this.config.pfs){e.next=2;break}throw new Error("config.pfs isn't auto (undefined)");case 2:return e.abrupt("return",this.pfsList$.pipe(Object(Ge["a"])(),Object(Xe["a"])((function(e){return ti(e,t.deps)}))).toPromise());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"network",get:function(){return this.deps.network}},{key:"config",get:function(){return this.state.config}}],[{key:"create",value:function(t,n,r,a,o){return Ci(this,void 0,void 0,Ae.a.mark((function i(){var c,s,u,p,l,f,d,b,m,y,v,O,k;return Ae.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return d=function(e){return e&&"function"===typeof e.getItem},c="string"===typeof t?new Pe["JsonRpcProvider"](t):t instanceof Pe["JsonRpcProvider"]?t:new Pe["Web3Provider"](t),qr(c),i.next=5,c.getNetwork();case 5:if(s=i.sent,a){i.next=17;break}i.t0=s.name,i.next="rinkeby"===i.t0?10:"ropsten"===i.t0?12:"goerli"===i.t0?14:16;break;case 10:return a=Object.assign({},vt.contracts,jt.contracts),i.abrupt("break",17);case 12:return a=Object.assign({},yt.contracts,kt.contracts),i.abrupt("break",17);case 14:return a=Object.assign({},Ot.contracts,wt.contracts),i.abrupt("break",17);case 16:throw new Error("No deploy info provided nor recognized network: ".concat(JSON.stringify(s)));case 17:if(!Se["Signer"].isSigner(n)){i.next=29;break}if(n.provider!==c){i.next=22;break}u=n,i.next=27;break;case 22:if(!(n instanceof Ce["Wallet"])){i.next=26;break}u=n.connect(c),i.next=27;break;case 26:throw new Error("Signer ".concat(n," not connected to ").concat(c));case 27:i.next=47;break;case 29:if("number"!==typeof n){i.next=33;break}u=c.getSigner(n),i.next=47;break;case 33:if(!N.is(n)){i.next=42;break}return i.next=36,c.listAccounts();case 36:if(p=i.sent,p.includes(n)){i.next=39;break}throw new Error('Account "'.concat(n,'" not found in provider, got=').concat(p));case 39:u=c.getSigner(n),i.next=47;break;case 42:if(!P.is(n)){i.next=46;break}u=new Ce["Wallet"](n,c),i.next=47;break;case 46:throw new Error("String account must be either a 0x-encoded address or private key");case 47:return i.next=49,u.getAddress();case 49:if(l=i.sent,f=we({network:s,address:l,contractsInfo:a},{config:o}),b=void 0,m=void 0,!r||!d(r)){i.next=72;break}return y="raiden_".concat(s.name||s.chainId,"_").concat(a.TokenNetworkRegistry.address,"_").concat(l),i.t1=h["merge"],i.t2={},i.t3=f,i.t4=$,i.next=60,r.getItem(y);case 60:if(i.t5=i.sent,i.t5){i.next=63;break}i.t5="null";case 63:i.t6=i.t5,i.t7=(0,i.t4)(i.t6),v=(0,i.t1)(i.t2,i.t3,i.t7),f=je(v),O=Object(h["debounce"])((function(e){r.setItem(y,ke(e))}),1e3,{maxWait:5e3}),b=O,m=function(){return O.flush()},i.next=73;break;case 72:r&&Oe.is(r)?f=r:r&&(f=je(r));case 73:if(l===f.address){i.next=75;break}throw new Error('Mismatch between provided account and loaded state: "'.concat(l,'" !== "').concat(f.address,'"'));case 75:if(s.chainId===f.chainId&&a.TokenNetworkRegistry.address===f.registry){i.next=77;break}throw new Error("Mismatch between network or registry address and loaded state");case 77:return k=new e(c,s,u,a,f),b&&k.state$.subscribe(b,m,m),i.abrupt("return",k);case 80:case"end":return i.stop()}}),i)})))}}]),e}();n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return Pi}))}});
//# sourceMappingURL=app.9b60ef41.js.map